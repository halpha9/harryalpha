{"version":3,"file":"index.esm.js","sources":["../src/core/components/react-track-elements/createNoopTrackerScope.tsx","../src/core/components/react-track-elements/createUseReporter.tsx","../src/core/components/react-track-elements/createStore.ts","../src/core/components/react-track-elements/createTrackerScope.tsx","../src/core/changeIndicators/constants.ts","../src/core/changeIndicators/tracker.tsx","../src/core/changeIndicators/ConnectorContext.ts","../src/core/changeIndicators/ChangeFieldWrapper.tsx","../src/core/util/useUnique.ts","../src/core/util/createHookFromObservableFactory.ts","../src/core/util/isNonNullable.ts","../src/core/util/draftUtils.ts","../src/core/util/empty.ts","../src/core/util/globalScope.ts","../src/core/util/isArray.ts","../src/core/util/isRecord.ts","../src/core/util/isString.ts","../src/core/util/isTruthy.ts","../src/core/util/resizeObserver.ts","../src/core/util/schemaUtils.ts","../src/core/util/searchUtils.ts","../src/core/util/uncaughtErrorHandler.ts","../src/core/util/useLoadable.ts","../src/core/util/useThrottledCallback.ts","../src/core/changeIndicators/ElementWithChangeBar.styled.tsx","../src/core/changeIndicators/ElementWithChangeBar.tsx","../src/core/changeIndicators/ChangeIndicator.tsx","../src/core/changeIndicators/ChangeIndicatorContext.ts","../src/core/components/scroll/scrollContext.ts","../src/core/components/scroll/hooks.ts","../src/core/components/scroll/scrollContainer.tsx","../src/core/components/scroll/scrollMonitor.tsx","../src/core/changeIndicators/helpers/findMostSpecificTarget.ts","../src/core/changeIndicators/helpers/isChangeBar.ts","../src/core/changeIndicators/helpers/scrollUtils.ts","../src/core/changeIndicators/helpers/scrollIntoView.ts","../src/core/changeIndicators/helpers/getOffsetsTo.ts","../src/core/changeIndicators/overlay/connectorPath.ts","../src/core/changeIndicators/overlay/mapConnectorToLine.ts","../src/core/changeIndicators/overlay/ClampedRect.tsx","../src/core/changeIndicators/overlay/Connector.styled.tsx","../src/core/changeIndicators/overlay/Connector.tsx","../src/core/changeIndicators/overlay/useResizeObserver.ts","../src/core/changeIndicators/overlay/ConnectorsOverlay.styled.tsx","../src/core/changeIndicators/overlay/ConnectorsOverlay.tsx","../src/core/changeIndicators/overlay/ChangeConnectorRoot.tsx","../src/core/components/NoJavascript.tsx","../src/core/components/globalErrorHandler/GlobalErrorHandler.tsx","../src/core/components/Favicons.tsx","../src/core/components/DefaultDocument.tsx","../src/core/components/InsufficientPermissionsMessage.tsx","../src/core/components/IntentButton.tsx","../src/core/components/PreviewCard.tsx","../src/core/components/TextWithTone.tsx","../src/core/store/_legacy/createMultiKeyWeakMap.ts","../src/core/store/_legacy/ResourceCacheProvider.tsx","../src/core/store/_legacy/cors/CorsOriginError.ts","../src/core/store/_legacy/authStore/storage.ts","../src/core/store/_legacy/authStore/createBroadcastChannel.ts","../src/core/store/_legacy/authStore/sessionId.ts","../src/core/store/_legacy/authStore/providerLogos.tsx","../src/core/store/_legacy/authStore/createLoginComponent.tsx","../src/core/store/_legacy/authStore/createAuthStore.ts","../src/core/store/_legacy/authStore/createMockAuthStore.ts","../src/core/store/_legacy/authStore/providerTitle.ts","../src/core/store/_legacy/connection-status/utils/catchWithCount.ts","../src/core/store/_legacy/connection-status/connection-status-store.ts","../src/core/studio/GlobalStyle.tsx","../src/core/config/defineConfig.ts","../src/core/config/definePlugin.ts","../src/core/schema/types/slug.ts","../src/core/schema/types/geopoint.ts","../src/core/schema/types/imageCrop.ts","../src/core/schema/types/imageHotspot.ts","../src/core/schema/types/assetSourceData.ts","../src/core/schema/types/imageAsset.ts","../src/core/schema/types/imagePalette.ts","../src/core/schema/types/imagePaletteSwatch.ts","../src/core/schema/types/imageDimensions.ts","../src/core/schema/types/imageMetadata.ts","../src/core/schema/types/fileAsset.ts","../src/core/schema/createSchema.ts","../src/core/schema/helpers.ts","../src/core/studioClient.ts","../src/core/form/components/FullscreenSpinner.tsx","../src/core/form/components/SpinnerWithText.tsx","../src/core/config/components/useMiddlewareComponents.ts","../src/core/form/utils/is.ts","../src/core/preview/components/_previewComponents.ts","../src/core/preview/components/SanityDefaultPreview.tsx","../src/core/preview/streams/resize.ts","../src/core/preview/streams/scroll.ts","../src/core/preview/streams/orientationChange.ts","../src/core/preview/streams/intersectionObservableFor.ts","../src/core/preview/streams/visibilityChange.ts","../src/core/preview/useVisibility.ts","../src/core/preview/useValuePreview.ts","../src/core/preview/components/_extractUploadState.ts","../src/core/preview/components/_constants.ts","../src/core/preview/components/PreviewLoader.tsx","../src/core/preview/utils/getPreviewPaths.ts","../src/core/preview/utils/getPreviewStateObservable.ts","../src/core/preview/utils/getPreviewValueWithFallback.tsx","../src/core/preview/constants.tsx","../src/core/preview/utils/portableText.ts","../src/core/preview/utils/keysOf.ts","../src/core/preview/utils/prepareForPreview.ts","../src/core/preview/utils/debounceCollect.ts","../src/core/preview/availability.ts","../src/core/preview/utils/props.ts","../src/core/preview/createPathObserver.ts","../src/core/preview/createPreviewObserver.ts","../src/core/preview/documentPair.ts","../src/core/preview/utils/optimizeQuery.ts","../src/core/preview/utils/hasEqualFields.ts","../src/core/preview/utils/isUniqueBy.ts","../src/core/preview/observeFields.ts","../src/core/preview/documentPreviewStore.ts","../src/core/search/common/utils.ts","../src/core/search/weighted/applyWeights.ts","../src/core/search/common/tokenize.ts","../src/core/search/weighted/createSearchQuery.ts","../src/core/search/weighted/createWeightedSearch.ts","../src/core/form/studio/inputs/client-adapters/reference.ts","../src/core/form/patch/PatchChannel.ts","../src/core/form/patch/patch.ts","../src/core/form/patch/PatchEvent.ts","../src/core/form/components/Alert.tsx","../src/core/form/hooks/usePrevious.ts","../src/core/form/hooks/useDidUpdate.ts","../src/core/form/FormBuilderContext.ts","../src/core/form/useFormBuilder.ts","../src/core/form/inputs/arrays/ArrayOfObjectsInput/ArrayOfObjectsFunctions.tsx","../src/core/form/inputs/PortableText/_legacyDefaultParts/Markers.tsx","../src/core/form/inputs/PortableText/_legacyDefaultParts/CustomMarkers.tsx","../src/core/form/studio/contexts/FormCallbacks.tsx","../src/core/form/studio/contexts/Presence.tsx","../src/core/form/studio/contexts/Validation.tsx","../src/core/form/FormBuilderProvider.tsx","../src/core/form/studio/FormProvider.tsx","../src/core/form/studio/FormBuilder.tsx","../src/core/form/studio/contexts/ReferenceInputOptions.tsx","../src/core/form/studio/contexts/reviewChanges/ReviewChangesContext.ts","../src/core/form/studio/contexts/reviewChanges/useReviewChanges.ts","../src/core/form/hooks/useScrollIntoViewOnFocusWithin.ts","../src/core/form/utils/randomKey.ts","../src/core/presence/DocumentPreviewPresence.tsx","../src/core/presence/constants.ts","../src/core/presence/utils.ts","../src/core/presence/FieldPresence.styled.tsx","../src/core/presence/context.tsx","../src/core/presence/PresenceTooltip.tsx","../src/core/presence/overlay/tracker.ts","../src/core/presence/FieldPresence.tsx","../src/core/presence/PresenceScope.tsx","../src/core/presence/overlay/intersectionObserver.ts","../src/core/presence/overlay/WithIntersection.tsx","../src/core/presence/overlay/RegionsWithIntersections.styled.tsx","../src/core/presence/overlay/RegionsWithIntersections.tsx","../src/core/presence/overlay/StickyOverlay.tsx","../src/core/presence/overlay/PresenceOverlay.tsx","../src/core/form/components/formField/FormFieldValidationStatus.tsx","../src/core/form/components/formField/FormFieldHeaderText.tsx","../src/core/form/components/formField/FormFieldHeader.tsx","../src/core/form/components/formField/FormField.tsx","../src/core/form/components/formField/styles.ts","../src/core/form/components/formField/FormFieldSetLegend.tsx","../src/core/form/components/formField/FormFieldSet.tsx","../src/core/form/components/formField/FormFieldStatus.tsx","../src/core/form/inputs/arrays/common/sortable.tsx","../src/core/form/inputs/arrays/common/DragHandle.tsx","../src/core/form/inputs/arrays/layouts/RowLayout.tsx","../src/core/form/components/Details.tsx","../src/core/form/components/AlertStrip.tsx","../src/core/form/utils/createProtoValue.ts","../src/core/form/inputs/arrays/ArrayOfObjectsInput/createProtoArrayValue.ts","../src/core/form/inputs/arrays/ArrayOfObjectsInput/InsertMenu.tsx","../src/core/form/inputs/ReferenceInput/useReferenceInfo.ts","../src/core/form/inputs/ReferenceInput/utils/TimeAgo.tsx","../src/core/form/inputs/ReferenceInput/ReferencePreview.tsx","../src/core/form/inputs/ReferenceInput/PreviewReferenceValue.tsx","../src/core/form/inputs/ReferenceInput/ReferenceItem.tsx","../src/core/form/utils/asserters.ts","../src/core/form/utils/ensureKey.ts","../src/core/form/studio/utils/withMaxConcurrency.ts","../src/core/form/studio/inputs/client-adapters/assets.ts","../src/core/form/studio/uploads/image/readExif.ts","../src/core/form/studio/uploads/image/orient.ts","../src/core/form/studio/uploads/image/rotateImage.ts","../src/core/form/studio/uploads/constants.ts","../src/core/form/studio/uploads/utils.ts","../src/core/form/studio/uploads/uploadImage.ts","../src/core/form/studio/uploads/uploadFile.ts","../src/core/form/studio/uploads/uploaders.ts","../src/core/form/studio/uploads/accepts.ts","../src/core/form/studio/uploads/resolveUploader.ts","../src/core/form/store/utils/isEmptyItem.ts","../src/core/form/members/common/resolveInitialArrayValues.ts","../src/core/form/members/object/fields/ArrayOfObjectsField.tsx","../src/core/form/members/object/fields/PrimitiveField.tsx","../src/core/form/members/object/fields/ObjectField.tsx","../src/core/form/studio/uploads/file/readAsText.ts","../src/core/form/members/object/fields/ArrayOfPrimitivesField.tsx","../src/core/form/members/object/fields/asserters.ts","../src/core/form/members/object/MemberField.tsx","../src/core/environment/index.ts","../src/core/form/inputs/InvalidValueInput/converters.ts","../src/core/form/inputs/InvalidValueInput/UntypedValueInput.tsx","../src/core/form/inputs/InvalidValueInput/InvalidValueInput.tsx","../src/core/form/members/object/errors/MissingKeysAlert.tsx","../src/core/form/members/object/errors/DuplicateKeysAlert.tsx","../src/core/form/members/object/errors/MixedArrayAlert.tsx","../src/core/form/members/object/MemberFieldError.tsx","../src/core/form/members/object/MemberFieldset.tsx","../src/core/form/members/array/items/ArrayOfObjectsItem.tsx","../src/core/form/inputs/arrays/ArrayOfPrimitivesInput/getEmptyValue.ts","../src/core/form/members/array/items/ArrayOfPrimitivesItem.tsx","../src/core/form/members/array/IncompatibleItemType.tsx","../src/core/form/members/array/MemberItemError.tsx","../src/core/form/members/array/ArrayOfObjectsInputMember.tsx","../src/core/form/members/array/ArrayOfObjectsInputMembers.tsx","../src/core/form/members/object/ObjectInputMember.tsx","../src/core/form/members/object/ObjectInputMembers.tsx","../src/core/form/components/FormInput.tsx","../src/core/form/components/EditPortal.tsx","../src/core/form/inputs/arrays/ArrayOfObjectsInput/List/PreviewItem.tsx","../src/core/form/studio/inputResolver/itemResolver.tsx","../src/core/form/inputs/ReferenceInput/ReferenceField.tsx","../src/core/form/studio/inputResolver/helpers.ts","../src/core/form/studio/inputResolver/fieldResolver.tsx","../src/core/form/studio/defaults.ts","../src/core/form/utils/path.ts","../src/core/form/studio/focusManagers/HashFocusManager.ts","../src/core/form/studio/focusManagers/SimpleFocusManager.ts","../src/core/form/utils/WithReferencedAsset.tsx","../src/core/form/inputs/common/fileTarget/utils/extractFiles.ts","../src/core/form/inputs/common/fileTarget/utils/imageUrlToBlob.ts","../src/core/form/inputs/common/fileTarget/fileTarget.tsx","../src/core/form/components/withFocusRing/helpers.ts","../src/core/form/components/withFocusRing/withFocusRing.ts","../src/core/form/inputs/files/common/styles.ts","../src/core/form/inputs/files/common/UploadProgress.styled.tsx","../src/core/form/inputs/files/common/UploadProgress.tsx","../src/core/form/inputs/files/ImageInput/utils/image.ts","../src/core/form/inputs/files/common/assetSource.ts","../src/core/form/inputs/files/common/FileInputMenuItem/FileInputMenuItem.styled.tsx","../src/core/form/inputs/files/common/FileInputMenuItem/FileInputMenuItem.tsx","../src/core/form/inputs/files/common/ActionsMenu.tsx","../src/core/form/inputs/files/common/PlaceholderText.tsx","../src/core/form/inputs/files/common/FileInputButton/styles.ts","../src/core/form/inputs/files/common/FileInputButton/FileInputButton.tsx","../src/core/form/inputs/files/common/UploadPlaceholder.tsx","../src/core/form/inputs/files/common/UploadWarning.tsx","../src/core/form/inputs/files/FileInput/styles.ts","../src/core/form/inputs/common/helper.ts","../src/core/form/inputs/files/FileInput/FileDetails.tsx","../src/core/form/inputs/files/FileInput/FileSkeleton.tsx","../src/core/form/inputs/files/FileInput/InvalidFileWarning.tsx","../src/core/form/inputs/files/FileInput/FileInput.tsx","../src/core/form/studio/inputs/StudioFileInput.tsx","../src/core/form/inputs/files/common/RatioBox.tsx","../src/core/form/inputs/files/ImageToolInput/imagetool/ImageLoader.tsx","../src/core/form/inputs/files/ImageToolInput/imagetool/getBackingStoreRatio.ts","../src/core/form/inputs/files/ImageToolInput/imagetool/2d/utils.ts","../src/core/form/inputs/files/ImageToolInput/imagetool/2d/shapes.ts","../src/core/form/inputs/files/ImageToolInput/imagetool/makeDragAware.tsx","../src/core/form/inputs/files/ImageToolInput/imagetool/ToolCanvas.styles.tsx","../src/core/form/inputs/files/ImageToolInput/imagetool/cursors.ts","../src/core/form/inputs/files/ImageToolInput/imagetool/constants.ts","../src/core/form/inputs/files/ImageToolInput/imagetool/ToolCanvas.tsx","../src/core/form/inputs/files/ImageToolInput/imagetool/Resize.tsx","../src/core/form/inputs/files/ImageToolInput/imagetool/ImageTool.tsx","../src/core/form/inputs/files/ImageToolInput/imagetool/calculateStyles.ts","../src/core/form/inputs/files/ImageToolInput/imagetool/HotspotImage.styles.tsx","../src/core/form/inputs/files/ImageToolInput/imagetool/HotspotImage.tsx","../src/core/form/inputs/files/ImageToolInput/useLoadImage.ts","../src/core/form/inputs/files/ImageToolInput/ImageToolInput.tsx","../src/core/form/inputs/files/ImageInput/ImageActionsMenu.tsx","../src/core/form/inputs/files/ImageInput/ImagePreview.styled.tsx","../src/core/form/inputs/files/ImageInput/ImagePreview.tsx","../src/core/form/inputs/files/ImageInput/InvalidImageWarning.tsx","../src/core/form/inputs/files/ImageInput/ImageInput.tsx","../src/core/form/studio/inputs/StudioImageInput.tsx","../src/core/form/hooks/useOnClickOutside.ts","../src/core/form/inputs/CrossDatasetReferenceInput/useReferenceInfo.ts","../src/core/form/inputs/CrossDatasetReferenceInput/CrossDatasetReferencePreview.styled.tsx","../src/core/form/inputs/CrossDatasetReferenceInput/CrossDatasetReferencePreview.tsx","../src/core/form/inputs/CrossDatasetReferenceInput/utils/useProjectId.ts","../src/core/form/inputs/CrossDatasetReferenceInput/OptionPreview.tsx","../src/core/form/inputs/CrossDatasetReferenceInput/PreviewReferenceValue.tsx","../src/core/form/inputs/CrossDatasetReferenceInput/ReferenceAutocomplete.tsx","../src/core/form/inputs/CrossDatasetReferenceInput/DisabledFeatureWarning.tsx","../src/core/form/inputs/CrossDatasetReferenceInput/useFeatureEnabled.ts","../src/core/form/inputs/CrossDatasetReferenceInput/CrossDatasetReferenceInput.tsx","../src/core/user-color/context.ts","../src/core/user-color/hooks.ts","../src/core/user-color/manager.ts","../src/core/user-color/provider.tsx","../src/core/field/paths/helpers.ts","../src/core/field/diff/annotations/helpers.ts","../src/core/field/diff/annotations/hooks.ts","../src/core/field/diff/components/DiffTooltip.tsx","../src/core/field/diff/components/DiffCard.tsx","../src/core/field/diff/components/ChangeTitleSegment.tsx","../src/core/field/diff/components/ChangeBreadcrumb.tsx","../src/core/field/conditional-property/utils.tsx","../src/core/field/conditional-property/useConditionalProperty.tsx","../src/core/field/diff/contexts/DiffContext.tsx","../src/core/field/validation/index.ts","../src/core/field/schema/helpers.ts","../src/core/field/types/portableText/diff/symbols.ts","../src/core/field/types/portableText/diff/helpers.ts","../src/core/field/TODO.ts","../src/core/field/types/boolean/preview/BooleanPreview.tsx","../src/core/field/types/boolean/diff/BooleanFieldDiff.tsx","../src/core/field/diff/contexts/DocumentChangeContext.tsx","../src/core/field/diff/hooks/useDocumentChange.ts","../src/core/field/diff/hooks/useRefValue.ts","../src/core/field/types/file/diff/helpers.ts","../src/core/field/types/file/diff/FileFieldDiff.tsx","../src/core/field/types/image/diff/helpers.ts","../src/core/field/types/image/diff/HotspotCropSVG.tsx","../src/core/field/types/image/diff/ImagePreview.tsx","../src/core/field/types/image/diff/ImageFieldDiff.tsx","../src/core/field/types/number/preview/NumberPreview.tsx","../src/core/field/types/number/diff/NumberFieldDiff.tsx","../src/core/field/types/portableText/diff/components/Blockquote.tsx","../src/core/field/types/portableText/diff/components/Header.tsx","../src/core/field/types/portableText/diff/components/Paragraph.tsx","../src/core/field/types/portableText/diff/components/Block.tsx","../src/core/field/types/portableText/diff/components/styledComponents.tsx","../src/core/field/types/portableText/diff/components/Annotation.tsx","../src/core/field/types/portableText/diff/components/Decorator.tsx","../src/core/field/types/portableText/diff/components/InlineObject.tsx","../src/core/field/types/portableText/diff/components/Text.tsx","../src/core/field/types/portableText/diff/components/PortableText.tsx","../src/core/field/types/portableText/diff/PTDiff.tsx","../src/core/field/types/reference/preview/ReferencePreview.tsx","../src/core/field/types/reference/diff/ReferenceFieldDiff.tsx","../src/core/field/types/string/preview/StringPreview.tsx","../src/core/field/types/string/diff/StringFieldDiff.tsx","../src/core/field/diff/resolve/defaultComponents.ts","../src/core/field/diff/resolve/resolveDiffComponent.ts","../src/core/field/diff/helpers.ts","../src/core/field/diff/changes/buildChangeList.ts","../src/core/field/diff/changes/helpers.ts","../src/core/field/diff/changes/undoChange.ts","../src/core/field/conditional-property/conditionalReadOnly/ConditionalReadOnlyContext.ts","../src/core/field/conditional-property/conditionalReadOnly/useConditionalReadOnly.ts","../src/core/field/diff/components/DiffErrorBoundary.tsx","../src/core/field/diff/components/FromToArrow.tsx","../src/core/field/diff/components/DiffInspectWrapper.tsx","../src/core/field/diff/components/FromTo.tsx","../src/core/field/diff/components/DiffFromTo.tsx","../src/core/field/diff/components/FallbackDiff.tsx","../src/core/field/diff/components/RevertChangesButton.tsx","../src/core/field/diff/components/ValueError.tsx","../src/core/field/diff/components/FieldChange.styled.tsx","../src/core/field/diff/components/FieldChange.tsx","../src/core/field/utils/useHover.ts","../src/core/field/diff/components/GroupChange.styled.tsx","../src/core/field/diff/components/GroupChange.tsx","../src/core/field/diff/components/ChangeResolver.tsx","../src/core/field/diff/components/NoChanges.tsx","../src/core/field/diff/components/ChangeList.styled.tsx","../src/core/field/diff/components/ChangeList.tsx","../src/core/field/diff/components/DiffString.tsx","../src/core/field/diff/components/MetaInfo.tsx","../src/core/field/types/array/util/arrayUtils.ts","../src/core/field/types/array/diff/ArrayOfOptionsFieldDiff.tsx","../src/core/field/types/datetime/preview/DatetimePreview.tsx","../src/core/field/types/datetime/diff/DatetimeFieldDiff.tsx","../src/core/field/types/url/diff/UrlFieldDiff.tsx","../src/core/field/types/slug/preview/SlugPreview.tsx","../src/core/field/types/slug/diff/SlugFieldDiff.tsx","../src/core/field/diff/resolve/diffResolver.ts","../src/core/form/useFormValue.ts","../src/core/form/studio/inputs/crossDatasetReference/datastores/search.ts","../src/core/form/studio/inputs/crossDatasetReference/datastores/getReferenceInfo.ts","../src/core/form/studio/inputs/crossDatasetReference/StudioCrossDatasetReferenceInput.tsx","../src/core/form/inputs/ReferenceInput/useReferenceInput.tsx","../src/core/form/inputs/ReferenceInput/OptionPreview.tsx","../src/core/form/inputs/ReferenceInput/CreateButton.tsx","../src/core/form/inputs/ReferenceInput/ReferenceAutocomplete.tsx","../src/core/form/inputs/ReferenceInput/AutocompleteContainer.tsx","../src/core/form/inputs/ReferenceInput/ReferenceInput.tsx","../src/core/form/studio/inputs/reference/StudioReferenceInput.tsx","../src/core/form/types/asserters.ts","../src/core/form/inputs/arrays/ArrayOfOptionsInput/ArrayOfObjectOptionsInput.tsx","../src/core/form/inputs/arrays/ArrayOfObjectsInput/List/IncompatibleItemType.tsx","../src/core/form/inputs/arrays/ArrayOfOptionsInput/ArrayOfPrimitiveOptionsInput.tsx","../src/core/form/inputs/arrays/ArrayOfOptionsInput/ArrayOfOptionsInput.tsx","../src/core/form/components/ActivateOnFocus/ActivateOnFocus.styles.tsx","../src/core/form/components/ActivateOnFocus/ActivateOnFocus.tsx","../src/core/form/inputs/PortableText/callbacks/insertCallback.ts","../src/core/form/inputs/PortableText/callbacks/setCallback.ts","../src/core/form/inputs/PortableText/callbacks/unsetCallback.ts","../src/core/form/inputs/PortableText/BlockActions.tsx","../src/core/form/inputs/PortableText/_common/ReviewChangesHighlightBlock.tsx","../src/core/form/inputs/PortableText/_common/StyledChangeIndicatorWithProvidedFullPath.tsx","../src/core/form/store/utils/immutableReconcile.ts","../src/core/form/inputs/PortableText/_helpers.ts","../src/core/form/inputs/PortableText/hooks/useMemberValidation.tsx","../src/core/form/inputs/PortableText/contexts/PortableTextMarkers.tsx","../src/core/form/inputs/PortableText/hooks/usePortableTextMarkers.tsx","../src/core/form/inputs/PortableText/contexts/PortableTextMembers.tsx","../src/core/form/inputs/PortableText/hooks/usePortableTextMembers.tsx","../src/core/form/inputs/PortableText/debugRender.ts","../src/core/form/inputs/PortableText/object/BlockObjectPreview.tsx","../src/core/form/inputs/PortableText/object/BlockObject.styles.ts","../src/core/form/inputs/PortableText/object/BlockObject.tsx","../src/core/form/inputs/PortableText/object/InlineObjectToolbarPopover.tsx","../src/core/form/inputs/PortableText/object/InlineObject.tsx","../src/core/form/inputs/PortableText/text/AnnotationToolbarPopover.tsx","../src/core/form/inputs/PortableText/text/Annotation.tsx","../src/core/form/inputs/PortableText/text/constants.ts","../src/core/form/inputs/PortableText/text/Decorator.tsx","../src/core/form/inputs/PortableText/text/helpers.ts","../src/core/form/inputs/PortableText/text/TextBlock.styles.ts","../src/core/form/inputs/PortableText/text/textStyles.tsx","../src/core/form/inputs/PortableText/text/TextBlock.tsx","../src/core/components/collapseMenu/CollapseOverflowMenu.tsx","../src/core/components/collapseMenu/ObserveElement.tsx","../src/core/components/collapseMenu/CollapseMenuDivider.tsx","../src/core/components/collapseMenu/CollapseMenu.tsx","../src/core/components/collapseMenu/CollapseMenuButton.tsx","../src/core/form/inputs/PortableText/toolbar/CustomIcon.tsx","../src/core/form/inputs/PortableText/toolbar/helpers.tsx","../src/core/form/inputs/PortableText/toolbar/hooks.ts","../src/core/form/inputs/PortableText/toolbar/ActionMenu.tsx","../src/core/form/inputs/PortableText/toolbar/BlockStyleSelect.tsx","../src/core/form/inputs/PortableText/toolbar/InsertMenu.tsx","../src/core/form/inputs/PortableText/toolbar/Toolbar.tsx","../src/core/form/inputs/PortableText/Editor.styles.tsx","../src/core/form/inputs/PortableText/hooks/useSpellCheck.tsx","../src/core/form/inputs/PortableText/hooks/useScrollSelectionIntoView.tsx","../src/core/form/inputs/PortableText/Editor.tsx","../src/core/form/inputs/PortableText/Compositor.styles.tsx","../src/core/form/inputs/PortableText/hooks/useHotKeys.tsx","../src/core/form/inputs/PortableText/object/helpers.ts","../src/core/form/inputs/PortableText/object/renderers/DefaultEditDialog.tsx","../src/core/form/inputs/PortableText/object/renderers/debug.ts","../src/core/form/inputs/PortableText/object/renderers/PopoverEditDialog.tsx","../src/core/form/inputs/PortableText/object/renderers/ObjectEditModal.tsx","../src/core/form/inputs/PortableText/hooks/useScrollToOpenedMember.tsx","../src/core/form/inputs/PortableText/Compositor.tsx","../src/core/form/inputs/PortableText/InvalidValue.tsx","../src/core/form/inputs/PortableText/usePatches.ts","../src/core/form/inputs/PortableText/PortableTextInput.tsx","../src/core/form/components/tagInput/styles.ts","../src/core/form/components/tagInput/tagInput.tsx","../src/core/form/inputs/TagsArrayInput.tsx","../src/core/form/inputs/arrays/common/list.tsx","../src/core/form/inputs/arrays/ArrayOfObjectsInput/List/ErrorItem.tsx","../src/core/form/inputs/files/common/DropMessage.tsx","../src/core/form/inputs/arrays/common/uploadTarget/styles.ts","../src/core/form/inputs/arrays/common/uploadTarget/uploadTarget.tsx","../src/core/form/inputs/arrays/common/UploadTargetCard.tsx","../src/core/form/inputs/arrays/ArrayOfPrimitivesInput/utils/nearestIndex.ts","../src/core/form/inputs/arrays/ArrayOfPrimitivesInput/ItemRow.tsx","../src/core/form/inputs/arrays/ArrayOfPrimitivesInput/ArrayOfPrimitivesFunctions.tsx","../src/core/form/inputs/arrays/ArrayOfPrimitivesInput/ArrayOfPrimitivesInput.tsx","../src/core/form/inputs/arrays/layouts/CellLayout.tsx","../src/core/form/inputs/arrays/ArrayOfObjectsInput/Grid/GridItem.tsx","../src/core/form/inputs/arrays/ArrayOfObjectsInput/Grid/IncompatibleItemType.tsx","../src/core/form/inputs/arrays/ArrayOfObjectsInput/Grid/ErrorItem.tsx","../src/core/form/inputs/arrays/ArrayOfObjectsInput/Grid/GridArrayInput.tsx","../src/core/form/inputs/arrays/ArrayOfObjectsInput/List/ListArrayInput.tsx","../src/core/form/inputs/arrays/ArrayOfObjectsInput/ArrayOfObjectsInput.tsx","../src/core/form/studio/inputResolver/resolveArrayInput.ts","../src/core/form/inputs/SelectInput.tsx","../src/core/form/inputs/StringInput.tsx","../src/core/form/studio/inputResolver/resolveStringInput.ts","../src/core/form/utils/getValidationRule.ts","../src/core/form/inputs/NumberInput.tsx","../src/core/form/studio/inputResolver/resolveNumberInput.ts","../src/core/form/inputs/BooleanInput.tsx","../src/core/form/inputs/EmailInput.tsx","../src/core/form/inputs/ObjectInput/UnknownFields.tsx","../src/core/form/inputs/ObjectInput/ObjectInput.styled.tsx","../src/core/form/inputs/ObjectInput/fieldGroups/GroupTab.tsx","../src/core/form/inputs/ObjectInput/fieldGroups/FieldGroupTabs.tsx","../src/core/form/inputs/ObjectInput/ObjectInput.tsx","../src/core/form/inputs/DateInputs/base/calendar/CalendarDay.tsx","../src/core/form/inputs/DateInputs/base/calendar/constants.ts","../src/core/form/inputs/DateInputs/base/calendar/utils.ts","../src/core/form/inputs/DateInputs/base/calendar/CalendarMonth.tsx","../src/core/form/inputs/DateInputs/base/calendar/features.ts","../src/core/form/inputs/DateInputs/base/LazyTextInput.tsx","../src/core/form/inputs/DateInputs/base/calendar/YearInput.tsx","../src/core/form/inputs/DateInputs/base/calendar/Calendar.tsx","../src/core/form/inputs/DateInputs/base/DatePicker.tsx","../src/core/form/inputs/DateInputs/base/DateTimeInput.tsx","../src/core/form/inputs/DateInputs/CommonDateTimeInput.tsx","../src/core/form/inputs/DateInputs/utils.ts","../src/core/form/inputs/DateInputs/DateTimeInput.tsx","../src/core/form/inputs/DateInputs/DateInput.tsx","../src/core/form/inputs/TextInput.tsx","../src/core/form/inputs/UrlInput.tsx","../src/core/form/inputs/Slug/utils/slugify.ts","../src/core/form/inputs/Slug/utils/useAsync.tsx","../src/core/form/inputs/Slug/utils/useSlugContext.ts","../src/core/form/inputs/Slug/SlugInput.tsx","../src/core/form/inputs/arrays/UniversalArrayInput.tsx","../src/core/form/studio/inputResolver/defaultInputs.ts","../src/core/form/studio/inputResolver/inputResolver.tsx","../src/core/form/form-components-hooks/components.ts","../src/core/form/form-components-hooks/picks.ts","../src/core/form/form-components-hooks/componentHooks.ts","../src/core/preview/components/Preview.tsx","../src/core/form/studio/assetSource/DocumentList.tsx","../src/core/form/studio/assetSource/ConfirmMessage.tsx","../src/core/form/studio/assetSource/AssetUsageDialog.tsx","../src/core/form/studio/assetSource/AssetMenu.tsx","../src/core/form/studio/assetSource/AssetThumb.tsx","../src/core/form/studio/assetSource/prettyBytes.ts","../src/core/form/studio/assetSource/utils/mimeType.ts","../src/core/form/studio/assetSource/AssetRow.tsx","../src/core/form/studio/assetSource/TableList.tsx","../src/core/form/studio/assetSource/DefaultSource.tsx","../src/core/form/studio/assetSource/FileAssetSource.ts","../src/core/form/studio/assetSource/ImageAssetSource.tsx","../src/core/studio/components/navbar/search/definitions/filters.ts","../src/core/studio/components/navbar/search/definitions/defaultFilters.ts","../src/core/studio/components/navbar/search/components/filters/common/ReferencePreviewTitle.tsx","../src/core/studio/components/navbar/search/components/filters/common/ButtonValue.tsx","../src/core/studio/components/navbar/search/contexts/search/SearchContext.ts","../src/core/studio/components/navbar/search/contexts/search/useSearchState.ts","../src/core/studio/components/navbar/search/components/filters/filter/inputs/number/Number.tsx","../src/core/studio/components/navbar/search/components/filters/filter/inputs/number/NumberRange.tsx","../src/core/studio/components/navbar/search/utils/getSchemaField.ts","../src/core/studio/components/navbar/search/components/searchResults/item/SearchResultItemPreview.tsx","../src/core/studio/components/navbar/search/components/searchResults/item/SearchResultItem.tsx","../src/core/studio/components/navbar/search/constants.ts","../src/core/studio/components/navbar/search/utils/hasSearchableTerms.ts","../src/core/studio/components/navbar/search/utils/selectors.ts","../src/core/studio/components/navbar/search/hooks/useSearch.ts","../src/core/studio/components/navbar/search/utils/documentTypesTruncated.ts","../src/core/studio/components/navbar/search/components/filters/filter/inputs/reference/ReferenceAutocomplete.tsx","../src/core/studio/components/navbar/search/components/filters/filter/inputs/reference/Reference.tsx","../src/core/studio/components/navbar/search/components/filters/filter/inputs/string/StringList.tsx","../src/core/studio/components/navbar/search/components/filters/icons/GteIcon.tsx","../src/core/studio/components/navbar/search/components/filters/icons/GtIcon.tsx","../src/core/studio/components/navbar/search/components/filters/icons/LteIcon.tsx","../src/core/studio/components/navbar/search/components/filters/icons/LtIcon.tsx","../src/core/studio/components/navbar/search/definitions/operators/operatorTypes.ts","../src/core/studio/components/navbar/search/definitions/operators/operatorUtils.ts","../src/core/studio/components/navbar/search/definitions/operators/arrayOperators.ts","../src/core/studio/workspace.tsx","../src/core/studio/source.tsx","../src/core/studio/components/navbar/search/components/filters/filter/inputs/asset/AssetSourceError.tsx","../src/core/studio/components/navbar/search/components/filters/filter/inputs/asset/preview/FileReferencePreview.tsx","../src/core/studio/components/navbar/search/components/filters/filter/inputs/asset/preview/ImageReferencePreview.tsx","../src/core/studio/components/navbar/search/components/filters/filter/inputs/asset/preview/AssetPreview.tsx","../src/core/studio/components/navbar/search/components/filters/filter/inputs/asset/Asset.tsx","../src/core/studio/components/navbar/search/definitions/operators/assetOperators.ts","../src/core/studio/components/navbar/search/components/filters/filter/inputs/boolean/Boolean.tsx","../src/core/studio/components/navbar/search/definitions/operators/booleanOperators.ts","../src/core/studio/components/navbar/search/definitions/operators/defineOperators.ts","../src/core/studio/components/navbar/search/components/common/CustomTextInput.tsx","../src/core/studio/components/navbar/search/components/filters/filter/inputs/date/datePicker/contexts/DatePickerContext.ts","../src/core/studio/components/navbar/search/components/filters/filter/inputs/date/datePicker/contexts/useDatePicker.ts","../src/core/studio/components/navbar/search/components/filters/filter/inputs/date/datePicker/calendar/CalendarDay.tsx","../src/core/studio/components/navbar/search/components/filters/filter/inputs/date/datePicker/calendar/constants.ts","../src/core/studio/components/navbar/search/components/filters/filter/inputs/date/datePicker/calendar/utils.ts","../src/core/studio/components/navbar/search/components/filters/filter/inputs/date/datePicker/calendar/CalendarMonth.tsx","../src/core/studio/components/navbar/search/components/filters/filter/inputs/date/datePicker/LazyTextInput.tsx","../src/core/studio/components/navbar/search/components/filters/filter/inputs/date/datePicker/calendar/YearInput.tsx","../src/core/studio/components/navbar/search/components/filters/filter/inputs/date/datePicker/calendar/Calendar.tsx","../src/core/studio/components/navbar/search/components/filters/filter/inputs/date/datePicker/contexts/DatePickerProvider.tsx","../src/core/studio/components/navbar/search/components/filters/filter/inputs/date/datePicker/DatePicker.tsx","../src/core/studio/components/navbar/search/components/filters/filter/inputs/date/CommonDate.tsx","../src/core/studio/components/navbar/search/components/filters/filter/inputs/date/Date.tsx","../src/core/studio/components/navbar/search/components/filters/filter/inputs/date/DateLast.tsx","../src/core/studio/components/navbar/search/components/filters/filter/inputs/date/DateTime.tsx","../src/core/studio/components/navbar/search/definitions/operators/dateOperators.ts","../src/core/studio/components/navbar/search/definitions/operators/numberOperators.ts","../src/core/studio/components/navbar/search/components/filters/filter/inputs/string/String.tsx","../src/core/studio/components/navbar/search/definitions/operators/portableTextOperators.ts","../src/core/studio/components/navbar/search/definitions/operators/referenceOperators.ts","../src/core/studio/components/navbar/search/definitions/operators/slugOperators.ts","../src/core/studio/components/navbar/search/definitions/operators/stringOperators.ts","../src/core/studio/components/navbar/search/definitions/operators/defaultOperators.ts","../src/core/config/configPropertyReducers.ts","../src/core/config/ConfigPropertyError.ts","../src/core/config/flattenConfig.ts","../src/core/config/resolveConfigProperty.ts","../src/core/config/ConfigResolutionError.ts","../src/core/config/SchemaError.ts","../src/core/config/createDefaultIcon.tsx","../src/core/config/prepareConfig.ts","../src/core/config/resolveConfig.ts","../src/core/config/useConfigContextFromSource.ts","../src/core/studio/components/navbar/StudioLogo.tsx","../src/core/studio/colorScheme.tsx","../src/core/studio/workspaces/WorkspacesContext.ts","../src/core/studio/workspaces/WorkspacesProvider.tsx","../src/core/studio/workspaces/helpers.ts","../src/core/studio/workspaces/useWorkspaces.ts","../src/core/studio/workspaces/WorkspaceValidationError.ts","../src/core/studio/workspaces/validateWorkspaces.ts","../src/core/studio/screens/NoToolsScreen.tsx","../src/core/studio/screens/ToolNotFoundScreen.tsx","../src/core/studio/screens/LoadingScreen.tsx","../src/core/studio/screens/schemaErrors/SchemaProblemGroups.tsx","../src/core/studio/screens/schemaErrors/utils.ts","../src/core/studio/screens/schemaErrors/reportWarnings.ts","../src/core/studio/screens/schemaErrors/SchemaErrorsScreen.tsx","../src/core/studio/screens/NotFoundScreen.tsx","../src/core/studio/activeWorkspaceMatcher/ActiveWorkspaceMatcherContext.ts","../src/core/studio/activeWorkspaceMatcher/matchWorkspace.ts","../src/core/studio/activeWorkspaceMatcher/ActiveWorkspaceMatcher.tsx","../src/core/studio/activeWorkspaceMatcher/useActiveWorkspace.ts","../src/core/studio/components/navbar/workspace/WorkspacePreview.tsx","../src/core/studio/components/navbar/workspace/hooks/useWorkspaceAuthStates.ts","../src/core/studio/components/navbar/workspace/constants.ts","../src/core/studio/components/navbar/workspace/WorkspaceAuth/Layout.tsx","../src/core/studio/components/navbar/workspace/WorkspaceAuth/WorkspaceAuth.tsx","../src/core/studio/components/navbar/workspace/WorkspaceMenuButton.tsx","../src/core/studio/screens/AuthenticateScreen.tsx","../src/core/studio/screens/ConfigErrorsScreen.tsx","../src/core/studio/screens/NotAuthenticatedScreen.tsx","../src/core/studio/screens/CorsOriginErrorScreen.tsx","../src/core/studio/StudioErrorBoundary.tsx","../src/core/studio/StudioLayout.tsx","../src/core/studio/components/navbar/userMenu/LoginProviderLogo.tsx","../src/core/studio/components/navbar/userMenu/UserMenu.tsx","../src/core/studio/components/navbar/NewDocumentButton.tsx","../src/core/studio/components/StatusButton.tsx","../src/core/studio/components/navbar/presence/PresenceMenuItem.tsx","../src/core/studio/components/navbar/presence/PresenceMenu.tsx","../src/core/studio/components/navbar/NavDrawer.tsx","../src/core/studio/components/navbar/changelog/portableTextContent/listStyles.tsx","../src/core/studio/components/navbar/changelog/portableTextContent/PortableTextContent.styles.ts","../src/core/studio/components/navbar/changelog/portableTextContent/PortableTextContent.tsx","../src/core/studio/components/navbar/changelog/ChangelogItem.tsx","../src/core/studio/components/navbar/changelog/ChangelogList.tsx","../src/core/studio/components/navbar/changelog/ChangelogDialog.tsx","../src/core/version.ts","../src/core/studio/components/navbar/changelog/module-status/moduleStatus.ts","../src/core/studio/components/navbar/changelog/module-status/hooks.ts","../src/core/studio/components/navbar/changelog/ChangelogAccordion.tsx","../src/core/studio/components/navbar/changelog/ChangelogButton.tsx","../src/core/studio/components/navbar/configIssues/ConfigIssuesButton.tsx","../src/core/studio/components/navbar/LogoButton.tsx","../src/core/studio/components/navbar/search/components/commandList/CommandListContext.ts","../src/core/studio/components/navbar/search/components/commandList/useCommandList.ts","../src/core/studio/components/navbar/search/components/commandList/CommandListContainer.tsx","../src/core/studio/components/navbar/search/definitions/operators/index.ts","../src/core/studio/components/navbar/search/utils/filterUtils.ts","../src/core/studio/components/navbar/search/components/filters/common/FilterPopoverWrapper.tsx","../src/core/studio/components/navbar/search/utils/supportsTouch.ts","../src/core/studio/components/navbar/search/components/commandList/CommandListProvider.tsx","../src/core/studio/components/navbar/search/components/filters/common/FilterPopoverContentHeader.tsx","../src/core/studio/components/navbar/search/components/commandList/CommandListItem.tsx","../src/core/studio/components/navbar/search/components/commandList/CommandListItems.tsx","../src/core/studio/components/navbar/search/components/common/FilterTitle.tsx","../src/core/studio/components/navbar/search/components/filters/common/FilterIcon.tsx","../src/core/studio/components/navbar/search/components/filters/common/FilterDetails.tsx","../src/core/studio/components/navbar/search/components/filters/addFilter/items/FilterTooltip.tsx","../src/core/studio/components/navbar/search/components/filters/addFilter/items/MenuItemFilter.tsx","../src/core/studio/components/navbar/search/components/filters/addFilter/items/MenuItemHeader.tsx","../src/core/studio/components/navbar/search/components/filters/addFilter/AddFilterVirtualList.tsx","../src/core/studio/components/navbar/search/components/filters/addFilter/createFilterMenuItems.ts","../src/core/studio/components/navbar/search/components/filters/addFilter/AddFilterPopoverContent.tsx","../src/core/studio/components/navbar/search/components/filters/addFilter/AddFilterButton.tsx","../src/core/studio/components/navbar/search/components/filters/documentTypes/items/DocumentTypeFilterItem.tsx","../src/core/studio/components/navbar/search/components/filters/documentTypes/DocumentTypesVirtualList.tsx","../src/core/studio/components/navbar/search/components/filters/documentTypes/DocumentTypesPopoverContent.tsx","../src/core/studio/components/navbar/search/components/filters/documentTypes/DocumentTypesButton.tsx","../src/core/studio/components/navbar/search/components/common/FilterLabel.tsx","../src/core/studio/components/navbar/search/components/filters/filter/FilterError.tsx","../src/core/studio/components/navbar/search/components/filters/filter/OperatorsMenuButton.tsx","../src/core/studio/components/navbar/search/components/filters/filter/FilterForm.tsx","../src/core/studio/components/navbar/search/components/filters/filter/FilterPopoverContent.tsx","../src/core/studio/components/navbar/search/components/filters/filter/FilterButton.tsx","../src/core/studio/components/navbar/search/components/filters/Filters.tsx","../src/core/studio/components/navbar/search/components/Instructions.tsx","../src/core/studio/components/navbar/search/components/common/DocumentTypesPill.tsx","../src/core/studio/components/navbar/search/components/common/FilterPill.tsx","../src/core/studio/components/navbar/search/components/recentSearches/item/RecentSearchItem.tsx","../src/core/studio/components/navbar/search/components/recentSearches/RecentSearchesVirtualList.tsx","../src/core/studio/components/navbar/search/components/recentSearches/RecentSearches.tsx","../src/core/studio/components/navbar/search/components/SearchHeader.tsx","../src/core/studio/components/navbar/search/components/NoResults.tsx","../src/core/studio/components/navbar/search/components/SearchError.tsx","../src/core/studio/components/navbar/search/definitions/orderings.ts","../src/core/studio/components/navbar/search/components/SortMenu.tsx","../src/core/studio/components/navbar/search/components/searchResults/item/DebugOverlay.tsx","../src/core/studio/components/navbar/search/components/searchResults/SearchResultsVirtualList.tsx","../src/core/studio/components/navbar/search/components/searchResults/SearchResults.tsx","../src/core/studio/components/navbar/search/hooks/useSearchHotkeys.ts","../src/core/studio/components/navbar/search/SearchDialog.tsx","../src/core/studio/components/navbar/search/components/PlaceholderSearchInput.tsx","../src/core/studio/components/navbar/search/components/SearchPopover.tsx","../src/core/studio/components/navbar/search/SearchField.tsx","../src/core/studio/components/navbar/search/datastores/recentSearches.ts","../src/core/studio/components/navbar/search/utils/generateFieldId.ts","../src/core/studio/components/navbar/search/utils/createFieldDefinitions.ts","../src/core/studio/components/navbar/search/utils/isRecentSearchTerms.ts","../src/core/studio/components/navbar/search/utils/debug.ts","../src/core/studio/components/navbar/search/contexts/search/reducer.ts","../src/core/studio/components/navbar/search/contexts/search/SearchProvider.tsx","../src/core/studio/components/navbar/StudioNavbar.tsx","../src/core/studio/components/navbar/tools/ToolLink.tsx","../src/core/studio/components/navbar/tools/ToolCollapseMenu.tsx","../src/core/studio/components/navbar/tools/ToolVerticalMenu.tsx","../src/core/studio/components/navbar/tools/StudioToolMenu.tsx","../src/core/studio/studio-components-hooks/picks.ts","../src/core/studio/studio-components-hooks/componentHooks.ts","../src/core/error/ErrorLogger.tsx","../src/core/studio/AuthBoundary.tsx","../src/core/studio/StudioThemeProvider.tsx","../src/core/studio/constants.ts","../src/core/studio/workspaceLoader/ErrorMessage.tsx","../src/core/studio/router/router.ts","../src/core/studio/router/util/getOrderedTools.ts","../src/core/studio/router/helpers.ts","../src/core/studio/router/routerEvent.ts","../src/core/studio/workspaceLoader/WorkspaceLoader.tsx","../src/core/studio/StudioProvider.tsx","../src/core/studio/Studio.tsx","../src/core/studio/renderStudio.tsx","../src/core/hooks/useClient.ts","../src/core/hooks/useConnectionState.ts","../src/core/hooks/useDataset.ts","../src/core/hooks/useDocumentOperation.ts","../src/core/hooks/useDocumentOperationEvent.ts","../src/core/hooks/useEditState.ts","../src/core/hooks/useProjectId.ts","../src/core/hooks/useSchema.ts","../src/core/hooks/useSyncState.ts","../src/core/hooks/useTemplates.ts","../src/core/hooks/useTimeAgo.ts","../src/core/hooks/useTools.ts","../src/core/hooks/useValidationStatus.ts","../src/core/store/user/hooks.ts","../src/core/store/_legacy/document/buffered-doc/createObservableBufferedDocument.ts","../src/core/store/_legacy/document/buffered-doc/createBufferedDocument.ts","../src/core/store/_legacy/document/getPairListener.ts","../src/core/store/_legacy/document/document-pair/checkoutPair.ts","../src/core/store/_legacy/document/document-pair/utils/isLiveEditEnabled.ts","../src/core/store/_legacy/document/utils/createMemoizer.ts","../src/core/store/_legacy/document/document-pair/memoizedPair.ts","../src/core/store/_legacy/document/document-pair/snapshotPair.ts","../src/core/store/_legacy/document/document-pair/editState.ts","../src/core/store/_legacy/document/document-pair/operationArgs.ts","../src/core/store/_legacy/document/document-pair/operations/delete.ts","../src/core/store/_legacy/document/document-pair/operations/publish.ts","../src/core/store/_legacy/document/document-pair/operations/patch.ts","../src/core/store/_legacy/document/document-pair/operations/commit.ts","../src/core/store/_legacy/document/document-pair/operations/discardChanges.ts","../src/core/store/_legacy/document/document-pair/operations/unpublish.ts","../src/core/store/_legacy/document/document-pair/operations/duplicate.ts","../src/core/store/_legacy/document/document-pair/operations/restore.ts","../src/core/store/_legacy/document/document-pair/consistencyStatus.ts","../src/core/store/_legacy/document/document-pair/operationEvents.ts","../src/core/store/_legacy/document/document-pair/remoteSnapshots.ts","../src/core/store/_legacy/document/document-pair/validation.ts","../src/core/store/_legacy/document/document-pair/documentEvents.ts","../src/core/store/_legacy/document/document-pair/operations/helpers.ts","../src/core/store/_legacy/document/document-pair/editOperations.ts","../src/core/store/_legacy/document/listenQuery.ts","../src/core/store/_legacy/document/resolveTypeForDocument.ts","../src/core/templates/util/isRecord.ts","../src/core/templates/validate.ts","../src/core/templates/util/deepAssign.ts","../src/core/templates/resolve.ts","../src/core/templates/prepare.ts","../src/core/store/_legacy/document/initialValue/initialValue.ts","../src/core/store/_legacy/document/document-store.ts","../src/core/store/_legacy/document/hooks/useDocumentType.ts","../src/core/store/_legacy/document/hooks/useDocumentValues.ts","../src/core/store/_legacy/document/useInitialValue.ts","../src/core/store/_legacy/document/useResolveInitialValueForType.ts","../src/core/store/_legacy/grants/documentPairPermissions.ts","../src/core/store/_legacy/grants/documentValuePermissions.ts","../src/core/store/_legacy/grants/templatePermissions.ts","../src/core/store/_legacy/debugParams/debugParams.ts","../src/core/store/_legacy/grants/debug/exampleGrants.ts","../src/core/store/_legacy/grants/debug/roleGrants.ts","../src/core/store/_legacy/grants/grantsStore.ts","../src/core/store/_legacy/history/history/getJsonStream.ts","../src/core/store/_legacy/history/history/Aligner.ts","../src/core/store/_legacy/history/history/Reconstruction.ts","../src/core/store/_legacy/history/history/TimelineController.ts","../src/core/store/_legacy/history/history/utils.ts","../src/core/store/_legacy/history/history/diffValue.ts","../src/core/store/_legacy/history/history/TwoEndedArray.ts","../src/core/store/_legacy/history/history/chunker.ts","../src/core/store/_legacy/history/history/Timeline.ts","../src/core/store/_legacy/history/createHistoryStore.ts","../src/core/store/_legacy/presence/mock-events.ts","../src/core/store/_legacy/presence/message-transports/bifurTransport.ts","../src/core/store/_legacy/presence/presence-store.ts","../src/core/store/_legacy/presence/useGlobalPresence.tsx","../src/core/store/_legacy/presence/useDocumentPresence.tsx","../src/core/store/_legacy/project/projectStore.ts","../src/core/store/_legacy/project/useProject.ts","../src/core/store/_legacy/project/useProjectDatasets.ts","../src/core/store/_legacy/settings/backends/localStorage.ts","../src/core/store/_legacy/settings/backends/memory.ts","../src/core/store/_legacy/settings/backends/resolve.ts","../src/core/store/_legacy/settings/settingsStore.ts","../src/core/store/_legacy/user/userStore.ts","../src/core/store/_legacy/datastores.ts","../src/core/components/UserAvatar.tsx","../src/core/components/WithReferringDocuments.tsx","../src/core/components/hookCollection/actionId.ts","../src/core/components/hookCollection/HookStateContainer.ts","../src/core/components/hookCollection/requestIdleCallback.ts","../src/core/components/hookCollection/GetHookCollectionState.tsx","../src/core/components/popoverDialog/PopoverDialog.tsx","../src/core/components/previews/constants.ts","../src/core/components/previews/_common/Media.styled.ts","../src/core/components/previews/_common/Media.tsx","../src/core/components/previews/helpers.tsx","../src/core/components/previews/general/DefaultPreview.tsx","../src/core/components/previews/general/DetailPreview.styled.ts","../src/core/components/previews/general/DetailPreview.tsx","../src/core/components/progress/CircularProgress.tsx","../src/core/components/progress/LinearProgress.tsx","../src/core/components/previews/general/MediaPreview.styled.ts","../src/core/components/previews/general/MediaPreview.tsx","../src/core/components/previews/portableText/BlockImagePreview.styled.tsx","../src/core/components/previews/portableText/BlockImagePreview.tsx","../src/core/components/previews/portableText/BlockPreview.tsx","../src/core/components/previews/portableText/InlinePreview.styled.tsx","../src/core/components/previews/portableText/InlinePreview.tsx","../src/core/components/previews/template/TemplatePreview.tsx","../src/core/components/rovingFocus/useRovingFocus.ts","../src/core/components/transitional/ImperativeToast.ts","../src/core/components/zOffsets/defaults.ts","../src/core/components/zOffsets/ZIndexContext.ts","../src/core/components/zOffsets/useZIndex.ts","../src/core/components/transitional/LegacyLayerProvider.tsx","../src/core/components/validation/listItem.tsx","../src/core/components/validation/validationList.tsx","../src/core/components/zOffsets/ZIndexProvider.tsx","../src/core/form/inputs/TelephoneInput.tsx","../src/core/form/store/stateTreeHelper.ts","../src/core/form/store/utils/getExpandOperations.ts","../src/core/form/store/conditional-property/resolveConditionalProperty.ts","../src/core/form/store/constants.ts","../src/core/form/store/utils/getItemType.ts","../src/core/form/store/utils/getCollapsibleOptions.ts","../src/core/form/store/formState.ts","../src/core/form/store/useFormState.ts","../src/core/form/utils/mutationPatch.ts","../src/core/form/utils/TransformPatches.tsx","../src/core/theme/_legacy/helpers.ts","../src/core/theme/_legacy/color.ts","../src/core/theme/_legacy/fonts.ts","../src/core/theme/_legacy/palette.ts","../src/core/theme/_legacy/tones.ts","../src/core/theme/_legacy/theme.ts","../src/core/theme/index.ts"],"sourcesContent":["import React from 'react'\nimport {Reported} from './types'\n\n// eslint-disable-next-line no-empty-function, @typescript-eslint/no-empty-function\nfunction noop() {}\n\nfunction NoopTracker({children}: {children: React.ReactNode}) {\n  return <>{children}</>\n}\n\n/** @internal */\nexport function createNoopTrackerScope<T>() {\n  return {\n    useReportedValues: noop as () => Reported<T>[],\n    Tracker: NoopTracker,\n    useReporter: noop as (id: string | null, value: T | (() => T)) => void,\n  }\n}\n","import React from 'react'\nimport {TrackerContext} from './types'\n\n/** @internal */\nexport type ReporterHook<Payload> = (\n  id: string | null,\n  value: Payload | (() => Payload),\n  isEqual?: (a: Payload, b: Payload) => boolean\n) => void\n\nfunction isFunc<T>(value: T | (() => T)): value is () => T {\n  return typeof value === 'function'\n}\n\nfunction read<T>(value: T | (() => T)): T {\n  return isFunc(value) ? value() : value\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst noop = () => undefined\n\n/** @internal */\nexport type IsEqualFunction<Value> = (a: Value, b: Value) => boolean\n\n/** @internal */\nexport function createUseReporter<Value>(\n  Context: React.Context<TrackerContext<Value>>\n): ReporterHook<Value> {\n  return function useReporter(\n    // No reporting will happen if id=null\n    id: string | null,\n    value: Value | (() => Value),\n    isEqual: IsEqualFunction<Value> = Object.is\n  ) {\n    const {add, update, remove} = React.useContext(Context)\n    const previous = React.useRef<Value>()\n\n    React.useLayoutEffect(() => {\n      if (id === null) {\n        return noop\n      }\n      const current = read(value)\n      add(id, current)\n      previous.current = current\n      return () => {\n        remove(id)\n      }\n    }, [add, id, remove, value])\n\n    React.useLayoutEffect(() => {\n      const current = read(value)\n      if (\n        typeof previous.current !== 'undefined' &&\n        !isEqual(previous.current, current) &&\n        id !== null\n      ) {\n        update(id, current)\n      }\n      previous.current = current\n    })\n  }\n}\n","import {debounce} from 'lodash'\nimport createPubsub from 'nano-pubsub'\nimport {Reported} from './types'\n\nexport function createStore<Value>() {\n  const reportedValues = new Map<string, Value>()\n  const {publish, subscribe} = createPubsub<Reported<Value>[]>()\n\n  const debouncedPublish = debounce(publish, 10, {trailing: true})\n  const read = () => Array.from(reportedValues.entries())\n\n  function add(id: string, value: Value) {\n    if (reportedValues.has(id)) {\n      // eslint-disable-next-line no-console\n      // console.error(\n      //   new Error(\n      //     `Invalid call to useReporter(${id}): A component reporting on \"${id}\" is already mounted in the subtree. Make sure that all reporters within the same <Tracker> subtree have unique ids.`\n      //   )\n      // )\n    }\n    reportedValues.set(id, value)\n    debouncedPublish(read())\n  }\n\n  function update(id: string, value: Value) {\n    if (!reportedValues.has(id)) {\n      // throw new Error(`A reporter with id \"${id}\" is not known.`)\n    }\n    reportedValues.set(id, value)\n    debouncedPublish(read())\n  }\n\n  function remove(id: string) {\n    if (!reportedValues.has(id)) {\n      // throw new Error(`A reporter with id \"${id}\" is not known`)\n    }\n    reportedValues.delete(id)\n    debouncedPublish(read())\n  }\n\n  return {\n    add,\n    remove,\n    update,\n    read,\n    subscribe,\n  }\n}\n","import React from 'react'\nimport {Reported, TrackerContext} from './types'\nimport {createUseReporter, IsEqualFunction} from './createUseReporter'\nimport {createStore} from './createStore'\n\n// Todo: consider memozing individual functions or move the context assertion/guard to a separate step.\nlet didWarn = false\nconst useReporterGuard = (id: string): void => {\n  if (!didWarn) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      new Error(\n        `No context provided for reporter. Make sure that the component calling \"useReporter(${id}, ...)\", is wrapped in a <Tracker> element`\n      )\n    )\n  }\n  didWarn = true\n}\n\nfunction useReportedValueGuard(): Reported<unknown>[] {\n  if (!didWarn) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      new Error(\n        'No context provided for reporter. Make sure that the component calling \"useReportedValues()\", is wrapped inside a <Tracker> element'\n      )\n    )\n  }\n  didWarn = true\n  return []\n}\n\nconst useSubscribeGuard = () => {\n  if (!didWarn) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      new Error(\n        'No context provided for reporter. Make sure that the component calling \"useReportedValues()\", is wrapped inside a <Tracker> element'\n      )\n    )\n  }\n  didWarn = true\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  return () => {}\n}\n\nconst DEFAULT_CONTEXT: TrackerContext<unknown> = {\n  add: useReporterGuard,\n  update: useReporterGuard,\n  remove: useReporterGuard,\n  subscribe: useSubscribeGuard,\n  read: useReportedValueGuard,\n}\n\nlet id = 0\nconst getNextId = () => ++id\n\n/** @internal */\nexport function createTrackerScope<Value>() {\n  const Context = React.createContext(DEFAULT_CONTEXT as TrackerContext<Value>)\n\n  function useReportedValues() {\n    const context = React.useContext(Context)\n    const [values, setValues] = React.useState(context.read())\n    React.useLayoutEffect(() => {\n      setValues(context.read())\n      return context.subscribe(setValues)\n    }, [context])\n    return values\n  }\n\n  function Tracker(props: {children: React.ReactNode}) {\n    const store = React.useMemo(() => createStore<Value>(), [])\n    return <Context.Provider value={store}>{props.children}</Context.Provider>\n  }\n\n  const useReporter = createUseReporter(Context)\n\n  return {\n    Tracker,\n    useReportedValues,\n    useReporter,\n    useAutoIdReporter: (\n      value: Value | (() => Value),\n      isEqual: IsEqualFunction<Value> = Object.is\n    ) => useReporter(`element-${React.useRef(getNextId()).current}`, value, isEqual),\n  }\n}\n","// Toggle tracking of change indicator DOM positions and connectors overlay rendering\nexport const ENABLED = true\n\nexport const CORNER_RADIUS = 4\n\nexport const INTERACTIVE_STROKE_WIDTH = 16\n\nexport const CONNECTOR_MARGIN = 8\nexport const ARROW_MARGIN_X = 8\nexport const ARROW_MARGIN_Y = 2\nexport const ARROW_SIZE = 4\nexport const ARROW_THRESHOLD = 12\nexport const STROKE_WIDTH = 2\n\nexport const DEBUG = false\nexport const DEBUG_LAYER_BOUNDS = DEBUG || false\n","import {Path} from '@sanity/types'\nimport {createNoopTrackerScope, createTrackerScope} from '../components/react-track-elements'\nimport {ENABLED} from './constants'\n\n/** @internal */\nexport interface TrackedChange {\n  element: HTMLElement\n  path: Path\n  isChanged: boolean\n  hasFocus: boolean\n  hasHover: boolean\n  hasRevertHover: boolean\n  zIndex: number\n}\n\n/** @internal */\nexport interface TrackedArea {\n  element: HTMLElement\n}\n\nconst trackerScope = ENABLED\n  ? createTrackerScope<TrackedChange | TrackedArea>()\n  : createNoopTrackerScope<TrackedChange | TrackedArea>()\n\n/** @internal */\nexport const Tracker = trackerScope.Tracker\n\n/** @internal */\nexport const useReportedValues = trackerScope.useReportedValues\n\n/** @internal */\nexport const useReporter = trackerScope.useReporter\n","import {createContext} from 'react'\nimport {Path} from '@sanity/types'\n\n/** @internal */\nexport interface ConnectorContextValue {\n  isReviewChangesOpen: boolean\n  onOpenReviewChanges: () => void | undefined\n  onSetFocus: (nextPath: Path) => void | undefined\n}\n\n/** @internal */\nexport const ConnectorContext = createContext<ConnectorContextValue>({\n  isReviewChangesOpen: false,\n  onOpenReviewChanges: () => undefined,\n  onSetFocus: () => undefined,\n} as ConnectorContextValue)\n","import * as PathUtils from '@sanity/util/paths'\nimport React, {SyntheticEvent, useCallback} from 'react'\nimport {Path} from '@sanity/types'\nimport deepCompare from 'react-fast-compare'\nimport {useReporter} from './tracker'\nimport {ConnectorContext} from './ConnectorContext'\n\n/**\n * This is used to draw the bar that wraps the diff components in the changes panel\n *\n * @internal\n */\nexport const ChangeFieldWrapper = (props: {\n  path: Path\n  children: React.ReactNode\n  hasHover: boolean\n}) => {\n  const ref = React.useRef<HTMLDivElement>(null)\n  const {onSetFocus} = React.useContext(ConnectorContext)\n  const [isHover, setHover] = React.useState(false)\n\n  const onMouseEnter = React.useCallback(() => {\n    setHover(true)\n  }, [])\n\n  const onMouseLeave = React.useCallback(() => {\n    setHover(false)\n  }, [])\n\n  useReporter(\n    `change-${PathUtils.toString(props.path)}`,\n    () => ({\n      element: ref.current!,\n      path: props.path,\n      isChanged: true,\n      hasFocus: false,\n      hasHover: isHover,\n      hasRevertHover: props.hasHover,\n    }),\n    // note: deepCompare should be ok here since we're not comparing deep values\n    deepCompare\n  )\n\n  const handleClick = useCallback(\n    (event: SyntheticEvent) => {\n      setFocusWithStopPropagation(event, onSetFocus, props.path)\n    },\n    [onSetFocus, props.path]\n  )\n\n  return (\n    <div ref={ref} onClick={handleClick} onMouseLeave={onMouseLeave} onMouseEnter={onMouseEnter}>\n      {props.children}\n    </div>\n  )\n}\n\n// Stop the propagation here, or it will trigger the parent diff component's onClick.\nfunction setFocusWithStopPropagation(\n  event: React.SyntheticEvent,\n  onSetFocus: (toPath: Path) => void,\n  path: Path\n): void {\n  event.stopPropagation()\n  onSetFocus(path)\n}\n","import {isEqual} from 'lodash'\nimport {useRef} from 'react'\n\n/**\n * This React hook should be considered an escape hatch – to make sure that a value is the same\n * on every render. SHOULD NOT BE USED IN MOST CASES.\n * @deprecated please use `useMemo` and `useCallback` strategies instead to make deps stable, this hook runs comparisons on every single render and while each comparison can be fast, it quickly adds up\n *\n * @internal\n */\nexport function useUnique<ValueType>(value: ValueType): ValueType {\n  const valueRef = useRef<ValueType>(value)\n\n  if (!isEqual(valueRef.current, value)) {\n    valueRef.current = value\n  }\n\n  return valueRef.current\n}\n","import {useMemoObservable} from 'react-rx'\nimport {concat, Observable, of} from 'rxjs'\nimport {catchError, distinctUntilChanged, map, scan, switchMap} from 'rxjs/operators'\nimport {useUnique} from './useUnique'\n\n/** @internal */\nexport type LoadingTuple<T> = [T, boolean]\n\n/** @internal */\nexport type ReactHook<TArgs, TResult> = (args: TArgs) => TResult\n\n/** @internal */\n// overloads to handle types where an initial value is passed\nexport function createHookFromObservableFactory<T, TArg = void>(\n  observableFactory: (arg: TArg) => Observable<T>,\n  initialValue: T\n): ReactHook<TArg, LoadingTuple<T>>\n/** @internal */\nexport function createHookFromObservableFactory<T, TArg = void>(\n  observableFactory: (arg: TArg) => Observable<T>,\n  initialValue?: T\n): ReactHook<TArg, LoadingTuple<T | undefined>>\n\n/**\n * A function that will create a hook from a function that returns an\n * observable. The parameters of the hook will be the parameters of the function\n * and the return of the hook will be a loading tuple with the value of the\n * observable at the first index and a boolean with the loading state as the\n * second index.\n *\n * The loading state will become true as soon as new incoming args are given and\n * will flip to false when the observable from the function emits the next\n * value.\n *\n * @internal\n */\nexport function createHookFromObservableFactory<T, TArg = void>(\n  observableFactory: (arg: TArg) => Observable<T>,\n  initialValue?: T\n): ReactHook<TArg, LoadingTuple<T | undefined>> {\n  const initialLoadingTuple: LoadingTuple<T | undefined> = [initialValue, true]\n  const initialResult = {type: 'tuple', tuple: initialLoadingTuple} as const\n\n  return function useLoadableFromCreateLoadable(_arg: TArg) {\n    // @todo refactor callsites to make use of useMemo so that this hook can be removed\n    const memoArg = useUnique(_arg)\n    const result = useMemoObservable(\n      () =>\n        of(memoArg).pipe(\n          switchMap((arg) =>\n            concat(\n              of({type: 'loading'} as const),\n              observableFactory(arg).pipe(map((value) => ({type: 'value', value} as const)))\n            )\n          ),\n          scan(([prevValue], next): LoadingTuple<T | undefined> => {\n            if (next.type === 'loading') return [prevValue, true]\n            return [next.value, false]\n          }, initialLoadingTuple),\n          distinctUntilChanged(([prevValue, prevIsLoading], [nextValue, nextIsLoading]) => {\n            if (prevValue !== nextValue) return false\n            if (prevIsLoading !== nextIsLoading) return false\n            return true\n          }),\n          map((tuple) => ({type: 'tuple', tuple} as const)),\n          catchError((error) => of({type: 'error', error} as const))\n        ),\n      [memoArg],\n      initialResult\n    )\n\n    if (result.type === 'error') throw result.error\n\n    return result.tuple\n  }\n}\n","/**\n * @internal\n */\nexport function isNonNullable<T>(value: T): value is NonNullable<T> {\n  return value !== null && value !== undefined\n}\n","import {SanityDocument} from '@sanity/types'\nimport {isNonNullable} from './isNonNullable'\n\n/** @internal */\n// nominal/opaque type hack\nexport type Opaque<T, K> = T & {__opaqueId__: K}\n\n/** @internal */\nexport type DraftId = Opaque<string, 'draftId'>\n\n/** @internal */\nexport type PublishedId = Opaque<string, 'publishedId'>\n\n/** @internal */\nexport const DRAFTS_FOLDER = 'drafts'\nconst DRAFTS_PREFIX = `${DRAFTS_FOLDER}.`\n\n/** @internal */\nexport function isDraft(document: SanityDocument): boolean {\n  return isDraftId(document._id)\n}\n\n/** @internal */\nexport function isDraftId(id: string): id is DraftId {\n  return id.startsWith(DRAFTS_PREFIX)\n}\n\n/** @internal */\nexport function getIdPair(id: string): {draftId: DraftId; publishedId: PublishedId} {\n  return {\n    draftId: getDraftId(id),\n    publishedId: getPublishedId(id),\n  }\n}\n\n/** @internal */\nexport function isPublishedId(id: string): id is PublishedId {\n  return !isDraftId(id)\n}\n\n/** @internal */\nexport function getDraftId(id: string): DraftId {\n  return isDraftId(id) ? id : ((DRAFTS_PREFIX + id) as DraftId)\n}\n\n/** @internal */\nexport function getPublishedId(id: string): PublishedId {\n  return (isDraftId(id) ? id.slice(DRAFTS_PREFIX.length) : id) as PublishedId\n}\n\n/** @internal */\nexport function createDraftFrom(document: SanityDocument): SanityDocument {\n  return {\n    ...document,\n    _id: getDraftId(document._id),\n  }\n}\n\n/** @internal */\nexport function newDraftFrom(document: SanityDocument): SanityDocument {\n  return {\n    ...document,\n    _id: DRAFTS_PREFIX,\n  }\n}\n\n/** @internal */\nexport function createPublishedFrom(document: SanityDocument): SanityDocument {\n  return {\n    ...document,\n    _id: getPublishedId(document._id),\n  }\n}\n\n/**\n * Takes a list of documents and collates draft/published pairs into single entries\n * `{id: <published id>, draft?: <draft document>, published?: <published document>}`\n *\n * Note: because Map is ordered by insertion key the resulting array will be ordered by whichever\n * version appeared first\n *\n * @internal\n */\nexport interface CollatedHit<T extends {_id: string} = {_id: string}> {\n  id: string\n  type: string\n  draft?: T\n  published?: T\n}\n\n/** @internal */\nexport function collate<T extends {_id: string; _type: string}>(documents: T[]): CollatedHit<T>[] {\n  const byId = documents.reduce((res, doc) => {\n    const publishedId = getPublishedId(doc._id)\n    let entry = res.get(publishedId)\n    if (!entry) {\n      entry = {id: publishedId, type: doc._type, published: undefined, draft: undefined}\n      res.set(publishedId, entry)\n    }\n\n    entry[publishedId === doc._id ? 'published' : 'draft'] = doc\n    return res\n  }, new Map())\n\n  return Array.from(byId.values())\n}\n\n/** @internal */\n// Removes published documents that also has a draft\nexport function removeDupes(documents: SanityDocument[]): SanityDocument[] {\n  return collate(documents)\n    .map((entry) => entry.draft || entry.published)\n    .filter(isNonNullable)\n}\n","/** @internal */\nexport const EMPTY_OBJECT: Record<string, unknown> = Object.freeze({})\n\n/** @internal */\nexport const EMPTY_ARRAY: never[] = Object.freeze([]) as never[]\n","import {GlobalErrorChannel} from '../components/globalErrorHandler'\n\n/**\n * Gets the global scope instance in a given environment.\n *\n * The strategy is to return the most modern, and if not, the most common:\n * - The `globalThis` variable is the modern approach to accessing the global scope\n * - The `window` variable is the global scope in a web browser\n * - The `self` variable is the global scope in workers and others\n * - The `global` variable is the global scope in Node.js\n */\nfunction getGlobalScope(): typeof globalThis & {__sanityErrorChannel?: GlobalErrorChannel} {\n  if (typeof globalThis !== 'undefined') return globalThis\n  if (typeof window !== 'undefined') return window\n  if (typeof self !== 'undefined') return self\n  if (typeof global !== 'undefined') return global\n\n  throw new Error('@sanity/ui: could not locate global scope')\n}\n\n/** @internal */\nexport const globalScope = getGlobalScope()\n","/** @internal */\nexport function isArray(value: unknown): value is unknown[] {\n  return Array.isArray(value)\n}\n","/**\n * @internal\n */\nexport function isRecord(value: unknown): value is Record<string, unknown> {\n  return Boolean(value) && typeof value === 'object' && !Array.isArray(value)\n}\n","/** @internal */\nexport function isString(value: unknown): value is string {\n  return typeof value === 'string'\n}\n","/** @internal */\nexport function isTruthy<T>(value: T | false): value is T {\n  return Boolean(value)\n}\n","import {ResizeObserver as Polyfill, ResizeObserverEntry} from '@juggle/resize-observer'\nimport createPubSub, {Subscriber} from 'nano-pubsub'\n\nconst ResizeObserver: typeof Polyfill =\n  typeof document === 'object' && typeof window === 'object' && window.ResizeObserver\n    ? window.ResizeObserver\n    : Polyfill\n\n/** @internal */\nexport interface SharedResizeObserver {\n  observe: (\n    element: Element,\n    observer: Subscriber<ResizeObserverEntry>,\n    options?: ResizeObserverOptions\n  ) => () => void\n}\n\n/** @internal */\nexport const createSharedResizeObserver = (): SharedResizeObserver => {\n  const event = createPubSub<ResizeObserverEntry[]>()\n\n  const resizeObserver = new ResizeObserver((entries: ResizeObserverEntry[]) =>\n    event.publish(entries)\n  )\n\n  return {\n    observe: (\n      element: Element,\n      observer: Subscriber<ResizeObserverEntry>,\n      options?: ResizeObserverOptions\n    ) => {\n      const unsubscribe = event.subscribe((entries) => {\n        const entry = entries.find((e) => e.target === element)\n        if (entry) {\n          observer(entry)\n        }\n      })\n\n      resizeObserver.observe(element, options)\n\n      return () => {\n        unsubscribe()\n        resizeObserver.unobserve(element)\n      }\n    },\n  }\n}\n\n/** @internal */\nexport const resizeObserver = createSharedResizeObserver()\n","import {SchemaTypeDefinition} from '@sanity/types'\n\nconst BUNDLED_DOC_TYPES = ['sanity.imageAsset', 'sanity.fileAsset']\n\n/**\n * @internal\n */\nexport function _isSanityDocumentTypeDefinition(\n  def: SchemaTypeDefinition\n): def is SchemaTypeDefinition<'document'> {\n  return def.type === 'document' && BUNDLED_DOC_TYPES.includes(def.name)\n}\n\n/**\n * @internal\n */\nexport function _isCustomDocumentTypeDefinition(\n  def: SchemaTypeDefinition\n): def is SchemaTypeDefinition<'document'> {\n  return def.type === 'document' && !_isSanityDocumentTypeDefinition(def)\n}\n","type SearchPathSegment = string | number | []\n\nconst GROQ_KEYWORDS = ['match', 'in', 'asc', 'desc', 'true', 'false', 'null']\nconst VALID_FIELD = /^[a-zA-Z_][a-zA-Z0-9_]*$/\n\n/** @internal */\nexport const fieldNeedsEscape = (fieldName: string): boolean =>\n  !VALID_FIELD.test(fieldName) || GROQ_KEYWORDS.includes(fieldName)\n\n/** @internal */\nexport const escapeField = (fieldName: string): string => `[\"${fieldName}\"]`\n\nconst escapeFirst = (fieldName: string): string => `@${escapeField(fieldName)}`\n\nconst isEmptyArray = (value: unknown): value is [] => Array.isArray(value) && value.length === 0\n\n/** @internal */\nexport const joinPath = (pathArray: SearchPathSegment[]): string => {\n  let path = ''\n  for (let i = 0; i < pathArray.length; i++) {\n    const pathSegment = pathArray[i]\n    if (isEmptyArray(pathSegment)) {\n      path += `[]`\n      continue\n    }\n\n    if (typeof pathSegment === 'number') {\n      path += `[${pathSegment}]`\n      continue\n    }\n\n    const isFirst = i === 0\n    const needsEscape = fieldNeedsEscape(pathSegment)\n\n    if (needsEscape) {\n      path = isFirst ? escapeFirst(pathSegment) : `${path}${escapeField(pathSegment)}`\n    } else {\n      path = isFirst ? pathSegment : `${path}.${pathSegment}`\n    }\n  }\n\n  return path\n}\n","const FONT_SANS_SERIF = `-apple-system, BlinkMacSystemFont, \\\\'Segoe UI\\\\', Roboto, \\\\'Helvetica Neue\\\\', Helvetica, Arial, system-ui, sans-serif`\nconst FONT_MONOSPACE = `-apple-system-ui-monospace, \\\\'SF Mono\\\\', Menlo, Monaco, Consolas, monospace`\n\n/** @internal */\nexport const uncaughtErrorHandler = (): string =>\n  // prettier-ignore\n  [\n    `window.onerror = function(m,u,l,c,e) {`,\n      `var p=window.location.port;`,\n      `var h=window.location.protocol+'//'+window.location.hostname+(p?':'+p:'');`,\n      `var r=document.getElementById('sanity');`,\n      `while(r.firstChild){r.removeChild(r.firstChild);}`,\n      `var s=document.createElement('style');`,\n      `s.appendChild(document.createTextNode('`,\n        `html,body,#sanityBody,#sanity,#sanityError{height:100%;}`,\n        `body{-webkit-font-smoothing:antialiased;margin:0;}`,\n        `#sanityError{position:fixed;top:0;left:0;width:100%;height:100%;overflow:auto;background-color:#fff;color:#121923;font-family:${FONT_SANS_SERIF};font-size:16px;line-height:21px;min-height:100%;}`,\n        `#sanityError>div{background-color:#fff;max-width:960px;margin:0 auto;padding:47px 32px 52px;}`,\n        `@media(min-width:512px){`,\n          `#sanityError>div{`,\n            `padding:47px 84px;`,\n          `}`,\n        `}`,\n        `#sanityError button{-webkit-font-smoothing:inherit;font:inherit;font-weight:500;background-color:#2276FC;color:#fff;padding:7px 12px;border-radius:3px;border:0;}`,\n        `#sanityError button:hover{background-color:#1E63D0;}`,\n        `#sanityError button:active{background-color:#1B50A5;}`,\n      `'));`,\n      `document.head.appendChild(s);`,\n      `var f=document.createElement('div');`,\n      `f.id='sanityError';`,\n      `f.innerHTML='`,\n        `<div>`,\n          `<h1 style=\"font-size:21px;line-height:27px;margin: 0 0 10px;\">Unhandled error</h1>`,\n          `<p style=\"color:#66758D;margin:10px 0 14px;\">Encountered an unhandled error in this Studio.</p>`,\n          `<button class=\"sanity-error-handler__reload-btn\" type=\"button\">Reload page</button>`,\n          `<pre style=\"background-color:#FDEBEA;color:#C3362C;font-size:13px;line-height:17px;padding:8px 12px;border-radius:3px;margin:32px 0 0;overflow:auto;\">`,\n            `<code style=\"font-family:${FONT_MONOSPACE};\">`,\n              `'+e.stack.replaceAll(h,'')+'`,\n            `</code>`,\n          `</pre>`,\n        `</div>`,\n      `';`,\n      `var b=f.querySelector('.sanity-error-handler__reload-btn');`,\n      `if(b){`,\n        `b.onclick=function() {`,\n          `window.location.reload();`,\n        `}`,\n      `};`,\n      `r.appendChild(f);`,\n    `};`,\n  ].join('')\n","import {useMemoObservable} from 'react-rx'\nimport {Observable, of, OperatorFunction} from 'rxjs'\nimport {catchError, map} from 'rxjs/operators'\n\n/** @internal */\nexport type LoadableState<T> = LoadingState | LoadedState<T> | ErrorState\n\n/** @internal */\nexport interface LoadingState {\n  value: undefined\n  error: null\n  isLoading: true\n}\n\n/** @internal */\nexport interface LoadedState<T> {\n  value: T\n  error: null\n  isLoading: false\n}\n\n/** @internal */\nexport interface ErrorState {\n  value: undefined\n  error: Error\n  isLoading: false\n}\n\nconst LOADING_STATE: LoadingState = {\n  isLoading: true,\n  value: undefined,\n  error: null,\n}\n\n/** @internal */\nexport function useLoadable<T>(value$: Observable<T>): LoadableState<T | undefined>\n/** @internal */\nexport function useLoadable<T>(value$: Observable<T>, initialValue: T): LoadableState<T>\n/** @internal */\nexport function useLoadable<T>(\n  value$: Observable<T>,\n  initialValue?: T\n): LoadableState<T | undefined> {\n  const initial: LoadableState<T> =\n    typeof initialValue === 'undefined'\n      ? LOADING_STATE\n      : {isLoading: false, value: initialValue, error: null}\n\n  return useMemoObservable(() => value$.pipe(asLoadable()), [value$], initial)\n}\n\n/** @internal */\nexport function asLoadable<T>(): OperatorFunction<T, LoadableState<T>> {\n  return (value$: Observable<T>) =>\n    value$.pipe(\n      map((value) => ({isLoading: false, value, error: null} as const)),\n      catchError((error): Observable<ErrorState> => of({isLoading: false, value: undefined, error}))\n    )\n}\n","import {throttle} from 'lodash'\nimport type {ThrottleSettings} from 'lodash'\nimport {useMemo} from 'react'\n\n/**\n * @internal\n *\n * @example\n * ```tsx\n * // First create a callback using React’s `useCallback` hook\n * const myCallback = useCallback(() => {\n *   // this is not throttled\n * }, [])\n *\n * // Then make a throttled version using the `useThrottledCallback` hook\n * const myThrottledCallback = useThrottledCallback(myCallback, 100)\n *\n * // Call the throttled callback\n * <Button onClick={myThrottledCallback} />\n * ```\n */\nexport function useThrottledCallback(\n  callback: (...args: any[]) => any,\n  wait: number,\n  options: ThrottleSettings\n): (...args: any[]) => any {\n  const throttledCallback = useMemo(\n    () => throttle(callback, wait, options),\n    [callback, options, wait]\n  )\n\n  return throttledCallback\n}\n","import styled, {css} from 'styled-components'\nimport {Theme} from '@sanity/ui'\n\ninterface ThemeContext {\n  theme: Theme\n}\n\ninterface RootProps {\n  focus: boolean\n  hover: boolean\n  changed?: boolean\n  isReviewChangeOpen: boolean\n  disabled?: boolean\n  $withHoverEffect?: boolean\n}\n\nconst animationSpeed = 250\n\nexport const ChangeBarWrapper = styled.div(({changed, disabled, isReviewChangeOpen}: RootProps) => {\n  if (disabled)\n    return css`\n      ${ChangeBar} {\n        display: none;\n      }\n    `\n\n  return css`\n    --change-bar-offset: 2px;\n\n    display: flex;\n    position: relative;\n\n    @media (hover: hover) {\n      &:hover {\n        z-index: 10;\n      }\n    }\n\n    /* hide when field is not changed */\n    ${!changed &&\n    css`\n      ${ChangeBar} {\n        opacity: 0;\n        pointer-events: none;\n      }\n    `}\n\n    /* hide hover effect when review changes is open */\n    ${isReviewChangeOpen &&\n    css`\n      ${ChangeBarButton} {\n        opacity: 0;\n      }\n    `}\n  `\n})\n\nexport const FieldWrapper = styled.div`\n  flex-grow: 1;\n  min-width: 0;\n`\n\nexport const ChangeBar = styled.div<{$zIndex: number}>`\n  position: relative;\n  opacity: 1;\n  transition: opacity 100ms;\n  z-index: ${({$zIndex}) => $zIndex};\n`\n\nexport const ChangeBarMarker = styled.div(({theme}: ThemeContext) => {\n  /* these colours aren't freely available on the current theme */\n  const notSelectedColor = theme.sanity.color.spot.yellow\n  const screenMedium = theme.sanity.media[0]\n\n  return css`\n    position: absolute;\n    top: 0;\n    left: var(--change-bar-offset);\n    width: 2px;\n    bottom: 0;\n    background-color: ${notSelectedColor};\n    border-radius: 1px;\n\n    @media (min-width: ${screenMedium}px) {\n      display: unset;\n    }\n  `\n})\n\nexport const ChangeBarButton = styled.button(\n  ({theme, $withHoverEffect}: {theme: Theme; $withHoverEffect?: boolean}) => {\n    /* these colours aren't freely available on the current theme */\n    const notSelectedColor = theme.sanity.color.spot.yellow\n\n    return css`\n      appearance: none;\n      border: 0;\n      outline: 0;\n      display: block;\n      padding: 0;\n      background: transparent;\n      opacity: 0;\n      position: absolute;\n      height: 100%;\n      cursor: pointer;\n      pointer-events: all;\n      left: calc(-0.25rem + var(--change-bar-offset));\n      width: 1rem;\n      transition: opacity ${animationSpeed}ms;\n\n      &:focus {\n        border: 0;\n        outline: 0;\n      }\n\n      &:after {\n        content: '';\n        width: 16px;\n        height: calc(100% + 14px);\n        display: block;\n        position: absolute;\n        top: -7px;\n        left: -3px;\n        border-radius: 8px;\n        background: ${notSelectedColor};\n      }\n\n      &:focus {\n        border: 0;\n        outline: 0;\n      }\n\n      ${$withHoverEffect &&\n      css`\n        @media (hover: hover) {\n          &:hover {\n            opacity: 0.2;\n          }\n        }\n      `}\n    `\n  }\n)\n","import {useLayer} from '@sanity/ui'\nimport React, {useCallback, useMemo, useState} from 'react'\nimport {ConnectorContext} from './ConnectorContext'\nimport {\n  ChangeBarWrapper,\n  FieldWrapper,\n  ChangeBar,\n  ChangeBarMarker,\n  ChangeBarButton,\n} from './ElementWithChangeBar.styled'\n\nexport function ElementWithChangeBar(props: {\n  children: React.ReactNode\n  disabled?: boolean\n  hasFocus: boolean\n  isChanged?: boolean\n  withHoverEffect?: boolean\n}) {\n  const {children, disabled, hasFocus, isChanged, withHoverEffect = true} = props\n\n  const [hover, setHover] = useState(false)\n  const {onOpenReviewChanges, isReviewChangesOpen} = React.useContext(ConnectorContext)\n  const {zIndex} = useLayer()\n\n  const handleMouseEnter = useCallback(() => setHover(true), [])\n  const handleMouseLeave = useCallback(() => setHover(false), [])\n\n  const changeBar = useMemo(\n    () =>\n      disabled || !isChanged ? null : (\n        <ChangeBar data-testid=\"change-bar\" $zIndex={zIndex}>\n          <ChangeBarMarker data-testid=\"change-bar__marker\" />\n\n          <ChangeBarButton\n            aria-label=\"Review changes\"\n            data-testid=\"change-bar__button\"\n            onClick={isReviewChangesOpen ? undefined : onOpenReviewChanges}\n            onMouseEnter={handleMouseEnter}\n            onMouseLeave={handleMouseLeave}\n            tabIndex={-1}\n            type=\"button\"\n            $withHoverEffect={withHoverEffect}\n          />\n        </ChangeBar>\n      ),\n    [\n      disabled,\n      isChanged,\n      zIndex,\n      isReviewChangesOpen,\n      onOpenReviewChanges,\n      handleMouseEnter,\n      handleMouseLeave,\n      withHoverEffect,\n    ]\n  )\n\n  return (\n    <ChangeBarWrapper\n      changed={isChanged}\n      data-testid=\"change-bar-wrapper\"\n      disabled={disabled}\n      focus={hasFocus}\n      hover={hover}\n      isReviewChangeOpen={isReviewChangesOpen}\n    >\n      <FieldWrapper data-testid=\"change-bar__field-wrapper\">{children}</FieldWrapper>\n      {changeBar}\n    </ChangeBarWrapper>\n  )\n}\n","import {useLayer} from '@sanity/ui'\nimport React, {memo} from 'react'\nimport deepCompare from 'react-fast-compare'\nimport * as PathUtils from '@sanity/util/paths'\nimport {Path} from '@sanity/types'\nimport {EMPTY_ARRAY} from '../util'\nimport {useReporter} from './tracker'\nimport {ElementWithChangeBar} from './ElementWithChangeBar'\n\nconst ChangeBarWrapper = memo(function ChangeBarWrapper(\n  props: Omit<React.ComponentProps<'div'>, 'onChange'> & {\n    disabled?: boolean\n    path: Path\n    hasFocus: boolean\n    isChanged?: boolean\n    withHoverEffect?: boolean\n  }\n) {\n  const {\n    children,\n    className,\n    disabled,\n    hasFocus,\n    isChanged,\n    path = EMPTY_ARRAY,\n    withHoverEffect,\n  } = props\n  const layer = useLayer()\n  const [hasHover, setHover] = React.useState(false)\n  const onMouseEnter = React.useCallback(() => setHover(true), [])\n  const onMouseLeave = React.useCallback(() => setHover(false), [])\n  const ref = React.useRef<HTMLDivElement | null>(null)\n  useReporter(\n    disabled ? null : `field-${PathUtils.toString(path)}`,\n    () => ({\n      element: ref.current!,\n      path: path,\n      isChanged: isChanged,\n      hasFocus: hasFocus,\n      hasHover: hasHover,\n      zIndex: layer.zIndex,\n    }),\n    deepCompare // note: deepCompare should be ok here since we're not comparing deep values\n  )\n\n  return (\n    <div ref={ref} className={className} onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave}>\n      <ElementWithChangeBar\n        hasFocus={hasFocus}\n        isChanged={isChanged}\n        disabled={disabled}\n        withHoverEffect={withHoverEffect}\n      >\n        {children}\n      </ElementWithChangeBar>\n    </div>\n  )\n})\n\n/** @internal */\nexport interface ChangeIndicatorProps {\n  children?: React.ReactNode\n  className?: string\n  disabled?: boolean\n  path: Path\n  hasFocus: boolean\n  isChanged: boolean\n  withHoverEffect?: boolean\n}\n\n/** @internal */\nexport function ChangeIndicator(props: ChangeIndicatorProps) {\n  const {children, className, disabled, hasFocus, isChanged, path, withHoverEffect} = props\n  return (\n    <ChangeBarWrapper\n      className={className}\n      disabled={disabled}\n      path={path}\n      hasFocus={hasFocus}\n      isChanged={isChanged}\n      withHoverEffect={withHoverEffect}\n    >\n      {children}\n    </ChangeBarWrapper>\n  )\n}\n","import React from 'react'\nimport {Path} from '@sanity/types'\n\n/** @internal */\nexport interface ChangeIndicatorContextValue {\n  value?: unknown\n  focusPath: Path\n  path: Path\n  fullPath: Path\n  isChanged: boolean\n}\n\n/** @internal */\nexport const ChangeIndicatorContext: React.Context<ChangeIndicatorContextValue> =\n  React.createContext({\n    path: [],\n    fullPath: [],\n    focusPath: [],\n    isChanged: false,\n  } as ChangeIndicatorContextValue)\n","import React from 'react'\nimport {PubSub} from 'nano-pubsub'\n\nexport const ScrollContext = React.createContext<null | PubSub<Event>>(null)\n","import React from 'react'\nimport {ScrollContext} from './scrollContext'\nimport {Subscriber} from 'nano-pubsub'\n\n/** @internal */\nexport function useOnScroll(callback: Subscriber<Event>) {\n  const parentContext = React.useContext(ScrollContext)\n  React.useEffect(() => {\n    return parentContext?.subscribe(callback)\n  }, [callback])\n}\n","import {useForwardedRef} from '@sanity/ui'\nimport createPubSub from 'nano-pubsub'\nimport React, {useContext, useEffect, useMemo} from 'react'\nimport {ScrollContext} from './scrollContext'\n\n/** @internal */\nexport interface ScrollContainerProps<T extends React.ElementType>\n  extends Omit<React.HTMLProps<T>, 'as' | 'onScroll'> {\n  as?: React.ElementType | keyof JSX.IntrinsicElements\n  onScroll?: (event: Event) => () => void\n}\n\nconst noop = () => undefined\n\n/**\n * This provides a utility function for use within Sanity Studios to create scrollable containers\n * It also provides a way for components inside a scrollable container to track onScroll on their first parent scroll container\n * NOTE: this is used by different studio utilities to track positions of elements on screen\n * NOTE: It will call any given `onScroll` callback with a Native DOM Event, and not a React Synthetic event\n * NOTE: It will not make sure the element is actually scrollable, this still needs to be done with css as usual\n *\n * @internal\n */\nexport const ScrollContainer = React.forwardRef(function ScrollContainer<\n  T extends React.ElementType = 'div'\n>(props: ScrollContainerProps<T>, ref: React.ForwardedRef<HTMLDivElement>) {\n  const {as = 'div', onScroll, ...rest} = props\n  const forwardedRef = useForwardedRef(ref)\n\n  // const selfRef = useRef<HTMLElement | null>(null)\n  const parentContext = useContext(ScrollContext)\n  const childContext = useMemo(() => createPubSub<Event>(), [])\n\n  useEffect(() => {\n    if (onScroll) {\n      // emit scroll events from children\n      return childContext.subscribe(onScroll)\n    }\n    return noop\n  }, [childContext, onScroll])\n\n  useEffect(() => {\n    // let events bubble up\n    if (parentContext) {\n      return childContext.subscribe(parentContext.publish)\n    }\n    return noop\n  }, [parentContext, childContext])\n\n  useEffect(() => {\n    const handleScroll = (event: Event) => {\n      childContext.publish(event)\n    }\n\n    const el = forwardedRef.current\n\n    if (!el) {\n      return undefined\n    }\n\n    el.addEventListener('scroll', handleScroll, {\n      passive: true,\n      capture: true,\n    })\n\n    return () => {\n      el.removeEventListener('scroll', handleScroll)\n    }\n  }, [childContext, forwardedRef])\n\n  return (\n    <ScrollContext.Provider value={childContext}>\n      {React.createElement(as, {ref: forwardedRef, 'data-testid': 'scroll-container', ...rest})}\n    </ScrollContext.Provider>\n  )\n})\n","import React from 'react'\nimport {useOnScroll} from './hooks'\nimport {ScrollEventHandler} from './types'\n\n/** @internal */\nexport interface ScrollMonitorProps {\n  onScroll: ScrollEventHandler\n  children?: React.ReactNode\n}\n\n/** @internal */\nexport function ScrollMonitor({onScroll, children}: ScrollMonitorProps) {\n  useOnScroll(onScroll)\n  return <>{children}</>\n}\n","import {isKeyedObject} from '@sanity/types'\nimport * as PathUtils from '@sanity/util/paths'\nimport {TrackedChange, TrackedArea} from '../tracker'\n\nexport function findMostSpecificTarget(\n  targetType: 'change' | 'field',\n  id: string,\n  values: Map<string, TrackedChange | TrackedArea>\n): TrackedChange | undefined {\n  const pathString = id.slice(id.indexOf('-') + 1) || '[]'\n  const path = PathUtils.fromString(pathString)\n  const exactId = `${targetType}-${PathUtils.toString(path)}`\n  if (values.has(exactId)) {\n    return values.get(exactId) as TrackedChange\n  }\n\n  let mostSpecific: TrackedChange | undefined\n  for (const [targetId, target] of values) {\n    if (!('path' in target) || !targetId.startsWith(targetType)) {\n      continue\n    }\n\n    const numEqual = PathUtils.numEqualSegments(path, target.path)\n    const lastPathSegment = target.path[target.path.length - 1]\n    const pathOnlyDiffersByKey =\n      numEqual === target.path.length - 1 && isKeyedObject(lastPathSegment)\n\n    if (numEqual === 0) {\n      continue\n    } else if (numEqual !== target.path.length && !pathOnlyDiffersByKey) {\n      /*\n       * We only allow matching to shorter paths if the last element in the path is a keyed object.\n       * `foo.bar.portableTextField[_key=abc123]` should resolve to `foo.bar.portableTextField`.\n       *\n       * Otherwise we'll only get a connector line when you add new elements to a portable text\n       * field and not when you alter an existing part.\n       */\n      continue\n    }\n\n    mostSpecific = target\n\n    if (numEqual === path.length) {\n      // On exact match, return early\n      break\n    }\n  }\n\n  // if (!mostSpecific) {\n  //   throw new Error(`target not found: \"${id}\"`)\n  // }\n\n  return mostSpecific\n}\n","import {Reported} from '../../components/react-track-elements'\nimport {TrackedArea, TrackedChange} from '../tracker'\n\nexport function isChangeBar(\n  v: Reported<TrackedArea | TrackedChange>\n): v is Reported<TrackedChange> {\n  return v[0] !== 'changePanel'\n}\n","export function hasOverflowScroll(el: HTMLElement): boolean {\n  const overflow = getComputedStyle(el).overflow\n\n  return overflow.includes('auto') || overflow.includes('scroll')\n}\n\n// Check whether an element is currently scrollable (meaning it must both have overflow scroll *and* content overflowing)\nexport function isScrollable(el: HTMLElement): boolean {\n  const scrollableContent = el.scrollHeight !== el.offsetHeight || el.scrollWidth !== el.offsetWidth\n\n  return scrollableContent && hasOverflowScroll(el)\n}\n","import {Rect} from '../overlay/types'\nimport {isScrollable} from './scrollUtils'\n\nconst SCROLL_INTO_VIEW_TOP_PADDING = -15\n\nexport function scrollIntoView(field: {element: HTMLElement; rect: Rect; bounds: Rect}): void {\n  const element = field.element\n\n  /*\n   * Start at current element and check the parent for a scroll\n   * bar until a scrollable element has been found.\n   */\n  let parentElementWithScroll: HTMLElement | null = element\n\n  while (!isScrollable(parentElementWithScroll)) {\n    parentElementWithScroll = parentElementWithScroll.parentElement\n\n    /*\n     * If the parent element is null it means we are at the root\n     * element, which has no parent. Since no scroll bar has\n     * been found so far it does not make sense to scroll.\n     */\n    if (!parentElementWithScroll) {\n      return\n    }\n  }\n\n  parentElementWithScroll.scroll({\n    top:\n      parentElementWithScroll.scrollTop +\n      field.rect.top -\n      field.bounds.top +\n      SCROLL_INTO_VIEW_TOP_PADDING,\n    left: 0,\n    behavior: 'smooth',\n  })\n}\n","import {Rect} from '../overlay/types'\nimport {hasOverflowScroll} from './scrollUtils'\n\nexport const getOffsetsTo = (\n  source: HTMLElement,\n  target: HTMLElement\n): {rect: Rect; bounds: Rect} => {\n  const bounds: Rect = {\n    top: 0,\n    left: 0,\n    height: target.offsetHeight,\n    width: target.offsetWidth,\n  }\n\n  const rect: Rect = {\n    top: 0,\n    left: 0,\n    height: source.offsetHeight,\n    width: source.offsetWidth,\n  }\n\n  let foundScrollContainer = false\n  let el: HTMLElement | null = source\n\n  while (el && el !== target && target.contains(el)) {\n    if (foundScrollContainer) {\n      bounds.top += el.offsetTop\n      bounds.left += el.offsetLeft\n    }\n\n    if (hasOverflowScroll(el)) {\n      bounds.top = el.offsetTop\n      bounds.height = el.offsetHeight\n      bounds.left = el.offsetLeft\n      bounds.width = el.offsetWidth\n\n      foundScrollContainer = true\n    }\n\n    rect.top += el.offsetTop - el.scrollTop\n    rect.left += el.offsetLeft - el.scrollLeft\n\n    el = el.offsetParent as HTMLElement\n  }\n\n  return {rect, bounds}\n}\n","import {\n  ARROW_MARGIN_X,\n  ARROW_MARGIN_Y,\n  ARROW_SIZE,\n  ARROW_THRESHOLD,\n  CORNER_RADIUS,\n} from '../constants'\nimport {ConnectorLine} from './types'\n\nexport function arrowPath(x: number, y: number, dir: number): string {\n  return [\n    `M ${x - ARROW_SIZE} ${y - ARROW_SIZE * dir} `,\n    `L ${x} ${y}`,\n    `L ${x + ARROW_SIZE} ${y - ARROW_SIZE * dir}`,\n  ].join('')\n}\n\nfunction moveTo(x: number, y: number) {\n  return `M${x} ${y}`\n}\n\nfunction lineTo(x: number, y: number) {\n  return `L${x} ${y}`\n}\n\nfunction join(strings: string[], delim = '') {\n  return strings.join(delim)\n}\n\nfunction quadCurve(x1: number, y1: number, x: number, y: number) {\n  return `Q${x1} ${y1} ${x} ${y}`\n}\n\nexport function generateConnectorPath(line: ConnectorLine): string {\n  const {from, to} = line\n  const {left: fromX, top: fromY} = from\n  const {left: toX, top: toY} = to\n\n  const cmds: string[] = []\n\n  // Calculate maximum corner radius\n  const r1 = Math.min(CORNER_RADIUS, Math.abs(fromY - toY) / 2)\n\n  // FROM\n  if (from.isAbove) {\n    cmds.push(\n      moveTo(fromX + ARROW_MARGIN_X, fromY - ARROW_THRESHOLD + ARROW_MARGIN_Y),\n      lineTo(fromX + ARROW_MARGIN_X, fromY - CORNER_RADIUS),\n      quadCurve(fromX + ARROW_MARGIN_X, fromY, fromX + ARROW_MARGIN_X + CORNER_RADIUS, fromY)\n    )\n  } else if (from.isBelow) {\n    cmds.push(\n      moveTo(fromX + ARROW_MARGIN_X, fromY + ARROW_THRESHOLD - ARROW_MARGIN_Y),\n      lineTo(fromX + ARROW_MARGIN_X, fromY + CORNER_RADIUS),\n      quadCurve(fromX + ARROW_MARGIN_X, fromY, fromX + ARROW_MARGIN_X + CORNER_RADIUS, fromY)\n    )\n  } else {\n    cmds.push(moveTo(fromX, fromY))\n  }\n\n  // TO\n  if (to.isAbove) {\n    if (fromY < to.bounds.top) {\n      cmds.push(\n        lineTo(to.bounds.left - 8 - r1, fromY),\n        quadCurve(to.bounds.left - 8, fromY, to.bounds.left - 8, fromY + r1),\n        lineTo(to.bounds.left - 8, toY - r1),\n        quadCurve(to.bounds.left - 8, toY, to.bounds.left - 8 + r1, toY),\n        lineTo(to.bounds.left + ARROW_MARGIN_X - CORNER_RADIUS, toY),\n        quadCurve(\n          to.bounds.left + ARROW_MARGIN_X,\n          toY,\n          to.bounds.left + ARROW_MARGIN_X,\n          toY - CORNER_RADIUS\n        ),\n        lineTo(to.bounds.left + ARROW_MARGIN_X, toY - ARROW_THRESHOLD + ARROW_MARGIN_Y)\n      )\n    } else {\n      cmds.push(\n        lineTo(to.bounds.left + ARROW_MARGIN_X - CORNER_RADIUS, fromY),\n        quadCurve(\n          to.bounds.left + ARROW_MARGIN_X,\n          fromY,\n          to.bounds.left + ARROW_MARGIN_X,\n          fromY - CORNER_RADIUS\n        ),\n        lineTo(to.bounds.left + ARROW_MARGIN_X, toY - ARROW_THRESHOLD + ARROW_MARGIN_Y)\n      )\n    }\n  } else if (to.isBelow) {\n    if (fromY > to.bounds.top + to.bounds.height) {\n      // curl around\n      cmds.push(\n        lineTo(to.bounds.left - ARROW_MARGIN_X - r1, fromY),\n        quadCurve(\n          to.bounds.left - ARROW_MARGIN_X,\n          fromY,\n          to.bounds.left - ARROW_MARGIN_X,\n          fromY - r1\n        ),\n        lineTo(to.bounds.left - ARROW_MARGIN_X, toY + r1),\n        quadCurve(to.bounds.left - ARROW_MARGIN_X, toY, to.bounds.left - ARROW_MARGIN_X + r1, toY),\n        lineTo(to.bounds.left + ARROW_MARGIN_X - CORNER_RADIUS, toY),\n        quadCurve(\n          to.bounds.left + ARROW_MARGIN_X,\n          toY,\n          to.bounds.left + ARROW_MARGIN_X,\n          toY + CORNER_RADIUS\n        ),\n        lineTo(to.bounds.left + ARROW_MARGIN_X, toY + ARROW_THRESHOLD - ARROW_MARGIN_Y)\n      )\n    } else {\n      cmds.push(\n        lineTo(to.bounds.left + ARROW_MARGIN_X - CORNER_RADIUS, fromY),\n        quadCurve(\n          to.bounds.left + ARROW_MARGIN_X,\n          fromY,\n          to.bounds.left + ARROW_MARGIN_X,\n          fromY + CORNER_RADIUS\n        ),\n        lineTo(to.bounds.left + ARROW_MARGIN_X, toY + ARROW_THRESHOLD - ARROW_MARGIN_Y)\n      )\n    }\n  } else if (fromY < toY) {\n    cmds.push(\n      lineTo(to.bounds.left + ARROW_MARGIN_X - r1, fromY),\n      quadCurve(\n        to.bounds.left + ARROW_MARGIN_X,\n        fromY,\n        to.bounds.left + ARROW_MARGIN_X,\n        fromY + r1\n      ),\n      lineTo(to.bounds.left + ARROW_MARGIN_X, toY - r1),\n      quadCurve(to.bounds.left + ARROW_MARGIN_X, toY, to.bounds.left + ARROW_MARGIN_X + r1, toY),\n      lineTo(toX, toY)\n    )\n  } else {\n    cmds.push(\n      lineTo(to.bounds.left + ARROW_MARGIN_X - r1, fromY),\n      quadCurve(\n        to.bounds.left + ARROW_MARGIN_X,\n        fromY,\n        to.bounds.left + ARROW_MARGIN_X,\n        fromY - r1\n      ),\n      lineTo(to.bounds.left + ARROW_MARGIN_X, toY + r1),\n      quadCurve(to.bounds.left + ARROW_MARGIN_X, toY, to.bounds.left + ARROW_MARGIN_X + r1, toY),\n      lineTo(toX, toY)\n    )\n  }\n\n  return join(cmds)\n}\n","import {ARROW_MARGIN_Y, ARROW_THRESHOLD, CONNECTOR_MARGIN} from '../constants'\nimport {ConnectorLinePoint, Rect} from './types'\n\nfunction getConnectorLinePoint(rect: Rect, bounds: Rect): ConnectorLinePoint {\n  const centerY = rect.top + rect.height / 2\n  const isAbove = rect.top + rect.height < bounds.top + ARROW_MARGIN_Y\n  const isBelow = rect.top > bounds.top + bounds.height - ARROW_MARGIN_Y\n\n  return {\n    bounds: bounds,\n    left: rect.left,\n    top: centerY,\n    centerY,\n    startY: rect.top + CONNECTOR_MARGIN,\n    endY: rect.top + rect.height - CONNECTOR_MARGIN,\n    isAbove,\n    isBelow,\n    outOfBounds: isAbove || isBelow,\n  }\n}\n\ninterface Connector {\n  from: {rect: Rect; bounds: Rect}\n  to: {rect: Rect; bounds: Rect}\n}\n\nexport function mapConnectorToLine(connector: Connector): {\n  from: ConnectorLinePoint\n  to: ConnectorLinePoint\n} {\n  const fromBounds = {\n    top: connector.from.bounds.top + ARROW_THRESHOLD,\n    bottom: connector.from.bounds.top + connector.from.bounds.height - ARROW_THRESHOLD,\n    left: connector.from.bounds.left,\n    right: connector.from.bounds.left + connector.from.bounds.width,\n    width: connector.from.bounds.width,\n    height: connector.from.bounds.height - ARROW_THRESHOLD * 2,\n  }\n\n  const from = getConnectorLinePoint(connector.from.rect, fromBounds)\n  from.left = connector.from.rect.left + connector.from.rect.width + 1\n\n  const toBounds = {\n    top: connector.to.bounds.top + ARROW_THRESHOLD,\n    bottom: connector.to.bounds.top + connector.to.bounds.height - ARROW_THRESHOLD,\n    left: connector.to.bounds.left,\n    right: connector.to.bounds.left + connector.to.bounds.width,\n    width: connector.to.bounds.width,\n    height: connector.to.bounds.height - ARROW_THRESHOLD * 2,\n  }\n\n  const to = getConnectorLinePoint(connector.to.rect, toBounds)\n\n  const maxStartY = Math.max(to.startY, from.startY)\n\n  // Align from <-> to vertically\n  from.top = Math.min(maxStartY, from.endY)\n  if (from.top < toBounds.top) {\n    from.top = Math.min(toBounds.top, from.endY)\n  } else if (from.top > toBounds.bottom) {\n    from.top = Math.max(toBounds.bottom, from.startY)\n  }\n  to.top = Math.min(maxStartY, to.endY)\n  if (to.top < fromBounds.top) {\n    to.top = Math.min(fromBounds.top, to.endY)\n  } else if (to.top > fromBounds.bottom) {\n    to.top = Math.max(fromBounds.bottom, to.startY)\n  }\n\n  // Keep within bounds\n  from.top = Math.min(Math.max(from.top, fromBounds.top), fromBounds.bottom)\n  to.top = Math.min(Math.max(to.top, toBounds.top), toBounds.bottom)\n\n  return {from, to}\n}\n","import React from 'react'\nimport {Rect} from './types'\n\nexport function ClampedRect(\n  props: {top: number; left: number; height: number; width: number; bounds: Rect} & Omit<\n    React.ComponentProps<'rect'>,\n    'top' | 'left' | 'height' | 'width'\n  >\n) {\n  const {bounds, ...rest} = props\n  const x = Math.max(bounds.left, props.left)\n  const y = Math.max(props.top, bounds.top)\n  const height = Math.max(0, props.height - (y - props.top))\n  const width = Math.max(0, props.width - (x - props.left))\n\n  return <rect {...rest} x={x} y={y} height={height} width={width} />\n}\n","import {Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {ClampedRect} from './ClampedRect'\n\ninterface PathProps {\n  theme: Theme\n}\n\nexport const DebugRect = styled.rect`\n  stroke: #ccc;\n  fill: none;\n  pointer-events: none;\n  stroke-linecap: round;\n`\n\nexport const ConnectorPath = styled.path(({theme}: PathProps) => {\n  /* these colours aren't freely available on the current theme */\n  const strokeColor = theme.sanity.color.spot.yellow\n\n  return css`\n    fill: none;\n    pointer-events: none;\n    stroke-linecap: round;\n    stroke-linejoin: round;\n    stroke: ${strokeColor};\n  `\n})\n\nexport const InteractivePath = styled.path(({theme}: PathProps) => {\n  /* these colours aren't freely available on the current theme */\n  const strokeColor = theme.sanity.color.spot.yellow\n\n  return css`\n    fill: none;\n    pointer-events: stroke;\n    stroke: ${strokeColor};\n    cursor: pointer;\n    stroke-linecap: round;\n    stroke-linejoin: round;\n    opacity: 0;\n\n    &:hover {\n      opacity: 0.2;\n    }\n  `\n})\n\nexport const RightBarWrapper = styled(ClampedRect)(({theme}: PathProps) => {\n  /* these colours aren't freely available on the current theme */\n  const strokeColor = theme.sanity.color.spot.yellow\n\n  return css`\n    stroke: none;\n    pointer-events: none;\n    fill: ${strokeColor};\n  `\n})\n","import React, {memo} from 'react'\nimport {\n  ARROW_MARGIN_X,\n  ARROW_MARGIN_Y,\n  ARROW_THRESHOLD,\n  DEBUG,\n  INTERACTIVE_STROKE_WIDTH,\n  STROKE_WIDTH,\n} from '../constants'\nimport {arrowPath, generateConnectorPath} from './connectorPath'\nimport {mapConnectorToLine} from './mapConnectorToLine'\nimport {Rect} from './types'\nimport {DebugRect, ConnectorPath, InteractivePath, RightBarWrapper} from './Connector.styled'\n\ninterface Props {\n  from: {rect: Rect; bounds: Rect}\n  to: {rect: Rect; bounds: Rect}\n}\n\nexport const Connector = memo(function Connector({from, to}: Props) {\n  const line = mapConnectorToLine({from, to})\n\n  // If both ends of the connector are out of bounds, then do not render\n  if (line.from.outOfBounds && line.to.outOfBounds) {\n    return null\n  }\n\n  const linePathDescription = generateConnectorPath(line)\n\n  return (\n    <>\n      <InteractivePath d={linePathDescription} strokeWidth={INTERACTIVE_STROKE_WIDTH} />\n\n      <ConnectorPath d={linePathDescription} strokeWidth={STROKE_WIDTH} />\n      <RightBarWrapper\n        top={to.rect.top}\n        left={to.rect.left}\n        height={to.rect.height}\n        width={STROKE_WIDTH}\n        bounds={to.bounds}\n      />\n\n      {line.from.isAbove && (\n        <ConnectorPath\n          d={arrowPath(\n            line.from.left + ARROW_MARGIN_X,\n            line.from.bounds.top - ARROW_THRESHOLD + ARROW_MARGIN_Y,\n            -1\n          )}\n          strokeWidth={STROKE_WIDTH}\n        />\n      )}\n\n      {line.from.isBelow && (\n        <ConnectorPath\n          d={arrowPath(\n            line.from.left + ARROW_MARGIN_X,\n            line.from.bounds.top + line.from.bounds.height + ARROW_THRESHOLD - ARROW_MARGIN_Y,\n            1\n          )}\n          strokeWidth={STROKE_WIDTH}\n        />\n      )}\n\n      {line.to.isAbove && (\n        <ConnectorPath\n          d={arrowPath(\n            line.to.bounds.left + ARROW_MARGIN_X,\n            line.to.bounds.top - ARROW_THRESHOLD + ARROW_MARGIN_Y,\n            -1\n          )}\n          strokeWidth={STROKE_WIDTH}\n        />\n      )}\n\n      {line.to.isBelow && (\n        <ConnectorPath\n          d={arrowPath(\n            line.to.bounds.left + ARROW_MARGIN_X,\n            line.to.bounds.top + line.to.bounds.height + ARROW_THRESHOLD - ARROW_MARGIN_Y,\n            1\n          )}\n          strokeWidth={STROKE_WIDTH}\n        />\n      )}\n\n      {DEBUG && (\n        <>\n          <DebugRect\n            x={line.from.bounds.left}\n            y={line.from.bounds.top}\n            width={line.from.bounds.width}\n            height={line.from.bounds.height}\n            stroke=\"green\"\n          />\n\n          <DebugRect\n            x={line.to.bounds.left}\n            y={line.to.bounds.top}\n            width={line.to.bounds.width}\n            height={line.to.bounds.height}\n            stroke=\"yellow\"\n          />\n\n          {!line.from.outOfBounds && (\n            <g transform={`translate(${line.from.bounds.left} ${line.from.bounds.top})`}>\n              <DebugRect\n                width={line.from.bounds.width}\n                height={line.from.bounds.height}\n                strokeWidth={STROKE_WIDTH}\n                stroke=\"green\"\n              />\n            </g>\n          )}\n\n          {!line.to.outOfBounds && (\n            <g transform={`translate(${line.to.bounds.left} ${line.to.bounds.top})`}>\n              <DebugRect\n                width={line.to.bounds.width}\n                height={line.to.bounds.height}\n                strokeWidth={STROKE_WIDTH}\n                stroke=\"red\"\n              />\n            </g>\n          )}\n        </>\n      )}\n    </>\n  )\n})\n","import {useEffect} from 'react'\nimport {resizeObserver} from '../../util'\n\nexport function useResizeObserver(\n  element: HTMLDivElement,\n  onResize: (event: ResizeObserverEntry) => void\n): void {\n  useEffect(() => resizeObserver.observe(element, onResize), [element, onResize])\n}\n","import styled from 'styled-components'\n\nexport const SvgWrapper = styled.svg`\n  pointer-events: none;\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n`\n","import React, {useCallback, useMemo, useState} from 'react'\nimport {sortBy} from 'lodash'\nimport {Path} from '@sanity/types'\nimport {ScrollMonitor} from '../../components/scroll'\nimport {findMostSpecificTarget} from '../helpers/findMostSpecificTarget'\nimport {isChangeBar} from '../helpers/isChangeBar'\nimport {scrollIntoView} from '../helpers/scrollIntoView'\nimport {DEBUG_LAYER_BOUNDS} from '../constants'\nimport {getOffsetsTo} from '../helpers/getOffsetsTo'\nimport {TrackedArea, TrackedChange, useReportedValues} from '../tracker'\nimport {Reported} from '../../components/react-track-elements'\nimport {isNonNullable} from '../../util'\nimport {Connector} from './Connector'\nimport {DebugLayers} from './DebugLayers'\nimport {useResizeObserver} from './useResizeObserver'\nimport {SvgWrapper} from './ConnectorsOverlay.styled'\n\nexport interface Rect {\n  height: number\n  width: number\n  top: number\n  left: number\n}\n\ninterface State {\n  connectors: {\n    field: TrackedChange & {id: string; rect: Rect; bounds: Rect}\n    change: TrackedChange & {id: string; rect: Rect; bounds: Rect}\n    hasFocus: boolean\n    hasHover: boolean\n    hasRevertHover: boolean\n  }[]\n  isHoverConnector: boolean\n}\n\ninterface ConnectorsOverlayProps {\n  rootElement: HTMLDivElement\n  onSetFocus: (nextFocusPath: Path) => void\n}\n\nfunction getState(\n  allReportedValues: Reported<TrackedChange | TrackedArea>[],\n  hovered: string | null,\n  byId: Map<string, TrackedChange | TrackedArea>,\n  rootElement: HTMLElement\n): State {\n  const changeBarsWithHover: Reported<TrackedChange>[] = []\n  const changeBarsWithFocus: Reported<TrackedChange>[] = []\n\n  for (const value of allReportedValues) {\n    if (!isChangeBar(value) || !value[1].isChanged) {\n      continue\n    }\n\n    const [id, reportedChangeBar] = value\n\n    if (id === hovered) {\n      changeBarsWithHover.push(value)\n      continue\n    }\n\n    if (reportedChangeBar.hasHover) {\n      changeBarsWithHover.push(value)\n      continue\n    }\n\n    if (reportedChangeBar.hasFocus) {\n      changeBarsWithFocus.push(value)\n      continue\n    }\n  }\n\n  const isHoverConnector = changeBarsWithHover.length > 0\n\n  const changeBars = isHoverConnector ? changeBarsWithHover : changeBarsWithFocus\n\n  const connectors = changeBars\n    .map(([id]) => {\n      const field = findMostSpecificTarget('field', id, byId)\n      const change = findMostSpecificTarget('change', id, byId)\n\n      if (!field || !change) return null\n\n      return {field: {id, ...field}, change: {id, ...change}}\n    })\n    .filter(isNonNullable)\n    // .filter(({field, change}) => field && change && field.element && change.element)\n    .map(({field, change}) => ({\n      hasHover: field.hasHover || change.hasHover,\n      hasFocus: field.hasFocus,\n      hasRevertHover: change.hasRevertHover,\n      field: {...field, ...getOffsetsTo(field.element, rootElement)},\n      change: {...change, ...getOffsetsTo(change.element, rootElement)},\n    }))\n\n  return {connectors, isHoverConnector}\n}\n\nexport function ConnectorsOverlay(props: ConnectorsOverlayProps) {\n  const {rootElement, onSetFocus} = props\n  const [hovered, setHovered] = React.useState<string | null>(null)\n  const allReportedValues = useReportedValues()\n  const byId: Map<string, TrackedChange | TrackedArea> = useMemo(\n    () => new Map(allReportedValues),\n    [allReportedValues]\n  )\n\n  const [{connectors}, setState] = useState<State>(() =>\n    getState(allReportedValues, hovered, byId, rootElement)\n  )\n\n  const visibleConnectors = useMemo(\n    () => sortBy(connectors, (c) => 0 - c.field.path.length).slice(0, 1),\n    [connectors]\n  )\n\n  const handleScrollOrResize = useCallback(() => {\n    setState(getState(allReportedValues, hovered, byId, rootElement))\n  }, [byId, allReportedValues, hovered, rootElement])\n\n  useResizeObserver(rootElement, handleScrollOrResize)\n\n  return (\n    <ScrollMonitor onScroll={handleScrollOrResize}>\n      <SvgWrapper style={{zIndex: visibleConnectors[0] && visibleConnectors[0].field.zIndex}}>\n        {visibleConnectors.map(({field, change}) => {\n          if (!change) {\n            return null\n          }\n\n          return (\n            <ConnectorGroup\n              field={field}\n              change={change}\n              key={field.id}\n              onSetFocus={onSetFocus}\n              setHovered={setHovered}\n            />\n          )\n        })}\n      </SvgWrapper>\n    </ScrollMonitor>\n  )\n}\n\ninterface ConnectorGroupProps {\n  field: TrackedChange & {id: string; rect: Rect; bounds: Rect}\n  change: TrackedChange & {id: string; rect: Rect; bounds: Rect}\n  setHovered: (id: string | null) => void\n  onSetFocus: (path: Path) => void\n}\n\nfunction ConnectorGroup(props: ConnectorGroupProps) {\n  const {change, field, onSetFocus, setHovered} = props\n\n  const onConnectorClick = useCallback(() => {\n    scrollIntoView(field)\n    scrollIntoView(change)\n    onSetFocus(field.path)\n  }, [field, change, onSetFocus])\n\n  const handleMouseEnter = useCallback(() => setHovered(field.id), [field, setHovered])\n  const handleMouseLeave = useCallback(() => setHovered(null), [setHovered])\n\n  const from = useMemo(\n    () => ({\n      rect: {\n        left: field.rect.left + 2,\n        top: field.rect.top,\n        height: field.rect.height,\n        width: field.rect.width,\n      },\n      bounds: field.bounds,\n    }),\n    [field.bounds, field.rect]\n  )\n\n  const to = useMemo(\n    () => ({rect: change.rect, bounds: change.bounds}),\n    [change.bounds, change.rect]\n  )\n\n  return (\n    <>\n      <g onClick={onConnectorClick} onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave}>\n        <Connector from={from} to={to} />\n      </g>\n\n      {DEBUG_LAYER_BOUNDS && <DebugLayers field={field} change={change} />}\n    </>\n  )\n}\n","import React, {useMemo} from 'react'\nimport {Path} from '@sanity/types'\nimport {ScrollContainer} from '../../components/scroll'\nimport {ConnectorContext} from '../ConnectorContext'\nimport {ENABLED} from '../constants'\nimport {Tracker} from '../tracker'\nimport {ConnectorsOverlay} from './ConnectorsOverlay'\n\n/** @internal */\nexport interface EnabledChangeConnectorRootProps {\n  children: React.ReactNode\n  className?: string\n  isReviewChangesOpen: boolean\n  onOpenReviewChanges: () => void\n  onSetFocus: (path: Path) => void\n}\n\n/** @internal */\nexport function EnabledChangeConnectorRoot({\n  children,\n  className,\n  isReviewChangesOpen,\n  onOpenReviewChanges,\n  onSetFocus,\n  ...restProps\n}: EnabledChangeConnectorRootProps) {\n  const [rootElement, setRootElement] = React.useState<HTMLDivElement | null>()\n\n  const contextValue = useMemo(\n    () => ({\n      isReviewChangesOpen,\n      onOpenReviewChanges,\n      onSetFocus,\n    }),\n    [isReviewChangesOpen, onOpenReviewChanges, onSetFocus]\n  )\n\n  return (\n    <ConnectorContext.Provider value={contextValue}>\n      <Tracker>\n        <ScrollContainer {...restProps} ref={setRootElement} className={className}>\n          {children}\n          {rootElement && <ConnectorsOverlay rootElement={rootElement} onSetFocus={onSetFocus} />}\n        </ScrollContainer>\n      </Tracker>\n    </ConnectorContext.Provider>\n  )\n}\n\n/** @internal */\nexport interface DisabledChangeConnectorRootProps {\n  className?: string\n  children: React.ReactNode\n}\n\n/** @internal */\nexport function DisabledChangeConnectorRoot({\n  children,\n  className,\n}: DisabledChangeConnectorRootProps) {\n  return <ScrollContainer className={className}>{children}</ScrollContainer>\n}\n\n/** @internal */\nexport const ChangeConnectorRoot = ENABLED\n  ? EnabledChangeConnectorRoot\n  : DisabledChangeConnectorRoot\n","import React from 'react'\n\nconst NoJsStyles = `\n.sanity-app-no-js__root {\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  background: #fff;\n}\n\n.sanity-app-no-js__content {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n  font-family: helvetica, arial, sans-serif;\n}\n`\n\n/** @internal */\nexport function NoJavascript() {\n  return (\n    <noscript>\n      <div className=\"sanity-app-no-js__root\">\n        <div className=\"sanity-app-no-js__content\">\n          <style type=\"text/css\">{NoJsStyles}</style>\n          <h1>JavaScript disabled</h1>\n          <p>\n            Please <a href=\"https://www.enable-javascript.com/\">enable JavaScript</a> in your\n            browser and reload the page to proceed.\n          </p>\n        </div>\n      </div>\n    </noscript>\n  )\n}\n","import React from 'react'\n\nconst errorHandlerScript = `\n;(function () {\n  var _caughtErrors = []\n\n  var errorChannel = (function () {\n    var subscribers = []\n\n    function publish(msg) {\n      for (var i = 0; i < subscribers.length; i += 1) {\n        subscribers[i](msg)\n      }\n    }\n\n    function subscribe(subscriber) {\n      subscribers.push(subscriber)\n\n      return function () {\n        var idx = subscribers.indexOf(subscriber)\n\n        if (idx > -1) {\n          subscribers.splice(idx, 1)\n        }\n      }\n    }\n\n    return {publish, subscribe, subscribers}\n  })()\n\n  // NOTE: Store the error channel instance in the global scope so that the Studio application can\n  // access it and subscribe to errors.\n  window.__sanityErrorChannel = {\n    subscribe: errorChannel.subscribe,\n  }\n\n  function _nextTick(callback) {\n    setTimeout(callback, 0)\n  }\n\n  function _handleError(error, params) {\n    _nextTick(function () {\n      // - If there are error channel subscribers, then we notify them (no console error).\n      // - If there are no subscribers, then we log the error to the console and render the error overlay.\n      if (errorChannel.subscribers.length) {\n        errorChannel.publish({error, params})\n      } else {\n        console.error(error)\n\n        _renderErrorOverlay(error, params)\n      }\n    })\n  }\n\n  var ERROR_BOX_STYLE = [\n    'background: #fff',\n    'border-radius: 6px',\n    'box-sizing: border-box',\n    'color: #121923',\n    'flex: 1',\n    \"font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue','Liberation Sans',Helvetica,Arial,system-ui,sans-serif\",\n    'font-size: 16px',\n    'line-height: 21px',\n    'margin: 0 auto',\n    'max-width: 960px',\n    'overflow: auto',\n    'padding: 20px',\n    'width: 100%',\n  ].join(';')\n\n  var ERROR_CODE_STYLE = [\n    'color: #972E2A',\n    \"font-family: -apple-system-ui-monospace, 'SF Mono', Menlo, Monaco, Consolas, monospace\",\n    'font-size: 13px',\n    'line-height: 17px',\n    'margin: 0',\n  ].join(';')\n\n  function _renderErrorOverlay(error, params) {\n    var errorElement = document.querySelector('#__sanityError') || document.createElement('div')\n    var colno = params.event.colno\n    var lineno = params.event.lineno\n    var filename = params.event.filename\n\n    errorElement.id = '__sanityError'\n    errorElement.innerHTML = [\n      '<div style=\"' + ERROR_BOX_STYLE + '\">',\n      '<div style=\"font-weight: 700;\">Uncaught error: ' + error.message + '</div>',\n      '<div style=\"color: #515E72; font-size: 13px; line-height: 17px; margin: 10px 0;\">' +\n        filename +\n        ':' +\n        lineno +\n        ':' +\n        colno +\n        '</div>',\n      '<pre style=\"' + ERROR_CODE_STYLE + '\">' + error.stack + '</pre>',\n      '</div>',\n    ].join('')\n\n    errorElement.style.position = 'fixed'\n    errorElement.style.zIndex = 1000000\n    errorElement.style.top = 0\n    errorElement.style.left = 0\n    errorElement.style.right = 0\n    errorElement.style.bottom = 0\n    errorElement.style.padding = '20px'\n    errorElement.style.background = 'rgba(16,17,18,0.66)'\n    errorElement.style.display = 'flex'\n    errorElement.style.alignItems = 'center'\n    errorElement.style.justifyContent = 'center'\n\n    document.body.appendChild(errorElement)\n  }\n\n  // NOTE:\n  // Yes – we're attaching 2 error listeners below 👀\n  // This is because React makes the same error throw twice (in development mode).\n  // See: https://github.com/facebook/react/issues/10384\n\n  // Error listener #1\n  window.onerror = function (event, source, lineno, colno, error) {\n    _nextTick(function () {\n      if (_caughtErrors.indexOf(error) !== -1) return\n\n      _caughtErrors.push(error)\n\n      _handleError(error, {\n        event,\n        lineno,\n        colno,\n        source,\n      })\n\n      _nextTick(function () {\n        var idx = _caughtErrors.indexOf(error)\n\n        if (idx > -1) _caughtErrors.splice(idx, 1)\n      })\n    })\n\n    // IMPORTANT: this callback must return \\`true\\` to prevent the error from being rendered in\n    // the browser’s console.\n    return true\n  }\n\n  // Error listener #2\n  window.addEventListener('error', function (event) {\n    if (_caughtErrors.indexOf(event.error) !== -1) return true\n\n    _caughtErrors.push(event.error)\n\n    _handleError(event.error, {\n      event,\n      lineno: event.lineno,\n      colno: event.colno,\n    })\n\n    _nextTick(function () {\n      _nextTick(function () {\n        var idx = _caughtErrors.indexOf(event.error)\n\n        if (idx > -1) _caughtErrors.splice(idx, 1)\n      })\n    })\n\n    return true\n  })\n})()\n`\n\n/** @internal */\nexport function GlobalErrorHandler() {\n  // eslint-disable-next-line react/no-danger\n  return <script dangerouslySetInnerHTML={{__html: errorHandlerScript}} />\n}\n","import React from 'react'\n\nexport interface FaviconProps {\n  basePath: string\n}\n\nexport function Favicons({basePath}: FaviconProps) {\n  const base = `${basePath.replace(/\\/+$/, '')}/static`\n  return (\n    <>\n      <link rel=\"icon\" href={`${base}/favicon.ico`} sizes=\"any\" />\n      <link rel=\"icon\" href={`${base}/favicon.svg`} type=\"image/svg+xml\" />\n      <link rel=\"apple-touch-icon\" href={`${base}/apple-touch-icon.png`} />\n      <link rel=\"manifest\" href={`${base}/manifest.webmanifest`} />\n    </>\n  )\n}\n","import React from 'react'\nimport {NoJavascript} from './NoJavascript'\nimport {GlobalErrorHandler} from './globalErrorHandler'\nimport {Favicons} from './Favicons'\n\nconst globalStyles = `\n  html {\n    background-color: #f1f3f6;\n  }\n  html,\n  body,\n  #sanity {\n    height: 100%;\n  }\n  body {\n    margin: 0;\n    -webkit-font-smoothing: antialiased;\n  }\n`\n\n/** @beta */\nexport interface DefaultDocumentProps {\n  entryPath: string\n  css?: string[]\n  basePath?: string\n}\n\nconst EMPTY_ARRAY: never[] = []\n\n/** @beta */\nexport function DefaultDocument(props: DefaultDocumentProps): React.ReactElement {\n  const {entryPath, css = EMPTY_ARRAY, basePath = '/'} = props\n  return (\n    <html lang=\"en\">\n      <head>\n        <meta charSet=\"utf-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, viewport-fit=cover\" />\n        <meta name=\"robots\" content=\"noindex\" />\n        <meta name=\"referrer\" content=\"same-origin\" />\n\n        <Favicons basePath={basePath} />\n\n        <title>Sanity Studio</title>\n\n        <GlobalErrorHandler />\n\n        {css.map((href) => (\n          <link key={href} rel=\"stylesheet\" href={href} />\n        ))}\n        <style>{globalStyles}</style>\n      </head>\n      <body>\n        <div id=\"sanity\" />\n        <script type=\"module\" src={entryPath} />\n        <NoJavascript />\n      </body>\n    </html>\n  )\n}\n","import {AccessDeniedIcon} from '@sanity/icons'\nimport {CurrentUser} from '@sanity/types'\nimport {Text, Inline, Box} from '@sanity/ui'\nimport React from 'react'\n\n/** @internal */\nexport interface InsufficientPermissionsMessageProps {\n  title?: string\n  operationLabel?: string\n  currentUser?: CurrentUser | null\n}\n\n/** @internal */\nexport function InsufficientPermissionsMessage(props: InsufficientPermissionsMessageProps) {\n  const {\n    currentUser,\n    title = 'Insufficient permissions',\n    operationLabel = 'access this feature',\n  } = props\n\n  const roles = currentUser?.roles || []\n  const plural = roles.length !== 1\n\n  return (\n    <Box padding={2}>\n      <Inline space={2}>\n        <Text size={1}>\n          <AccessDeniedIcon />\n        </Text>\n        <Text weight=\"semibold\">{title}</Text>\n      </Inline>\n      <Inline marginTop={4}>\n        <Text size={1}>\n          {roles.length === 0 ? (\n            <>You have no role that grants you permission to {operationLabel}</>\n          ) : (\n            <>\n              Your role{plural && 's'}{' '}\n              {join(\n                roles.map((r) => <code key={r.name}>{r.title}</code>),\n                <>, </>\n              )}{' '}\n              do{plural || 'es'} not have permissions to {operationLabel}\n            </>\n          )}\n        </Text>\n      </Inline>\n    </Box>\n  )\n}\n\nfunction join(array: React.ReactElement[], sep: React.ReactElement) {\n  return array.reduce<React.ReactElement[] | null>(\n    (result, item) => (result === null ? [item] : [...result, sep, item]),\n    null\n  )\n}\n","import {Button, ButtonProps} from '@sanity/ui'\nimport React, {HTMLProps} from 'react'\nimport {IntentLink, IntentLinkProps} from 'sanity/router'\n\n/**\n * @beta\n */\nexport function IntentButton(\n  props: IntentLinkProps & ButtonProps & Omit<HTMLProps<HTMLButtonElement>, 'as' | 'href' | 'ref'>\n) {\n  return props.disabled ? (\n    <Button {...props} as=\"a\" role=\"link\" aria-disabled=\"true\" />\n  ) : (\n    <Button {...props} as={IntentLink} />\n  )\n}\n","import {Card, CardProps} from '@sanity/ui'\nimport React, {createContext, forwardRef, useContext} from 'react'\nimport styled, {css} from 'styled-components'\n\n/** @internal */\nconst StyledCard = styled(Card)(() => {\n  return css`\n    /* this is a hack to avoid layout jumps while previews are loading\n    there's probably better ways of solving this */\n    min-height: 35px;\n\n    /* TextWithTone uses its own logic to set color, and we therefore need */\n    /* to override this logic in order to set the correct color in different states */\n    &[data-selected],\n    &[data-pressed],\n    &:active {\n      [data-ui='TextWithTone'] {\n        color: inherit;\n      }\n    }\n  `\n})\n\n/** @internal */\nexport interface PreviewCardContextValue {\n  selected?: boolean\n}\n\nconst PreviewCardContext = createContext<PreviewCardContextValue>({selected: false})\n\n/** @internal */\nexport function usePreviewCard(): PreviewCardContextValue {\n  const context = useContext(PreviewCardContext)\n\n  if (!context) {\n    throw new Error('PreviewCard: missing context value')\n  }\n\n  return context\n}\n\n/** @internal */\nexport const PreviewCard = forwardRef(function PreviewCard(\n  props: CardProps & Omit<React.HTMLProps<HTMLDivElement>, 'height'>,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {children, selected, as, ...restProps} = props\n\n  return (\n    <StyledCard data-ui=\"PreviewCard\" {...restProps} forwardedAs={as} ref={ref} selected={selected}>\n      <PreviewCardContext.Provider value={{selected}}>{children}</PreviewCardContext.Provider>\n    </StyledCard>\n  )\n})\n","import styled, {css} from 'styled-components'\nimport {ButtonTone, Text, Theme} from '@sanity/ui'\nimport React, {ComponentProps} from 'react'\n\n/** @internal */\nexport interface TextWithToneProps extends ComponentProps<typeof Text> {\n  tone: ButtonTone\n  dimmed?: boolean\n}\n\n/** @internal */\nconst TextWithToneStyle = styled(Text)(({$tone, theme}: {$tone: ButtonTone; theme: Theme}) => {\n  const tone = theme.sanity.color.muted[$tone]\n\n  return css`\n    &:not([data-muted]) {\n      --card-fg-color: ${tone ? tone.enabled.fg : undefined};\n    }\n\n    &[data-dimmed] {\n      opacity: 0.3;\n    }\n  `\n})\n\n/** @internal */\nexport const TextWithTone = React.forwardRef(function TextWithTone(\n  props: TextWithToneProps,\n  ref: React.Ref<HTMLDivElement>\n) {\n  const {tone, dimmed, muted, ...rest} = props\n\n  return (\n    <TextWithToneStyle\n      data-ui=\"TextWithTone\"\n      data-dimmed={dimmed ? '' : undefined}\n      data-muted={muted ? '' : undefined}\n      $tone={tone}\n      muted={muted}\n      ref={ref}\n      {...rest}\n    />\n  )\n})\n","interface MultiKeyWeakMapNode {\n  type: 'multi-key-weak-map-node'\n  value: unknown\n  next: WeakMap<object, MultiKeyWeakMapNode>\n}\n\nexport interface MultiKeyWeakMap {\n  get<T>(keys: object[]): T | undefined\n  get(keys: object[]): unknown\n\n  set(keys: object[], value: unknown): void\n}\n\nexport function createMultiKeyWeakMap(): MultiKeyWeakMap {\n  const rootMap = new WeakMap<object, MultiKeyWeakMapNode>()\n  const idCache = new WeakMap<object, string>()\n\n  function randomId() {\n    return Array.from({length: 10})\n      .map(() =>\n        Math.floor(Math.random() * 255)\n          .toString(16)\n          .padStart(2, '0')\n      )\n      .join('')\n  }\n\n  function assignId(key: object) {\n    const cachedId = idCache.get(key)\n    if (cachedId) return cachedId\n    const id = randomId()\n    idCache.set(key, id)\n    return id\n  }\n\n  function arrangeKeys(keys: object[]) {\n    return Array.from(new Set(keys))\n      .map((key) => [assignId(key), key] as const)\n      .sort(([a], [b]) => a.localeCompare(b, 'en'))\n      .map(([, key]) => key)\n  }\n\n  function getDeep(keys: object[], map: WeakMap<object, MultiKeyWeakMapNode>): unknown {\n    if (!keys.length) return undefined\n    const [firstKey, ...restOfKeys] = keys\n    const node = map.get(firstKey)\n\n    if (!node) return undefined\n    if (!restOfKeys.length) return node.value\n    return getDeep(restOfKeys, node.next)\n  }\n\n  function setDeep(\n    keys: object[],\n    map: WeakMap<object, MultiKeyWeakMapNode>,\n    value: unknown\n  ): void {\n    if (!keys.length) return\n\n    const [firstKey, ...restOfKeys] = keys\n    const node = map.get(firstKey) || {\n      type: 'multi-key-weak-map-node',\n      value: undefined,\n      next: new WeakMap(),\n    }\n    map.set(firstKey, node)\n\n    if (!restOfKeys.length) {\n      node.value = value\n      return\n    }\n\n    setDeep(restOfKeys, node.next, value)\n  }\n\n  function get<T>(keys: object[]): T | undefined\n  function get(keys: object[]) {\n    return getDeep(arrangeKeys(keys), rootMap)\n  }\n\n  function set(keys: object[], value: unknown) {\n    setDeep(arrangeKeys(keys), rootMap, value)\n  }\n\n  return {get, set}\n}\n","import React, {createContext, useContext, useMemo} from 'react'\nimport {createMultiKeyWeakMap, MultiKeyWeakMap} from './createMultiKeyWeakMap'\n\n/** @internal */\nexport interface ResourceCache {\n  get<T = unknown>(options: {namespace: string; dependencies: (object | null)[]}): T | undefined\n  set(options: {namespace: string; dependencies: (object | null)[]; value: unknown}): void\n}\n\nconst ResourceCacheContext = createContext<ResourceCache | null>(null)\n\n/** @internal */\nexport interface ResourceCacheProviderProps {\n  children: React.ReactNode\n}\n\n/** @internal */\nexport function ResourceCacheProvider({children}: ResourceCacheProviderProps) {\n  const resourceCache = useMemo((): ResourceCache => {\n    const namespaces = new Map<string, MultiKeyWeakMap>()\n\n    // this is used to replace the `null` values in any `dependencies` so that\n    // they can be used in the `MultiKeyWeakMap` which doesn't accept null\n    const nullReplacer = {}\n\n    return {\n      get: ({namespace, dependencies}) => {\n        const dependenciesWithoutNull = dependencies.map((dep) =>\n          dep === null ? nullReplacer : dep\n        )\n        const namespaceMap = namespaces.get(namespace)\n        return namespaceMap?.get(dependenciesWithoutNull)\n      },\n\n      set: ({namespace, dependencies, value}) => {\n        const namespaceMap = namespaces.get(namespace) || createMultiKeyWeakMap()\n        const dependenciesWithoutNull = dependencies.map((dep) =>\n          dep === null ? nullReplacer : dep\n        )\n        namespaces.set(namespace, namespaceMap)\n        namespaceMap.set(dependenciesWithoutNull, value)\n      },\n    }\n  }, [])\n\n  return (\n    <ResourceCacheContext.Provider value={resourceCache}>{children}</ResourceCacheContext.Provider>\n  )\n}\n\n/** @internal */\nexport function useResourceCache(): ResourceCache {\n  const cache = useContext(ResourceCacheContext)\n  if (!cache) throw new Error('Could not find `cache` context')\n  return cache\n}\n","/** @internal */\nexport interface CorsOriginErrorOptions {\n  projectId?: string\n}\n\n/** @internal */\nexport class CorsOriginError extends Error {\n  projectId?: string\n\n  constructor({projectId}: CorsOriginErrorOptions) {\n    super('CorsOriginError')\n    this.projectId = projectId\n  }\n}\n","const supportsLocalStorage = (() => {\n  const key = '__tmp_supports_local_storage'\n\n  try {\n    if (typeof localStorage === 'undefined') {\n      return false\n    }\n\n    localStorage.setItem(key, '---')\n    localStorage.removeItem(key)\n    return true\n  } catch (err) {\n    return false\n  }\n})()\n\nconst memStore: Record<string, string> = {}\n\nexport function setItem(key: string, value: string): void {\n  if (supportsLocalStorage) {\n    localStorage[key] = value\n  } else {\n    memStore[key] = value\n  }\n}\n\nexport function getItem(key: string): string | undefined {\n  return supportsLocalStorage ? localStorage[key] : memStore[key]\n}\n\nexport function removeItem(key: string): void {\n  if (supportsLocalStorage) {\n    localStorage.removeItem(key)\n  } else {\n    delete memStore[key]\n  }\n}\n","import {fromEvent, merge, Observable, of, Subject} from 'rxjs'\nimport {filter, map, shareReplay} from 'rxjs/operators'\nimport {isNonNullable} from '../../../util'\nimport * as storage from './storage'\n\nexport interface BroadcastChannel<T> {\n  messages: Observable<T>\n  broadcast: (message: T) => void\n}\n\nexport function createBroadcastChannel<T>(namespace: string): BroadcastChannel<T> {\n  const storageEvents$ =\n    typeof window === 'undefined'\n      ? of<StorageEvent>() // No storage events in non-browser environments\n      : fromEvent<StorageEvent>(window, 'storage')\n\n  const storageKey = `__studio_local_storage_messaging_${namespace}`\n\n  // note: the the `storageEvents$` stream does not emit for the current\n  // window/tab. this subject is used to re-broadcast messages broadcast outward\n  // to itself\n  const broadcastedMessages$ = new Subject<T>()\n\n  const messages$ = merge(\n    broadcastedMessages$,\n    storageEvents$.pipe(\n      filter((event) => event.key === storageKey),\n      map((event) => event.newValue),\n      filter(isNonNullable),\n      map((newValue) => JSON.parse(newValue))\n    )\n  ).pipe(\n    // this is important to ensure all new subscribers get a message on subscribe\n    shareReplay(1)\n  )\n\n  function broadcast(message: T) {\n    try {\n      storage.setItem(storageKey, JSON.stringify(message))\n      // clear the value afterwards so that next message will still emit a\n      // new event even if it's identical to the previous one\n      storage.removeItem(storageKey)\n\n      broadcastedMessages$.next(message)\n    } catch (err) {\n      // intentional noop\n    }\n  }\n\n  return {messages: messages$, broadcast}\n}\n","const sidPattern = /sid=[^&]{20,}/\n\nfunction consumeSessionId(): string | null {\n  // Are we in a browser-like environment?\n  if (typeof window === 'undefined' || typeof window.location !== 'object') {\n    return null\n  }\n\n  // Does the hash contain a valid session ID?\n  const hash = window.location.hash\n  const [sidParam] = hash.match(sidPattern) || []\n  if (!sidParam) {\n    return null\n  }\n\n  // Extract just the sid from the hash\n  const sid = sidParam.slice(sidParam.indexOf('=') + 1)\n\n  // Remove the parameter from the URL\n  const newHash = hash.replace(sidPattern, '')\n  const newUrl = new URL(window.location.href)\n  newUrl.hash = newHash.length > 1 ? newHash : ''\n  history.replaceState(null, '', newUrl)\n\n  return sid\n}\n\n// this module consumes the session ID as a side-effect as soon as its loaded\n// to remove the session ID from the history (vs waiting to remove the sid hash\n// until react mounts)\nexport const sessionId = consumeSessionId()\n","import {Theme} from '@sanity/ui'\nimport React from 'react'\nimport styled, {css} from 'styled-components'\nimport {AuthProvider} from './createAuthStore'\n\nconst GithubRoot = styled.svg(({theme}: {theme: Theme}) => {\n  const {fg} = theme.sanity.color.base\n\n  return css`\n    fill: ${fg};\n  `\n})\n\nconst GithubLogo = () => (\n  <GithubRoot\n    // data-sanity-icon=\"google-logo\"\n    width=\"1em\"\n    height=\"1em\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 438.55 438.55\"\n  >\n    <path d=\"M409.13 114.57a218.32 218.32 0 0 0-79.8-79.8Q278.94 5.36 219.27 5.36T109.21 34.77a218.29 218.29 0 0 0-79.8 79.8Q0 165 0 224.63q0 71.67 41.83 128.91t108.06 79.23q7.71 1.43 11.42-2a11.17 11.17 0 0 0 3.69-8.57q0-.86-.14-15.42t-.14-25.41l-6.57 1.14a83.77 83.77 0 0 1-15.85 1 120.73 120.73 0 0 1-19.84-2 44.34 44.34 0 0 1-19.11-8.51 36.23 36.23 0 0 1-12.56-17.6l-2.86-6.57a71.34 71.34 0 0 0-9-14.56q-6.14-8-12.42-10.85l-2-1.43a21 21 0 0 1-3.71-3.43 15.66 15.66 0 0 1-2.57-4q-.86-2 1.43-3.29C61.2 310.42 64 310 68 310l5.71.85q5.71 1.14 14.13 6.85a46.08 46.08 0 0 1 13.85 14.84q6.57 11.71 15.85 17.85t18.7 6.14a81.19 81.19 0 0 0 16.27-1.42 56.78 56.78 0 0 0 12.85-4.29q2.57-19.14 14-29.41a195.49 195.49 0 0 1-29.36-5.13 116.52 116.52 0 0 1-26.83-11.14 76.86 76.86 0 0 1-23-19.13q-9.14-11.42-15-30t-5.8-42.81q0-34.55 22.56-58.82-10.57-26 2-58.24 8.28-2.57 24.55 3.85t23.84 11q7.57 4.56 12.13 7.71a206.2 206.2 0 0 1 109.64 0l10.85-6.85a153.65 153.65 0 0 1 26.26-12.56q15.13-5.71 23.13-3.14 12.84 32.26 2.28 58.24 22.55 24.27 22.56 58.82 0 24.27-5.85 43t-15.12 30a79.82 79.82 0 0 1-23.13 19 116.74 116.74 0 0 1-26.84 11.14 195.29 195.29 0 0 1-29.23 5.07q14.8 12.84 14.81 40.58v60.2a11.37 11.37 0 0 0 3.57 8.56q3.57 3.42 11.28 2 66.24-22 108.07-79.23t41.83-128.91q-.03-59.62-29.43-110.05z\" />\n  </GithubRoot>\n)\n\nconst GoogleLogo = () => (\n  <svg\n    // data-sanity-icon=\"google-logo\"\n    width=\"1em\"\n    height=\"1em\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 48 48\"\n  >\n    <path\n      d=\"M11 24a13 13 0 0 1 .66-4.08l-7.4-5.66a22.18 22.18 0 0 0 0 19.49l7.4-5.67A13 13 0 0 1 11 24z\"\n      fill=\"#fbbc05\"\n    />\n    <path\n      d=\"M24 11a12.72 12.72 0 0 1 8.1 2.9l6.4-6.4a22 22 0 0 0-34.24 6.75l7.4 5.66A13 13 0 0 1 24 11z\"\n      fill=\"#ea4335\"\n    />\n    <path\n      d=\"M24 37a13 13 0 0 1-12.34-8.92l-7.4 5.66A21.93 21.93 0 0 0 24 46a21 21 0 0 0 14.33-5.48l-7-5.44A13.59 13.59 0 0 1 24 37zm-12.35-8.93l-7.4 5.67 7.4-5.66z\"\n      fill=\"#34a853\"\n    />\n    <path\n      d=\"M44.5 20H24v8.5h11.8a9.91 9.91 0 0 1-4.49 6.58l7 5.44C42.37 36.76 45 31.17 45 24a18.25 18.25 0 0 0-.5-4z\"\n      fill=\"#4285f4\"\n    />\n  </svg>\n)\n\nfunction CustomLogo(props: {provider: AuthProvider}) {\n  const {provider} = props\n\n  return (\n    provider.logo ? <img src={provider.logo} alt={`Logo for ${provider.name}`} /> : undefined\n  ) as any\n}\n\nexport const providerLogos: Record<string, React.ComponentType<{provider: AuthProvider}>> = {\n  google: GoogleLogo,\n  github: GithubLogo,\n  custom: CustomLogo,\n  // sanity: () => <SanityMonogram data-sanity-icon=\"\" />,\n}\n","import {SanityClient} from '@sanity/client'\nimport {Button, Flex, Heading, Spinner, Stack, Text} from '@sanity/ui'\nimport React, {useEffect, useState} from 'react'\nimport {Observable} from 'rxjs'\nimport {createHookFromObservableFactory} from '../../../util'\nimport {providerLogos} from './providerLogos'\nimport {LoginComponentProps} from './types'\n\ninterface GetProvidersOptions {\n  client: SanityClient\n  mode?: 'append' | 'replace'\n  providers?: Array<{\n    name: string\n    title: string\n    url: string\n    logo?: string\n  }>\n}\n\ninterface ProvidersResponse {\n  thirdPartyLogin?: boolean\n  sso?: {\n    saml?: boolean\n  }\n  providers: Provider[]\n}\n\ninterface Provider {\n  name: string\n  title: string\n  url: string\n}\n\nasync function getProviders({client, mode, providers: customProviders = []}: GetProvidersOptions) {\n  const {providers, thirdPartyLogin, sso} = await client.request<ProvidersResponse>({\n    uri: '/auth/providers',\n  })\n\n  if (!customProviders.length) return providers\n\n  const custom = customProviders.map((provider) => {\n    // taken from here:\n    // https://github.com/sanity-io/sanity/blob/795637999b67c23de1657a3701091a337383f632/packages/%40sanity/default-login/src/util/getProviders.js#L19\n    // A user may want to remove certain login options (eg GitHub) and thus\n    // provide \"official\" login options through the config. These shouldn't be\n    // treated as custom login providers which require the third-party login\n    // feature, but as the official provider\n    const isOfficial = providers.some((official) => official.url === provider.url)\n    const isSupported = isOfficial || thirdPartyLogin || (sso && Object.values(sso).some(Boolean))\n    return {...provider, custom: !isOfficial, supported: isSupported}\n  })\n\n  if (mode === 'replace') return custom\n\n  // Append to the list of official providers, but replace any provider that has\n  // the same URL with the custom one (allows customizing the title, name)\n  return providers\n    .filter((official) => custom.some((provider) => provider.url !== official.url))\n    .concat(custom)\n}\n\ninterface CreateLoginComponentOptions {\n  getClient: () => Observable<SanityClient>\n  loginMethod: 'dual' | 'cookie'\n  mode?: 'append' | 'replace'\n  redirectOnSingle?: boolean\n  providers?: Array<{\n    name: string\n    title: string\n    url: string\n    logo?: string\n  }>\n}\n\ninterface CreateHrefForProviderOptions {\n  projectId: string\n  loginMethod: 'dual' | 'cookie'\n  url: string\n  basePath: string\n}\n\nfunction createHrefForProvider({\n  loginMethod,\n  projectId,\n  url,\n  basePath,\n}: CreateHrefForProviderOptions) {\n  const params = new URLSearchParams()\n  params.set('origin', `${window.location.origin}${basePath}`)\n  params.set('projectId', projectId)\n  params.set('type', loginMethod)\n  return `${url}?${params}`\n}\n\nexport function createLoginComponent({\n  getClient,\n  loginMethod,\n  redirectOnSingle,\n  ...providerOptions\n}: CreateLoginComponentOptions) {\n  const useClient = createHookFromObservableFactory(getClient)\n\n  function LoginComponent({projectId, basePath}: LoginComponentProps) {\n    const [providers, setProviders] = useState<Provider[] | null>(null)\n    const [error, setError] = useState<unknown>(null)\n    if (error) throw error\n\n    const [client] = useClient()\n\n    useEffect(() => {\n      if (!client) return\n\n      getProviders({client, ...providerOptions})\n        .then(setProviders)\n        .catch(setError)\n    }, [client])\n\n    // only create a direct URL if `redirectOnSingle` is true and there is only\n    // one provider available\n    const redirectUrl =\n      redirectOnSingle &&\n      providers?.length === 1 &&\n      providers?.[0] &&\n      createHrefForProvider({\n        loginMethod,\n        projectId,\n        url: providers[0].url,\n        basePath,\n      })\n\n    const loading = !providers || redirectUrl\n\n    useEffect(() => {\n      if (redirectUrl) {\n        window.location.href = redirectUrl\n      }\n    }, [redirectUrl])\n\n    if (loading) {\n      return (\n        <Flex\n          align=\"center\"\n          direction=\"column\"\n          gap={4}\n          justify=\"center\"\n          padding={6}\n          sizing=\"border\"\n        >\n          <Text muted>Loading…</Text>\n          <Spinner muted />\n        </Flex>\n      )\n    }\n\n    return (\n      <Stack space={4}>\n        <Heading align=\"center\" size={1}>\n          Choose login provider\n        </Heading>\n\n        <Stack space={2}>\n          {providers.map((provider, index) => (\n            <Button\n              // eslint-disable-next-line react/no-array-index-key\n              icon={providerLogos[provider.name]}\n              key={`${provider.url}_${index}`}\n              as=\"a\"\n              href={createHrefForProvider({\n                loginMethod,\n                projectId,\n                url: provider.url,\n                basePath,\n              })}\n              mode=\"ghost\"\n              text={provider.title}\n            />\n          ))}\n        </Stack>\n      </Stack>\n    )\n  }\n\n  return LoginComponent\n}\n","import createClient, {SanityClient} from '@sanity/client'\nimport {defer} from 'rxjs'\nimport {map, shareReplay, startWith, switchMap} from 'rxjs/operators'\nimport {memoize} from 'lodash'\nimport {CorsOriginError} from '../cors'\nimport {AuthState, AuthStore} from './types'\nimport {createBroadcastChannel} from './createBroadcastChannel'\nimport {sessionId} from './sessionId'\nimport * as storage from './storage'\nimport {createLoginComponent} from './createLoginComponent'\n\n/** @internal */\nexport interface AuthProvider {\n  name: string\n  title: string\n  url: string\n  logo?: string\n}\n\n/** @internal */\nexport interface AuthStoreOptions {\n  projectId: string\n  dataset: string\n  /**\n   * Login method to use for the studio the studio. Can be one of:\n   * - `dual` (default) - attempt to use cookies where possible, falling back to\n   *   storing authentication token in `localStorage` otherwise\n   * - `cookie` - explicitly disable `localStorage` method, relying only on\n   *   cookies\n   */\n  loginMethod?: 'dual' | 'cookie'\n  /**\n   * Append the custom providers to the default providers or replace them.\n   */\n  mode?: 'append' | 'replace'\n  /**\n   * If true, don't show the choose provider logo screen, automatically redirect\n   * to the single provider login\n   */\n  redirectOnSingle?: boolean\n  /**\n   * The custom provider implementations\n   */\n  providers?: AuthProvider[]\n}\n\nconst getStorageKey = (projectId: string) => {\n  // Project ID is part of the localStorage key so that different projects can\n  // store their separate tokens, and it's easier to do book keeping.\n  if (!projectId) throw new Error('Invalid project id')\n  return `__studio_auth_token_${projectId}`\n}\n\nconst getToken = (projectId: string): string | null => {\n  try {\n    const item = storage.getItem(getStorageKey(projectId))\n    if (item) {\n      const {token} = JSON.parse(item) as {token: string}\n      if (token && typeof token === 'string') {\n        return token\n      }\n    }\n  } catch (err) {\n    console.error(err)\n  }\n  return null\n}\n\nconst clearToken = (projectId: string): void => {\n  try {\n    storage.removeItem(getStorageKey(projectId))\n  } catch (err) {\n    console.error(err)\n  }\n}\n\nconst saveToken = ({token, projectId}: {token: string; projectId: string}): void => {\n  try {\n    storage.setItem(\n      getStorageKey(projectId),\n      JSON.stringify({token, time: new Date().toISOString()})\n    )\n  } catch (err) {\n    console.error(err)\n  }\n}\n\nconst getCurrentUser = async (\n  client: SanityClient,\n  broadcastToken: (token: string | null) => void\n) => {\n  try {\n    const user = await client.request({\n      uri: '/users/me',\n      withCredentials: true,\n      tag: 'users.get-current',\n    })\n\n    // if the user came back with an id, assume it's a full CurrentUser\n    return typeof user?.id === 'string' ? user : null\n  } catch (err) {\n    // 401 means the user had some kind of credentials, but failed to authenticate,\n    // we should clear any local token in this case and treat it as if the used was\n    // logged out\n    if (err.statusCode === 401) {\n      clearToken(client.config().projectId || '')\n      broadcastToken(null)\n      return null\n    }\n\n    // Request failed for a non-auth reason, see if this was a CORS-error by\n    // checking the `/ping` endpoint, which allows all origins\n    const invalidCorsConfig = await client\n      .request({uri: '/ping', withCredentials: false, tag: 'cors-check'})\n      .then(\n        () => true, // Request succeeded, so likely the CORS origin is disallowed\n        () => false // Request failed, so likely a network error of some kind\n      )\n\n    if (invalidCorsConfig) {\n      // Throw a specific error on CORS-errors, to allow us to show a customized dialog\n      throw new CorsOriginError({projectId: client.config()?.projectId})\n    }\n\n    // Some non-CORS error - is it one of those undefinable network errors?\n    if (err.isNetworkError && !err.message && err.request && err.request.url) {\n      const host = new URL(err.request.url).host\n      throw new Error(`Unknown network error attempting to reach ${host}`)\n    }\n\n    // Some other error, just throw it\n    throw err\n  }\n}\n\n/**\n * @internal\n */\nexport function _createAuthStore({\n  projectId,\n  dataset,\n  loginMethod = 'dual',\n  ...providerOptions\n}: AuthStoreOptions): AuthStore {\n  // this broadcast channel receives either a token as a `string` or `null`.\n  // a new client will be created from it, otherwise, it'll only trigger a retry\n  // for cookie-based auth\n  const {broadcast, messages} = createBroadcastChannel<string | null>(`dual_mode_auth_${projectId}`)\n\n  // // TODO: there is currently a bug where the AuthBoundary flashes the\n  // // `NotAuthenticatedComponent` on the first load after a login with\n  // // cookieless mode. A potential solution to fix this bug is to delay\n  // // emitting `state$` until the session ID has been converted to a token\n  // const firstMessage = messages.pipe(first())\n\n  const token$ = messages.pipe(startWith(loginMethod === 'dual' ? getToken(projectId) : null))\n\n  const state$ = token$.pipe(\n    // // see above\n    // debounce(() => firstMessage),\n    map((token) =>\n      createClient({\n        projectId,\n        dataset,\n        apiVersion: '2021-06-07',\n        useCdn: false,\n        ...(token && {token}),\n        withCredentials: true,\n        requestTagPrefix: 'sanity.studio',\n        ignoreBrowserTokenWarning: true,\n        allowReconfigure: false,\n        // @ts-expect-error: __SANITY_STAGING__ is a global env variable set by the vite config\n        ...(typeof __SANITY_STAGING__ !== 'undefined' && __SANITY_STAGING__\n          ? {\n              apiHost:\n                /* __SANITY_STAGING__ is a global variable set by the vite config */\n                // @ts-expect-error: __SANITY_STAGING__ is a global env variable set by the vite config\n                typeof __SANITY_STAGING__ !== 'undefined' && __SANITY_STAGING__ === true\n                  ? 'https://api.sanity.work'\n                  : undefined,\n            }\n          : {}),\n      })\n    ),\n    switchMap((client) =>\n      defer(async (): Promise<AuthState> => {\n        const currentUser = await getCurrentUser(client, broadcast)\n\n        return {\n          currentUser,\n          client,\n          authenticated: !!currentUser,\n        }\n      })\n    ),\n    shareReplay(1)\n  )\n\n  async function handleCallbackUrl() {\n    if (sessionId && loginMethod === 'dual') {\n      const requestClient = createClient({\n        projectId,\n        dataset,\n        useCdn: true,\n        withCredentials: true,\n        apiVersion: '2021-06-07',\n        requestTagPrefix: 'sanity.studio',\n      })\n\n      // try to get the current user by using the cookie credentials\n      const currentUser = await getCurrentUser(requestClient, broadcast)\n\n      if (currentUser) {\n        // if that worked, then we don't need to fetch a token\n        broadcast(null)\n      } else {\n        // if that didn't work, then we need to trade the session ID for a token\n        const {token} = await requestClient.request<{token: string}>({\n          method: 'GET',\n          uri: `/auth/fetch`,\n          query: {sid: sessionId},\n          tag: 'auth.fetch-token',\n        })\n\n        saveToken({token, projectId})\n        broadcast(token)\n      }\n    } else {\n      broadcast(loginMethod === 'dual' ? getToken(projectId) : null)\n    }\n  }\n\n  async function logout() {\n    const requestClient = createClient({\n      projectId,\n      dataset,\n      useCdn: true,\n      withCredentials: true,\n      apiVersion: '2021-06-07',\n      requestTagPrefix: 'sanity.studio',\n    })\n\n    clearToken(projectId)\n    await requestClient.auth.logout()\n    broadcast(null)\n  }\n\n  const LoginComponent = createLoginComponent({\n    ...providerOptions,\n    getClient: () => state$.pipe(map((state) => state.client)),\n    loginMethod,\n  })\n\n  return {\n    handleCallbackUrl,\n    token: token$,\n    state: state$,\n    LoginComponent,\n    logout,\n  }\n}\n\nfunction hash(value: unknown): string {\n  if (typeof value !== 'object' || value === null) return `${value}`\n\n  // note: this code path works for arrays as well as objects\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(value)\n        .sort(([a], [b]) => a.localeCompare(b, 'en'))\n        .map(([k, v]) => [k, hash(v)])\n    )\n  )\n}\n\n/**\n * @internal\n */\nexport const createAuthStore = memoize(_createAuthStore, hash)\n","import {of} from 'rxjs'\nimport {SanityClient} from '@sanity/client'\nimport {CurrentUser} from '@sanity/types'\nimport {AuthStore} from './types'\n\n/** @internal */\nexport interface MockAuthStoreOptions {\n  currentUser: CurrentUser | null\n  client: SanityClient\n}\n\n/**\n * Creates a mock `AuthStore` (for testing) that emits an `AuthState` derived\n * from the `client` and `currentUser` given.\n *\n * @internal\n */\nexport function createMockAuthStore({client, currentUser = null}: MockAuthStoreOptions): AuthStore {\n  return {\n    state: of({authenticated: true, client, currentUser}),\n  }\n}\n","/** @internal */\nexport function getProviderTitle(provider?: string): string | undefined {\n  if (provider === 'google') {\n    return 'Google'\n  }\n\n  if (provider === 'github') {\n    return 'GitHub'\n  }\n\n  if (provider === 'sanity') {\n    return 'Sanity'\n  }\n\n  if (provider?.startsWith('saml-')) {\n    return 'SAML/SSO'\n  }\n\n  return undefined\n}\n","import {Observable, OperatorFunction} from 'rxjs'\nimport {catchError, tap} from 'rxjs/operators'\n\ntype Selector<T, K> = (error: any, attemptNo: number, caught: Observable<T>) => Observable<K>\n\nexport function catchWithCount<T, K = T>(selector: Selector<T, K>): OperatorFunction<T, K>\n\nexport function catchWithCount<T, K = T>(selector: Selector<T, K>) {\n  return (input$: Observable<T>) => {\n    let errors: any[] = []\n\n    const errorOp: OperatorFunction<any, any> = catchError((err, caught: Observable<T>) => {\n      errors.push(err)\n      return selector(err, errors.length, caught).pipe(errorOp)\n    })\n    return input$.pipe(\n      tap(() => {\n        errors = []\n      }),\n      errorOp\n    )\n  }\n}\n","import {BifurClient} from '@sanity/bifur-client'\nimport {observableCallback} from 'observable-callback'\nimport {map, mergeMapTo, startWith, take, takeUntil} from 'rxjs/operators'\nimport {concat, fromEvent, merge, NEVER, Observable, of, throwError, timer} from 'rxjs'\nimport {catchWithCount} from './utils/catchWithCount'\n\n/** @internal */\nexport interface ConnectionStatusStore {\n  connectionStatus$: Observable<ConnectionStatus>\n}\n\nconst onOnline$ = typeof window === 'undefined' ? of({}) : fromEvent(window, 'online')\nconst onOffline$ = typeof window === 'undefined' ? of({}) : fromEvent(window, 'offline')\n\nconst expBackoff = (retryCount: number) => Math.pow(2, retryCount) * 100\n\n/** @internal */\nexport type ConnectingStatus = {\n  type: 'connecting'\n}\n\n/** @internal */\nexport type ErrorStatus = {\n  type: 'error'\n  error: Error\n  attemptNo: number\n  isOffline: boolean\n  retryAt: Date\n}\n\n/** @internal */\nexport type RetryingStatus = {\n  type: 'retrying'\n}\n\n/** @internal */\nexport type ConnectedStatus = {type: 'connected'; lastHeartbeat: Date}\n\n/** @internal */\nexport const CONNECTING: ConnectingStatus = {type: 'connecting'}\n\n/** @internal */\nexport type ConnectionStatus = ConnectingStatus | ErrorStatus | ConnectedStatus | RetryingStatus\n\nconst _callback = observableCallback()\n\nconst onRetry$ = _callback[0]\n\n/** @internal */\nexport const onRetry = _callback[1]\n\nconst createErrorStatus = ({\n  error,\n  isOffline,\n  attemptNo,\n  retryAt,\n}: {\n  error: Error\n  isOffline: boolean\n  attemptNo: number\n  retryAt: Date\n}): ErrorStatus => ({\n  type: 'error',\n  error,\n  attemptNo,\n  isOffline,\n  retryAt,\n})\n\n/** @internal */\nexport interface ConnectionStatusStoreOptions {\n  bifur: BifurClient\n}\n\n/**\n * This is the beginning of what should be the data store tracking connection status in the Sanity studio.\n *\n * @internal\n */\nexport function createConnectionStatusStore({\n  bifur,\n}: ConnectionStatusStoreOptions): ConnectionStatusStore {\n  const connectionStatus$: Observable<ConnectionStatus> = merge(\n    bifur.heartbeats,\n    onOffline$.pipe(mergeMapTo(throwError(new Error('The browser went offline'))))\n  ).pipe(\n    map((ts): ConnectionStatus => ({type: 'connected', lastHeartbeat: ts})),\n    catchWithCount((error, successiveErrorsCount, caught) => {\n      const timeUntilRetry = Math.min(1000 * 240, expBackoff(successiveErrorsCount))\n      const retryAt = new Date(new Date().getTime() + timeUntilRetry)\n      const expiry$ = timer(retryAt)\n      const isOffline = !navigator.onLine\n      const initialErrorStatus = createErrorStatus({\n        error,\n        retryAt,\n        isOffline,\n        attemptNo: successiveErrorsCount,\n      })\n\n      const triggerRetry$ = NEVER.pipe(\n        takeUntil(isOffline ? onOnline$ : merge(expiry$, onOnline$, onRetry$))\n      )\n\n      return concat(of(initialErrorStatus), triggerRetry$.pipe(take(1)), caught)\n    }),\n    startWith(CONNECTING)\n  )\n\n  return {connectionStatus$}\n}\n","import {createGlobalStyle} from 'styled-components'\n\nexport const GlobalStyle = createGlobalStyle(({theme}) => {\n  const {color, fonts} = theme.sanity\n\n  return {\n    html: {\n      backgroundColor: color.base.bg,\n    },\n\n    '#sanity': {\n      fontFamily: fonts.text.family,\n    },\n  }\n})\n","import type {Config} from './types'\n\n/** @beta */\nexport function defineConfig<T extends Config>(config: T): T {\n  return config\n}\n\n/**\n * @deprecated Use `defineConfig` instead\n * @beta\n */\nexport function createConfig<T extends Config>(config: T): T {\n  return defineConfig(config)\n}\n","import {isString} from 'lodash'\nimport {Plugin, PluginOptions} from './types'\n\n/** @beta */\nexport type PluginFactory<TOptions> = (options: TOptions) => PluginOptions\n\nfunction validatePlugin(pluginResult: PluginOptions) {\n  // TODO: name is required etc\n  const messages = [\n    'projectId' in pluginResult && '`projectId` not allowed in plugin configuration',\n    'dataset' in pluginResult && '`dataset` not allowed in plugin configuration',\n  ].filter(isString)\n\n  if (messages.length)\n    throw new Error(\n      `Invalid plugin configuration:\\n${messages.map((message) => `\\t${message}`).join('\\n')}`\n    )\n}\n\n/** @beta */\nexport function definePlugin<TOptions = void>(\n  arg: PluginFactory<TOptions> | PluginOptions\n): Plugin<TOptions> {\n  if (typeof arg === 'function') {\n    const pluginFactory = arg\n\n    return (options: TOptions) => {\n      // TODO: there's a possiblity of passing default arguments to users'\n      // plugin factories or reading from default options in `TOptions`\n      const result = pluginFactory(options)\n\n      validatePlugin(result)\n      return result\n    }\n  }\n\n  validatePlugin(arg)\n  return () => arg\n}\n\n/**\n * @deprecated Use `definePlugin` instead\n * @beta\n */\nexport function createPlugin<TOptions = void>(\n  arg: PluginFactory<TOptions> | PluginOptions\n): Plugin<TOptions> {\n  return definePlugin(arg)\n}\n","export default {\n  title: 'Slug',\n  name: 'slug',\n  type: 'object',\n  fields: [\n    {\n      name: 'current',\n      title: 'Current slug',\n      type: 'string',\n    },\n    {\n      // The source field is deprecated/unused, but leaving it included and hidden\n      // to prevent rendering \"Unknown field\" warnings on legacy data\n      name: 'source',\n      title: 'Source field',\n      type: 'string',\n      hidden: true,\n    },\n  ],\n}\n","export default {\n  title: 'Geographical Point',\n  name: 'geopoint',\n  type: 'object',\n  fields: [\n    {\n      name: 'lat',\n      type: 'number',\n      title: 'Latitude',\n    },\n    {\n      name: 'lng',\n      type: 'number',\n      title: 'Longitude',\n    },\n    {\n      name: 'alt',\n      type: 'number',\n      title: 'Altitude',\n    },\n  ],\n}\n","export default {\n  name: 'sanity.imageCrop',\n  title: 'Image crop',\n  type: 'object',\n  fields: [\n    {\n      name: 'top',\n      type: 'number',\n    },\n    {\n      name: 'bottom',\n      type: 'number',\n    },\n    {\n      name: 'left',\n      type: 'number',\n    },\n    {\n      name: 'right',\n      type: 'number',\n    },\n  ],\n}\n","export default {\n  name: 'sanity.imageHotspot',\n  title: 'Image hotspot',\n  type: 'object',\n  fields: [\n    {\n      name: 'x',\n      type: 'number',\n    },\n    {\n      name: 'y',\n      type: 'number',\n    },\n    {\n      name: 'height',\n      type: 'number',\n    },\n    {\n      name: 'width',\n      type: 'number',\n    },\n  ],\n}\n","export default {\n  name: 'sanity.assetSourceData',\n  title: 'Asset Source Data',\n  type: 'object',\n  fields: [\n    {\n      name: 'name',\n      title: 'Source name',\n      description: 'A canonical name for the source this asset is originating from',\n      type: 'string',\n    },\n    {\n      name: 'id',\n      title: 'Asset Source ID',\n      description:\n        'The unique ID for the asset within the originating source so you can programatically find back to it',\n      type: 'string',\n    },\n    {\n      name: 'url',\n      title: 'Asset information URL',\n      description: 'A URL to find more information about this asset in the originating source',\n      type: 'string',\n    },\n  ],\n}\n","import {SanityDocument} from '@sanity/types'\n\nexport default {\n  name: 'sanity.imageAsset',\n  title: 'Image',\n  type: 'document',\n  fieldsets: [\n    {\n      name: 'system',\n      title: 'System fields',\n      description: 'These fields are managed by the system and not editable',\n    },\n  ],\n  fields: [\n    {\n      name: 'originalFilename',\n      type: 'string',\n      title: 'Original file name',\n      readOnly: true,\n    },\n    {\n      name: 'label',\n      type: 'string',\n      title: 'Label',\n    },\n    {\n      name: 'title',\n      type: 'string',\n      title: 'Title',\n    },\n    {\n      name: 'description',\n      type: 'string',\n      title: 'Description',\n    },\n    {\n      name: 'altText',\n      type: 'string',\n      title: 'Alternative text',\n    },\n    {\n      name: 'sha1hash',\n      type: 'string',\n      title: 'SHA1 hash',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'extension',\n      type: 'string',\n      readOnly: true,\n      title: 'File extension',\n      fieldset: 'system',\n    },\n    {\n      name: 'mimeType',\n      type: 'string',\n      readOnly: true,\n      title: 'Mime type',\n      fieldset: 'system',\n    },\n    {\n      name: 'size',\n      type: 'number',\n      title: 'File size in bytes',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'assetId',\n      type: 'string',\n      title: 'Asset ID',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'uploadId',\n      type: 'string',\n      readOnly: true,\n      hidden: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'path',\n      type: 'string',\n      title: 'Path',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'url',\n      type: 'string',\n      title: 'Url',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'metadata',\n      type: 'sanity.imageMetadata',\n      title: 'Metadata',\n    },\n    {\n      name: 'source',\n      type: 'sanity.assetSourceData',\n      title: 'Source',\n      readOnly: true,\n      fieldset: 'system',\n    },\n  ],\n  preview: {\n    select: {\n      id: '_id',\n      title: 'originalFilename',\n      mimeType: 'mimeType',\n      size: 'size',\n    },\n    prepare(doc: Partial<SanityDocument>) {\n      return {\n        title: doc.title || (typeof doc.path === 'string' && doc.path.split('/').slice(-1)[0]),\n        media: {asset: {_ref: doc.id}},\n        subtitle: `${doc.mimeType} (${(Number(doc.size) / 1024 / 1024).toFixed(2)} MB)`,\n      }\n    },\n  },\n  orderings: [\n    {\n      title: 'File size',\n      name: 'fileSizeDesc',\n      by: [{field: 'size', direction: 'desc'}],\n    },\n  ],\n}\n","export default {\n  name: 'sanity.imagePalette',\n  title: 'Image palette',\n  type: 'object',\n  fields: [\n    {name: 'darkMuted', type: 'sanity.imagePaletteSwatch', title: 'Dark Muted'},\n    {name: 'lightVibrant', type: 'sanity.imagePaletteSwatch', title: 'Light Vibrant'},\n    {name: 'darkVibrant', type: 'sanity.imagePaletteSwatch', title: 'Dark Vibrant'},\n    {name: 'vibrant', type: 'sanity.imagePaletteSwatch', title: 'Vibrant'},\n    {name: 'dominant', type: 'sanity.imagePaletteSwatch', title: 'Dominant'},\n    {name: 'lightMuted', type: 'sanity.imagePaletteSwatch', title: 'Light Muted'},\n    {name: 'muted', type: 'sanity.imagePaletteSwatch', title: 'Muted'},\n  ],\n}\n","export default {\n  name: 'sanity.imagePaletteSwatch',\n  title: 'Image palette swatch',\n  type: 'object',\n  fields: [\n    {name: 'background', type: 'string', title: 'Background', readOnly: true},\n    {name: 'foreground', type: 'string', title: 'Foreground', readOnly: true},\n    {name: 'population', type: 'number', title: 'Population', readOnly: true},\n    {name: 'title', type: 'string', title: 'String', readOnly: true},\n  ],\n}\n","export default {\n  name: 'sanity.imageDimensions',\n  type: 'object',\n  title: 'Image dimensions',\n  fields: [\n    {name: 'height', type: 'number', title: 'Height', readOnly: true},\n    {name: 'width', type: 'number', title: 'Width', readOnly: true},\n    {name: 'aspectRatio', type: 'number', title: 'Aspect ratio', readOnly: true},\n  ],\n}\n","export default {\n  name: 'sanity.imageMetadata',\n  title: 'Image metadata',\n  type: 'object',\n  fieldsets: [\n    {\n      name: 'extra',\n      title: 'Extra metadata…',\n      options: {\n        collapsable: true,\n      },\n    },\n  ],\n  fields: [\n    {\n      name: 'location',\n      type: 'geopoint',\n    },\n    {\n      name: 'dimensions',\n      title: 'Dimensions',\n      type: 'sanity.imageDimensions',\n      fieldset: 'extra',\n    },\n    {\n      name: 'palette',\n      type: 'sanity.imagePalette',\n      title: 'Palette',\n      fieldset: 'extra',\n    },\n    {\n      name: 'lqip',\n      title: 'LQIP (Low-Quality Image Placeholder)',\n      type: 'string',\n      readOnly: true,\n    },\n    {\n      name: 'blurHash',\n      title: 'BlurHash',\n      type: 'string',\n      readOnly: true,\n    },\n    {\n      name: 'hasAlpha',\n      title: 'Has alpha channel',\n      type: 'boolean',\n      readOnly: true,\n    },\n    {\n      name: 'isOpaque',\n      title: 'Is opaque',\n      type: 'boolean',\n      readOnly: true,\n    },\n  ],\n}\n","import {SanityDocument} from '@sanity/client'\n\nexport default {\n  name: 'sanity.fileAsset',\n  title: 'File',\n  type: 'document',\n  fieldsets: [\n    {\n      name: 'system',\n      title: 'System fields',\n      description: 'These fields are managed by the system and not editable',\n    },\n  ],\n  fields: [\n    {\n      name: 'originalFilename',\n      type: 'string',\n      title: 'Original file name',\n      readOnly: true,\n    },\n    {\n      name: 'label',\n      type: 'string',\n      title: 'Label',\n    },\n    {\n      name: 'title',\n      type: 'string',\n      title: 'Title',\n    },\n    {\n      name: 'description',\n      type: 'string',\n      title: 'Description',\n    },\n    {\n      name: 'altText',\n      type: 'string',\n      title: 'Alternative text',\n    },\n    {\n      name: 'sha1hash',\n      type: 'string',\n      title: 'SHA1 hash',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'extension',\n      type: 'string',\n      title: 'File extension',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'mimeType',\n      type: 'string',\n      title: 'Mime type',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'size',\n      type: 'number',\n      title: 'File size in bytes',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'assetId',\n      type: 'string',\n      title: 'Asset ID',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'path',\n      type: 'string',\n      title: 'Path',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'url',\n      type: 'string',\n      title: 'Url',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'source',\n      type: 'sanity.assetSourceData',\n      title: 'Source',\n      readOnly: true,\n      fieldset: 'system',\n    },\n  ],\n  preview: {\n    select: {\n      title: 'originalFilename',\n      path: 'path',\n      mimeType: 'mimeType',\n      size: 'size',\n    },\n    prepare(doc: Partial<SanityDocument>) {\n      return {\n        title: doc.title || doc.path.split('/').slice(-1)[0],\n        subtitle: `${doc.mimeType} (${(doc.size / 1024 / 1024).toFixed(2)} MB)`,\n      }\n    },\n  },\n  orderings: [\n    {\n      title: 'File size',\n      name: 'fileSizeDesc',\n      by: [{field: 'size', direction: 'desc'}],\n    },\n  ],\n}\n","import SchemaBuilder, {type SchemaValidationResult} from '@sanity/schema'\nimport {validateSchema, groupProblems} from '@sanity/schema/_internal'\nimport {Schema} from '@sanity/types'\nimport {inferFromSchema as inferValidation} from '@sanity/validation'\nimport slug from './types/slug'\nimport geopoint from './types/geopoint'\nimport imageCrop from './types/imageCrop'\nimport imageHotspot from './types/imageHotspot'\nimport assetSourceData from './types/assetSourceData'\nimport imageAsset from './types/imageAsset'\nimport imagePalette from './types/imagePalette'\nimport imagePaletteSwatch from './types/imagePaletteSwatch'\nimport imageDimensions from './types/imageDimensions'\nimport imageMetadata from './types/imageMetadata'\nimport fileAsset from './types/fileAsset'\n\nconst isError = (problem: SchemaValidationResult) => problem.severity === 'error'\n\nconst builtinTypes = [\n  assetSourceData,\n  slug,\n  geopoint,\n  // legacyRichDate,\n  imageAsset,\n  fileAsset,\n  imageCrop,\n  imageHotspot,\n  imageMetadata,\n  imageDimensions,\n  imagePalette,\n  imagePaletteSwatch,\n]\n\n/** @beta */\nexport function createSchema(schemaDef: {name: string; types: any[]}): Schema {\n  const validated = validateSchema(schemaDef.types).getTypes()\n  const validation = groupProblems(validated)\n  const hasErrors = validation.some((group) => group.problems.some(isError))\n\n  const compiled = SchemaBuilder.compile({\n    name: schemaDef.name,\n    types: hasErrors ? [] : [...schemaDef.types, ...builtinTypes].filter(Boolean),\n  })\n\n  // ;(compiled as any)._source = schemaDef\n  ;(compiled as any)._validation = validation\n\n  return inferValidation(compiled as Schema)\n}\n","import type {SchemaType} from '@sanity/types'\n\n/**\n * Get the most specific defined title of a schema type\n * If not set directly on the given type, it will traverse up the tree until it\n * finds one, falling back to the _name_ of the type.\n *\n * @param type - The schema type to get the title of\n * @returns A title, alternatively the schema type _name_\n * @internal\n */\nexport function getSchemaTypeTitle(type: SchemaType): string {\n  if (typeof type.title === 'string') {\n    return type.title\n  }\n\n  if (type.type) {\n    return getSchemaTypeTitle(type.type)\n  }\n\n  return type.name || type.jsonType\n}\n","import type {SourceClientOptions} from './config'\n\n/**\n * Unless otherwise specified, this is the API version we use for controlled\n * requests on internal studio APIs. The user should always ask for a specific\n * API version when using the client - this way we can upgrade which version we\n * use internally without having the users code break unexpectedly. It also\n * means the user can easily upgrade to newer versions of GROQ when it arrives.\n *\n * @internal\n */\nexport const DEFAULT_STUDIO_CLIENT_OPTIONS: SourceClientOptions = {\n  apiVersion: '2022-09-09',\n}\n","import {Flex, Layer, Spinner} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\nconst FullscreenLayer = styled(Layer)`\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n`\n\nexport function FullscreenSpinner() {\n  return (\n    <FullscreenLayer>\n      <Flex height=\"fill\" align=\"center\" justify=\"center\">\n        <Spinner />\n      </Flex>\n    </FullscreenLayer>\n  )\n}\n","import {Box, Flex, Spinner, Text} from '@sanity/ui'\nimport React from 'react'\n\nexport function SpinnerWithText(props: {text: string}) {\n  const {text} = props\n\n  return (\n    <Flex direction=\"row\" justify=\"center\" align=\"center\">\n      <Spinner />\n      <Box marginLeft={2}>\n        <Text>{text}</Text>\n      </Box>\n    </Flex>\n  )\n}\n","/* eslint-disable @typescript-eslint/ban-types */\nimport {ComponentType, createElement, Fragment, useMemo} from 'react'\nimport {useSource} from '../../studio'\nimport {flattenConfig} from '../../config'\nimport {PluginOptions} from '../types'\n\nconst emptyRender = () => createElement(Fragment)\n\nfunction _createMiddlewareComponent<T extends {}>(\n  defaultComponent: ComponentType<T>,\n  middlewareComponents: ComponentType<T>[]\n): ComponentType<T> {\n  return (outerProps: T) => {\n    // This is the inner \"layer\" of the middleware chain\n    // Here we render the _default_ component (typically Sanity's component)\n    let next = (props: T) => createElement(defaultComponent, props)\n\n    for (const middleware of middlewareComponents) {\n      // As we progress through the chain, the meaning of \"renderDefault\" changes.\n      // At a given layer in the chain, the _next_ layer is the \"default\".\n      const renderDefault = next\n\n      // Here we replace `next` so that the _previous_ layer may use this as its _next_.\n      next = (props) => createElement(middleware, {...props, renderDefault})\n    }\n\n    return next({\n      ...outerProps,\n      // NOTE: it's safe to pass the empty render function, since it'll be overwritten in the next step (above).\n      // NOTE: it's important that the default component does not use `renderDefault`, since it will\n      // get the `emptyRender` callback will be passed when the middleware stack is empty.\n      renderDefault: emptyRender,\n    })\n  }\n}\n\n/** @internal */\nexport function useMiddlewareComponents<T extends {}>(props: {\n  pick: (plugin: PluginOptions) => ComponentType<T>\n  defaultComponent: ComponentType<T>\n}): ComponentType<T> {\n  const {options} = useSource().__internal\n  const {defaultComponent, pick} = props\n\n  return useMemo(() => {\n    // 1. Flatten the config tree into a list of configs\n    const flattened = flattenConfig(options, [])\n\n    // 2. Pick the middleware components from the configs\n    const pickedComponents = flattened.map(({config}) => pick(config))\n\n    // 3: Since we try to pick the components in all configs, some results may be undefined.\n    // Therefore, we filter these values out before passing the result to the middleware creator.\n    const result = pickedComponents.filter(Boolean)\n\n    // 4. Create the middleware component\n    return _createMiddlewareComponent(defaultComponent, result)\n  }, [defaultComponent, options, pick])\n}\n","import {SchemaType} from '@sanity/types'\n\nconst PRIMITIVES = ['string', 'number', 'boolean']\n\nexport function is(typeName: string, type: SchemaType): boolean {\n  return type.name === typeName || Boolean(type.type && is(typeName, type.type))\n}\n\nexport {is as type}\n\nexport function primitive(type: SchemaType) {\n  return PRIMITIVES.some((typeName) => is(typeName, type))\n}\n","import {ComponentType} from 'react'\nimport {\n  BlockImagePreview,\n  BlockPreview,\n  DefaultPreview,\n  DetailPreview,\n  InlinePreview,\n  MediaPreview,\n} from '../../components'\n\nexport const _previewComponents = {\n  default: DefaultPreview,\n  media: MediaPreview,\n  detail: DetailPreview,\n  inline: InlinePreview,\n  block: BlockPreview,\n  blockImage: BlockImagePreview,\n} as const\n","import {DocumentIcon} from '@sanity/icons'\nimport imageUrlBuilder from '@sanity/image-url'\nimport {ImageUrlFitMode} from '@sanity/types'\nimport React, {\n  ComponentType,\n  createElement,\n  ElementType,\n  isValidElement,\n  ReactElement,\n  useCallback,\n  useMemo,\n} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {SanityImageSource} from '@sanity/image-url/lib/types/types'\nimport {isImageSource} from '@sanity/asset-utils'\nimport {PreviewProps} from '../../components/previews'\nimport {useClient} from '../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../studioClient'\nimport {isString} from '../../util'\nimport {_previewComponents} from './_previewComponents'\n\nfunction FallbackIcon() {\n  return <DocumentIcon className=\"sanity-studio__preview-fallback-icon\" />\n}\n\n/** @internal */\nexport interface SanityDefaultPreviewProps extends Omit<PreviewProps, 'renderDefault'> {\n  error?: Error | null\n  icon?: ElementType | false\n}\n\n/**\n * Used in cases where no custom preview component is provided\n * @internal\n * */\nexport function SanityDefaultPreview(props: SanityDefaultPreviewProps): ReactElement {\n  const {icon, layout, media: mediaProp, imageUrl, title, ...restProps} = props\n\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const imageBuilder = useMemo(() => imageUrlBuilder(client), [client])\n\n  // NOTE: This function exists because the previews provides options\n  // for the rendering of the media (dimensions)\n  const renderMedia = useCallback(\n    (options: {\n      dimensions: {width?: number; height?: number; fit: ImageUrlFitMode; dpr?: number}\n    }) => {\n      const {dimensions} = options\n\n      // Handle sanity image\n      return (\n        <img\n          alt={isString(title) ? title : undefined}\n          referrerPolicy=\"strict-origin-when-cross-origin\"\n          src={\n            imageBuilder\n              .image(\n                mediaProp as SanityImageSource /*will only enter this code path if it's compatible*/\n              )\n              .width(dimensions.width || 100)\n              .height(dimensions.height || 100)\n              .fit(dimensions.fit)\n              .dpr(dimensions.dpr || 1)\n              .url() || ''\n          }\n        />\n      )\n    },\n    [imageBuilder, mediaProp, title]\n  )\n\n  const renderIcon = useCallback(() => {\n    return createElement(icon || FallbackIcon)\n  }, [icon])\n\n  const media = useMemo(() => {\n    if (icon === false) {\n      // Explicitly disabled\n      return false\n    }\n\n    if (isValidElementType(mediaProp)) {\n      return mediaProp\n    }\n\n    if (isValidElement(mediaProp)) {\n      return mediaProp\n    }\n\n    if (isImageSource(mediaProp)) {\n      return renderMedia\n    }\n\n    // Handle image urls\n    if (isString(imageUrl)) {\n      return (\n        <img\n          src={imageUrl}\n          alt={isString(title) ? title : undefined}\n          referrerPolicy=\"strict-origin-when-cross-origin\"\n        />\n      )\n    }\n\n    // Render fallback icon\n    return renderIcon\n  }, [icon, imageUrl, mediaProp, renderIcon, renderMedia, title])\n\n  const previewProps: Omit<PreviewProps, 'renderDefault'> = useMemo(\n    () => ({\n      ...restProps,\n      // @todo: fix `TS2769: No overload matches this call.`\n      media: media as any,\n      title,\n    }),\n    [media, restProps, title]\n  )\n\n  const layoutComponent = _previewComponents[layout || 'default']\n\n  return createElement(\n    layoutComponent as ComponentType<Omit<PreviewProps, 'renderDefault'>>,\n    previewProps\n  )\n}\n","import {EMPTY, fromEvent} from 'rxjs'\nimport {shareReplay} from 'rxjs/operators'\n\nexport const resize$ =\n  typeof window === 'undefined' ? EMPTY : fromEvent(window, 'resize').pipe(shareReplay(1))\n","import {EMPTY, fromEvent} from 'rxjs'\nimport {shareReplay} from 'rxjs/operators'\n\nexport const scroll$ =\n  typeof window === 'undefined'\n    ? EMPTY\n    : fromEvent(window, 'scroll', {passive: true, capture: true}).pipe(shareReplay(1))\n","import {EMPTY, fromEvent} from 'rxjs'\nimport {shareReplay} from 'rxjs/operators'\n\nexport const orientationChange$ =\n  typeof window === 'undefined'\n    ? EMPTY\n    : fromEvent(window, 'orientationchange').pipe(shareReplay(1))\n","import {Subject, Observable, merge, of as observableOf} from 'rxjs'\nimport {map, mergeMap, filter} from 'rxjs/operators'\nimport {resize$} from './resize'\nimport {scroll$} from './scroll'\nimport {orientationChange$} from './orientationChange'\n\nconst ROOT_MARGIN_PX = 150\n\n/*\n  Adapted from the polyfill at https://github.com/WICG/IntersectionObserver\n*/\nfunction isIntersectionObserverSupported() {\n  if (\n    typeof window !== 'undefined' &&\n    'IntersectionObserver' in window &&\n    'IntersectionObserverEntry' in window &&\n    'intersectionRatio' in IntersectionObserverEntry.prototype\n  ) {\n    // Minimal polyfill for Edge 15's lack of `isIntersecting`\n    // See: https://github.com/WICG/IntersectionObserver/issues/211\n    if (!('isIntersecting' in IntersectionObserverEntry.prototype)) {\n      Object.defineProperty(IntersectionObserverEntry.prototype, 'isIntersecting', {\n        get() {\n          return this.intersectionRatio > 0\n        },\n      })\n    }\n    return true\n  }\n  return false\n}\n\ntype IntersectionEvent = {isIntersecting: boolean}\n\nexport const intersectionObservableFor = isIntersectionObserverSupported()\n  ? createIntersectionObserverBased()\n  : createLegacyBased()\n\ntype IntersectionObservableFor = (element: Element) => Observable<IntersectionEvent>\n\nfunction createIntersectionObserverBased(): IntersectionObservableFor {\n  const intersectionObserverEntriesSubject = new Subject<IntersectionObserverEntry>()\n\n  const intersectionObserver = new IntersectionObserver(\n    (entries) => {\n      entries.forEach((entry) => {\n        intersectionObserverEntriesSubject.next(entry)\n      })\n    },\n    {\n      threshold: 0,\n      rootMargin: `${ROOT_MARGIN_PX}px`,\n    }\n  )\n\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  return function intersectionObservableFor(element) {\n    return new Observable((observer) => {\n      intersectionObserver.observe(element)\n      observer.next()\n      return () => intersectionObserver.unobserve(element)\n    }).pipe(\n      mergeMap(() => intersectionObserverEntriesSubject.asObservable()),\n      filter((entry: IntersectionObserverEntry) => entry.target === element),\n      map((ev) => ({\n        isIntersecting: ev.isIntersecting,\n      }))\n    )\n  }\n}\n\n// This can be removed when intersection observer are supported by the browsers we support\nfunction createLegacyBased() {\n  function getViewport() {\n    return {\n      left: 0,\n      right: window.innerWidth,\n      top: 0,\n      bottom: window.innerHeight,\n    }\n  }\n\n  function intersects(\n    rect: DOMRect,\n    viewport: {left: number; right: number; top: number; bottom: number},\n    margin: number\n  ) {\n    return (\n      rect.left <= viewport.right + margin &&\n      rect.right >= viewport.left - margin &&\n      rect.top <= viewport.bottom + margin &&\n      rect.bottom >= viewport.top - margin\n    )\n  }\n\n  function inViewport(element: HTMLElement) {\n    return () => intersects(element.getBoundingClientRect(), getViewport(), ROOT_MARGIN_PX)\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  return function intersectionObservableFor(element: HTMLElement): Observable<IntersectionEvent> {\n    const isElementInViewport = inViewport(element)\n    return merge(observableOf(isElementInViewport()), resize$, scroll$, orientationChange$).pipe(\n      // @todo: consider \"faking\" more of the IntersectionObserverEntry api if possible\n      map(isElementInViewport),\n      map((isIntersecting) => ({isIntersecting}))\n    )\n  }\n}\n","import {EMPTY, fromEvent, Observable} from 'rxjs'\nimport {shareReplay} from 'rxjs/operators'\n\nexport const visibilityChange$: Observable<Event> =\n  typeof window === 'undefined'\n    ? EMPTY\n    : fromEvent(document, 'visibilitychange').pipe(shareReplay(1))\n","import {useEffect, useState} from 'react'\nimport {concat, of} from 'rxjs'\nimport {delay, distinctUntilChanged, map, switchMap} from 'rxjs/operators'\nimport {intersectionObservableFor} from './streams/intersectionObservableFor'\nimport {visibilityChange$} from './streams/visibilityChange'\n\nexport function useVisibility(props: {element: HTMLElement | null; hideDelay?: number}): boolean {\n  const {element, hideDelay = 0} = props\n  const [visible, setVisible] = useState(false)\n\n  useEffect(() => {\n    if (!element) {\n      return undefined\n    }\n\n    const isDocumentVisible$ = concat(\n      of(!document.hidden),\n      visibilityChange$.pipe(\n        map((event) => (event.target instanceof Document ? !event?.target?.hidden : false))\n      )\n    ).pipe(distinctUntilChanged())\n\n    const inViewport$ = intersectionObservableFor(element).pipe(\n      map((event) => event.isIntersecting)\n    )\n\n    const visible$ = isDocumentVisible$.pipe(\n      switchMap((isDocumentVisible) => (isDocumentVisible ? inViewport$ : of(false))),\n      switchMap((isVisible) => (isVisible ? of(true) : of(false).pipe(delay(hideDelay)))),\n      distinctUntilChanged()\n    )\n\n    const sub = visible$.subscribe(setVisible)\n\n    return () => sub.unsubscribe()\n  }, [element, hideDelay])\n\n  return visible\n}\n","import {PreviewValue, SchemaType, SortOrdering} from '@sanity/types'\n\nimport {catchError, map} from 'rxjs/operators'\nimport {of} from 'rxjs'\nimport {useMemoObservable} from 'react-rx'\nimport {useDocumentPreviewStore} from '../store'\nimport {Previewable} from './types'\n\nexport {useDocumentPreview as unstable_useValuePreview}\n\ninterface State {\n  isLoading: boolean\n  error?: Error\n  value?: PreviewValue\n}\nconst INITIAL_STATE: State = {\n  isLoading: true,\n}\nconst PENDING_STATE: State = {\n  isLoading: false,\n}\n/**\n * @internal\n * @deprecated FOR INTERNAL USE.\n */\nfunction useDocumentPreview(props: {\n  enabled?: boolean\n  ordering?: SortOrdering\n  schemaType?: SchemaType\n  value: unknown | undefined\n}): State {\n  const {enabled = true, ordering, schemaType, value: previewValue} = props || {}\n  const {observeForPreview} = useDocumentPreviewStore()\n  return useMemoObservable<State>(\n    () => {\n      if (!enabled || !previewValue || !schemaType) return of(PENDING_STATE)\n\n      return observeForPreview(previewValue as Previewable, schemaType, {ordering}).pipe(\n        map((event) => ({isLoading: false, value: event.snapshot || undefined})),\n        catchError((error) => of({isLoading: false, error}))\n      )\n    },\n    [enabled, observeForPreview, ordering, schemaType, previewValue],\n    INITIAL_STATE\n  )\n}\n","import {UploadState} from '@sanity/types'\nimport {isRecord, isString} from '../../util'\n\nexport function _extractUploadState(value: any): UploadState | undefined {\n  return _resolveUploadValue(value?._upload)\n}\n\nfunction getStringOrUndefined(value: unknown): string | undefined {\n  return isString(value) ? value : undefined\n}\nfunction _resolveUploadValue(value: unknown): UploadState | undefined {\n  if (!isRecord(value)) return undefined\n\n  const progress = typeof value.progress === 'number' ? value.progress : 0\n  const createdAt = getStringOrUndefined(value.initiated || value.createdAt)\n  const updatedAt = getStringOrUndefined(value.updated || value.updatedAt)\n  const fileName = getStringOrUndefined((value?.file as any)?.name)\n  const fileType = getStringOrUndefined((value?.file as any)?.type)\n  const previewImage = getStringOrUndefined(value.previewImage)\n\n  if (createdAt && updatedAt && fileName && fileType) {\n    return {\n      progress,\n      createdAt,\n      updatedAt,\n      file: {name: fileName, type: fileType},\n      previewImage,\n    }\n  }\n\n  return undefined\n}\n","export const _HIDE_DELAY = 1000 * 2 // 2 seconds\n","import React, {\n  ComponentType,\n  createElement,\n  CSSProperties,\n  ReactElement,\n  useMemo,\n  useState,\n} from 'react'\nimport {RenderPreviewCallbackProps} from '../../form'\nimport {useVisibility} from '../useVisibility'\n\nimport {unstable_useValuePreview as useValuePreview} from '../useValuePreview'\nimport {PreviewProps} from '../../components'\nimport {_extractUploadState} from './_extractUploadState'\nimport {_HIDE_DELAY} from './_constants'\n\n/**\n * This component is responsible for converting renderPreview() calls into an element.\n * It:\n * - subscribes to \"prepared\" preview value as long as the element is visible on screen\n * - resolves the configured preview component for the schema type\n * - prepares \"preview\"-props and passes this to the configured preview component\n * @internal\n * */\nexport function PreviewLoader(\n  props: RenderPreviewCallbackProps & {\n    component: ComponentType<Omit<PreviewProps, 'renderDefault'>>\n  }\n): ReactElement {\n  const {layout, value, component, style: styleProp, schemaType, ...restProps} = props\n\n  const [element, setElement] = useState<HTMLDivElement | null>(null)\n  const isPTE = layout && ['inline', 'block', 'blockImage'].includes(layout)\n\n  // Subscribe to visibility\n  const visibility = useVisibility({\n    // NOTE: disable when PTE preview\n    element: isPTE ? null : element,\n    hideDelay: _HIDE_DELAY,\n  })\n\n  // Subscribe document preview value\n  const preview = useValuePreview({\n    enabled: isPTE || visibility,\n    schemaType,\n    value,\n  })\n\n  const style: CSSProperties = useMemo(\n    () => ({\n      ...styleProp,\n      minWidth: styleProp?.minWidth || 1,\n      minHeight: styleProp?.minHeight || 1,\n    }),\n    [styleProp]\n  )\n\n  const uploadState = useMemo(() => _extractUploadState(value), [value])\n\n  return (\n    <div ref={setElement} style={style}>\n      {createElement(component, {\n        ...restProps,\n        ...(preview?.value || {}),\n        media: uploadState?.previewImage ? (\n          <img alt=\"The image currently being uploaded\" src={uploadState.previewImage} />\n        ) : (\n          preview?.value?.media\n        ),\n        error: preview?.error,\n        isPlaceholder: preview?.isLoading,\n        layout,\n        schemaType,\n      })}\n    </div>\n  )\n}\n","import {SchemaType} from '@sanity/types'\nimport {PreviewPath} from '../types'\n\n/** @internal */\nexport function getPreviewPaths(preview: SchemaType['preview']): PreviewPath[] | undefined {\n  const selection = preview?.select\n\n  if (!selection) return undefined\n\n  return Object.values(selection).map((value) => String(value).split('.'))\n}\n","import {PreviewValue, SanityDocument, SchemaType} from '@sanity/types'\nimport React from 'react'\nimport {combineLatest, Observable, of} from 'rxjs'\nimport {map, startWith} from 'rxjs/operators'\nimport {getDraftId, getPublishedId} from '../../util/draftUtils'\nimport {DocumentPreviewStore} from '../documentPreviewStore'\n\nexport interface PreviewState {\n  isLoading?: boolean\n  draft?: PreviewValue | Partial<SanityDocument> | null\n  published?: PreviewValue | Partial<SanityDocument> | null\n}\n\nconst isLiveEditEnabled = (schemaType: SchemaType) => schemaType.liveEdit === true\n\n/**\n * Obtain a document's published and draft state, along with loading status.\n *\n * @internal\n */\nexport function getPreviewStateObservable(\n  documentPreviewStore: DocumentPreviewStore,\n  schemaType: SchemaType,\n  documentId: string,\n  title: React.ReactNode\n): Observable<PreviewState> {\n  const draft$ = isLiveEditEnabled(schemaType)\n    ? of({snapshot: null})\n    : documentPreviewStore.observeForPreview(\n        {_type: 'reference', _ref: getDraftId(documentId)},\n        schemaType\n      )\n\n  const published$ = documentPreviewStore.observeForPreview(\n    {_type: 'reference', _ref: getPublishedId(documentId)},\n    schemaType\n  )\n\n  return combineLatest([draft$, published$]).pipe(\n    map(([draft, published]) => ({\n      draft: draft.snapshot ? {title, ...(draft.snapshot || {})} : null,\n      isLoading: false,\n      published: published.snapshot ? {title, ...(published.snapshot || {})} : null,\n    })),\n    startWith({draft: null, isLoading: true, published: null})\n  )\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport type {PreviewValue, SanityDocument} from '@sanity/types'\nimport {assignWith} from 'lodash'\nimport React from 'react'\n\nconst getMissingDocumentFallback = (item: SanityDocument) => ({\n  title: <em>{item.title ? String(item.title) : 'Missing document'}</em>,\n  subtitle: <em>{item.title ? `Missing document ID: ${item._id}` : `Document ID: ${item._id}`}</em>,\n  media: () => <WarningOutlineIcon />,\n})\n\n/**\n * Obtain document preview values used in <SanityPreview> and <SanityDefaultPreview> components.\n * Also displays fallback values if the document cannot be found.\n *\n * @internal\n */\nexport const getPreviewValueWithFallback = ({\n  value,\n  draft,\n  published,\n}: {\n  value: SanityDocument\n  draft?: Partial<SanityDocument> | PreviewValue | null\n  published?: Partial<SanityDocument> | PreviewValue | null\n}) => {\n  const snapshot = draft || published\n\n  if (!snapshot) {\n    return getMissingDocumentFallback(value)\n  }\n\n  return assignWith({}, snapshot, value, (objValue, srcValue) => {\n    return typeof srcValue === 'undefined' ? objValue : srcValue\n  }) as PreviewValue\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport {PreviewValue} from '@sanity/types'\nimport React from 'react'\n\nexport const INCLUDE_FIELDS_QUERY = ['_id', '_rev', '_type']\nexport const INCLUDE_FIELDS = [...INCLUDE_FIELDS_QUERY, '_key']\n\nexport const AVAILABILITY_READABLE = {\n  available: true,\n  reason: 'READABLE',\n} as const\n\nexport const AVAILABILITY_PERMISSION_DENIED = {\n  available: false,\n  reason: 'PERMISSION_DENIED',\n} as const\n\nexport const AVAILABILITY_NOT_FOUND = {\n  available: false,\n  reason: 'NOT_FOUND',\n} as const\n\nexport const INVALID_PREVIEW_FALLBACK: PreviewValue = {\n  title: 'Invalid preview config',\n  subtitle: 'Check the error log in the console',\n  media: <WarningOutlineIcon />,\n}\n","import {Block, isBlock, isSpan} from '@sanity/types'\n\nexport function isPortableTextArray(blocks: unknown): blocks is Block[] {\n  return Array.isArray(blocks) && (blocks.length === 0 || blocks.some(isBlock))\n}\n\nexport function extractTextFromBlocks(blocks: Block[]): string {\n  const firstBlock = blocks.find(isBlock)\n  if (!firstBlock || !firstBlock.children) {\n    return ''\n  }\n\n  return firstBlock.children\n    .filter(isSpan)\n    .map((span) => span.text)\n    .join('')\n}\n","export function keysOf<T extends object>(value: T) {\n  return Object.keys(value) as (keyof T)[]\n}\n","import {\n  isTitledListValue,\n  PrepareViewOptions,\n  PreviewValue,\n  SchemaType,\n  TitledListValue,\n} from '@sanity/types'\nimport {debounce, flatten, get, isPlainObject, pick, uniqBy} from 'lodash'\nimport {INVALID_PREVIEW_FALLBACK} from '../constants'\nimport {PreviewableType} from '../types'\nimport {isRecord} from '../../util'\nimport {isPortableTextArray, extractTextFromBlocks} from './portableText'\nimport {keysOf} from './keysOf'\n\nconst PRESERVE_KEYS = ['_id', '_type', '_upload', '_createdAt', '_updatedAt']\nconst EMPTY: never[] = []\n\ntype SelectedValue = Record<string, unknown>\n\nexport type PrepareInvocationResult = {\n  selectedValue?: SelectedValue\n  returnValue: null | PreviewValue\n  errors: Error[]\n}\n\nconst errorCollector = (() => {\n  let errorsByType: Record<string, {error: Error; type: SchemaType; value: SelectedValue}[]> = {}\n\n  return {\n    add: (type: SchemaType, value: SelectedValue, error: Error) => {\n      if (!errorsByType[type.name]) {\n        errorsByType[type.name] = []\n      }\n      errorsByType[type.name].push({error: error, type: type, value})\n    },\n    getAll() {\n      return errorsByType\n    },\n    clear() {\n      errorsByType = {}\n    },\n  }\n})()\n\nconst reportErrors = debounce(() => {\n  /* eslint-disable no-console */\n  const errorsByType = errorCollector.getAll()\n  const uniqueErrors = flatten(\n    Object.keys(errorsByType).map((typeName) => {\n      const entries = errorsByType[typeName]\n      return uniqBy(entries, (entry) => entry.error.message)\n    })\n  )\n  const errorCount = uniqueErrors.length\n  if (errorCount === 0) {\n    return\n  }\n\n  console.groupCollapsed(\n    `%cHeads up! Got ${\n      errorCount === 1 ? 'error' : `${errorCount} errors`\n    } while preparing data for preview. Click for details.`,\n    'color: #ff7e7c'\n  )\n\n  Object.keys(errorsByType).forEach((typeName) => {\n    const entries = errorsByType[typeName]\n    const first = entries[0]\n    console.group(`Check the preview config for schema type \"${typeName}\": %o`, first.type.preview)\n    const uniqued = uniqBy(entries, (entry) => entry.error.message)\n    uniqued.forEach((entry) => {\n      if ((entry.error as any).type === 'returnValueError') {\n        const hasPrepare = typeof entry.type.preview?.prepare === 'function'\n        const {value, error} = entry\n        console.log(\n          `Encountered an invalid ${\n            hasPrepare\n              ? 'return value when calling prepare(%o)'\n              : 'value targeted by preview.select'\n          }:`,\n          value\n        )\n        console.error(error)\n      }\n      if ((entry.error as any).type === 'prepareError') {\n        const {value, error} = entry\n        console.log('Encountered an error when calling prepare(%o):', value)\n        console.error(error)\n      }\n    })\n    console.groupEnd()\n  })\n  console.groupEnd()\n  errorCollector.clear()\n  /* eslint-enable no-console */\n}, 1000)\n\nconst isRenderable =\n  (fieldName: string) =>\n  (value: unknown): Error[] => {\n    const type = typeof value\n    if (\n      value === null ||\n      type === 'undefined' ||\n      type === 'string' ||\n      type === 'number' ||\n      type === 'boolean'\n    ) {\n      return EMPTY\n    }\n    return [\n      assignType(\n        'returnValueError',\n        new Error(\n          `The \"${fieldName}\" field should be a string, number, boolean, undefined or null, instead saw ${inspect(\n            value\n          )}`\n        )\n      ),\n    ]\n  }\nconst FIELD_NAME_VALIDATORS: Record<string, (value: unknown) => Error[]> = {\n  media: () => {\n    // not sure how to validate media as it would  possibly involve executing a function and check the\n    // return value\n    return EMPTY\n  },\n  title: isRenderable('title'),\n  subtitle: isRenderable('subtitle'),\n  description: isRenderable('description'),\n  imageUrl: isRenderable('imageUrl'),\n  date: isRenderable('date'),\n}\n\nfunction inspect(val: unknown, prefixType = true): string {\n  if (isRecord(val)) {\n    const keys = Object.keys(val)\n    const ellipse = keys.length > 3 ? '...' : ''\n    const prefix = `object with keys `\n    return `${prefixType ? prefix : ''}{${keys.slice(0, 3).join(', ')}${ellipse}}`\n  }\n  if (Array.isArray(val)) {\n    const ellipse = val.length > 3 ? '...' : ''\n    const prefix = `array with `\n    return `${prefixType ? prefix : ''}[${val.map((v) => inspect(v, false))}${ellipse}]`\n  }\n  return `the ${typeof val} ${val}`\n}\n\nfunction validateFieldValue(fieldName: string, fieldValue: unknown) {\n  if (typeof fieldValue === 'undefined') {\n    return EMPTY\n  }\n  const validator = FIELD_NAME_VALIDATORS[fieldName]\n  return (validator && validator(fieldValue)) || EMPTY\n}\n\nfunction assignType(type: string, error: Error) {\n  return Object.assign(error, {type})\n}\n\nfunction validatePreparedValue(preparedValue: PreviewValue | null) {\n  if (!isPlainObject(preparedValue) || preparedValue === null) {\n    return [\n      assignType(\n        'returnValueError',\n        new Error(\n          `Invalid return value. Expected a plain object with at least a 'title' field, instead saw ${inspect(\n            preparedValue\n          )}`\n        )\n      ),\n    ]\n  }\n\n  return Object.entries(preparedValue).reduce<Error[]>((acc, [fieldName, fieldValue]) => {\n    return [...acc, ...validateFieldValue(fieldName, fieldValue)]\n  }, EMPTY)\n}\n\nfunction validateReturnedPreview(result: PrepareInvocationResult) {\n  return {\n    ...result,\n    errors: [...(result.errors || []), ...validatePreparedValue(result.returnValue)],\n  }\n}\n\nfunction defaultPrepare(value: SelectedValue) {\n  return keysOf(value).reduce((acc: SelectedValue, fieldName: keyof SelectedValue) => {\n    const val = value[fieldName]\n    return {\n      ...acc,\n      [fieldName]: isPortableTextArray(val) ? extractTextFromBlocks(val) : value[fieldName],\n    }\n  }, {})\n}\n\nexport function invokePrepare(\n  type: PreviewableType,\n  value: SelectedValue,\n  viewOptions: PrepareViewOptions = {}\n): PrepareInvocationResult {\n  const prepare = type.preview?.prepare\n  try {\n    return {\n      returnValue: prepare\n        ? (prepare(value, viewOptions) as Record<string, unknown>)\n        : defaultPrepare(value),\n      errors: EMPTY,\n    }\n  } catch (error) {\n    return {\n      returnValue: null,\n      errors: [assignType('prepareError', error)],\n    }\n  }\n}\n\nfunction withErrors(\n  result: {errors: Error[]},\n  type: SchemaType,\n  selectedValue: SelectedValue\n): PreviewValue {\n  result.errors.forEach((error) => errorCollector.add(type, selectedValue, error))\n  reportErrors()\n\n  return INVALID_PREVIEW_FALLBACK\n}\n\ninterface EnumListOptions {\n  list: TitledListValue[] | unknown[]\n}\n\nfunction hasEnumListOptions(\n  type: SchemaType\n): type is SchemaType & {options: SchemaType['options'] & EnumListOptions} {\n  const options = type.options && typeof type.options === 'object' ? type.options : false\n  if (!options || !('list' in options)) {\n    return false\n  }\n\n  const listOptions = (options as EnumListOptions).list\n  return Array.isArray(listOptions)\n}\n\nfunction getListOptions(type: SchemaType): TitledListValue[] | undefined {\n  if (!hasEnumListOptions(type)) {\n    return undefined\n  }\n\n  const listOptions = type.options.list as EnumListOptions['list']\n  return listOptions.map((option) =>\n    isTitledListValue(option) ? option : ({title: option, value: option} as TitledListValue)\n  )\n}\n\n/** @internal */\nexport function prepareForPreview(\n  rawValue: unknown,\n  type: SchemaType,\n  viewOptions: PrepareViewOptions = {}\n): PreviewValue & {_createdAt?: string; _updatedAt?: string} {\n  const hasCustomPrepare = typeof type.preview?.prepare === 'function'\n  const selection: Record<string, string> = type.preview?.select || {}\n  const targetKeys = Object.keys(selection)\n\n  const selectedValue = targetKeys.reduce<Record<string, unknown>>((acc, key) => {\n    // Find the field the value belongs to\n    const typeWithFields = 'fields' in type ? type : null\n    const targetFieldName = selection[key]\n    const valueField = typeWithFields?.fields?.find((f) => f.name === targetFieldName)\n    const listOptions = valueField && getListOptions(valueField.type)\n\n    // If the user has _not_ specified a `prepare()` function for the preview, and the\n    // field type has an `options.list`, we want to use the title of the selected item\n    // as the preview value. If, however, there _is_ a custom `prepare()`, we leave this\n    // mapping up to the user to perform should they want to. This is both to maintain\n    // backwards compatiblity, but also to allow using the raw value for prepare operations\n    if (!hasCustomPrepare && listOptions) {\n      // Find the selected option that matches the raw value\n      const selectedOption =\n        listOptions && listOptions.find((opt) => opt.value === get(rawValue, selection[key]))\n      acc[key] = selectedOption ? selectedOption.value : get(rawValue, selection[key])\n    } else {\n      acc[key] = get(rawValue, selection[key])\n    }\n\n    return acc\n  }, {})\n\n  const prepareResult = invokePrepare(type, selectedValue, viewOptions)\n  if (prepareResult.errors.length > 0) {\n    return withErrors(prepareResult, type, selectedValue)\n  }\n\n  const returnValueResult = validateReturnedPreview(invokePrepare(type, selectedValue, viewOptions))\n  return returnValueResult.errors.length > 0\n    ? withErrors(returnValueResult, type, selectedValue)\n    : {...pick(rawValue, PRESERVE_KEYS), ...prepareResult.returnValue}\n}\n","import {Observable, Subscriber} from 'rxjs'\nimport {isNonNullable} from '../../util'\n\ninterface QueueItem {\n  args: any[]\n  observer: Subscriber<any>\n  completed: boolean\n}\n\n// Takes an observable returning function and returns a debounced function that, when called\n// collects its passed arguments until wait time has passed without receiving new calls.\n// When wait period is over, calls the original function with the collected arguments\nexport function debounceCollect<Fn extends (...args: any[]) => Observable<any[]>>(\n  fn: Fn,\n  wait: number\n): Fn extends (collectedArgs: [...infer TArgs][]) => Observable<(infer TReturnValue)[]>\n  ? (...args: TArgs) => Observable<TReturnValue>\n  : never\nexport function debounceCollect(fn: any, wait: number) {\n  let timer: ReturnType<typeof setTimeout>\n  let queue: Record<number | string, QueueItem | undefined> = {}\n  let idx = 0\n  return function debounced(...args: any[]) {\n    return new Observable((obs) => {\n      clearTimeout(timer)\n      timer = setTimeout(flush, wait)\n      const queueItem: QueueItem = {\n        args: args,\n        observer: obs,\n        completed: false,\n      }\n      const id = idx++\n      queue[id] = queueItem\n      return () => {\n        // console.log('completed', queueItem.args)\n        queueItem.completed = true\n      }\n    })\n  }\n\n  function flush() {\n    const currentlyFlushingQueue = queue\n    queue = {}\n\n    const queueItemIds = Object.keys(currentlyFlushingQueue) // Todo: use debug\n      // .map(id => {\n      //   if (currentlyFlushingQueue[id].completed) {\n      //     console.log('Dropped', currentlyFlushingQueue[id].args)\n      //   }\n      //   return id\n      // })\n      .filter((id) => {\n        const queueItem = currentlyFlushingQueue[id]\n\n        return queueItem && !queueItem.completed\n      })\n\n    if (queueItemIds.length === 0) {\n      // nothing to do\n      return\n    }\n    const collectedArgs = queueItemIds\n      .map((id) => {\n        const queueItem = currentlyFlushingQueue[id]\n\n        return queueItem && queueItem.args\n      })\n      .filter(isNonNullable)\n    fn(collectedArgs).subscribe({\n      next(results: any[]) {\n        results.forEach((result, i) => {\n          const queueItem = currentlyFlushingQueue[queueItemIds[i]]\n          if (queueItem && !queueItem.completed) {\n            queueItem.observer.next(results[i])\n          }\n        })\n      },\n      complete() {\n        queueItemIds.forEach((id) => {\n          const entry = currentlyFlushingQueue[id]\n          if (entry && !entry.completed) {\n            entry.observer.complete()\n          }\n        })\n      },\n      error(err: Error) {\n        queueItemIds.forEach((id) => {\n          const entry = currentlyFlushingQueue[id]\n          if (entry && !entry.completed) {\n            entry.observer.error(err)\n          }\n        })\n      },\n    })\n  }\n}\n","/* eslint-disable max-nested-callbacks */\n\nimport type {SanityClient} from '@sanity/client'\nimport {combineLatest, defer, from, Observable, of} from 'rxjs'\nimport {distinctUntilChanged, map, mergeMap, switchMap} from 'rxjs/operators'\nimport shallowEquals from 'shallow-equals'\nimport {flatten, keyBy} from 'lodash'\nimport {getDraftId, getPublishedId, isRecord} from '../util'\nimport type {\n  AvailabilityResponse,\n  DocumentAvailability,\n  DraftsModelDocumentAvailability,\n} from './types'\nimport {debounceCollect} from './utils/debounceCollect'\nimport {\n  AVAILABILITY_NOT_FOUND,\n  AVAILABILITY_PERMISSION_DENIED,\n  AVAILABILITY_READABLE,\n} from './constants'\nimport {ObservePathsFn} from './types'\n\nconst MAX_DOCUMENT_ID_CHUNK_SIZE = 11164\n\n/**\n * Takes an array of document IDs and puts them into individual chunks.\n * Because document IDs can vary greatly in size, we want to chunk by the length of the\n * combined comma-separated ID set. We try to stay within 11164 bytes - this is about the\n * same length the Sanity client uses for max query size, and accounts for rather large\n * headers to be present - so this _should_ be safe.\n *\n * @param documentIds - Unique document IDs to chunk\n * @returns Array of document ID chunks\n */\nfunction chunkDocumentIds(documentIds: string[]): string[][] {\n  let chunk: string[] = []\n  let chunkSize = 0\n\n  const chunks: string[][] = []\n\n  for (const documentId of documentIds) {\n    // Reached the max length? start a new chunk\n    if (chunkSize + documentId.length + 1 >= MAX_DOCUMENT_ID_CHUNK_SIZE) {\n      chunks.push(chunk)\n      chunk = []\n      chunkSize = 0\n    }\n\n    chunkSize += documentId.length + 1 // +1 is to account for a comma between IDs\n    chunk.push(documentId)\n  }\n\n  if (!chunks.includes(chunk)) {\n    chunks.push(chunk)\n  }\n\n  return chunks\n}\n\nexport function create_preview_availability(\n  versionedClient: SanityClient,\n  observePaths: ObservePathsFn\n): {\n  observeDocumentPairAvailability(id: string): Observable<DraftsModelDocumentAvailability>\n} {\n  /**\n   * Returns an observable of metadata for a given drafts model document\n   */\n  function observeDocumentPairAvailability(\n    id: string\n  ): Observable<DraftsModelDocumentAvailability> {\n    const draftId = getDraftId(id)\n    const publishedId = getPublishedId(id)\n    return combineLatest([\n      observeDocumentAvailability(draftId),\n      observeDocumentAvailability(publishedId),\n    ]).pipe(\n      distinctUntilChanged(shallowEquals),\n      map(([draftReadability, publishedReadability]) => {\n        return {\n          draft: draftReadability,\n          published: publishedReadability,\n        }\n      })\n    )\n  }\n\n  /**\n   * Observable of metadata for the document with the given id\n   * If we can't read a document it is either because it's not readable or because it doesn't exist\n   *\n   * @internal\n   */\n  function observeDocumentAvailability(id: string): Observable<DocumentAvailability> {\n    // check for existence\n    return observePaths({_ref: id}, [['_rev']]).pipe(\n      map((res) => isRecord(res) && Boolean('_rev' in res && res?._rev)),\n      distinctUntilChanged(),\n      switchMap((hasRev) => {\n        return hasRev\n          ? // short circuit: if we can read the _rev field we know it both exists and is readable\n            of(AVAILABILITY_READABLE)\n          : // we can't read the _rev field for two possible reasons: 1) the document isn't readable or 2) the document doesn't exist\n            fetchDocumentReadability(id)\n      })\n    )\n  }\n\n  const fetchDocumentReadability = debounceCollect(function fetchDocumentReadability(\n    args: string[][]\n  ): Observable<DocumentAvailability[]> {\n    const uniqueIds = [...new Set(flatten(args))]\n    return from(chunkDocumentIds(uniqueIds)).pipe(\n      mergeMap(fetchDocumentReadabilityChunked, 10),\n      map((res) => args.map(([id]) => res[uniqueIds.indexOf(id)]))\n    )\n  },\n  1)\n\n  function fetchDocumentReadabilityChunked(ids: string[]): Observable<DocumentAvailability[]> {\n    return defer(() => {\n      const requestOptions = {\n        uri: versionedClient.getDataUrl('doc', ids.join(',')),\n        json: true,\n        query: {excludeContent: 'true'},\n        tag: 'preview.documents-availability',\n      }\n      return versionedClient.observable.request<AvailabilityResponse>(requestOptions).pipe(\n        map((response) => {\n          const omitted = keyBy(response.omitted || [], (entry) => entry.id)\n          return ids.map((id) => {\n            const omittedEntry = omitted[id]\n            if (!omittedEntry) {\n              // it's not omitted, so it exists and is readable\n              return AVAILABILITY_READABLE\n            }\n            if (omittedEntry.reason === 'existence') {\n              return AVAILABILITY_NOT_FOUND\n            }\n            if (omittedEntry.reason === 'permission') {\n              // it's not omitted, so it exists and is readable\n              return AVAILABILITY_PERMISSION_DENIED\n            }\n            throw new Error(`Unexpected reason for omission: \"${omittedEntry.reason}\"`)\n          })\n        })\n      )\n    })\n  }\n\n  return {observeDocumentPairAvailability}\n}\n","import {Observable, of as observableOf, from as observableFrom, isObservable} from 'rxjs'\nimport {map, mergeAll, combineAll, switchMap, scan} from 'rxjs/operators'\nimport {keysOf} from './keysOf'\n\nfunction setKey(source: Record<string, unknown>, key: any, value: unknown) {\n  return {\n    ...source,\n    [key]: value,\n  }\n}\n\ntype Props<K extends keyof any, T> = {\n  [P in K]: T | Observable<T>\n}\n\nexport function props<K extends keyof any, T>(options: {wait?: boolean} = {}) {\n  return (source: Observable<Props<K, T>>) => {\n    return new Observable<Props<K, T>>((observer) => source.subscribe(observer)).pipe(\n      switchMap((object) => {\n        const keyObservables = keysOf(object).map((key) => {\n          const value = object[key]\n          return isObservable(value)\n            ? observableFrom(value).pipe(map((val) => [key, val]))\n            : observableOf([key, value])\n        })\n\n        return options.wait\n          ? observableFrom(keyObservables).pipe(\n              combineAll(),\n              map((pairs) => pairs.reduce((acc, [key, value]) => setKey(acc, key, value), {}))\n            )\n          : observableFrom(keyObservables).pipe(\n              mergeAll(),\n              scan((acc, [key, value]) => setKey(acc, key, value), {})\n            )\n      })\n    )\n  }\n}\n","import {uniq} from 'lodash'\nimport {Observable, of as observableOf} from 'rxjs'\nimport {switchMap} from 'rxjs/operators'\nimport {isRecord} from '../util'\nimport {ApiConfig, FieldName, PreviewPath, Previewable} from './types'\nimport {props} from './utils/props'\n\nfunction createEmpty(fields: FieldName[]) {\n  return fields.reduce((result: Record<string, undefined>, field) => {\n    result[field] = undefined\n    return result\n  }, {})\n}\n\nfunction resolveMissingHeads(value: Record<string, unknown>, paths: string[][]) {\n  return paths.filter((path) => !(path[0] in value))\n}\n\nfunction isReferenceLike(value: Previewable): value is {_ref: string} {\n  return '_ref' in value\n}\n\nfunction getDocumentId(value: Previewable) {\n  if (isReferenceLike(value)) {\n    return value._ref\n  }\n  return '_id' in value ? value._id : undefined\n}\n\ntype ObserveFieldsFn = (\n  id: string,\n  fields: FieldName[],\n  apiConfig?: ApiConfig\n) => Observable<Record<string, unknown> | null>\n\nfunction observePaths(\n  value: Previewable,\n  paths: PreviewPath[],\n  observeFields: ObserveFieldsFn,\n  apiConfig?: ApiConfig\n): Observable<Record<string, unknown> | null> {\n  if (!value || typeof value !== 'object') {\n    // Reached a leaf. Return as is\n    return observableOf(value as null) // @todo\n  }\n\n  const id = getDocumentId(value)\n\n  const currentValue: Record<string, unknown> = id ? {...value, _id: id} : {...value}\n\n  if (currentValue._type === 'reference') {\n    delete currentValue._type\n    delete currentValue._ref\n    delete currentValue._weak\n    delete currentValue._dataset\n    delete currentValue._projectId\n    delete currentValue._strengthenOnPublish\n  }\n\n  const pathsWithMissingHeads = resolveMissingHeads(currentValue, paths)\n\n  if (id && pathsWithMissingHeads.length > 0) {\n    // Reached a node that is either a document (with _id), or a reference (with _ref) that\n    // needs to be \"materialized\"\n\n    const nextHeads: string[] = uniq(pathsWithMissingHeads.map((path: string[]) => path[0]))\n\n    const dataset = isReferenceLike(value) ? value._dataset : undefined\n    const projectId = isReferenceLike(value) ? value._projectId : undefined\n\n    const refApiConfig =\n      // if it's a cross dataset reference we want to use it's `_projectId` + `_dataset`\n      // attributes as api config\n      dataset && projectId ? {projectId: projectId, dataset: dataset} : apiConfig\n\n    return observeFields(id, nextHeads, refApiConfig).pipe(\n      switchMap((snapshot) => {\n        if (snapshot === null) {\n          return observableOf(null)\n        }\n\n        return observePaths(\n          {\n            ...createEmpty(nextHeads),\n            ...(isReferenceLike(value) ? {...value, ...refApiConfig} : value),\n            ...snapshot,\n          } as Previewable,\n          paths,\n          observeFields,\n          refApiConfig\n        )\n      })\n    )\n  }\n\n  // We have all the fields needed already present on value\n  const leads: Record<string, string[][]> = {}\n  paths.forEach((path) => {\n    const [head, ...tail] = path\n    if (!leads[head]) {\n      leads[head] = []\n    }\n    leads[head].push(tail)\n  })\n\n  const next = Object.keys(leads).reduce((res: Record<string, unknown>, head) => {\n    const tails = leads[head].filter((tail) => tail.length > 0)\n    if (tails.length === 0) {\n      res[head] = isRecord(value) ? (value as Record<string, unknown>)[head] : undefined\n    } else {\n      res[head] = observePaths((value as any)[head], tails, observeFields, apiConfig)\n    }\n    return res\n  }, currentValue)\n\n  return observableOf(next).pipe(props({wait: true}))\n}\n\n// Normalizes path arguments so it supports both dot-paths and array paths, e.g.\n// - ['propA.propB', 'propA.propC']\n// - [['propA', 'propB'], ['propA', 'propC']]\nfunction normalizePaths(path: (FieldName | PreviewPath)[]): PreviewPath[] {\n  return path.map((segment: FieldName | PreviewPath) =>\n    typeof segment === 'string' ? segment.split('.') : segment\n  )\n}\n\nexport function createPathObserver(context: {observeFields: ObserveFieldsFn}) {\n  const {observeFields} = context\n\n  return {\n    observePaths(\n      value: Previewable,\n      paths: (FieldName | PreviewPath)[],\n      apiConfig?: ApiConfig\n    ): Observable<Record<string, unknown> | null> {\n      return observePaths(value, normalizePaths(paths), observeFields, apiConfig)\n    },\n  }\n}\n","import {Observable, of as observableOf} from 'rxjs'\nimport {map, switchMap} from 'rxjs/operators'\nimport {\n  isCrossDatasetReference,\n  isCrossDatasetReferenceSchemaType,\n  isReferenceSchemaType,\n  PrepareViewOptions,\n} from '@sanity/types'\nimport {isPlainObject} from 'lodash'\nimport {invokePrepare, prepareForPreview} from './utils/prepareForPreview'\nimport type {ApiConfig, PreviewPath, PreparedSnapshot} from './types'\nimport {getPreviewPaths} from './utils/getPreviewPaths'\nimport {Previewable, PreviewableType} from './types'\n\nfunction isRecord(value: unknown): value is Record<string, unknown> {\n  return isPlainObject(value)\n}\n\nfunction isReference(value: unknown): value is {_ref: string} {\n  return isPlainObject(value)\n}\n\n// Takes a value and its type and prepares a snapshot for it that can be passed to a preview component\nexport function createPreviewObserver(context: {\n  observeDocumentTypeFromId: (id: string, apiConfig?: ApiConfig) => Observable<string | undefined>\n  observePaths: (value: Previewable, paths: PreviewPath[], apiConfig?: ApiConfig) => any\n}): (\n  value: Previewable,\n  type: PreviewableType,\n  viewOptions?: PrepareViewOptions,\n  apiConfig?: ApiConfig\n) => Observable<PreparedSnapshot> {\n  const {observeDocumentTypeFromId, observePaths} = context\n\n  return function observeForPreview(\n    value: Previewable,\n    type: PreviewableType,\n    viewOptions?: PrepareViewOptions,\n    apiConfig?: ApiConfig\n  ): Observable<PreparedSnapshot> {\n    if (isCrossDatasetReferenceSchemaType(type)) {\n      // if the value is of type crossDatasetReference, but has no _ref property, we cannot prepare any value for the preview\n      // and the most appropriate thing to do is to return `undefined` for snapshot\n      if (!isCrossDatasetReference(value)) {\n        return observableOf({snapshot: undefined})\n      }\n\n      const refApiConfig = {projectId: value._projectId, dataset: value._dataset}\n\n      return observeDocumentTypeFromId(value._ref, refApiConfig).pipe(\n        switchMap((typeName) => {\n          if (typeName) {\n            const refType = type.to.find((toType) => toType.type === typeName)\n            return observeForPreview(value, refType as any, {}, refApiConfig)\n          }\n          return observableOf({snapshot: undefined})\n        })\n      )\n    }\n    if (isReferenceSchemaType(type)) {\n      // if the value is of type reference, but has no _ref property, we cannot prepare any value for the preview\n      // and the most appropriate thing to do is to return `undefined` for snapshot\n      if (!isReference(value)) {\n        return observableOf({snapshot: undefined})\n      }\n      // Previewing references actually means getting the referenced value,\n      // and preview using the preview config of its type\n      // todo: We need a way of knowing the type of the referenced value by looking at the reference record alone\n      return observeDocumentTypeFromId(value._ref).pipe(\n        switchMap((typeName) => {\n          if (typeName) {\n            const refType = type.to.find((toType) => toType.name === typeName)\n            return observeForPreview(value, refType as any)\n          }\n          // todo: in case we can't read the document type, we can figure out the reason why e.g. whether it's because\n          //  the document doesn't exist or it's not readable due to lack of permission.\n          //  We can use the \"observeDocumentAvailability\" function\n          //  for this, but currently not sure if needed\n          return observableOf({snapshot: undefined})\n        })\n      )\n    }\n    const paths = getPreviewPaths(type.preview)\n    if (paths) {\n      return observePaths(value, paths, apiConfig).pipe(\n        map((snapshot) => ({\n          type: type,\n          snapshot: snapshot && prepareForPreview(snapshot, type as any, viewOptions),\n        }))\n      )\n    }\n\n    // Note: this case is typically rare (or non-existent) and occurs only if\n    // the SchemaType doesn't have a `select` field. The schema compiler\n    // provides a default `preview` implementation for `object`s, `image`s,\n    // `file`s, and `document`s\n    return observableOf({\n      type,\n      snapshot:\n        value && isRecord(value) ? invokePrepare(type, value, viewOptions).returnValue : null,\n    })\n  }\n}\n","import {SanityClient} from '@sanity/client'\nimport {combineLatest, Observable, of} from 'rxjs'\nimport {map, switchMap} from 'rxjs/operators'\nimport {SanityDocument} from '@sanity/types'\nimport {getIdPair, isRecord} from '../util'\nimport {DraftsModelDocument, ObservePathsFn, PreviewPath, Previewable} from './types'\nimport {create_preview_availability} from './availability'\n\nexport function create_preview_documentPair(\n  versionedClient: SanityClient,\n  observePaths: ObservePathsFn\n): {\n  observePathsDocumentPair: <T extends SanityDocument = SanityDocument>(\n    id: string,\n    paths: PreviewPath[]\n  ) => Observable<DraftsModelDocument<T>>\n} {\n  const {observeDocumentPairAvailability} = create_preview_availability(\n    versionedClient,\n    observePaths\n  )\n\n  const ALWAYS_INCLUDED_SNAPSHOT_PATHS: PreviewPath[] = [['_updatedAt'], ['_createdAt'], ['_type']]\n\n  return {observePathsDocumentPair}\n\n  function observePathsDocumentPair<T extends SanityDocument = SanityDocument>(\n    id: string,\n    paths: PreviewPath[]\n  ): Observable<DraftsModelDocument<T>> {\n    const {draftId, publishedId} = getIdPair(id)\n\n    return observeDocumentPairAvailability(draftId).pipe(\n      switchMap((availability) => {\n        if (!availability.draft.available && !availability.published.available) {\n          // short circuit, neither draft nor published is available so no point in trying to get a snapshot\n          return of({\n            id: publishedId,\n            type: null,\n            draft: {\n              availability: availability.draft,\n              snapshot: undefined,\n            },\n            published: {\n              availability: availability.published,\n              snapshot: undefined,\n            },\n          })\n        }\n\n        const snapshotPaths = [...paths, ...ALWAYS_INCLUDED_SNAPSHOT_PATHS]\n\n        return combineLatest([\n          observePaths({_type: 'reference', _ref: draftId}, snapshotPaths),\n          observePaths({_type: 'reference', _ref: publishedId}, snapshotPaths),\n        ]).pipe(\n          map(([draftSnapshot, publishedSnapshot]) => {\n            // note: assume type is always the same\n            const type =\n              (isRecord(draftSnapshot) && '_type' in draftSnapshot && draftSnapshot._type) ||\n              (isRecord(publishedSnapshot) &&\n                '_type' in publishedSnapshot &&\n                publishedSnapshot._type) ||\n              null\n\n            return {\n              id: publishedId,\n              type: typeof type === 'string' ? type : null,\n              draft: {\n                availability: availability.draft,\n                snapshot: draftSnapshot as T,\n              },\n              published: {\n                availability: availability.published,\n                snapshot: publishedSnapshot as T,\n              },\n            }\n          })\n        )\n      })\n    )\n  }\n}\n","import {identity, sortBy, values} from 'lodash'\nimport {FieldName, Id, Selection} from '../types'\nimport {INCLUDE_FIELDS_QUERY} from '../constants'\nimport {escapeField, fieldNeedsEscape} from '../../util'\n\ntype CombinedSelection = {\n  ids: Id[]\n  fields: FieldName[]\n  map: number[]\n}\n\ntype Doc = {\n  _id: string\n}\n\ntype Result = Doc[]\n\nexport function combineSelections(selections: Selection[]): CombinedSelection[] {\n  return values(\n    selections.reduce((output: {[key: string]: any}, [id, fields], index) => {\n      const key = sortBy(fields.join(','), identity).join('.')\n      if (!output[key]) {\n        output[key] = {fields: fields, ids: [], map: []}\n      }\n      const idx = output[key].ids.length\n      output[key].ids[idx] = id\n      output[key].map[idx] = index\n      return output\n    }, {})\n  )\n}\n\nfunction stringifyId(id: string) {\n  return JSON.stringify(id)\n}\n\nconst maybeEscape = (fieldName: string) =>\n  fieldNeedsEscape(fieldName) ? `\"${fieldName}\": @${escapeField(fieldName)}` : fieldName\n\nfunction toSubQuery({ids, fields}: {ids: string[]; fields: string[]}) {\n  const allFields = [...INCLUDE_FIELDS_QUERY, ...fields]\n  return `*[_id in [${ids.map(stringifyId).join(',')}]][0...${ids.length}]{${allFields\n    .map(maybeEscape)\n    .join(',')}}`\n}\n\nexport function toQuery(combinedSelections: CombinedSelection[]): string {\n  return `[${combinedSelections.map(toSubQuery).join(',')}][0...${combinedSelections.length}]`\n}\n\nexport function reassemble(\n  queryResult: Result[],\n  combinedSelections: CombinedSelection[]\n): (Doc | null)[] {\n  return queryResult.reduce((reprojected: (Doc | null)[], subResult, index) => {\n    const map = combinedSelections[index].map\n    map.forEach((resultIdx, i) => {\n      const id = combinedSelections[index].ids[i]\n      const found = subResult.find((doc) => doc._id === id)\n      reprojected[resultIdx] = found || null\n    })\n    return reprojected\n  }, [])\n}\n","export function hasEqualFields(fields: string[]) {\n  return (object: Record<string, any> | null, otherObject: Record<string, any> | null) => {\n    if (object === otherObject) {\n      return true\n    }\n    if (!object || !otherObject) {\n      return false\n    }\n    if (typeof object !== 'object' || typeof otherObject !== 'object') {\n      return false\n    }\n    return fields.every((field) => object[field] === otherObject[field])\n  }\n}\n","const id = <T>(value: T): T => value\n\ntype ItemSelector<T> = (element: T) => any\n\n// Takes an array and checks if each item is unique,\n// optionally by specifying an itemSelector function that will be called with\n// each item, returning the value to compare for uniqueness\nexport function isUniqueBy<T>(array: Array<T>, itemSelector: ItemSelector<T> = id): boolean {\n  let prevItem\n  let currItem\n  for (let i = 0; i < array.length; i++) {\n    if (i === 0) {\n      prevItem = itemSelector(array[i])\n      continue\n    }\n    currItem = itemSelector(array[i])\n    if (prevItem !== currItem) {\n      return false\n    }\n    prevItem = currItem\n  }\n  return true\n}\n","import {\n  combineLatest,\n  concat,\n  defer,\n  EMPTY,\n  from,\n  fromEvent,\n  merge,\n  Observable,\n  of as observableOf,\n  timer,\n} from 'rxjs'\nimport {\n  distinctUntilChanged,\n  filter,\n  map,\n  mergeMap,\n  publishReplay,\n  refCount,\n  share,\n  startWith,\n  switchMap,\n  tap,\n} from 'rxjs/operators'\nimport {difference, flatten, memoize} from 'lodash'\nimport {SanityClient} from '@sanity/client'\nimport {debounceCollect} from './utils/debounceCollect'\nimport {combineSelections, reassemble, toQuery} from './utils/optimizeQuery'\nimport {ApiConfig, FieldName, Id, ObservePathsFn, PreviewPath, Selection} from './types'\nimport {INCLUDE_FIELDS} from './constants'\nimport {hasEqualFields} from './utils/hasEqualFields'\nimport {isUniqueBy} from './utils/isUniqueBy'\n\ntype CachedFieldObserver = {\n  id: Id\n  fields: FieldName[]\n  changes$: Observable<any>\n}\n\ntype Cache = {\n  [id: string]: CachedFieldObserver[]\n}\n\nexport function create_preview_observeFields(context: {\n  observePaths: ObservePathsFn\n  versionedClient: SanityClient\n}) {\n  const {observePaths, versionedClient} = context\n\n  let _globalListener: any\n\n  const getGlobalEvents = () => {\n    if (!_globalListener) {\n      const allEvents$ = from(\n        versionedClient.listen(\n          '*[!(_id in path(\"_.**\"))]',\n          {},\n          {\n            events: ['welcome', 'mutation'],\n            includeResult: false,\n            visibility: 'query',\n            tag: 'preview.global',\n          }\n        )\n      ).pipe(share())\n\n      // This is a stream of welcome events from the server, each telling us that we have established listener connection\n      // We map these to snapshot fetch/sync. It is good to wait for the first welcome event before fetching any snapshots as, we may miss\n      // events that happens in the time period after initial fetch and before the listener is established.\n      const welcome$ = allEvents$.pipe(\n        filter((event: any) => event.type === 'welcome'),\n        publishReplay(1),\n        refCount()\n      )\n\n      // This will keep the listener active forever and in turn reduce the number of initial fetches\n      // as less 'welcome' events will be emitted.\n      // @todo: see if we can delay unsubscribing or connect with some globally defined shared listener\n      welcome$.subscribe()\n\n      const mutations$ = allEvents$.pipe(filter((event: any) => event.type === 'mutation'))\n\n      _globalListener = {\n        welcome$,\n        mutations$,\n      }\n    }\n\n    return _globalListener\n  }\n\n  function listen(id: Id) {\n    const globalEvents = getGlobalEvents()\n    return merge(\n      globalEvents.welcome$,\n      globalEvents.mutations$.pipe(filter((event: any) => event.documentId === id))\n    )\n  }\n\n  function fetchAllDocumentPathsWith(client: SanityClient) {\n    return function fetchAllDocumentPath(selections: Selection[]) {\n      const combinedSelections = combineSelections(selections)\n      return client.observable\n        .fetch(toQuery(combinedSelections), {}, {tag: 'preview.document-paths'} as any)\n        .pipe(map((result: any) => reassemble(result, combinedSelections)))\n    }\n  }\n\n  const fetchDocumentPathsFast = debounceCollect(fetchAllDocumentPathsWith(versionedClient), 100)\n  const fetchDocumentPathsSlow = debounceCollect(fetchAllDocumentPathsWith(versionedClient), 1000)\n\n  function currentDatasetListenFields(id: Id, fields: PreviewPath[]) {\n    return listen(id).pipe(\n      switchMap((event: any) => {\n        if (event.type === 'welcome' || event.visibility === 'query') {\n          return fetchDocumentPathsFast(id, fields as any).pipe(\n            mergeMap((result) => {\n              return concat(\n                observableOf(result),\n                result === undefined // hack: if we get undefined as result here it can be because the document has\n                  ? // just been created and is not yet indexed. We therefore need to wait a bit\n                    // and then re-fetch.\n                    fetchDocumentPathsSlow(id, fields as any)\n                  : []\n              )\n            })\n          )\n        }\n        return fetchDocumentPathsSlow(id, fields as any)\n      })\n    )\n  }\n\n  // keep for debugging purposes for now\n  // function fetchDocumentPaths(id, selection) {\n  //   return client.observable.fetch(`*[_id==$id]{_id,_type,${selection.join(',')}}`, {id})\n  //     .map(result => result[0])\n  // }\n\n  const CACHE: Cache = {} // todo: use a LRU cache instead (e.g. hashlru or quick-lru)\n\n  const getBatchFetcherForDataset = memoize(\n    function getBatchFetcherForDataset(apiConfig: ApiConfig) {\n      const client = versionedClient.withConfig(apiConfig)\n      const fetchAll = fetchAllDocumentPathsWith(client)\n      return debounceCollect(fetchAll, 10)\n    },\n    (apiConfig) => apiConfig.dataset + apiConfig.projectId\n  )\n\n  const CROSS_DATASET_PREVIEW_POLL_INTERVAL = 10000\n  // We want to poll for changes in the other dataset, but only when window/tab is visible\n  // This sets up a shared stream that emits an event every `POLL_INTERVAL` milliseconds as long as the\n  // document is visible. It starts emitting immediately (if the page is visible)\n  const visiblePoll$ = fromEvent(document, 'visibilitychange').pipe(\n    startWith(0),\n    map(() => document.visibilityState === 'visible'),\n    switchMap((visible) => (visible ? timer(0, CROSS_DATASET_PREVIEW_POLL_INTERVAL) : EMPTY)),\n    share()\n  )\n\n  function crossDatasetListenFields(id: Id, fields: PreviewPath[], apiConfig: ApiConfig) {\n    return visiblePoll$.pipe(startWith(0)).pipe(\n      switchMap(() => {\n        const batchFetcher = getBatchFetcherForDataset(apiConfig)\n        return batchFetcher(id, fields as any)\n      })\n    )\n  }\n\n  function createCachedFieldObserver<T>(\n    id: any,\n    fields: any,\n    apiConfig: ApiConfig\n  ): CachedFieldObserver {\n    let latest: T | null = null\n    const changes$ = merge<T | null>(\n      defer(() => (latest === null ? EMPTY : observableOf(latest))),\n      (apiConfig\n        ? (crossDatasetListenFields(id, fields, apiConfig) as any)\n        : currentDatasetListenFields(id, fields)) as Observable<T>\n    ).pipe(\n      tap((v: T | null) => (latest = v)),\n      publishReplay(1),\n      refCount()\n    )\n\n    return {id, fields, changes$}\n  }\n\n  function cachedObserveFields(id: Id, fields: FieldName[], apiConfig?: ApiConfig) {\n    const cacheKey = apiConfig\n      ? `${apiConfig.projectId}:${apiConfig.dataset}:${id}`\n      : `$current$-${id}`\n\n    if (!(cacheKey in CACHE)) {\n      CACHE[cacheKey] = []\n    }\n\n    const existingObservers = CACHE[cacheKey]\n    const missingFields = difference(\n      fields,\n      flatten(existingObservers.map((cachedFieldObserver) => cachedFieldObserver.fields))\n    )\n\n    if (missingFields.length > 0) {\n      existingObservers.push(createCachedFieldObserver(id, fields, apiConfig as any))\n    }\n\n    const cachedFieldObservers = existingObservers\n      .filter((observer) => observer.fields.some((fieldName) => fields.includes(fieldName)))\n      .map((cached) => cached.changes$)\n\n    return combineLatest(cachedFieldObservers).pipe(\n      // in the event that a document gets deleted, the cached values will be updated to store `undefined`\n      // if this happens, we should not pick any fields from it, but rather just return null\n      map((snapshots) => snapshots.filter(Boolean)), // make sure all snapshots agree on same revision\n      filter((snapshots) => isUniqueBy(snapshots, (snapshot) => snapshot._rev)), // pass on value with the requested fields (or null if value is deleted)\n      map((snapshots) => (snapshots.length === 0 ? null : pickFrom(snapshots, fields))), // emit values only if changed\n      distinctUntilChanged(hasEqualFields(fields))\n    )\n  }\n\n  // API\n  return {observeFields: cachedObserveFields}\n\n  function pickFrom(objects: Record<string, any>[], fields: string[]) {\n    return [...INCLUDE_FIELDS, ...fields].reduce((result, fieldName) => {\n      const value = getFirstFieldValue(objects, fieldName)\n      if (value !== undefined) {\n        ;(result as any)[fieldName] = value\n      }\n      return result\n    }, {})\n  }\n\n  function getFirstFieldValue(objects: Record<string, any>[], fieldName: string) {\n    let value\n    objects.some((object) => {\n      if (fieldName in object) {\n        value = object[fieldName]\n        return true\n      }\n      return false\n    })\n    return value\n  }\n}\n","import {Observable} from 'rxjs'\nimport {distinctUntilChanged, map} from 'rxjs/operators'\nimport {SanityClient} from '@sanity/client'\nimport {PrepareViewOptions, SanityDocument} from '@sanity/types'\nimport {isRecord} from '../util'\nimport {create_preview_availability} from './availability'\nimport {createPathObserver} from './createPathObserver'\nimport {createPreviewObserver} from './createPreviewObserver'\nimport {create_preview_documentPair} from './documentPair'\nimport {create_preview_observeFields} from './observeFields'\nimport {\n  ApiConfig,\n  DraftsModelDocument,\n  DraftsModelDocumentAvailability,\n  ObservePathsFn,\n  PreparedSnapshot,\n  Previewable,\n  PreviewableType,\n  PreviewPath,\n} from './types'\n\n/** @beta */\nexport type ObserveForPreviewFn = (\n  value: Previewable,\n  type: PreviewableType,\n  viewOptions?: PrepareViewOptions,\n  apiConfig?: ApiConfig\n) => Observable<PreparedSnapshot>\n\n/** @beta */\nexport interface DocumentPreviewStore {\n  observePaths: ObservePathsFn\n  observeForPreview: ObserveForPreviewFn\n  observeDocumentTypeFromId: (id: string, apiConfig?: ApiConfig) => Observable<string | undefined>\n\n  /**\n   * @beta\n   */\n  unstable_observeDocumentPairAvailability: (\n    id: string\n  ) => Observable<DraftsModelDocumentAvailability>\n\n  unstable_observePathsDocumentPair: <T extends SanityDocument = SanityDocument>(\n    id: string,\n    paths: PreviewPath[]\n  ) => Observable<DraftsModelDocument<T>>\n}\n\n/** @internal */\nexport interface DocumentPreviewStoreOptions {\n  client: SanityClient\n}\n\n/** @internal */\nexport function createDocumentPreviewStore({\n  client,\n}: DocumentPreviewStoreOptions): DocumentPreviewStore {\n  const versionedClient = client.withConfig({apiVersion: '1'})\n\n  // NOTE: this is workaroudn for circumventing a circular dependency between `observePaths` and\n  // `observeFields`.\n  // eslint-disable-next-line camelcase\n  const __proxy_observePaths: ObservePathsFn = (value, paths, apiConfig) => {\n    return observePaths(value, paths, apiConfig)\n  }\n\n  const {observeFields} = create_preview_observeFields({\n    observePaths: __proxy_observePaths,\n    versionedClient,\n  })\n\n  const {observePaths} = createPathObserver({observeFields})\n\n  function observeDocumentTypeFromId(\n    id: string,\n    apiConfig?: ApiConfig\n  ): Observable<string | undefined> {\n    return observePaths({_type: 'reference', _ref: id}, ['_type'], apiConfig).pipe(\n      map((res) => (isRecord(res) && typeof res._type === 'string' ? res._type : undefined)),\n      distinctUntilChanged()\n    )\n  }\n\n  // const {createPreviewObserver} = create_preview_createPreviewObserver(observeDocumentTypeFromId)\n  const observeForPreview = createPreviewObserver({observeDocumentTypeFromId, observePaths})\n  const {observeDocumentPairAvailability} = create_preview_availability(\n    versionedClient,\n    observePaths\n  )\n  const {observePathsDocumentPair} = create_preview_documentPair(versionedClient, observePaths)\n\n  // @todo: explain why the API is like this now, and that it should not be like this in the future!\n  return {\n    observePaths,\n    observeForPreview,\n    observeDocumentTypeFromId,\n\n    // eslint-disable-next-line camelcase\n    unstable_observeDocumentPairAvailability: observeDocumentPairAvailability,\n    unstable_observePathsDocumentPair: observePathsDocumentPair,\n  }\n}\n","import {ObjectSchemaType, Schema, SchemaType} from '@sanity/types'\nimport {isNonNullable} from '../../util/isNonNullable'\n\nconst isDocumentType = (type: SchemaType): type is ObjectSchemaType =>\n  Boolean(type.type && type.type.name === 'document')\n\nconst isSanityType = (type: SchemaType): boolean => type.name.startsWith('sanity.')\n\nexport const getSearchableTypes = (schema: Schema): ObjectSchemaType[] =>\n  schema\n    .getTypeNames()\n    .map((typeName) => schema.get(typeName))\n    .filter(isNonNullable)\n    .filter((schemaType) => isDocumentType(schemaType))\n    .filter((type) => !isSanityType(type)) as ObjectSchemaType[]\n","import {compact, intersection, keyBy, partition, toLower, union, uniq, words} from 'lodash'\nimport {SearchHit, WeightedHit, SearchSpec} from './types'\n\ntype SearchScore = [number, string]\n\n/**\n * Takes a set of terms and a value and returns a [score, story] pair where score is a value between 0, 1 and story is the explanation.\n *\n * @internal\n */\nexport const calculateScore = (searchTerms: string[], value: string): SearchScore => {\n  // Separate search terms by phrases (wrapped with quotes) and words.\n  const {phrases: uniqueSearchPhrases, words: uniqueSearchWords} =\n    partitionAndSanitizeSearchTerms(searchTerms)\n\n  // Calculate an aggregated score of both phrase and word matches.\n  const [phraseScore, phraseWhy] = calculatePhraseScore(uniqueSearchPhrases, value)\n  const [wordScore, wordWhy] = calculateWordScore(uniqueSearchWords, value)\n  return [phraseScore + wordScore, [wordWhy, phraseWhy].join(', ')]\n}\n\nconst stringify = (value: unknown): string =>\n  typeof value === 'string' ? value : JSON.stringify(value)\n\n/**\n * @internal\n */\nexport function applyWeights(\n  searchSpec: SearchSpec[],\n  hits: SearchHit[],\n  terms: string[] = []\n): WeightedHit[] {\n  const specByType = keyBy(searchSpec, (spec) => spec.typeName)\n  return hits.map((hit, index) => {\n    const typeSpec = specByType[hit._type]\n    const stories = (typeSpec.paths || [])?.map((pathSpec, idx) => {\n      const value = stringify(hit[`w${idx}`])\n      if (!value) {\n        return {path: pathSpec.path, score: 0, why: 'No match'}\n      }\n      const [score, why] = calculateScore(terms, value)\n      return {\n        path: pathSpec.path,\n        score: score * pathSpec.weight,\n        why: `${why} (*${pathSpec.weight})`,\n      }\n    })\n\n    const totalScore = stories.reduce((acc, rank) => acc + rank.score, 0)\n\n    return {hit, resultIndex: hits.length - index, score: totalScore, stories: stories}\n  })\n}\n/**\n * For phrases: score on the total number of matching characters.\n * E.g. given the phrases [\"the fox\", \"of london\"] for the target value \"the wily fox of london\"\n *\n * - \"the fox\" isn't included in the target value (score: 0)\n * - \"of london\" is included in the target value, and 9 out of 22 characters match (score: 9/22 = ~0.408)\n * - non-exact matches have their score divided in half (final score: ~0.204)\n *\n * @internal\n */\nexport function calculatePhraseScore(uniqueSearchPhrases: string[], value: string): SearchScore {\n  const sanitizedValue = value.toLowerCase().trim()\n\n  let fieldScore = 0\n  let matchCount = 0\n  uniqueSearchPhrases.forEach((term) => {\n    if (sanitizedValue.includes(term)) {\n      fieldScore += term.length / sanitizedValue.length\n      matchCount += term.length\n    }\n  })\n\n  return fieldScore === 1\n    ? [1, '[Phrase] Exact match']\n    : [fieldScore / 2, `[Phrase] Matched ${matchCount} of ${sanitizedValue.length} characters`]\n}\n\n/**\n * For words: score on the total number of matching words.\n * E.g. given the words [\"the\", \"fox\", \"of\", \"london\"] for the target value \"the wily fox of london\"\n *\n * - 4 out of 5 words match (score: 4/5 = 0.8)\n * - non-exact matches have their score divided in half (final score: 0.4)\n *\n * @internal\n */\nexport function calculateWordScore(uniqueSearchTerms: string[], value: string): SearchScore {\n  const uniqueValueTerms = uniq(compact(words(toLower(value))))\n\n  const matches = intersection(uniqueSearchTerms, uniqueValueTerms)\n  const all = union(uniqueValueTerms, uniqueSearchTerms)\n  const fieldScore = matches.length / all.length\n  return fieldScore === 1\n    ? [1, '[Word] Exact match']\n    : [\n        fieldScore / 2,\n        `[Word] Matched ${matches.length} of ${all.length} terms: [${matches.join(', ')}]`,\n      ]\n}\n\n/**\n * @internal\n */\nexport function partitionAndSanitizeSearchTerms(searchTerms: string[]): {\n  phrases: string[]\n  words: string[]\n} {\n  const uniqueSearchTerms = uniq(searchTerms.map(toLower))\n\n  const [searchPhrases, searchWords] = partition(uniqueSearchTerms, (term) => /^\".*\"$/.test(term))\n  return {\n    phrases: uniq(searchPhrases).map(toLower).map(stripWrappingQuotes), //\n    words: uniq(searchWords.map(toLower)),\n  }\n}\n\nfunction stripWrappingQuotes(str: string) {\n  return str.replace(/^\"(.*)\"$/, '$1')\n}\n","const SPECIAL_CHARS = /([^!@#$%^&*(),\\\\/?\";:{}|[\\]+<>\\s-])+/g\nconst STRIP_EDGE_CHARS = /(^[.]+)|([.]+$)/\n\nexport function tokenize(string: string): string[] {\n  return (string.match(SPECIAL_CHARS) || []).map((token) => token.replace(STRIP_EDGE_CHARS, ''))\n}\n","import {compact, flatten, flow, toLower, trim, union, uniq, words} from 'lodash'\nimport {joinPath} from '../../../core/util/searchUtils'\nimport {tokenize} from '../common/tokenize'\nimport type {\n  SearchableType,\n  SearchOptions,\n  SearchPath,\n  SearchSpec,\n  SearchTerms,\n  SortDirection,\n  WeightedSearchOptions,\n} from './types'\n\nexport interface SearchParams {\n  __types: string[]\n  __limit: number\n  __offset: number\n  [key: string]: unknown\n}\n\nexport interface SearchQuery {\n  query: string\n  params: SearchParams\n  options: Record<string, unknown>\n  searchSpec: SearchSpec[]\n  terms: string[]\n}\n\nexport const DEFAULT_LIMIT = 1000\n\nconst combinePaths: (paths: string[][]) => string[] = flow([flatten, union, compact])\n\n/**\n * Create an object containing all available document types and weighted paths, used to construct a GROQ query for search.\n * System fields `_id` and `_type` are included by default.\n *\n * If `optimizeIndexPaths` is true, this will will convert all `__experimental_search` paths containing numbers\n * into array syntax. E.g. ['cover', 0, 'cards', 0, 'title'] =\\> \"cover[].cards[].title\"\n *\n * This optimization will yield more search results than may be intended, but offers better performance over arrays with indices.\n * (which are currently unoptimizable by Content Lake)\n */\nfunction createSearchSpecs(types: SearchableType[], optimizeIndexedPaths: boolean) {\n  let hasIndexedPaths = false\n\n  const specs = types.map((type) => ({\n    typeName: type.name,\n    paths: type.__experimental_search.map((config) => {\n      const path = config.path.map((p) => {\n        if (typeof p === 'number') {\n          hasIndexedPaths = true\n          if (optimizeIndexedPaths) {\n            return [] as []\n          }\n        }\n        return p\n      })\n      return {\n        weight: config.weight,\n        path: joinPath(path),\n        mapWith: config.mapWith,\n      }\n    }),\n  }))\n  return {\n    specs,\n    hasIndexedPaths,\n  }\n}\n\nconst pathWithMapper = ({mapWith, path}: SearchPath): string =>\n  mapWith ? `${mapWith}(${path})` : path\n\n/**\n * Create GROQ constraints, given search terms and the full spec of available document types and fields.\n * Essentially a large list of all possible fields (joined by logical OR) to match our search terms against.\n */\nfunction createConstraints(terms: string[], specs: SearchSpec[]) {\n  const combinedSearchPaths = combinePaths(\n    specs.map((configForType) => (configForType.paths || []).map((opt) => pathWithMapper(opt)))\n  )\n\n  const constraints = terms\n    .map((_term, i) => combinedSearchPaths.map((joinedPath) => `${joinedPath} match $t${i}`))\n    .filter((constraint) => constraint.length > 0)\n\n  return constraints.map((constraint) => `(${constraint.join(' || ')})`)\n}\n\n/**\n * Convert a string into an array of tokenized terms.\n *\n * Any (multi word) text wrapped in double quotes will be treated as \"phrases\", or separate tokens that\n * will not have its special characters removed.\n * E.g.`\"the\" \"fantastic mr\" fox fox book` =\\> [\"the\", `\"fantastic mr\"`, \"fox\", \"book\"]\n *\n * Phrases wrapped in quotes are assigned relevance scoring differently from regular words.\n *\n * @internal\n */\nexport function extractTermsFromQuery(query: string): string[] {\n  const quotedQueries = [] as string[]\n  const unquotedQuery = query.replace(/(\"[^\"]*\")/g, (match) => {\n    if (words(match).length > 1) {\n      quotedQueries.push(match)\n      return ''\n    }\n    return match\n  })\n\n  // Lowercase and trim quoted queries\n  const quotedTerms = quotedQueries.map((str) => trim(toLower(str)))\n\n  /**\n   * Convert (remaining) search query into an array of deduped, sanitized tokens.\n   * All white space and special characters are removed.\n   * e.g. \"The saint of Saint-Germain-des-Prés\" =\\> ['the', 'saint', 'of', 'germain', 'des', 'pres']\n   */\n  const remainingTerms = uniq(compact(tokenize(toLower(unquotedQuery))))\n\n  return [...quotedTerms, ...remainingTerms]\n}\n\n/**\n * @internal\n */\nexport function createSearchQuery(\n  searchTerms: SearchTerms,\n  searchOpts: SearchOptions & WeightedSearchOptions = {}\n): SearchQuery {\n  const {filter, params, tag} = searchOpts\n\n  /**\n   * First pass: create initial search specs and determine if this subset of types contains\n   * any indexed paths in `__experimental_search`.\n   * e.g. \"authors.0.title\" or [\"authors\", 0, \"title\"]\n   */\n  const {specs: exactSearchSpecs, hasIndexedPaths} = createSearchSpecs(searchTerms.types, false)\n\n  // Extract search terms from string query, factoring in phrases wrapped in quotes\n  const terms = extractTermsFromQuery(searchTerms.query)\n\n  /**\n   * Second pass: create an optimized spec (with array indices removed), but only if types with any\n   * indexed paths have been previously found. Otherwise, passthrough original search specs.\n   *\n   * These optimized specs are only used when building constraints in this search query.\n   */\n  const optimizedSpecs = hasIndexedPaths\n    ? createSearchSpecs(searchTerms.types, true).specs\n    : exactSearchSpecs\n\n  // Construct search filters used in this GROQ query\n  const filters = [\n    '_type in $__types',\n    searchOpts.includeDrafts === false && `!(_id in path('drafts.**'))`,\n    ...createConstraints(terms, optimizedSpecs),\n    filter ? `(${filter})` : '',\n    searchTerms.filter ? `(${searchTerms.filter})` : '',\n  ].filter(Boolean)\n\n  const selections = exactSearchSpecs.map((spec) => {\n    const constraint = `_type == \"${spec.typeName}\" => `\n    const selection = `{ ${spec.paths.map((cfg, i) => `\"w${i}\": ${pathWithMapper(cfg)}`)} }`\n    return `${constraint}${selection}`\n  })\n\n  const selection = selections.length > 0 ? `...select(${selections.join(',\\n')})` : ''\n\n  // Default to `_id asc` (GROQ default) if no search sort is provided\n  const sortDirection = searchOpts?.sort?.direction || ('asc' as SortDirection)\n  const sortField = searchOpts?.sort?.field || '_id'\n\n  const query =\n    `*[${filters.join(' && ')}]` +\n    `| order(${sortField} ${sortDirection})` +\n    `[$__offset...$__limit]` +\n    // the following would improve search quality for paths-with-numbers, but increases the size of the query by up to 50%\n    // `${hasIndexedPaths ? `[${createConstraints(terms, exactSearchSpec).join(' && ')}]` : ''}` +\n    `{_type, _id, ${selection}}`\n\n  // Prepend optional GROQ comments to query\n  const groqComments = (searchOpts?.comments || []).map((s) => `// ${s}`).join('\\n')\n  const updatedQuery = groqComments ? `${groqComments}\\n${query}` : query\n\n  const offset = searchOpts?.offset ?? 0\n  const limit = (searchOpts?.limit ?? DEFAULT_LIMIT) + offset\n\n  return {\n    query: updatedQuery,\n    params: {\n      ...toGroqParams(terms),\n      __types: exactSearchSpecs.map((spec) => spec.typeName),\n      __limit: limit,\n      __offset: offset,\n      ...(params || {}),\n    },\n    options: {tag},\n    searchSpec: exactSearchSpecs,\n    terms,\n  }\n}\n\nconst toGroqParams = (terms: string[]): Record<string, string> => {\n  const params: Record<string, string> = {}\n  return terms.reduce((acc, term, i) => {\n    acc[`t${i}`] = `${term}*` // \"t\" is short for term\n    return acc\n  }, params)\n}\n","import type {SanityClient} from '@sanity/client'\nimport {sortBy} from 'lodash'\nimport type {Observable} from 'rxjs'\nimport {map, tap} from 'rxjs/operators'\nimport {removeDupes} from '../../util/draftUtils'\nimport {applyWeights} from './applyWeights'\nimport {createSearchQuery} from './createSearchQuery'\nimport type {\n  SearchableType,\n  SearchHit,\n  SearchOptions,\n  SearchTerms,\n  WeightedHit,\n  WeightedSearchOptions,\n} from './types'\n\nfunction getSearchTerms(searchParams: string | SearchTerms, types: SearchableType[]) {\n  if (typeof searchParams === 'string') {\n    return {\n      query: searchParams,\n      types: types,\n    }\n  }\n  return searchParams.types.length ? searchParams : {...searchParams, types}\n}\n\n/**\n * @internal\n */\nexport function createWeightedSearch(\n  types: SearchableType[],\n  client: SanityClient,\n  commonOpts: WeightedSearchOptions = {}\n): (searchTerms: string | SearchTerms, searchOpts?: SearchOptions) => Observable<WeightedHit[]> {\n  // Search currently supports both strings (reference + cross dataset reference inputs)\n  // or a SearchTerms object (omnisearch).\n  return function search(searchParams, searchOpts = {}) {\n    const searchTerms = getSearchTerms(searchParams, types)\n\n    const {query, params, options, searchSpec, terms} = createSearchQuery(searchTerms, {\n      ...commonOpts,\n      ...searchOpts,\n    })\n\n    return client.observable.fetch(query, params, options).pipe(\n      commonOpts.unique ? map(removeDupes) : tap(),\n      // Assign weighting and scores based on current search terms.\n      // No scores will be assigned when terms are empty.\n      map((hits: SearchHit[]) => applyWeights(searchSpec, hits, terms)),\n      // Optionally skip client-side score sorting.\n      // This can be relevant when ordering results by specific fields, especially dates.\n      searchOpts?.skipSortByScore ? tap() : map((hits) => sortBy(hits, (hit) => -hit.score))\n    )\n  }\n}\n","import {map, mergeMap, startWith, switchMap} from 'rxjs/operators'\nimport {ReferenceFilterSearchOptions, ReferenceSchemaType} from '@sanity/types'\nimport {combineLatest, EMPTY, Observable, of} from 'rxjs'\nimport {SanityClient} from '@sanity/client'\nimport {ReferenceInfo, ReferenceSearchHit} from '../../../inputs/ReferenceInput/types'\nimport {DocumentPreviewStore, getPreviewPaths, prepareForPreview} from '../../../../preview'\nimport {collate, CollatedHit, getDraftId, getIdPair, isRecord} from '../../../../util'\nimport {createWeightedSearch} from '../../../../search'\n\nconst READABLE = {\n  available: true,\n  reason: 'READABLE',\n} as const\n\nconst PERMISSION_DENIED = {\n  available: false,\n  reason: 'PERMISSION_DENIED',\n} as const\n\nconst NOT_FOUND = {\n  available: false,\n  reason: 'NOT_FOUND',\n} as const\n\n/**\n * Takes an id and a reference schema type, returns metadata about it\n */\nexport function getReferenceInfo(\n  documentPreviewStore: DocumentPreviewStore,\n  id: string,\n  referenceType: ReferenceSchemaType\n): Observable<ReferenceInfo> {\n  const {publishedId, draftId} = getIdPair(id)\n\n  const pairAvailability$ = documentPreviewStore.unstable_observeDocumentPairAvailability(id)\n\n  return pairAvailability$.pipe(\n    switchMap((pairAvailability) => {\n      if (!pairAvailability.draft.available && !pairAvailability.published.available) {\n        // combine availability of draft + published\n        const availability =\n          pairAvailability.draft.reason === 'PERMISSION_DENIED' ||\n          pairAvailability.published.reason === 'PERMISSION_DENIED'\n            ? PERMISSION_DENIED\n            : NOT_FOUND\n\n        // short circuit, neither draft nor published is available so no point in trying to get preview\n        return of({\n          id,\n          type: undefined,\n          availability,\n          preview: {\n            draft: undefined,\n            published: undefined,\n          },\n        } as const)\n      }\n\n      const draftRef = {_type: 'reference', _ref: draftId}\n      const publishedRef = {_type: 'reference', _ref: publishedId}\n\n      const typeName$ = combineLatest([\n        documentPreviewStore.observeDocumentTypeFromId(draftId),\n        documentPreviewStore.observeDocumentTypeFromId(publishedId),\n      ]).pipe(\n        // assume draft + published are always same type\n        map(([draftTypeName, publishedTypeName]) => draftTypeName || publishedTypeName)\n      )\n\n      return typeName$.pipe(\n        switchMap((typeName) => {\n          if (!typeName) {\n            // we have already asserted that either the draft or the published document is readable, so\n            // if we get here we can't read the _type, so we're likely to be in an inconsistent state\n            // waiting for an update to reach the client. Since we're in the context of a reactive stream based on\n            // the _type we'll get it eventually\n            return EMPTY\n          }\n\n          // get schema type for the referenced document\n          const refSchemaType = referenceType.to.find((memberType) => memberType.name === typeName)!\n\n          if (!refSchemaType) {\n            return EMPTY\n          }\n\n          const previewPaths = [\n            ...(getPreviewPaths(refSchemaType?.preview) || []),\n            ['_updatedAt'],\n            ['_createdAt'],\n          ]\n\n          const draftPreview$ = documentPreviewStore.observePaths(draftRef, previewPaths).pipe(\n            map((result) =>\n              result\n                ? {\n                    _id: draftId,\n                    ...prepareForPreview(result, refSchemaType),\n                  }\n                : undefined\n            ),\n            startWith(undefined)\n          )\n\n          const publishedPreview$ = documentPreviewStore\n            .observePaths(publishedRef, previewPaths)\n            .pipe(\n              map((result) =>\n                result\n                  ? {\n                      _id: publishedId,\n                      ...prepareForPreview(result, refSchemaType),\n                    }\n                  : undefined\n              ),\n              startWith(undefined)\n            )\n\n          const value$ = combineLatest([draftPreview$, publishedPreview$]).pipe(\n            map(([draft, published]) => ({draft, published}))\n          )\n\n          return value$.pipe(\n            map((value): ReferenceInfo => {\n              const availability =\n                // eslint-disable-next-line no-nested-ternary\n                pairAvailability.draft.available || pairAvailability.published.available\n                  ? READABLE\n                  : pairAvailability.draft.reason === 'PERMISSION_DENIED' ||\n                    pairAvailability.published.reason === 'PERMISSION_DENIED'\n                  ? PERMISSION_DENIED\n                  : NOT_FOUND\n\n              return {\n                type: typeName,\n                id: publishedId,\n                availability,\n                preview: {\n                  draft: isRecord(value.draft) ? value.draft : undefined,\n                  published: isRecord(value.published) ? value.published : undefined,\n                },\n              }\n            })\n          )\n        })\n      )\n    })\n  )\n}\n\n/**\n * when we get a search result it may not include all [draft, published] id pairs for documents matching the\n * query. For example: searching for \"potato\" may yield a hit in the draft, but not the published (or vice versa)\n *\n * This method takes a list of collated search hits and returns an array of the missing \"counterpart\" ids\n */\nfunction getCounterpartIds(collatedHits: CollatedHit[]): string[] {\n  return collatedHits\n    .filter(\n      (collatedHit) =>\n        // we're interested in hits where either draft or published is missing\n        !collatedHit.draft || !collatedHit.published\n    )\n    .map((collatedHit) =>\n      // if we have the draft, return the published id or vice versa\n      collatedHit.draft ? collatedHit.id : getDraftId(collatedHit.id)\n    )\n}\n\nfunction getExistingCounterparts(client: SanityClient, ids: string[]) {\n  return ids.length === 0\n    ? of([])\n    : client.observable.fetch(`*[_id in $ids]._id`, {ids}, {tag: 'get-counterpart-ids'})\n}\n\nexport function referenceSearch(\n  client: SanityClient,\n  textTerm: string,\n  type: ReferenceSchemaType,\n  options: ReferenceFilterSearchOptions\n): Observable<ReferenceSearchHit[]> {\n  const searchWeighted = createWeightedSearch(type.to, client, options)\n  return searchWeighted(textTerm, {includeDrafts: true}).pipe(\n    map((results) => results.map((result) => result.hit)),\n    map(collate),\n    // pick the 100 best matches\n    map((collated) => collated.slice(0, 100)),\n    mergeMap((collated) => {\n      // Note: It might seem like this step is redundant, but it's here for a reason:\n      // The list of search hits returned from here will be passed as options to the reference input's autocomplete. When\n      // one of them gets selected by the user, it will then be passed as the argument to the `onChange` handler in the\n      // Reference Input. This handler will then look at the passed value to determine whether to make a link to a\n      // draft (using _strengthenOnPublish) or a published document.\n      //\n      // Without this step, in a case where both a draft and a published version exist but only the draft matches\n      // the search term, we'd end up making a reference with `_strengthenOnPublish: true`, when we instead should be\n      // making a normal reference to the published id\n      return getExistingCounterparts(client, getCounterpartIds(collated)).pipe(\n        map((existingCounterpartIds) => {\n          return collated.map((entry) => {\n            const draftId = getDraftId(entry.id)\n            return {\n              id: entry.id,\n              type: entry.type,\n              draft:\n                entry.draft || existingCounterpartIds.includes(draftId)\n                  ? {_id: draftId, _type: entry.type}\n                  : undefined,\n              published:\n                entry.published || existingCounterpartIds.includes(entry.id)\n                  ? {_id: entry.id, _type: entry.type}\n                  : undefined,\n            }\n          })\n        })\n      )\n    })\n  )\n}\n","import {FormPatch} from './types'\n\n/**\n * @beta\n */\nexport interface MutationPatchMsg {\n  type: 'mutation'\n  patches: FormPatch[]\n  snapshot: unknown\n}\n\n/**\n * @beta\n */\nexport interface RebasePatchMsg {\n  type: 'rebase'\n  patches: FormPatch[]\n  snapshot: unknown\n}\n\n/**\n * @beta\n */\nexport type PatchMsg = MutationPatchMsg | RebasePatchMsg\n\n/**\n * @beta\n */\nexport interface PatchMsgSubscriber {\n  (msg: PatchMsg): void\n}\n\n/**\n * @beta\n */\nexport interface PatchChannel {\n  publish: (msg: PatchMsg) => void\n  subscribe: (subscriber: PatchMsgSubscriber) => () => void\n}\n\n/**\n * @internal\n */\nexport function createPatchChannel(): PatchChannel {\n  const _subscribers: PatchMsgSubscriber[] = []\n\n  return {\n    publish(msg: PatchMsg) {\n      for (const subscriber of _subscribers) {\n        subscriber(msg)\n      }\n    },\n\n    subscribe(subscriber) {\n      _subscribers.push(subscriber)\n\n      return () => {\n        const idx = _subscribers.indexOf(subscriber)\n\n        if (idx > -1) {\n          _subscribers.splice(idx, 1)\n        }\n      }\n    },\n  }\n}\n","import type {Path, PathSegment} from '@sanity/types'\nimport type {\n  FormSetIfMissingPatch,\n  FormInsertPatch,\n  FormInsertPatchPosition,\n  FormSetPatch,\n  FormUnsetPatch,\n  FormIncPatch,\n  FormDecPatch,\n  FormDiffMatchPatch,\n} from './types'\n\n/** @internal */\nexport const SANITY_PATCH_TYPE = Symbol.for('sanity.patch')\n\n/** @beta */\nexport function setIfMissing(value: any, path: Path = []): FormSetIfMissingPatch {\n  return {\n    patchType: SANITY_PATCH_TYPE,\n    type: 'setIfMissing',\n    path,\n    value,\n  }\n}\n\n/** @beta */\nexport function insert(\n  items: any[],\n  position: FormInsertPatchPosition,\n  path: Path = []\n): FormInsertPatch {\n  return {\n    patchType: SANITY_PATCH_TYPE,\n    type: 'insert',\n    path,\n    position,\n    items,\n  }\n}\n\n/** @beta */\nexport function set(value: any, path: Path = []): FormSetPatch {\n  return {patchType: SANITY_PATCH_TYPE, type: 'set', path, value}\n}\n\n/** @beta */\nexport function unset(path: Path = []): FormUnsetPatch {\n  return {patchType: SANITY_PATCH_TYPE, type: 'unset', path}\n}\n\n/** @beta */\nexport function diffMatchPatch(value: string, path: Path = []): FormDiffMatchPatch {\n  return {patchType: SANITY_PATCH_TYPE, type: 'diffMatchPatch', path, value}\n}\n\n/** @beta */\nexport function inc(amount = 1, path: Path = []): FormIncPatch {\n  return {patchType: SANITY_PATCH_TYPE, type: 'inc', path, value: amount}\n}\n\n/** @beta */\nexport function dec(amount = 1, path: Path = []): FormDecPatch {\n  return {patchType: SANITY_PATCH_TYPE, type: 'dec', path, value: amount}\n}\n\n/** @internal */\nexport function prefixPath<T extends {path: Path}>(patch: T, segment: PathSegment): T {\n  return {\n    ...patch,\n    path: [segment, ...patch.path],\n  }\n}\n","import {PathSegment} from '@sanity/types'\nimport {flatten} from 'lodash'\nimport {prefixPath} from './patch'\nimport {FormPatch, PatchArg} from './types'\n\n/**\n * @beta\n */\nexport class PatchEvent {\n  static from(input: PatchArg | PatchEvent): PatchEvent {\n    if (input instanceof PatchEvent) {\n      return input\n    }\n    return new PatchEvent(Array.isArray(input) ? flatten(input) : [input])\n  }\n\n  patches: Array<FormPatch>\n\n  constructor(patches: Array<FormPatch>) {\n    this.patches = patches\n  }\n\n  prepend(...patches: PatchArg[]): PatchEvent {\n    return PatchEvent.from([...flatten(patches), ...this.patches])\n  }\n\n  append(...patches: PatchArg[]): PatchEvent {\n    return PatchEvent.from([...this.patches, ...flatten(patches)])\n  }\n\n  prefixAll(segment: PathSegment): PatchEvent {\n    return PatchEvent.from(this.patches.map((patch) => prefixPath(patch, segment)))\n  }\n}\n","import {ErrorOutlineIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Flex, Text} from '@sanity/ui'\nimport React, {ComponentProps} from 'react'\nimport styled from 'styled-components'\n\ninterface AlertProps extends Omit<ComponentProps<typeof Card>, 'title'> {\n  title: React.ReactNode\n  status?: 'warning' | 'error'\n  suffix?: React.ReactNode\n}\n\nconst STATUS_TONES = {\n  warning: 'caution',\n  error: 'critical',\n} as const\n\nconst SuffixBox = styled(Box)`\n  border-top: 1px solid var(--card-border-color);\n`\n\nexport function Alert(props: AlertProps) {\n  const {children, status = 'warning', suffix, title, ...rest} = props\n\n  return (\n    <Card radius={2} tone={STATUS_TONES[status]} {...rest} data-ui=\"Alert\">\n      <Flex padding={4}>\n        <Box>\n          <Text size={1}>\n            {status === 'warning' && <WarningOutlineIcon />}\n            {status === 'error' && <ErrorOutlineIcon />}\n          </Text>\n        </Box>\n\n        <Box flex={1} marginLeft={3}>\n          <Text size={1} weight=\"semibold\">\n            {title}\n          </Text>\n\n          {children && <Box marginTop={3}>{children}</Box>}\n        </Box>\n      </Flex>\n\n      {suffix && <SuffixBox>{suffix}</SuffixBox>}\n    </Card>\n  )\n}\n","import {useEffect, useRef} from 'react'\n\n/**\n * A hook that returns the previous value of a component variable\n * This might be provided by React in the future (https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state)\n */\nexport function usePrevious<T>(\n  /** The value to track. Will return undefined for first render*/\n  value: T\n): T | undefined\nexport function usePrevious<T>(\n  /** The value to track. Will return undefined for first render */\n  value: T,\n  initial: T\n): T\nexport function usePrevious<T>(value: T, initial?: T): T | null {\n  const ref = useRef<T | null>(initial || null)\n  useEffect(() => {\n    ref.current = value\n  }, [value])\n  return ref.current\n}\n","import {useEffect, useRef} from 'react'\nimport shallowEquals from 'shallow-equals'\nimport {usePrevious} from './usePrevious'\n\n/**\n * A hook for doing side effects as a response to a change in a hook value between renders\n *\n * @example\n * ```ts\n * useDidUpdate(hasFocus, (hadFocus, hasFocus) => {\n *  if (hasFocus) {\n *    scrollIntoView(elementRef.current)\n *   }\n * })\n * ```\n */\nexport function useDidUpdate<T>(\n  /** The value you want to respond to changes in. */\n  current: T,\n  /** Callback to run when the value changes. */\n  didUpdate: (previous: T | undefined, current: T) => void,\n  compare?: (previous: T | undefined, current: T) => boolean\n): void\nexport function useDidUpdate<T>(\n  current: T,\n  didUpdate: (previous: T | undefined, current: T | undefined) => void,\n  compare: (previous: T | undefined, current: T) => boolean = shallowEquals\n): void {\n  const previous = usePrevious<T>(current)\n  const initial = useRef<boolean>(true)\n  useEffect(() => {\n    if (initial.current) {\n      initial.current = false\n      return\n    }\n    if (!compare(previous, current)) {\n      didUpdate(previous, current)\n    }\n  }, [didUpdate, current, previous, compare])\n}\n","import {AssetSource, ObjectSchemaType, Path, SanityDocument} from '@sanity/types'\nimport {createContext} from 'react'\nimport {PatchChannel} from './patch'\nimport {\n  FormBuilderArrayFunctionComponent,\n  FormBuilderCustomMarkersComponent,\n  FormBuilderFilterFieldFn,\n  FormBuilderMarkersComponent,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderItemCallback,\n  RenderPreviewCallback,\n} from './types'\nimport {FormFieldGroup, ObjectMember, StateTree} from './store'\n\n/**\n * @beta\n */\nexport interface FormBuilderContextValue {\n  /**\n   * @deprecated INTERNAL USE ONLY\n   * @internal\n   */\n  __internal: {\n    components: {\n      CustomMarkers: FormBuilderCustomMarkersComponent\n      Markers: FormBuilderMarkersComponent\n    }\n    file: {\n      assetSources: AssetSource[]\n      directUploads: boolean\n    }\n    filterField: FormBuilderFilterFieldFn\n    image: {\n      assetSources: AssetSource[]\n      directUploads: boolean\n    }\n    getDocument: () => SanityDocument | undefined\n    patchChannel: PatchChannel\n  }\n\n  autoFocus?: boolean\n  changesOpen?: boolean\n  collapsedFieldSets: StateTree<boolean> | undefined\n  collapsedPaths: StateTree<boolean> | undefined\n  focusPath: Path\n  focused?: boolean\n  groups: FormFieldGroup[]\n  id: string\n  members: ObjectMember[]\n  readOnly?: boolean\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderItemCallback\n  renderPreview: RenderPreviewCallback\n  schemaType: ObjectSchemaType\n  value: {[field in string]: unknown} | undefined\n}\n\n/**\n * @internal\n */\nexport const FormBuilderContext = createContext<FormBuilderContextValue | null>(null)\n","import {useContext} from 'react'\nimport {FormBuilderContext, FormBuilderContextValue} from './FormBuilderContext'\n\n/**\n * @beta\n */\nexport function useFormBuilder(): FormBuilderContextValue {\n  const formBuilder = useContext(FormBuilderContext)\n\n  if (!formBuilder) {\n    throw new Error('FormBuilder: missing context value')\n  }\n\n  return formBuilder\n}\n","import {ArraySchemaType, isReferenceSchemaType} from '@sanity/types'\nimport {AddIcon} from '@sanity/icons'\nimport React, {useId, useCallback} from 'react'\nimport {\n  Box,\n  Button,\n  Grid,\n  Menu,\n  MenuButton,\n  MenuItem,\n  Tooltip,\n  Text,\n  MenuButtonProps,\n} from '@sanity/ui'\nimport {ArrayInputFunctionsProps, ObjectItem} from '../../../types'\n\nconst POPOVER_PROPS: MenuButtonProps['popover'] = {constrainSize: true, portal: true}\n\n/** @beta */\nexport function ArrayOfObjectsFunctions<\n  Item extends ObjectItem,\n  SchemaType extends ArraySchemaType\n>(props: ArrayInputFunctionsProps<Item, SchemaType>) {\n  const {schemaType, readOnly, children, onValueCreate, onItemAppend} = props\n  const menuButtonId = useId()\n\n  const insertItem = useCallback(\n    (itemType: any) => {\n      const item = onValueCreate(itemType)\n\n      onItemAppend(item)\n    },\n    [onValueCreate, onItemAppend]\n  )\n\n  const handleAddBtnClick = React.useCallback(() => {\n    insertItem(schemaType.of[0])\n  }, [schemaType, insertItem])\n\n  if (readOnly) {\n    return (\n      <Tooltip\n        portal\n        content={\n          <Box padding={2} sizing=\"border\">\n            <Text size={1} muted>\n              This field is read-only\n            </Text>\n          </Box>\n        }\n      >\n        <Grid>\n          <Button\n            icon={AddIcon}\n            mode=\"ghost\"\n            disabled\n            text={schemaType.of.length === 1 ? 'Add item' : 'Add item...'}\n          />\n        </Grid>\n      </Tooltip>\n    )\n  }\n\n  return (\n    <Grid gap={1} style={{gridTemplateColumns: 'repeat(auto-fit, minmax(100px, 1fr))'}}>\n      {schemaType.of.length === 1 ? (\n        <Button icon={AddIcon} mode=\"ghost\" onClick={handleAddBtnClick} text=\"Add item\" />\n      ) : (\n        <MenuButton\n          button={<Button icon={AddIcon} mode=\"ghost\" text=\"Add item…\" />}\n          id={menuButtonId || ''}\n          menu={\n            <Menu>\n              {schemaType.of.map((memberDef, i) => {\n                // Use reference icon if reference is to one schemaType only\n                const referenceIcon =\n                  isReferenceSchemaType(memberDef) &&\n                  (memberDef.to || []).length === 1 &&\n                  memberDef.to[0].icon\n\n                const icon = memberDef.icon || memberDef.type?.icon || referenceIcon\n                return (\n                  <MenuItem\n                    key={i}\n                    text={memberDef.title || memberDef.type?.name}\n                    onClick={() => insertItem(memberDef)}\n                    icon={icon}\n                  />\n                )\n              })}\n            </Menu>\n          }\n          popover={POPOVER_PROPS}\n        />\n      )}\n\n      {children}\n    </Grid>\n  )\n}\n","import {ErrorOutlineIcon, InfoOutlineIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {FormNodeValidation} from '@sanity/types'\nimport {Box, Flex, Stack, Text, Theme} from '@sanity/ui'\nimport React from 'react'\nimport styled, {css} from 'styled-components'\nimport {PortableTextMarker, RenderCustomMarkers} from '../../../types'\nimport {useFormBuilder} from '../../../useFormBuilder'\n\nexport interface MarkersProps {\n  markers: PortableTextMarker[]\n  validation: FormNodeValidation[]\n  renderCustomMarkers?: RenderCustomMarkers\n}\n\nconst getIcon = (level: 'error' | 'warning' | 'info') => {\n  if (level === 'error') {\n    return <ErrorOutlineIcon />\n  }\n\n  if (level === 'warning') {\n    return <WarningOutlineIcon />\n  }\n\n  return <InfoOutlineIcon />\n}\n\nconst IconText = styled(Text)(({theme}: {theme: Theme}) => {\n  return css`\n    &[data-info] {\n      color: ${theme.sanity.color.muted.primary.enabled.fg};\n    }\n\n    &[data-warning] {\n      color: ${theme.sanity.color.muted.caution.enabled.fg};\n    }\n\n    &[data-error] {\n      color: ${theme.sanity.color.muted.critical.enabled.fg};\n    }\n  `\n})\n\nexport function DefaultMarkers(props: MarkersProps) {\n  const {markers, validation, renderCustomMarkers} = props\n  const {CustomMarkers} = useFormBuilder().__internal.components\n\n  if (markers.length === 0 && validation.length === 0) {\n    return null\n  }\n\n  return (\n    <Stack space={1}>\n      {validation.length > 0 &&\n        validation.map(({message, level}, index) => (\n          // eslint-disable-next-line react/no-array-index-key\n          <Flex key={`validationItem-${index}`}>\n            <Box marginRight={2} marginBottom={index + 1 === validation.length ? 0 : 2}>\n              <IconText\n                size={1}\n                data-error={level === 'error' ? '' : undefined}\n                data-warning={level === 'warning' ? '' : undefined}\n                data-info={level === 'info' ? '' : undefined}\n              >\n                {getIcon(level)}\n              </IconText>\n            </Box>\n            <Box>\n              <Text size={1}>{message || 'Error'}</Text>\n            </Box>\n          </Flex>\n        ))}\n\n      {markers.length > 0 && (\n        <Box marginTop={validation.length > 0 ? 3 : 0}>\n          {renderCustomMarkers && renderCustomMarkers(markers)}\n          {!renderCustomMarkers && <CustomMarkers markers={markers} />}\n        </Box>\n      )}\n    </Stack>\n  )\n}\n","import React from 'react'\nimport {Text} from '@sanity/ui'\n\n// This is the fallback marker renderer if the block editor didn't get the 'renderCustomMarkers' prop\n// You will probably only see this when you first start to play with custom markers as a developer\nexport function DefaultCustomMarkers() {\n  return (\n    <Text size={1}>\n      This is a example custom marker, please implement <code>renderCustomMarkers</code> function.\n    </Text>\n  )\n}\n","/* eslint-disable react/no-unused-prop-types */\nimport {Path} from '@sanity/types'\nimport React, {memo, useContext} from 'react'\nimport {FormPatch, PatchEvent} from '../../patch'\n\n/** @internal */\nexport interface FormCallbacksValue {\n  transformPatches?: (patches: FormPatch[]) => FormPatch[]\n  onChange: (patchEvent: PatchEvent) => void\n  onPathFocus: (path: Path) => void\n  onPathBlur: (path: Path) => void\n  onPathOpen: (path: Path) => void\n  onSetPathCollapsed: (path: Path, collapsed: boolean) => void\n  onSetFieldSetCollapsed: (path: Path, collapsed: boolean) => void\n  onFieldGroupSelect: (path: Path, fieldGroupName: string) => void\n}\n\n/**\n * @internal\n */\nexport const FormCallbacksContext = React.createContext<FormCallbacksValue | null>(null)\n\n/** @internal */\nexport const FormCallbacksProvider = memo(function FormCallbacksProvider(\n  props: FormCallbacksValue & {children: React.ReactNode}\n) {\n  return (\n    <FormCallbacksContext.Provider value={props}>{props.children}</FormCallbacksContext.Provider>\n  )\n})\n\n/** @internal */\nexport function useFormCallbacks(): FormCallbacksValue {\n  const ctx = useContext(FormCallbacksContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx\n}\n","/* eslint-disable react/no-unused-prop-types */\nimport React, {useContext, createContext, useMemo} from 'react'\nimport {Path} from '@sanity/types'\nimport {startsWith, isEqual} from '@sanity/util/paths'\nimport {FormNodePresence} from '../../../presence'\n\nconst PresenceContext = createContext<FormNodePresence[]>([])\n\nexport function PresenceProvider(props: {presence: FormNodePresence[]; children: React.ReactNode}) {\n  return (\n    <PresenceContext.Provider value={props.presence}>{props.children}</PresenceContext.Provider>\n  )\n}\n\nexport function useFormFieldPresence(): FormNodePresence[] {\n  const ctx = useContext(PresenceContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx\n}\n\n/**\n * @alpha\n * @param path - the path to return child presence for\n * @param inclusive - whether to include presence for the current path (default false)\n */\nexport function useChildPresence(path: Path, inclusive?: boolean): FormNodePresence[] {\n  const presence = useFormFieldPresence()\n  return useMemo(\n    () =>\n      presence.filter(\n        (item) => startsWith(path, item.path) && (inclusive || !isEqual(path, item.path))\n      ),\n    [inclusive, path, presence]\n  )\n}\n","/* eslint-disable react/no-unused-prop-types */\nimport React, {createContext, useContext, useMemo} from 'react'\nimport {FormNodeValidation, Path, ValidationMarker} from '@sanity/types'\nimport {isEqual, startsWith} from '@sanity/util/paths'\nimport {of} from 'rxjs'\nimport {mergeMapTo} from 'rxjs/operators'\n\nconst ValidationContext = createContext<ValidationMarker[]>([])\n\nexport function ValidationProvider(props: {\n  validation: ValidationMarker[]\n  children: React.ReactNode\n}) {\n  return (\n    <ValidationContext.Provider value={props.validation}>\n      {props.children}\n    </ValidationContext.Provider>\n  )\n}\n\nexport function useValidationMarkers(): ValidationMarker[] {\n  const ctx = useContext(ValidationContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx\n}\n\n/**\n * @alpha\n * @param path - the path to return child validation for\n * @param inclusive - whether to include validation for the current path (default false)\n */\nexport function useChildValidation(path: Path, inclusive = false): FormNodeValidation[] {\n  const validation = useValidationMarkers()\n  return useMemo(\n    () =>\n      validation\n        .filter((item) => startsWith(path, item.path) && (inclusive || !isEqual(path, item.path)))\n        .map((marker) => ({\n          message: marker.item.message,\n          level: marker.level,\n          path: marker.path,\n        })) as FormNodeValidation[],\n    [inclusive, path, validation]\n  )\n}\n","/* eslint-disable camelcase */\n\nimport {ObjectSchemaType, Path, ValidationMarker} from '@sanity/types'\nimport React, {useEffect, useMemo, useRef} from 'react'\nimport {Source} from '../config'\nimport {FormNodePresence} from '../presence'\nimport {FIXME} from '../FIXME'\nimport {FormBuilderContext, FormBuilderContextValue} from './FormBuilderContext'\nimport {\n  FormBuilderFilterFieldFn,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderItemCallback,\n  RenderPreviewCallback,\n} from './types'\nimport {FormFieldGroup, ObjectMember, StateTree} from './store'\nimport {ArrayOfObjectsFunctions} from './inputs/arrays/ArrayOfObjectsInput/ArrayOfObjectsFunctions'\nimport {DefaultMarkers} from './inputs/PortableText/_legacyDefaultParts/Markers'\nimport {DefaultCustomMarkers} from './inputs/PortableText/_legacyDefaultParts/CustomMarkers'\nimport {PatchChannel, PatchEvent} from './patch'\nimport {FormCallbacksProvider} from './studio/contexts/FormCallbacks'\nimport {PresenceProvider} from './studio/contexts/Presence'\nimport {ValidationProvider} from './studio/contexts/Validation'\n\nexport interface FormBuilderProviderProps {\n  /**\n   * @internal\n   */\n  __internal_patchChannel?: PatchChannel // eslint-disable-line camelcase\n  autoFocus?: boolean\n  changesOpen?: boolean\n  children?: React.ReactNode\n  collapsedFieldSets: StateTree<boolean> | undefined\n  collapsedPaths: StateTree<boolean> | undefined\n  file: Source['form']['file']\n  filterField?: FormBuilderFilterFieldFn\n  focusPath: Path\n  focused?: boolean\n  groups: FormFieldGroup[]\n  id: string\n  image: Source['form']['image']\n  members: ObjectMember[]\n  onChange: (event: PatchEvent) => void\n  onFieldGroupSelect: (path: Path, groupName: string) => void\n  onPathBlur: (path: Path) => void\n  onPathFocus: (path: Path) => void\n  onPathOpen: (path: Path) => void\n  onSetFieldSetCollapsed: (path: Path, collapsed: boolean) => void\n  onSetPathCollapsed: (path: Path, collapsed: boolean) => void\n  presence: FormNodePresence[]\n  readOnly?: boolean\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderItemCallback\n  renderPreview: RenderPreviewCallback\n  schemaType: ObjectSchemaType\n  unstable?: Source['form']['unstable']\n  validation: ValidationMarker[]\n  value: {[field in string]: unknown} | undefined\n}\n\nconst missingPatchChannel: PatchChannel = {\n  publish: () => undefined,\n  subscribe: () => {\n    console.warn(\n      'No patch channel provided to form-builder. If you need input based patch updates, please provide one'\n    )\n\n    return () => undefined\n  },\n}\n\nexport function FormBuilderProvider(props: FormBuilderProviderProps) {\n  const {\n    __internal_patchChannel: patchChannel = missingPatchChannel,\n    autoFocus,\n    changesOpen,\n    children,\n    collapsedFieldSets,\n    collapsedPaths,\n    file,\n    filterField,\n    focusPath,\n    focused,\n    groups,\n    id,\n    image,\n    members,\n    onChange,\n    onFieldGroupSelect,\n    onPathBlur,\n    onPathFocus,\n    onPathOpen,\n    onSetFieldSetCollapsed,\n    onSetPathCollapsed,\n    presence,\n    readOnly,\n    renderField,\n    renderInput,\n    renderItem,\n    renderPreview,\n    schemaType,\n    unstable,\n    validation,\n    value: documentValue,\n  } = props\n\n  const documentValueRef = useRef(documentValue)\n\n  useEffect(() => {\n    documentValueRef.current = documentValue\n  }, [documentValue])\n\n  const __internal: FormBuilderContextValue['__internal'] = useMemo(\n    () => ({\n      patchChannel, // eslint-disable-line camelcase\n      components: {\n        ArrayFunctions: ArrayOfObjectsFunctions,\n        CustomMarkers: unstable?.CustomMarkers || DefaultCustomMarkers,\n        Markers: unstable?.Markers || DefaultMarkers,\n      },\n      file: {\n        assetSources: file.assetSources,\n        directUploads: file?.directUploads !== false,\n      },\n      filterField: filterField || (() => true),\n      image: {\n        assetSources: image.assetSources,\n        directUploads: image?.directUploads !== false,\n      },\n      getDocument: () => documentValueRef.current as FIXME,\n      onChange,\n    }),\n    [file, filterField, image, onChange, patchChannel, unstable]\n  )\n\n  const formBuilder: FormBuilderContextValue = useMemo(\n    () => ({\n      __internal,\n      autoFocus,\n      changesOpen,\n      collapsedFieldSets,\n      collapsedPaths,\n      focusPath,\n      focused,\n      groups,\n      id,\n      members,\n      readOnly,\n      renderField,\n      renderInput,\n      renderItem,\n      renderPreview,\n      schemaType,\n      value: documentValue,\n    }),\n    [\n      __internal,\n      autoFocus,\n      changesOpen,\n      collapsedFieldSets,\n      collapsedPaths,\n      documentValue,\n      focusPath,\n      focused,\n      groups,\n      id,\n      members,\n      readOnly,\n      renderField,\n      renderInput,\n      renderItem,\n      renderPreview,\n      schemaType,\n    ]\n  )\n\n  return (\n    <FormBuilderContext.Provider value={formBuilder}>\n      <FormCallbacksProvider\n        onChange={onChange}\n        onFieldGroupSelect={onFieldGroupSelect}\n        onPathBlur={onPathBlur}\n        onPathFocus={onPathFocus}\n        onPathOpen={onPathOpen}\n        onSetPathCollapsed={onSetPathCollapsed}\n        onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      >\n        <PresenceProvider presence={presence}>\n          <ValidationProvider validation={validation}>{children}</ValidationProvider>\n        </PresenceProvider>\n      </FormCallbacksProvider>\n    </FormBuilderContext.Provider>\n  )\n}\n","/* eslint-disable camelcase */\nimport {ObjectSchemaType, Path, ValidationMarker} from '@sanity/types'\nimport React, {useCallback} from 'react'\nimport {useSource} from '../../studio'\nimport {PatchChannel, PatchEvent} from '../patch'\nimport {FormBuilderProvider} from '../FormBuilderProvider'\nimport {FormFieldGroup, ObjectMember, StateTree} from '../store'\nimport {FieldProps, InputProps, ItemProps, RenderPreviewCallbackProps} from '../types'\nimport {\n  useFieldComponent,\n  useInputComponent,\n  useItemComponent,\n  usePreviewComponent,\n} from '../form-components-hooks'\nimport {FormNodePresence} from '../../presence'\nimport {PreviewLoader} from '../../preview/components/PreviewLoader'\n\n/**\n * @alpha This API might change.\n */\nexport interface FormProviderProps {\n  /**\n   * @internal Considered internal, do not use.\n   */\n  __internal_patchChannel: PatchChannel\n\n  autoFocus?: boolean\n  changesOpen?: boolean\n  children?: React.ReactNode\n  collapsedFieldSets: StateTree<boolean> | undefined\n  collapsedPaths: StateTree<boolean> | undefined\n  focusPath: Path\n  focused: boolean | undefined\n  groups: FormFieldGroup[]\n  id: string\n  members: ObjectMember[]\n  onChange: (changeEvent: PatchEvent) => void\n  onPathBlur: (path: Path) => void\n  onPathFocus: (path: Path) => void\n  onPathOpen: (path: Path) => void\n  onFieldGroupSelect: (path: Path, groupName: string) => void\n  onSetPathCollapsed: (path: Path, collapsed: boolean) => void\n  onSetFieldSetCollapsed: (path: Path, collapsed: boolean) => void\n  presence: FormNodePresence[]\n  readOnly?: boolean\n  schemaType: ObjectSchemaType\n  validation: ValidationMarker[]\n  value: {[field in string]: unknown} | undefined\n}\n\n/**\n * Default wiring for `FormBuilderProvider` when used with Sanity\n *\n * @alpha This API might change.\n */\nexport function FormProvider(props: FormProviderProps) {\n  const {\n    __internal_patchChannel: patchChannel,\n    autoFocus,\n    changesOpen,\n    children,\n    collapsedFieldSets,\n    collapsedPaths,\n    focusPath,\n    focused,\n    groups,\n    id,\n    members,\n    onChange,\n    onPathBlur,\n    onPathFocus,\n    onPathOpen,\n    onFieldGroupSelect,\n    onSetPathCollapsed,\n    onSetFieldSetCollapsed,\n    presence,\n    readOnly,\n    schemaType,\n    validation,\n    value,\n  } = props\n\n  const {file, image} = useSource().form\n\n  // These hooks may be stored in context as an perf optimization\n  const Input = useInputComponent()\n  const Field = useFieldComponent()\n  const Preview = usePreviewComponent()\n  const Item = useItemComponent()\n\n  const renderInput = useCallback(\n    (inputProps: Omit<InputProps, 'renderDefault'>) => <Input {...inputProps} />,\n    [Input]\n  )\n  const renderField = useCallback(\n    (fieldProps: Omit<FieldProps, 'renderDefault'>) => <Field {...fieldProps} />,\n    [Field]\n  )\n  const renderItem = useCallback(\n    (itemProps: Omit<ItemProps, 'renderDefault'>) => <Item {...itemProps} />,\n    [Item]\n  )\n  const renderPreview = useCallback(\n    (previewProps: RenderPreviewCallbackProps) => (\n      <PreviewLoader component={Preview} {...previewProps} />\n    ),\n    [Preview]\n  )\n\n  return (\n    <FormBuilderProvider\n      __internal_patchChannel={patchChannel}\n      autoFocus={autoFocus}\n      changesOpen={changesOpen}\n      collapsedFieldSets={collapsedFieldSets}\n      collapsedPaths={collapsedPaths}\n      file={file}\n      focusPath={focusPath}\n      focused={focused}\n      groups={groups}\n      id={id}\n      image={image}\n      members={members}\n      onChange={onChange}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n      onPathOpen={onPathOpen}\n      onFieldGroupSelect={onFieldGroupSelect}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      presence={presence}\n      readOnly={readOnly}\n      renderField={renderField}\n      renderInput={renderInput}\n      renderItem={renderItem}\n      renderPreview={renderPreview}\n      schemaType={schemaType}\n      validation={validation}\n      value={value}\n    >\n      {children}\n    </FormBuilderProvider>\n  )\n}\n","/* eslint-disable camelcase */\n/* eslint-disable react/jsx-handler-names */\n\nimport {ObjectSchemaType, Path, ValidationMarker} from '@sanity/types'\nimport React, {useCallback, useRef} from 'react'\nimport {FormPatch, PatchChannel, PatchEvent} from '../patch'\nimport {ObjectFormNode} from '../store/types/nodes'\nimport {ObjectInputProps} from '../types'\nimport {useFormBuilder} from '../useFormBuilder'\nimport {StateTree} from '../store'\nimport {EMPTY_ARRAY} from '../../util'\nimport {FormNodePresence} from '../../presence'\nimport {FormProvider} from './FormProvider'\nimport {useFormCallbacks} from './contexts/FormCallbacks'\n\n/**\n * @alpha\n */\nexport interface FormBuilderProps\n  extends Omit<ObjectFormNode, 'level' | 'path' | 'presence' | 'validation'> {\n  /**\n   * @internal Considered internal – do not use.\n   */\n  __internal_patchChannel: PatchChannel\n\n  autoFocus?: boolean\n  changesOpen?: boolean\n  collapsedFieldSets: StateTree<boolean> | undefined\n  collapsedPaths: StateTree<boolean> | undefined\n  focusPath: Path\n  focused: boolean | undefined\n  id: string\n  onChange: (changeEvent: PatchEvent) => void\n  onPathBlur: (path: Path) => void\n  onPathFocus: (path: Path) => void\n  onPathOpen: (path: Path) => void\n  onFieldGroupSelect: (path: Path, groupName: string) => void\n  onSetFieldSetCollapsed: (path: Path, collapsed: boolean) => void\n  onSetPathCollapsed: (path: Path, collapsed: boolean) => void\n  presence: FormNodePresence[]\n  readOnly?: boolean\n  schemaType: ObjectSchemaType\n  validation: ValidationMarker[]\n  value: {[field in string]: unknown} | undefined\n}\n\n/**\n * @alpha\n */\nexport function FormBuilder(props: FormBuilderProps) {\n  const {\n    __internal_patchChannel: patchChannel,\n    autoFocus,\n    changesOpen,\n    collapsedFieldSets,\n    collapsedPaths,\n    focusPath,\n    focused,\n    groups,\n    id,\n    members,\n    onChange,\n    onPathBlur,\n    onPathFocus,\n    onPathOpen,\n    onFieldGroupSelect,\n    onSetFieldSetCollapsed,\n    onSetPathCollapsed,\n    presence,\n    readOnly,\n    schemaType,\n    validation,\n    value,\n  } = props\n\n  return (\n    <FormProvider\n      __internal_patchChannel={patchChannel}\n      autoFocus={autoFocus}\n      changesOpen={changesOpen}\n      collapsedFieldSets={collapsedFieldSets}\n      collapsedPaths={collapsedPaths}\n      focusPath={focusPath}\n      focused={focused}\n      groups={groups}\n      id={id}\n      members={members}\n      onChange={onChange}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n      onPathOpen={onPathOpen}\n      onFieldGroupSelect={onFieldGroupSelect}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      presence={presence}\n      validation={validation}\n      readOnly={readOnly}\n      schemaType={schemaType}\n      value={value}\n    >\n      <RootInput />\n    </FormProvider>\n  )\n}\n\nfunction RootInput() {\n  const {\n    focusPath,\n    focused,\n    groups,\n    id,\n    members,\n    readOnly,\n    renderField,\n    renderInput,\n    renderItem,\n    renderPreview,\n    schemaType,\n    value,\n  } = useFormBuilder()\n\n  const {\n    onChange,\n    onFieldGroupSelect,\n    onPathBlur,\n    onPathFocus,\n    onPathOpen,\n    onSetFieldSetCollapsed,\n    onSetPathCollapsed,\n  } = useFormCallbacks()\n\n  const handleCollapseField = useCallback(\n    (fieldName: string) => onSetPathCollapsed([fieldName], true),\n    [onSetPathCollapsed]\n  )\n\n  const handleExpandField = useCallback(\n    (fieldName: string) => onSetPathCollapsed([fieldName], false),\n    [onSetPathCollapsed]\n  )\n\n  const handleBlur = useCallback(() => onPathBlur(EMPTY_ARRAY), [onPathBlur])\n\n  const handleFocus = useCallback(() => onPathFocus(EMPTY_ARRAY), [onPathFocus])\n\n  const handleChange = useCallback(\n    (patch: FormPatch | FormPatch[] | PatchEvent) => onChange(PatchEvent.from(patch)),\n    [onChange]\n  )\n\n  const focusRef = useRef(null)\n\n  const handleSelectFieldGroup = useCallback(\n    (groupName: string) => onFieldGroupSelect(EMPTY_ARRAY, groupName),\n    [onFieldGroupSelect]\n  )\n\n  const handleOpenField = useCallback((fieldName: string) => onPathOpen([fieldName]), [onPathOpen])\n\n  const handleCloseField = useCallback(() => onPathOpen([]), [onPathOpen])\n\n  const handleCollapseFieldSet = useCallback(\n    (fieldSetName: string) => onSetFieldSetCollapsed([fieldSetName], true),\n    [onSetFieldSetCollapsed]\n  )\n\n  const handleExpandFieldSet = useCallback(\n    (fieldSetName: string) => onSetFieldSetCollapsed([fieldSetName], false),\n    [onSetFieldSetCollapsed]\n  )\n\n  const rootInputProps: Omit<ObjectInputProps, 'renderDefault'> = {\n    focusPath,\n    elementProps: {ref: focusRef, id, onBlur: handleBlur, onFocus: handleFocus},\n    changed: members.some((m) => m.kind === 'field' && m.field.changed),\n    focused,\n    groups,\n    id,\n    level: 0,\n    members,\n    onChange: handleChange,\n    onFieldClose: handleCloseField,\n    onFieldCollapse: handleCollapseField,\n    onFieldSetCollapse: handleCollapseFieldSet,\n    onFieldExpand: handleExpandField,\n    onFieldSetExpand: handleExpandFieldSet,\n    onPathFocus: onPathFocus,\n    onFieldOpen: handleOpenField,\n    onFieldGroupSelect: handleSelectFieldGroup,\n    path: EMPTY_ARRAY,\n    presence: EMPTY_ARRAY,\n    readOnly,\n    renderField,\n    renderInput,\n    renderItem,\n    renderPreview,\n    schemaType,\n    validation: EMPTY_ARRAY,\n    value,\n  }\n\n  return <>{renderInput(rootInputProps)}</>\n}\n","import React, {ComponentType, createContext, HTMLProps, useContext, useMemo} from 'react'\nimport {Path} from '@sanity/types'\nimport {TemplatePermissionsResult} from '../../../store'\n\nconst Context = createContext<ReferenceInputOptions>({})\n\n/** @internal */\nexport interface TemplateOption {\n  id: string\n  params?: Record<string, string | number | boolean>\n}\n\n/**\n * @internal\n */\nexport interface EditReferenceOptions {\n  id: string\n  type: string\n  parentRefPath: Path\n  template: TemplateOption\n}\n\n/** @internal */\nexport interface EditReferenceLinkComponentProps {\n  documentId: string\n  documentType: string\n  parentRefPath: Path\n  template?: TemplateOption\n  children: React.ReactNode\n}\n\n/**\n * @internal\n */\nexport interface ReferenceInputOptions {\n  /**\n   * Represents the highlighted path if ths current document has a related open\n   * child (e.g. reference in place).\n   */\n  activePath?: {path: Path; state: 'selected' | 'pressed' | 'none'}\n  /**\n   * A specialized `EditReferenceLinkComponent` component that takes in the needed props to open a\n   * referenced document to the right\n   */\n  EditReferenceLinkComponent?: ComponentType<\n    Omit<HTMLProps<'a'>, 'children'> & EditReferenceLinkComponentProps\n  >\n\n  initialValueTemplateItems?: TemplatePermissionsResult[]\n\n  /**\n   * Similar to `EditReferenceChildLink` expect without the wrapping component\n   */\n  onEditReference?: (options: EditReferenceOptions) => void\n}\n\n/**\n * @internal\n */\nexport function useReferenceInputOptions() {\n  return useContext(Context)\n}\n\n/**\n * @internal\n */\nexport function ReferenceInputOptionsProvider(\n  props: ReferenceInputOptions & {children: React.ReactNode}\n) {\n  const {\n    children,\n    activePath,\n    EditReferenceLinkComponent,\n    onEditReference,\n    initialValueTemplateItems,\n  } = props\n\n  const contextValue = useMemo(\n    () => ({\n      activePath,\n      EditReferenceLinkComponent,\n      onEditReference,\n      initialValueTemplateItems,\n    }),\n    [activePath, EditReferenceLinkComponent, onEditReference, initialValueTemplateItems]\n  )\n\n  return <Context.Provider value={contextValue}>{children}</Context.Provider>\n}\n","import {createContext} from 'react'\nimport {ReviewChangesContextValue} from './types'\n\n/**\n * @internal\n */\nexport const ReviewChangesContext = createContext<ReviewChangesContextValue | null>(null)\n","import {useContext} from 'react'\nimport {ReviewChangesContext} from './ReviewChangesContext'\nimport {ReviewChangesContextValue} from './types'\n\n/**\n * @internal\n */\nexport function useReviewChanges(): ReviewChangesContextValue {\n  const reviewChanges = useContext(ReviewChangesContext)\n\n  if (!reviewChanges) {\n    throw new Error('Review changes: missing context value')\n  }\n\n  return reviewChanges\n}\n","import {useCallback} from 'react'\nimport scrollIntoView from 'scroll-into-view-if-needed'\nimport {useDidUpdate} from './useDidUpdate'\n\n/**\n * A hook to help make sure the parent element of a value edited in a dialog (or \"out of band\") stays\n visible in the background\n * @param elementRef - The element to scroll into view when the proivided focusWithin changes from true to false\n * @param hasFocusWithin - A boolean indicating whether we have has focus within the currently edited value\n */\nexport function useScrollIntoViewOnFocusWithin(\n  elementRef: {current: HTMLElement | null},\n  hasFocusWithin: boolean\n): void {\n  return useDidUpdate(\n    hasFocusWithin,\n    useCallback(\n      (hadFocus, hasFocus) => {\n        if (elementRef.current && !hadFocus && hasFocus) {\n          scrollIntoView(elementRef.current, {scrollMode: 'always'})\n        }\n      },\n      [elementRef]\n    )\n  )\n}\n","import getRandomValues from 'get-random-values-esm'\n\n// WHATWG crypto RNG - https://w3c.github.io/webcrypto/Overview.html\nfunction whatwgRNG(length = 16) {\n  const rnds8 = new Uint8Array(length)\n  getRandomValues(rnds8)\n  return rnds8\n}\n\nconst getByteHexTable = (() => {\n  let table: string[]\n  return () => {\n    if (table) {\n      return table\n    }\n    table = []\n    for (let i = 0; i < 256; ++i) {\n      table[i] = (i + 0x100).toString(16).substring(1)\n    }\n    return table\n  }\n})()\n\nexport function randomKey(length?: number) {\n  const table = getByteHexTable()\n  return whatwgRNG(length)\n    .reduce((str, n) => str + table[n], '')\n    .slice(0, length)\n}\n","import {AvatarStack, Box, Card, Text, Theme, Tooltip, TooltipProps} from '@sanity/ui'\nimport React, {useMemo} from 'react'\nimport styled, {css, useTheme} from 'styled-components'\nimport {usePreviewCard, UserAvatar} from '../components'\nimport {DocumentPresence} from '../store'\nimport {isNonNullable} from '../util'\n\n/** @internal */\nexport interface DocumentPreviewPresenceProps {\n  presence: Omit<DocumentPresence, 'path'>[]\n}\n\nconst PRESENCE_MENU_POPOVER_PROPS: TooltipProps = {\n  portal: true,\n}\n\nconst AvatarStackCard = styled(Card)(({theme, $selected}: {theme: Theme; $selected?: boolean}) => {\n  const {color} = theme.sanity\n\n  return css`\n    --card-bg-color: inherit;\n    --card-fg-color: inherit;\n    --card-hairline-hard-color: ${$selected ? color.selectable?.default.pressed.border : undefined};\n  `\n})\n\nconst TooltipContentBox = styled(Box)`\n  max-width: 150px;\n`\n\nconst getTooltipText = (presence: Omit<DocumentPresence, 'path'>[]) => {\n  if (presence.length === 1) {\n    return `${presence[0].user.displayName} is editing this document`\n  }\n\n  if (presence.length > 1) {\n    return `${presence.length} people are editing this document right now`\n  }\n\n  return undefined\n}\n\n/** @internal */\nexport function DocumentPreviewPresence(props: DocumentPreviewPresenceProps) {\n  const {presence} = props\n  const {color} = useTheme().sanity\n  const invertedScheme = color.dark ? 'light' : 'dark'\n  const {selected} = usePreviewCard()\n\n  const uniqueUsers = useMemo(\n    () =>\n      Array.from(new Set(presence.map((a) => a.user.id)))\n        .map((id) => {\n          return presence.find((a) => a.user.id === id)\n        })\n        .filter(isNonNullable),\n    [presence]\n  )\n\n  const tooltipContent = useMemo(() => {\n    return (\n      <TooltipContentBox padding={2}>\n        <Text align=\"center\" size={1}>\n          {getTooltipText(uniqueUsers)}\n        </Text>\n      </TooltipContentBox>\n    )\n  }, [uniqueUsers])\n\n  return (\n    <Tooltip content={tooltipContent} {...PRESENCE_MENU_POPOVER_PROPS}>\n      <AvatarStackCard scheme={selected ? invertedScheme : undefined} $selected={selected}>\n        <AvatarStack maxLength={2}>\n          {uniqueUsers.map((item) => (\n            <UserAvatar key={item.user.id} user={item.user} />\n          ))}\n        </AvatarStack>\n      </AvatarStackCard>\n    </Tooltip>\n  )\n}\n","// disable overlay rendering entirely and only display presence in fields\nexport const DISABLE_OVERLAY = false\n\n// number of avatars to display on each fields (will be stacked and have a counter if more than 3 users in a field)\nexport const MAX_AVATARS_DOCK = 3\nexport const MAX_AVATARS_GLOBAL = 3\nexport const DEFAULT_MAX_AVATARS_FIELDS = 3\n\n// distance between avatars in pixels (negative number means overlap)\nexport const AVATAR_DISTANCE = -4\n\n// height/width of the avatars in pixels\nexport const AVATAR_SIZE = 23\n\nexport const AVATAR_ARROW_HEIGHT = 4\n\n// these are the thresholds in which the intersection observers will notify about regions going in/out of viewport\n// these will affect the thresholds below, so make sure to coordinate edits\nexport const INTERSECTION_THRESHOLDS = [0, 0.25, 0.75, 1]\n\n// The elements that reports intersection changes are padded top+bottom in order to detect when entering leaving\nexport const INTERSECTION_ELEMENT_PADDING = 23\n\n// Make the avatars snap to the top dock when they are closer than this from the top\nexport const SNAP_TO_DOCK_DISTANCE_TOP = 8\n\n// Make the avatars snap to the bottom dock when they are closer than this from the bottom\nexport const SNAP_TO_DOCK_DISTANCE_BOTTOM = 8\n\n// The avatar will move to the right when this close (in pixels) to the top\nexport const SLIDE_RIGHT_THRESHOLD_TOP = 20\n\n// The avatar will move to the right when this close (in pixels) to the bottom\nexport const SLIDE_RIGHT_THRESHOLD_BOTTOM = 20\n\n// Switch on debug mode (will display regions)\nexport const DEBUG = false\n","export const splitRight = <T>(array: T[], max: number): [T[], T[]] => {\n  const indexFromMax = array.length > max ? max - 1 : max\n  const idx = Math.max(0, array.length - indexFromMax)\n  return [array.slice(0, idx), array.slice(idx)]\n}\n\n// export const splitRight = <T>(array: T[], index: number): [T[], T[]] => {\n//   const idx = Math.max(0, array.length - index)\n//   return [array.slice(0, idx), array.slice(idx)]\n// }\n//\nexport const split = <T>(array: T[], index: number): [T[], T[]] => {\n  const idx = Math.max(0, index)\n  return [array.slice(0, idx), array.slice(idx)]\n}\n","import styled from 'styled-components'\nimport {Flex} from '@sanity/ui'\n\nexport const FlexWrapper = styled(Flex)`\n  & > div:first-child {\n    flex: 1;\n    min-width: 0;\n  }\n`\n\nexport const InnerBox = styled(Flex)`\n  height: 23px;\n  min-width: 23px;\n  vertical-align: top;\n`\n","import React from 'react'\nimport {FormNodePresence} from './types'\n\n/** @internal */\nexport const FormFieldPresenceContext = React.createContext<FormNodePresence[]>([])\n","import React, {useMemo} from 'react'\nimport {Flex, Stack, Text, Tooltip} from '@sanity/ui'\nimport {UserAvatar} from '../components/UserAvatar'\nimport {FormNodePresence} from './types'\n\ninterface PresenceTooltipProps {\n  children?: React.ReactElement\n  items: FormNodePresence[]\n}\n\n/**\n * The \"documentScrollElement\" is being passed to the PortalProvider in DocumentPanel.\n * The default portal element provided by the PortalProvider causes some layout issues with the Tooltip.\n * Therefore, another portal element (i.e. the \"documentScrollElement\") is being used to solve this.\n */\n\nexport function PresenceTooltip(props: PresenceTooltipProps) {\n  const {children, items} = props\n\n  const content = useMemo(\n    () => (\n      <Stack padding={1}>\n        {items.map((item) => (\n          <Flex align=\"center\" gap={2} padding={1} key={item.user.id}>\n            <div>\n              <UserAvatar user={item.user} status=\"online\" />\n            </div>\n\n            <Text size={1}>{item.user.displayName}</Text>\n          </Flex>\n        ))}\n      </Stack>\n    ),\n    [items]\n  )\n\n  return (\n    <Tooltip content={content} placement=\"top\" portal=\"documentScrollElement\">\n      {children}\n    </Tooltip>\n  )\n}\n","import {createTrackerScope, Reported} from '../../components/react-track-elements'\nimport {FieldPresenceData} from '../types'\n\nexport type ReportedPresenceData = Reported<FieldPresenceData>\n\nconst {Tracker, useReporter, useReportedValues} = createTrackerScope<FieldPresenceData>()\n\nexport {Tracker, useReporter, useReportedValues}\n","import React, {memo, useContext, useId} from 'react'\nimport {sortBy, uniqBy} from 'lodash'\nimport {AvatarCounter, AvatarPosition} from '@sanity/ui'\nimport {UserAvatar} from '../components/UserAvatar'\nimport {\n  AVATAR_DISTANCE,\n  AVATAR_SIZE,\n  DEFAULT_MAX_AVATARS_FIELDS,\n  DISABLE_OVERLAY,\n} from './constants'\nimport {splitRight} from './utils'\nimport {FlexWrapper, InnerBox} from './FieldPresence.styled'\nimport {FormFieldPresenceContext} from './context'\nimport {PresenceTooltip} from './PresenceTooltip'\nimport {useReporter} from './overlay/tracker'\nimport {FormNodePresence} from './types'\n\n/** @internal */\nexport interface FieldPresenceInnerProps {\n  maxAvatars?: number\n  presence: FormNodePresence[]\n  stack?: boolean\n  position?: AvatarPosition\n  animateArrowFrom?: AvatarPosition\n}\n\nfunction calcAvatarStackWidth(len: number) {\n  return -AVATAR_DISTANCE + (AVATAR_SIZE + AVATAR_DISTANCE) * len\n}\n\n/** @internal */\nexport const FieldPresenceInner = memo(function FieldPresenceInner({\n  presence,\n  position = 'inside',\n  animateArrowFrom = 'inside',\n  maxAvatars = DEFAULT_MAX_AVATARS_FIELDS,\n  stack = true,\n}: FieldPresenceInnerProps) {\n  const uniquePresence = uniqBy(presence || [], (item) => item.user.id)\n  const sorted = sortBy(uniquePresence, (_presence) => _presence.lastActiveAt)\n  const [hidden, visible] = stack ? splitRight(sorted, maxAvatars) : [[], sorted]\n\n  const avatars = [\n    ...visible.reverse().map((_visible) => ({\n      key: _visible.user.id,\n      element: (\n        <UserAvatar\n          animateArrowFrom={animateArrowFrom}\n          position={position}\n          status=\"online\"\n          user={_visible.user}\n        />\n      ),\n    })),\n    hidden.length >= 2\n      ? {\n          key: 'counter',\n          element: <AvatarCounter count={hidden.length} />,\n        }\n      : null,\n  ].filter(Boolean)\n\n  const maxWidth = calcAvatarStackWidth(maxAvatars)\n  const currWidth = Math.min(calcAvatarStackWidth(uniquePresence.length), maxWidth)\n\n  return (\n    <FlexWrapper justify=\"flex-end\" style={{width: maxWidth}}>\n      <div />\n\n      <PresenceTooltip items={uniquePresence}>\n        <InnerBox direction=\"row-reverse\" style={{width: currWidth}}>\n          {avatars.map(\n            (av, i) =>\n              av && (\n                <div\n                  key={av.key}\n                  style={{\n                    position: 'absolute',\n                    transform: `translate3d(${-i * (AVATAR_SIZE + AVATAR_DISTANCE)}px, 0px, 0px)`,\n                    transitionProperty: 'transform',\n                    transitionDuration: '200ms',\n                    transitionTimingFunction: 'cubic-bezier(0.85, 0, 0.15, 1)',\n                    zIndex: 100 - i,\n                  }}\n                >\n                  {av.element}\n                </div>\n              )\n          )}\n        </InnerBox>\n      </PresenceTooltip>\n    </FlexWrapper>\n  )\n})\n\n/** @internal */\nexport interface FieldPresenceProps {\n  presence: FormNodePresence[]\n  maxAvatars: number\n}\n\n/** @internal */\nexport function FieldPresenceWithOverlay(props: FieldPresenceProps) {\n  const contextPresence = useContext(FormFieldPresenceContext)\n  const {presence = contextPresence, maxAvatars = DEFAULT_MAX_AVATARS_FIELDS} = props\n  const ref = React.useRef(null)\n\n  useReporter(useId(), () => ({presence, element: ref.current!, maxAvatars: maxAvatars}))\n\n  const minWidth = -AVATAR_DISTANCE + (AVATAR_SIZE + AVATAR_DISTANCE) * props.maxAvatars\n\n  return (\n    <FlexWrapper\n      justify=\"flex-end\"\n      ref={ref}\n      style={{minWidth: minWidth, minHeight: AVATAR_SIZE}}\n    />\n  )\n}\n\n/** @internal */\nexport function FieldPresenceWithoutOverlay(props: FieldPresenceProps) {\n  const contextPresence = useContext(FormFieldPresenceContext)\n  const {presence = contextPresence, maxAvatars = DEFAULT_MAX_AVATARS_FIELDS} = props\n\n  if (!presence.length) {\n    return null\n  }\n\n  return <FieldPresenceInner presence={presence} maxAvatars={maxAvatars} />\n}\n\n/** @internal */\nexport const FieldPresence = DISABLE_OVERLAY\n  ? FieldPresenceWithoutOverlay\n  : FieldPresenceWithOverlay\n","import {Path} from '@sanity/types'\nimport * as PathUtils from '@sanity/util/paths'\nimport React, {useMemo} from 'react'\nimport {FormFieldPresenceContext} from './context'\n\nconst EMPTY_ARRAY: never[] = []\n\nfunction trimChildPath(path: Path, childPath: Path) {\n  return PathUtils.startsWith(path, childPath) ? PathUtils.trimLeft(path, childPath) : EMPTY_ARRAY\n}\n\n/** @internal */\nexport interface PresenceScopeProps {\n  readOnly?: boolean\n  path: Path\n  children: React.ReactNode\n}\n\n/** @internal */\nexport function PresenceScope(props: PresenceScopeProps) {\n  const {readOnly, path, children} = props\n  const contextPresence = React.useContext(FormFieldPresenceContext)\n\n  const childPresence = useMemo(() => {\n    return readOnly\n      ? EMPTY_ARRAY\n      : (contextPresence || EMPTY_ARRAY)\n          .filter((presence) => {\n            return PathUtils.startsWith(path, presence.path)\n          })\n          .map((presence) => ({\n            ...presence,\n            path: trimChildPath(path, presence.path),\n          }))\n  }, [contextPresence, path, readOnly])\n\n  return (\n    <FormFieldPresenceContext.Provider value={childPresence}>\n      {children}\n    </FormFieldPresenceContext.Provider>\n  )\n}\n","import {Subject, Observable} from 'rxjs'\nimport {filter} from 'rxjs/operators'\n\nexport interface ObservableIntersectionObserver {\n  observe: (element: Element) => Observable<IntersectionObserverEntry>\n}\n\nexport const createIntersectionObserver = (\n  options?: IntersectionObserverInit\n): ObservableIntersectionObserver => {\n  const entries$ = new Subject<IntersectionObserverEntry>()\n  const intersectionObserver = new IntersectionObserver((entries) => {\n    entries.forEach((entry) => {\n      entries$.next(entry)\n    })\n  }, options)\n  return {\n    observe: (element: Element) => {\n      return new Observable<IntersectionObserverEntry>((subscriber) => {\n        const subscription = entries$\n          .pipe(filter((entry) => entry.target === element))\n          .subscribe(subscriber)\n        intersectionObserver.observe(element)\n        return () => {\n          subscription.unsubscribe()\n          intersectionObserver.unobserve(element)\n        }\n      })\n    },\n  }\n}\n","import React from 'react'\nimport {tap} from 'rxjs/operators'\nimport type {ObservableIntersectionObserver} from './intersectionObserver'\n\nexport interface WithIntersectionProps {\n  onIntersection: (id: string, entry: IntersectionObserverEntry) => void\n  io: ObservableIntersectionObserver\n  id: string\n}\n\nexport const WithIntersection = (\n  props: WithIntersectionProps & React.HTMLProps<HTMLDivElement>\n) => {\n  const {onIntersection, io, id, ...rest} = props\n  const element = React.useRef<HTMLDivElement | null>(null)\n  React.useEffect(() => {\n    const el = element.current\n    if (!el) return undefined\n    const subscription = io\n      .observe(el)\n      .pipe(tap((entry) => onIntersection(id, entry)))\n      .subscribe()\n    return () => subscription.unsubscribe()\n  }, [io, id, onIntersection])\n  return <div ref={element} {...rest} />\n}\n","import styled, {css} from 'styled-components'\nimport {WithIntersection} from './WithIntersection'\n\ninterface StyleProps {\n  $debug: boolean\n  margins?: [number, number, number, number]\n}\n\nexport const RootWrapper = styled.div`\n  position: relative;\n`\n\nexport const OverlayWrapper = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  pointer-events: none;\n  z-index: 13;\n`\n\nexport const RegionWrapper = css`\n  overflow: hidden;\n  pointer-events: none;\n  position: absolute;\n`\n\nexport const TopRegionWrapper = styled(WithIntersection)(({$debug, margins}: StyleProps) => {\n  return css`\n    ${RegionWrapper}\n\n    z-index: 100;\n    position: sticky;\n    height: 1px;\n    top: ${margins ? `${margins[0] - 1}px` : undefined};\n    background-color: ${$debug ? 'red' : 'none'};\n  `\n})\n\nexport const MiddleRegionWrapper = styled(WithIntersection)(({$debug}: StyleProps) => {\n  return css`\n    ${RegionWrapper}\n\n    visibility: none;\n\n    ${$debug &&\n    css`\n      background: rgba(255, 0, 0, 0.25);\n      outline: 1px solid #00b;\n      visibility: visible;\n    `}\n  `\n})\n\nexport const BottomRegionWrapper = styled(WithIntersection)(({$debug}: StyleProps) => {\n  return css`\n    ${RegionWrapper}\n\n    position: sticky;\n    bottom: -1px;\n    height: 1px;\n    background-color: ${$debug ? 'blue' : 'transparent'};\n  `\n})\n","import React, {forwardRef, useCallback, useMemo, useRef, useState} from 'react'\nimport {\n  SNAP_TO_DOCK_DISTANCE_BOTTOM,\n  SNAP_TO_DOCK_DISTANCE_TOP,\n  DEBUG,\n  INTERSECTION_ELEMENT_PADDING,\n  INTERSECTION_THRESHOLDS,\n} from '../constants'\nimport {ReportedRegionWithRect, RegionWithIntersectionDetails, FieldPresenceData} from '../types'\nimport {createIntersectionObserver} from './intersectionObserver'\n\nimport {\n  RootWrapper,\n  OverlayWrapper,\n  TopRegionWrapper,\n  MiddleRegionWrapper,\n  BottomRegionWrapper,\n} from './RegionsWithIntersections.styled'\n\ninterface RegionsWithIntersectionsProps {\n  regions: ReportedRegionWithRect<FieldPresenceData>[]\n  render: (\n    regionsWithIntersectionDetails: RegionWithIntersectionDetails[],\n    containerWidth: number\n  ) => React.ReactNode | null\n  children: React.ReactNode\n  margins: [number, number, number, number]\n}\n\nconst toPx = (num: number) => `${num}px`\nconst negate = (num: number) => 0 - num\n\nexport const RegionsWithIntersections = forwardRef(function RegionsWithIntersections(\n  props: RegionsWithIntersectionsProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {regions, render, children, margins: marginsProp} = props\n\n  const overlayRef = useRef<HTMLDivElement | null>(null)\n\n  // Make sure `margins` is memoized\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const margins = useMemo(() => marginsProp, [JSON.stringify(marginsProp)])\n\n  const io = useMemo(\n    () =>\n      createIntersectionObserver({\n        rootMargin: margins.map(negate).map(toPx).join(' '),\n        threshold: INTERSECTION_THRESHOLDS,\n      }),\n    [margins]\n  )\n\n  const [intersections, setIntersections] = useState<\n    Record<\n      string,\n      | {\n          boundingClientRect: {top: number; bottom: number}\n          isIntersecting: boolean\n          intersectionRect: {top: number; bottom: number}\n        }\n      | undefined\n    >\n  >({})\n\n  const onIntersection = useCallback((id: any, entry: any) => {\n    setIntersections((current) => ({...current, [id]: entry}))\n  }, [])\n\n  const top = intersections['::top']\n  const bottom = intersections['::bottom']\n  const regionsWithIntersectionDetails: RegionWithIntersectionDetails[] = useMemo(\n    () =>\n      (top && bottom\n        ? regions\n            .filter((region) => region.presence?.length > 0)\n            .map((region): RegionWithIntersectionDetails | null => {\n              const intersection = intersections[region.id]\n\n              if (!intersection) {\n                return null\n              }\n\n              const {bottom: boundsBottom, top: boundsTop} = intersection.boundingClientRect\n\n              const aboveTop = intersection.boundingClientRect.top < top.boundingClientRect.bottom\n              const belowBottom =\n                intersection.boundingClientRect.top < bottom.boundingClientRect.top\n\n              // eslint-disable-next-line no-nested-ternary\n              const distanceTop = intersection.isIntersecting\n                ? boundsTop - (intersection.intersectionRect.top - INTERSECTION_ELEMENT_PADDING)\n                : aboveTop\n                ? -top.boundingClientRect.bottom\n                : bottom.boundingClientRect.top\n\n              // eslint-disable-next-line no-nested-ternary\n              const distanceBottom = intersection.isIntersecting\n                ? -(\n                    boundsBottom -\n                    (intersection.intersectionRect.bottom + INTERSECTION_ELEMENT_PADDING)\n                  )\n                : belowBottom\n                ? bottom.boundingClientRect.top\n                : -top.boundingClientRect.bottom\n\n              const position =\n                // eslint-disable-next-line no-nested-ternary\n                distanceTop <= SNAP_TO_DOCK_DISTANCE_TOP\n                  ? 'top'\n                  : distanceBottom <= SNAP_TO_DOCK_DISTANCE_BOTTOM\n                  ? 'bottom'\n                  : 'inside'\n\n              return {\n                distanceTop,\n                distanceBottom,\n                region,\n                position,\n              }\n            })\n            .filter(Boolean)\n        : []) as RegionWithIntersectionDetails[],\n    [bottom, intersections, regions, top]\n  )\n\n  return (\n    <RootWrapper ref={ref}>\n      <TopRegionWrapper\n        $debug={DEBUG}\n        io={io}\n        id=\"::top\"\n        onIntersection={onIntersection}\n        margins={margins}\n      />\n      <div>{children}</div>\n      <OverlayWrapper ref={overlayRef}>\n        {overlayRef.current &&\n          render(regionsWithIntersectionDetails, overlayRef.current.offsetWidth)}\n      </OverlayWrapper>\n      {regions.map((region) => {\n        const forceWidth = region.rect.width === 0\n        return (\n          <MiddleRegionWrapper\n            $debug={DEBUG}\n            io={io}\n            onIntersection={onIntersection}\n            key={region.id}\n            id={region.id}\n            style={{\n              width: forceWidth ? 1 : region.rect.width,\n              left: region.rect.left - (forceWidth ? 1 : 0),\n              top: region.rect.top - INTERSECTION_ELEMENT_PADDING,\n              height: region.rect.height + INTERSECTION_ELEMENT_PADDING * 2,\n            }}\n          />\n        )\n      })}\n      <BottomRegionWrapper $debug={DEBUG} id=\"::bottom\" io={io} onIntersection={onIntersection} />\n    </RootWrapper>\n  )\n})\n","/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport React, {memo, useMemo} from 'react'\nimport {flatten, groupBy, orderBy, sortBy} from 'lodash'\nimport {\n  AVATAR_ARROW_HEIGHT,\n  AVATAR_DISTANCE,\n  AVATAR_SIZE,\n  DEBUG,\n  MAX_AVATARS_DOCK,\n  SLIDE_RIGHT_THRESHOLD_BOTTOM,\n  SLIDE_RIGHT_THRESHOLD_TOP,\n} from '../constants'\nimport {\n  FieldPresenceData,\n  Rect,\n  ReportedRegionWithRect,\n  RegionWithIntersectionDetails,\n} from '../types'\nimport {FieldPresenceInner} from '../FieldPresence'\n\nimport {RegionsWithIntersections} from './RegionsWithIntersections'\nimport {ReportedPresenceData, useReportedValues} from './tracker'\n\nconst ITEM_TRANSITION: React.CSSProperties = {\n  transitionProperty: 'transform',\n  transitionDuration: '200ms',\n  transitionTimingFunction: 'cubic-bezier(0.85, 0, 0.15, 1)',\n}\n\nconst bottom = (rect: {top: number; height: number}) => rect.top + rect.height\n\ntype RegionWithSpacerHeight = RegionWithIntersectionDetails & {\n  spacerHeight: number\n}\n\nfunction withSpacerHeight(\n  regionsWithIntersectionDetails: RegionWithIntersectionDetails[]\n): RegionWithSpacerHeight[] {\n  return regionsWithIntersectionDetails.map(\n    (withIntersection, idx, _regionsWithIntersectionDetails) => {\n      const prevRect = _regionsWithIntersectionDetails[idx - 1]?.region.rect\n      const prevBottom = prevRect ? bottom(prevRect) : 0\n      return {...withIntersection, spacerHeight: withIntersection.region.rect.top - prevBottom}\n    }\n  )\n}\n\nconst orderByTop = (regionsWithIntersectionDetails: RegionWithIntersectionDetails[]) =>\n  orderBy(regionsWithIntersectionDetails, (withIntersection) => withIntersection.region.rect.top)\n\nconst plus = (a: number, b: number) => a + b\nconst sum = (array: number[]) => array.reduce(plus, 0)\n\ntype Margins = [number, number, number, number]\ntype RegionWithSpacerHeightAndIndent = RegionWithSpacerHeight & {indent: number}\n\nfunction group(regionsWithIntersectionDetails: RegionWithIntersectionDetails[]): {\n  top: RegionWithSpacerHeightAndIndent[]\n  inside: RegionWithSpacerHeightAndIndent[]\n  bottom: RegionWithSpacerHeightAndIndent[]\n} {\n  const regionsWithSpacerHeight = withSpacerHeight(orderByTop(regionsWithIntersectionDetails))\n  const grouped: {\n    top: RegionWithSpacerHeight[]\n    inside: RegionWithSpacerHeight[]\n    bottom: RegionWithSpacerHeight[]\n  } = {\n    top: [],\n    inside: [],\n    bottom: [],\n    ...groupBy(regionsWithSpacerHeight, (_withSpacerHeight) => _withSpacerHeight.position),\n  }\n\n  return {\n    top: orderByTop(grouped.top).map(\n      (withIntersection, i, grp): RegionWithSpacerHeightAndIndent => ({\n        ...(withIntersection as RegionWithSpacerHeight),\n        indent: grp\n          .slice(i + 1)\n          .reduce((w, _withIntersection) => w + _withIntersection.region.rect.width, 0),\n      })\n    ),\n    inside: orderByTop(grouped.inside).map(\n      (withIntersection): RegionWithSpacerHeightAndIndent => ({\n        ...(withIntersection as RegionWithSpacerHeight),\n        indent: 0,\n      })\n    ),\n    bottom: orderByTop(grouped.bottom).map(\n      (withIntersection, i, grp): RegionWithSpacerHeightAndIndent => ({\n        ...(withIntersection as RegionWithSpacerHeight),\n        indent: grp\n          .slice(0, i)\n          .reduce((w, _withIntersection) => w + _withIntersection.region.rect.width, 0),\n      })\n    ),\n  }\n}\n\nconst Spacer = ({height, ...rest}: {height: number; style?: React.CSSProperties}) => (\n  <div style={{height: Math.max(0, height), ...rest?.style}} />\n)\n\nconst DEFAULT_MARGINS: Margins = [0, 0, 0, 0]\n\nconst getOffsetsTo = (source: HTMLElement, target: HTMLElement) => {\n  let el: HTMLElement | null = source\n  let top = -el.scrollTop\n  let left = 0\n  while (el && el !== target) {\n    top += el.offsetTop - el.scrollTop\n    left += el.offsetLeft\n    el = el.offsetParent instanceof HTMLElement ? el.offsetParent : null\n  }\n  return {top, left}\n}\n\nfunction getRelativeRect(element: HTMLElement, parent: HTMLElement): Rect {\n  return {\n    ...getOffsetsTo(element, parent),\n    width: element.offsetWidth,\n    height: element.offsetHeight,\n  }\n}\n\nfunction regionsWithComputedRects(\n  regions: ReportedPresenceData[],\n  parent: HTMLElement\n): ReportedRegionWithRect<FieldPresenceData>[] {\n  return regions.map(([id, region]) => ({\n    ...region,\n    id,\n    rect: getRelativeRect(region.element, parent),\n  }))\n}\n\ntype Props = {margins: Margins; children: React.ReactNode}\nexport function StickyOverlay(props: Props) {\n  const {children, margins = DEFAULT_MARGINS} = props\n  const reportedValues = useReportedValues()\n  const ref = React.useRef<HTMLDivElement | null>(null)\n  const regions = React.useMemo(\n    () => (ref.current ? regionsWithComputedRects(reportedValues, ref.current) : EMPTY_ARRAY),\n    [reportedValues]\n  )\n\n  const renderCallback = React.useCallback(\n    (regionsWithIntersectionDetails: RegionWithIntersectionDetails[], containerWidth: any) => {\n      const grouped = group(\n        regionsWithIntersectionDetails.filter((item) => item.region.presence.length > 0)\n      )\n      const topSpacing = sum(grouped.top.map((n) => n.region.rect.height + n.spacerHeight))\n      const bottomSpacing = sum(\n        [...grouped.inside, ...grouped.bottom].map((n) => n.region.rect.height + n.spacerHeight)\n      )\n\n      // todo: this needs cleaning up, should process all the needed layout data in one go\n      const counts = grouped.inside.reduce(\n        (_counts, withIntersection) => {\n          const {distanceTop, distanceBottom} = withIntersection\n\n          const nearTop = distanceTop <= SLIDE_RIGHT_THRESHOLD_TOP\n          const nearBottom = distanceBottom <= SLIDE_RIGHT_THRESHOLD_BOTTOM\n          return {\n            nearTop: _counts.nearTop + (nearTop ? withIntersection.region.presence.length : 0),\n            nearBottom:\n              _counts.nearBottom + (nearBottom ? withIntersection.region.presence.length : 0),\n          }\n        },\n        {nearTop: 0, nearBottom: 0}\n      )\n\n      return (\n        <>\n          <PresenceDock\n            closeCount={counts.nearTop}\n            margins={margins}\n            position=\"top\"\n            regionsWithIntersectionDetails={grouped.top}\n          />\n          <Spacer height={topSpacing} />\n          <PresenceInside\n            containerWidth={containerWidth}\n            regionsWithIntersectionDetails={grouped.inside}\n          />\n          <Spacer height={bottomSpacing} />\n          <PresenceDock\n            closeCount={counts.nearBottom}\n            margins={margins}\n            position=\"bottom\"\n            regionsWithIntersectionDetails={grouped.bottom}\n          />\n        </>\n      )\n    },\n    [margins]\n  )\n\n  return (\n    <RegionsWithIntersections ref={ref} margins={margins} regions={regions} render={renderCallback}>\n      {children}\n    </RegionsWithIntersections>\n  )\n}\n\nconst EMPTY_ARRAY: never[] = []\n\nconst PresenceDock = memo(function PresenceDock(props: {\n  closeCount: number\n  margins: Margins\n  position: 'top' | 'bottom'\n  regionsWithIntersectionDetails: RegionWithIntersectionDetails[]\n}) {\n  const {closeCount, margins, position, regionsWithIntersectionDetails} = props\n  const dir = position === 'top' ? 1 : -1\n  const allPresenceItems = useMemo(() => {\n    if (!regionsWithIntersectionDetails.length) {\n      return EMPTY_ARRAY\n    }\n\n    return flatten(\n      sortBy(regionsWithIntersectionDetails, (r) => r.region.rect.top * dir).map(\n        (withIntersection) => withIntersection.region.presence || EMPTY_ARRAY\n      )\n    )\n  }, [dir, regionsWithIntersectionDetails])\n  const [topMargin, rightMargin, bottomMargin, leftMargin] = margins\n  const leftOffset =\n    (leftMargin || 0) +\n    (allPresenceItems.length > 0 ? -closeCount * (AVATAR_SIZE + AVATAR_DISTANCE) : 0) -\n    rightMargin\n\n  const margin = position === 'top' ? topMargin : bottomMargin\n\n  const style: React.CSSProperties = useMemo(\n    () => ({\n      zIndex: 2,\n      position: 'sticky',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'flex-end',\n      ...ITEM_TRANSITION,\n      transform: `translate3d(${leftOffset}px, 0px, 0px)`,\n      top: AVATAR_ARROW_HEIGHT + 1 + margin,\n      bottom: AVATAR_ARROW_HEIGHT + 1 + margin,\n    }),\n    [leftOffset, margin]\n  )\n\n  return (\n    <div data-dock={position} key={`sticky-${position}`} style={style}>\n      <FieldPresenceInner\n        position={position}\n        maxAvatars={MAX_AVATARS_DOCK}\n        presence={allPresenceItems}\n      />\n    </div>\n  )\n})\n\nfunction PresenceInside(props: {\n  containerWidth: number\n  regionsWithIntersectionDetails: RegionWithSpacerHeight[]\n}) {\n  const {regionsWithIntersectionDetails, containerWidth} = props\n\n  return (\n    <>\n      {regionsWithIntersectionDetails.map((withIntersection) => {\n        const originalLeft = withIntersection.region.rect.left\n        const {distanceTop, distanceBottom} = withIntersection\n\n        const nearTop = distanceTop <= SLIDE_RIGHT_THRESHOLD_TOP\n        const nearBottom = distanceBottom <= SLIDE_RIGHT_THRESHOLD_BOTTOM\n\n        const diffRight = containerWidth - originalLeft - withIntersection.region.rect.width\n\n        const {presence, maxAvatars} = withIntersection.region\n        return (\n          <React.Fragment key={withIntersection.region.id}>\n            <div\n              style={{\n                zIndex: 2,\n                position: 'absolute',\n                pointerEvents: 'all',\n                ...ITEM_TRANSITION,\n                left: originalLeft,\n                transform: `translate3d(${nearTop || nearBottom ? diffRight : 0}px, 0px, 0px)`,\n                height: withIntersection.region.rect.height,\n                top: withIntersection.region.rect.top,\n              }}\n            >\n              <DebugValue value={() => `⤒${distanceTop} | ${distanceBottom}⤓`}>\n                <FieldPresenceInner\n                  stack={!nearTop && !nearBottom}\n                  // eslint-disable-next-line no-nested-ternary\n                  position={nearTop ? 'top' : nearBottom ? 'bottom' : 'inside'}\n                  maxAvatars={maxAvatars}\n                  presence={presence}\n                />\n              </DebugValue>\n            </div>\n          </React.Fragment>\n        )\n      })}\n    </>\n  )\n}\n\nconst PassThrough = (props: {children: React.ReactElement; [prop: string]: any}) => props.children\n\nconst DebugValue = DEBUG\n  ? function DebugValue(props: any) {\n      return (\n        <div style={{position: 'absolute'}}>\n          {props.children}\n          <span\n            style={{\n              top: 0,\n              left: -15,\n              fontSize: 11,\n              right: -15,\n              textAlign: 'center',\n              height: AVATAR_SIZE,\n              color: 'white',\n              backgroundColor: 'rgba(0, 0, 0, 0.8)',\n              position: 'absolute',\n              zIndex: 1000,\n            }}\n          >\n            {props.value()}\n          </span>\n        </div>\n      )\n    }\n  : PassThrough\n","import React from 'react'\nimport {DISABLE_OVERLAY} from '../constants'\nimport {Tracker} from './tracker'\nimport {StickyOverlay} from './StickyOverlay'\n\n/** @internal */\nexport interface PresenceOverlayProps {\n  children: React.ReactNode\n  margins?: [number, number, number, number]\n}\n\nconst DEFAULT_MARGINS: [number, number, number, number] = [0, 0, 0, 0]\n\nfunction OverlayEnabled({children, margins}: PresenceOverlayProps) {\n  return (\n    <Tracker>\n      <StickyOverlay margins={margins || DEFAULT_MARGINS}>{children}</StickyOverlay>\n    </Tracker>\n  )\n}\n\n/** @internal */\nexport function OverlayDisabled(props: PresenceOverlayProps) {\n  return props.children as JSX.Element\n}\n\n/** @internal */\nexport const PresenceOverlay = DISABLE_OVERLAY ? OverlayDisabled : OverlayEnabled\n","/* eslint-disable camelcase */\n\nimport {hues} from '@sanity/color'\nimport {ErrorOutlineIcon, InfoOutlineIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {FormNodeValidation} from '@sanity/types'\nimport {Box, Flex, Placement, Stack, Text, Tooltip} from '@sanity/ui'\nimport React, {useMemo} from 'react'\n\n/** @internal */\nexport interface FormFieldValidationStatusProps {\n  /**\n   * @beta\n   */\n  validation?: FormNodeValidation[]\n  /**\n   * @beta\n   */\n  __unstable_showSummary?: boolean\n  fontSize?: number | number\n  placement?: Placement\n  portal?: boolean\n}\n\nconst EMPTY_ARRAY: never[] = []\n\nconst VALIDATION_COLORS: Record<'error' | 'warning' | 'info', string> = {\n  error: hues.red[500].hex,\n  warning: hues.yellow[500].hex,\n  info: hues.blue[500].hex,\n}\n\nconst VALIDATION_ICONS: Record<'error' | 'warning' | 'info', React.ReactElement> = {\n  error: <ErrorOutlineIcon data-testid=\"input-validation-icon-error\" />,\n  warning: <WarningOutlineIcon data-testid=\"input-validation-icon-warning\" />,\n  info: <InfoOutlineIcon data-testid=\"input-validation-icon-info\" />,\n}\n\n/** @internal */\nexport function FormFieldValidationStatus(props: FormFieldValidationStatusProps) {\n  const {\n    validation = EMPTY_ARRAY,\n    __unstable_showSummary: showSummary,\n    fontSize,\n    placement = 'top',\n    portal,\n  } = props\n\n  const errors = validation.filter((v) => v.level === 'error')\n  const warnings = validation.filter((v) => v.level === 'warning')\n  const info = validation.filter((v) => v.level === 'info')\n\n  const hasErrors = errors.length > 0\n  const hasWarnings = warnings.length > 0\n  const hasInfo = info.length > 0\n\n  const statusIcon = useMemo(() => {\n    if (hasErrors) return VALIDATION_ICONS.error\n    if (hasWarnings) return VALIDATION_ICONS.warning\n    if (hasInfo) return VALIDATION_ICONS.info\n    return undefined\n  }, [hasErrors, hasInfo, hasWarnings])\n\n  const statusColor = useMemo(() => {\n    if (hasErrors) return VALIDATION_COLORS.error\n    if (hasWarnings) return VALIDATION_COLORS.warning\n    if (hasInfo) return VALIDATION_COLORS.info\n    return undefined\n  }, [hasErrors, hasInfo, hasWarnings])\n\n  return (\n    <Tooltip\n      content={\n        <Stack padding={3} space={3}>\n          {showSummary && <FormFieldValidationSummary validation={validation} />}\n\n          {!showSummary && (\n            <>\n              {validation.map((item, itemIndex) => (\n                // eslint-disable-next-line react/no-array-index-key\n                <FormFieldValidationStatusItem validation={item} key={itemIndex} />\n              ))}\n            </>\n          )}\n        </Stack>\n      }\n      portal={portal}\n      placement={placement}\n      fallbackPlacements={['bottom', 'right', 'left']}\n    >\n      <div>\n        <Text muted size={fontSize} weight=\"semibold\" style={{color: statusColor}}>\n          {statusIcon}\n        </Text>\n      </div>\n    </Tooltip>\n  )\n}\n\nfunction FormFieldValidationStatusItem(props: {validation: FormNodeValidation}) {\n  const {validation} = props\n\n  const statusIcon = useMemo(() => {\n    if (validation.level === 'error') return VALIDATION_ICONS.error\n    if (validation.level === 'warning') return VALIDATION_ICONS.warning\n    if (validation.level === 'info') return VALIDATION_ICONS.info\n    return undefined\n  }, [validation])\n\n  const statusColor = useMemo(() => {\n    if (validation.level === 'error') return VALIDATION_COLORS.error\n    if (validation.level === 'warning') return VALIDATION_COLORS.warning\n    if (validation.level === 'info') return VALIDATION_COLORS.info\n    return undefined\n  }, [validation])\n\n  return (\n    <Flex>\n      <Box marginRight={2}>\n        <Text size={1} style={{color: statusColor}}>\n          {statusIcon}\n        </Text>\n      </Box>\n      <Box flex={1}>\n        <Text muted size={1}>\n          {validation.message}\n        </Text>\n      </Box>\n    </Flex>\n  )\n}\n\nfunction FormFieldValidationSummary({validation}: {validation: FormNodeValidation[]}) {\n  const errorMarkers = validation.filter((item) => item.level === 'error')\n  const warningMarkers = validation.filter((item) => item.level === 'warning')\n  const errorLen = errorMarkers.length\n  const warningLen = warningMarkers.length\n\n  const errorsStr = `error${errorLen === 1 ? '' : 's'}`\n  const warningsStr = `warning${warningLen === 1 ? '' : 's'}`\n  const errorText = errorLen && `${errorLen} ${errorsStr}`\n  const warningText = warningLen && `${warningLen} ${warningsStr}`\n\n  const hasErrors = errorLen > 0\n  const hasWarnings = warningLen > 0\n  const hasBoth = hasErrors && hasWarnings\n\n  return (\n    <Text muted size={1}>\n      {errorText || ''}\n      {hasBoth && <> and </>}\n      {warningText || ''}\n    </Text>\n  )\n}\n","/* eslint-disable camelcase */\n\nimport {FormNodeValidation} from '@sanity/types'\nimport {Box, Flex, Stack, Text} from '@sanity/ui'\nimport React, {memo} from 'react'\nimport {FormFieldValidationStatus} from './FormFieldValidationStatus'\n\n/** @internal */\nexport interface FormFieldHeaderTextProps {\n  /**\n   * @beta\n   */\n  validation?: FormNodeValidation[]\n  description?: React.ReactNode\n  /**\n   * The unique ID used to target the actual input element\n   */\n  inputId?: string\n  title?: React.ReactNode\n}\n\nconst EMPTY_ARRAY: never[] = []\n\n/** @internal */\nexport const FormFieldHeaderText = memo(function FormFieldHeaderText(\n  props: FormFieldHeaderTextProps\n) {\n  const {description, inputId, title, validation = EMPTY_ARRAY} = props\n  const hasValidations = validation.length > 0\n\n  return (\n    <Stack space={2}>\n      <Flex>\n        <Text as=\"label\" htmlFor={inputId} weight=\"semibold\" size={1}>\n          {title || <span style={{color: 'var(--card-muted-fg-color)'}}>Untitled</span>}\n        </Text>\n\n        {hasValidations && (\n          <Box marginLeft={2}>\n            <FormFieldValidationStatus fontSize={1} validation={validation} />\n          </Box>\n        )}\n      </Flex>\n\n      {description && (\n        <Text muted size={1}>\n          {description}\n        </Text>\n      )}\n    </Stack>\n  )\n})\n","/* eslint-disable camelcase */\n\nimport React, {memo} from 'react'\nimport {Box, Flex} from '@sanity/ui'\nimport {FormNodeValidation} from '@sanity/types'\nimport {FieldPresence, FormNodePresence} from '../../../presence'\nimport {FormFieldHeaderText} from './FormFieldHeaderText'\n\nexport interface FormFieldHeaderProps {\n  /**\n   * @beta\n   */\n  validation?: FormNodeValidation[]\n  /**\n   * @beta\n   */\n  __unstable_presence?: FormNodePresence[]\n  description?: React.ReactNode\n  /**\n   * The unique ID used to target the actual input element\n   */\n  inputId?: string\n  title?: React.ReactNode\n}\n\nexport const FormFieldHeader = memo(function FormFieldHeader(props: FormFieldHeaderProps) {\n  const {validation, __unstable_presence: presence, description, inputId, title} = props\n\n  return (\n    <Flex align=\"flex-end\">\n      <Box flex={1} paddingY={2}>\n        <FormFieldHeaderText\n          validation={validation}\n          description={description}\n          inputId={inputId}\n          title={title}\n        />\n      </Box>\n\n      {presence && presence.length > 0 && (\n        <Box>\n          <FieldPresence maxAvatars={4} presence={presence} />\n        </Box>\n      )}\n    </Flex>\n  )\n})\n","import {FormNodeValidation} from '@sanity/types'\nimport {Stack} from '@sanity/ui'\nimport React, {memo} from 'react'\nimport {FormNodePresence} from '../../../presence'\nimport {FormFieldHeader} from './FormFieldHeader'\n\n/** @internal */\nexport interface FormFieldProps {\n  /**\n   * @beta\n   */\n  validation?: FormNodeValidation[]\n  /**\n   * @beta\n   */\n  __unstable_presence?: FormNodePresence[]\n  children: React.ReactNode\n  description?: React.ReactNode\n  /**\n   * The unique ID used to target the actual input element\n   */\n  inputId?: string\n  /**\n   * The nesting level of the form field\n   */\n  level?: number\n  title?: React.ReactNode\n}\n\n/** @internal */\nexport const FormField = memo(function FormField(\n  props: FormFieldProps & Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'height' | 'ref'>\n) {\n  const {\n    validation,\n    __unstable_presence: presence,\n    children,\n    description,\n    inputId,\n    level,\n    title,\n    ...restProps\n  } = props\n  return (\n    <Stack {...restProps} data-level={level} space={1}>\n      {/*\n        NOTE: It’s not ideal to hide validation, presence and description when there's no `title`.\n        So we might want to separate the concerns of input vs formfield components later on.\n      */}\n      {title && (\n        <FormFieldHeader\n          validation={validation}\n          __unstable_presence={presence}\n          description={description}\n          inputId={inputId}\n          title={title}\n        />\n      )}\n\n      <div>{children}</div>\n    </Stack>\n  )\n})\n","function focusRingBorderStyle(border: {color: string; width: number}): string {\n  return `inset 0 0 0 ${border.width}px ${border.color}`\n}\n\nexport function focusRingStyle(opts: {\n  base?: {bg: string}\n  border?: {color: string; width: number}\n  focusRing: {offset: number; width: number}\n}): string {\n  const {base, border, focusRing} = opts\n  const focusRingOutsetWidth = focusRing.offset + focusRing.width\n  const focusRingInsetWidth = 0 - focusRing.offset\n  const bgColor = base ? base.bg : 'var(--card-bg-color)'\n\n  return [\n    focusRingInsetWidth > 0 && `inset 0 0 0 ${focusRingInsetWidth}px var(--card-focus-ring-color)`,\n    border && focusRingBorderStyle(border),\n    focusRingInsetWidth < 0 && `0 0 0 ${0 - focusRingInsetWidth}px ${bgColor}`,\n    focusRingOutsetWidth > 0 && `0 0 0 ${focusRingOutsetWidth}px var(--card-focus-ring-color)`,\n  ]\n    .filter(Boolean)\n    .join(',')\n}\n","import {Box, Flex, rem, Text, Theme} from '@sanity/ui'\nimport React, {memo} from 'react'\nimport {ToggleArrowRightIcon} from '@sanity/icons'\nimport styled, {css} from 'styled-components'\nimport {focusRingStyle} from './styles'\n\nexport interface FormFieldSetLegendProps {\n  collapsed: boolean\n  collapsible?: boolean\n  onClick?: () => void\n  title: React.ReactNode\n}\n\nconst Root = styled.legend`\n  /* See: https://thatemil.com/blog/2015/01/03/reset-your-fieldset/ */\n  padding: 0;\n  display: table;\n`\n\nconst ToggleButton = styled(Flex).attrs({forwardedAs: 'button'})((props: {theme: Theme}) => {\n  const {theme} = props\n  const {focusRing, radius} = theme.sanity\n  const {base} = theme.sanity.color\n\n  return css`\n    appearance: none;\n    border: 0;\n    background: none;\n    color: inherit;\n    -webkit-font-smoothing: inherit;\n    font: inherit;\n    outline: none;\n    border-radius: ${rem(radius[1])};\n\n    &:not([hidden]) {\n      display: flex;\n    }\n\n    &:focus {\n      box-shadow: ${focusRingStyle({base, focusRing})};\n    }\n\n    &:focus:not(:focus-visible) {\n      box-shadow: none;\n    }\n  `\n})\n\nconst ToggleIconBox = styled(Box)`\n  width: 9px;\n  height: 9px;\n  margin-right: 3px;\n\n  & svg {\n    transition: transform 100ms;\n  }\n`\n\nexport const FormFieldSetLegend = memo(function FormFieldSetLegend(props: FormFieldSetLegendProps) {\n  const {collapsed, collapsible, onClick, title} = props\n\n  const text = (\n    <Text weight=\"semibold\" size={1}>\n      {title || <span style={{color: 'var(--card-muted-fg-color)'}}>Untitled</span>}\n    </Text>\n  )\n\n  if (!collapsible) {\n    return <Root>{text}</Root>\n  }\n\n  return (\n    <Root>\n      <ToggleButton type=\"button\" onClick={onClick}>\n        <ToggleIconBox>\n          <Text muted size={1}>\n            <ToggleArrowRightIcon\n              style={{\n                transform: `rotate(${collapsed ? '0' : '90deg'}) translate3d(0, 0, 0)`,\n              }}\n            />\n          </Text>\n        </ToggleIconBox>\n\n        {text}\n      </ToggleButton>\n    </Root>\n  )\n})\n","/* eslint-disable camelcase */\n\nimport {Box, Flex, Grid, rem, Stack, Text, Theme, useForwardedRef} from '@sanity/ui'\nimport React, {forwardRef, useCallback, useMemo} from 'react'\nimport styled, {css} from 'styled-components'\nimport {FormNodeValidation} from '@sanity/types'\nimport {FieldPresence, FormNodePresence} from '../../../presence'\nimport {FormFieldValidationStatus} from './FormFieldValidationStatus'\nimport {FormFieldSetLegend} from './FormFieldSetLegend'\nimport {focusRingStyle} from './styles'\n\n/** @internal */\nexport interface FormFieldSetProps {\n  /**\n   * @beta\n   */\n  __unstable_presence?: FormNodePresence[]\n  children: React.ReactNode | (() => React.ReactNode)\n  collapsed?: boolean\n  collapsible?: boolean\n  columns?: number | number[]\n  description?: React.ReactNode\n  /**\n   * The nesting level of the form field set\n   */\n  level?: number\n  onCollapse?: () => void\n  onExpand?: () => void\n  title?: React.ReactNode\n  /**\n   * @beta\n   */\n  validation?: FormNodeValidation[]\n}\n\nfunction getChildren(children: React.ReactNode | (() => React.ReactNode)): React.ReactNode {\n  return typeof children === 'function' ? children() : children\n}\n\nconst Root = styled(Box).attrs({forwardedAs: 'fieldset'})`\n  border: none;\n\n  /* See: https://thatemil.com/blog/2015/01/03/reset-your-fieldset/ */\n  body:not(:-moz-handler-blocked) & {\n    display: table-cell;\n  }\n`\n\nconst Content = styled(Box)<{\n  /*\n   * @note: The dollar sign ($) prefix is a `styled-components` convention for\n   * denoting transient props. See:\n   * https://styled-components.com/docs/api#transient-props\n   */\n  $borderLeft: boolean\n  theme: Theme\n}>((props) => {\n  const {$borderLeft, theme} = props\n  const {focusRing, radius} = theme.sanity\n  const {base} = theme.sanity.color\n\n  return css`\n    outline: none;\n    border-left: ${$borderLeft ? '1px solid var(--card-border-color)' : undefined};\n    border-radius: ${rem(radius[1])};\n\n    &:focus {\n      box-shadow: ${focusRingStyle({base, focusRing: {...focusRing, offset: 2}})};\n    }\n\n    &:focus:not(:focus-visible) {\n      box-shadow: none;\n    }\n  `\n})\n\nconst EMPTY_ARRAY: never[] = []\n\n/** @internal */\nexport const FormFieldSet = forwardRef(function FormFieldSet(\n  props: FormFieldSetProps & Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'height' | 'ref'>,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {\n    validation = EMPTY_ARRAY,\n    __unstable_presence: presence = EMPTY_ARRAY,\n    children,\n    collapsible,\n    columns,\n    description,\n    level = 0,\n    onFocus,\n    onCollapse,\n    onExpand,\n    collapsed,\n    tabIndex,\n    title,\n    ...restProps\n  } = props\n\n  const hasValidationMarkers = validation.length > 0\n  const forwardedRef = useForwardedRef(ref)\n\n  const handleFocus = useCallback(\n    (event: React.FocusEvent<HTMLDivElement>) => {\n      const element = forwardedRef.current\n\n      if (element === event.target) {\n        if (onFocus) onFocus(event)\n      }\n    },\n    [forwardedRef, onFocus]\n  )\n\n  const handleToggle = useCallback(\n    () => (collapsed ? onExpand?.() : onCollapse?.()),\n    [collapsed, onCollapse, onExpand]\n  )\n\n  const content = useMemo(() => {\n    if (collapsed) {\n      return null\n    }\n    return (\n      <Grid columns={columns} gapX={4} gapY={5}>\n        {getChildren(children)}\n      </Grid>\n    )\n  }, [children, collapsed, columns])\n\n  return (\n    <Root data-level={level} {...restProps}>\n      {title && (\n        <Flex align=\"flex-end\">\n          <Box flex={1} paddingY={2}>\n            <Stack space={2}>\n              <Flex>\n                <FormFieldSetLegend\n                  collapsed={Boolean(collapsed)}\n                  collapsible={collapsible}\n                  onClick={collapsible ? handleToggle : undefined}\n                  title={title}\n                />\n\n                {hasValidationMarkers && (\n                  <Box marginLeft={2}>\n                    <FormFieldValidationStatus fontSize={1} validation={validation} />\n                  </Box>\n                )}\n              </Flex>\n\n              {description && (\n                <Text muted size={1}>\n                  {description}\n                </Text>\n              )}\n            </Stack>\n          </Box>\n\n          {presence.length > 0 && (\n            <Box>\n              <FieldPresence maxAvatars={4} presence={presence} />\n            </Box>\n          )}\n        </Flex>\n      )}\n\n      <Content\n        $borderLeft={level > 0}\n        hidden={collapsed}\n        marginTop={1}\n        paddingLeft={level === 0 ? 0 : 3}\n        onFocus={typeof tabIndex === 'number' && tabIndex > -1 ? handleFocus : undefined}\n        ref={forwardedRef}\n        tabIndex={tabIndex}\n      >\n        {!collapsed && content}\n      </Content>\n    </Root>\n  )\n})\n","import React from 'react'\nimport styled from 'styled-components'\n\n/** @internal */\nexport interface FieldStatusProps {\n  children?: React.ReactNode\n  maxAvatars?: number\n  position?: 'top' | 'bottom'\n}\n\nconst Root = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  box-sizing: border-box;\n  min-height: var(--avatar-height);\n  width: 77px;\n  margin-left: var(--small-padding);\n\n  &[data-max-avatars='1'] {\n    max-width: 23px;\n  }\n\n  &[data-position='top'] {\n    align-self: flex-start;\n  }\n\n  &[data-position='bottom'] {\n    align-self: flex-end;\n  }\n`\n\n/** @internal */\nexport function FormFieldStatus({children, maxAvatars, position = 'bottom'}: FieldStatusProps) {\n  return (\n    <Root data-max-avatars={maxAvatars} data-position={position}>\n      {children}\n    </Root>\n  )\n}\n","import React, {ComponentType} from 'react'\nimport type {SortableContainerProps} from '@rexxars/react-sortable-hoc'\nimport {SortableContainer, SortableElement, SortableHandle} from '@rexxars/react-sortable-hoc'\nimport {FIXME} from '../../../../FIXME'\n\nexport const MOVING_ITEM_CLASS_NAME = 'moving'\nexport const DRAG_HANDLE_ATTRIBUTE = 'data-drag-handle'\n\n// higher order components to make a sortable list/item components\ntype ExposedSortableProps = {\n  onSortStart?: () => void\n  onSortEnd?: (event: {newIndex: number; oldIndex: number}) => void\n}\n\nexport function sortableHandle<Props>(\n  Component: React.ComponentType<Props>\n): React.ComponentType<Props> {\n  return SortableHandle(Component)\n}\n\n// Wrapper to avoid accidental leaking of react-sortable-hoc props\nexport function sortableItem<Props>(\n  Component: React.ComponentType<Props>\n): React.ComponentType<Props & {index: number}> {\n  return SortableElement(Component)\n}\n\n// Wrapper to avoid accidental leaking of react-sortable-hoc props\nfunction sortableContainer<Props>(\n  Component: React.ComponentType<Props>,\n  options: SortableContainerProps\n) {\n  const Container = SortableContainer(\n    React.forwardRef(function Sortable(\n      props: Props & ExposedSortableProps,\n      forwardedRef: React.ForwardedRef<React.ComponentType<Props>>\n    ) {\n      return <Component {...props} ref={forwardedRef} />\n    })\n  ) as FIXME as React.ComponentType<SortableContainerProps> // there are some wonky typings from react-sortable-hoc\n\n  return React.forwardRef(function SortableList(\n    props: Props & ExposedSortableProps,\n    ref: React.ForwardedRef<React.ComponentType<Props>>\n  ) {\n    return <Container {...options} {...props} ref={ref} />\n  })\n}\n\nconst KeyCode = {\n  Space: 32,\n  Enter: 13,\n  Esc: 27,\n  Up: 38,\n  Left: 37,\n  Right: 39,\n  Down: 40,\n}\n\nconst KEYCODES = {\n  lift: [KeyCode.Space, KeyCode.Enter],\n  drop: [KeyCode.Space, KeyCode.Enter],\n  cancel: [KeyCode.Esc],\n  up: [KeyCode.Left, KeyCode.Up],\n  down: [KeyCode.Right, KeyCode.Down],\n}\n\nexport function sortableList<Props>(Component: React.ComponentType<Props>) {\n  return sortableContainer(Component, {\n    helperClass: MOVING_ITEM_CLASS_NAME,\n    keyCodes: KEYCODES,\n    axis: 'y',\n    lockAxis: 'y',\n    useDragHandle: true,\n    shouldCancelStart,\n  }) as any as ComponentType<Props & ExposedSortableProps>\n}\n\n// Cancel sorting if the event target is not drag handle\nfunction shouldCancelStart(event: React.UIEvent<HTMLElement>) {\n  return !isDragHandle(event.target as HTMLElement)\n}\n\nfunction isDragHandle(element: HTMLElement) {\n  return element.matches(`[${DRAG_HANDLE_ATTRIBUTE}=\"true\"],[${DRAG_HANDLE_ATTRIBUTE}=\"true\"] *`)\n}\n","import styled from 'styled-components'\nimport {Button, ButtonProps} from '@sanity/ui'\nimport React from 'react'\nimport {DragHandleIcon} from '@sanity/icons'\nimport {DRAG_HANDLE_ATTRIBUTE, sortableHandle} from './sortable'\n\nconst DragHandleButton = styled(Button)<{grid?: boolean}>`\n  cursor: ${(props) => (props.grid ? 'move' : 'ns-resize')};\n`\n\nconst DRAG_HANDLE_PROPS = {[DRAG_HANDLE_ATTRIBUTE]: true}\n\nexport const DragHandle = sortableHandle(function DragHandle(\n  props: {\n    grid?: boolean\n  } & ButtonProps\n) {\n  return (\n    <DragHandleButton\n      icon={DragHandleIcon}\n      mode=\"bleed\"\n      data-ui=\"DragHandleButton\"\n      {...props}\n      {...DRAG_HANDLE_PROPS}\n    />\n  )\n})\n","import {Box, Card, CardTone, Flex, Stack} from '@sanity/ui'\nimport React, {ReactNode, useRef} from 'react'\nimport styled from 'styled-components'\nimport {useDidUpdate} from '../../../hooks/useDidUpdate'\nimport {DragHandle} from '../common/DragHandle'\nimport {MOVING_ITEM_CLASS_NAME} from '../common/sortable'\n\ninterface RowLayoutProps {\n  tone?: CardTone\n  dragHandle?: boolean\n  focused?: boolean\n  presence?: ReactNode\n  validation?: ReactNode\n  menu?: ReactNode\n  footer?: ReactNode\n  selected?: boolean\n  children?: ReactNode\n}\n\nconst Root = styled(Card)`\n  position: relative;\n  border: 1px solid transparent;\n  transition: border-color 250ms;\n  .dragHandle {\n    color: var(--card-shadow-umbra-color);\n  }\n  &:hover {\n    border-color: var(--card-shadow-umbra-color);\n    .dragHandle {\n      color: inherit;\n    }\n  }\n  &[aria-selected='true'] {\n    border-color: var(--card-focus-ring-color);\n  }\n  .${MOVING_ITEM_CLASS_NAME} & {\n    box-shadow: 0 0 0 0, 0 8px 17px 2px var(--card-shadow-umbra-color),\n      0 3px 14px 2px var(--card-shadow-penumbra-color),\n      0 5px 5px -3px var(--card-shadow-ambient-color);\n  }\n`\n\nexport function RowLayout(props: RowLayoutProps) {\n  const {validation, selected, tone, presence, focused, children, dragHandle, menu, footer} = props\n\n  const elementRef = useRef<HTMLDivElement | null>(null)\n\n  useDidUpdate(focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      elementRef.current?.focus()\n    }\n  })\n\n  return (\n    <Root\n      ref={elementRef}\n      selected={selected}\n      aria-selected={selected}\n      radius={2}\n      padding={1}\n      tone={tone}\n    >\n      <Stack space={1}>\n        <Flex align=\"center\">\n          {dragHandle && (\n            <Box marginRight={1} paddingY={1}>\n              <DragHandle paddingX={1} paddingY={3} />\n            </Box>\n          )}\n\n          <Box flex={1}>{children}</Box>\n\n          {(presence || validation || menu) && (\n            <Flex align=\"center\" marginLeft={1}>\n              {presence && <Box marginLeft={1}>{presence}</Box>}\n              {validation && <Box marginLeft={1}>{validation}</Box>}\n              {menu}\n            </Flex>\n          )}\n        </Flex>\n        {footer}\n      </Stack>\n    </Root>\n  )\n}\n","import {ToggleArrowRightIcon} from '@sanity/icons'\nimport {Box, Flex, Inline, Text} from '@sanity/ui'\nimport React, {useCallback, useEffect, useState} from 'react'\nimport styled from 'styled-components'\n\ninterface DetailsProps {\n  children?: React.ReactNode\n  margin?: number | number[]\n  marginX?: number | number[]\n  marginY?: number | number[]\n  marginTop?: number | number[]\n  marginRight?: number | number[]\n  marginBottom?: number | number[]\n  marginLeft?: number | number[]\n  open?: boolean\n  icon?: React.ReactNode\n  title?: React.ReactNode\n}\n\nconst HeaderButton = styled.button`\n  display: block;\n  -webkit-font-smoothing: inherit;\n  appearance: none;\n  font: inherit;\n  background: none;\n  width: 100%;\n  text-align: left;\n  border: 0;\n  margin: 0;\n  padding: 0;\n  outline: none;\n`\n\nconst ToggleArrow = styled(ToggleArrowRightIcon)<{open: boolean}>`\n  transform: ${(props) => (props.open ? 'rotate(90deg)' : '')};\n`\n\nconst Header = styled(Flex)`\n  cursor: default;\n`\n\nconst IconBox = styled(Box)`\n  & > div > svg {\n    transform: rotate(0);\n    transition: transform 100ms;\n  }\n\n  &[data-open] > div > svg {\n    transform: rotate(90deg);\n  }\n`\n\nexport function Details(props: DetailsProps) {\n  const {children, open: openProp, icon, title = 'Details', ...restProps} = props\n  const [open, setOpen] = useState(openProp || false)\n\n  const handleToggle = useCallback(() => setOpen((v) => !v), [])\n\n  useEffect(() => setOpen(openProp || false), [openProp])\n\n  return (\n    <Box {...restProps}>\n      <HeaderButton type=\"button\" onClick={handleToggle}>\n        <Header align=\"center\">\n          <Inline>\n            <IconBox data-open={open ? '' : undefined}>\n              <Text size={1}>\n                <ToggleArrow open={open} />\n              </Text>\n            </IconBox>\n            {icon && <Box marginLeft={1}>{icon}</Box>}\n            <Box flex={1} marginLeft={1}>\n              <Text size={1} weight=\"medium\">\n                {title}\n              </Text>\n            </Box>\n          </Inline>\n        </Header>\n      </HeaderButton>\n\n      <Box hidden={!open} marginTop={3}>\n        {children}\n      </Box>\n    </Box>\n  )\n}\n","import {ErrorOutlineIcon, WarningOutlineIcon, InfoOutlineIcon} from '@sanity/icons'\nimport {Box, Card, CardProps, Flex} from '@sanity/ui'\nimport React from 'react'\nimport {Details} from './Details'\n\ninterface AlertProps extends Omit<CardProps, 'title'> {\n  title: React.ReactNode\n  status?: 'warning' | 'error' | 'info'\n}\n\nconst STATUS_TONES = {\n  warning: 'caution',\n  error: 'critical',\n  info: 'positive',\n} as const\n\nconst STATUS_ICONS = {\n  warning: <WarningOutlineIcon />,\n  error: <ErrorOutlineIcon />,\n  info: <InfoOutlineIcon />,\n}\n\nexport function AlertStrip(props: AlertProps & Omit<React.HTMLProps<HTMLDivElement>, 'ref'>) {\n  const {children, status = 'warning', title, ...rest} = props\n\n  return (\n    <Card radius={2} tone={STATUS_TONES[status]} {...rest} data-ui=\"Alert\">\n      <Flex padding={1}>\n        {children && (\n          <Box flex={1}>\n            <Details icon={STATUS_ICONS[status]} title={title}>\n              <Box marginLeft={3} marginTop={3}>\n                {children}\n              </Box>\n            </Details>\n          </Box>\n        )}\n      </Flex>\n    </Card>\n  )\n}\n","import {isArraySchemaType, isObjectSchemaType, SchemaType} from '@sanity/types'\n\nexport function createProtoValue(type: SchemaType): any {\n  if (isObjectSchemaType(type)) {\n    return type.name === 'object' ? {} : {_type: type.name}\n  }\n  if (isArraySchemaType(type)) {\n    return []\n  }\n  if (type.jsonType === 'string') {\n    return ''\n  }\n  if (type.jsonType === 'number') {\n    return 0\n  }\n  if (type.jsonType === 'boolean') {\n    return false\n  }\n  return undefined\n}\n","import {isObjectSchemaType, SchemaType} from '@sanity/types'\nimport {randomKey} from '@sanity/util/content'\nimport {createProtoValue} from '../../../utils/createProtoValue'\nimport {ObjectItem} from '../../../types'\n\nexport function createProtoArrayValue<Item extends ObjectItem>(type: SchemaType): Item {\n  if (!isObjectSchemaType(type)) {\n    throw new Error(\n      `Invalid item type: \"${type.type}\". Default array input can only contain objects (for now)`\n    )\n  }\n\n  return {...createProtoValue(type), _key: randomKey(12)} as Item\n}\n","/* eslint-disable react/jsx-no-bind */\nimport {SchemaType} from '@sanity/types'\nimport React, {ComponentProps, memo} from 'react'\nimport {MenuGroup, MenuItem, PopoverProps} from '@sanity/ui'\nimport {InsertAboveIcon, InsertBelowIcon} from '@sanity/icons'\n\ninterface Props {\n  types?: SchemaType[]\n  onInsert: (pos: 'before' | 'after', type: SchemaType) => void\n}\n\nconst MENU_POPOVER_PROPS: PopoverProps = {\n  portal: true,\n  tone: 'default',\n  placement: 'left',\n  constrainSize: true,\n} as const\n\nexport const InsertMenu = memo(function InsertMenu(props: Props) {\n  const {types, onInsert} = props\n  return (\n    <>\n      <InsertMenuGroup\n        pos=\"before\"\n        types={types}\n        onInsert={onInsert}\n        text=\"Add item before\"\n        icon={InsertAboveIcon}\n      />\n      <InsertMenuGroup\n        pos=\"after\"\n        types={types}\n        onInsert={onInsert}\n        text=\"Add item after\"\n        icon={InsertBelowIcon}\n      />\n    </>\n  )\n})\n\nfunction InsertMenuGroup(\n  props: Props & {\n    pos: 'before' | 'after'\n    text: ComponentProps<typeof MenuItem>['text']\n    icon: ComponentProps<typeof MenuItem>['icon']\n  }\n) {\n  const {types, onInsert, pos, text, icon} = props\n\n  if (types?.length === 1) {\n    return <MenuItem key={pos} text={text} icon={icon} onClick={() => onInsert(pos, types[0])} />\n  }\n  return (\n    <MenuGroup text={text} key={pos} popover={MENU_POPOVER_PROPS}>\n      {types?.map((insertableType) => (\n        <MenuItem\n          key={insertableType.name}\n          icon={insertableType.icon}\n          text={insertableType.title}\n          onClick={() => onInsert(pos, insertableType)}\n        />\n      ))}\n    </MenuGroup>\n  )\n}\n","import {useCallback, useMemo} from 'react'\nimport {catchError, concatMap, map, startWith} from 'rxjs/operators'\nimport {concat, Observable, of, Subject} from 'rxjs'\nimport {useMemoObservable} from 'react-rx'\nimport {usePrevious} from '../../hooks/usePrevious'\nimport {ReferenceInfo} from './types'\n\nconst noop = () => undefined\n\nconst INITIAL_LOADING_STATE: Loadable<ReferenceInfo> = {\n  isLoading: true,\n  result: undefined,\n  error: undefined,\n  retry: noop,\n}\n\nconst EMPTY_STATE: Loadable<any> = {\n  isLoading: false,\n  result: undefined,\n  error: undefined,\n  retry: noop,\n}\n\nexport type Loadable<T> =\n  | {isLoading: true; result: undefined; error: undefined; retry: () => void}\n  | {isLoading: false; result: T; error: undefined; retry: () => void}\n  | {isLoading: false; result: undefined; error: Error; retry: () => void}\n\ntype GetReferenceInfo = (id: string) => Observable<ReferenceInfo>\n\nexport function useReferenceInfo(\n  id: string | undefined,\n  getReferenceInfo: GetReferenceInfo\n): Loadable<ReferenceInfo> {\n  // NOTE: this is a small message queue to handle retries\n  const msgSubject = useMemo(() => new Subject<{type: 'retry'}>(), [])\n  const msg$ = useMemo(() => msgSubject.asObservable(), [msgSubject])\n\n  const retry = useCallback(() => {\n    msgSubject.next({type: 'retry'})\n  }, [msgSubject])\n\n  const referenceInfo = useMemoObservable(\n    () =>\n      concat(of(null), msg$).pipe(\n        map(() => id),\n        concatMap((refId: string | undefined) =>\n          refId\n            ? getReferenceInfo(refId).pipe(\n                map((result) => {\n                  return {\n                    isLoading: false,\n                    result,\n                    error: undefined,\n                    retry,\n                  } as const\n                }),\n                startWith(INITIAL_LOADING_STATE),\n                catchError((err: Error) => {\n                  console.error(err)\n                  return of({isLoading: false, result: undefined, error: err, retry} as const)\n                })\n              )\n            : of(EMPTY_STATE)\n        )\n      ),\n    [getReferenceInfo, id, msg$, retry],\n    INITIAL_LOADING_STATE\n  )\n\n  // @todo test and see if this were fixed in `react-rx@2.1.x`\n  // workaround for a \"bug\" with useMemoObservable that doesn't\n  // return the initial value upon resubscription\n  const previousId = usePrevious(id, id)\n  if (id && previousId !== id) {\n    return INITIAL_LOADING_STATE\n  }\n  return referenceInfo\n}\n","import React, {useEffect, useReducer} from 'react'\nimport formatDistanceToNow from 'date-fns/formatDistanceToNow'\n\nfunction useInterval(ms: number) {\n  const [tick, update] = useReducer((n) => n + 1, 0)\n\n  useEffect(() => {\n    const i = setInterval(update, ms)\n    return () => clearInterval(i)\n  }, [ms])\n  return tick\n}\n\nexport function TimeAgo({time}: {time: string}) {\n  useInterval(1000)\n  const timeSince = formatDistanceToNow(new Date(time))\n  return <span title={timeSince}>{timeSince} ago</span>\n}\n","import React, {ComponentType, ReactNode, useMemo} from 'react'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {Box, Flex, Inline, Label, Text, Tooltip, useRootTheme} from '@sanity/ui'\nimport {AccessDeniedIcon, EditIcon, HelpCircleIcon, PublishIcon} from '@sanity/icons'\nimport {RenderPreviewCallback} from '../../types'\nimport {DocumentAvailability} from '../../../preview'\nimport {PreviewLayoutKey, TextWithTone} from '../../../components'\nimport {useDocumentPresence} from '../../../store'\nimport {DocumentPreviewPresence} from '../../../presence'\nimport {TimeAgo} from './utils/TimeAgo'\nimport {ReferenceInfo} from './types'\n\nfunction UnavailableMessage(props: {icon: ComponentType; children: ReactNode; title: ReactNode}) {\n  const Icon = props.icon\n  return (\n    <Flex padding={3}>\n      <Box>\n        <Text size={1}>\n          <Icon />\n        </Text>\n      </Box>\n      <Box flex={1} marginLeft={3}>\n        <Text size={1} weight=\"semibold\">\n          {props.title}\n        </Text>\n\n        <Box marginTop={3}>\n          <Text as=\"p\" muted size={1}>\n            {props.children}\n          </Text>\n        </Box>\n      </Box>\n    </Flex>\n  )\n}\n\n/**\n * Used to preview a referenced type\n * Takes the reference type as props\n */\nexport function ReferencePreview(props: {\n  availability: DocumentAvailability\n  id: string\n  preview: ReferenceInfo['preview']\n  refType: ObjectSchemaType\n  layout: PreviewLayoutKey\n  renderPreview: RenderPreviewCallback\n  showTypeLabel?: boolean\n}) {\n  const {availability, id, layout, preview, refType, renderPreview, showTypeLabel} = props\n\n  const theme = useRootTheme()\n  const documentPresence = useDocumentPresence(id)\n\n  const notFound = availability.reason === 'NOT_FOUND'\n  const insufficientPermissions = availability.reason === 'PERMISSION_DENIED'\n\n  const previewId =\n    preview.draft?._id ||\n    preview.published?._id ||\n    // note: during publish of the referenced document we might have both a missing draft and a missing published version\n    // this happens because the preview system tries to optimistically re-fetch as soon as it sees a mutation, but\n    // when publishing, the draft is deleted, and therefore both the draft and the published may be missing for a brief\n    // moment before the published version appears. In this case, it's safe to fallback to the given id, which is always\n    // the published id\n    id\n\n  // Note: we can't pass the preview values as-is to the Preview-component here since it's a \"prepared\" value and the\n  // Preview component expects the \"raw\"/unprepared value. By passing only _id and _type we make sure the Preview-component\n  // resolve the preview value it needs (this is cached in the runtime, so not likely to cause any fetch overhead)\n  const previewStub = useMemo(\n    () => ({_id: previewId, _type: refType.name}),\n    [previewId, refType.name]\n  )\n\n  const previewProps = useMemo(\n    () => ({\n      layout,\n      schemaType: refType,\n      value: previewStub,\n    }),\n    [layout, previewStub, refType]\n  )\n\n  return (\n    <Flex align=\"center\">\n      {availability.available ? (\n        <Box flex={1}>{renderPreview(previewProps)}</Box>\n      ) : (\n        <Box flex={1}>\n          <Flex align=\"center\">\n            <Box flex={1} paddingY={2}>\n              <Text muted>Document unavailable</Text>\n            </Box>\n          </Flex>\n        </Box>\n      )}\n\n      <Box paddingLeft={3}>\n        <Inline space={3}>\n          {showTypeLabel && (\n            <Label size={1} muted>\n              {refType.title}\n            </Label>\n          )}\n\n          {insufficientPermissions || notFound ? (\n            <Box>\n              <Tooltip\n                portal\n                content={\n                  notFound ? (\n                    <UnavailableMessage title=\"Not found\" icon={HelpCircleIcon}>\n                      The referenced document does not exist\n                      <br />\n                      (id: <code>{id}</code>)\n                    </UnavailableMessage>\n                  ) : (\n                    <UnavailableMessage title=\"Insufficcient permissions\" icon={AccessDeniedIcon}>\n                      The referenced document could not be accessed due to insufficient permissions\n                    </UnavailableMessage>\n                  )\n                }\n              >\n                <TextWithTone tone=\"default\">\n                  <HelpCircleIcon />\n                </TextWithTone>\n              </Tooltip>\n            </Box>\n          ) : null}\n\n          {documentPresence && documentPresence.length > 0 && (\n            <DocumentPreviewPresence presence={documentPresence} />\n          )}\n\n          <Inline space={4}>\n            <Box>\n              <Tooltip\n                portal\n                content={\n                  <Box padding={2}>\n                    <Text size={1}>\n                      {preview.published?._updatedAt ? (\n                        <>\n                          Published <TimeAgo time={preview.published._updatedAt} />\n                        </>\n                      ) : (\n                        <>Not published</>\n                      )}\n                    </Text>\n                  </Box>\n                }\n              >\n                <TextWithTone\n                  tone={theme.tone === 'default' ? 'positive' : 'default'}\n                  size={1}\n                  dimmed={!preview.published}\n                  muted={!preview.published}\n                >\n                  <PublishIcon />\n                </TextWithTone>\n              </Tooltip>\n            </Box>\n\n            <Box>\n              <Tooltip\n                portal\n                content={\n                  <Box padding={2}>\n                    <Text size={1}>\n                      {preview.draft?._updatedAt ? (\n                        <>\n                          Edited <TimeAgo time={preview.draft._updatedAt} />\n                        </>\n                      ) : (\n                        <>No unpublished edits</>\n                      )}\n                    </Text>\n                  </Box>\n                }\n              >\n                <TextWithTone\n                  tone={theme.tone === 'default' ? 'caution' : 'default'}\n                  size={1}\n                  dimmed={!preview.draft}\n                  muted={!preview.draft}\n                >\n                  <EditIcon />\n                </TextWithTone>\n              </Tooltip>\n            </Box>\n          </Inline>\n        </Inline>\n      </Box>\n    </Flex>\n  )\n}\n","import React from 'react'\nimport {Reference, ReferenceSchemaType} from '@sanity/types'\nimport {Box, Flex, Inline, Label, Stack} from '@sanity/ui'\nimport {RenderPreviewCallback} from '../../types'\nimport {SanityDefaultPreview} from '../../../preview'\nimport {ReferencePreview} from './ReferencePreview'\nimport {Loadable} from './useReferenceInfo'\nimport {ReferenceInfo} from './types'\n\nexport function PreviewReferenceValue(props: {\n  referenceInfo: Loadable<ReferenceInfo>\n  renderPreview: RenderPreviewCallback\n  type: ReferenceSchemaType\n  value: Reference\n  showTypeLabel?: boolean\n}) {\n  const {referenceInfo, renderPreview, type, value, showTypeLabel} = props\n\n  if (referenceInfo.isLoading || referenceInfo.error) {\n    return <SanityDefaultPreview isPlaceholder />\n  }\n\n  if (referenceInfo.result?.availability.reason === 'NOT_FOUND' && value._strengthenOnPublish) {\n    const refType = type.to.find((toType) => toType.name === value?._strengthenOnPublish?.type)\n    if (!refType) {\n      return <div>Invalid reference type</div>\n    }\n    if (value._strengthenOnPublish) {\n      const stub = value._strengthenOnPublish?.type\n        ? {\n            _id: value._ref,\n            _type: value._strengthenOnPublish?.type,\n          }\n        : value\n\n      return (\n        <Flex align=\"center\">\n          <Box flex={1}>\n            {renderPreview({\n              layout: 'default',\n              schemaType: refType,\n              value: stub,\n            })}\n          </Box>\n          <Box>\n            <Inline space={4}>\n              {showTypeLabel && (\n                <Label size={1} muted>\n                  {refType.title}\n                </Label>\n              )}\n            </Inline>\n          </Box>\n        </Flex>\n      )\n    }\n  }\n\n  const refTypeName = referenceInfo.result?.type\n  const refType = type.to.find((toType) => toType.name === refTypeName)\n\n  if (!refType) {\n    return (\n      <Stack space={2} padding={2}>\n        The referenced document is of invalid type: ({refTypeName || 'unknown'})\n        <pre>{JSON.stringify(value, null, 2)}</pre>\n      </Stack>\n    )\n  }\n\n  return (\n    <ReferencePreview\n      availability={referenceInfo.result?.availability}\n      id={value._ref}\n      layout=\"default\"\n      preview={referenceInfo.result?.preview}\n      refType={refType}\n      renderPreview={renderPreview}\n      showTypeLabel={showTypeLabel}\n    />\n  )\n}\n","import {\n  Box,\n  Button,\n  Card,\n  CardTone,\n  Flex,\n  Menu,\n  MenuButton,\n  MenuDivider,\n  MenuItem,\n  Spinner,\n  Stack,\n  Text,\n} from '@sanity/ui'\nimport React, {useCallback, useMemo, useRef} from 'react'\nimport {Reference, ReferenceSchemaType, SchemaType} from '@sanity/types'\nimport {\n  CloseIcon,\n  CopyIcon as DuplicateIcon,\n  EllipsisVerticalIcon,\n  LaunchIcon as OpenInNewTabIcon,\n  SyncIcon as ReplaceIcon,\n  TrashIcon,\n} from '@sanity/icons'\nimport styled from 'styled-components'\nimport {ObjectItem, ObjectItemProps} from '../../types'\nimport {useScrollIntoViewOnFocusWithin} from '../../hooks/useScrollIntoViewOnFocusWithin'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {randomKey} from '../../utils/randomKey'\nimport {FormFieldSet, FormFieldValidationStatus} from '../../components/formField'\nimport {FieldPresence} from '../../../presence'\n\nimport {ChangeIndicator} from '../../../changeIndicators'\nimport {RowLayout} from '../arrays/layouts/RowLayout'\nimport {AlertStrip} from '../../components/AlertStrip'\nimport {set, unset} from '../../patch'\nimport {createProtoArrayValue} from '../arrays/ArrayOfObjectsInput/createProtoArrayValue'\nimport {InsertMenu} from '../arrays/ArrayOfObjectsInput/InsertMenu'\nimport {useReferenceInfo} from './useReferenceInfo'\nimport {PreviewReferenceValue} from './PreviewReferenceValue'\nimport {useReferenceInput} from './useReferenceInput'\n\nexport interface ReferenceItemValue extends Omit<ObjectItem, '_type'>, Omit<Reference, '_key'> {}\n\ninterface ReferenceItemProps<Item extends ReferenceItemValue>\n  extends Omit<ObjectItemProps<ReferenceItemValue>, 'renderDefault'> {\n  value: Item\n  schemaType: ReferenceSchemaType\n}\n\nfunction getTone({\n  readOnly,\n  hasErrors,\n  hasWarnings,\n}: {\n  readOnly: boolean | undefined\n  hasErrors: boolean\n  hasWarnings: boolean\n}): CardTone {\n  if (readOnly) {\n    return 'transparent'\n  }\n  if (hasErrors) {\n    return 'critical'\n  }\n  return hasWarnings ? 'caution' : 'default'\n}\nconst MENU_POPOVER_PROPS = {portal: true, tone: 'default'} as const\nconst INITIAL_VALUE_CARD_STYLE = {\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  width: '100%',\n  height: '100%',\n  opacity: 0.6,\n} as const\n\nexport const ReferencePreviewCard = styled(Card)`\n  /* this is a hack to avoid layout jumps while previews are loading\n     there's probably better ways of solving this */\n  min-height: 35px;\n\n  /* TextWithTone uses its own logic to set color, and we therefore need */\n  /* to override this logic in order to set the correct color in different states */\n  &[data-selected],\n  &[data-pressed],\n  &:active {\n    [data-ui='TextWithTone'] {\n      color: inherit;\n    }\n  }\n`\n\nexport function ReferenceItem<Item extends ReferenceItemValue = ReferenceItemValue>(\n  props: ReferenceItemProps<Item>\n) {\n  const {\n    schemaType,\n    parentSchemaType,\n    path,\n    readOnly,\n    onRemove,\n    value,\n    open,\n    onInsert,\n    onFocus,\n    presence,\n    validation,\n    inputId,\n    changed,\n    focused,\n    children,\n    inputProps: {onChange, focusPath, onPathFocus, renderPreview, elementProps},\n  } = props\n\n  const sortable = parentSchemaType.options?.sortable !== false\n  const insertableTypes = parentSchemaType.of\n\n  const elementRef = useRef<HTMLDivElement | null>(null)\n\n  const {EditReferenceLink, getReferenceInfo, selectedState, isCurrentDocumentLiveEdit} =\n    useReferenceInput({\n      path,\n      schemaType,\n      value,\n    })\n\n  // this is here to make sure the item is visible if it's being edited behind a modal\n  useScrollIntoViewOnFocusWithin(elementRef, open)\n\n  useDidUpdate(focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus && elementRef.current) {\n      // Note: if editing an inline item, focus is handled by the item input itself and no ref is being set\n      elementRef.current?.focus()\n    }\n  })\n\n  const hasErrors = props.validation.some((v) => v.level === 'error')\n  const hasWarnings = props.validation.some((v) => v.level === 'warning')\n  const resolvingInitialValue = (value as any)._resolvingInitialValue\n\n  const handleDuplicate = useCallback(() => {\n    onInsert({\n      items: [{...value, _key: randomKey()}],\n      position: 'after',\n    })\n  }, [onInsert, value])\n\n  const handleInsert = useCallback(\n    (pos: 'before' | 'after', insertType: SchemaType) => {\n      onInsert({\n        items: [{...createProtoArrayValue(insertType), _key: randomKey()}],\n        position: pos,\n      })\n    },\n    [onInsert]\n  )\n  const loadableReferenceInfo = useReferenceInfo(value?._ref, getReferenceInfo)\n\n  const hasRef = value._ref\n  const refTypeName = loadableReferenceInfo.result?.type || value?._strengthenOnPublish?.type\n  const publishedReferenceExists = hasRef && loadableReferenceInfo.result?.preview?.published?._id\n\n  const handleRemoveStrengthenOnPublish = useCallback(() => {\n    onChange([\n      schemaType.weak === true ? set(true, ['_weak']) : unset(['_weak']),\n      unset(['_strengthenOnPublish']),\n    ])\n  }, [onChange, schemaType.weak])\n\n  const refType = refTypeName\n    ? schemaType.to.find((toType) => toType.name === refTypeName)\n    : undefined\n  const pressed = selectedState === 'pressed'\n  const selected = selectedState === 'selected'\n\n  const tone = getTone({readOnly, hasErrors, hasWarnings})\n  const isEditing = !hasRef || focusPath[0] === '_ref'\n\n  const menu = useMemo(\n    () =>\n      readOnly ? null : (\n        <Box marginLeft={1}>\n          <MenuButton\n            button={<Button paddingY={3} paddingX={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n            id={`${inputId}-menuButton`}\n            menu={\n              <Menu>\n                {!readOnly && (\n                  <>\n                    <MenuItem text=\"Remove\" tone=\"critical\" icon={TrashIcon} onClick={onRemove} />\n                    <MenuItem\n                      text={hasRef && isEditing ? 'Cancel replace' : 'Replace'}\n                      icon={hasRef && isEditing ? CloseIcon : ReplaceIcon}\n                      onClick={\n                        hasRef && isEditing ? () => onPathFocus([]) : () => onPathFocus(['_ref'])\n                      }\n                    />\n                    <MenuItem text=\"Duplicate\" icon={DuplicateIcon} onClick={handleDuplicate} />\n                    <InsertMenu onInsert={handleInsert} types={insertableTypes} />\n                  </>\n                )}\n\n                {!readOnly && !isEditing && hasRef && <MenuDivider />}\n                {!isEditing && hasRef && (\n                  <MenuItem\n                    as={EditReferenceLink}\n                    data-as=\"a\"\n                    text=\"Open in new tab\"\n                    icon={OpenInNewTabIcon}\n                  />\n                )}\n              </Menu>\n            }\n            popover={MENU_POPOVER_PROPS}\n          />\n        </Box>\n      ),\n    [\n      readOnly,\n      inputId,\n      onRemove,\n      hasRef,\n      isEditing,\n      handleDuplicate,\n      handleInsert,\n      insertableTypes,\n      EditReferenceLink,\n      onPathFocus,\n    ]\n  )\n\n  const handleFixStrengthMismatch = useCallback(() => {\n    onChange(schemaType.weak === true ? set(true, ['_weak']) : unset(['_weak']))\n  }, [onChange, schemaType])\n\n  const weakIs = value?._weak ? 'weak' : 'strong'\n  const weakShouldBe = schemaType.weak === true ? 'weak' : 'strong'\n\n  // If the reference value is marked with _strengthenOnPublish,\n  // we allow weak references if the reference points to a document that has a draft but not a published\n  // In all other cases we should display a \"weak mismatch\" warning\n  const weakWarningOverride =\n    hasRef && !loadableReferenceInfo.isLoading && value?._strengthenOnPublish\n\n  const showWeakRefMismatch =\n    !loadableReferenceInfo.isLoading && hasRef && weakIs !== weakShouldBe && !weakWarningOverride\n\n  const preview =\n    loadableReferenceInfo.result?.preview.draft || loadableReferenceInfo.result?.preview.published\n\n  const issues = (\n    <>\n      {isCurrentDocumentLiveEdit && publishedReferenceExists && value._strengthenOnPublish && (\n        <AlertStrip\n          padding={1}\n          title={schemaType.weak ? 'Finalize reference' : 'Convert to strong reference'}\n          status=\"info\"\n          data-testid=\"alert-reference-published\"\n        >\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              <strong>{loadableReferenceInfo.result?.preview.published?.title}</strong> is published\n              and this reference should now be{' '}\n              {schemaType.weak ? <>finalized</> : <>converted to a strong reference</>}.\n            </Text>\n            <Button\n              onClick={handleRemoveStrengthenOnPublish}\n              text={<>Convert to strong reference</>}\n              tone=\"positive\"\n            />\n          </Stack>\n        </AlertStrip>\n      )}\n      {showWeakRefMismatch && (\n        <AlertStrip\n          padding={1}\n          title=\"Reference strength mismatch\"\n          status=\"warning\"\n          data-testid=\"alert-reference-strength-mismatch\"\n        >\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              This reference is <em>{weakIs}</em>, but according to the current schema it should be{' '}\n              <em>{weakShouldBe}.</em>\n            </Text>\n\n            <Text as=\"p\" muted size={1}>\n              {schemaType.weak ? (\n                <>\n                  It will not be possible to delete the \"{preview?.title}\"-document without first\n                  removing this reference.\n                </>\n              ) : (\n                <>\n                  This makes it possible to delete the \"{preview?.title}\"-document without first\n                  deleting this reference, leaving this field referencing a nonexisting document.\n                </>\n              )}\n            </Text>\n            <Button\n              onClick={handleFixStrengthMismatch}\n              text={<>Convert to {weakShouldBe} reference</>}\n              tone=\"caution\"\n            />\n          </Stack>\n        </AlertStrip>\n      )}\n      {loadableReferenceInfo.error && (\n        <AlertStrip\n          padding={1}\n          title=\"Unable to load reference metadata\"\n          status=\"warning\"\n          data-testid=\"alert-reference-info-failed\"\n        >\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              Error: {loadableReferenceInfo.error.message}\n            </Text>\n            <Button onClick={loadableReferenceInfo.retry!} text={<>Retry</>} tone=\"primary\" />\n          </Stack>\n        </AlertStrip>\n      )}\n    </>\n  )\n\n  const item = (\n    <RowLayout\n      dragHandle={sortable}\n      presence={\n        !isEditing && presence.length > 0 && <FieldPresence presence={presence} maxAvatars={1} />\n      }\n      validation={\n        !isEditing && validation.length > 0 && <FormFieldValidationStatus validation={validation} />\n      }\n      menu={menu}\n      footer={isEditing ? undefined : issues}\n      tone={isEditing ? undefined : tone}\n      focused={focused}\n    >\n      {isEditing ? (\n        <Box padding={1}>\n          <FormFieldSet\n            title={schemaType.title}\n            description={schemaType.description}\n            __unstable_presence={presence}\n            validation={validation}\n          >\n            {children}\n          </FormFieldSet>\n        </Box>\n      ) : (\n        <ReferencePreviewCard\n          forwardedAs={EditReferenceLink as any}\n          tone=\"inherit\"\n          radius={2}\n          data-as=\"a\"\n          documentId={value?._ref}\n          documentType={refType?.name}\n          disabled={resolvingInitialValue}\n          paddingX={2}\n          paddingY={1}\n          __unstable_focusRing\n          style={{position: 'relative'}}\n          selected={selected}\n          pressed={pressed}\n          data-selected={selected ? true : undefined}\n          data-pressed={pressed ? true : undefined}\n          {...elementProps}\n        >\n          <PreviewReferenceValue\n            value={value}\n            referenceInfo={loadableReferenceInfo}\n            renderPreview={renderPreview}\n            type={schemaType}\n          />\n          {resolvingInitialValue && (\n            <Card\n              style={INITIAL_VALUE_CARD_STYLE}\n              tone=\"transparent\"\n              radius={2}\n              as={Flex}\n              // @ts-expect-error composed from as={Flex}\n              justify=\"center\"\n            >\n              <Flex align=\"center\" justify=\"center\" padding={3}>\n                <Box marginX={3}>\n                  <Spinner muted />\n                </Box>\n                <Text>Resolving initial value…</Text>\n              </Flex>\n            </Card>\n          )}\n        </ReferencePreviewCard>\n      )}\n    </RowLayout>\n  )\n  return (\n    <ChangeIndicator path={path} isChanged={changed} hasFocus={Boolean(focused)}>\n      <Box paddingX={1}>{item}</Box>\n    </ChangeIndicator>\n  )\n}\n","// eslint-disable-next-line no-empty-function,@typescript-eslint/no-empty-function\n\nimport {isArraySchemaType, isBooleanSchemaType, isObjectSchemaType} from '@sanity/types'\nimport {ArrayOfObjectsInputProps, InputProps, ObjectInputProps} from '../types'\nimport {\n  BooleanFieldProps,\n  FieldProps,\n  ObjectFieldProps,\n  PrimitiveFieldProps,\n} from '../types/fieldProps'\n\nexport function assertType<T>(v: unknown): asserts v is T {\n  // intentionally empty\n}\n\nexport function isObjectInputProps(\n  inputProps: InputProps | Omit<InputProps, 'renderDefault'>\n): inputProps is ObjectInputProps {\n  return isObjectSchemaType(inputProps.schemaType)\n}\n\nexport function isArrayInputProps(\n  inputProps: InputProps | Omit<InputProps, 'renderDefault'>\n): inputProps is ArrayOfObjectsInputProps {\n  return isArraySchemaType(inputProps.schemaType)\n}\n\nexport function isPrimitiveField(\n  fieldProps: FieldProps | Omit<FieldProps, 'renderDefault'>\n): fieldProps is PrimitiveFieldProps {\n  return !isObjectSchemaType(fieldProps.schemaType) && !isArraySchemaType(fieldProps.schemaType)\n}\n\nexport function isBooleanField(\n  fieldProps: FieldProps | Omit<FieldProps, 'renderDefault'>\n): fieldProps is BooleanFieldProps {\n  return isBooleanSchemaType(fieldProps.schemaType)\n}\n\nexport function isObjectField(\n  fieldProps: FieldProps | Omit<FieldProps, 'renderDefault'>\n): fieldProps is ObjectFieldProps {\n  return isObjectSchemaType(fieldProps.schemaType)\n}\n","import {randomKey} from './randomKey'\n\nfunction hasKey<T extends {_key?: string}>(item: T): item is T & {_key: string} {\n  return item._key !== undefined\n}\n\nexport function ensureKey<T extends {_key?: string}>(item: T): T & {_key: string} {\n  return hasKey(item) ? item : {...item, _key: randomKey(12)}\n}\n","// Takes a observable-returning function and returns a new function that limits on the number of\n// concurrent observables.\nimport {first, mergeMap} from 'rxjs/operators'\nimport {Subject, Subscription, Observable, from as observableFrom} from 'rxjs'\nimport {FIXME} from '../../../FIXME'\n\nconst DEFAULT_CONCURRENCY = 4\n\nfunction remove<T>(array: Array<T>, item: T): Array<T> {\n  const index = array.indexOf(item)\n  if (index > -1) {\n    array.splice(index, 1)\n  }\n  return array\n}\n\nexport function withMaxConcurrency<Args extends any[], Ret>(\n  func: (...args: Args) => Observable<Ret>,\n  concurrency: number = DEFAULT_CONCURRENCY\n) {\n  const throttler = createThrottler(concurrency)\n  return (...args: Args) => observableFrom(throttler(func(...args))) as Observable<Ret>\n}\n\nexport function createThrottler(concurrency: number = DEFAULT_CONCURRENCY) {\n  const currentSubscriptions: Array<Subscription> = []\n  const pendingObservables: Array<Observable<any>> = []\n  const ready$ = new Subject()\n\n  return request\n\n  function request(observable: Observable<unknown>): Observable<unknown> {\n    return new Observable((observer) => {\n      if (currentSubscriptions.length >= concurrency) {\n        return scheduleAndWait(observable)\n          .pipe(mergeMap(request) as FIXME)\n          .subscribe(observer)\n      }\n      const subscription = observable.subscribe(observer)\n      currentSubscriptions.push(subscription)\n      return () => {\n        remove(currentSubscriptions, subscription)\n        remove(pendingObservables, observable)\n        subscription.unsubscribe()\n        check()\n      }\n    })\n  }\n\n  function scheduleAndWait(observable: Observable<unknown>) {\n    pendingObservables.push(observable)\n    return ready$.asObservable().pipe(first((obs) => obs === observable))\n  }\n\n  function check() {\n    while (pendingObservables.length > 0 && currentSubscriptions.length < concurrency) {\n      ready$.next(pendingObservables.shift())\n    }\n  }\n}\n","import {mergeMap, map, catchError} from 'rxjs/operators'\nimport {Observable, of as observableOf} from 'rxjs'\nimport {FileAsset, ImageAsset} from '@sanity/types'\nimport {SanityClient, ProgressEvent, SanityAssetDocument} from '@sanity/client'\nimport {withMaxConcurrency} from '../../utils'\nimport {UploadOptions} from '../../uploads/types'\nimport {DocumentPreviewStore} from '../../../../preview'\n\nconst MAX_CONCURRENT_UPLOADS = 4\n\ntype UploadEvent = ProgressEvent | {type: 'complete'; id: string; asset: SanityAssetDocument}\n\nfunction uploadSanityAsset(\n  client: SanityClient,\n  assetType: 'file' | 'image',\n  file: File | Blob,\n  options: UploadOptions = {}\n): Observable<UploadEvent> {\n  const extract = options.metadata\n  const preserveFilename = options.storeOriginalFilename\n  const {label, title, description, creditLine, source} = options\n  return hashFile(file).pipe(\n    catchError(() =>\n      // ignore if hashing fails for some reason\n      observableOf(null)\n    ),\n\n    mergeMap((hash) =>\n      // note: the sanity api will still dedupe unique files, but this saves us from uploading the asset file entirely\n      hash ? fetchExisting(client, `sanity.${assetType}Asset`, hash) : observableOf(null)\n    ),\n\n    mergeMap((existing: SanityAssetDocument | null) => {\n      if (existing) {\n        return observableOf({\n          // complete with the existing asset document\n          type: 'complete' as const,\n          id: existing._id,\n          asset: existing,\n        })\n      }\n      return client.observable.assets\n        .upload(assetType, file, {\n          tag: 'asset.upload',\n          extract,\n          preserveFilename,\n          label,\n          title,\n          description,\n          creditLine,\n          source,\n        })\n        .pipe(\n          map((event) =>\n            event.type === 'response'\n              ? {\n                  // rewrite to a 'complete' event\n                  type: 'complete' as const,\n                  id: event.body.document._id,\n                  asset: event.body.document,\n                }\n              : event\n          )\n        )\n    })\n  )\n}\n\nconst uploadAsset = withMaxConcurrency(uploadSanityAsset, MAX_CONCURRENT_UPLOADS)\n\nexport const uploadImageAsset = (\n  client: SanityClient,\n  file: File | Blob,\n  options?: UploadOptions\n) => uploadAsset(client, 'image', file, options)\n\nexport const uploadFileAsset = (client: SanityClient, file: File | Blob, options?: UploadOptions) =>\n  uploadAsset(client, 'file', file, options)\n\n// note: there's currently 100% overlap between the ImageAsset document and the FileAsset documents as per interface required by the image and file input\nfunction observeAssetDoc(documentPreviewStore: DocumentPreviewStore, id: string) {\n  return documentPreviewStore.observePaths({_type: 'reference', _ref: id}, [\n    'originalFilename',\n    'url',\n    'metadata',\n    'label',\n    'title',\n    'description',\n    'creditLine',\n    'source',\n    'size',\n  ])\n}\n\nexport function observeImageAsset(documentPreviewStore: DocumentPreviewStore, id: string) {\n  return observeAssetDoc(documentPreviewStore, id) as Observable<ImageAsset>\n}\n\nexport function observeFileAsset(documentPreviewStore: DocumentPreviewStore, id: string) {\n  return observeAssetDoc(documentPreviewStore, id) as Observable<FileAsset>\n}\n\nfunction fetchExisting(\n  client: SanityClient,\n  type: string,\n  hash: string\n): Observable<ImageAsset | FileAsset | null> {\n  return client.observable.fetch(\n    '*[_type == $documentType && sha1hash == $hash][0]',\n    {documentType: type, hash},\n    {tag: 'asset.find-duplicate'}\n  )\n}\n\nfunction readFile(file: Blob | File): Observable<ArrayBuffer> {\n  return new Observable((subscriber) => {\n    const reader = new FileReader()\n    reader.onload = () => {\n      subscriber.next(reader.result as ArrayBuffer)\n      subscriber.complete()\n    }\n    reader.onerror = (err) => {\n      subscriber.error(err)\n    }\n    reader.readAsArrayBuffer(file)\n    return () => {\n      reader.abort()\n    }\n  })\n}\n\nfunction hashFile(file: File | Blob): Observable<string | null> {\n  if (!window.crypto || !window.crypto.subtle || !window.FileReader) {\n    return observableOf(null)\n  }\n  return readFile(file).pipe(\n    mergeMap((arrayBuffer) => crypto.subtle.digest('SHA-1', arrayBuffer)),\n    map(hexFromBuffer)\n  )\n}\n\nfunction hexFromBuffer(buffer: ArrayBuffer): string {\n  return Array.prototype.map\n    .call(new Uint8Array(buffer), (x) => `00${x.toString(16)}`.slice(-2))\n    .join('')\n}\n","import {Observable, of as observableOf, from as observableFrom} from 'rxjs'\nimport {map, catchError} from 'rxjs/operators'\nimport exif from 'exif-component'\n\nfunction readFileAsArrayBuffer(\n  file: File,\n  length: number\n): Observable<string | ArrayBuffer | null> {\n  return new Observable((observer) => {\n    const reader = new window.FileReader()\n    reader.onerror = (err) => observer.error(err)\n    reader.onload = () => {\n      observer.next(reader.result)\n      observer.complete()\n    }\n    reader.readAsArrayBuffer(length === undefined ? file : file.slice(0, length))\n    return () => reader.abort()\n  })\n}\n\nconst SKIP_EXIF_ERROR_RE = /(invalid image format)|(No exif data)/i\n\n// 128k should be enough for exif data according to https://github.com/mattiasw/ExifReader#tips\nconst EXIF_BUFFER_LENGTH = 128000\n\nexport function readExif(file: File) {\n  return observableFrom(readFileAsArrayBuffer(file, EXIF_BUFFER_LENGTH)).pipe(\n    map((buf) => exif(buf)),\n    catchError((error) => {\n      if (!SKIP_EXIF_ERROR_RE.test(error.message)) {\n        // Exif read failed, we do not want to fail hard\n        console.warn(`Exif read failed, continuing anyway: ${error.message}`) // eslint-disable-line no-console\n      }\n      return observableOf({})\n    })\n  )\n}\n","import {Observable} from 'rxjs'\n\n/* eslint-disable */\n\n/**\n * Check if we need to change dims.\n */\nfunction rotated(n: number) {\n  return [5, 6, 7, 8].indexOf(n) > -1\n}\n\ntype RotateOpts = {\n  degrees?: number\n  x: number\n  y: number\n}\n\n// Based on github.com/component/rotate\nfunction rotate(ctx: CanvasRenderingContext2D | null, options: RotateOpts) {\n  const x = options.x\n  const y = options.y\n\n  const radians = (options.degrees || 0) * (Math.PI / 180)\n\n  ctx?.translate(x, y)\n  ctx?.rotate(radians)\n  ctx?.translate(-x, -y)\n}\n\n// Based on github.com/component/flip\nfunction flip(canvas: HTMLCanvasElement, x: boolean, y: boolean) {\n  const ctx = canvas.getContext('2d')\n  ctx?.translate(x ? canvas.width : 0, y ? canvas.height : 0)\n  ctx?.scale(x ? -1 : 1, y ? -1 : 1)\n}\n\nconst ORIENTATION_OPS = [\n  {op: 'none', degrees: 0},\n  {op: 'flip-x', degrees: 0},\n  {\n    op: 'none',\n    degrees: 180,\n  },\n  {op: 'flip-y', degrees: 0},\n  {op: 'flip-x', degrees: 90},\n  {op: 'none', degrees: 90},\n  {\n    op: 'flip-x',\n    degrees: -90,\n  },\n  {op: 'none', degrees: -90},\n]\n\nexport type Orientation =\n  | 'top-left'\n  | 'top-right'\n  | 'bottom-right'\n  | 'bottom-left'\n  | 'left-top'\n  | 'right-top'\n  | 'right-bottom'\n  | 'left-bottom'\n\nconst ORIENTATIONS: Array<Orientation> = [\n  'top-left',\n  'top-right',\n  'bottom-right',\n  'bottom-left',\n  'left-top',\n  'right-top',\n  'right-bottom',\n  'left-bottom',\n]\n\nexport const DEFAULT_ORIENTATION: Orientation = 'top-left'\n\nconst THUMB_SIZE = 120\n\n// Based on github.com/component/exif-rotate\nfunction _orient(img: HTMLImageElement, orientationNumber: number): HTMLCanvasElement {\n  const orientation = ORIENTATION_OPS[orientationNumber - 1]\n\n  const ratio = img.height / img.width\n  img.width = THUMB_SIZE / ratio\n  img.height = img.width * ratio\n\n  // canvas\n  const canvas = document.createElement('canvas')\n  const ctx = canvas.getContext('2d')\n\n  // dims\n  if (rotated(orientationNumber)) {\n    canvas.height = img.width\n    canvas.width = img.height\n  } else {\n    canvas.width = img.width\n    canvas.height = img.height\n  }\n\n  // flip\n  if (orientation.op === 'flip-x') {\n    flip(canvas, true, false)\n  }\n  if (orientation.op === 'flip-y') {\n    flip(canvas, false, true)\n  }\n\n  // rotate\n  if (orientation.degrees) {\n    rotate(ctx, {\n      degrees: orientation.degrees,\n      x: canvas.width / 2,\n      y: canvas.height / 2,\n    })\n\n    if (rotated(orientationNumber)) {\n      const d = canvas.width - canvas.height\n      ctx?.translate(d / 2, -d / 2)\n    }\n  }\n\n  ctx?.drawImage(img, 0, 0, img.width, img.height)\n  return canvas\n}\n\n/* eslint-enable */\nexport function orient(image: HTMLImageElement, orientationId: Orientation) {\n  return new Observable((observer) => {\n    // console.time('canvas to blob')\n    const orientation = ORIENTATIONS.indexOf(orientationId) + 1\n    const canvas = _orient(image, orientation)\n    observer.next(canvas.toDataURL('image/jpeg', 0.1))\n    observer.complete()\n  })\n}\n","import {Observable} from 'rxjs'\nimport {mergeMap} from 'rxjs/operators'\nimport {orient, Orientation} from './orient'\n\nfunction loadImage(url: string): Observable<HTMLImageElement> {\n  return new Observable((observer) => {\n    const image = new window.Image()\n    //console.time(\"read image\");\n    image.onerror = () => {\n      observer.error(\n        new Error(`Could not load image from url \"${url}\". Image may be of an unsupported format`)\n      )\n    }\n    image.onload = () => {\n      //console.timeEnd(\"read image\");\n      observer.next(image)\n      observer.complete()\n    }\n    image.src = url\n    return () => {\n      // todo: cancel loading (if possible?)\n    }\n  })\n}\n\nexport function rotateImage(file: File, orientation: Orientation) {\n  return loadImage(window.URL.createObjectURL(file)).pipe(\n    mergeMap((image) => orient(image, orientation))\n  )\n}\n","export const UPLOAD_STATUS_KEY = '_upload'\n","import {FormPatch, set, unset} from '../../patch'\nimport {UploadProgressEvent} from './types'\nimport {UPLOAD_STATUS_KEY} from './constants'\n\nconst UNSET_UPLOAD_PATCH = unset([UPLOAD_STATUS_KEY])\n\nexport function createUploadEvent(patches: FormPatch[] = []): UploadProgressEvent {\n  return {\n    type: 'uploadProgress',\n    patches,\n  }\n}\n\nexport const CLEANUP_EVENT = createUploadEvent([UNSET_UPLOAD_PATCH])\n\nexport function createInitialUploadEvent(file: File) {\n  const now = new Date().toISOString()\n  const value = {\n    progress: 2,\n    createdAt: now,\n    updatedAt: now,\n    file: {name: file.name, type: file.type},\n  }\n\n  return createUploadEvent([set(value, [UPLOAD_STATUS_KEY])])\n}\n","import {concat, merge, Observable, of} from 'rxjs'\nimport {catchError, filter, map, mergeMap} from 'rxjs/operators'\nimport type {SanityClient} from '@sanity/client'\nimport {set} from '../../patch'\nimport {uploadImageAsset} from '../inputs/client-adapters/assets'\nimport {readExif} from './image/readExif'\nimport {rotateImage} from './image/rotateImage'\nimport {DEFAULT_ORIENTATION, Orientation} from './image/orient'\nimport {UploadOptions, UploadProgressEvent} from './types'\nimport {UPLOAD_STATUS_KEY} from './constants'\nimport {CLEANUP_EVENT, createInitialUploadEvent, createUploadEvent} from './utils'\n\ntype Exif = {\n  orientation: Orientation\n}\n\nexport function uploadImage(\n  client: SanityClient,\n  file: File,\n  options?: UploadOptions\n): Observable<UploadProgressEvent> {\n  const upload$ = uploadImageAsset(client, file, options).pipe(\n    filter((event: any) => event.stage !== 'download'),\n    map((event) => ({\n      ...event,\n      progress: 2 + (event.percent / 100) * 98,\n    })),\n\n    map((event) => {\n      if (event.type === 'complete') {\n        return createUploadEvent([\n          set({_type: 'reference', _ref: event.asset._id}, ['asset']),\n          set(100, [UPLOAD_STATUS_KEY, 'progress']),\n          set(new Date().toISOString(), [UPLOAD_STATUS_KEY, 'updatedAt']),\n        ])\n      }\n      return createUploadEvent([\n        set(event.percent, [UPLOAD_STATUS_KEY, 'progress']),\n        set(new Date().toISOString(), [UPLOAD_STATUS_KEY, 'updatedAt']),\n      ])\n    })\n  )\n\n  const setPreviewUrl$ = readExif(file).pipe(\n    mergeMap((exifData: unknown) =>\n      rotateImage(file, (exifData as Exif).orientation || DEFAULT_ORIENTATION)\n    ),\n    catchError((error) => {\n      // eslint-disable-next-line no-console\n      console.warn(\n        'Image preprocessing failed for \"%s\" with the error: %s',\n        file.name,\n        error.message\n      )\n\n      // something went wrong, but continue still\n      return of(null)\n    }),\n    filter(Boolean),\n    map((imageUrl) => createUploadEvent([set(imageUrl, [UPLOAD_STATUS_KEY, 'previewImage'])]))\n  )\n\n  return concat(\n    of(createInitialUploadEvent(file)),\n    merge(upload$, setPreviewUrl$),\n    of(CLEANUP_EVENT)\n  )\n}\n","import {of, concat, Observable} from 'rxjs'\nimport {map} from 'rxjs/operators'\nimport {SanityClient} from '@sanity/client'\nimport {set} from '../../patch'\nimport {uploadFileAsset} from '../inputs/client-adapters/assets'\nimport {UploadProgressEvent, UploadOptions} from './types'\nimport {UPLOAD_STATUS_KEY} from './constants'\nimport {createUploadEvent, createInitialUploadEvent, CLEANUP_EVENT} from './utils'\n\nexport function uploadFile(\n  client: SanityClient,\n  file: File,\n  options?: UploadOptions\n): Observable<UploadProgressEvent> {\n  const upload$ = uploadFileAsset(client, file, options).pipe(\n    map((event) => {\n      if (event.type === 'complete') {\n        return createUploadEvent([\n          set({_type: 'reference', _ref: event.asset._id}, ['asset']),\n          set(100, [UPLOAD_STATUS_KEY, 'progress']),\n          set(new Date().toISOString(), [UPLOAD_STATUS_KEY, 'updated']),\n        ])\n      }\n      return createUploadEvent([\n        set(event.percent, [UPLOAD_STATUS_KEY, 'progress']),\n        set(new Date().toISOString(), [UPLOAD_STATUS_KEY, 'updated']),\n      ])\n    })\n  )\n\n  return concat(of(createInitialUploadEvent(file)), upload$, of(CLEANUP_EVENT))\n}\n","import {SchemaType} from '@sanity/types'\nimport {map} from 'rxjs/operators'\nimport {SanityClient} from '@sanity/client'\nimport {set} from '../../patch'\nimport {uploadImage} from './uploadImage'\nimport {uploadFile} from './uploadFile'\nimport {Uploader, UploaderDef, UploadOptions} from './types'\n\nconst UPLOAD_IMAGE: UploaderDef = {\n  type: 'image',\n  accepts: 'image/*',\n  upload: (client: SanityClient, file: File, type?: SchemaType, options?: UploadOptions) =>\n    uploadImage(client, file, options),\n}\n\nconst UPLOAD_FILE: UploaderDef = {\n  type: 'file',\n  accepts: '',\n  upload: (client: SanityClient, file: File, type: SchemaType, options?: UploadOptions) =>\n    uploadFile(client, file, options),\n}\n\nconst UPLOAD_TEXT: UploaderDef = {\n  type: 'string',\n  accepts: 'text/*',\n  upload: (client: SanityClient, file: File, type: SchemaType, options?: UploadOptions) =>\n    uploadFile(client, file, options).pipe(\n      map((content) => ({\n        type: 'uploadProgress',\n        patches: [set(content)],\n      }))\n    ),\n\n  // Todo: promote this to a \"first-class\" form-builder abstraction\n  // and make it possible to register custom uploaders\n}\n\nexport const uploaders: Array<Uploader> = [UPLOAD_IMAGE, UPLOAD_TEXT, UPLOAD_FILE].map(\n  (uploader, i) => ({\n    ...uploader,\n    priority: i,\n  })\n)\n","import type {FileLike} from './types'\n\n/**\n * Check if the provided file type should be accepted by the input with accept attribute.\n * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Input#attr-accept\n *\n * Inspired by https://github.com/enyo/dropzone (MIT) (c) 2021 Matias Meno\n * Based on https://github.com/react-dropzone/attr-accept (MIT) (c) 2015 Andrey Okonetchnikov\n *\n * @param file - https://developer.mozilla.org/en-US/docs/Web/API/File\n * @param acceptedFiles - List of accepted mime types (comma-separated string or array)\n * @returns True if file is accepted, false otherwise\n */\nexport function accepts(file: FileLike, acceptedFiles: string | string[]): boolean {\n  if (!file || !acceptedFiles) {\n    return true\n  }\n\n  const acceptedFilesArray = Array.isArray(acceptedFiles)\n    ? acceptedFiles // eg `['image/png', 'image/jpeg']`\n    : acceptedFiles.split(',') // eg `image/png,image/jpeg`\n\n  const fileName = file.name || ''\n  const mimeType = (file.type || '').toLowerCase()\n  const baseMimeType = mimeType.replace(/\\/.*$/, '')\n\n  return acceptedFilesArray.some((type) => {\n    const validType = type.trim().toLowerCase()\n\n    if (validType.charAt(0) === '.') {\n      return fileName.toLowerCase().endsWith(validType)\n    }\n\n    if (validType.endsWith('/*')) {\n      // This is something like a image/* mime type\n      return baseMimeType === validType.replace(/\\/.*$/, '')\n    }\n\n    return mimeType === validType\n  })\n}\n","import type {SchemaType} from '@sanity/types'\nimport * as is from '../../utils/is'\nimport {FIXME} from '../../../FIXME'\nimport type {FileLike, Uploader} from './types'\nimport {uploaders} from './uploaders'\nimport {accepts} from './accepts'\n\nexport function resolveUploader(type: SchemaType, file: FileLike): Uploader | null {\n  return (\n    uploaders.find((uploader) => {\n      return (\n        is.type(uploader.type, type) &&\n        accepts(file, uploader.accepts) &&\n        accepts(file, (type.options as FIXME)?.accept || '')\n      )\n    }) || null\n  )\n}\n","const IGNORE_KEYS = ['_key', '_type', '_weak']\n\nexport function isEmptyItem(value: Record<string, unknown>): value is Record<never, never> {\n  return Object.keys(value).every((key) => IGNORE_KEYS.includes(key))\n}\n","import {ArraySchemaType, Path, SchemaType} from '@sanity/types'\nimport {concat, defer, EMPTY, from, Observable, of} from 'rxjs'\nimport {catchError, filter, map, mergeMap} from 'rxjs/operators'\nimport {resolveTypeName} from '@sanity/util/content'\nimport {FormPatch, set, unset} from '../../patch'\nimport {ObjectItem} from '../../types'\nimport {isEmptyItem} from '../../store/utils/isEmptyItem'\nimport {isNonNullable} from '../../../util'\n\nconst getMemberTypeOfItem = (schemaType: ArraySchemaType, item: any): SchemaType | undefined => {\n  const itemTypeName = resolveTypeName(item)\n  return schemaType.of.find((memberType) => memberType.name === itemTypeName)\n}\n\n/**\n * Create patches that shallow merges keys from the given value\n * Used by initial value resolver to retain any properties already added on the item when initial value is done resolving\n * */\nfunction assign(values: Record<string, unknown>, path: Path) {\n  return Object.entries(values).map(([key, value]) => set(value, [...path, key]))\n}\n\nexport function resolveInitialArrayValues<T extends ObjectItem>(\n  items: T[],\n  schemaType: ArraySchemaType,\n  resolver: (type: SchemaType, params: Record<string, unknown>) => Promise<T>\n): Observable<\n  | {type: 'patch'; patches: FormPatch[]}\n  | {type: 'error'; error: Error; item: T; schemaType: SchemaType}\n> {\n  return from(items).pipe(\n    mergeMap((item) => {\n      const itemPathSegment = {_key: item._key}\n      return of(getMemberTypeOfItem(schemaType, item)).pipe(\n        mergeMap((memberType) => (memberType ? of(memberType) : EMPTY)),\n        mergeMap((memberType) => {\n          if (!isEmptyItem(item) || !resolver) {\n            return EMPTY\n          }\n          return concat(\n            of({\n              type: 'patch' as const,\n              patches: [set(true, [itemPathSegment, '_resolvingInitialValue'])],\n            }),\n            defer(() => resolver(memberType, item)).pipe(\n              filter(isNonNullable),\n              map((initial) => ({\n                type: 'patch' as const,\n                patches: assign(initial, [itemPathSegment]),\n              })),\n              catchError((error) =>\n                of({type: 'error' as const, error, item, schemaType: memberType})\n              )\n            ),\n            of({\n              type: 'patch' as const,\n              patches: [unset([itemPathSegment, '_resolvingInitialValue'])],\n            })\n          )\n        })\n      )\n    })\n  )\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {Path, SchemaType} from '@sanity/types'\nimport {map, tap} from 'rxjs/operators'\nimport {Subscription} from 'rxjs'\nimport {useToast} from '@sanity/ui'\nimport {ArrayOfObjectsFormNode, FieldMember} from '../../../store'\nimport {\n  ArrayFieldProps,\n  ArrayInputInsertEvent,\n  ArrayInputMoveItemEvent,\n  ArrayOfObjectsInputProps,\n  ObjectItem,\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n  UploadEvent,\n} from '../../../types'\nimport {FormCallbacksProvider, useFormCallbacks} from '../../../studio/contexts/FormCallbacks'\nimport {useDidUpdate} from '../../../hooks/useDidUpdate'\nimport {insert, PatchArg, PatchEvent, setIfMissing, unset} from '../../../patch'\nimport {ensureKey} from '../../../utils/ensureKey'\nimport {FileLike, UploadProgressEvent} from '../../../studio/uploads/types'\nimport {createProtoArrayValue} from '../../../inputs/arrays/ArrayOfObjectsInput/createProtoArrayValue'\nimport {useClient} from '../../../../hooks'\nimport {resolveUploader as defaultResolveUploader} from '../../../studio/uploads/resolveUploader'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../studioClient'\nimport {useFormBuilder} from '../../../useFormBuilder'\nimport * as is from '../../../utils/is'\nimport {useResolveInitialValueForType} from '../../../../store'\nimport {resolveInitialArrayValues} from '../../common/resolveInitialArrayValues'\n\n/**\n * Responsible for creating inputProps and fieldProps to pass to ´renderInput´ and ´renderField´ for an array input\n * Note: \"ArrayField\" in this context means an object field of an array type\n * @param props - Component props\n */\nexport function ArrayOfObjectsField(props: {\n  member: FieldMember<ArrayOfObjectsFormNode>\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}) {\n  const {\n    onPathBlur,\n    onPathFocus,\n    onChange,\n    onSetPathCollapsed,\n    onSetFieldSetCollapsed,\n    onPathOpen,\n    onFieldGroupSelect,\n  } = useFormCallbacks()\n\n  const {member, renderField, renderInput, renderItem, renderPreview} = props\n  const focusRef = useRef<Element & {focus: () => void}>()\n  const uploadSubscriptions = useRef<Record<string, Subscription>>({})\n\n  useDidUpdate(member.field.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const handleFocus = useCallback(\n    (event: React.FocusEvent) => {\n      // We want to handle focus when the array input *itself* element receives\n      // focus, not when a child element receives focus, but React has decided\n      // to let focus bubble, so this workaround is needed\n      // Background: https://github.com/facebook/react/issues/6410#issuecomment-671915381\n      if (event.currentTarget === event.target && event.currentTarget === focusRef.current) {\n        onPathFocus(member.field.path)\n      }\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const handleBlur = useCallback(\n    (event: React.FocusEvent) => {\n      // We want to handle blur when the array input *itself* element receives\n      // blur, not when a child element receives blur, but React has decided\n      // to let focus events bubble, so this workaround is needed\n      // Background: https://github.com/facebook/react/issues/6410#issuecomment-671915381\n      if (event.currentTarget === event.target && event.currentTarget === focusRef.current) {\n        onPathBlur(member.field.path)\n      }\n    },\n    [member.field.path, onPathBlur]\n  )\n\n  const handleChange = useCallback(\n    (event: PatchEvent | PatchArg) => {\n      onChange(PatchEvent.from(event).prepend(setIfMissing([])).prefixAll(member.name))\n    },\n    [onChange, member.name]\n  )\n  const resolveInitialValue = useResolveInitialValueForType()\n\n  const toast = useToast()\n\n  const handleCollapse = useCallback(() => {\n    onSetPathCollapsed(member.field.path, true)\n  }, [onSetPathCollapsed, member.field.path])\n\n  const handleExpand = useCallback(() => {\n    onSetPathCollapsed(member.field.path, false)\n  }, [onSetPathCollapsed, member.field.path])\n\n  const handleCollapseItem = useCallback(\n    (itemKey: string) => {\n      onSetPathCollapsed(member.field.path.concat({_key: itemKey}), true)\n    },\n    [onSetPathCollapsed, member.field.path]\n  )\n\n  const handleExpandItem = useCallback(\n    (itemKey: string) => {\n      onSetPathCollapsed(member.field.path.concat({_key: itemKey}), false)\n    },\n    [onSetPathCollapsed, member.field.path]\n  )\n\n  const handleOpenItem = useCallback(\n    (path: Path) => {\n      onPathOpen(path)\n      onSetPathCollapsed(path, false)\n    },\n    [onPathOpen, onSetPathCollapsed]\n  )\n\n  const handleCloseItem = useCallback(() => {\n    onPathOpen(member.field.path)\n    onSetPathCollapsed(member.field.path, true)\n  }, [onPathOpen, member.field.path, onSetPathCollapsed])\n\n  const handleInsert = useCallback(\n    (event: ArrayInputInsertEvent<ObjectItem>) => {\n      if (event.items.length === 0) {\n        throw new Error('Insert event should include at least one item')\n      }\n      const itemsWithKeys = event.items.map((item) => ensureKey(item))\n\n      handleChange(PatchEvent.from([insert(itemsWithKeys, event.position, [event.referenceItem])]))\n\n      const focusItemKey = itemsWithKeys[0]._key\n      const itemPath = [...member.field.path, {_key: focusItemKey}]\n      // Set focus at the first item (todo: verify that this is the expected/better behavior when adding multiple items)\n      onPathFocus(itemPath)\n\n      const shouldOpen = event.open !== false\n\n      if (event.skipInitialValue) {\n        if (shouldOpen) {\n          handleOpenItem(itemPath)\n        }\n      } else {\n        resolveInitialArrayValues(itemsWithKeys, member.field.schemaType, resolveInitialValue)\n          .pipe(\n            tap((result) => {\n              if (result.type === 'patch') {\n                handleChange(result.patches)\n              } else {\n                toast.push({\n                  title: `Could not resolve initial value`,\n                  description: `Unable to resolve initial value for type: ${result.schemaType.title}: ${result.error.message}.`,\n                  status: 'error',\n                })\n              }\n            })\n          )\n          .subscribe({\n            complete: () => {\n              if (shouldOpen) {\n                handleOpenItem(itemPath)\n              }\n            },\n          })\n      }\n    },\n    [\n      handleChange,\n      handleOpenItem,\n      member.field.path,\n      member.field.schemaType,\n      onPathFocus,\n      resolveInitialValue,\n      toast,\n    ]\n  )\n\n  const handleMoveItem = useCallback(\n    (event: ArrayInputMoveItemEvent) => {\n      const value = member.field.value\n      const item = value?.[event.fromIndex] as any\n      const refItem = value?.[event.toIndex] as any\n      if (event.fromIndex === event.toIndex) {\n        return\n      }\n\n      if (!(item as any)?._key || !(refItem as any)?._key) {\n        // eslint-disable-next-line no-console\n        console.error(\n          'Neither the item you are moving nor the item you are moving to have a key. Cannot continue.'\n        )\n\n        return\n      }\n\n      handleChange([\n        unset([{_key: item._key}]),\n        insert([item], event.fromIndex > event.toIndex ? 'before' : 'after', [\n          {_key: refItem._key},\n        ]),\n      ])\n    },\n    [handleChange, member.field.value]\n  )\n\n  const handlePrependItem = useCallback(\n    (item: any) => {\n      handleChange([setIfMissing([]), insert([ensureKey(item)], 'before', [0])])\n    },\n    [handleChange]\n  )\n  const handleAppendItem = useCallback(\n    (item: any) => {\n      handleChange([setIfMissing([]), insert([ensureKey(item)], 'after', [-1])])\n    },\n    [handleChange]\n  )\n\n  const handleRemoveItem = useCallback(\n    (itemKey: string) => {\n      if (uploadSubscriptions.current[itemKey]) {\n        uploadSubscriptions.current[itemKey].unsubscribe()\n        delete uploadSubscriptions.current[itemKey]\n      }\n      handleChange([unset(member.field.path.concat({_key: itemKey}))])\n    },\n    [handleChange, member.field.path]\n  )\n\n  const handleFocusChildPath = useCallback(\n    (path: Path) => {\n      onPathFocus(member.field.path.concat(path))\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const elementProps = useMemo(\n    (): ArrayOfObjectsInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.field.id,\n      ref: focusRef,\n    }),\n    [handleBlur, handleFocus, member.field.id]\n  )\n\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const formBuilder = useFormBuilder()\n\n  const supportsImageUploads = formBuilder.__internal.image.directUploads\n  const supportsFileUploads = formBuilder.__internal.file.directUploads\n\n  const resolveUploader = useCallback(\n    (type: SchemaType, file: FileLike) => {\n      if (is.type('image', type) && !supportsImageUploads) {\n        return null\n      }\n      if (is.type('file', type) && !supportsFileUploads) {\n        return null\n      }\n\n      return defaultResolveUploader(type, file)\n    },\n    [supportsFileUploads, supportsImageUploads]\n  )\n\n  const handleUpload = useCallback(\n    ({file, schemaType, uploader}: UploadEvent) => {\n      const item = createProtoArrayValue(schemaType)\n      const key = item._key\n\n      handleInsert({\n        items: [item],\n        position: 'after',\n        referenceItem: -1,\n        open: false,\n      })\n\n      const events$ = uploader.upload(client, file, schemaType).pipe(\n        map((uploadProgressEvent: UploadProgressEvent) =>\n          PatchEvent.from(uploadProgressEvent.patches || []).prefixAll({_key: key})\n        ),\n        tap((event) => handleChange(event.patches))\n      )\n\n      uploadSubscriptions.current = {\n        ...uploadSubscriptions.current,\n        [key]: events$.subscribe(),\n      }\n    },\n    [client, handleChange, handleInsert]\n  )\n\n  const inputProps = useMemo((): Omit<ArrayOfObjectsInputProps, 'renderDefault'> => {\n    return {\n      level: member.field.level,\n      members: member.field.members,\n      value: member.field.value as any,\n      readOnly: member.field.readOnly,\n      schemaType: member.field.schemaType,\n      changed: member.field.changed,\n      id: member.field.id,\n      onItemExpand: handleExpandItem,\n      onItemCollapse: handleCollapseItem,\n      onItemClose: handleCloseItem,\n      onItemOpen: handleOpenItem,\n\n      focusPath: member.field.focusPath,\n      focused: member.field.focused,\n\n      path: member.field.path,\n\n      onChange: handleChange,\n      onInsert: handleInsert,\n      onItemMove: handleMoveItem,\n      onItemRemove: handleRemoveItem,\n      onItemAppend: handleAppendItem,\n      onItemPrepend: handlePrependItem,\n      onPathFocus: handleFocusChildPath,\n      resolveInitialValue,\n      onUpload: handleUpload,\n      resolveUploader: resolveUploader,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      renderInput,\n      renderField,\n      renderItem,\n      renderPreview,\n      elementProps,\n    }\n  }, [\n    member.field.level,\n    member.field.members,\n    member.field.value,\n    member.field.readOnly,\n    member.field.schemaType,\n    member.field.changed,\n    member.field.id,\n    member.field.focusPath,\n    member.field.focused,\n    member.field.path,\n    member.field.validation,\n    member.field.presence,\n    handleExpandItem,\n    handleCollapseItem,\n    handleCloseItem,\n    handleOpenItem,\n    handleChange,\n    handleInsert,\n    handleMoveItem,\n    handleRemoveItem,\n    handleAppendItem,\n    handlePrependItem,\n    handleFocusChildPath,\n    resolveInitialValue,\n    handleUpload,\n    resolveUploader,\n    renderInput,\n    renderField,\n    renderItem,\n    renderPreview,\n    elementProps,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const fieldProps = useMemo((): Omit<ArrayFieldProps, 'renderDefault'> => {\n    return {\n      name: member.name,\n      index: member.index,\n      level: member.field.level,\n      value: member.field.value,\n      title: member.field.schemaType.title,\n      description: member.field.schemaType.description,\n      collapsible: member.collapsible,\n      collapsed: member.collapsed,\n      changed: member.field.changed,\n      onCollapse: handleCollapse,\n      onExpand: handleExpand,\n      schemaType: member.field.schemaType,\n      inputId: member.field.id,\n      path: member.field.path,\n      presence: member.field.presence,\n      validation: member.field.validation,\n      children: renderedInput,\n      inputProps: inputProps as ArrayOfObjectsInputProps,\n    }\n  }, [\n    member.name,\n    member.index,\n    member.field.level,\n    member.field.value,\n    member.field.schemaType,\n    member.field.id,\n    member.field.path,\n    member.field.presence,\n    member.field.changed,\n    member.field.validation,\n    member.collapsible,\n    member.collapsed,\n    handleCollapse,\n    handleExpand,\n    renderedInput,\n    inputProps,\n  ])\n\n  return (\n    <FormCallbacksProvider\n      onFieldGroupSelect={onFieldGroupSelect}\n      onChange={handleChange}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onPathOpen={onPathOpen}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n    >\n      {useMemo(() => renderField(fieldProps), [fieldProps, renderField])}\n    </FormCallbacksProvider>\n  )\n}\n","import React, {useCallback, useEffect, useMemo, useRef} from 'react'\nimport {isBooleanSchemaType, isNumberSchemaType} from '@sanity/types'\nimport {FieldMember} from '../../../store'\nimport {\n  PrimitiveFieldProps,\n  PrimitiveInputProps,\n  RenderFieldCallback,\n  RenderInputCallback,\n} from '../../../types'\nimport {FormPatch, PatchEvent, set, unset} from '../../../patch'\nimport {useFormCallbacks} from '../../../studio/contexts/FormCallbacks'\n\n/**\n * Responsible for creating inputProps and fieldProps to pass to ´renderInput´ and ´renderField´ for a primitive field/input\n * @param props - Component props\n *\n * @internal\n */\nexport function PrimitiveField(props: {\n  member: FieldMember\n  renderInput: RenderInputCallback<PrimitiveInputProps>\n  renderField: RenderFieldCallback<PrimitiveFieldProps>\n}) {\n  const {member, renderInput, renderField} = props\n  const focusRef = useRef<{focus: () => void}>()\n\n  const {onPathBlur, onPathFocus, onChange} = useFormCallbacks()\n\n  useEffect(() => {\n    if (member.field.focused) {\n      focusRef.current?.focus()\n    }\n  }, [member.field.focused])\n\n  const handleBlur = useCallback(() => {\n    onPathBlur(member.field.path)\n  }, [member.field.path, onPathBlur])\n\n  const handleFocus = useCallback(() => {\n    onPathFocus(member.field.path)\n  }, [member.field.path, onPathFocus])\n\n  const handleChange = useCallback(\n    (event: FormPatch | FormPatch[] | PatchEvent) => {\n      onChange(PatchEvent.from(event).prefixAll(member.name))\n    },\n    [onChange, member.name]\n  )\n\n  const handleNativeChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      let inputValue: number | string | boolean = event.currentTarget.value\n      if (isNumberSchemaType(member.field.schemaType)) {\n        inputValue = event.currentTarget.valueAsNumber\n      } else if (isBooleanSchemaType(member.field.schemaType)) {\n        inputValue = event.currentTarget.checked\n      }\n\n      // `valueAsNumber` returns `NaN` on empty input\n      const hasEmptyValue =\n        inputValue === '' || (typeof inputValue === 'number' && isNaN(inputValue))\n\n      onChange(PatchEvent.from(hasEmptyValue ? unset() : set(inputValue)).prefixAll(member.name))\n    },\n    [member.name, member.field.schemaType, onChange]\n  )\n\n  const validationError =\n    useMemo(\n      () =>\n        member.field.validation\n          .filter((item) => item.level === 'error')\n          .map((item) => item.message)\n          .join('\\n'),\n      [member.field.validation]\n    ) || undefined\n\n  const elementProps = useMemo(\n    (): PrimitiveInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.field.id,\n      ref: focusRef,\n      onChange: handleNativeChange,\n      value: String(member.field.value || ''),\n      readOnly: Boolean(member.field.readOnly),\n      placeholder: member.field.schemaType.placeholder,\n    }),\n    [\n      handleBlur,\n      handleFocus,\n      handleNativeChange,\n      member.field.id,\n      member.field.readOnly,\n      member.field.schemaType.placeholder,\n      member.field.value,\n    ]\n  )\n\n  const inputProps = useMemo((): Omit<PrimitiveInputProps, 'renderDefault'> => {\n    return {\n      value: member.field.value as any,\n      readOnly: member.field.readOnly,\n      schemaType: member.field.schemaType as any,\n      changed: member.field.changed,\n      id: member.field.id,\n      path: member.field.path,\n      focused: member.field.focused,\n      level: member.field.level,\n      onChange: handleChange,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      validationError,\n      elementProps,\n    }\n  }, [\n    member.field.value,\n    member.field.readOnly,\n    member.field.schemaType,\n    member.field.changed,\n    member.field.id,\n    member.field.path,\n    member.field.focused,\n    member.field.level,\n    member.field.validation,\n    member.field.presence,\n    handleChange,\n    validationError,\n    elementProps,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const fieldProps = useMemo((): Omit<PrimitiveFieldProps, 'renderDefault'> => {\n    return {\n      name: member.name,\n      index: member.index,\n      level: member.field.level,\n      value: member.field.value as any,\n      schemaType: member.field.schemaType as any,\n      title: member.field.schemaType.title,\n      description: member.field.schemaType.description,\n      inputId: member.field.id,\n      path: member.field.path,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      children: renderedInput,\n      changed: member.field.changed,\n      inputProps: inputProps as any,\n    }\n  }, [\n    member.name,\n    member.index,\n    member.field.level,\n    member.field.value,\n    member.field.schemaType,\n    member.field.id,\n    member.field.path,\n    member.field.validation,\n    member.field.presence,\n    member.field.changed,\n    renderedInput,\n    inputProps,\n  ])\n\n  return <>{renderField(fieldProps)}</>\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {Path} from '@sanity/types'\nimport {useDidUpdate} from '../../../hooks/useDidUpdate'\nimport {FieldMember, ObjectFormNode} from '../../../store'\nimport {\n  ArrayOfObjectsInputProps,\n  ObjectFieldProps,\n  ObjectInputProps,\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../../../types'\nimport {PatchArg, PatchEvent, setIfMissing} from '../../../patch'\nimport {FormCallbacksProvider, useFormCallbacks} from '../../../studio/contexts/FormCallbacks'\nimport {createProtoValue} from '../../../utils/createProtoValue'\n\n/**\n * Responsible for creating inputProps and fieldProps to pass to ´renderInput´ and ´renderField´ for an object input\n * Note: \"ObjectField\" in this context means an object field of an object type (not \"a field of an object\")\n * @param props - Component props\n */\nexport const ObjectField = function ObjectField(props: {\n  member: FieldMember<ObjectFormNode>\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}) {\n  const {\n    onPathBlur,\n    onPathFocus,\n    onChange,\n    onPathOpen,\n    onSetPathCollapsed,\n    onSetFieldSetCollapsed,\n    onFieldGroupSelect,\n  } = useFormCallbacks()\n\n  const {member, renderField, renderInput, renderItem, renderPreview} = props\n  const focusRef = useRef<{focus: () => void}>()\n\n  useDidUpdate(member.field.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const handleBlur = useCallback(() => {\n    onPathBlur(member.field.path)\n  }, [member.field.path, onPathBlur])\n\n  const handleFocus = useCallback(() => {\n    onPathFocus(member.field.path)\n  }, [member.field.path, onPathFocus])\n\n  const handleFocusChildPath = useCallback(\n    (path: Path) => {\n      onPathFocus(member.field.path.concat(path))\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const handleChange = useCallback(\n    (event: PatchEvent | PatchArg) => {\n      onChange(\n        PatchEvent.from(event)\n          .prepend(setIfMissing(createProtoValue(member.field.schemaType)))\n          .prefixAll(member.name)\n      )\n    },\n    [onChange, member.field.schemaType, member.name]\n  )\n\n  const handleCollapse = useCallback(() => {\n    onSetPathCollapsed(member.field.path, true)\n  }, [onSetPathCollapsed, member.field.path])\n\n  const handleExpand = useCallback(() => {\n    onSetPathCollapsed(member.field.path, false)\n  }, [onSetPathCollapsed, member.field.path])\n\n  const handleCollapseField = useCallback(\n    (fieldName: string) => {\n      onSetPathCollapsed(member.field.path.concat(fieldName), true)\n    },\n    [onSetPathCollapsed, member.field.path]\n  )\n  const handleExpandField = useCallback(\n    (fieldName: string) => {\n      onSetPathCollapsed(member.field.path.concat(fieldName), false)\n    },\n    [onSetPathCollapsed, member.field.path]\n  )\n  const handleOpenField = useCallback(\n    (fieldName: string) => {\n      onPathOpen(member.field.path.concat(fieldName))\n    },\n    [onPathOpen, member.field.path]\n  )\n  const handleCloseField = useCallback(() => {\n    onPathOpen(member.field.path)\n  }, [onPathOpen, member.field.path])\n  const handleExpandFieldSet = useCallback(\n    (fieldsetName: string) => {\n      onSetFieldSetCollapsed(member.field.path.concat(fieldsetName), false)\n    },\n    [onSetFieldSetCollapsed, member.field.path]\n  )\n  const handleCollapseFieldSet = useCallback(\n    (fieldsetName: string) => {\n      onSetFieldSetCollapsed(member.field.path.concat(fieldsetName), true)\n    },\n    [onSetFieldSetCollapsed, member.field.path]\n  )\n\n  const handleOpen = useCallback(() => {\n    onPathOpen(member.field.path)\n  }, [onPathOpen, member.field.path])\n\n  const handleClose = useCallback(() => {\n    onPathOpen(member.field.path.slice(0, -1))\n  }, [onPathOpen, member.field.path])\n\n  const handleSelectFieldGroup = useCallback(\n    (groupName: string) => {\n      onFieldGroupSelect(member.field.path, groupName)\n    },\n    [onFieldGroupSelect, member.field.path]\n  )\n\n  const elementProps = useMemo(\n    (): ArrayOfObjectsInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.field.id,\n      ref: focusRef,\n    }),\n    [handleBlur, handleFocus, member.field.id]\n  )\n\n  const inputProps = useMemo((): Omit<ObjectInputProps, 'renderDefault'> => {\n    return {\n      elementProps,\n      level: member.field.level,\n      members: member.field.members,\n      value: member.field.value,\n      readOnly: member.field.readOnly,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      schemaType: member.field.schemaType,\n      changed: member.field.changed,\n      id: member.field.id,\n      onFieldGroupSelect: handleSelectFieldGroup,\n      onFieldOpen: handleOpenField,\n      onFieldClose: handleCloseField,\n      onFieldCollapse: handleCollapseField,\n      onFieldExpand: handleExpandField,\n      onFieldSetExpand: handleExpandFieldSet,\n      onFieldSetCollapse: handleCollapseFieldSet,\n      onPathFocus: handleFocusChildPath,\n      path: member.field.path,\n      focusPath: member.field.focusPath,\n      focused: member.field.focused,\n      groups: member.field.groups,\n      onChange: handleChange,\n      renderField,\n      renderInput,\n      renderItem,\n      renderPreview,\n    }\n  }, [\n    elementProps,\n    member.field.level,\n    member.field.members,\n    member.field.value,\n    member.field.readOnly,\n    member.field.validation,\n    member.field.presence,\n    member.field.schemaType,\n    member.field.changed,\n    member.field.id,\n    member.field.path,\n    member.field.focusPath,\n    member.field.focused,\n    member.field.groups,\n    handleSelectFieldGroup,\n    handleOpenField,\n    handleCloseField,\n    handleCollapseField,\n    handleExpandField,\n    handleExpandFieldSet,\n    handleCollapseFieldSet,\n    handleFocusChildPath,\n    handleChange,\n    renderField,\n    renderInput,\n    renderItem,\n    renderPreview,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const fieldProps = useMemo((): Omit<ObjectFieldProps, 'renderDefault'> => {\n    return {\n      name: member.name,\n      index: member.index,\n      level: member.field.level,\n      value: member.field.value,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      title: member.field.schemaType.title,\n      description: member.field.schemaType.description,\n\n      collapsible: member.collapsible,\n      collapsed: member.collapsed,\n      onCollapse: handleCollapse,\n      onExpand: handleExpand,\n\n      open: member.open,\n      changed: member.field.changed,\n\n      onOpen: handleOpen,\n      onClose: handleClose,\n\n      schemaType: member.field.schemaType,\n      inputId: member.field.id,\n      path: member.field.path,\n      children: renderedInput,\n      inputProps: inputProps as ObjectInputProps,\n    }\n  }, [\n    member.name,\n    member.index,\n    member.field.changed,\n    member.field.level,\n    member.field.value,\n    member.field.validation,\n    member.field.presence,\n    member.field.schemaType,\n    member.field.id,\n    member.field.path,\n    member.collapsible,\n    member.collapsed,\n    member.open,\n    handleCollapse,\n    handleExpand,\n    handleOpen,\n    handleClose,\n    renderedInput,\n    inputProps,\n  ])\n\n  return (\n    <FormCallbacksProvider\n      onFieldGroupSelect={onFieldGroupSelect}\n      onChange={handleChange}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      onPathOpen={onPathOpen}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n    >\n      {useMemo(() => renderField(fieldProps), [fieldProps, renderField])}\n    </FormCallbacksProvider>\n  )\n}\n","import {Observable} from 'rxjs'\n\nexport function readAsText(file: File, encoding?: string) {\n  return new Observable<string | null>((observer) => {\n    const reader = new FileReader()\n    reader.onerror = (error) => observer.error(error)\n    reader.onload = () => {\n      observer.next(reader.result as string | null)\n      observer.complete()\n    }\n    reader.readAsText(file, encoding)\n    return () => {\n      reader.abort()\n    }\n  })\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {\n  ArraySchemaType,\n  BooleanSchemaType,\n  isBooleanSchemaType,\n  isNumberSchemaType,\n  isStringSchemaType,\n  NumberSchemaType,\n  SchemaType,\n  StringSchemaType,\n} from '@sanity/types'\nimport {filter, map, tap} from 'rxjs/operators'\nimport {Subscription} from 'rxjs'\nimport {FIXME} from '../../../../FIXME'\nimport {ArrayOfPrimitivesFormNode, FieldMember} from '../../../store'\nimport {\n  ArrayOfObjectsInputProps,\n  ArrayOfPrimitivesFieldProps,\n  ArrayOfPrimitivesInputProps,\n  ArrayInputMoveItemEvent,\n  RenderArrayOfPrimitivesItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n  UploadEvent,\n} from '../../../types'\nimport {FormCallbacksProvider, useFormCallbacks} from '../../../studio/contexts/FormCallbacks'\nimport {useDidUpdate} from '../../../hooks/useDidUpdate'\nimport {insert, PatchArg, PatchEvent, set, setIfMissing, unset} from '../../../patch'\nimport {PrimitiveValue} from '../../../inputs/arrays/ArrayOfPrimitivesInput/types'\nimport {Uploader, UploaderResolver, UploadProgressEvent} from '../../../studio'\nimport {useClient} from '../../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../studioClient'\nimport {readAsText} from '../../../studio/uploads/file/readAsText'\nimport {accepts} from '../../../studio/uploads/accepts'\n\nfunction move<T>(arr: T[], from: number, to: number): T[] {\n  const copy = arr.slice()\n  const val = copy[from]\n  copy.splice(from, 1)\n  copy.splice(to, 0, val)\n  return copy\n}\n\n/**\n * @example\n * Inserts \"hello\" at the beginning\n * ```ts\n * insertAfter(-1, [\"one\", \"two\"], \"hello\")\n * // => [\"hello\", \"one\", \"two\"]\n * ```\n */\nfunction insertAfter<T>(\n  /**\n   * index to insert item after. An index of -1 will prepend the item\n   */\n  index: number,\n  /**\n   * the array to insert the item into\n   */\n  arr: T[],\n  /**\n   * the item to insert\n   */\n  items: T[]\n): T[] {\n  const copy = arr.slice()\n  copy.splice(index + 1, 0, ...items)\n  return copy\n}\nfunction isStringNumeric(input: string) {\n  return /^\\d+$/.test(input)\n}\n\ntype PrimitiveSchemaType = NumberSchemaType | BooleanSchemaType | StringSchemaType\n\nfunction convertToSchemaType(line: string, candidates: SchemaType[]) {\n  let acceptsBooleans = false\n  let acceptsNumbers = false\n  let acceptsStrings = false\n  candidates.forEach((candidate) => {\n    if (isBooleanSchemaType(candidate)) {\n      acceptsBooleans = true\n    }\n    if (isStringSchemaType(candidate)) {\n      acceptsStrings = true\n    }\n    if (isNumberSchemaType(candidate)) {\n      acceptsNumbers = true\n    }\n  })\n\n  if (acceptsBooleans && (line === 'true' || line === 'false')) return line === 'true'\n  if (acceptsNumbers && isStringNumeric(line)) return Number(line)\n  return acceptsStrings ? line : undefined\n}\n\nfunction createPlainTextUploader(itemTypes: PrimitiveSchemaType[]): Uploader<PrimitiveSchemaType> {\n  return {\n    priority: 0,\n    accepts: 'text/*',\n    type: 'string',\n    upload(client, file) {\n      return readAsText(file, 'utf-8').pipe(\n        map((textContent) =>\n          textContent\n            ?.split(/[\\n\\r]/)\n            .map((value) => convertToSchemaType(value, itemTypes))\n            .filter((v) => v !== undefined)\n        ),\n        filter((v: unknown[] | undefined): v is unknown[] => Array.isArray(v)),\n        map((lines: unknown[]) => ({\n          type: 'uploadProgress',\n          patches: [insert(lines, 'after', [-1])],\n        }))\n      )\n    },\n  }\n}\n\n/**\n * Responsible for creating inputProps and fieldProps to pass to ´renderInput´ and ´renderField´ for an array input\n * Note: \"ArrayField\" in this context means an object field of an array type\n * @param props - Component props\n */\nexport function ArrayOfPrimitivesField(props: {\n  member: FieldMember<ArrayOfPrimitivesFormNode>\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderArrayOfPrimitivesItemCallback\n  renderPreview: RenderPreviewCallback\n}) {\n  const {\n    onPathBlur,\n    onPathFocus,\n    onChange,\n    onPathOpen,\n    onSetPathCollapsed,\n    onSetFieldSetCollapsed,\n    onFieldGroupSelect,\n  } = useFormCallbacks()\n  const {member, renderField, renderInput, renderItem, renderPreview} = props\n\n  const focusRef = useRef<Element & {focus: () => void}>()\n  const uploadSubscriptions = useRef<Subscription>()\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  useDidUpdate(member.field.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const handleFocus = useCallback(\n    (event: React.FocusEvent) => {\n      // We want to handle focus when the array input *itself* element receives\n      // focus, not when a child element receives focus, but React has decided\n      // to let focus bubble, so this workaround is needed\n      // Background: https://github.com/facebook/react/issues/6410#issuecomment-671915381\n      if (event.currentTarget === event.target && event.currentTarget === focusRef.current) {\n        onPathFocus(member.field.path)\n      }\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const handleBlur = useCallback(\n    (event: React.FocusEvent) => {\n      // We want to handle blur when the array input *itself* element receives\n      // blur, not when a child element receives blur, but React has decided\n      // to let focus events bubble, so this workaround is needed\n      // Background: https://github.com/facebook/react/issues/6410#issuecomment-671915381\n      if (event.currentTarget === event.target && event.currentTarget === focusRef.current) {\n        onPathBlur(member.field.path)\n      }\n    },\n    [member.field.path, onPathBlur]\n  )\n\n  const handleChange = useCallback(\n    (event: PatchEvent | PatchArg) => {\n      onChange(PatchEvent.from(event).prepend(setIfMissing([])).prefixAll(member.name))\n    },\n    [onChange, member.name]\n  )\n\n  const handleSetCollapsed = useCallback(\n    (collapsed: boolean) => {\n      onSetPathCollapsed(member.field.path, collapsed)\n    },\n    [onSetPathCollapsed, member.field.path]\n  )\n\n  const handleCollapse = useCallback(() => {\n    onSetPathCollapsed(member.field.path, true)\n  }, [onSetPathCollapsed, member.field.path])\n  const handleExpand = useCallback(() => {\n    onSetPathCollapsed(member.field.path, false)\n  }, [onSetPathCollapsed, member.field.path])\n\n  const setValue = useCallback(\n    (nextValue: PrimitiveValue[]) => {\n      handleChange(nextValue.length === 0 ? unset() : set(nextValue))\n    },\n    [handleChange]\n  )\n\n  const handleMoveItem = useCallback(\n    (event: ArrayInputMoveItemEvent) => {\n      const {value = []} = member.field\n      if (event.fromIndex === event.toIndex) {\n        return\n      }\n\n      setValue(move(value, event.fromIndex, event.toIndex))\n    },\n    [member.field, setValue]\n  )\n\n  const handleAppend = useCallback(\n    (itemValue: PrimitiveValue) => {\n      const {value = []} = member.field\n      setValue(value.concat(itemValue))\n    },\n    [member.field, setValue]\n  )\n\n  const handlePrepend = useCallback(\n    (itemValue: PrimitiveValue) => {\n      const {value = []} = member.field\n      setValue([itemValue].concat(value || []))\n    },\n    [member.field, setValue]\n  )\n\n  const handleInsert = useCallback(\n    (event: {items: PrimitiveValue[]; position: 'before' | 'after'; referenceIndex: number}) => {\n      const {value = []} = member.field\n\n      const insertIndex = event.referenceIndex + (event.position === 'before' ? -1 : 0)\n      setValue(insertAfter(insertIndex, value, event.items))\n    },\n    [member.field, setValue]\n  )\n\n  const handleRemoveItem = useCallback(\n    (index: number) => {\n      handleChange(unset([index]))\n    },\n    [handleChange]\n  )\n\n  const handleFocusIndex = useCallback(\n    (index: number) => {\n      onPathFocus(member.field.path.concat([index]))\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const elementProps = useMemo(\n    (): ArrayOfObjectsInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.field.id,\n      ref: focusRef,\n    }),\n    [handleBlur, handleFocus, member.field.id]\n  )\n\n  const plainTextUploader = useMemo(\n    () => createPlainTextUploader(member.field.schemaType.of as PrimitiveSchemaType[]),\n    [member.field.schemaType.of]\n  )\n\n  const resolveUploader: UploaderResolver<PrimitiveSchemaType> = useCallback(\n    (schemaType, file) => (accepts(file, 'text/*') ? plainTextUploader : null),\n    [plainTextUploader]\n  )\n\n  const handleUpload = useCallback(\n    ({file, schemaType, uploader}: UploadEvent) => {\n      const events$ = uploader.upload(client, file, schemaType).pipe(\n        map((uploadProgressEvent: UploadProgressEvent) =>\n          PatchEvent.from(uploadProgressEvent.patches || [])\n        ),\n        tap((event) => handleChange(event.patches))\n      )\n\n      if (uploadSubscriptions.current) {\n        uploadSubscriptions.current.unsubscribe()\n      }\n      uploadSubscriptions.current = events$.subscribe()\n    },\n    [client, handleChange]\n  )\n\n  const inputProps = useMemo((): Omit<ArrayOfPrimitivesInputProps, 'renderDefault'> => {\n    return {\n      level: member.field.level,\n      members: member.field.members,\n      value: member.field.value as any,\n      readOnly: member.field.readOnly,\n      onSetCollapsed: handleSetCollapsed,\n      schemaType: member.field.schemaType,\n      changed: member.field.changed,\n      id: member.field.id,\n      elementProps,\n      path: member.field.path,\n      focusPath: member.field.focusPath,\n      focused: member.field.focused,\n      onChange: handleChange,\n      onInsert: handleInsert,\n      onMoveItem: handleMoveItem,\n      onItemRemove: handleRemoveItem,\n      onItemAppend: handleAppend,\n      onItemPrepend: handlePrepend,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      resolveUploader,\n      onUpload: handleUpload,\n      renderInput,\n      renderItem,\n      onIndexFocus: handleFocusIndex,\n      renderPreview,\n    }\n  }, [\n    member.field.level,\n    member.field.members,\n    member.field.value,\n    member.field.readOnly,\n    member.field.schemaType,\n    member.field.changed,\n    member.field.id,\n    member.field.path,\n    member.field.focusPath,\n    member.field.focused,\n    member.field.validation,\n    member.field.presence,\n    handleSetCollapsed,\n    elementProps,\n    handleChange,\n    handleInsert,\n    handleMoveItem,\n    handleRemoveItem,\n    handleAppend,\n    handlePrepend,\n    resolveUploader,\n    handleUpload,\n    renderInput,\n    renderItem,\n    handleFocusIndex,\n    renderPreview,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const fieldProps: Omit<ArrayOfPrimitivesFieldProps, 'renderDefault'> = useMemo(() => {\n    return {\n      name: member.name,\n      index: member.index,\n      level: member.field.level,\n      value: member.field.value,\n      title: member.field.schemaType.title,\n      description: member.field.schemaType.description,\n      collapsible: member.collapsible,\n      collapsed: member.collapsed,\n      onExpand: handleExpand,\n      changed: member.field.changed,\n      onCollapse: handleCollapse,\n      schemaType: member.field.schemaType,\n      inputId: member.field.id,\n      path: member.field.path,\n      presence: member.field.presence,\n      validation: member.field.validation,\n      children: renderedInput,\n      inputProps: inputProps as ArrayOfPrimitivesInputProps,\n    }\n  }, [\n    member.name,\n    member.index,\n    member.field.level,\n    member.field.value,\n    member.field.schemaType,\n    member.field.id,\n    member.field.path,\n    member.field.presence,\n    member.field.validation,\n    member.collapsible,\n    member.collapsed,\n    member.field.changed,\n    handleExpand,\n    handleCollapse,\n    renderedInput,\n    inputProps,\n  ])\n\n  return (\n    <FormCallbacksProvider\n      onFieldGroupSelect={onFieldGroupSelect}\n      onChange={handleChange}\n      onPathOpen={onPathOpen}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n    >\n      {useMemo(() => renderField(fieldProps as FIXME), [fieldProps, renderField])}\n    </FormCallbacksProvider>\n  )\n}\n","import {isArraySchemaType, isObjectSchemaType, isPrimitiveSchemaType} from '@sanity/types'\nimport {\n  ArrayOfObjectsFormNode,\n  ArrayOfPrimitivesFormNode,\n  FieldMember,\n  ObjectFormNode,\n} from '../../../store'\n\nexport function isMemberObject(member: FieldMember): member is FieldMember<ObjectFormNode> {\n  return isObjectSchemaType(member.field.schemaType)\n}\n\nexport function isMemberArrayOfPrimitives(\n  member: FieldMember\n): member is FieldMember<ArrayOfPrimitivesFormNode> {\n  return (\n    isArraySchemaType(member.field.schemaType) &&\n    member.field.schemaType.of.every((ofType) => isPrimitiveSchemaType(ofType))\n  )\n}\n\nexport function isMemberArrayOfObjects(\n  member: FieldMember\n): member is FieldMember<ArrayOfObjectsFormNode> {\n  return (\n    isArraySchemaType(member.field.schemaType) &&\n    member.field.schemaType.of.every((ofType) => isObjectSchemaType(ofType))\n  )\n}\n","import React, {memo} from 'react'\nimport {FIXME} from '../../../FIXME'\nimport {FieldMember} from '../../store'\nimport {\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderArrayOfObjectsItemCallback,\n  RenderPreviewCallback,\n} from '../../types'\nimport {ArrayOfObjectsField} from './fields/ArrayOfObjectsField'\nimport {PrimitiveField} from './fields/PrimitiveField'\nimport {ObjectField} from './fields/ObjectField'\nimport {ArrayOfPrimitivesField} from './fields/ArrayOfPrimitivesField'\nimport {isMemberArrayOfObjects, isMemberArrayOfPrimitives, isMemberObject} from './fields/asserters'\n\n/** @internal */\nexport interface MemberFieldProps {\n  member: FieldMember\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}\n\n/** @internal */\nexport const MemberField = memo(function MemberField(props: MemberFieldProps) {\n  const {member, renderField, renderInput, renderItem, renderPreview} = props\n\n  if (isMemberObject(member)) {\n    // this field is of an object type\n    return (\n      <ObjectField\n        member={member}\n        renderField={renderField}\n        renderInput={renderInput}\n        renderItem={renderItem}\n        renderPreview={renderPreview}\n      />\n    )\n  }\n\n  if (isMemberArrayOfPrimitives(member)) {\n    return (\n      <ArrayOfPrimitivesField\n        member={member}\n        renderField={renderField}\n        renderInput={renderInput}\n        // todo: these have different signatures, so renderItem for a primitive input should not be the same as renderItem in array of object inputs\n        renderItem={renderItem as FIXME}\n        renderPreview={renderPreview}\n      />\n    )\n  }\n\n  if (isMemberArrayOfObjects(member)) {\n    return (\n      <ArrayOfObjectsField\n        member={member}\n        renderField={renderField}\n        renderInput={renderInput}\n        renderItem={renderItem}\n        renderPreview={renderPreview}\n      />\n    )\n  }\n\n  return <PrimitiveField member={member} renderField={renderField} renderInput={renderInput} />\n})\n","/** @internal */\n// eslint-disable-next-line no-process-env\nexport const isDev = process.env.NODE_ENV !== 'production'\n\n/** @internal */\nexport const isProd = !isDev\n","import isValidDate from 'date-fns/isValid'\n\nconst TRUTHY_STRINGS = ['yes', 'true', '1']\nconst FALSEY_STRINGS = ['false', 'no', 'false', '0', 'null']\nconst BOOL_STRINGS = TRUTHY_STRINGS.concat(FALSEY_STRINGS)\n\nconst TRUE = (): true => true\n\nconst has = (prop: string) => (val?: Record<string, any>) => val && val[prop]\nconst is = (typeName: string) => (val?: Record<string, any>) => (val && val._type) === typeName\n\nfunction toLocalDate(input: Date) {\n  const newDate = new Date(input.getTime() + input.getTimezoneOffset() * 60 * 1000)\n  const offset = input.getTimezoneOffset() / 60\n  const hours = input.getHours()\n  newDate.setHours(hours - offset)\n  return newDate\n}\n\nfunction getTZName() {\n  try {\n    return Intl.DateTimeFormat().resolvedOptions().timeZone\n  } catch (e) {} // eslint-disable-line no-empty\n  return null\n}\n\nexport interface ValueConverter {\n  test: NumberConstructor | ((value: any) => boolean)\n  convert:\n    | NumberConstructor\n    | StringConstructor\n    | ((value: any) => boolean | Record<string, any> | string)\n}\n\nexport const converters: {[fromType: string]: {[toType: string]: ValueConverter}} = {\n  string: {\n    number: {\n      test: Number,\n      convert: Number,\n    },\n    boolean: {\n      test: (value: any) => BOOL_STRINGS.includes(value.toLowerCase()),\n      convert: (value: any) =>\n        TRUTHY_STRINGS.includes(value.toLowerCase()) ||\n        !FALSEY_STRINGS.includes(value.toLowerCase()),\n    },\n    richDate: {\n      test: (value: any) => isValidDate(value),\n      convert: (value: any): Record<string, any> => {\n        return {\n          _type: 'richDate',\n          local: toLocalDate(new Date(value)).toJSON(),\n          utc: new Date(value).toJSON(),\n          timezone: getTZName(),\n          offset: new Date().getTimezoneOffset(),\n        }\n      },\n    },\n  },\n  date: {\n    richDate: {\n      test: is('date'),\n      convert: (value: any) => Object.assign({}, value, {_type: 'richDate'}),\n    },\n  },\n  richDate: {\n    datetime: {\n      test: has('utc'),\n      convert: (value: any) => value.utc,\n    },\n  },\n  number: {\n    string: {\n      test: TRUE,\n      convert: String,\n    },\n    boolean: {\n      test: TRUE,\n      convert: Number,\n    },\n  },\n  boolean: {\n    string: {\n      test: TRUE,\n      convert: (value: any) => (value ? 'Yes' : 'No'),\n    },\n    number: {\n      test: TRUE,\n      convert: Number,\n    },\n  },\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {Button, Card, Code, Grid, Stack, Text} from '@sanity/ui'\nimport {PatchEvent, setIfMissing, unset} from '../../patch'\nimport {Alert} from '../../components/Alert'\nimport {Details} from '../../components/Details'\nimport {useSchema} from '../../../hooks'\nimport {isDev} from '../../../environment'\n\ninterface UntypedValueInputProps {\n  validTypes: string[]\n  value: Record<string, unknown>\n  onChange: (event: PatchEvent, value?: Record<string, unknown>) => void\n}\n\nfunction SetMissingTypeButton({\n  value,\n  targetType,\n  onChange,\n}: {\n  value: Record<string, unknown>\n  targetType: string\n  onChange: UntypedValueInputProps['onChange']\n}) {\n  const itemValue = useMemo(() => ({...value, _type: targetType}), [targetType, value])\n\n  const handleClick = useCallback(\n    () => onChange(PatchEvent.from(setIfMissing(targetType, ['_type'])), itemValue),\n    [itemValue, onChange, targetType]\n  )\n\n  return (\n    <Button\n      onClick={handleClick}\n      text={\n        <>\n          Convert to <code>{targetType}</code>\n        </>\n      }\n    />\n  )\n}\n\nfunction UnsetItemButton({\n  value,\n  onChange,\n  validTypes,\n}: {\n  value: Record<string, unknown>\n  validTypes: string[]\n  onChange: UntypedValueInputProps['onChange']\n}) {\n  // Doesn't matter which `_type` we use as long as it's allowed by the array\n  const itemValue = useMemo(() => ({...value, _type: validTypes[0]}), [validTypes, value])\n\n  const handleClick = useCallback(\n    () => onChange(PatchEvent.from(unset()), itemValue),\n    [itemValue, onChange]\n  )\n\n  return <Button onClick={handleClick} tone=\"critical\" text=\"Unset value\" />\n}\n\n/**\n * When the value does not have an `_type` property,\n * but the schema has a named type\n */\nexport function UntypedValueInput({validTypes, value, onChange}: UntypedValueInputProps) {\n  const schema = useSchema()\n  const isSingleValidType = validTypes.length === 1\n  const isHoistedType = schema.has(validTypes[0])\n\n  return (\n    <Alert\n      status=\"warning\"\n      title={\n        <>\n          Property value missing <code>_type</code>\n        </>\n      }\n    >\n      <Details open={isDev} title={<>Developer info</>}>\n        <Stack space={3}>\n          <Text as=\"p\" muted size={1}>\n            Encountered an object value without a <code>_type</code> property.\n          </Text>\n\n          {isSingleValidType && !isHoistedType && (\n            <Text as=\"p\" muted size={1}>\n              Either remove the <code>name</code> property of the object declaration, or set{' '}\n              <code>_type</code> property on items.\n            </Text>\n          )}\n\n          {!isSingleValidType && (\n            <Text as=\"p\" muted size={1}>\n              The following types are valid here according to schema:\n            </Text>\n          )}\n\n          {!isSingleValidType && (\n            <Stack as=\"ul\" space={2}>\n              {validTypes.map((validType) => (\n                <Text as=\"li\" key={validType} muted size={1}>\n                  <code>{validType}</code>\n                </Text>\n              ))}\n            </Stack>\n          )}\n\n          <Stack space={2}>\n            <Text as=\"h4\" weight=\"semibold\" size={1}>\n              Current value (<code>object</code>):\n            </Text>\n\n            <Card border overflow=\"auto\" padding={2} radius={2} tone=\"inherit\">\n              <Code language=\"json\">{JSON.stringify(value, null, 2)}</Code>\n            </Card>\n          </Stack>\n\n          <Grid columns={[1, 2, 2]} gap={1}>\n            {isSingleValidType && (\n              <SetMissingTypeButton onChange={onChange} targetType={validTypes[0]} value={value} />\n            )}\n\n            <UnsetItemButton onChange={onChange} validTypes={validTypes} value={value} />\n          </Grid>\n        </Stack>\n      </Details>\n    </Alert>\n  )\n}\n","import {Button, Card, Code, Stack, Text} from '@sanity/ui'\nimport React, {forwardRef, useCallback, useImperativeHandle, useMemo} from 'react'\nimport {PatchEvent, set, unset} from '../../patch'\nimport {Alert} from '../../components/Alert'\nimport {Details} from '../../components/Details'\nimport {isDev} from '../../../environment'\nimport {converters as CONVERTERS, ValueConverter} from './converters'\nimport {UntypedValueInput} from './UntypedValueInput'\n\ninterface Converter extends ValueConverter {\n  from: string\n  to: string\n}\n\nfunction getConverters(value: unknown, actualType: string, validTypes: string[]): Converter[] {\n  if (!(actualType in CONVERTERS)) {\n    return []\n  }\n\n  return Object.keys(CONVERTERS[actualType])\n    .filter((targetType) => validTypes.includes(targetType))\n    .map((targetType) => ({\n      from: actualType,\n      to: targetType,\n      ...CONVERTERS[actualType][targetType],\n    }))\n    .filter((converter) => converter.test(value))\n}\n\ninterface InvalidValueProps {\n  actualType: string\n  validTypes: string[]\n  value?: unknown\n  onChange: (event: PatchEvent) => void\n}\n\nexport const InvalidValueInput = forwardRef(\n  (props: InvalidValueProps, ref: React.Ref<{focus: () => void}>) => {\n    const {value, actualType, validTypes, onChange} = props\n\n    useImperativeHandle(ref, () => ({\n      // @todo\n      focus: () => undefined,\n    }))\n\n    const handleClearClick = useCallback(() => {\n      onChange(PatchEvent.from(unset()))\n    }, [onChange])\n\n    const handleConvertTo = useCallback(\n      (converted: any) => {\n        onChange(PatchEvent.from(set(converted)))\n      },\n      [onChange]\n    )\n\n    const converters = useMemo(\n      () => getConverters(value, actualType, validTypes),\n      [value, actualType, validTypes]\n    )\n\n    if (typeof value === 'object' && value !== null && !('_type' in value)) {\n      return (\n        <UntypedValueInput\n          value={value as Record<string, unknown>}\n          validTypes={validTypes}\n          onChange={onChange}\n        />\n      )\n    }\n\n    const suffix = (\n      <Stack padding={2}>\n        <Button onClick={handleClearClick} tone=\"critical\" text=\"Reset value\" />\n      </Stack>\n    )\n\n    return (\n      <Alert status=\"error\" suffix={suffix} title={<>Invalid property value</>}>\n        <Text as=\"p\" muted size={1}>\n          The property value is stored as a value type that does not match the expected type.\n        </Text>\n\n        <Details marginTop={4} open={isDev} title={<>Developer info</>}>\n          <Stack space={3}>\n            {validTypes.length === 1 && (\n              <Text as=\"p\" muted size={1}>\n                The value of this property must be of type <code>{validTypes[0]}</code> according to\n                the schema.\n              </Text>\n            )}\n\n            {validTypes.length === 1 && (\n              <Text as=\"p\" muted size={1}>\n                Mismatching value types typically occur when the schema has recently been changed.\n              </Text>\n            )}\n\n            {validTypes.length !== 1 && (\n              <Text as=\"p\" muted size={1}>\n                Only the following types are valid here according to schema:\n              </Text>\n            )}\n\n            {validTypes.length !== 1 && (\n              <Stack as=\"ul\" space={2}>\n                {validTypes.map((validType) => (\n                  <Text as=\"li\" key={validType}>\n                    <code>{validType}</code>\n                  </Text>\n                ))}\n              </Stack>\n            )}\n\n            <Stack marginTop={2} space={2}>\n              <Text size={1} weight=\"semibold\">\n                The current value (<code>{actualType}</code>)\n              </Text>\n\n              <Card border padding={2} radius={2} tone=\"inherit\">\n                <Code language=\"json\" size={1}>\n                  {JSON.stringify(value, null, 2)}\n                </Code>\n              </Card>\n            </Stack>\n\n            {converters.length > 0 && (\n              <Stack space={1}>\n                {converters.map((converter) => (\n                  <ConvertButton\n                    converter={converter}\n                    key={`${converter.from}-${converter.to}`}\n                    onConvert={handleConvertTo}\n                    value={value}\n                  />\n                ))}\n              </Stack>\n            )}\n          </Stack>\n        </Details>\n      </Alert>\n    )\n  }\n)\n\nInvalidValueInput.displayName = 'InvalidValueInput'\n\nfunction ConvertButton({\n  converter,\n  onConvert,\n  value,\n}: {\n  converter: Converter\n  onConvert: (v: string | number | boolean | Record<string, unknown>) => void\n  value: unknown\n}) {\n  const handleClick = useCallback(\n    () => onConvert(converter.convert(value)),\n    [converter, onConvert, value]\n  )\n\n  return (\n    <Button\n      onClick={handleClick}\n      text={\n        <>\n          Convert to <code>{converter.to}</code>\n        </>\n      }\n    />\n  )\n}\n","import {Button, Stack, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {randomKey} from '@sanity/util/content'\nimport {MissingKeysError} from '../../../store/types/memberErrors'\nimport {Details} from '../../../components/Details'\nimport {Alert} from '../../../components/Alert'\nimport {PatchEvent, setIfMissing} from '../../../patch'\nimport {FormField} from '../../../components/formField'\nimport {isDev} from '../../../../environment'\n\ninterface Props {\n  error: MissingKeysError\n  onChange: (patchEvent: PatchEvent) => void\n}\n\nexport function MissingKeysAlert(props: Props) {\n  const {error, onChange} = props\n  const handleFixMissingKeys = useCallback(() => {\n    onChange(\n      PatchEvent.from((error.value || []).map((val, i) => setIfMissing(randomKey(), [i, '_key'])))\n    )\n  }, [error.value, onChange])\n\n  return (\n    <FormField title={error.schemaType.title} description={error.schemaType.description}>\n      <Alert\n        status=\"warning\"\n        suffix={\n          <Stack padding={2}>\n            <Button onClick={handleFixMissingKeys} text=\"Add missing keys\" tone=\"caution\" />\n          </Stack>\n        }\n        title={<>Missing keys</>}\n      >\n        <Text as=\"p\" muted size={1}>\n          Some items in the list are missing their keys. This must be fixed in order to edit the\n          list.\n        </Text>\n\n        <Details marginTop={4} open={isDev} title={<>Developer info</>}>\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              This usually happens when items are created using an API client, and the{' '}\n              <code>_key</code> property has not been included.\n            </Text>\n\n            <Text as=\"p\" muted size={1}>\n              The value of the <code>_key</code> property must be a unique string.\n            </Text>\n          </Stack>\n        </Details>\n        {/* TODO: render array items and highlight the items with missing key */}\n      </Alert>\n    </FormField>\n  )\n}\n","import {Button, Stack, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {FormField} from '../../../components/formField'\nimport {Alert} from '../../../components/Alert'\nimport {DuplicateKeysError} from '../../../store/types/memberErrors'\nimport {PatchEvent, set} from '../../../patch'\nimport {Details} from '../../../components/Details'\nimport {isDev} from '../../../../environment'\n\ninterface Props {\n  error: DuplicateKeysError\n  onChange: (patchEvent: PatchEvent) => void\n}\n\nexport function DuplicateKeysAlert(props: Props) {\n  const {error, onChange} = props\n\n  const handleFixDuplicateKeys = useCallback(() => {\n    onChange(\n      PatchEvent.from(\n        (error.duplicates || []).map(([index, key]) =>\n          set(`${key}_deduped_${index}`, [index, '_key'])\n        )\n      )\n    )\n  }, [error.duplicates, onChange])\n\n  return (\n    <FormField title={error.schemaType.title} description={error.schemaType.description}>\n      <Alert\n        status=\"warning\"\n        suffix={\n          <Stack padding={2}>\n            <Button onClick={handleFixDuplicateKeys} text=\"Generate unique keys\" tone=\"caution\" />\n          </Stack>\n        }\n        title={<>Non-unique keys</>}\n      >\n        <Text as=\"p\" muted size={1}>\n          Several items in this list share the same identifier (key). Every item must have an unique\n          identifier.\n        </Text>\n\n        <Details marginTop={4} open={isDev} title={<>Developer info</>}>\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              This usually happens when items are created using an API client, and the{' '}\n              <code>_key</code> property of each elements has been generated non-uniquely.\n            </Text>\n\n            <Text as=\"p\" muted size={1}>\n              The value of the <code>_key</code> property must be a unique string.\n            </Text>\n          </Stack>\n          {/* TODO: render array items and highlight the items with duplicate keys (sc-26255) */}\n        </Details>\n      </Alert>\n    </FormField>\n  )\n}\n","import {Button, Stack, Text} from '@sanity/ui'\nimport React from 'react'\nimport {isPlainObject} from 'lodash'\nimport {Alert} from '../../../components/Alert'\nimport {Details} from '../../../components/Details'\nimport {isDev} from '../../../../environment'\nimport {PatchEvent, unset} from '../../../patch'\nimport {FormField} from '../../../components/formField'\nimport {MixedArrayError} from '../../../store'\n\ninterface Props {\n  error: MixedArrayError\n  onChange: (patchEvent: PatchEvent) => void\n}\nexport function MixedArrayAlert(props: Props) {\n  const {error, onChange} = props\n\n  const handleRemoveNonObjectValues = () => {\n    const nonObjectIndices = (error.value || [])\n      .flatMap((item, index) => (isPlainObject(item) ? [] : [index]))\n      .reverse()\n\n    const patches = nonObjectIndices.map((index) => unset([index]))\n\n    onChange(PatchEvent.from(patches))\n  }\n\n  return (\n    <FormField title={error.schemaType.title} description={error.schemaType.description}>\n      <Alert\n        status=\"error\"\n        suffix={\n          <Stack padding={2}>\n            <Button\n              onClick={handleRemoveNonObjectValues}\n              text=\"Remove non-object values\"\n              tone=\"critical\"\n            />\n          </Stack>\n        }\n        title={<>Invalid list values</>}\n      >\n        <Text as=\"p\" muted size={1}>\n          Some items in this list are not objects. This must be fixed in order to edit the list.\n        </Text>\n\n        <Details marginTop={4} open={isDev} title={<>Developer info</>}>\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              This usually happens when items are created using an API client, or when a custom\n              input component has added invalid data to the list.\n            </Text>\n          </Stack>\n          {/* TODO: render array items and highlight the wrong items (sc-26255) */}\n        </Details>\n      </Alert>\n    </FormField>\n  )\n}\n","import React, {useCallback} from 'react'\nimport {Box} from '@sanity/ui'\nimport {FieldError} from '../../store/types/memberErrors'\nimport {useFormCallbacks} from '../../studio/contexts/FormCallbacks'\nimport {PatchEvent} from '../../patch'\nimport {InvalidValueInput} from '../../inputs/InvalidValueInput'\nimport {MissingKeysAlert} from './errors/MissingKeysAlert'\nimport {DuplicateKeysAlert} from './errors/DuplicateKeysAlert'\nimport {MixedArrayAlert} from './errors/MixedArrayAlert'\n\n/** @internal */\nexport function MemberFieldError(props: {member: FieldError}) {\n  const {member} = props\n  const {onChange} = useFormCallbacks()\n\n  const handleChange = useCallback(\n    (event: PatchEvent) => {\n      onChange(PatchEvent.from(event).prefixAll(member.fieldName))\n    },\n    [onChange, member.fieldName]\n  )\n  if (member.error.type === 'INCOMPATIBLE_TYPE') {\n    return (\n      <InvalidValueInput\n        value={member.error.value}\n        onChange={handleChange}\n        actualType={member.error.resolvedValueType}\n        validTypes={[member.error.expectedSchemaType.name]}\n      />\n    )\n  }\n  if (member.error.type === 'MISSING_KEYS') {\n    return <MissingKeysAlert error={member.error} onChange={handleChange} />\n  }\n  if (member.error.type === 'DUPLICATE_KEYS') {\n    return <DuplicateKeysAlert error={member.error} onChange={handleChange} />\n  }\n  if (member.error.type === 'MIXED_ARRAY') {\n    return <MixedArrayAlert onChange={handleChange} error={member.error} />\n  }\n  return <Box>Unexpected error: {props.member.error.type}</Box>\n}\n","import React, {memo, useCallback} from 'react'\nimport {capitalize} from 'lodash'\nimport {FieldSetMember} from '../../store'\nimport {\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../../types'\nimport {FormFieldSet} from '../../components/formField'\nimport {useFormCallbacks} from '../../studio/contexts/FormCallbacks'\nimport {MemberField} from './MemberField'\nimport {MemberFieldError} from './MemberFieldError'\n\n/** @internal */\nexport const MemberFieldSet = memo(function MemberFieldSet(props: {\n  member: FieldSetMember\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}) {\n  const {member, renderField, renderInput, renderItem, renderPreview} = props\n\n  const {onSetFieldSetCollapsed} = useFormCallbacks()\n\n  const handleCollapse = useCallback(() => {\n    onSetFieldSetCollapsed(member.fieldSet.path, true)\n  }, [member.fieldSet.path, onSetFieldSetCollapsed])\n\n  const handleExpand = useCallback(() => {\n    onSetFieldSetCollapsed(member.fieldSet.path, false)\n  }, [member.fieldSet.path, onSetFieldSetCollapsed])\n\n  return (\n    <FormFieldSet\n      title={member.fieldSet.title || capitalize(member.fieldSet.name)}\n      description={member.fieldSet.description}\n      level={member.fieldSet.level}\n      collapsible={member.fieldSet.collapsible}\n      collapsed={member.fieldSet.collapsed}\n      onCollapse={handleCollapse}\n      onExpand={handleExpand}\n      columns={member?.fieldSet?.columns}\n      data-testid={`fieldset-${member.fieldSet.name}`}\n    >\n      {member.fieldSet.members.map((fieldsetMember) => {\n        if (fieldsetMember.kind === 'error') {\n          return <MemberFieldError key={member.key} member={fieldsetMember} />\n        }\n        return (\n          <MemberField\n            member={fieldsetMember}\n            renderField={renderField}\n            renderInput={renderInput}\n            renderItem={renderItem}\n            renderPreview={renderPreview}\n            key={fieldsetMember.key}\n          />\n        )\n      })}\n    </FormFieldSet>\n  )\n})\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {Path} from '@sanity/types'\nimport {tap} from 'rxjs/operators'\nimport {useToast} from '@sanity/ui'\nimport {useDidUpdate} from '../../../hooks/useDidUpdate'\nimport {\n  ArrayInputInsertEvent,\n  ObjectInputProps,\n  ObjectItem,\n  ObjectItemProps,\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../../../types'\nimport {insert, PatchArg, PatchEvent, setIfMissing, unset} from '../../../patch'\nimport {ensureKey} from '../../../utils/ensureKey'\nimport {FormCallbacksProvider, useFormCallbacks} from '../../../studio/contexts/FormCallbacks'\nimport {ArrayOfObjectsItemMember} from '../../../store'\nimport {createProtoValue} from '../../../utils/createProtoValue'\nimport {isEmptyItem} from '../../../store/utils/isEmptyItem'\nimport {useResolveInitialValueForType} from '../../../../store'\nimport {resolveInitialArrayValues} from '../../common/resolveInitialArrayValues'\n\n/**\n * @beta\n */\nexport interface MemberItemProps {\n  member: ArrayOfObjectsItemMember\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderPreview: RenderPreviewCallback\n}\n\n/**\n * @beta\n */\nexport function ArrayOfObjectsItem(props: MemberItemProps) {\n  const focusRef = useRef<{focus: () => void}>()\n  const {member, renderItem, renderInput, renderField, renderPreview} = props\n\n  const {\n    onPathBlur,\n    onPathFocus,\n    onChange,\n    onPathOpen,\n    onSetPathCollapsed,\n    onSetFieldSetCollapsed,\n    onFieldGroupSelect,\n  } = useFormCallbacks()\n  const resolveInitialValue = useResolveInitialValueForType()\n\n  useDidUpdate(member.item.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const onRemove = useCallback(() => {\n    onChange(PatchEvent.from([unset([{_key: member.key}])]))\n  }, [member.key, onChange])\n\n  const handleOpenItem = useCallback(\n    (path: Path) => {\n      onPathOpen(path)\n      onSetPathCollapsed(path, false)\n    },\n    [onPathOpen, onSetPathCollapsed]\n  )\n  const toast = useToast()\n\n  // Note: this handles inserting *siblings*\n  const handleInsert = useCallback(\n    (event: Omit<ArrayInputInsertEvent<ObjectItem>, 'referenceItem'>) => {\n      if (event.items.length === 0) {\n        throw new Error('Insert event should include at least one item')\n      }\n      const itemsWithKeys = event.items.map((item) => ensureKey(item))\n\n      onChange(PatchEvent.from([insert(itemsWithKeys, event.position, [{_key: member.key}])]))\n\n      const focusItemKey = itemsWithKeys[0]._key\n      const parentPath = member.item.path.slice(0, -1)\n      const itemPath = [...parentPath, {_key: focusItemKey}]\n\n      // Set focus at the first item (todo: verify that this is the expected/better behavior when adding multiple items)\n      onPathFocus(itemPath)\n\n      const shouldOpen = event.open !== false\n      if (event.skipInitialValue) {\n        if (shouldOpen) {\n          handleOpenItem(itemPath)\n        }\n      } else {\n        resolveInitialArrayValues(itemsWithKeys, member.parentSchemaType, resolveInitialValue)\n          .pipe(\n            tap((result) => {\n              if (result.type === 'patch') {\n                onChange(PatchEvent.from(result.patches))\n              } else {\n                toast.push({\n                  title: `Could not resolve initial value`,\n                  description: `Unable to resolve initial value for type: ${result.schemaType.title}: ${result.error.message}.`,\n                  status: 'error',\n                })\n              }\n            })\n          )\n          .subscribe({\n            complete: () => {\n              if (shouldOpen) {\n                handleOpenItem(itemPath)\n              }\n            },\n          })\n      }\n    },\n    [\n      handleOpenItem,\n      member.item.path,\n      member.key,\n      member.parentSchemaType,\n      onChange,\n      onPathFocus,\n      resolveInitialValue,\n      toast,\n    ]\n  )\n\n  const handleBlur = useCallback(() => {\n    onPathBlur(member.item.path)\n  }, [member.item.path, onPathBlur])\n\n  const handleFocus = useCallback(() => {\n    onPathFocus(member.item.path)\n  }, [member.item.path, onPathFocus])\n\n  const handleFocusChildPath = useCallback(\n    (path: Path) => {\n      onPathFocus(member.item.path.concat(path))\n    },\n    [member.item.path, onPathFocus]\n  )\n\n  const handleChange = useCallback(\n    (event: PatchEvent | PatchArg) => {\n      onChange(\n        PatchEvent.from(event)\n          .prepend(setIfMissing(createProtoValue(member.item.schemaType)))\n          .prefixAll({_key: member.key})\n      )\n    },\n    [onChange, member.item.schemaType, member.key]\n  )\n  const handleCollapse = useCallback(() => {\n    onSetPathCollapsed(member.item.path, true)\n  }, [onSetPathCollapsed, member.item.path])\n\n  const handleExpand = useCallback(() => {\n    onSetPathCollapsed(member.item.path, false)\n  }, [onSetPathCollapsed, member.item.path])\n\n  const handleCollapseField = useCallback(\n    (fieldName: string) => {\n      onSetPathCollapsed(member.item.path.concat(fieldName), true)\n    },\n    [onSetPathCollapsed, member.item.path]\n  )\n  const handleExpandField = useCallback(\n    (fieldName: string) => {\n      onSetPathCollapsed(member.item.path.concat(fieldName), false)\n    },\n    [onSetPathCollapsed, member.item.path]\n  )\n  const handleCloseField = useCallback(() => {\n    onPathOpen(member.item.path)\n  }, [onPathOpen, member.item.path])\n  const handleOpenField = useCallback(\n    (fieldName: string) => {\n      onPathOpen(member.item.path.concat(fieldName))\n    },\n    [onPathOpen, member.item.path]\n  )\n  const handleExpandFieldSet = useCallback(\n    (fieldsetName: string) => {\n      onSetFieldSetCollapsed(member.item.path.concat(fieldsetName), false)\n    },\n    [onSetFieldSetCollapsed, member.item.path]\n  )\n  const handleCollapseFieldSet = useCallback(\n    (fieldsetName: string) => {\n      onSetFieldSetCollapsed(member.item.path.concat(fieldsetName), true)\n    },\n    [onSetFieldSetCollapsed, member.item.path]\n  )\n\n  const handleOpen = useCallback(() => {\n    onPathOpen(member.item.path)\n  }, [onPathOpen, member.item.path])\n\n  const isEmptyValue = !member.item.value || isEmptyItem(member.item.value)\n  const handleClose = useCallback(() => {\n    if (isEmptyValue) {\n      onRemove()\n    }\n    onPathOpen(member.item.path.slice(0, -1))\n    onPathFocus(member.item.path)\n  }, [isEmptyValue, onPathOpen, member.item.path, onPathFocus, onRemove])\n\n  const handleSelectFieldGroup = useCallback(\n    (groupName: string) => {\n      onFieldGroupSelect(member.item.path, groupName)\n    },\n    [onFieldGroupSelect, member.item.path]\n  )\n\n  const elementProps = useMemo(\n    (): ObjectInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.item.id,\n      ref: focusRef,\n    }),\n    [handleBlur, handleFocus, member.item.id]\n  )\n\n  const inputProps = useMemo((): Omit<ObjectInputProps, 'renderDefault'> => {\n    return {\n      changed: member.item.changed,\n      focusPath: member.item.focusPath,\n      focused: member.item.focused,\n      groups: member.item.groups,\n      id: member.item.id,\n      level: member.item.level,\n      members: member.item.members,\n      onChange: handleChange,\n      onFieldClose: handleCloseField,\n      onFieldCollapse: handleCollapseField,\n      onFieldSetCollapse: handleCollapseFieldSet,\n      onFieldExpand: handleExpandField,\n      onFieldSetExpand: handleExpandFieldSet,\n      onFieldGroupSelect: handleSelectFieldGroup,\n      onPathFocus: handleFocusChildPath,\n      onFieldOpen: handleOpenField,\n      path: member.item.path,\n      presence: member.item.presence,\n      readOnly: member.item.readOnly,\n      renderField,\n      renderInput,\n      renderItem,\n      renderPreview,\n      schemaType: member.item.schemaType,\n      validation: member.item.validation,\n      value: member.item.value,\n      elementProps: elementProps,\n    }\n  }, [\n    elementProps,\n    handleChange,\n    handleCloseField,\n    handleCollapseField,\n    handleCollapseFieldSet,\n    handleExpandField,\n    handleExpandFieldSet,\n    handleFocusChildPath,\n    handleOpenField,\n    handleSelectFieldGroup,\n    member.item.changed,\n    member.item.focusPath,\n    member.item.focused,\n    member.item.groups,\n    member.item.id,\n    member.item.level,\n    member.item.members,\n    member.item.path,\n    member.item.presence,\n    member.item.readOnly,\n    member.item.schemaType,\n    member.item.validation,\n    member.item.value,\n    renderField,\n    renderInput,\n    renderItem,\n    renderPreview,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const itemProps = useMemo((): Omit<ObjectItemProps, 'renderDefault'> => {\n    return {\n      key: member.key,\n      index: member.index,\n      level: member.item.level,\n      value: member.item.value,\n      title: member.item.schemaType.title,\n      description: member.item.schemaType.description,\n      collapsible: member.collapsible,\n      collapsed: member.collapsed,\n      schemaType: member.item.schemaType,\n      parentSchemaType: member.parentSchemaType,\n      onInsert: handleInsert,\n      onRemove,\n      presence: member.item.presence,\n      validation: member.item.validation,\n      open: member.open,\n      onOpen: handleOpen,\n      onClose: handleClose,\n      onExpand: handleExpand,\n      onCollapse: handleCollapse,\n      readOnly: member.item.readOnly,\n      focused: member.item.focused,\n      onFocus: handleFocus,\n      onBlur: handleBlur,\n      inputId: member.item.id,\n      path: member.item.path,\n      children: renderedInput,\n      changed: member.item.changed,\n      inputProps,\n    }\n  }, [\n    member.key,\n    member.index,\n    member.item.level,\n    member.item.value,\n    member.item.schemaType,\n    member.parentSchemaType,\n    member.item.presence,\n    member.item.validation,\n    member.item.readOnly,\n    member.item.focused,\n    member.item.id,\n    member.item.path,\n    member.item.changed,\n    member.collapsible,\n    member.collapsed,\n    member.open,\n    handleInsert,\n    onRemove,\n    handleOpen,\n    handleClose,\n    handleExpand,\n    handleCollapse,\n    handleFocus,\n    handleBlur,\n    renderedInput,\n    inputProps,\n  ])\n\n  return (\n    <FormCallbacksProvider\n      onFieldGroupSelect={onFieldGroupSelect}\n      onChange={handleChange}\n      onPathOpen={onPathOpen}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n    >\n      {useMemo(() => renderItem(itemProps), [itemProps, renderItem])}\n    </FormCallbacksProvider>\n  )\n}\n","import {SchemaType} from '@sanity/types'\n\nexport function getEmptyValue(type: SchemaType): number | string | boolean {\n  switch (type.jsonType) {\n    case 'string': {\n      return ''\n    }\n    case 'number': {\n      return -0\n    }\n    case 'boolean': {\n      return false\n    }\n    default:\n      throw new Error(`Unable to create value from type \"${type.jsonType}\"`)\n  }\n}\n","import {isBooleanSchemaType, isNumberSchemaType} from '@sanity/types'\nimport React, {useCallback, useMemo, useRef} from 'react'\nimport {FIXME} from '../../../../FIXME'\nimport {ArrayOfPrimitivesItemMember} from '../../../store'\nimport {useDidUpdate} from '../../../hooks/useDidUpdate'\nimport {getEmptyValue} from '../../../inputs/arrays/ArrayOfPrimitivesInput/getEmptyValue'\nimport {\n  PrimitiveInputProps,\n  PrimitiveItemProps,\n  RenderArrayOfPrimitivesItemCallback,\n  RenderInputCallback,\n} from '../../../types'\nimport {insert, PatchArg, PatchEvent, set, unset} from '../../../patch'\nimport {useFormCallbacks} from '../../../studio/contexts/FormCallbacks'\n\n/**\n * @beta\n */\nexport interface PrimitiveMemberItemProps {\n  member: ArrayOfPrimitivesItemMember\n  renderItem: RenderArrayOfPrimitivesItemCallback\n  renderInput: RenderInputCallback\n}\n\n/**\n * @beta\n */\nexport function ArrayOfPrimitivesItem(props: PrimitiveMemberItemProps) {\n  const focusRef = useRef<{focus: () => void}>()\n  const {member, renderItem, renderInput} = props\n\n  const {onPathBlur, onPathFocus, onChange} = useFormCallbacks()\n\n  useDidUpdate(member.item.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const handleBlur = useCallback(\n    (event: React.FocusEvent) => {\n      onPathBlur(member.item.path)\n    },\n    [member.item.path, onPathBlur]\n  )\n\n  const handleFocus = useCallback(\n    (event: React.FocusEvent) => {\n      onPathFocus(member.item.path)\n    },\n    [member.item.path, onPathFocus]\n  )\n\n  const handleChange = useCallback(\n    (event: PatchEvent | PatchArg) => {\n      onChange(PatchEvent.from(event).prefixAll(member.index))\n    },\n    [onChange, member.index]\n  )\n  const handleNativeChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      let inputValue: number | string | boolean = event.currentTarget.value\n      if (isNumberSchemaType(member.item.schemaType)) {\n        inputValue = event.currentTarget.valueAsNumber\n        if (inputValue > Number.MAX_SAFE_INTEGER || inputValue < Number.MIN_SAFE_INTEGER) {\n          return\n        }\n      } else if (isBooleanSchemaType(member.item.schemaType)) {\n        inputValue = event.currentTarget.checked\n      }\n\n      // `valueAsNumber` returns `NaN` on empty input\n      const hasEmptyValue =\n        inputValue === '' || (typeof inputValue === 'number' && isNaN(inputValue))\n\n      handleChange(\n        set(\n          hasEmptyValue\n            ? // Map direct unset patches to empty value instead in order to not *remove* elements as the user clears out the value\n              // note: this creates the rather curious case where the input renders ´0´ when you try to clear it.\n              getEmptyValue(member.item.schemaType)\n            : inputValue\n        )\n      )\n    },\n    [handleChange, member.item.schemaType]\n  )\n\n  const elementProps = useMemo(\n    (): PrimitiveInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.item.id,\n      ref: focusRef,\n      onChange: handleNativeChange,\n      // this is a trick to retain type information while displaying an \"empty\" input\n      // if this input is used to edit items in an array of numbers, the value can't really be set to empty without\n      // either removing the item or losing type information (i.e. it can't be an empty string, because that's… a string)\n      // so the array of numbers then use the special value `-0` to represent an empty value\n      value: String(Object.is(member.item.value, -0) ? '' : member.item.value),\n      readOnly: Boolean(member.item.readOnly),\n      placeholder: member.item.schemaType.placeholder,\n    }),\n    [\n      handleBlur,\n      handleFocus,\n      handleNativeChange,\n      member.item.id,\n      member.item.readOnly,\n      member.item.schemaType.placeholder,\n      member.item.value,\n    ]\n  )\n  const inputProps = useMemo((): Omit<PrimitiveInputProps, 'renderDefault'> => {\n    return {\n      changed: member.item.changed,\n      level: member.item.level,\n      value: member.item.value as FIXME,\n      readOnly: member.item.readOnly,\n      schemaType: member.item.schemaType as FIXME,\n      id: member.item.id,\n      path: member.item.path,\n      focused: member.item.focused,\n      onChange: handleChange,\n      validation: member.item.validation,\n      presence: member.item.presence,\n      elementProps,\n    }\n  }, [\n    member.item.changed,\n    member.item.level,\n    member.item.value,\n    member.item.readOnly,\n    member.item.schemaType,\n    member.item.id,\n    member.item.path,\n    member.item.focused,\n    member.item.validation,\n    member.item.presence,\n    handleChange,\n    elementProps,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const onRemove = useCallback(() => {\n    onChange(PatchEvent.from([unset([member.index])]))\n  }, [member.index, onChange])\n\n  const onInsert = useCallback(\n    (event: {items: unknown[]; position: 'before' | 'after'}) => {\n      onChange(PatchEvent.from([insert(event.items, event.position, [member.index])]))\n    },\n    [member.index, onChange]\n  )\n\n  const itemProps = useMemo((): Omit<PrimitiveItemProps, 'renderDefault'> => {\n    return {\n      key: member.key,\n      index: member.index,\n      level: member.item.level,\n      value: member.item.value as FIXME,\n      title: member.item.schemaType.title,\n      description: member.item.schemaType.description,\n      schemaType: member.item.schemaType as FIXME,\n      parentSchemaType: member.parentSchemaType,\n      onInsert,\n      onRemove,\n      presence: member.item.presence,\n      validation: member.item.validation,\n      readOnly: member.item.readOnly,\n      focused: member.item.focused,\n      onFocus: handleFocus,\n      onBlur: handleBlur,\n      inputId: member.item.id,\n      path: member.item.path,\n      children: renderedInput,\n    }\n  }, [\n    member.key,\n    member.index,\n    member.item.level,\n    member.item.value,\n    member.item.schemaType,\n    member.item.presence,\n    member.item.validation,\n    member.item.readOnly,\n    member.item.focused,\n    member.item.id,\n    member.item.path,\n    member.parentSchemaType,\n    onInsert,\n    onRemove,\n    handleFocus,\n    handleBlur,\n    renderedInput,\n  ])\n\n  return <>{useMemo(() => renderItem(itemProps as PrimitiveItemProps), [itemProps, renderItem])}</>\n}\n","import {Box, Card, Code, Flex, Popover, Stack, Text, Theme, useClickOutside} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {BulbOutlineIcon, UnknownIcon} from '@sanity/icons'\nimport {resolveTypeName} from '@sanity/util/content'\nimport styled from 'styled-components'\n\nconst PopoverCard = styled(Card)`\n  max-width: ${({theme}: {theme: Theme}) => theme.sanity.container[1]}px;\n`\n\ninterface Props {\n  value: unknown\n  onFocus?: (event: React.FocusEvent) => void\n  vertical?: boolean\n}\n\nexport function IncompatibleItemType(props: Props) {\n  const {value, onFocus, vertical, ...rest} = props\n  const [showDetails, setShowDetails] = React.useState(false)\n  const [popoverRef, setPopoverRef] = React.useState<HTMLElement | null>(null)\n\n  useClickOutside(() => setShowDetails(false), [popoverRef])\n\n  const handleKeyDown = React.useCallback((e: any) => {\n    if (e.key === 'Escape' || e.key === 'Tab') {\n      setShowDetails(false)\n    }\n  }, [])\n\n  const handleShowDetails = useCallback(() => {\n    setShowDetails((v) => !v)\n  }, [])\n\n  const typeName = resolveTypeName(value)\n  return (\n    <Popover\n      open={showDetails}\n      ref={setPopoverRef}\n      onKeyDown={handleKeyDown}\n      portal\n      constrainSize\n      tone=\"default\"\n      content={\n        <PopoverCard margin={1} padding={3} onKeyDown={handleKeyDown} tabIndex={0} overflow=\"auto\">\n          <Stack space={4}>\n            <Text weight=\"semibold\">\n              Item of type <code>{typeName}</code> not valid for this list\n            </Text>\n            <Text size={1} weight=\"semibold\">\n              Why is this happening?\n            </Text>\n            <Text size={1}>\n              The current schema does not declare items of type <code>{typeName}</code> as valid for\n              this list. This could mean that the type has been removed as a valid item type, or\n              that someone else has added it to their own local schema that is not yet deployed.\n            </Text>\n            <Box>\n              <Text size={1}>\n                <BulbOutlineIcon /> You can still move or delete this item, but it cannot be edited\n                since the schema definition for its type is nowhere to be found.\n              </Text>\n            </Box>\n            <Stack space={2}>\n              <Text size={1} weight=\"semibold\">\n                JSON representation of this item:\n              </Text>\n              <Card padding={2} overflow=\"auto\" border>\n                <Code size={1} as=\"pre\" language=\"json\">\n                  {JSON.stringify(value, null, 2)}\n                </Code>\n              </Card>\n            </Stack>\n          </Stack>\n        </PopoverCard>\n      }\n    >\n      <Card\n        as=\"button\"\n        type=\"button\"\n        radius={2}\n        tone=\"inherit\"\n        paddingX={2}\n        paddingY={3}\n        flex={1}\n        onFocus={onFocus}\n        onClick={handleShowDetails}\n        onKeyDown={handleKeyDown}\n        __unstable_focusRing\n        {...rest}\n      >\n        <Flex align=\"center\">\n          <Box marginRight={3}>\n            <Text>\n              <UnknownIcon />\n            </Text>\n          </Box>\n\n          <Box flex={1}>\n            <Text size={1} textOverflow=\"ellipsis\">\n              Item of type <code>{typeName}</code> not valid for this list\n            </Text>\n          </Box>\n        </Flex>\n      </Card>\n    </Popover>\n  )\n}\n","import React from 'react'\n\nimport {ArrayItemError} from '../../store/types/memberErrors'\nimport {IncompatibleItemType} from './IncompatibleItemType'\n\n/** @internal */\nexport function MemberItemError(props: {member: ArrayItemError}) {\n  const {member} = props\n\n  if (member.error.type === 'INVALID_ITEM_TYPE') {\n    return <IncompatibleItemType value={member.error.value} />\n  }\n  return <div>Unexpected Error: {member.error.type}</div>\n}\n","import React from 'react'\nimport {ArrayOfObjectsMember} from '../../store'\nimport {\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../../types'\n\nimport {ArrayOfObjectsItem} from './items/ArrayOfObjectsItem'\nimport {MemberItemError} from './MemberItemError'\n\n/** @internal */\nexport interface ArrayOfObjectsMemberProps {\n  member: ArrayOfObjectsMember\n  renderInput: RenderInputCallback\n  renderField: RenderFieldCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}\n\n/**\n * Convenience component for rendering an \"array of objects\"-item\n * @internal\n */\nexport function ArrayOfObjectsInputMember(props: ArrayOfObjectsMemberProps) {\n  const {member, renderInput, renderField, renderItem, renderPreview} = props\n  if (member.kind === 'item') {\n    return (\n      <ArrayOfObjectsItem\n        key={member.key}\n        member={member}\n        renderInput={renderInput}\n        renderField={renderField}\n        renderItem={renderItem}\n        renderPreview={renderPreview}\n      />\n    )\n  }\n  if (member.kind === 'error') {\n    return <MemberItemError key={member.key} member={member} />\n  }\n\n  //@ts-expect-error The branching above should cover all possible cases\n  console.warn(new Error(`Unhandled member kind ${member.kind}`))\n  return null\n}\n","import React from 'react'\nimport {ArrayOfObjectsMember} from '../../store'\nimport {\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../../types'\n\nimport {ArrayOfObjectsInputMember} from './ArrayOfObjectsInputMember'\n\n/** @internal */\nexport interface ArrayOfObjectsInputMembersProps {\n  members: ArrayOfObjectsMember[]\n  renderInput: RenderInputCallback\n  renderField: RenderFieldCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}\n\n/**\n * Convenience component for wrapping an array of objects\n * @internal\n */\nexport function ArrayOfObjectsInputMembers(props: ArrayOfObjectsInputMembersProps) {\n  const {members, ...rest} = props\n  return (\n    <>\n      {members.map((member) => (\n        <ArrayOfObjectsInputMember key={member.key} member={member} {...rest} />\n      ))}\n    </>\n  )\n}\n","import React from 'react'\nimport {ObjectMember} from '../../store'\nimport {\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../../types'\n\nimport {MemberField} from './MemberField'\nimport {MemberFieldError} from './MemberFieldError'\nimport {MemberFieldSet} from './MemberFieldset'\n\n/** @internal */\nexport interface ObjectInputMemberProps {\n  member: ObjectMember\n  renderInput: RenderInputCallback\n  renderField: RenderFieldCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}\n\n/** @internal */\nexport function ObjectInputMember(props: ObjectInputMemberProps) {\n  const {member, renderInput, renderField, renderItem, renderPreview} = props\n\n  if (member.kind === 'field') {\n    return (\n      <MemberField\n        key={member.key}\n        member={member}\n        renderInput={renderInput}\n        renderField={renderField}\n        renderItem={renderItem}\n        renderPreview={renderPreview}\n      />\n    )\n  }\n  if (member.kind === 'error') {\n    return <MemberFieldError key={member.key} member={member} />\n  }\n  if (member.kind === 'fieldSet') {\n    return (\n      <MemberFieldSet\n        key={member.key}\n        member={member}\n        renderInput={renderInput}\n        renderField={renderField}\n        renderItem={renderItem}\n        renderPreview={renderPreview}\n      />\n    )\n  }\n  //@ts-expect-error The branching above should cover all possible cases\n  console.warn(new Error(`Unhandled member kind ${member.kind}`))\n  return null\n}\n","import React from 'react'\nimport {ObjectMember} from '../../store'\nimport {\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../../types'\n\nimport {ObjectInputMember} from './ObjectInputMember'\n\n/** @internal */\nexport interface ObjectMembersProps {\n  members: ObjectMember[]\n  renderInput: RenderInputCallback\n  renderField: RenderFieldCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}\n\n/**\n * Convenience component for wrapping an object input\n * @internal\n */\nexport function ObjectInputMembers(props: ObjectMembersProps) {\n  const {members, ...rest} = props\n  return (\n    <>\n      {members.map((member) => (\n        <ObjectInputMember key={member.key} member={member} {...rest} />\n      ))}\n    </>\n  )\n}\n\n/**\n * @deprecated Use ObjectInputMembers instead\n * @internal\n */\nexport const ObjectMembers = ObjectInputMembers\n","import React, {memo, useCallback, useMemo} from 'react'\nimport {isEqual, startsWith, trimLeft} from '@sanity/util/paths'\nimport {isKeySegment, Path} from '@sanity/types'\nimport {FieldMember} from '../store'\nimport {\n  ArrayOfObjectsInputProps,\n  ObjectInputProps,\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../types'\nimport {isArrayInputProps, isObjectInputProps} from '../utils/asserters'\nimport {MemberField, ArrayOfObjectsItem, MemberItemError} from '../members'\n\nconst pass = ({children}: {children: React.ReactNode}) => children\n\n/** @internal */\nexport type FormInputAbsolutePathArg = {absolutePath: Path}\n\n/** @internal */\nexport type FormInputRelativePathArg = {relativePath: Path}\n\nfunction hasAbsolutePath(\n  a: FormInputAbsolutePathArg | FormInputRelativePathArg\n): a is FormInputAbsolutePathArg {\n  return 'absolutePath' in a\n}\n\n/** @internal */\nexport const FormInput = memo(function FormInput(\n  props: (ArrayOfObjectsInputProps | ObjectInputProps) &\n    (FormInputRelativePathArg | FormInputAbsolutePathArg) & {\n      /**\n       * Whether to include the field around the input. Defaults to false\n       */\n      includeField?: boolean\n    }\n) {\n  const absolutePath = useMemo(() => {\n    return hasAbsolutePath(props) ? props.absolutePath : props.path.concat(props.relativePath)\n  }, [props])\n\n  return (\n    <FormInputInner\n      {...props}\n      absolutePath={absolutePath}\n      destinationRenderField={props.renderField}\n      destinationRenderInput={props.renderInput}\n      destinationRenderItem={props.renderItem}\n      destinationRenderPreview={props.renderPreview}\n    />\n  )\n})\n\n/**\n * An input that takes input props for object or array and renders an input for a given sub-path\n */\nconst FormInputInner = memo(function FormInputInner(\n  props: (ArrayOfObjectsInputProps | ObjectInputProps) & {\n    absolutePath: Path\n    includeField?: boolean\n    includeItem?: boolean\n    destinationRenderInput: RenderInputCallback\n    destinationRenderField: RenderFieldCallback\n    destinationRenderItem: RenderArrayOfObjectsItemCallback\n    destinationRenderPreview: RenderPreviewCallback\n  }\n) {\n  const {\n    absolutePath,\n    destinationRenderInput,\n    destinationRenderItem,\n    destinationRenderField,\n    destinationRenderPreview,\n  } = props\n\n  const renderInput: RenderInputCallback = useCallback(\n    (inputProps) => {\n      const isDestinationReached =\n        isEqual(inputProps.path, absolutePath) || startsWith(absolutePath, inputProps.path)\n      if (isDestinationReached) {\n        // we have reached the destination node and can now render with the passed renderInput\n        return destinationRenderInput(inputProps)\n      }\n      if (!isObjectInputProps(inputProps) && !isArrayInputProps(inputProps)) {\n        throw new Error(\n          `Expected either object input props or array input props for: ${JSON.stringify(\n            inputProps.path\n          )}`\n        )\n      }\n      // we have not yet reached the destination path, so we'll continue recurse until we get there\n      return (\n        <FormInputInner\n          {...inputProps}\n          absolutePath={absolutePath}\n          destinationRenderInput={destinationRenderInput}\n          destinationRenderItem={destinationRenderItem}\n          destinationRenderField={destinationRenderField}\n          destinationRenderPreview={destinationRenderPreview}\n        />\n      )\n    },\n    [\n      absolutePath,\n      destinationRenderField,\n      destinationRenderInput,\n      destinationRenderItem,\n      destinationRenderPreview,\n    ]\n  )\n\n  const renderField: RenderFieldCallback = useCallback(\n    (fieldProps) => {\n      // we want to render the field around the input if either of these are true:\n      // 1. we have reached the destination path and the `includeField`-prop is passed as true\n      // 2. we are currently at a node somewhere below/inside the destination path\n      const shouldRenderField =\n        startsWith(absolutePath, fieldProps.path) &&\n        (props.includeField || !isEqual(absolutePath, fieldProps.path))\n      return shouldRenderField ? destinationRenderField(fieldProps) : pass(fieldProps)\n    },\n    [absolutePath, destinationRenderField, props.includeField]\n  )\n\n  const renderItem: RenderArrayOfObjectsItemCallback = useCallback(\n    (itemProps) => {\n      // we want to render the item around the input if either of these are true:\n      // 1. we have reached the destination path and the `includeItem`-prop is passed as true\n      // 2. we are currently at a node somewhere below/inside the destination path\n      const shouldRenderField =\n        startsWith(absolutePath, itemProps.path) &&\n        (props.includeItem || !isEqual(absolutePath, itemProps.path))\n      return shouldRenderField ? destinationRenderItem(itemProps) : pass(itemProps)\n    },\n    [absolutePath, destinationRenderItem, props.includeItem]\n  )\n\n  if (isArrayInputProps(props)) {\n    const childPath = trimLeft(props.path, absolutePath)\n\n    const itemMember = props.members.find(\n      (member) =>\n        member.kind == 'item' && isKeySegment(childPath[0]) && member.key === childPath[0]._key\n    )\n\n    if (!itemMember) {\n      const relativePath = trimLeft(props.path, absolutePath)\n      const key = (relativePath[0] as any)._key\n      return (\n        <div>\n          No array item with _key <code>\"{key}\"</code> found at path {JSON.stringify(props.path)}\n        </div>\n      )\n    }\n    if (itemMember.kind === 'error') {\n      return <MemberItemError member={itemMember} />\n    }\n    return (\n      <ArrayOfObjectsItem\n        member={itemMember}\n        renderInput={renderInput}\n        renderField={renderField}\n        renderItem={renderItem}\n        renderPreview={destinationRenderPreview}\n      />\n    )\n  }\n\n  if (isObjectInputProps(props)) {\n    const childPath = trimLeft(props.path, absolutePath)\n    const fieldMember = props.members.find(\n      (member): member is FieldMember => member.kind == 'field' && childPath[0] === member.name\n    )\n\n    if (!fieldMember) {\n      const fieldName = childPath[0]\n      return (\n        <div>\n          Field {JSON.stringify(fieldName)} not found among members – please verify that it's both\n          defined in the schema and that it has not been conditionally hidden.\n        </div>\n      )\n    }\n\n    return (\n      <MemberField\n        member={fieldMember}\n        renderInput={renderInput}\n        renderField={renderField}\n        renderItem={renderItem}\n        renderPreview={destinationRenderPreview}\n      />\n    )\n  }\n  throw new Error('FormInput can only be used with arrays or objects')\n})\n","import React, {ReactNode} from 'react'\nimport {Box, Dialog, Layer, ResponsiveWidthProps} from '@sanity/ui'\nimport {PresenceOverlay} from '../../presence'\nimport {PopoverDialog} from '../../components'\n\nconst PRESENCE_MARGINS: [number, number, number, number] = [0, 0, 1, 0]\n\ninterface Props {\n  type: 'popover' | 'dialog'\n  width: ResponsiveWidthProps['width']\n  header: string\n  id?: string\n  onClose: () => void\n  children?: ReactNode\n  // eslint-disable-next-line camelcase\n  legacy_referenceElement: HTMLElement | null\n}\n\nexport function EditPortal(props: Props): React.ReactElement {\n  const {\n    type,\n    id,\n    width,\n    onClose,\n    children,\n    legacy_referenceElement: referenceElement,\n    header,\n  } = props\n  const contents = (\n    <PresenceOverlay margins={PRESENCE_MARGINS}>\n      <Box padding={4}>{children}</Box>\n    </PresenceOverlay>\n  )\n  return type === 'dialog' ? (\n    <Layer>\n      <Dialog width={width} id={id || ''} onClose={onClose} header={header}>\n        {contents}\n      </Dialog>\n    </Layer>\n  ) : (\n    <PopoverDialog\n      width={width}\n      onClose={onClose}\n      referenceElement={referenceElement}\n      header={header}\n    >\n      {contents}\n    </PopoverDialog>\n  )\n}\n","import {\n  Box,\n  Button,\n  Card,\n  CardTone,\n  Flex,\n  Menu,\n  MenuButton,\n  MenuItem,\n  Spinner,\n  Text,\n} from '@sanity/ui'\nimport React, {useCallback, useMemo, useRef} from 'react'\nimport {SchemaType} from '@sanity/types'\nimport {CopyIcon as DuplicateIcon, EllipsisVerticalIcon, TrashIcon} from '@sanity/icons'\nimport {getSchemaTypeTitle} from '../../../../../schema'\nimport {ObjectItem, ObjectItemProps} from '../../../../types'\nimport {useScrollIntoViewOnFocusWithin} from '../../../../hooks/useScrollIntoViewOnFocusWithin'\nimport {useDidUpdate} from '../../../../hooks/useDidUpdate'\nimport {useChildPresence} from '../../../../studio/contexts/Presence'\nimport {randomKey} from '../../../../utils/randomKey'\nimport {FormFieldValidationStatus} from '../../../../components'\nimport {FieldPresence} from '../../../../../presence'\nimport {useChildValidation} from '../../../../studio/contexts/Validation'\nimport {ChangeIndicator} from '../../../../../changeIndicators'\nimport {RowLayout} from '../../layouts/RowLayout'\nimport {createProtoArrayValue} from '../createProtoArrayValue'\nimport {InsertMenu} from '../InsertMenu'\nimport {EditPortal} from '../../../../components/EditPortal'\n\ntype PreviewItemProps<Item extends ObjectItem> = Omit<ObjectItemProps<Item>, 'renderDefault'>\n\nfunction getTone({\n  readOnly,\n  hasErrors,\n  hasWarnings,\n}: {\n  readOnly: boolean | undefined\n  hasErrors: boolean\n  hasWarnings: boolean\n}): CardTone {\n  if (readOnly) {\n    return 'transparent'\n  }\n  if (hasErrors) {\n    return 'critical'\n  }\n  return hasWarnings ? 'caution' : 'default'\n}\nconst MENU_POPOVER_PROPS = {portal: true, tone: 'default'} as const\nconst INITIAL_VALUE_CARD_STYLE = {\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  bottom: 0,\n  right: 0,\n  opacity: 0.6,\n} as const\n\nconst BUTTON_CARD_STYLE = {position: 'relative'} as const\n\nexport function PreviewItem<Item extends ObjectItem = ObjectItem>(props: PreviewItemProps<Item>) {\n  const {\n    schemaType,\n    parentSchemaType,\n    path,\n    readOnly,\n    onRemove,\n    value,\n    open,\n    onInsert,\n    onFocus,\n    onOpen,\n    onClose,\n    changed,\n    focused,\n    children,\n    inputProps: {renderPreview},\n  } = props\n\n  const sortable = parentSchemaType.options?.sortable !== false\n  const insertableTypes = parentSchemaType.of\n\n  const previewCardRef = useRef<HTMLDivElement | null>(null)\n\n  // this is here to make sure the item is visible if it's being edited behind a modal\n  useScrollIntoViewOnFocusWithin(previewCardRef, open)\n\n  useDidUpdate(focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus && previewCardRef.current) {\n      // Note: if editing an inline item, focus is handled by the item input itself and no ref is being set\n      previewCardRef.current?.focus()\n    }\n  })\n\n  const resolvingInitialValue = (value as any)._resolvingInitialValue\n\n  const handleDuplicate = useCallback(() => {\n    onInsert({\n      items: [{...value, _key: randomKey()}],\n      position: 'after',\n    })\n  }, [onInsert, value])\n\n  const handleInsert = useCallback(\n    (pos: 'before' | 'after', insertType: SchemaType) => {\n      onInsert({\n        items: [createProtoArrayValue(insertType)],\n        position: pos,\n      })\n    },\n    [onInsert]\n  )\n\n  const childPresence = useChildPresence(path, true)\n  const presence = useMemo(() => {\n    return childPresence.length === 0 ? null : (\n      <FieldPresence presence={childPresence} maxAvatars={1} />\n    )\n  }, [childPresence])\n\n  const childValidation = useChildValidation(path, true)\n  const validation = useMemo(() => {\n    return childValidation.length === 0 ? null : (\n      <Box marginLeft={1} paddingX={1} paddingY={3}>\n        <FormFieldValidationStatus validation={childValidation} __unstable_showSummary />\n      </Box>\n    )\n  }, [childValidation])\n\n  const hasErrors = childValidation.some((v) => v.level === 'error')\n  const hasWarnings = childValidation.some((v) => v.level === 'warning')\n\n  const menu = useMemo(\n    () =>\n      readOnly ? null : (\n        <MenuButton\n          button={<Button padding={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n          id={`${props.inputId}-menuButton`}\n          menu={\n            <Menu>\n              <MenuItem text=\"Remove\" tone=\"critical\" icon={TrashIcon} onClick={onRemove} />\n              <MenuItem text=\"Duplicate\" icon={DuplicateIcon} onClick={handleDuplicate} />\n              <InsertMenu types={insertableTypes} onInsert={handleInsert} />\n            </Menu>\n          }\n          popover={MENU_POPOVER_PROPS}\n        />\n      ),\n    [handleDuplicate, handleInsert, onRemove, insertableTypes, props.inputId, readOnly]\n  )\n\n  const tone = getTone({readOnly, hasErrors, hasWarnings})\n  const item = (\n    <RowLayout\n      menu={menu}\n      presence={presence}\n      validation={validation}\n      tone={tone}\n      focused={focused}\n      dragHandle={sortable}\n      selected={open}\n    >\n      <Card\n        as=\"button\"\n        type=\"button\"\n        tone=\"inherit\"\n        radius={2}\n        disabled={resolvingInitialValue}\n        padding={1}\n        onClick={onOpen}\n        ref={previewCardRef}\n        onFocus={onFocus}\n        __unstable_focusRing\n        style={BUTTON_CARD_STYLE}\n      >\n        {renderPreview({\n          schemaType: props.schemaType,\n          value: props.value,\n          layout: 'default',\n        })}\n        {resolvingInitialValue && (\n          <Card\n            style={INITIAL_VALUE_CARD_STYLE}\n            tone=\"transparent\"\n            radius={2}\n            as={Flex}\n            // @ts-expect-error composed from as={Flex}\n            justify=\"center\"\n          >\n            <Flex align=\"center\" justify=\"center\" padding={3}>\n              <Box marginX={3}>\n                <Spinner muted />\n              </Box>\n              <Text size={1} muted>\n                Resolving initial value…\n              </Text>\n            </Flex>\n          </Card>\n        )}\n      </Card>\n    </RowLayout>\n  )\n\n  const itemTypeTitle = getSchemaTypeTitle(schemaType)\n  return (\n    <>\n      <ChangeIndicator path={path} isChanged={changed} hasFocus={Boolean(focused)}>\n        <Box paddingX={1}>{item}</Box>\n      </ChangeIndicator>\n      {open && (\n        <EditPortal\n          header={readOnly ? `View ${itemTypeTitle}` : `Edit ${itemTypeTitle}`}\n          type={parentSchemaType?.options?.modal?.type || 'dialog'}\n          width={parentSchemaType?.options?.modal?.width ?? 1}\n          id={value._key}\n          onClose={onClose}\n          legacy_referenceElement={previewCardRef.current}\n        >\n          {children}\n        </EditPortal>\n      )}\n    </>\n  )\n}\n","import {isReferenceSchemaType, SchemaType} from '@sanity/types'\nimport React from 'react'\nimport {ReferenceItem} from '../../inputs/ReferenceInput/ReferenceItem'\nimport {PreviewItem} from '../../inputs/arrays/ArrayOfObjectsInput/List/PreviewItem'\nimport {ItemProps} from '../../types'\nimport {FIXME} from '../../../FIXME'\n\nexport function defaultResolveItemComponent(\n  schemaType: SchemaType\n): React.ComponentType<Omit<ItemProps, 'renderDefault'>> {\n  if (schemaType.components?.item) return schemaType.components.item\n\n  if (isReferenceSchemaType(schemaType)) {\n    return ReferenceItem as FIXME\n  }\n\n  return PreviewItem as FIXME\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {Reference, ReferenceSchemaType} from '@sanity/types'\nimport {\n  Box,\n  Button,\n  Card,\n  CardTone,\n  Flex,\n  Menu,\n  MenuButton,\n  MenuDivider,\n  MenuItem,\n  Stack,\n  Text,\n} from '@sanity/ui'\nimport {\n  CloseIcon,\n  EllipsisVerticalIcon,\n  LaunchIcon as OpenInNewTabIcon,\n  SyncIcon as ReplaceIcon,\n  TrashIcon,\n} from '@sanity/icons'\nimport {ObjectFieldProps, RenderPreviewCallback} from '../../types'\nimport {FormField} from '../../components'\nimport {useScrollIntoViewOnFocusWithin} from '../../hooks/useScrollIntoViewOnFocusWithin'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {set, unset} from '../../patch'\nimport {AlertStrip} from '../../components/AlertStrip'\nimport {ReferencePreviewCard} from './ReferenceItem'\nimport {useReferenceInput} from './useReferenceInput'\nimport {useReferenceInfo} from './useReferenceInfo'\nimport {PreviewReferenceValue} from './PreviewReferenceValue'\n\ninterface ReferenceFieldProps extends Omit<ObjectFieldProps, 'renderDefault'> {\n  schemaType: ReferenceSchemaType\n  renderPreview: RenderPreviewCallback\n}\n\nfunction getTone({\n  readOnly,\n  hasErrors,\n  hasWarnings,\n}: {\n  readOnly: boolean | undefined\n  hasErrors: boolean\n  hasWarnings: boolean\n}): CardTone {\n  if (readOnly) {\n    return 'transparent'\n  }\n  if (hasErrors) {\n    return 'critical'\n  }\n  return hasWarnings ? 'caution' : 'default'\n}\nconst MENU_POPOVER_PROPS = {portal: true, tone: 'default'} as const\n\nexport function ReferenceField(props: ReferenceFieldProps) {\n  const elementRef = useRef<HTMLDivElement | null>(null)\n  const {schemaType, path, open, inputId, children, inputProps} = props\n  const {readOnly, focused, renderPreview, onChange} = props.inputProps\n\n  const handleClear = useCallback(() => inputProps.onChange(unset()), [inputProps])\n  const value: Reference | undefined = props.value as any\n\n  const {EditReferenceLink, getReferenceInfo, selectedState, isCurrentDocumentLiveEdit} =\n    useReferenceInput({\n      path,\n      schemaType,\n      value,\n    })\n\n  // this is here to make sure the item is visible if it's being edited behind a modal\n  useScrollIntoViewOnFocusWithin(elementRef, open)\n\n  useDidUpdate(focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus && elementRef.current) {\n      // Note: if editing an inline item, focus is handled by the item input itself and no ref is being set\n      elementRef.current?.focus()\n    }\n  })\n\n  const hasErrors = props.validation.some((v) => v.level === 'error')\n  const hasWarnings = props.validation.some((v) => v.level === 'warning')\n\n  const loadableReferenceInfo = useReferenceInfo(value?._ref, getReferenceInfo)\n\n  const refTypeName = loadableReferenceInfo.result?.type || value?._strengthenOnPublish?.type\n\n  const refType = refTypeName\n    ? schemaType.to.find((toType) => toType.name === refTypeName)\n    : undefined\n  const pressed = selectedState === 'pressed'\n  const selected = selectedState === 'selected'\n\n  const hasRef = value?._ref\n  const publishedReferenceExists = hasRef && loadableReferenceInfo.result?.preview?.published?._id\n\n  const handleRemoveStrengthenOnPublish = useCallback(() => {\n    onChange([\n      schemaType.weak === true ? set(true, ['_weak']) : unset(['_weak']),\n      unset(['_strengthenOnPublish']),\n    ])\n  }, [onChange, schemaType.weak])\n\n  const handleFixStrengthMismatch = useCallback(() => {\n    onChange(schemaType.weak === true ? set(true, ['_weak']) : unset(['_weak']))\n  }, [onChange, schemaType])\n\n  const weakIs = value?._weak ? 'weak' : 'strong'\n  const weakShouldBe = schemaType.weak === true ? 'weak' : 'strong'\n\n  // If the reference value is marked with _strengthenOnPublish,\n  // we allow weak references if the reference points to a document that has a draft but not a published\n  // In all other cases we should display a \"weak mismatch\" warning\n  const weakWarningOverride =\n    hasRef && !loadableReferenceInfo.isLoading && value?._strengthenOnPublish\n\n  const showWeakRefMismatch =\n    !loadableReferenceInfo.isLoading && hasRef && weakIs !== weakShouldBe && !weakWarningOverride\n\n  const tone = getTone({readOnly, hasErrors, hasWarnings})\n  const isEditing = !value?._ref || inputProps.focusPath[0] === '_ref'\n  const preview =\n    loadableReferenceInfo.result?.preview.draft || loadableReferenceInfo.result?.preview.published\n\n  const footer = (\n    <>\n      {isCurrentDocumentLiveEdit && publishedReferenceExists && value._strengthenOnPublish && (\n        <AlertStrip\n          padding={1}\n          title={schemaType.weak ? 'Finalize reference' : 'Convert to strong reference'}\n          status=\"info\"\n          data-testid=\"alert-reference-published\"\n        >\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              <strong>{loadableReferenceInfo.result?.preview.published?.title as any}</strong> is\n              published and this reference should now be{' '}\n              {schemaType.weak ? <>finalized</> : <>converted to a strong reference</>}.\n            </Text>\n            <Button\n              onClick={handleRemoveStrengthenOnPublish}\n              text={<>Convert to strong reference</>}\n              tone=\"positive\"\n            />\n          </Stack>\n        </AlertStrip>\n      )}\n      {showWeakRefMismatch && (\n        <AlertStrip\n          padding={1}\n          title=\"Reference strength mismatch\"\n          status=\"warning\"\n          data-testid=\"alert-reference-strength-mismatch\"\n        >\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              This reference is <em>{weakIs}</em>, but according to the current schema it should be{' '}\n              <em>{weakShouldBe}.</em>\n            </Text>\n\n            <Text as=\"p\" muted size={1}>\n              {schemaType.weak ? (\n                <>\n                  It will not be possible to delete the \"{preview?.title}\"-document without first\n                  removing this reference.\n                </>\n              ) : (\n                <>\n                  This makes it possible to delete the \"{preview?.title}\"-document without first\n                  deleting this reference, leaving this field referencing a nonexisting document.\n                </>\n              )}\n            </Text>\n            <Button\n              onClick={handleFixStrengthMismatch}\n              text={<>Convert to {weakShouldBe} reference</>}\n              tone=\"caution\"\n            />\n          </Stack>\n        </AlertStrip>\n      )}\n      {loadableReferenceInfo.error && (\n        <AlertStrip\n          padding={1}\n          title=\"Unable to load reference metadata\"\n          status=\"warning\"\n          data-testid=\"alert-reference-info-failed\"\n        >\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              Error: {loadableReferenceInfo.error.message}\n            </Text>\n            <Button onClick={loadableReferenceInfo.retry!} text={<>Retry</>} tone=\"primary\" />\n          </Stack>\n        </AlertStrip>\n      )}\n    </>\n  )\n\n  const menu = useMemo(\n    () =>\n      readOnly ? null : (\n        <Box marginLeft={1}>\n          <MenuButton\n            button={<Button paddingY={3} paddingX={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n            id={`${inputId}-menuButton`}\n            menu={\n              <Menu>\n                {!readOnly && (\n                  <>\n                    <MenuItem text=\"Clear\" tone=\"critical\" icon={TrashIcon} onClick={handleClear} />\n                    <MenuItem\n                      text={value?._ref && isEditing ? 'Cancel replace' : 'Replace'}\n                      icon={value?._ref && isEditing ? CloseIcon : ReplaceIcon}\n                      onClick={\n                        value?._ref && isEditing\n                          ? () => inputProps.onPathFocus([])\n                          : () => inputProps.onPathFocus(['_ref'])\n                      }\n                    />\n                  </>\n                )}\n\n                {!readOnly && !isEditing && value._ref && <MenuDivider />}\n                {!isEditing && value._ref && (\n                  <MenuItem\n                    as={EditReferenceLink}\n                    data-as=\"a\"\n                    text=\"Open in new tab\"\n                    icon={OpenInNewTabIcon}\n                  />\n                )}\n              </Menu>\n            }\n            popover={MENU_POPOVER_PROPS}\n          />\n        </Box>\n      ),\n    [readOnly, inputId, handleClear, value?._ref, isEditing, EditReferenceLink, inputProps]\n  )\n  return (\n    <FormField\n      level={props.level}\n      title={props.title}\n      description={props.description}\n      validation={props.validation}\n      __unstable_presence={props.presence}\n    >\n      {isEditing ? (\n        <Box paddingY={2}>{children}</Box>\n      ) : (\n        <Card shadow={1} radius={1} padding={1} tone={tone}>\n          <Stack space={1}>\n            <Flex gap={1} align=\"center\">\n              <ReferencePreviewCard\n                flex={1}\n                forwardedAs={EditReferenceLink as any}\n                tone=\"inherit\"\n                radius={2}\n                data-as=\"a\"\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                documentId={value?._ref}\n                documentType={refType?.name}\n                paddingX={2}\n                paddingY={1}\n                __unstable_focusRing\n                style={{position: 'relative'}}\n                selected={selected}\n                pressed={pressed}\n                data-selected={selected ? true : undefined}\n                data-pressed={pressed ? true : undefined}\n              >\n                <PreviewReferenceValue\n                  value={value}\n                  referenceInfo={loadableReferenceInfo}\n                  renderPreview={renderPreview}\n                  type={schemaType}\n                />\n              </ReferencePreviewCard>\n              <Box>{menu}</Box>\n            </Flex>\n            {footer}\n          </Stack>\n        </Card>\n      )}\n    </FormField>\n  )\n}\n","import {isArraySchemaType, SchemaType} from '@sanity/types'\nimport {get} from 'lodash'\n\nexport function getOption(type: SchemaType, optionName: string) {\n  return get(type.options, optionName)\n}\n\nconst PSEUDO_OBJECTS = ['array', 'file', 'image', 'reference', 'slug']\nconst HIDDEN_FIELDS = ['asset', 'crop', 'hotspot', '_ref', '_weak']\nconst NO_LEVEL_LAYOUTS = ['tags']\nconst NO_LEVEL_TYPES = ['slug']\n\nexport function getTypeChain(type: SchemaType | undefined, visited: Set<SchemaType>): SchemaType[] {\n  if (!type) return []\n  if (visited.has(type)) return []\n\n  visited.add(type)\n\n  const next = type.type ? getTypeChain(type.type, visited) : []\n  return [type, ...next]\n}\n\nexport function getFieldLevel(schemaType: SchemaType, currentLevel: number) {\n  return isArraySchemaType(schemaType)\n    ? getArrayFieldLevel(schemaType, currentLevel)\n    : getObjectFieldLevel(schemaType, currentLevel)\n}\n\nfunction getObjectFieldLevel(schemaType: SchemaType, currentLevel: number): number {\n  const {type, options} = schemaType\n  const typeIfRelevant = asType(type, PSEUDO_OBJECTS)\n  const fields = schemaType?.jsonType === 'object' ? schemaType.fields : undefined\n\n  const typeName = typeIfRelevant?.name || ''\n\n  if (NO_LEVEL_TYPES.includes(typeName)) {\n    return 0\n  }\n\n  const isPseudoObject = PSEUDO_OBJECTS.includes(typeName)\n  const hasVisibleFields = (fields?.filter((f) => !HIDDEN_FIELDS.includes(f.name)).length ?? 0) > 0\n  const hasListOptions = (options?.list?.length ?? 0) > 0\n\n  if (hasVisibleFields || hasListOptions || !isPseudoObject) {\n    return currentLevel\n  }\n\n  return 0\n}\n\nfunction getArrayFieldLevel(schemaType: SchemaType, currentLevel: number): number {\n  const {options} = schemaType\n\n  const hasListOptions = (options?.list || [])?.length > 0\n  const isNoLevelLayout = NO_LEVEL_LAYOUTS.includes(options?.layout || '')\n\n  if (hasListOptions && !isNoLevelLayout) {\n    return currentLevel\n  }\n\n  return 0\n}\n\nfunction asType(\n  schemaType: SchemaType | undefined,\n  asOneOfTypes: string[]\n): SchemaType | undefined {\n  if (schemaType?.name && asOneOfTypes.includes(schemaType?.name)) {\n    return schemaType\n  }\n  if (!schemaType) {\n    return undefined\n  }\n  return asType(schemaType.type, asOneOfTypes)\n}\n","/* eslint-disable react/jsx-handler-names */\nimport {isBooleanSchemaType, isReferenceSchemaType, SchemaType} from '@sanity/types'\nimport React from 'react'\nimport {ArrayFieldProps, FieldProps, ObjectFieldProps} from '../../types'\nimport {ReferenceField} from '../../inputs/ReferenceInput/ReferenceField'\nimport {FieldMember} from '../../store'\nimport {FormField, FormFieldSet} from '../../components'\nimport {ChangeIndicator} from '../../../changeIndicators'\nimport {getTypeChain} from './helpers'\n\nfunction PassThrough({children}: {children: React.ReactNode}) {\n  return <>{children}</>\n}\n\nfunction PrimitiveField(field: FieldProps) {\n  return (\n    <FormField\n      data-testid={`field-${field.inputId}`}\n      level={field.level}\n      title={field.title}\n      description={field.description}\n      validation={field.validation}\n      __unstable_presence={field.presence}\n    >\n      <ChangeIndicator\n        path={field.path}\n        hasFocus={Boolean(field.inputProps.focused)}\n        isChanged={field.inputProps.changed}\n      >\n        {field.children}\n      </ChangeIndicator>\n    </FormField>\n  )\n}\n\nfunction ObjectOrArrayField(field: ObjectFieldProps | ArrayFieldProps) {\n  return (\n    <FormFieldSet\n      data-testid={`field-${field.inputId}`}\n      level={field.level}\n      title={field.title}\n      description={field.description}\n      collapsed={field.collapsed}\n      collapsible={field.collapsible}\n      onCollapse={field.onCollapse}\n      onExpand={field.onExpand}\n      validation={field.validation}\n      __unstable_presence={field.presence}\n    >\n      {field.children}\n    </FormFieldSet>\n  )\n}\n\nfunction ImageOrFileField(field: ObjectFieldProps) {\n  // unless the hotspot tool dialog is open we want to show whoever is in there as the field presence\n  const hotspotField = field.inputProps.members.find(\n    (member): member is FieldMember => member.kind === 'field' && member.name === 'hotspot'\n  )\n  const presence = hotspotField?.open\n    ? field.presence\n    : field.presence.concat(hotspotField?.field.presence || [])\n\n  return (\n    <FormFieldSet\n      level={field.level}\n      title={field.title}\n      description={field.description}\n      collapsed={field.collapsed}\n      collapsible={field.collapsible}\n      onCollapse={field.onCollapse}\n      onExpand={field.onExpand}\n      validation={field.validation}\n      __unstable_presence={presence}\n    >\n      {field.children}\n    </FormFieldSet>\n  )\n}\n\nexport function defaultResolveFieldComponent(\n  schemaType: SchemaType\n): React.ComponentType<Omit<FieldProps, 'renderDefault'>> {\n  if (schemaType.components?.field) return schemaType.components.field\n\n  if (isBooleanSchemaType(schemaType)) {\n    return PassThrough\n  }\n\n  const typeChain = getTypeChain(schemaType, new Set())\n\n  if (typeChain.some((t) => t.name === 'image' || t.name === 'file')) {\n    return ImageOrFileField as React.ComponentType<Omit<FieldProps, 'renderDefault'>>\n  }\n  if (typeChain.some((t) => isReferenceSchemaType(t))) {\n    return ReferenceField as React.ComponentType<Omit<FieldProps, 'renderDefault'>>\n  }\n\n  if (schemaType.jsonType !== 'object' && schemaType.jsonType !== 'array') {\n    return PrimitiveField as React.ComponentType<Omit<FieldProps, 'renderDefault'>>\n  }\n\n  return ObjectOrArrayField as React.ComponentType<Omit<FieldProps, 'renderDefault'>>\n}\n","import {createElement} from 'react'\nimport {\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderItemCallback,\n  RenderPreviewCallback,\n} from '../types'\nimport {Preview} from '../../preview/components/Preview'\nimport {defaultResolveInputComponent} from './inputResolver/inputResolver'\nimport {defaultResolveItemComponent} from './inputResolver/itemResolver'\nimport {defaultResolveFieldComponent} from './inputResolver/fieldResolver'\n\n/** @internal */\nexport const defaultRenderField: RenderFieldCallback = (props) => {\n  return createElement(defaultResolveFieldComponent(props.schemaType), props)\n}\n\n/** @internal */\nexport const defaultRenderInput: RenderInputCallback = (props) => {\n  return createElement(defaultResolveInputComponent(props.schemaType), props)\n}\n\n/** @internal */\nexport const defaultRenderItem: RenderItemCallback = (props) => {\n  return createElement(defaultResolveItemComponent(props.schemaType), props)\n}\n\n/** @internal */\nexport const defaultRenderPreview: RenderPreviewCallback = (props) => {\n  return createElement(Preview, props)\n}\n","import {arrayToJSONMatchPath} from '@sanity/mutator'\nimport {Path, PathSegment} from '@sanity/types'\n\nconst IS_NUMERIC = /^\\d+$/\n\nfunction unquote(str: string) {\n  return str.replace(/^['\"]/, '').replace(/['\"]$/, '')\n}\n\nfunction splitAttr(segment: string) {\n  const [attr, key] = segment.split('==')\n  return {[attr]: unquote(key)}\n}\n\nfunction coerce(segment: string): PathSegment {\n  return IS_NUMERIC.test(segment) ? Number(segment) : segment\n}\n\nfunction parseGradientPath(focusPathStr: string): Path {\n  return focusPathStr\n    .split(/[[.\\]]/g)\n    .filter(Boolean)\n    .map((seg) => (seg.includes('==') ? splitAttr(seg) : coerce(seg))) as Path\n}\n\n/**\n * @internal\n */\nexport function encodePath(formBuilderPath: Path): string {\n  return arrayToJSONMatchPath(formBuilderPath)\n}\n\n/**\n * @internal\n */\nexport function decodePath(gradientPath: string): Path {\n  return parseGradientPath(gradientPath)\n}\n","/* eslint-disable react/no-unused-prop-types */\n\nimport {Path} from '@sanity/types'\nimport React, {useCallback, useEffect, useState} from 'react'\nimport {decodePath, encodePath} from '../../utils/path'\n\n/** @internal */\nexport type HashFocusManagerChildArgs = {\n  onFocus: (path: Path) => void\n  onBlur: () => void\n  focusPath: Path\n}\n\n/** @internal */\nexport interface HashFocusManagerProps {\n  focusPath: any | null\n  onFocus: () => void\n  onBlur: () => void\n  children: (arg0: HashFocusManagerChildArgs) => any\n}\n\nfunction getHash() {\n  return decodeURIComponent(document.location.hash.substring(1))\n}\n\nfunction getPathFromHash() {\n  const hash = getHash()\n  return hash ? decodePath(hash) : []\n}\n\n/**\n * An example of how to sync focus path through document.location.hash\n *\n * @internal\n */\nexport function HashFocusManager(props: HashFocusManagerProps) {\n  const {children} = props\n  const [focusPath, setFocusPath] = useState(() => getPathFromHash())\n\n  const handleBlur = useCallback(() => {\n    // setFocusPath([])\n  }, [])\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  const handleFocus = useCallback((focusPath: Path) => {\n    document.location.hash = encodePath(focusPath)\n  }, [])\n\n  useEffect(() => {\n    const handleHashChange = () => {\n      setFocusPath(getPathFromHash())\n    }\n    window.addEventListener('hashchange', handleHashChange, false)\n    return () => window.removeEventListener('hashchange', handleHashChange, false)\n  }, [])\n\n  return children({onBlur: handleBlur, onFocus: handleFocus, focusPath})\n}\n","/* eslint-disable react/no-unused-prop-types */\n\nimport React from 'react'\nimport {Path} from '@sanity/types'\n\n/** @internal */\nexport interface SimpleFocusManagerProps {\n  path: any | null\n  onFocus: () => void\n  onBlur: () => void\n  children: (arg: any) => any\n}\n\n/** @internal */\nexport interface SimpleFocusManagerState {\n  focusPath: Array<any>\n}\n\n/** @internal */\nexport class SimpleFocusManager extends React.Component<\n  SimpleFocusManagerProps,\n  SimpleFocusManagerState\n> {\n  state = {\n    focusPath: [],\n  }\n\n  handleFocus = (path: Path) => {\n    this.setState({focusPath: path})\n  }\n\n  handleBlur = () => {\n    // do nothing\n  }\n\n  render() {\n    return this.props.children({\n      onBlur: this.handleBlur,\n      onFocus: this.handleFocus,\n      focusPath: this.state.focusPath,\n    })\n  }\n}\n","import React, {ReactNode} from 'react'\nimport {Observable} from 'rxjs'\nimport {Reference} from '@sanity/types'\nimport {useMemoObservable} from 'react-rx'\n\ninterface Props<AssetDoc> {\n  reference: Reference\n  observeAsset: (assetId: string) => Observable<AssetDoc>\n  children: (assetDocument: AssetDoc) => ReactNode\n  waitPlaceholder?: ReactNode\n}\n\nexport function WithReferencedAsset<Asset>(props: Props<Asset>) {\n  const {reference, children, observeAsset, waitPlaceholder} = props\n  const documentId = reference?._ref\n  const asset = useMemoObservable(() => observeAsset(documentId), [documentId])\n  return <>{documentId && asset ? children(asset) : waitPlaceholder}</>\n}\n","/**\n * Utilities for extracting files from dataTransfer in a predictable cross-browser fashion.\n * Also recursively extracts files from a directory\n * Inspired by https://github.com/component/normalized-upload\n */\n\nimport {flatten} from 'lodash'\nimport {FIXME} from '../../../../../FIXME'\n\nexport function extractPastedFiles(dataTransfer: DataTransfer): Promise<File[]> {\n  if (dataTransfer.files && dataTransfer.files.length > 0) {\n    return Promise.resolve(Array.from(dataTransfer.files || []))\n  }\n  return normalizeItems(Array.from(dataTransfer.items || [])).then(flatten)\n}\n\nexport function extractDroppedFiles(dataTransfer: DataTransfer) {\n  const files: File[] = Array.from(dataTransfer.files || [])\n  const items: DataTransferItem[] = Array.from(dataTransfer.items || [])\n  if (files && files.length > 0) {\n    return Promise.resolve(files)\n  }\n  return normalizeItems(items).then(flatten)\n}\n\nfunction toArray<T>(v: T | null): T[] {\n  return v === null ? [] : [v]\n}\n\nfunction normalizeItems(items: DataTransferItem[]) {\n  return Promise.all(\n    items.map((item) => {\n      // directory\n      if (item.kind === 'file' && item.webkitGetAsEntry) {\n        let entry\n        // Edge throws\n        try {\n          entry = item.webkitGetAsEntry()\n        } catch (err) {\n          return toArray(item.getAsFile())\n        }\n        if (!entry) {\n          return []\n        }\n        return entry.isDirectory ? walk(entry as FIXME) : toArray(item.getAsFile())\n      }\n\n      if (item.kind === 'file') {\n        const file = item.getAsFile()\n        return Promise.resolve(file ? [file] : [])\n      }\n\n      if (item.kind === 'string') {\n        // We previously had support for reading datatransfer of strings here but decided to remove it since we don't handle it in higher up in the stack yet.\n        // If one day we want to support data transfer from a string value (e.g. copy+paste from a field to another), an earlier\n        // version of this file includes an implementation that uses DataTransferItem.getAsString to read the string value into a File\n        console.warn('DataTransfer with kind=\"string\" is currently not supported')\n        return Promise.resolve([])\n      }\n\n      console.warn('Unknown DataTransferItem.kind: %s', item.kind)\n      return Promise.resolve([])\n    })\n  )\n}\n\n// Warning: experimental API: https://wicg.github.io/entries-api\ntype WebKitFileEntry = {\n  isFile: true\n  isDirectory: false\n  name: string\n  fullPath: string\n  file: (fileCallback: (file: File) => void, errorCallback?: (error: Error) => void) => void\n}\n\ntype WebKitDirectoryEntry = {\n  isFile: false\n  isDirectory: true\n  name: string\n  fullPath: string\n  createReader: () => DirectoryReader\n}\n\ntype Entry = WebKitFileEntry | WebKitDirectoryEntry\n\ntype DirectoryReader = {\n  readEntries: (\n    successCallback: (entries: Entry[]) => void,\n    errorCallback?: (error: Error) => void\n  ) => void\n}\n\nfunction walk(entry: Entry): Promise<File[]> {\n  if (entry.isFile) {\n    return new Promise<File>((resolve, reject) => entry.file(resolve, reject)).then(\n      (file: File) => [file]\n    )\n  }\n\n  if (entry.isDirectory) {\n    const dir = entry.createReader()\n    return new Promise<Entry[]>((resolve, reject) => dir.readEntries(resolve, reject))\n      .then((entries) => entries.filter((entr) => !entr.name.startsWith('.')))\n      .then((entries) => Promise.all(entries.map(walk)).then(flatten))\n  }\n  return Promise.resolve([])\n}\n","export function imageUrlToBlob(\n  imageUrl: string,\n  format = 'image/jpeg',\n  quality = 1\n): Promise<Blob | null> {\n  if (imageUrl.match(/^webkit-fake-url:\\/\\//)) {\n    return Promise.reject(new Error('Cannot read image contents from webkit fake url'))\n  }\n  return new Promise((resolve, reject) => {\n    const loader = new Image()\n    loader.crossOrigin = 'anonymous'\n    loader.referrerPolicy = 'strict-origin-when-cross-origin'\n    loader.onload = () => {\n      const canvas = document.createElement('canvas')\n      canvas.width = loader.width\n      canvas.height = loader.height\n      const ctx = canvas.getContext('2d')\n      ctx?.drawImage(loader, 0, 0, canvas.width, canvas.height)\n      try {\n        canvas.toBlob(resolve, format, quality)\n      } catch (error) {\n        reject(error)\n      }\n    }\n    loader.src = imageUrl\n  })\n}\n","import React, {useCallback} from 'react'\nimport {useForwardedRef} from '@sanity/ui'\nimport {extractDroppedFiles, extractPastedFiles} from './utils/extractFiles'\nimport {imageUrlToBlob} from './utils/imageUrlToBlob'\n\nexport type FileInfo = {\n  kind: DataTransferItem['kind'] // 'file' or 'string'\n  type: DataTransferItem['type'] // mime type of file or string\n}\n\ntype Props = {\n  // Triggered when the target component receives one or more files, either originating from a drop event or a paste event\n  onFiles?: (files: File[]) => void\n\n  // Triggered by the user dragging files over the target component\n  // Note: We can potentially also support reading from clipboard events here: https://developer.mozilla.org/en-US/docs/Web/API/Clipboard\n  onFilesOver?: (files: FileInfo[]) => void\n\n  // Triggered by the user dragging files out of the target component\n  onFilesOut?: () => void\n\n  disabled?: boolean\n}\n\n// These are managed and can't be passed to the composed component\ntype ManagedProps =\n  | 'onDrop'\n  | 'onDragOver'\n  | 'onPaste'\n  | 'onDragEnter'\n  | 'onDragLeave'\n  | 'onKeyDown'\n\nconst PASTE_INPUT_STYLE = {opacity: 0, position: 'absolute'} as const\n\n/**\n * Higher order component that creates a file target from a given component.\n * Returns a component that acts both as a drop target and a paste target, emitting a list of Files upon drop or paste\n */\nexport function fileTarget<ComponentProps>(Component: React.ComponentType<ComponentProps>) {\n  return React.forwardRef(function FileTarget(\n    props: Omit<ComponentProps, ManagedProps> & Props,\n    ref: React.ForwardedRef<HTMLElement>\n  ) {\n    const {onFiles, onFilesOver, onFilesOut, disabled, ...rest} = props\n\n    const [showPasteInput, setShowPasteInput] = React.useState(false)\n\n    const pasteInput = React.useRef<HTMLDivElement | null>(null)\n    const forwardedRef = useForwardedRef(ref)\n\n    const enteredElements = React.useRef<Element[]>([])\n\n    const emitFiles = useCallback(\n      (files: File[]) => {\n        onFiles?.(files)\n      },\n      [onFiles]\n    )\n\n    const handleKeyDown = useCallback(\n      (event: React.KeyboardEvent) => {\n        if (\n          event.target === forwardedRef.current &&\n          (event.ctrlKey || event.metaKey) &&\n          event.key === 'v'\n        ) {\n          setShowPasteInput(true)\n        }\n      },\n      [forwardedRef]\n    )\n    const handlePaste = useCallback(\n      (event: React.ClipboardEvent) => {\n        extractPastedFiles(event.clipboardData)\n          .then((files) => {\n            if (!pasteInput.current) {\n              return []\n            }\n            return files.length > 0\n              ? files\n              : // Invoke Safari hack if we didn't get any files\n                convertImagesToFilesAndClearContentEditable(pasteInput.current, 'image/jpeg')\n          })\n          .then((files) => {\n            emitFiles(files)\n            setShowPasteInput(false)\n            forwardedRef.current?.focus()\n          })\n      },\n      [emitFiles, forwardedRef]\n    )\n    const handleDrop = useCallback(\n      (event: React.DragEvent) => {\n        enteredElements.current = []\n        event.preventDefault()\n        event.stopPropagation()\n        const dataTransfer = event.nativeEvent.dataTransfer\n        if (onFiles && dataTransfer) {\n          extractDroppedFiles(dataTransfer).then((files) => {\n            if (files) {\n              emitFiles(files)\n            }\n          })\n        }\n        onFilesOut?.()\n      },\n      [emitFiles, onFiles, onFilesOut]\n    )\n\n    const handleDragOver = useCallback(\n      (event: React.DragEvent) => {\n        if (onFiles) {\n          event.preventDefault()\n          event.stopPropagation()\n        }\n      },\n      [onFiles]\n    )\n\n    const handleDragEnter = useCallback(\n      (event: React.DragEvent) => {\n        event.stopPropagation()\n\n        if (onFilesOver && forwardedRef.current === event.currentTarget) {\n          /* this is a (hackish) work around to have the drag and drop work when the file is hovered back and forth over it\n          as part of the refactor and adding more components to the \"hover\" state, it didn't recognise that it just kept adding the same\n          element over and over, so when it tried to remove them on the handleDragLeave, it only removed the last instance.\n        */\n          enteredElements.current = [...new Set(enteredElements.current), event.currentTarget]\n\n          const fileTypes = Array.from(event.dataTransfer.items).map((item) => ({\n            type: item.type,\n            kind: item.kind,\n          }))\n          onFilesOver(fileTypes)\n        }\n      },\n      [onFilesOver, forwardedRef]\n    )\n\n    const handleDragLeave = useCallback(\n      (event: React.DragEvent) => {\n        event.stopPropagation()\n        const idx = enteredElements.current.indexOf(event.currentTarget)\n        if (idx > -1) {\n          enteredElements.current.splice(idx, 1)\n        }\n        if (enteredElements.current.length === 0) {\n          onFilesOut?.()\n        }\n      },\n      [onFilesOut]\n    )\n\n    const prevShowPasteInput = React.useRef(false)\n    React.useEffect(() => {\n      if (!prevShowPasteInput.current && showPasteInput && pasteInput.current) {\n        pasteInput.current.focus()\n        select(pasteInput.current) // Needed by Edge\n      } else if (prevShowPasteInput.current && !showPasteInput) {\n        pasteInput.current?.focus()\n      }\n      prevShowPasteInput.current = showPasteInput\n    }, [showPasteInput])\n\n    return (\n      <>\n        <Component\n          {...(rest as ComponentProps)}\n          ref={forwardedRef}\n          onKeyDown={disabled ? undefined : handleKeyDown}\n          onDragOver={disabled ? undefined : handleDragOver}\n          onDragEnter={disabled ? undefined : handleDragEnter}\n          onDragLeave={disabled ? undefined : handleDragLeave}\n          onDrop={disabled ? undefined : handleDrop}\n        />\n        {!disabled && showPasteInput && (\n          <div contentEditable onPaste={handlePaste} ref={pasteInput} style={PASTE_INPUT_STYLE} />\n        )}\n      </>\n    )\n  })\n}\n\n// this is a hack for Safari that reads pasted image(s) from an ContentEditable div instead of the onpaste event\nfunction convertImagesToFilesAndClearContentEditable(\n  element: HTMLElement,\n  targetFormat = 'image/jpeg'\n): Promise<File[]> {\n  if (!element.isContentEditable) {\n    return Promise.reject(\n      new Error(\n        `Expected element to be contentEditable=\"true\". Instead found a non contenteditable ${element.tagName}`\n      )\n    )\n  }\n  return new Promise((resolve) => setTimeout(resolve, 10)) // add a delay so the paste event can finish\n    .then(() => Array.from(element.querySelectorAll('img')))\n    .then((imageElements) => {\n      element.innerHTML = '' // clear\n      return imageElements\n    })\n    .then((images) => Promise.all(images.map((img) => imageUrlToBlob(img.src))))\n    .then((imageBlobs) =>\n      imageBlobs.map((blob) => new File([blob!], 'pasted-image.jpg', {type: targetFormat}))\n    )\n}\n\n// needed by Edge\nfunction select(el: Element) {\n  const range = document.createRange()\n  range.selectNodeContents(el)\n  const sel = window.getSelection()\n  sel?.removeAllRanges()\n  sel?.addRange(range)\n}\n","// todo: get these utils from @sanity/ui instead\nexport function focusRingBorderStyle(border: {color: string; width: number}): string {\n  return `inset 0 0 0 ${border.width}px ${border.color}`\n}\n\nexport function focusRingStyle(opts: {\n  base?: {bg: string}\n  border?: {color: string; width: number}\n  focusRing: {offset: number; width: number}\n}): string {\n  const {base, border, focusRing} = opts\n  const focusRingOutsetWidth = focusRing.offset + focusRing.width\n  const focusRingInsetWidth = 0 - focusRing.offset\n  const bgColor = base ? base.bg : 'var(--card-bg-color)'\n\n  return [\n    focusRingInsetWidth > 0 && `inset 0 0 0 ${focusRingInsetWidth}px var(--card-focus-ring-color)`,\n    border && focusRingBorderStyle(border),\n    focusRingInsetWidth < 0 && `0 0 0 ${0 - focusRingInsetWidth}px ${bgColor}`,\n    focusRingOutsetWidth > 0 && `0 0 0 ${focusRingOutsetWidth}px var(--card-focus-ring-color)`,\n  ]\n    .filter(Boolean)\n    .join(',')\n}\n","import styled, {css} from 'styled-components'\nimport {rem, Theme} from '@sanity/ui'\nimport {ComponentType} from 'react'\nimport {focusRingBorderStyle, focusRingStyle} from './helpers'\n\nexport function withFocusRing<Props>(component: ComponentType<Props>) {\n  return styled(component)<Props & {$border?: boolean}>(\n    (props: {theme: Theme; $border?: boolean}) => {\n      const border = {width: props.$border ? 1 : 0, color: 'var(--card-border-color)'}\n\n      return css`\n        --card-focus-box-shadow: ${focusRingBorderStyle(border)};\n\n        border-radius: ${rem(props.theme.sanity.radius[1])};\n        outline: none;\n        box-shadow: var(--card-focus-box-shadow);\n\n        &:focus {\n          --card-focus-box-shadow: ${focusRingStyle({\n            base: props.theme.sanity.color.base,\n            border,\n            focusRing: props.theme.sanity.focusRing,\n          })};\n        }\n      `\n    }\n  )\n}\n","/* eslint-disable import/named */\n\nimport {Card} from '@sanity/ui'\nimport {fileTarget} from '../../common/fileTarget'\nimport {withFocusRing} from '../../../components/withFocusRing'\n\nexport type {FileInfo} from '../../common/fileTarget'\n\n// Note: FileTarget needs its own focusRing because we need show it on click, not only when :focus-visible\nexport const FileTarget = fileTarget(withFocusRing(Card))\n","import {Card, Flex, Stack, Code} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const CardWrapper = styled(Card)`\n  min-height: 82px;\n  box-sizing: border-box;\n`\n\nexport const FlexWrapper = styled(Flex)`\n  text-overflow: ellipsis;\n  overflow: hidden;\n`\n\nexport const LeftSection = styled(Stack)`\n  position: relative;\n  width: 60%;\n`\n\nexport const CodeWrapper = styled(Code)`\n  position: relative;\n  width: 100%;\n\n  code {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    position: relative;\n    max-width: 200px;\n  }\n`\n","import React, {useEffect} from 'react'\nimport {Flex, Text, Button, Inline, Card} from '@sanity/ui'\nimport {UploadState} from '@sanity/types'\nimport {LinearProgress} from '../../../../components'\nimport {CardWrapper, FlexWrapper, LeftSection, CodeWrapper} from './UploadProgress.styled'\n\ntype Props = {\n  uploadState: UploadState\n  onCancel?: () => void\n  onStale?: () => void\n  height?: number\n}\n\n// If it's more than this amount of milliseconds since last time upload state was reported,\n// the upload will be marked as stale/interrupted.\nconst STALE_UPLOAD_MS = 1000 * 60 * 2 // 2 minutes\n\nconst elapsedMs = (date: string): number => new Date().getTime() - new Date(date).getTime()\n\nexport function UploadProgress({uploadState, onCancel, onStale, height}: Props) {\n  const filename = uploadState.file.name\n\n  useEffect(() => {\n    if (elapsedMs(uploadState.updatedAt) > STALE_UPLOAD_MS) {\n      onStale?.()\n    }\n  }, [uploadState.updatedAt, onStale])\n\n  return (\n    <CardWrapper tone=\"primary\" padding={4} border style={{height: `${height}px`}}>\n      <FlexWrapper align=\"center\" justify=\"space-between\" height=\"fill\" direction=\"row\" gap={2}>\n        <LeftSection>\n          <Flex justify=\"center\" gap={[3, 3, 2, 2]} direction={['column', 'column', 'row']}>\n            <Text size={1}>\n              <Inline space={2}>\n                Uploading\n                <CodeWrapper size={1}>{filename ? filename : '...'}</CodeWrapper>\n              </Inline>\n            </Text>\n          </Flex>\n\n          <Card marginTop={3} radius={5} shadow={1}>\n            <LinearProgress value={uploadState.progress} />\n          </Card>\n        </LeftSection>\n\n        {onCancel ? (\n          <Button\n            fontSize={2}\n            text=\"Cancel upload\"\n            mode=\"ghost\"\n            tone=\"critical\"\n            onClick={onCancel}\n          />\n        ) : null}\n      </FlexWrapper>\n    </CardWrapper>\n  )\n}\n","import {uuid} from '@sanity/uuid'\nimport {FIXME} from '../../../../../FIXME'\n\nexport function urlToFile(url: string, filename?: string): Promise<File> {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest()\n    xhr.onload = () => {\n      const reader = new FileReader()\n      reader.onloadend = () => {\n        const string = reader.result?.toString()\n        const ext = string?.substring('data:image/'.length, string.indexOf(';base64'))\n        if (!ext && !filename) {\n          reject(new Error('Could not find mime type for image'))\n          return\n        }\n        resolve(dataURLtoFile(reader.result as FIXME, filename || `${uuid()}.${ext}`))\n      }\n      reader.readAsDataURL(xhr.response)\n    }\n    xhr.onerror = (error) => {\n      reject(error)\n    }\n    xhr.open('GET', url)\n    xhr.responseType = 'blob'\n    xhr.send()\n  })\n}\n\nexport function base64ToFile(base64Data: string | ArrayBuffer, filename?: string): Promise<File> {\n  return new Promise((resolve, reject) => {\n    const string = base64Data.toString()\n    const ext = string.substring('data:image/'.length, string.indexOf(';base64'))\n    if (!ext && !filename) {\n      reject(new Error('Could not find mime type for image'))\n      return\n    }\n    resolve(dataURLtoFile(base64Data as FIXME, filename || `${uuid()}.${ext}`))\n  })\n}\n\nfunction dataURLtoFile(dataurl: string, filename: string) {\n  const arr = dataurl.split(',')\n  const mime = arr[0].match(/:(.*?);/)?.[1]\n  const bstr = atob(arr[1])\n  let n = bstr.length\n  const u8arr = new Uint8Array(n)\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n)\n  }\n  return new File([u8arr], filename, {type: mime})\n}\n","import {AssetFromSource, FileSchemaType} from '@sanity/types'\nimport {get} from 'lodash'\nimport {FIXME} from '../../../../FIXME'\nimport {FormPatch, PatchEvent, set, setIfMissing, unset} from '../../../patch'\nimport {Uploader, UploaderResolver, UploadOptions} from '../../../studio/uploads/types'\nimport {base64ToFile, urlToFile} from '../ImageInput/utils/image'\n\n// We alias DOM File type here to distinguish it from the type of the File value\ntype DOMFile = globalThis.File\n\ninterface Props {\n  assetFromSource: AssetFromSource[]\n  onChange: (patch: FormPatch | FormPatch[] | PatchEvent) => void\n  type: FileSchemaType\n  resolveUploader: UploaderResolver\n  uploadWith: (uploader: Uploader, file: DOMFile, assetDocumentProps?: UploadOptions) => void\n  isImage?: boolean\n}\n\nexport function handleSelectAssetFromSource({\n  assetFromSource,\n  onChange,\n  type,\n  resolveUploader,\n  uploadWith,\n  isImage,\n}: Props): void {\n  // const {onChange, type, resolveUploader} = this.props\n  if (!assetFromSource) {\n    throw new Error('No asset given')\n  }\n  if (!Array.isArray(assetFromSource) || assetFromSource.length === 0) {\n    throw new Error('Returned value must be an array with at least one item (asset)')\n  }\n  const firstAsset = assetFromSource[0]\n  const originalFilename = get(firstAsset, 'assetDocumentProps.originalFilename')\n  const label = get(firstAsset, 'assetDocumentProps.label')\n  const title = get(firstAsset, 'assetDocumentProps.title')\n  const description = get(firstAsset, 'assetDocumentProps.description')\n  const creditLine = get(firstAsset, 'assetDocumentProps.creditLine')\n  const source = get(firstAsset, 'assetDocumentProps.source')\n  const imagePatches = isImage ? [unset(['hotspot']), unset(['crop'])] : []\n  switch (firstAsset.kind) {\n    case 'assetDocumentId':\n      onChange([\n        setIfMissing({\n          _type: type.name,\n        }),\n        ...imagePatches,\n        set(\n          {\n            _type: 'reference',\n            _ref: firstAsset.value,\n          },\n\n          ['asset']\n        ),\n      ])\n\n      break\n    case 'file': {\n      const uploader = resolveUploader(type, firstAsset.value as FIXME)\n      if (uploader) {\n        uploadWith(uploader, firstAsset.value as FIXME, {\n          label,\n          title,\n          description,\n          creditLine,\n          source,\n        })\n      }\n      break\n    }\n    case 'base64':\n      base64ToFile(firstAsset.value as FIXME, originalFilename).then((file) => {\n        const uploader = resolveUploader(type, file)\n        if (uploader) {\n          uploadWith(uploader, file, {label, title, description, creditLine, source})\n        }\n      })\n      break\n    case 'url':\n      urlToFile(firstAsset.value as FIXME, originalFilename).then((file) => {\n        const uploader = resolveUploader(type, file)\n        if (uploader) {\n          uploadWith(uploader, file, {label, title, description, creditLine, source})\n        }\n      })\n      break\n    default: {\n      throw new Error('Invalid value returned from asset source plugin')\n    }\n  }\n}\n","import {Theme, MenuItem} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {focusRingStyle} from '../../../../components/withFocusRing/helpers'\n\nexport const FileButton = styled(MenuItem)(({theme}: {theme: Theme}) => {\n  const {focusRing} = theme.sanity\n  const base = theme.sanity.color.base\n  const border = {width: 1, color: 'var(--card-border-color)'}\n\n  return css`\n    position: relative;\n\n    &:not([data-disabled='true']) {\n      &:focus-within {\n        box-shadow: ${focusRingStyle({base, border, focusRing})};\n      }\n    }\n\n    & input {\n      overflow: hidden;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      min-width: 0;\n      display: block;\n      appearance: none;\n      padding: 0;\n      margin: 0;\n      border: 0;\n      opacity: 0;\n    }\n  `\n})\n","import React, {createElement, isValidElement, useId} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {Box, ButtonProps, Flex, Text} from '@sanity/ui'\nimport {FileButton} from './FileInputMenuItem.styled'\n\nexport interface FileInputMenuItemProps extends ButtonProps {\n  accept?: string\n  capture?: 'user' | 'environment'\n  multiple?: boolean\n  onSelect?: (files: File[]) => void\n  disabled?: boolean\n}\n\nexport const FileInputMenuItem = React.forwardRef(function FileInputMenuItem(\n  props: FileInputMenuItemProps &\n    Omit<React.HTMLProps<HTMLButtonElement>, 'as' | 'ref' | 'type' | 'value' | 'onSelect'>,\n  forwardedRef: React.ForwardedRef<HTMLInputElement>\n) {\n  const {\n    icon,\n    id: idProp,\n    accept,\n    capture,\n    fontSize,\n    multiple,\n    onSelect,\n    padding = 3,\n    space = 3,\n    textAlign,\n    text,\n    disabled,\n    ...rest\n  } = props\n  const id = `${idProp || ''}-${useId()}`\n\n  const handleChange = React.useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      if (onSelect && event.target.files) {\n        onSelect(Array.from(event.target.files))\n      }\n    },\n    [onSelect]\n  )\n\n  const content = (\n    <Flex align=\"center\" justify=\"flex-start\" padding={padding}>\n      {/* Icon */}\n      {icon && (\n        <Box marginRight={text ? space : undefined}>\n          <Text size={fontSize}>\n            {isValidElement(icon) && icon}\n            {isValidElementType(icon) && createElement(icon)}\n          </Text>\n        </Box>\n      )}\n\n      {/* Text */}\n      {text && (\n        <Text align={textAlign} size={fontSize} textOverflow=\"ellipsis\">\n          {text}\n        </Text>\n      )}\n    </Flex>\n  )\n\n  return (\n    <FileButton\n      {...rest}\n      htmlFor={id}\n      padding={0}\n      fontSize={2}\n      disabled={disabled}\n      ref={forwardedRef}\n    >\n      {content}\n\n      {/* Visibly hidden input */}\n      <input\n        data-testid=\"file-button-input\"\n        accept={accept}\n        capture={capture}\n        id={id}\n        multiple={multiple}\n        onChange={handleChange}\n        type=\"file\"\n        value=\"\"\n        disabled={disabled}\n      />\n    </FileButton>\n  )\n})\n","import React, {MouseEventHandler, useCallback} from 'react'\n\nimport {UploadIcon, ClipboardIcon, ResetIcon, DownloadIcon} from '@sanity/icons'\nimport {Box, MenuItem, MenuDivider, Label, useToast} from '@sanity/ui'\nimport {FileInputMenuItem} from './FileInputMenuItem/FileInputMenuItem'\n\ninterface Props {\n  onUpload: (files: File[]) => void\n  browse: React.ReactNode\n  readOnly?: boolean\n  onReset: MouseEventHandler<HTMLDivElement>\n  accept: string\n  directUploads?: boolean\n  downloadUrl?: string\n  copyUrl?: string\n}\n\nexport function ActionsMenu(props: Props) {\n  const {onUpload, onReset, readOnly, accept, directUploads, browse, downloadUrl, copyUrl} = props\n\n  const {push: pushToast} = useToast()\n\n  const handleCopyURL = useCallback(() => {\n    navigator.clipboard.writeText(copyUrl || '')\n    pushToast({closable: true, status: 'success', title: 'The url is copied to the clipboard'})\n  }, [pushToast, copyUrl])\n\n  return (\n    <>\n      <Box padding={2}>\n        <Label muted size={1}>\n          Replace\n        </Label>\n      </Box>\n      <FileInputMenuItem\n        icon={UploadIcon}\n        mode=\"bleed\"\n        onSelect={onUpload}\n        accept={accept}\n        text=\"Upload\"\n        data-testid=\"file-input-upload-button\"\n        disabled={readOnly || !directUploads}\n        fontSize={2}\n      />\n      {browse}\n\n      {(downloadUrl || copyUrl) && <MenuDivider />}\n      {downloadUrl && <MenuItem as=\"a\" icon={DownloadIcon} text=\"Download\" href={downloadUrl} />}\n      {copyUrl && <MenuItem icon={ClipboardIcon} text=\"Copy URL\" onClick={handleCopyURL} />}\n\n      <MenuDivider />\n      <MenuItem\n        tone=\"critical\"\n        icon={ResetIcon}\n        text=\"Clear field\"\n        onClick={onReset}\n        disabled={readOnly}\n        data-testid=\"file-input-clear\"\n      />\n    </>\n  )\n}\n","import React, {useMemo} from 'react'\nimport {BinaryDocumentIcon, AccessDeniedIcon, ImageIcon, ReadOnlyIcon} from '@sanity/icons'\nimport {Flex, Text} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {FileLike} from '../../../studio/uploads/types'\n\ninterface Props {\n  readOnly?: boolean\n  hoveringFiles: FileLike[]\n  type: string\n  acceptedFiles: FileLike[]\n  rejectedFilesCount: number\n  directUploads?: boolean\n}\n\nconst RootFlex = styled(Flex)`\n  pointer-events: none;\n`\n\nexport function PlaceholderText(props: Props) {\n  const {hoveringFiles, type, readOnly, acceptedFiles, rejectedFilesCount, directUploads} = props\n  const isFileType = type === 'file'\n\n  const messageIcon = useMemo(() => {\n    if (readOnly) {\n      return <ReadOnlyIcon />\n    }\n\n    if ((hoveringFiles && rejectedFilesCount > 0) || !directUploads) {\n      return <AccessDeniedIcon />\n    }\n\n    return isFileType ? <BinaryDocumentIcon /> : <ImageIcon />\n  }, [directUploads, hoveringFiles, isFileType, readOnly, rejectedFilesCount])\n\n  const messageText = useMemo(() => {\n    let message = `Drag or paste ${type} here`\n\n    if (!directUploads) {\n      return `Can't upload files here`\n    }\n\n    if (readOnly) {\n      message = 'Read only'\n    }\n\n    if (hoveringFiles && directUploads && !readOnly) {\n      if (acceptedFiles.length > 0) {\n        message = `Drop to upload ${type}`\n      }\n      if (rejectedFilesCount > 0) {\n        message = `Can't upload ${rejectedFilesCount} file${rejectedFilesCount > 1 ? 's' : ''} here`\n      }\n    }\n\n    return message\n  }, [acceptedFiles.length, directUploads, hoveringFiles, readOnly, rejectedFilesCount, type])\n\n  return (\n    <RootFlex align=\"center\" gap={2} justify=\"center\">\n      <Text muted>{messageIcon}</Text>\n\n      <Text size={1} muted>\n        {messageText}\n      </Text>\n    </RootFlex>\n  )\n}\n","import {Button, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {focusRingStyle} from '../../../../components/withFocusRing/helpers'\n\nexport const FileButton = styled(Button).attrs({forwardedAs: 'label'})(\n  ({theme}: {theme: Theme}) => {\n    const {focusRing} = theme.sanity\n    const base = theme.sanity.color.base\n    const border = {width: 1, color: 'var(--card-border-color)'}\n\n    return css`\n      &:not([data-disabled='true']) {\n        &:focus-within {\n          box-shadow: ${focusRingStyle({base, border, focusRing})};\n        }\n      }\n\n      & input {\n        overflow: hidden;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        min-width: 0;\n        display: block;\n        appearance: none;\n        padding: 0;\n        margin: 0;\n        border: 0;\n        opacity: 0;\n      }\n    `\n  }\n)\n","import React, {createElement, isValidElement, useId} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {Box, ButtonProps, Flex, Text, useTheme} from '@sanity/ui'\nimport {FileButton} from './styles'\n\nexport interface FileInputButtonProps extends ButtonProps {\n  accept?: string\n  capture?: 'user' | 'environment'\n  multiple?: boolean\n  onSelect?: (files: File[]) => void\n  disabled?: boolean\n}\n\nexport const FileInputButton = React.forwardRef(function FileInputButton(\n  props: FileInputButtonProps &\n    Omit<React.HTMLProps<HTMLButtonElement>, 'as' | 'ref' | 'type' | 'value' | 'onSelect'>,\n  forwardedRef: React.ForwardedRef<HTMLInputElement>\n) {\n  const {\n    icon,\n    id: idProp,\n    accept,\n    capture,\n    fontSize,\n    multiple,\n    onSelect,\n    padding = 3,\n    space = 3,\n    textAlign,\n    text,\n    disabled,\n    ...rest\n  } = props\n  const id = `${idProp || ''}-${useId()}`\n  const theme = useTheme()\n\n  const handleChange = React.useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      if (onSelect && event.target.files) {\n        onSelect(Array.from(event.target.files))\n      }\n    },\n    [onSelect]\n  )\n\n  const content = (\n    <Flex align=\"center\" justify=\"center\" padding={padding}>\n      {/* Icon */}\n      {icon && (\n        <Box marginRight={text ? space : undefined}>\n          <Text size={fontSize}>\n            {isValidElement(icon) && icon}\n            {isValidElementType(icon) && createElement(icon)}\n          </Text>\n        </Box>\n      )}\n\n      {/* Text */}\n      {text && (\n        <Text\n          align={textAlign}\n          size={fontSize}\n          textOverflow=\"ellipsis\"\n          weight={theme.sanity.button.textWeight}\n        >\n          {text}\n        </Text>\n      )}\n    </Flex>\n  )\n\n  return (\n    <FileButton {...rest} htmlFor={id} padding={0} fontSize={2} disabled={disabled}>\n      {content}\n\n      {/* Visibly hidden input */}\n      <input\n        data-testid=\"file-button-input\"\n        accept={accept}\n        capture={capture}\n        id={id}\n        multiple={multiple}\n        onChange={handleChange}\n        ref={forwardedRef}\n        type=\"file\"\n        value=\"\"\n        disabled={disabled}\n      />\n    </FileButton>\n  )\n})\n","import React from 'react'\nimport {UploadIcon} from '@sanity/icons'\nimport {Flex, Inline} from '@sanity/ui'\nimport {FileLike} from '../../../studio/uploads/types'\nimport {FileInputButton} from './FileInputButton/FileInputButton'\nimport {PlaceholderText} from './PlaceholderText'\n\ntype UploadPlaceholderProps = {\n  onUpload?: (files: File[]) => void\n  browse?: React.ReactNode\n  readOnly?: boolean\n  type: string\n  hoveringFiles: FileLike[]\n  acceptedFiles: FileLike[]\n  rejectedFilesCount: number\n  accept: string\n  directUploads?: boolean\n}\n\nexport const UploadPlaceholder = React.memo(function UploadPlaceholder({\n  browse,\n  onUpload,\n  readOnly,\n  type,\n  hoveringFiles,\n  acceptedFiles,\n  rejectedFilesCount,\n  accept,\n  directUploads,\n}: UploadPlaceholderProps) {\n  return (\n    <Flex\n      align=\"center\"\n      justify=\"space-between\"\n      gap={4}\n      direction={['column', 'column', 'row']}\n      paddingY={[2, 2, 0]}\n    >\n      <Flex align=\"center\" justify=\"center\" gap={2} flex={1}>\n        <PlaceholderText\n          readOnly={readOnly}\n          hoveringFiles={hoveringFiles}\n          acceptedFiles={acceptedFiles}\n          rejectedFilesCount={rejectedFilesCount}\n          type={type}\n          directUploads={directUploads}\n        />\n      </Flex>\n      <Inline space={2}>\n        <FileInputButton\n          icon={UploadIcon}\n          mode=\"ghost\"\n          onSelect={onUpload}\n          accept={accept}\n          text=\"Upload\"\n          data-testid=\"file-input-upload-button\"\n          disabled={readOnly || !directUploads}\n        />\n        {browse}\n      </Inline>\n    </Flex>\n  )\n})\n","import {ResetIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Card, Flex, Box, Text, Stack, Button} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\ntype Props = {\n  onClearStale?: () => void\n}\n\nconst ButtonWrapper = styled(Button)`\n  width: 100%;\n`\n\nexport function UploadWarning({onClearStale}: Props) {\n  return (\n    <Card tone=\"caution\" padding={4} border radius={2}>\n      <Flex gap={4} marginBottom={4}>\n        <Box>\n          <Text size={1}>\n            <WarningOutlineIcon />\n          </Text>\n        </Box>\n        <Stack space={3}>\n          <Text size={1} weight=\"semibold\">\n            Incomplete upload\n          </Text>\n          <Text size={1}>\n            An upload has made no progress in the last 6m and likely got interrupted. You can safely\n            clear the incomplete upload and try uploading again.\n          </Text>\n        </Stack>\n      </Flex>\n      <ButtonWrapper icon={ResetIcon} text=\"Clear upload\" onClick={onClearStale} mode=\"ghost\" />\n    </Card>\n  )\n}\n","import {Card, Flex} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const CardOverlay = styled(Card)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n`\n\nexport const FlexContainer = styled(Flex)`\n  height: 100%;\n`\n","/* method which returns a file size in a readable format */\nexport function formatBytes(bytes: number, decimals = 2) {\n  if (bytes === 0) return '0 Bytes'\n\n  const k = 1024\n  const dm = decimals < 0 ? 0 : decimals\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`\n}\n","import {BinaryDocumentIcon, EllipsisVerticalIcon} from '@sanity/icons'\nimport React, {ReactNode, useState} from 'react'\n\nimport {Box, Button, Card, Flex, Menu, Popover, Stack, Text, useClickOutside} from '@sanity/ui'\nimport {formatBytes} from '../../common/helper'\n\ntype Props = {\n  children: ReactNode\n  size: number\n  originalFilename: string\n  onClick?: () => void\n  muted?: boolean\n  disabled?: boolean\n  isMenuOpen: boolean\n  onMenuOpen: (flag: boolean) => void\n}\n\nexport function FileDetails(props: Props) {\n  const {originalFilename, size, children, muted, disabled, onClick, isMenuOpen, onMenuOpen} = props\n\n  const [menuElement, setMenuRef] = useState<HTMLDivElement | null>(null)\n\n  const handleClick = React.useCallback(() => onMenuOpen(true), [onMenuOpen])\n\n  useClickOutside(\n    React.useCallback(() => onMenuOpen(false), [onMenuOpen]),\n    [menuElement]\n  )\n\n  return (\n    <Flex wrap=\"nowrap\" justify=\"space-between\" align=\"center\">\n      <Card\n        as={muted || disabled ? undefined : 'button'}\n        tabIndex={disabled ? undefined : 0}\n        __unstable_focusRing\n        radius={2}\n        padding={2}\n        tone=\"inherit\"\n        onClick={onClick}\n      >\n        <Flex wrap=\"nowrap\" align=\"center\">\n          <Card padding={3} tone=\"transparent\" shadow={1} radius={1}>\n            <Text muted={muted}>\n              <BinaryDocumentIcon />\n            </Text>\n          </Card>\n          <Stack flex={1} space={2} marginLeft={3}>\n            <Text size={2} textOverflow=\"ellipsis\" muted={muted} data-testid=\"file-name\">\n              {originalFilename}\n            </Text>\n            <Text size={1} muted data-testid=\"file-size\">\n              {formatBytes(size)}\n            </Text>\n          </Stack>\n        </Flex>\n      </Card>\n      <Box padding={2}>\n        <Flex justify=\"center\">\n          <Popover content={<Menu ref={setMenuRef}>{children}</Menu>} portal open={isMenuOpen}>\n            <Button\n              icon={EllipsisVerticalIcon}\n              mode=\"bleed\"\n              data-testid=\"options-menu-button\"\n              onClick={handleClick}\n            />\n          </Popover>\n        </Flex>\n      </Box>\n    </Flex>\n  )\n}\n","import React from 'react'\nimport {Skeleton, Flex, Stack, LabelSkeleton} from '@sanity/ui'\n\nexport function FileSkeleton() {\n  return (\n    <Flex align=\"center\" justify=\"flex-start\" padding={2}>\n      <Skeleton padding={3} radius={1} animated />\n      <Stack flex={1} space={2} marginLeft={3}>\n        <LabelSkeleton style={{width: '100%'}} radius={1} animated />\n        <LabelSkeleton style={{width: '100%'}} radius={1} animated />\n      </Stack>\n    </Flex>\n  )\n}\n","import {ResetIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Card, Flex, Box, Text, Stack, Button} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\ntype Props = {\n  onClearValue?: () => void\n}\n\nconst ButtonWrapper = styled(Button)`\n  width: 100%;\n`\n\nexport function InvalidFileWarning({onClearValue}: Props) {\n  return (\n    <Card tone=\"caution\" padding={4} border radius={2}>\n      <Flex gap={4} marginBottom={4}>\n        <Box>\n          <Text size={1}>\n            <WarningOutlineIcon />\n          </Text>\n        </Box>\n        <Stack space={3}>\n          <Text size={1} weight=\"semibold\">\n            Invalid file value\n          </Text>\n          <Text size={1}>\n            The value of this field is not a valid file. Resetting this field will let you choose a\n            new file.\n          </Text>\n        </Stack>\n      </Flex>\n      <ButtonWrapper icon={ResetIcon} text=\"Reset value\" onClick={onClearValue} mode=\"ghost\" />\n    </Card>\n  )\n}\n","/* eslint-disable no-undef, import/no-unresolved */\n\nimport React, {ReactNode} from 'react'\nimport {Observable, Subscription} from 'rxjs'\nimport {get} from 'lodash'\nimport {\n  AssetFromSource,\n  AssetSource,\n  File as BaseFile,\n  FileAsset,\n  FileSchemaType,\n  Path,\n  UploadState,\n} from '@sanity/types'\nimport {ImageIcon, SearchIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Card,\n  Menu,\n  MenuButton,\n  MenuItem,\n  ThemeColorToneKey,\n  ToastParams,\n} from '@sanity/ui'\nimport {SanityClient} from '@sanity/client'\nimport {isFileSource} from '@sanity/asset-utils'\nimport {WithReferencedAsset} from '../../../utils/WithReferencedAsset'\nimport {Uploader, UploaderResolver, UploadOptions} from '../../../studio/uploads/types'\nimport {FileInfo, FileTarget} from '../common/styles'\nimport {UploadProgress} from '../common/UploadProgress'\nimport {handleSelectAssetFromSource} from '../common/assetSource'\nimport {ActionsMenu} from '../common/ActionsMenu'\nimport {PlaceholderText} from '../common/PlaceholderText'\nimport {UploadPlaceholder} from '../common/UploadPlaceholder'\nimport {UploadWarning} from '../common/UploadWarning'\nimport {InputProps, ObjectInputProps} from '../../../types'\nimport {PatchEvent, setIfMissing, unset} from '../../../patch'\nimport {MemberField, MemberFieldError, MemberFieldSet} from '../../../members'\nimport {ImperativeToast} from '../../../../components'\nimport {ChangeIndicator} from '../../../../changeIndicators'\nimport {FIXME} from '../../../../FIXME'\nimport {CardOverlay, FlexContainer} from './styles'\nimport {FileDetails} from './FileDetails'\nimport {FileSkeleton} from './FileSkeleton'\nimport {InvalidFileWarning} from './InvalidFileWarning'\n\n/** @beta */\nexport interface BaseFileInputValue extends Partial<BaseFile> {\n  _upload?: UploadState\n}\n\nfunction passThrough({children}: {children?: React.ReactNode}) {\n  return children\n}\n\n/** @beta */\nexport interface BaseFileInputProps extends ObjectInputProps<BaseFileInputValue, FileSchemaType> {\n  assetSources: AssetSource[]\n  directUploads?: boolean\n  observeAsset: (documentId: string) => Observable<FileAsset>\n  resolveUploader: UploaderResolver\n  client: SanityClient\n}\n\n/** @internal */\nexport interface BaseFileInputState {\n  isUploading: boolean\n  selectedAssetSource: AssetSource | null\n  hoveringFiles: FileInfo[]\n  isStale: boolean\n  isMenuOpen: boolean\n}\n\n/** @internal */\nexport type Focusable = {\n  focus: () => void\n}\nconst ASSET_FIELD_PATH = ['asset']\n\n/** @internal */\nexport class BaseFileInput extends React.PureComponent<BaseFileInputProps, BaseFileInputState> {\n  _focusRef: Focusable | null = null\n  _assetFieldPath: Path\n  uploadSubscription: Subscription | null = null\n\n  state: BaseFileInputState = {\n    isUploading: false,\n    selectedAssetSource: null,\n    hoveringFiles: [],\n    isStale: false,\n    isMenuOpen: false,\n  }\n\n  constructor(props: BaseFileInputProps) {\n    super(props)\n    this._assetFieldPath = props.path.concat(ASSET_FIELD_PATH)\n  }\n\n  toast: {push: (params: ToastParams) => void} | null = null\n\n  handleRemoveButtonClick = () => {\n    const {path, value} = this.props\n    const parentPathSegment = path.slice(-1)[0]\n\n    // String path segment mean an object path, while a number or a\n    // keyed segment means we're a direct child of an array\n    const isArrayElement = typeof parentPathSegment !== 'string'\n\n    // When removing the file, _type and _key are \"meta\"-properties and\n    // are not significant unless other properties are present. Thus, we\n    // want to remove the entire \"container\" object if these are the only\n    // properties present, BUT only if we're not an array element, as\n    // removing the array element will close the selection dialog. Instead,\n    // when closing the dialog, the array logic will check for an \"empty\"\n    // value and remove it for us\n    const allKeys = Object.keys(value || {})\n    const remainingKeys = allKeys.filter(\n      (key) => !['_type', '_key', '_upload', 'asset'].includes(key)\n    )\n\n    const isEmpty = remainingKeys.length === 0\n    const removeKeys = ['asset']\n      .concat(allKeys.filter((key) => ['_upload'].includes(key)))\n      .map((key) => unset([key]))\n\n    this.props.onChange(PatchEvent.from(isEmpty && !isArrayElement ? unset() : removeKeys))\n  }\n\n  clearUploadStatus() {\n    // todo: this is kind of hackish\n    if (this.props.value?._upload) {\n      this.props.onChange(PatchEvent.from([unset(['_upload'])]))\n    }\n  }\n\n  cancelUpload() {\n    if (this.uploadSubscription) {\n      this.uploadSubscription.unsubscribe()\n      this.clearUploadStatus()\n    }\n  }\n\n  handleCancelUpload = () => {\n    this.cancelUpload()\n  }\n\n  handleClearUploadState = () => {\n    this.setState({isStale: false})\n    this.clearUploadStatus()\n  }\n\n  handleStaleUpload = () => {\n    this.setState({isStale: true})\n  }\n\n  handleClearField = () => {\n    this.props.onChange(unset(['asset']))\n  }\n\n  handleSelectFiles = (files: globalThis.File[]) => {\n    const {directUploads, readOnly} = this.props\n    const {hoveringFiles} = this.state\n    if (directUploads && !readOnly) {\n      this.uploadFirstAccepted(files)\n    } else if (hoveringFiles.length > 0) {\n      this.handleFilesOut()\n    }\n  }\n\n  handleSelectFileFromAssetSource = (source: AssetSource) => {\n    this.setState({selectedAssetSource: source})\n  }\n\n  handleAssetSourceClosed = () => {\n    this.setState({selectedAssetSource: null})\n  }\n\n  uploadFirstAccepted(files: globalThis.File[]) {\n    const {schemaType} = this.props\n\n    const match = files\n      .map((file) => ({file, uploader: this.props.resolveUploader?.(schemaType, file)}))\n      .find((result) => result.uploader)\n\n    if (match) {\n      this.uploadWith(match.uploader!, match.file)\n    }\n\n    this.setState({isMenuOpen: false})\n  }\n\n  uploadWith = (\n    uploader: Uploader,\n    file: globalThis.File,\n    assetDocumentProps: UploadOptions = {}\n  ) => {\n    const {schemaType, onChange, client} = this.props\n    const {source} = assetDocumentProps\n    const options = {\n      metadata: get(schemaType, 'options.metadata'),\n      storeOriginalFilename: get(schemaType, 'options.storeOriginalFilename'),\n      source,\n    }\n    this.cancelUpload()\n    this.setState({isUploading: true})\n    onChange(PatchEvent.from([setIfMissing({_type: schemaType.name})]))\n    this.uploadSubscription = uploader.upload(client, file, schemaType, options).subscribe({\n      next: (uploadEvent) => {\n        if (uploadEvent.patches) {\n          onChange(PatchEvent.from(uploadEvent.patches))\n        }\n      },\n      error: (err) => {\n        // eslint-disable-next-line no-console\n        console.error(err)\n        this.toast?.push({\n          status: 'error',\n          description: 'The upload could not be completed at this time.',\n          title: 'Upload failed',\n        })\n        this.clearUploadStatus()\n      },\n      complete: () => {\n        this.setState({isUploading: false})\n      },\n    })\n  }\n\n  renderUploadState(uploadState: UploadState) {\n    const {isUploading} = this.state\n\n    return (\n      <UploadProgress\n        uploadState={uploadState}\n        onCancel={isUploading ? this.handleCancelUpload : undefined}\n        onStale={this.handleStaleUpload}\n      />\n    )\n  }\n\n  renderAssetSource() {\n    const {selectedAssetSource} = this.state\n    const {value, observeAsset} = this.props\n    if (!selectedAssetSource) {\n      return null\n    }\n    const Component = selectedAssetSource.component\n    if (value && value.asset) {\n      return (\n        <WithReferencedAsset\n          observeAsset={observeAsset}\n          reference={value.asset}\n          waitPlaceholder={<FileSkeleton />}\n        >\n          {(fileAsset) => (\n            <Component\n              selectedAssets={[fileAsset]}\n              selectionType=\"single\"\n              assetType=\"file\"\n              dialogHeaderTitle=\"Select file\"\n              onClose={this.handleAssetSourceClosed}\n              onSelect={this.handleSelectAssetFromSource}\n            />\n          )}\n        </WithReferencedAsset>\n      )\n    }\n    return (\n      <Component\n        selectedAssets={[]}\n        selectionType=\"single\"\n        assetType=\"file\"\n        dialogHeaderTitle=\"Select file\"\n        onClose={this.handleAssetSourceClosed}\n        onSelect={this.handleSelectAssetFromSource}\n      />\n    )\n  }\n\n  handleSelectAssetFromSource = (assetFromSource: AssetFromSource[]) => {\n    const {onChange, schemaType, resolveUploader} = this.props\n    handleSelectAssetFromSource({\n      assetFromSource,\n      onChange,\n      type: schemaType,\n      resolveUploader,\n      uploadWith: this.uploadWith,\n    })\n    this.setState({selectedAssetSource: null})\n  }\n\n  hasFileTargetFocus() {\n    return this.props.focusPath?.[0] === 'asset'\n  }\n\n  handleFileTargetFocus = (event: FIXME) => {\n    // We want to handle focus when the file target element *itself* receives\n    // focus, not when an interactive child element receives focus. Since React has decided\n    // to let focus bubble, so this workaround is needed\n    // Background: https://github.com/facebook/react/issues/6410#issuecomment-671915381\n    if (event.currentTarget === event.target && event.currentTarget === this._focusRef) {\n      this.props.onPathFocus(['asset'])\n    }\n  }\n\n  handleFilesOver = (fileInfo: FileInfo[]) => {\n    this.setState({\n      hoveringFiles: fileInfo,\n    })\n  }\n  handleFilesOut = () => {\n    this.setState({\n      hoveringFiles: [],\n    })\n  }\n\n  renderAsset() {\n    const {value, changed, readOnly, elementProps} = this.props\n    const {hoveringFiles, isStale} = this.state\n    const hasValueOrUpload = Boolean(value?._upload || value?.asset)\n\n    if (value && typeof value.asset !== 'undefined' && !value?._upload && !isFileSource(value)) {\n      return () => <InvalidFileWarning onClearValue={this.handleClearField} />\n    }\n\n    // todo: convert this to a functional component and use this with useCallback\n    //  it currently has to return a new function on every render in order to pick up state from this component\n    return (inputProps: Omit<InputProps, 'renderDefault'>) => (\n      <>\n        {isStale && (\n          <Box marginBottom={2}>\n            <UploadWarning onClearStale={this.handleClearUploadState} />\n          </Box>\n        )}\n        <ChangeIndicator\n          path={this._assetFieldPath}\n          hasFocus={!!inputProps.focused}\n          isChanged={changed}\n        >\n          {/* not uploading */}\n          {!value?._upload && (\n            <FileTarget\n              {...elementProps}\n              tabIndex={0}\n              disabled={Boolean(readOnly)}\n              ref={this.setFocusElement}\n              onFiles={this.handleSelectFiles}\n              onFilesOver={this.handleFilesOver}\n              onFilesOut={this.handleFilesOut}\n              tone={this.getFileTone()}\n              $border={hasValueOrUpload || hoveringFiles.length > 0}\n              style={{padding: 1}}\n              sizing=\"border\"\n              radius={2}\n            >\n              <div style={{position: 'relative'}}>\n                {!value?.asset && this.renderUploadPlaceholder()}\n                {value?.asset && hoveringFiles.length > 0\n                  ? this.renderAssetMenu(this.getFileTone())\n                  : null}\n                {!value?._upload && value?.asset && this.renderPreview()}\n              </div>\n            </FileTarget>\n          )}\n\n          {/* uploading */}\n          {value?._upload && this.renderUploadState(value._upload)}\n        </ChangeIndicator>\n      </>\n    )\n  }\n\n  renderPreview() {\n    const {value, readOnly, assetSources, schemaType, directUploads, observeAsset} = this.props\n    const {isMenuOpen} = this.state\n    const asset = value?.asset\n    if (!asset) {\n      return null\n    }\n\n    const accept = get(schemaType, 'options.accept', '')\n\n    let browseMenuItem: ReactNode =\n      assetSources && assetSources?.length === 0 ? null : (\n        <MenuItem\n          icon={SearchIcon}\n          text=\"Browse\"\n          onClick={() => {\n            this.setState({isMenuOpen: false})\n            this.handleSelectFileFromAssetSource(assetSources[0])\n          }}\n          disabled={readOnly}\n          data-testid=\"file-input-browse-button\"\n        />\n      )\n\n    if (assetSources.length > 1) {\n      browseMenuItem = assetSources.map((assetSource) => {\n        return (\n          <MenuItem\n            key={assetSource.name}\n            text={assetSource.title}\n            onClick={() => {\n              this.setState({isMenuOpen: false})\n              this.handleSelectFileFromAssetSource(assetSource)\n            }}\n            icon={assetSource.icon || ImageIcon}\n            disabled={readOnly}\n            data-testid={`file-input-browse-button-${assetSource.name}`}\n          />\n        )\n      })\n    }\n\n    return (\n      <WithReferencedAsset\n        reference={asset}\n        observeAsset={observeAsset}\n        waitPlaceholder={<FileSkeleton />}\n      >\n        {({originalFilename, extension, url, size}) => {\n          const filename = originalFilename || `download.${extension}`\n          let copyUrl: string | undefined\n          let downloadUrl: string | undefined\n\n          if (isFileSource(value)) {\n            downloadUrl = `${url}?dl`\n            copyUrl = url\n          }\n\n          return (\n            <FileDetails\n              size={size}\n              originalFilename={filename}\n              muted={!readOnly}\n              onMenuOpen={(isOpen) => this.setState({isMenuOpen: isOpen})}\n              isMenuOpen={isMenuOpen}\n            >\n              <ActionsMenu\n                onUpload={this.handleSelectFiles}\n                browse={browseMenuItem}\n                onReset={this.handleRemoveButtonClick}\n                downloadUrl={downloadUrl}\n                copyUrl={copyUrl}\n                readOnly={readOnly}\n                accept={accept}\n                directUploads={directUploads}\n              />\n            </FileDetails>\n          )\n        }}\n      </WithReferencedAsset>\n    )\n  }\n\n  renderAssetMenu(tone: ThemeColorToneKey) {\n    const {schemaType, readOnly, directUploads, resolveUploader} = this.props\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader?.(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n\n    return (\n      <CardOverlay tone={tone}>\n        <FlexContainer align=\"center\" justify=\"center\" gap={2} flex={1}>\n          <PlaceholderText\n            readOnly={readOnly}\n            hoveringFiles={hoveringFiles}\n            acceptedFiles={acceptedFiles}\n            rejectedFilesCount={rejectedFilesCount}\n            directUploads={directUploads}\n            type=\"file\"\n          />\n        </FlexContainer>\n      </CardOverlay>\n    )\n  }\n\n  renderBrowser() {\n    const {assetSources, readOnly, directUploads, id} = this.props\n\n    if (assetSources.length === 0) return null\n\n    if (assetSources.length > 1 && !readOnly && directUploads) {\n      return (\n        <MenuButton\n          id={`${id}_assetFileButton`}\n          button={\n            <Button\n              mode=\"ghost\"\n              text=\"Select\"\n              data-testid=\"file-input-multi-browse-button\"\n              icon={SearchIcon}\n            />\n          }\n          data-testid=\"input-select-button\"\n          menu={\n            <Menu>\n              {assetSources.map((assetSource) => {\n                return (\n                  <MenuItem\n                    key={assetSource.name}\n                    text={assetSource.title}\n                    onClick={() => {\n                      this.setState({isMenuOpen: false})\n                      this.handleSelectFileFromAssetSource(assetSource)\n                    }}\n                    icon={assetSource.icon || ImageIcon}\n                    disabled={readOnly}\n                    data-testid={`file-input-browse-button-${assetSource.name}`}\n                  />\n                )\n              })}\n            </Menu>\n          }\n        />\n      )\n    }\n\n    return (\n      <Button\n        fontSize={2}\n        text=\"Browse\"\n        icon={SearchIcon}\n        mode=\"ghost\"\n        onClick={() => {\n          this.setState({isMenuOpen: false})\n          this.handleSelectFileFromAssetSource(assetSources[0])\n        }}\n        data-testid=\"file-input-browse-button\"\n        disabled={readOnly}\n      />\n    )\n  }\n\n  renderUploadPlaceholder() {\n    const {readOnly, schemaType, directUploads, resolveUploader} = this.props\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader?.(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n\n    const accept = get(schemaType, 'options.accept', '')\n\n    return (\n      <div style={{padding: 1}}>\n        <Card\n          tone={readOnly ? 'transparent' : 'inherit'}\n          border\n          padding={3}\n          style={\n            hoveringFiles.length === 0\n              ? {borderStyle: 'dashed'}\n              : {borderStyle: 'dashed', borderColor: 'transparent'}\n          }\n        >\n          <UploadPlaceholder\n            browse={this.renderBrowser()}\n            onUpload={this.handleSelectFiles}\n            readOnly={readOnly}\n            hoveringFiles={hoveringFiles}\n            acceptedFiles={acceptedFiles}\n            rejectedFilesCount={rejectedFilesCount}\n            type=\"file\"\n            accept={accept}\n            directUploads={directUploads}\n          />\n        </Card>\n      </div>\n    )\n  }\n\n  focus() {\n    if (this._focusRef) {\n      this._focusRef.focus()\n    }\n  }\n\n  setFocusElement = (ref: Focusable | null) => {\n    this._focusRef = ref\n  }\n\n  handleUpload = ({file, uploader}: {file: globalThis.File; uploader: Uploader}) => {\n    this.uploadWith(uploader, file)\n  }\n\n  setToast = (toast: {push: (params: ToastParams) => void}) => {\n    this.toast = toast\n  }\n  getFileTone() {\n    const {directUploads, schemaType, value, readOnly, resolveUploader} = this.props\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader?.(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n\n    if (hoveringFiles.length > 0) {\n      if (rejectedFilesCount > 0 || !directUploads) {\n        return 'critical'\n      }\n    }\n\n    if (!value?._upload && !readOnly && hoveringFiles.length > 0) {\n      return 'primary'\n    }\n    return value?._upload && value?.asset && readOnly ? 'transparent' : 'default'\n  }\n\n  render() {\n    const {members, renderItem, renderInput, renderField, renderPreview} = this.props\n    const {selectedAssetSource} = this.state\n\n    return (\n      <>\n        <ImperativeToast ref={this.setToast} />\n        {members.map((member) => {\n          if (member.kind === 'field' && (member.name === 'crop' || member.name === 'hotspot')) {\n            // we're rendering these separately\n            return null\n          }\n\n          if (member.kind === 'field') {\n            return (\n              <MemberField\n                key={member.key}\n                member={member}\n                renderInput={member.name === 'asset' ? this.renderAsset() : renderInput}\n                renderField={member.name === 'asset' ? passThrough : renderField}\n                renderItem={renderItem}\n                renderPreview={renderPreview}\n              />\n            )\n          }\n          if (member.kind === 'fieldSet') {\n            return (\n              <MemberFieldSet\n                key={member.key}\n                member={member}\n                renderInput={renderInput}\n                renderField={renderField}\n                renderItem={renderItem}\n                renderPreview={renderPreview}\n              />\n            )\n          }\n          if (member.kind === 'error') {\n            return <MemberFieldError key={member.key} member={member} />\n          }\n          //@ts-expect-error all possible cases should be covered\n          return <>Unknown member kind: ${member.kind}</>\n        })}\n        {selectedAssetSource && this.renderAssetSource()}\n      </>\n    )\n  }\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {SchemaType} from '@sanity/types'\nimport {BaseFileInput, BaseFileInputProps} from '../../inputs/files/FileInput'\nimport {resolveUploader as defaultResolveUploader} from '../uploads/resolveUploader'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {useFormBuilder} from '../../useFormBuilder'\nimport {FileLike} from '../uploads/types'\nimport {useDocumentPreviewStore} from '../../../store'\nimport {useClient} from '../../../hooks'\nimport {observeFileAsset} from './client-adapters/assets'\n\n/** @beta */\nexport type FileInputProps = Omit<\n  BaseFileInputProps,\n  'assetSources' | 'directUploads' | 'observeAsset' | 'resolveUploader' | 'client'\n>\n\n/** @beta */\nexport function StudioFileInput(props: FileInputProps) {\n  const sourcesFromSchema = props.schemaType.options?.sources\n  const documentPreviewStore = useDocumentPreviewStore()\n  const {file: fileConfig} = useFormBuilder().__internal\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  const resolveUploader = useCallback(\n    (type: SchemaType, file: FileLike) => {\n      if (!fileConfig.directUploads) {\n        return null\n      }\n      return defaultResolveUploader(type, file)\n    },\n    [fileConfig.directUploads]\n  )\n  // NOTE: type.options.sources may be an empty array and in that case we're\n  // disabling selecting images from asset source  (it's a feature, not a bug)\n  const assetSources = useMemo(\n    () => sourcesFromSchema || fileConfig.assetSources,\n    [fileConfig, sourcesFromSchema]\n  )\n\n  const observeAsset = useCallback(\n    (id: string) => observeFileAsset(documentPreviewStore, id),\n    [documentPreviewStore]\n  )\n\n  return (\n    <BaseFileInput\n      {...props}\n      client={client}\n      assetSources={assetSources}\n      directUploads={fileConfig.directUploads}\n      observeAsset={observeAsset}\n      resolveUploader={resolveUploader}\n    />\n  )\n}\n","import {Box} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const RatioBox = styled(Box)<{ratio?: number}>`\n  position: relative;\n  padding-bottom: calc(${({ratio = 3 / 2}) => 1 / ratio} * 100%);\n\n  & > div {\n    position: absolute;\n    top: ${({padding = 0}) => padding}px;\n    left: ${({padding = 0}) => padding}px;\n    right: ${({padding = 0}) => padding}px;\n    bottom: ${({padding = 0}) => padding}px;\n  }\n`\n","/* eslint-disable @typescript-eslint/no-shadow */\nimport {useEffect, useState, type ReactElement} from 'react'\n\ninterface ImageLoaderProps {\n  src: string\n  children: (props: {\n    isLoading: boolean\n    image: HTMLImageElement | null\n    error: Error | null\n  }) => ReactElement | null\n}\n\nexport function ImageLoader(props: ImageLoaderProps) {\n  const {src, children} = props\n  const [isLoading, setIsLoading] = useState(true)\n  const [image, setImage] = useState<HTMLImageElement | null>(null)\n  const [error, setError] = useState<Error | null>(null)\n\n  useEffect(() => {\n    setImage(null)\n    setError(null)\n    setIsLoading(true)\n\n    const image = new Image()\n\n    image.onload = () => {\n      setImage(image)\n      setError(null)\n      setIsLoading(false)\n    }\n\n    image.onerror = () => {\n      setError(new Error(`Could not load image from ${JSON.stringify(src)}`))\n      setIsLoading(false)\n    }\n\n    image.referrerPolicy = 'strict-origin-when-cross-origin'\n    image.src = src\n  }, [src])\n\n  return children({image, error, isLoading})\n}\n","const testProperties = ['', 'webkit', 'moz', 'ms', 'o'].map(\n  (prefix) => `${prefix}backingStoreRatio`\n)\nlet foundProperty: number | string | undefined = -1\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function getBackingStoreRatio(context: CanvasRenderingContext2D) {\n  if (foundProperty === -1) {\n    foundProperty = testProperties.find((testProperty) => testProperty in context)\n  }\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  //@ts-ignore\n  return foundProperty && context[foundProperty]\n}\n","import type {Coordinate} from '../types'\nimport type {Rect} from './shapes'\n\nexport function isPointInEllipse(point: Coordinate, ellipse: Rect): boolean {\n  const center = {x: ellipse.center.x, y: ellipse.center.y}\n  const xradius = ellipse.width / 2\n  const yradius = ellipse.height / 2\n\n  if (xradius <= 0 || yradius <= 0) {\n    return false\n  }\n\n  const normalized = {x: point.x - center.x, y: point.y - center.y}\n\n  return (\n    Math.pow(normalized.x, 2) / Math.pow(xradius, 2) +\n      Math.pow(normalized.y, 2) / Math.pow(yradius, 2) <=\n    1\n  )\n}\n\nexport function isPointInCircle(\n  {x, y}: Coordinate,\n  circle: Coordinate & {radius: number}\n): boolean {\n  return Math.pow(x - circle.x, 2) + Math.pow(y - circle.y, 2) < Math.pow(circle.radius, 2)\n}\n\nexport function isPointInRect(point: Coordinate, rect: Rect): boolean {\n  return (\n    point.x >= rect.left &&\n    point.x <= rect.left + rect.width &&\n    point.y >= rect.top &&\n    point.y <= rect.top + rect.height\n  )\n}\n\nexport function getPointAtCircumference(radians: number, ellipse: Rect): Coordinate {\n  return {\n    x: ellipse.center.x - (ellipse.width / 2) * Math.cos(radians),\n    y: ellipse.center.y - (ellipse.height / 2) * Math.sin(radians),\n  }\n}\n","import type {Crop} from '../types'\n\nexport class Size {\n  height: number\n  width: number\n  constructor(height: number, width: number) {\n    this.height = height\n    this.width = width\n  }\n}\nexport class Point {\n  x: number\n  y: number\n  constructor(x: number, y: number) {\n    this.x = x\n    this.y = y\n  }\n}\n\nclass HLine {\n  y: number\n  _left: number\n  _right: number\n  constructor(y: number, left: number, right: number) {\n    this.y = y\n    this._left = left\n    this._right = right\n  }\n\n  get right() {\n    return new Point(this._right, this.y)\n  }\n\n  get left() {\n    return new Point(this._left, this.y)\n  }\n\n  get length() {\n    return this._right - this._left\n  }\n}\n\nclass Corners {\n  rect: Rect\n  constructor(rect: Rect) {\n    this.rect = rect\n  }\n\n  get top() {\n    return new HLine(this.rect.top, this.rect.left, this.rect.right)\n  }\n\n  get bottom() {\n    return new HLine(this.rect.bottom, this.rect.left, this.rect.right)\n  }\n}\n\nexport class Rect {\n  left: number\n  top: number\n  width: number\n  height: number\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n  static fromEdges({left, right, top, bottom}: Crop) {\n    return new Rect(left, top, 1 - left - right, 1 - top - bottom)\n  }\n\n  constructor(left = 0, top = 0, width = 0, height = 0) {\n    this.left = left\n    this.top = top\n    this.width = width\n    this.height = height\n  }\n\n  setTopLeft(left: number | undefined, top: number | undefined): Rect {\n    return new Rect(left, top, this.width || 0, this.height || 0)\n  }\n\n  setSize(width: number | undefined, height: number | undefined): Rect {\n    return new Rect(this.left || 0, this.top || 0, width, height)\n  }\n\n  setCenter(x: number, y: number): Rect {\n    const width = this.width || 0\n    const height = this.height || 0\n    return new Rect(x - width / 2, y - height / 2, width || 0, height || 0)\n  }\n\n  get center(): Point {\n    return new Point(this.left + this.width / 2, this.top + this.height / 2)\n  }\n\n  get corners(): Corners {\n    return new Corners(this)\n  }\n\n  get right(): number {\n    return this.left + this.width\n  }\n\n  get bottom(): number {\n    return this.top + this.height\n  }\n\n  multiply(rect: Rect): Rect {\n    return new Rect(\n      (this.left || 0) + this.width * rect.left,\n      (this.top || 0) + this.height * rect.top,\n      this.width * rect.width,\n      this.height * rect.height\n    )\n  }\n\n  grow(delta: number): Rect {\n    return new Rect(\n      this.left - delta,\n      this.top - delta,\n      this.width + delta * 2,\n      this.height + delta * 2\n    )\n  }\n\n  shrink(delta: number): Rect {\n    return this.grow(-delta)\n  }\n\n  cropRelative(crop: Rect): Rect {\n    const top = this.top + crop.top * this.height\n    const left = this.left + crop.left * this.width\n    const height = this.height * crop.height\n    const width = this.width * crop.width\n    return new Rect(left, top, width, height)\n  }\n\n  clamp(bounds: Rect): Rect {\n    // always try to fit the whole rect inside given bounds\n    // adjust top, left if we can, resize if we must\n    let {left, top, width, height} = this\n    if (bounds.width < width) {\n      width = bounds.width\n      left = bounds.left\n    }\n    if (bounds.height < height) {\n      height = bounds.height\n      top = bounds.top\n    }\n\n    if (left + width > bounds.left + bounds.width) {\n      left = bounds.right - width\n    }\n\n    if (top + height > bounds.top + bounds.height) {\n      top = bounds.bottom - height\n    }\n\n    return new Rect(Math.max(left, bounds.left), Math.max(top, bounds.top), width, height)\n  }\n}\n","import React from 'react'\nimport Debug from 'debug'\nimport type {Coordinate} from './types'\n\nconst debug = Debug('sanity-imagetool')\nconst supportsTouch = typeof window !== 'undefined' && 'ontouchstart' in window\n\ntype PositionableEvent =\n  | {touches: React.TouchEvent['touches'] | TouchEvent['touches']}\n  | {clientX: number; clientY: number}\n\n// Returns a component that emits `onDragStart, `onDrag` and `onDragEnd` events.\n// It handles mouse/touch events the same way\n// - `onDragStart` is called with the {x, y} positions relative from the dom node (e.g. where the mousedown event happened)\n// - `onDrag` and `onDragEnd` are both called with the {x, y} difference from the previous position\nexport interface DragAwareProps {\n  onDragStart: (pos: {x: number; y: number}) => void\n  onDrag: (pos: {x: number; y: number}) => void\n  onDragEnd: (pos: {x: number; y: number}) => void\n  readOnly?: boolean\n  [key: string]: unknown | undefined\n}\n\nexport function makeDragAware(Component: 'canvas') {\n  return class DragAware extends React.PureComponent<DragAwareProps> {\n    domNode: HTMLCanvasElement | null = null\n    currentPos: Coordinate | null = null\n    isDragging = false\n\n    componentDidMount() {\n      if (supportsTouch) {\n        document.body.addEventListener('touchmove', this.handleTouchMove, {passive: false})\n        document.body.addEventListener('touchend', this.handleDragEnd)\n        document.body.addEventListener('touchcancel', this.handleDragCancel)\n      } else {\n        document.body.addEventListener('mousemove', this.handleDrag)\n        document.body.addEventListener('mouseup', this.handleDragEnd)\n        document.body.addEventListener('mouseleave', this.handleDragCancel)\n      }\n    }\n\n    componentWillUnmount() {\n      if (supportsTouch) {\n        document.body.removeEventListener('touchmove', this.handleTouchMove)\n        document.body.removeEventListener('touchend', this.handleDragEnd)\n        document.body.removeEventListener('touchcancel', this.handleDragCancel)\n      } else {\n        document.body.removeEventListener('mousemove', this.handleDrag)\n        document.body.removeEventListener('mouseup', this.handleDragEnd)\n        document.body.removeEventListener('mouseleave', this.handleDragCancel)\n      }\n    }\n\n    handleTouchMove = (event: TouchEvent | MouseEvent) => {\n      // Disables mobile scroll by touch\n      if (this.isDragging) {\n        event.preventDefault()\n      }\n    }\n\n    handleDragStart = (event: PositionableEvent) => {\n      const {onDragStart, readOnly} = this.props\n\n      if (readOnly || !this.domNode) {\n        return\n      }\n\n      if (this.isDragging) {\n        debug('Start cancelled, already a drag in progress')\n        return\n      }\n\n      this.isDragging = true\n      const nextPos = getPos(event)\n      debug('Drag started %o', nextPos)\n      onDragStart(\n        getPositionRelativeToRect(nextPos.x, nextPos.y, this.domNode.getBoundingClientRect())\n      )\n\n      this.currentPos = nextPos\n    }\n\n    handleDrag = (event: PositionableEvent) => {\n      if (!this.isDragging || this.props.readOnly || !this.currentPos) {\n        return\n      }\n\n      const {onDrag} = this.props\n      const nextPos = getPos(event)\n      const diff = diffPos(nextPos, this.currentPos)\n      onDrag(diff)\n      debug('moving by %o', diff)\n      this.currentPos = nextPos\n    }\n\n    handleDragEnd = (event: MouseEvent | TouchEvent) => {\n      const {onDragEnd, readOnly} = this.props\n      if (!this.isDragging || readOnly || !this.domNode) {\n        return\n      }\n      const nextPos = getPos(event)\n      onDragEnd(\n        getPositionRelativeToRect(nextPos.x, nextPos.y, this.domNode.getBoundingClientRect())\n      )\n      this.isDragging = false\n      this.currentPos = null\n      debug('Done moving %o', nextPos)\n    }\n\n    handleDragCancel = () => {\n      if (!this.isDragging || this.props.readOnly || !this.currentPos || !this.domNode) {\n        return\n      }\n\n      const {onDragEnd} = this.props\n      this.isDragging = false\n      onDragEnd(\n        getPositionRelativeToRect(\n          this.currentPos.x,\n          this.currentPos.y,\n          this.domNode.getBoundingClientRect()\n        )\n      )\n\n      this.currentPos = null\n    }\n\n    setDomNode = (node: HTMLCanvasElement) => {\n      this.domNode = node\n    }\n\n    render() {\n      const {readOnly, onDragStart, onDragEnd, onDrag, ...rest} = this.props\n      return (\n        <Component\n          ref={this.setDomNode}\n          onTouchStart={readOnly ? undefined : this.handleDragStart}\n          onMouseDown={readOnly ? undefined : this.handleDragStart}\n          onTouchMove={readOnly ? undefined : this.handleDrag}\n          {...rest}\n        />\n      )\n    }\n  }\n}\n\nfunction getPositionRelativeToRect(x: number, y: number, rect: {left: number; top: number}) {\n  return {\n    x: x - rect.left,\n    y: y - rect.top,\n  }\n}\n\nfunction getPos(event: PositionableEvent): Coordinate {\n  if ('touches' in event) {\n    return event.touches.length > 0\n      ? {x: event.touches[0].clientX, y: event.touches[0].clientY}\n      : {x: 0, y: 0}\n  }\n\n  return {\n    x: event.clientX,\n    y: event.clientY,\n  }\n}\n\nfunction diffPos(pos: Coordinate, otherPos: Coordinate): Coordinate {\n  return {\n    x: pos.x - otherPos.x,\n    y: pos.y - otherPos.y,\n  }\n}\n","import styled from 'styled-components'\nimport {makeDragAware} from './makeDragAware'\n\nexport const DragAwareCanvas = makeDragAware('canvas')\n\nexport const RootContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\n\nexport const CanvasContainer = styled(DragAwareCanvas)`\n  display: block;\n  position: relative;\n  max-width: calc(100% - 0.5em); /* to prevent overlap with change bar */\n  max-height: calc(100% + 1em);\n  user-select: none;\n`\n","/* eslint-disable max-len */\n\nexport const OPEN_HAND =\n  'data:image/png;base64,AAACAAEAICACAAcABQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAEAAAAAAAAAAAAAAgAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8AAAA/AAAAfwAAAP+AAAH/gAAB/8AAA//AAAd/wAAGf+AAAH9gAADbYAAA2yAAAZsAAAGbAAAAGAAAAAAAAA//////////////////////////////////////////////////////////////////////////////////////gH///4B///8Af//+AD///AA///wAH//4AB//8AAf//AAD//5AA///gAP//4AD//8AF///AB///5A////5///8='\n\nexport const CLOSE_HAND =\n  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAABdSURBVEjH7ZA7DsAwCEMN6v2vTCdESpLKQRl5gxfzMQDNRQyWlEK83QAIRh3cH/QbIhQwMDl8gORl7A16WD/xxAdq6N6SgycKUblf41+wbFBT44RiCi11NU3TLHgBxRUUD4ITqnIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTUtMDEtMjFUMDA6MTM6NDMrMDE6MDC74T7AAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDEyLTA0LTAyVDA0OjEzOjM3KzAyOjAwQJ35wQAAAABJRU5ErkJggg=='\n","import type {Crop, Hotspot} from './types'\n\nexport const DEFAULT_HOTSPOT: Hotspot = {\n  x: 0.5,\n  y: 0.5,\n  height: 1,\n  width: 1,\n}\n\nexport const DEFAULT_CROP: Crop = {\n  top: 0,\n  left: 0,\n  right: 0,\n  bottom: 0,\n}\n","import React, {MouseEvent} from 'react'\nimport {memoize} from 'lodash'\nimport {getBackingStoreRatio} from './getBackingStoreRatio'\nimport * as utils2d from './2d/utils'\nimport {Rect} from './2d/shapes'\nimport {RootContainer, CanvasContainer} from './ToolCanvas.styles'\n\nimport * as cursors from './cursors'\nimport {DEFAULT_CROP, DEFAULT_HOTSPOT} from './constants'\nimport type {\n  Coordinate,\n  Crop,\n  CropAndHotspot,\n  CropHandles,\n  Dimensions,\n  Hotspot,\n  Offsets,\n  ToolCanvasProps,\n  ToolCanvasState,\n} from './types'\n\n// The margin available in all directions for drawing the crop tool\nconst MARGIN_PX = 8\nconst CROP_HANDLE_SIZE = 12\nconst HOTSPOT_HANDLE_SIZE = 10\n\nfunction normalizeRect(rect: Rect) {\n  const flippedY = rect.top > rect.bottom\n  const flippedX = rect.left > rect.right\n  return {\n    top: flippedY ? rect.bottom : rect.top,\n    bottom: flippedY ? rect.top : rect.bottom,\n    left: flippedX ? rect.right : rect.left,\n    right: flippedX ? rect.left : rect.right,\n  }\n}\n\nfunction checkCropBoundaries(value: Partial<CropAndHotspot>, delta: Offsets) {\n  // Make the experience a little better. Still offsets when dragging back from outside\n  if (\n    !value ||\n    !value.crop ||\n    value.crop.top + delta.top < 0 ||\n    value.crop.left + delta.left < 0 ||\n    value.crop.right + delta.right < 0 ||\n    value.crop.bottom + delta.bottom < 0\n  ) {\n    return false\n  }\n  return true\n}\n\nfunction limitToBoundaries(value: Partial<CropAndHotspot>, delta: Offsets) {\n  const {top, right, bottom, left} = value.crop || DEFAULT_CROP\n\n  const newValue = {\n    hotspot: value.hotspot,\n    crop: {\n      top: top + (delta.top || 0) > 0 ? top : 0,\n      right: right + (delta.right || 0) > 0 ? right : 0,\n      bottom: bottom + (delta.bottom || 0) > 0 ? bottom : 0,\n      left: left + (delta.left || 0) > 0 ? left : 0,\n    },\n  }\n\n  const newDelta = {\n    top: top + (delta.top || 0) > 0 ? delta.top || 0 : 0,\n    right: right + (delta.right || 0) > 0 ? delta.right || 0 : 0,\n    bottom: bottom + (delta.bottom || 0) > 0 ? delta.bottom || 0 : 0,\n    left: left + (delta.left || 0) > 0 ? delta.left || 0 : 0,\n  }\n\n  return {value: newValue, delta: newDelta}\n}\n\nfunction getCropCursorForHandle(handle: keyof CropHandles | boolean) {\n  switch (handle) {\n    case 'left':\n    case 'right':\n      return 'col-resize'\n\n    case 'top':\n    case 'bottom':\n      return 'row-resize'\n\n    case 'topRight':\n    case 'bottomLeft':\n      return 'nesw-resize'\n\n    case 'topLeft':\n    case 'bottomRight':\n      return 'nwse-resize'\n    default:\n      return null\n  }\n}\n\nconst getDevicePixelRatio = memoize(() => {\n  const devicePixelRatio = window.devicePixelRatio || 1\n  const ctx = document.createElement('canvas').getContext('2d')\n  const backingStoreRatio = (ctx && getBackingStoreRatio(ctx)) || 1\n  return devicePixelRatio / backingStoreRatio\n})\n\nconst cropHandleKeys: (keyof CropHandles)[] = [\n  'left',\n  'right',\n  'top',\n  'topLeft',\n  'topRight',\n  'bottom',\n  'bottomLeft',\n  'bottomRight',\n]\n\nexport class ToolCanvas extends React.PureComponent<ToolCanvasProps, ToolCanvasState> {\n  state: ToolCanvasState = {\n    cropping: false,\n    cropMoving: false,\n    moving: false,\n    resizing: false,\n    mousePosition: null,\n  }\n\n  canvas?: {domNode: HTMLCanvasElement}\n\n  getHotspotRect() {\n    const {value, image} = this.props\n\n    const hotspot: Hotspot = value.hotspot || DEFAULT_HOTSPOT\n    const hotspotRect = new Rect()\n      .setSize(hotspot.width, hotspot.height)\n      .setCenter(hotspot.x, hotspot.y)\n\n    return new Rect()\n      .setSize(image.width, image.height)\n      .shrink(MARGIN_PX * this.getScale())\n      .multiply(hotspotRect)\n  }\n\n  getCropRect() {\n    const {value, image} = this.props\n\n    return new Rect()\n      .setSize(image.width, image.height)\n      .shrink(MARGIN_PX * this.getScale())\n      .cropRelative(Rect.fromEdges(value.crop || DEFAULT_CROP).clamp(new Rect(0, 0, 1, 1)))\n  }\n\n  getCropHandles(): CropHandles {\n    const inner = this.getCropRect()\n\n    const handleSize = CROP_HANDLE_SIZE * this.getScale()\n\n    const halfCropHandleSize = handleSize / 2\n\n    const cropHandle = new Rect(0, 0, handleSize, handleSize)\n    return {\n      left: cropHandle.setTopLeft(\n        inner.left - halfCropHandleSize,\n        inner.center.y - halfCropHandleSize\n      ),\n      right: cropHandle.setTopLeft(\n        inner.right - halfCropHandleSize,\n        inner.center.y - halfCropHandleSize\n      ),\n\n      top: cropHandle.setTopLeft(\n        inner.center.x - halfCropHandleSize,\n        inner.top - halfCropHandleSize\n      ),\n      topLeft: cropHandle.setTopLeft(\n        inner.left - halfCropHandleSize,\n        inner.top - halfCropHandleSize\n      ),\n      topRight: cropHandle.setTopLeft(\n        inner.right - halfCropHandleSize,\n        inner.top - halfCropHandleSize\n      ),\n\n      bottom: cropHandle.setTopLeft(\n        inner.center.x - halfCropHandleSize,\n        inner.bottom - halfCropHandleSize\n      ),\n      bottomLeft: cropHandle.setTopLeft(\n        inner.left - halfCropHandleSize,\n        inner.bottom - halfCropHandleSize\n      ),\n      bottomRight: cropHandle.setTopLeft(\n        inner.right - halfCropHandleSize,\n        inner.bottom - halfCropHandleSize\n      ),\n    }\n  }\n\n  getActiveCropHandleFor({x, y}: Coordinate) {\n    const cropHandles = this.getCropHandles()\n    for (const position of cropHandleKeys) {\n      if (utils2d.isPointInRect({x, y}, cropHandles[position])) {\n        return position\n      }\n    }\n    return false\n  }\n\n  emitMove(pos: Coordinate) {\n    const {image, value, onChange} = this.props\n    const scale = this.getScale()\n    const delta = {\n      x: (pos.x * scale) / image.width,\n      y: (pos.y * scale) / image.height,\n    }\n\n    onChange(applyHotspotMoveBy(value, delta))\n  }\n\n  emitCropMove(pos: Coordinate) {\n    const {image, onChange, value} = this.props\n    const scale = this.getScale()\n    const left = (pos.x * scale) / image.width\n    const right = (-pos.x * scale) / image.width\n    const top = (pos.y * scale) / image.height\n    const bottom = (-pos.y * scale) / image.height\n    const delta = {left, right, top, bottom}\n\n    if (checkCropBoundaries(value, delta)) {\n      onChange(applyCropMoveBy(value, delta))\n    }\n  }\n\n  emitCrop(side: string | boolean, pos: Coordinate) {\n    const {image, onChange, value} = this.props\n    const scale = this.getScale()\n    let left = 0\n    let right = 0\n    let top = 0\n    let bottom = 0\n\n    if (side == 'left' || side === 'topLeft' || side === 'bottomLeft') {\n      left = (pos.x * scale) / image.width\n    } else if (side == 'right' || side === 'topRight' || side === 'bottomRight') {\n      right = (-pos.x * scale) / image.width\n    }\n\n    if (side == 'top' || side === 'topLeft' || side === 'topRight') {\n      top = (pos.y * scale) / image.height\n    } else if (side == 'bottom' || side === 'bottomLeft' || side === 'bottomRight') {\n      bottom = (-pos.y * scale) / image.height\n    }\n\n    const delta = {left, right, top, bottom}\n    const newValue = limitToBoundaries(value, delta).value\n    const newDelta = limitToBoundaries(value, delta).delta\n\n    onChange(applyCropMoveBy(newValue, newDelta))\n  }\n\n  emitResize(pos: Coordinate) {\n    const {image, onChange, value} = this.props\n    const scale = this.getScale()\n\n    const delta = {\n      x: (pos.x * scale * 2) / image.width,\n      y: (pos.y * scale * 2) / image.height,\n    }\n    onChange(applyHotspotResizeBy(value, {height: delta.y, width: delta.x}))\n  }\n\n  getClampedValue() {\n    const value = this.props.value\n\n    const crop = Rect.fromEdges(value.crop || DEFAULT_CROP).clamp(new Rect(0, 0, 1, 1))\n\n    const hotspot = value.hotspot || DEFAULT_HOTSPOT\n    const hotspotRect = new Rect(0, 0, 1, 1)\n      .setSize(hotspot.width, hotspot.height)\n      .setCenter(hotspot.x, hotspot.y)\n      .clamp(crop)\n\n    return {crop: crop, hotspot: hotspotRect}\n  }\n\n  paintHotspot(context: CanvasRenderingContext2D, opacity: number) {\n    const {image, readOnly} = this.props\n\n    const imageRect = new Rect().setSize(image.width, image.height)\n\n    const {hotspot, crop} = this.getClampedValue()\n\n    const scale = this.getScale()\n    const margin = MARGIN_PX * scale\n\n    context.save()\n    drawBackdrop()\n    drawEllipse()\n    context.clip()\n    drawHole()\n    context.restore()\n    if (!readOnly) {\n      drawDragHandle(Math.PI * 1.25)\n    }\n\n    function drawEllipse() {\n      context.save()\n\n      const dest = imageRect.shrink(margin).multiply(hotspot)\n\n      const scaleY = dest.height / dest.width\n\n      context.scale(1, scaleY)\n      context.beginPath()\n      context.globalAlpha = opacity\n      context.arc(\n        dest.center.x,\n        dest.center.y / scaleY,\n        Math.abs(dest.width / 2),\n        0,\n        2 * Math.PI,\n        false\n      )\n      context.strokeStyle = 'white'\n      context.lineWidth = 1.5 * scale\n      context.stroke()\n      context.closePath()\n\n      context.restore()\n    }\n\n    // eslint-disable-next-line max-params\n    function drawImage(\n      srcLeft: number,\n      srcTop: number,\n      srcWidth: number,\n      srcHeight: number,\n      destLeft: number,\n      destTop: number,\n      destWidth: number,\n      destHeight: number\n    ) {\n      context.save()\n      context.drawImage(\n        image,\n        srcLeft,\n        srcTop,\n        srcWidth,\n        srcHeight,\n        destLeft,\n        destTop,\n        destWidth,\n        destHeight\n      )\n      context.restore()\n    }\n\n    function drawHole() {\n      const src = imageRect.multiply(hotspot)\n\n      const dest = imageRect.shrink(margin).multiply(hotspot)\n\n      drawImage(\n        src.left,\n        src.top,\n        src.width,\n        src.height,\n        dest.left,\n        dest.top,\n        dest.width,\n        dest.height\n      )\n    }\n\n    function drawBackdrop() {\n      const src = imageRect.cropRelative(crop)\n\n      const dest = imageRect.shrink(margin).cropRelative(crop)\n\n      context.save()\n      drawImage(\n        src.left,\n        src.top,\n        src.width,\n        src.height,\n        dest.left,\n        dest.top,\n        dest.width,\n        dest.height\n      )\n      context.globalAlpha = 0.5\n      context.fillStyle = 'black'\n      context.fillRect(dest.left, dest.top, dest.width, dest.height)\n      context.restore()\n    }\n\n    function drawDragHandle(radians: number) {\n      context.save()\n\n      const radius = HOTSPOT_HANDLE_SIZE * scale\n      const dest = imageRect.shrink(margin).multiply(hotspot)\n\n      const point = utils2d.getPointAtCircumference(radians, dest)\n\n      context.beginPath()\n      context.arc(point.x, point.y, radius, 0, 2 * Math.PI, false)\n      context.fillStyle = 'rgb(255,255,255)'\n      context.fill()\n      context.closePath()\n      context.restore()\n\n      context.beginPath()\n      context.arc(point.x, point.y, radius, 0, 2 * Math.PI, false)\n      context.strokeStyle = 'rgb(0, 0, 0)'\n      context.lineWidth = 0.5 * scale\n      context.stroke()\n      context.closePath()\n    }\n  }\n\n  getActualSize() {\n    const node = this.canvas?.domNode\n    return node ? {height: node.clientHeight, width: node.clientWidth} : {height: 0, width: 0}\n  }\n\n  getDragHandleCoords() {\n    const bbox = this.getHotspotRect()\n    const point = utils2d.getPointAtCircumference(Math.PI * 1.25, bbox)\n    return {\n      x: point.x,\n      y: point.y,\n      radius: 8 * this.getScale(),\n    }\n  }\n\n  debug(context: CanvasRenderingContext2D) {\n    context.save()\n\n    const {image} = this.props\n\n    const bbox = this.getHotspotRect()\n    const scale = this.getScale()\n    const margin = MARGIN_PX * scale\n\n    // IE 10 doesn't support context.setLineDash\n    if (context.setLineDash) {\n      context.setLineDash([2 * scale, 2 * scale])\n    }\n    context.lineWidth = 0.5 * scale\n\n    context.strokeStyle = 'rgba(200, 200, 200, 0.5)'\n\n    // --- center line x\n    vline(bbox.center.x)\n    // --- center line y\n    hline(bbox.center.y)\n\n    context.strokeStyle = 'rgba(150, 150, 150, 0.5)'\n    // --- line top\n    hline(bbox.top)\n\n    // --- line bottom\n    hline(bbox.bottom)\n\n    // --- line left\n    vline(bbox.left)\n    // --- line right\n    vline(bbox.right)\n\n    context.restore()\n\n    function vline(x: number) {\n      line(x, margin, x, image.height - margin)\n    }\n\n    function hline(y: number) {\n      line(margin, y, image.width - margin, y)\n    }\n\n    function line(x1: number, y1: number, x2: number, y2: number) {\n      context.beginPath()\n      context.moveTo(x1, y1)\n      context.lineTo(x2, y2)\n      context.stroke()\n      context.closePath()\n    }\n  }\n\n  paintBackground(context: CanvasRenderingContext2D) {\n    const {image} = this.props\n    const inner = new Rect().setSize(image.width, image.height).shrink(MARGIN_PX * this.getScale())\n\n    context.save()\n    context.fillStyle = 'white'\n    context.clearRect(0, 0, image.width, image.height)\n\n    context.globalAlpha = 0.3\n    //context.globalCompositeOperation = 'lighten';\n\n    context.drawImage(image, inner.left, inner.top, inner.width, inner.height)\n    context.restore()\n  }\n\n  paint(context: CanvasRenderingContext2D) {\n    const {readOnly} = this.props\n    context.save()\n\n    const pxratio = getDevicePixelRatio()\n    context.scale(pxratio, pxratio)\n\n    const opacity = !readOnly && this.state.mousePosition ? 0.8 : 0.2\n\n    this.paintBackground(context)\n    //return context.restore();\n    this.paintHotspot(context, opacity)\n    //this.paintDragHandle(context);\n    this.debug(context)\n    this.paintCropBorder(context)\n\n    if (!readOnly) {\n      this.highlightCropHandles(context, opacity)\n    }\n\n    if (this.state.mousePosition) {\n      // this.paintMousePosition(context)\n    }\n\n    context.restore()\n  }\n\n  paintMousePosition(context: CanvasRenderingContext2D) {\n    if (!this.state.mousePosition) {\n      return\n    }\n\n    const {x, y} = this.state.mousePosition\n    context.beginPath()\n    context.arc(x, y, 14 * this.getScale(), 0, 2 * Math.PI, false)\n    context.fillStyle = 'lightblue'\n    context.fill()\n    context.restore()\n  }\n\n  paintCropBorder(context: CanvasRenderingContext2D) {\n    const cropRect = this.getCropRect()\n    context.save()\n    context.beginPath()\n    context.fillStyle = 'rgba(66, 66, 66, 0.9)'\n    context.lineWidth = 1\n    context.rect(cropRect.left, cropRect.top, cropRect.width, cropRect.height)\n    context.stroke()\n    context.closePath()\n    context.restore()\n  }\n\n  highlightCropHandles(context: CanvasRenderingContext2D, opacity: number) {\n    context.save()\n    const cropHandles = this.getCropHandles()\n\n    //context.globalCompositeOperation = \"difference\";\n\n    cropHandleKeys.forEach((handle) => {\n      context.fillStyle =\n        this.state.cropping === handle\n          ? `rgba(202, 54, 53, ${opacity})`\n          : `rgba(230, 230, 230, ${opacity + 0.4})`\n      const {left, top, height, width} = cropHandles[handle]\n      context.fillRect(left, top, width, height)\n      context.beginPath()\n      context.fillStyle = `rgba(66, 66, 66, ${opacity})`\n      context.rect(left, top, width, height)\n      context.closePath()\n      context.stroke()\n    })\n    context.restore()\n  }\n\n  getScale() {\n    const actualSize = this.getActualSize()\n    return this.props.image.width / actualSize.width\n  }\n\n  getCursor() {\n    const {mousePosition} = this.state\n    const {readOnly} = this.props\n    if (!mousePosition || readOnly) {\n      return 'auto'\n    }\n\n    const activeCropArea = this.state.cropping || this.getActiveCropHandleFor(mousePosition)\n    if (activeCropArea) {\n      return getCropCursorForHandle(activeCropArea) || 'auto'\n    }\n\n    const mouseOverDragHandle = utils2d.isPointInCircle(mousePosition, this.getDragHandleCoords())\n\n    if (this.state.resizing || mouseOverDragHandle) {\n      return 'move'\n    }\n\n    if (this.state.moving || this.state.cropMoving) {\n      return `url(${cursors.CLOSE_HAND}), move`\n    }\n\n    const mouseoverHotspot = utils2d.isPointInEllipse(mousePosition, this.getHotspotRect())\n    const mouseoverCropRect = utils2d.isPointInRect(mousePosition, this.getCropRect())\n    if (mouseoverHotspot || mouseoverCropRect) {\n      return `url(${cursors.OPEN_HAND}), move`\n    }\n\n    return 'auto'\n  }\n\n  componentDidMount() {\n    this.draw()\n  }\n\n  componentDidUpdate() {\n    this.draw()\n  }\n\n  draw() {\n    if (!this.canvas) {\n      return\n    }\n\n    const domNode = this.canvas.domNode\n    const context = domNode.getContext('2d')\n    if (!context) {\n      return\n    }\n\n    this.paint(context)\n    const currentCursor = domNode.style.cursor\n    const newCursor = this.getCursor()\n    if (currentCursor !== newCursor) {\n      domNode.style.cursor = newCursor\n    }\n  }\n\n  handleDragStart = ({x, y}: Coordinate) => {\n    const mousePosition = {x: x * this.getScale(), y: y * this.getScale()}\n\n    const inHotspot = utils2d.isPointInEllipse(mousePosition, this.getHotspotRect())\n\n    const inDragHandle = utils2d.isPointInCircle(mousePosition, this.getDragHandleCoords())\n\n    const activeCropHandle = this.getActiveCropHandleFor(mousePosition)\n\n    const inCropRect = utils2d.isPointInRect(mousePosition, this.getCropRect())\n\n    if (activeCropHandle) {\n      this.setState({cropping: activeCropHandle})\n    } else if (inDragHandle) {\n      this.setState({resizing: true})\n    } else if (inHotspot) {\n      this.setState({moving: true})\n    } else if (inCropRect) {\n      this.setState({cropMoving: true})\n    }\n  }\n\n  handleDrag = (pos: Coordinate) => {\n    if (this.state.cropping) {\n      this.emitCrop(this.state.cropping, pos)\n    } else if (this.state.cropMoving) {\n      this.emitCropMove(pos)\n    } else if (this.state.moving) {\n      this.emitMove(pos)\n    } else if (this.state.resizing) {\n      this.emitResize(pos)\n    }\n  }\n\n  handleDragEnd = () => {\n    const {onChange, onChangeEnd} = this.props\n    this.setState({moving: false, resizing: false, cropping: false, cropMoving: false})\n    const {hotspot, crop: rawCrop} = this.getClampedValue()\n\n    const crop = normalizeRect(rawCrop)\n\n    const finalValue = {\n      crop: {\n        top: crop.top,\n        bottom: 1 - crop.bottom,\n        left: crop.left,\n        right: 1 - crop.right,\n      },\n      hotspot: {\n        x: hotspot.center.x,\n        y: hotspot.center.y,\n        height: Math.abs(hotspot.height),\n        width: Math.abs(hotspot.width),\n      },\n    }\n    onChange(finalValue)\n    if (onChangeEnd) {\n      onChangeEnd(finalValue)\n    }\n  }\n\n  handleMouseOut = () => {\n    this.setState({mousePosition: null})\n  }\n\n  handleMouseMove = (event: MouseEvent<HTMLCanvasElement>) => {\n    const clientRect = event.currentTarget.getBoundingClientRect()\n    this.setState({\n      mousePosition: {\n        x: (event.clientX - clientRect.left) * this.getScale(),\n        y: (event.clientY - clientRect.top) * this.getScale(),\n      },\n    })\n  }\n\n  setCanvas = (node: {domNode: HTMLCanvasElement}) => {\n    this.canvas = node\n  }\n\n  render() {\n    const {image, readOnly} = this.props\n    const ratio = getDevicePixelRatio()\n    return (\n      <RootContainer>\n        <CanvasContainer\n          readOnly={readOnly}\n          ref={this.setCanvas}\n          onDrag={this.handleDrag}\n          onDragStart={this.handleDragStart}\n          onDragEnd={this.handleDragEnd}\n          onMouseMove={this.handleMouseMove}\n          onMouseOut={this.handleMouseOut}\n          height={image.height * ratio}\n          width={image.width * ratio}\n        />\n      </RootContainer>\n    )\n  }\n}\n\nfunction applyHotspotMoveBy(value: Partial<CropAndHotspot>, delta: Coordinate): {hotspot: Hotspot} {\n  const currentHotspot = (value && value.hotspot) || DEFAULT_HOTSPOT\n\n  return {\n    ...value,\n    hotspot: {\n      ...currentHotspot,\n      x: currentHotspot.x + delta.x,\n      y: currentHotspot.y + delta.y,\n    },\n  }\n}\n\nfunction applyHotspotResizeBy(\n  value: Partial<CropAndHotspot>,\n  delta: Dimensions\n): {hotspot: Hotspot} {\n  const currentHotspot = (value && value.hotspot) || DEFAULT_HOTSPOT\n  return {\n    ...value,\n    hotspot: {\n      ...currentHotspot,\n      height: currentHotspot.height + delta.height,\n      width: currentHotspot.width + delta.width,\n    },\n  }\n}\n\nfunction applyCropMoveBy(value: Partial<CropAndHotspot>, delta: Offsets): {crop: Crop} {\n  const currentCrop = (value && value.crop) || DEFAULT_CROP\n  return {\n    ...value,\n    crop: {\n      left: currentCrop.left + (delta.left || 0),\n      right: currentCrop.right + (delta.right || 0),\n      top: currentCrop.top + (delta.top || 0),\n      bottom: currentCrop.bottom + (delta.bottom || 0),\n    },\n  }\n}\n","/* eslint-disable @typescript-eslint/no-shadow */\nimport React, {useCallback, useEffect, useState} from 'react'\n\nexport interface ResizeProps {\n  image: HTMLImageElement\n  maxHeight: number\n  maxWidth: number\n  children: (canvas: HTMLCanvasElement) => React.ReactNode\n}\n\nexport function Resize(props: ResizeProps): any {\n  const {image, maxHeight, maxWidth, children} = props\n\n  const [canvas] = useState<HTMLCanvasElement>(() => {\n    const canvasElement = document.createElement('canvas')\n    canvasElement.style.display = 'none'\n    return canvasElement\n  })\n  useEffect(() => {\n    document.body.appendChild(canvas)\n    return () => {\n      document.body.removeChild(canvas)\n    }\n  }, [canvas])\n\n  const resize = useCallback(\n    (image: HTMLImageElement, maxHeight: number, maxWidth: number) => {\n      const ratio = image.width / image.height\n      const width = Math.min(image.width, maxWidth)\n      const height = Math.min(image.height, maxHeight)\n\n      const landscape = image.width > image.height\n      const targetWidth = landscape ? width : height * ratio\n      const targetHeight = landscape ? width / ratio : height\n\n      canvas.width = targetWidth\n      canvas.height = targetHeight\n\n      const ctx = canvas.getContext('2d')\n      if (ctx) {\n        ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, targetWidth, targetHeight)\n      }\n\n      return canvas\n    },\n    [canvas]\n  )\n\n  return children(resize(image, maxHeight, maxWidth))\n}\n","import React from 'react'\nimport {ImageLoader} from './ImageLoader'\nimport {ToolCanvas} from './ToolCanvas'\nimport {Resize} from './Resize'\nimport type {ToolCanvasProps} from './types'\n\nexport interface ImageToolProps extends Omit<ToolCanvasProps, 'image'> {\n  image?: HTMLCanvasElement\n  src: string\n}\n\nexport function ImageTool(props: ImageToolProps) {\n  return (\n    <ImageLoader src={props.src}>\n      {({isLoading, image, error}) => {\n        if (isLoading) {\n          return <div>Loading...</div>\n        }\n        if (error) {\n          return <div>{error.message}</div>\n        }\n        if (image) {\n          return (\n            <Resize image={image} maxHeight={ImageTool.maxHeight} maxWidth={ImageTool.maxWidth}>\n              {(canvas) => <ToolCanvas image={canvas} {...props} />}\n            </Resize>\n          )\n        }\n        return null\n      }}\n    </ImageLoader>\n  )\n}\n\nImageTool.maxHeight = 500\nImageTool.maxWidth = 1000\n","import type {CSSProperties} from 'react'\nimport {DEFAULT_HOTSPOT, DEFAULT_CROP} from './constants'\nimport {Crop, Hotspot, CropMethod, CropAndHotspot} from './types'\n\ninterface Options {\n  image?: {aspectRatio: number} | {height: number; width: number}\n  container?: {aspectRatio: number} | {height: number; width: number}\n  hotspot?: Hotspot\n  crop?: Crop\n  align?: CropAlignment\n}\n\ninterface CSSBox {\n  width: number\n  height: number\n  left: number\n  top: number\n}\n\ninterface CropAlignment {\n  x: 'left' | 'right' | 'center'\n  y: 'top' | 'bottom' | 'center'\n}\n\ninterface HotspotCropStyleResult {\n  crop: CSSBox\n  image: CSSBox\n  method: CropMethod\n}\n\nexport interface CalculatedStyles {\n  container: CSSProperties\n  padding: CSSProperties\n  crop: CSSProperties\n  image: CSSProperties\n  debug: {\n    result: HotspotCropStyleResult\n  }\n}\n\nexport function calculateStyles(options: Options = {}): CalculatedStyles {\n  const imageAspect = readAspectRatio(options.image) || 1\n\n  const hotspot = options.hotspot || DEFAULT_HOTSPOT\n  const crop = options.crop || DEFAULT_CROP\n  const containerAspect = readAspectRatio(options.container) || imageAspect * readCropAspect(crop)\n\n  const align = options.align || {x: 'center', y: 'center'}\n\n  const result = calculateHotSpotCrop(\n    imageAspect,\n    {hotspot, crop},\n    {aspect: containerAspect, align}\n  )\n\n  const containerHeight = styleFormat(round(100 / containerAspect))\n\n  return {\n    debug: {\n      result,\n    },\n    container: {\n      //outline: '1px solid cyan',\n      overflow: 'hidden',\n      position: 'relative',\n      width: '100%',\n      height: containerHeight,\n    },\n    padding: {\n      marginTop: containerHeight,\n    },\n    crop: {\n      position: 'absolute',\n      overflow: 'hidden',\n      height: toStylePercentage(result.crop.height),\n      width: toStylePercentage(result.crop.width),\n      top: toStylePercentage(result.crop.top),\n      left: toStylePercentage(result.crop.left),\n    },\n    image: {\n      position: 'absolute',\n      height: toStylePercentage(result.image.height),\n      width: toStylePercentage(result.image.width),\n      top: toStylePercentage(result.image.top),\n      left: toStylePercentage(result.image.left),\n    },\n  }\n}\n\nfunction readAspectRatio(opts: Options['image']): number | null {\n  if (!opts) {\n    return null\n  }\n\n  if ('aspectRatio' in opts) {\n    return opts.aspectRatio\n  }\n\n  if ('height' in opts || 'width' in opts) {\n    if (typeof opts.height !== 'number' && typeof opts.width !== 'number') {\n      throw new Error(`Height and width must be numbers, got ${JSON.stringify(opts)}`)\n    }\n\n    return opts.width / opts.height\n  }\n\n  return null\n}\n\nfunction round(num: number, decimals = 2): number {\n  const multiplier = Math.pow(10, decimals)\n  return Math.round(num * multiplier) / multiplier\n}\n\nfunction calculateHotSpotCrop(\n  sourceAspect: number,\n  descriptor: CropAndHotspot,\n  spec: {aspect: number; align: CropAlignment}\n): HotspotCropStyleResult {\n  const crop = descriptor.crop\n  const viewportAspect = spec.aspect\n  const alignment = spec.align\n\n  // The rational aspect of the cropped image\n  const netWidth = 1.0 - crop.left - crop.right\n  const netHeight = 1.0 - crop.top - crop.bottom\n\n  // Places the image inside the crop box\n  const outImg = {\n    top: -crop.top / netHeight,\n    left: -crop.left / netWidth,\n    width: 1 / netWidth,\n    height: 1 / netHeight,\n  }\n\n  // The rational aspect is the aspect ration of the crop in ratios of the image size meaning the image\n  // is always considered having the size 1.0*1.0\n  const cropRationalAspect = netWidth / netHeight\n\n  // cropAspect is the real aspect ratio of the crop box in pixel-space\n  const cropAspect = cropRationalAspect * sourceAspect\n\n  // Now we transform the hotspot to be expressed in ratios of the cropped area, not the\n  // full image:\n  const hotspot = {\n    x: (descriptor.hotspot.x - crop.left) / netWidth,\n    y: (descriptor.hotspot.y - crop.top) / netHeight,\n    height: descriptor.hotspot.height / netHeight,\n    width: descriptor.hotspot.width / netWidth,\n  }\n\n  // Lets calculate the maximum scale the image may be presented at without cropping the hotspot. A scale of\n  // 1.0 means the cropped image exactly fill the width of the viewport.\n\n  // The scale at which the hotspot would fill the viewport exactly in the X direction\n  const maxHotspotXScale = 1.0 / hotspot.width\n  // The scale at which the hotspot would fill the veiwport exactly in the Y direction\n  const maxHotspotYScale = ((1.0 / hotspot.height) * cropAspect) / viewportAspect\n  // This is the largest scale the image can have while still not cropping the hotspot:\n  const maxScale = Math.min(maxHotspotXScale, maxHotspotYScale)\n\n  // Now lets find the minimum scale we can have while maintaining full bleed (no letterboxing)\n  let minFullBleedScale\n  const cropIsTaller = cropAspect <= viewportAspect\n  if (cropIsTaller) {\n    // Crop is taller than viewport\n    minFullBleedScale = 1.0 // By definition 1.0 fills the width of the viewport exactly with the viewport cutting away from the height of the cropbox\n  } else {\n    // Image is wider than viewport\n    minFullBleedScale = cropAspect / viewportAspect // At this scale the viewport is filled exactly in the height while cutting away from the sides\n  }\n\n  let method: CropMethod\n  let outCrop: CSSBox\n\n  // Do we have to letterbox this image in order to leave the hotspot area uncropped?\n  if (minFullBleedScale > maxScale) {\n    // Yes :-( There is no way to protect the hot spot and still have full bleed, so we are letterboxing it\n    method = 'letterbox'\n    let letterboxScale\n    const diff = minFullBleedScale - maxScale\n\n    // Determine a scale where the image fills one dimension of the container\n    if (cropIsTaller) {\n      letterboxScale = 1.0 - diff\n    } else {\n      letterboxScale = maxScale\n    }\n\n    outCrop = {\n      width: letterboxScale,\n      height: (letterboxScale / cropAspect) * viewportAspect,\n\n      // Gets overwritten further down\n      left: 0,\n      top: 0,\n    }\n\n    const hotspotLeft = hotspot.x * outCrop.width - (hotspot.width * outCrop.width) / 2\n    switch (alignment.x) {\n      case 'left':\n        outCrop.left = cropIsTaller ? 0 : -hotspotLeft\n        break\n      case 'right':\n        // todo: broken atm\n        outCrop.left = cropIsTaller ? 1 - outCrop.width : hotspotLeft\n        break\n      case 'center':\n        outCrop.left = cropIsTaller ? (1 - outCrop.width) / 2 : -hotspotLeft\n        break\n      default:\n        throw new Error(\n          `Invalid x alignment: '${alignment.x}'. Must be either 'left', 'right' or 'center'`\n        )\n    }\n    const hotspotTop = hotspot.y * outCrop.height - (hotspot.height * outCrop.height) / 2\n    switch (alignment.y) {\n      case 'top':\n        outCrop.top = cropIsTaller ? -hotspotTop : 0\n        break\n      case 'bottom':\n        // todo: broken atm\n        outCrop.top = hotspotTop\n        break\n      case 'center':\n        outCrop.top = cropIsTaller ? -hotspotTop : (1 - outCrop.height) / 2\n        break\n      default:\n        throw new Error(\n          `Invalid y alignment: '${alignment.y}'. Must be either 'top', 'bottom' or 'center'`\n        )\n    }\n  } else if (cropIsTaller) {\n    // TODO: Clamp hotspot offset to avoid moving image off canvas\n    method = 'full_width'\n\n    let top = (-hotspot.y / cropAspect) * viewportAspect + 0.5\n    const height = (minFullBleedScale / cropAspect) * viewportAspect\n    // Clamp top so that we will not move the image off of the viewport\n    if (top > 0) {\n      top = 0\n    } else if (-top > height - 1.0) {\n      top = -(height - 1.0)\n    }\n\n    outCrop = {\n      width: minFullBleedScale,\n      height,\n      left: 0,\n      // Place the Y center of the hotspot near the center of the viewport\n      top,\n    }\n  } else {\n    // crop is wider\n    method = 'full_height'\n\n    const width = minFullBleedScale\n    let left = 0.5 - hotspot.x * minFullBleedScale\n    if (left > 0) {\n      left = 0\n    } else if (-left > width - 1.0) {\n      left = -(width - 1.0)\n    }\n    // Clamp left so that we will not move the image off of the viewport.\n    outCrop = {\n      width,\n      height: (minFullBleedScale / cropAspect) * viewportAspect,\n      top: 0,\n      // Place the X center of the hotspot at the center of the viewport\n      left,\n    }\n  }\n\n  return {\n    method,\n    crop: outCrop,\n    image: outImg,\n  }\n}\n\nfunction readCropAspect(crop: Crop) {\n  const height = 1 - crop.top - crop.bottom\n  const width = 1 - crop.left - crop.right\n  return width / height\n}\n\nfunction styleFormat(num: number) {\n  return num === 0 ? 0 : `${num}%`\n}\n\nfunction toStylePercentage(num: number) {\n  return styleFormat(round(num * 100))\n}\n","import styled from 'styled-components'\n\nexport const HotspotImageContainer = styled.div`\n  position: relative;\n  width: 100%;\n`\n","import React, {\n  memo,\n  startTransition,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react'\nimport Debug from 'debug'\nimport {calculateStyles} from './calculateStyles'\nimport {DEFAULT_HOTSPOT, DEFAULT_CROP} from './constants'\nimport {HotspotImageContainer} from './HotspotImage.styles'\nimport type {Crop, Hotspot} from './types'\n\nconst debug = Debug('sanity-imagetool')\n\nfunction getCropAspect(crop: Crop, srcAspect: number) {\n  const origHeight = 1 / srcAspect\n  const origWidth = srcAspect * origHeight\n  const cropWidth = origWidth - (crop.left + crop.right) * origWidth\n  const cropHeight = origHeight - (crop.top + crop.bottom) * origHeight\n  return cropWidth / cropHeight\n}\n\nexport interface HotspotImageProps {\n  src: string\n  srcAspectRatio: number\n  srcSet?: string\n  hotspot?: Hotspot\n  crop?: Crop\n  aspectRatio?: number | 'auto' | 'none'\n  alignX?: 'left' | 'center' | 'right'\n  alignY?: 'top' | 'center' | 'bottom'\n  className?: string\n  style?: React.CSSProperties\n  alt?: string\n  onError?: (event: React.SyntheticEvent<HTMLImageElement, Event>) => void\n  onLoad?: () => void\n}\n\nexport const HotspotImage = memo(function HotspotImage(props: HotspotImageProps) {\n  const {\n    alignX = 'center',\n    alignY = 'center',\n    alt,\n    aspectRatio = 'none',\n    className = '',\n    crop = DEFAULT_CROP,\n    hotspot = DEFAULT_HOTSPOT,\n    onError,\n    onLoad,\n    src,\n    srcAspectRatio,\n    srcSet,\n    style,\n  } = props\n  const [containerAspect, setContainerAspect] = useState<number | null>(null)\n  const containerElementRef = useRef<HTMLDivElement | null>(null)\n  const imageElementRef = useRef<HTMLImageElement | null>(null)\n\n  const updateContainerAspect = useCallback(() => {\n    if (!containerElementRef.current) return\n    if (aspectRatio === 'auto') {\n      const parentNode = containerElementRef.current.parentNode as HTMLElement\n      startTransition(() => setContainerAspect(parentNode.offsetWidth / parentNode.offsetHeight))\n    } else {\n      setContainerAspect(null)\n    }\n  }, [aspectRatio])\n\n  useEffect(() => {\n    const imageElement = imageElementRef.current\n\n    // Fixes issues that may happen if the component is rendered on server and mounted after the image has finished loading\n    // In these situations, neither the onLoad or the onError events will be called.\n    // Derived from http://imagesloaded.desandro.com/\n    const alreadyLoaded =\n      imageElement &&\n      imageElement.src &&\n      imageElement.complete &&\n      imageElement.naturalWidth !== undefined\n\n    if (alreadyLoaded) {\n      debug(\"Image '%s' already loaded, refreshing (from cache) to trigger onLoad / onError\", src)\n      // eslint-disable-next-line no-self-assign\n      imageElement.src = imageElement.src\n    }\n\n    updateContainerAspect()\n\n    window.addEventListener('resize', updateContainerAspect)\n\n    return () => {\n      window.removeEventListener('resize', updateContainerAspect)\n    }\n  }, [src, updateContainerAspect])\n\n  const targetAspect = useMemo(() => {\n    if (aspectRatio === 'none') {\n      return crop ? getCropAspect(crop, srcAspectRatio) : srcAspectRatio\n    }\n\n    if (aspectRatio === 'auto') {\n      return containerAspect\n    }\n\n    return aspectRatio || null\n  }, [aspectRatio, containerAspect, crop, srcAspectRatio])\n\n  const targetStyles = useMemo(\n    () =>\n      calculateStyles({\n        container: {aspectRatio: targetAspect || srcAspectRatio},\n        image: {aspectRatio: srcAspectRatio},\n        hotspot,\n        crop,\n        align: {\n          x: alignX,\n          y: alignY,\n        },\n      }),\n    [alignX, alignY, crop, hotspot, srcAspectRatio, targetAspect]\n  )\n\n  return (\n    <HotspotImageContainer className={`${className}`} style={style} ref={containerElementRef}>\n      <div style={targetStyles.container}>\n        <div style={targetStyles.padding} />\n        <div style={targetStyles.crop}>\n          <img\n            ref={imageElementRef}\n            src={src}\n            alt={alt}\n            srcSet={srcSet}\n            onLoad={onLoad}\n            onError={onError}\n            style={targetStyles.image}\n          />\n        </div>\n      </div>\n    </HotspotImageContainer>\n  )\n})\n","import {Observable} from 'rxjs'\nimport {useEffect, useState} from 'react'\n\n// http://probablyprogramming.com/2009/03/15/the-tiniest-gif-ever\nconst PROBABLY_THE_TINIEST_GIF_EVER = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='\n\nfunction isBlob(src: string) {\n  return src.startsWith('blob:')\n}\n\nexport function loadImage(src: string): Observable<HTMLImageElement> {\n  return new Observable((subscriber) => {\n    const image = document.createElement('img')\n\n    let completed = false\n    const onload = () => {\n      completed = true\n      subscriber.next(image)\n      subscriber.complete()\n    }\n\n    const onerror = () => {\n      completed = true\n      subscriber.error(new Error(`Could not load image from ${isBlob(src) ? 'blob' : src}`))\n    }\n\n    image.onload = onload\n    image.onerror = onerror\n    image.src = src\n\n    return () => {\n      image.onload = null\n      image.onerror = null\n\n      if (!completed) {\n        // if we unsubscribe before it's loaded this will cancel the image loading\n        image.src = PROBABLY_THE_TINIEST_GIF_EVER\n      }\n    }\n  })\n}\n\ntype ImageLoadState = {\n  isLoading: boolean\n  image?: HTMLImageElement\n  error?: Error\n}\n\nconst INITIAL_STATE = {isLoading: true}\n\nexport function useLoadImage(url: string): ImageLoadState {\n  const [state, setState] = useState<ImageLoadState>(INITIAL_STATE)\n\n  useEffect(() => {\n    setState(INITIAL_STATE)\n    const subscription = loadImage(url)\n      // .pipe(delay(2000))\n      .subscribe({\n        error: (err) => {\n          setState({isLoading: false, error: err})\n        },\n        next: (image) => {\n          setState({image, isLoading: false})\n        },\n      })\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [url])\n\n  return state\n}\n","import React, {useCallback, useEffect, useState} from 'react'\nimport type {Image, ImageSchemaType} from '@sanity/types'\nimport {Box, Card, Flex, Text, Grid, Heading} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {FormField} from '../../../components/formField'\nimport {set} from '../../../patch'\nimport {RatioBox} from '../common/RatioBox'\nimport type {ObjectInputProps} from '../../../types'\nimport {useDidUpdate} from '../../../hooks/useDidUpdate'\nimport {ChangeIndicator} from '../../../../changeIndicators'\nimport {EMPTY_ARRAY} from '../../../../util'\nimport {ImageTool, HotspotImage, DEFAULT_CROP, DEFAULT_HOTSPOT} from './imagetool'\nimport {useLoadImage} from './useLoadImage'\n\nexport interface ImageToolInputProps\n  extends Omit<ObjectInputProps<Image, ImageSchemaType>, 'markers' | 'renderDefault'> {\n  imageUrl: string\n}\n\nconst HOTSPOT_PATH = ['hotspot']\n\nconst PREVIEW_ASPECT_RATIOS = [\n  ['3:4', 3 / 4],\n  ['Square', 1 / 1],\n  ['16:9', 16 / 9],\n  ['Panorama', 4 / 1],\n] as const\n\nconst DEFAULT_VALUE: Partial<Image> = {\n  crop: DEFAULT_CROP,\n  hotspot: DEFAULT_HOTSPOT,\n}\n\nconst Placeholder = styled.div`\n  min-height: 6em;\n`\n\nfunction LoadStatus(props: {children: React.ReactNode}) {\n  return (\n    <Flex align=\"center\" justify=\"center\" padding={4} style={{overflowWrap: 'break-word'}}>\n      {props.children}\n    </Flex>\n  )\n}\n\nexport function ImageToolInput(props: ImageToolInputProps) {\n  const {\n    imageUrl,\n    value,\n    changed,\n    level,\n    path,\n    focusPath = EMPTY_ARRAY,\n    presence,\n    onChange,\n    schemaType,\n    onPathFocus,\n    readOnly,\n    elementProps,\n  } = props\n\n  const [localValue, setLocalValue] = useState(value || DEFAULT_VALUE)\n\n  const {image, isLoading: isImageLoading, error: imageLoadError} = useLoadImage(imageUrl)\n\n  const handleFocus = useCallback(() => {\n    onPathFocus(HOTSPOT_PATH)\n  }, [onPathFocus])\n\n  useEffect(() => {\n    setLocalValue(value || DEFAULT_VALUE)\n  }, [value])\n\n  const hasFocus = focusPath[0] === 'hotspot'\n\n  useDidUpdate(hasFocus, (hadFocus) => {\n    if (!hadFocus && hasFocus) {\n      elementProps.ref.current?.focus()\n    }\n  })\n\n  const handleChangeEnd = useCallback(\n    (finalValue: any) => {\n      if (readOnly) {\n        return\n      }\n      // For backwards compatibility, where hotspot/crop might not have a named type yet\n      const cropField = schemaType.fields.find(\n        (field) => field.name === 'crop' && field.type.name !== 'object'\n      )\n\n      const hotspotField = schemaType.fields.find(\n        (field) => field.type.name !== 'object' && field.name === 'hotspot'\n      )\n\n      // Note: when either hotspot or crop change we fill in the default if the other is missing\n      // (we can't have one without the other)\n      const crop = cropField\n        ? {_type: cropField.type.name, ...(finalValue.crop || DEFAULT_CROP)}\n        : finalValue.crop\n\n      const hotspot = hotspotField\n        ? {_type: hotspotField.type.name, ...(finalValue.hotspot || DEFAULT_HOTSPOT)}\n        : finalValue.hotspot\n\n      onChange([set(crop, ['crop']), set(hotspot, ['hotspot'])])\n    },\n    [onChange, readOnly, schemaType.fields]\n  )\n\n  return (\n    <FormField\n      title=\"Hotspot &amp; crop\"\n      level={level}\n      description=\"Adjust the rectangle to crop image. Adjust the circle to specify the area that should always be visible.\"\n      __unstable_presence={presence}\n    >\n      <div>\n        <Card\n          __unstable_checkered\n          __unstable_focusRing\n          tabIndex={0}\n          ref={elementProps.ref}\n          onFocus={handleFocus}\n        >\n          <ChangeIndicator\n            path={path.concat(HOTSPOT_PATH)}\n            hasFocus={focusPath[0] === 'hotspot'}\n            isChanged={changed}\n          >\n            <RatioBox ratio={3 / 2}>\n              {(isImageLoading || imageLoadError) && (\n                <LoadStatus>\n                  {imageLoadError ? (\n                    <Card padding={4} radius={2} tone=\"critical\" border>\n                      <Text>Error: {imageLoadError.message}</Text>\n                    </Card>\n                  ) : (\n                    <Text muted>Loading image… </Text>\n                  )}\n                </LoadStatus>\n              )}\n\n              {!isImageLoading && image && (\n                <Box margin={1}>\n                  <ImageTool\n                    value={localValue}\n                    src={image.src}\n                    readOnly={Boolean(readOnly)}\n                    onChangeEnd={handleChangeEnd}\n                    onChange={setLocalValue}\n                  />\n                </Box>\n              )}\n            </RatioBox>\n          </ChangeIndicator>\n        </Card>\n        <Box marginTop={3}>\n          <Grid columns={PREVIEW_ASPECT_RATIOS.length} gap={1}>\n            {PREVIEW_ASPECT_RATIOS.map(([title, ratio]) => (\n              <div key={ratio}>\n                <Heading as=\"h4\" size={0}>\n                  {title}\n                </Heading>\n                <Box marginTop={2}>\n                  <RatioBox ratio={ratio}>\n                    <Card __unstable_checkered>\n                      {!isImageLoading && image ? (\n                        <HotspotImage\n                          aspectRatio={ratio}\n                          src={image.src}\n                          srcAspectRatio={image.width / image.height}\n                          hotspot={localValue.hotspot || DEFAULT_HOTSPOT}\n                          crop={localValue.crop || DEFAULT_CROP}\n                        />\n                      ) : (\n                        <Placeholder />\n                      )}\n                    </Card>\n                  </RatioBox>\n                </Box>\n              </div>\n            ))}\n          </Grid>\n        </Box>\n      </div>\n    </FormField>\n  )\n}\n","import React, {MouseEventHandler, ReactNode} from 'react'\nimport {EllipsisVerticalIcon, CropIcon} from '@sanity/icons'\nimport {Button, Inline, Menu, MenuButton, MenuButtonProps} from '@sanity/ui'\nimport styled from 'styled-components'\n\nconst POPOVER_PROPS: MenuButtonProps['popover'] = {portal: true, constrainSize: true}\n\nexport const MenuActionsWrapper = styled(Inline)`\n  position: absolute;\n  top: 0;\n  right: 0;\n`\n\ninterface ImageActionsMenuProps {\n  children: ReactNode\n  onEdit: MouseEventHandler<HTMLButtonElement>\n  setHotspotButtonElement: (element: HTMLButtonElement | null) => void\n  setMenuButtonElement: (element: HTMLButtonElement | null) => void\n  showEdit: boolean\n}\n\nexport function ImageActionsMenu(props: ImageActionsMenuProps) {\n  const {onEdit, children, showEdit, setHotspotButtonElement, setMenuButtonElement} = props\n\n  return (\n    <MenuActionsWrapper data-buttons space={1} padding={2}>\n      {showEdit && (\n        <Button\n          aria-label=\"Open image edit dialog\"\n          data-testid=\"options-menu-edit-details\"\n          icon={CropIcon}\n          mode=\"ghost\"\n          onClick={onEdit}\n          ref={setHotspotButtonElement}\n        />\n      )}\n\n      <MenuButton\n        button={\n          <Button\n            aria-label=\"Open image options menu\"\n            data-testid=\"options-menu-button\"\n            icon={EllipsisVerticalIcon}\n            mode=\"ghost\"\n          />\n        }\n        id=\"image-actions-menu\"\n        menu={<Menu>{children}</Menu>}\n        popover={POPOVER_PROPS}\n        ref={setMenuButtonElement}\n      />\n    </MenuActionsWrapper>\n  )\n}\n","import {studioTheme, rgba, Card, Flex, CardTone, Spinner} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const MAX_DEFAULT_HEIGHT = 30\n\nexport const RatioBox = styled(Card)`\n  position: relative;\n  width: 100%;\n  overflow: hidden;\n  min-height: 3.75rem;\n  max-height: 20rem;\n\n  & > div[data-container] {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex !important;\n    align-items: center;\n    justify-content: center;\n  }\n\n  & img {\n    max-width: 100%;\n    max-height: 100%;\n  }\n`\n\nexport const SpinnerWrapper = styled(Spinner)`\n  position: absolute;\n`\n\nexport const Overlay = styled(Flex)(\n  ({tone, drag}: {tone: Exclude<CardTone, 'inherit'>; drag: boolean}) => {\n    const textColor = studioTheme.color.light[tone].card.enabled.fg\n    const backgroundColor = rgba(studioTheme.color.light[tone].card.enabled.bg, 0.8)\n\n    return css`\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      backdrop-filter: ${drag ? 'blur(10px)' : ''};\n      color: ${tone ? textColor : ''};\n      background-color: ${drag ? backgroundColor : 'transparent'};\n    `\n  }\n)\n\nexport const FlexOverlay = styled(Flex)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n`\n","import React, {ComponentProps, useCallback, useEffect, useState} from 'react'\n\nimport {AccessDeniedIcon, ImageIcon, ReadOnlyIcon} from '@sanity/icons'\nimport {Box, Card, CardTone, Heading, Text, useElementRect} from '@sanity/ui'\nimport {\n  MAX_DEFAULT_HEIGHT,\n  RatioBox,\n  Overlay,\n  FlexOverlay,\n  SpinnerWrapper,\n} from './ImagePreview.styled'\n\ninterface Props {\n  readOnly?: boolean | null\n  drag: boolean\n  isRejected: boolean\n  src: string\n  alt: string\n}\n\n/*\n  Used for setting the initial image height - specifically for images\n  that are small and so can take less space in the document\n*/\nconst getImageSize = (src: string): number[] => {\n  const imageUrlParams = new URLSearchParams(src.split('?')[1])\n  const rect = imageUrlParams.get('rect')\n\n  if (rect) {\n    return [rect.split(',')[2], rect.split(',')[3]].map(Number)\n  }\n\n  return src.split('-')[1].split('.')[0].split('x').map(Number)\n}\n\nexport function ImagePreview(props: ComponentProps<typeof Card> & Props) {\n  const {drag, readOnly, isRejected, src, ...rest} = props\n  const [isLoaded, setLoaded] = useState(false)\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n  const rootRect = useElementRect(rootElement)\n  const rootWidth = rootRect?.width || 0\n  const acceptTone = isRejected || readOnly ? 'critical' : 'primary'\n  const tone = drag ? acceptTone : 'default'\n\n  const maxHeightToPx = (MAX_DEFAULT_HEIGHT * document.documentElement.clientHeight) / 100 // convert from vh to px, max height of the input\n\n  const [imageWidth, imageHeight] = getImageSize(src)\n\n  const imageRatio = imageWidth / imageHeight\n\n  // is the image wider than root? if so calculate the resized height\n  const renderedImageHeight = imageWidth > rootWidth ? rootWidth / imageRatio : imageHeight\n\n  /*\n    if the rendered image is smaller than the max height then it doesn't require a height set\n    otherwise, set the max height (to prevent a large image in the document)\n  */\n  const rootHeight = renderedImageHeight < maxHeightToPx ? null : `${MAX_DEFAULT_HEIGHT}vh`\n\n  useEffect(() => {\n    /* set for when the src is being switched when the image input already had a image src\n    - meaning it already had an asset */\n    setLoaded(false)\n  }, [src])\n\n  const onLoadChange = useCallback(() => {\n    setLoaded(true)\n  }, [])\n\n  return (\n    <RatioBox {...rest} ref={setRootElement} style={{height: rootHeight}} tone=\"transparent\">\n      <Card data-container tone=\"inherit\">\n        {!isLoaded && <OverlayComponent cardTone=\"transparent\" drag content={<SpinnerWrapper />} />}\n        <img\n          src={src}\n          data-testid=\"hotspot-image-input\"\n          alt={props.alt}\n          onLoad={onLoadChange}\n          referrerPolicy=\"strict-origin-when-cross-origin\"\n        />\n      </Card>\n\n      {drag && (\n        <OverlayComponent\n          cardTone={tone}\n          drag={drag}\n          content={\n            <>\n              <Box marginBottom={3}>\n                <Heading>\n                  <HoverIcon isRejected={isRejected} readOnly={readOnly} />\n                </Heading>\n              </Box>\n              <HoverText isRejected={isRejected} readOnly={readOnly} />\n            </>\n          }\n        />\n      )}\n    </RatioBox>\n  )\n}\n\nfunction HoverIcon({isRejected, readOnly}: {isRejected: boolean; readOnly?: boolean}) {\n  if (isRejected) {\n    return <AccessDeniedIcon />\n  }\n  if (readOnly) {\n    return <ReadOnlyIcon />\n  }\n  return <ImageIcon />\n}\n\nfunction HoverText({isRejected, readOnly}: {isRejected: boolean; readOnly?: boolean}) {\n  let message = 'Drop image to upload'\n  if (isRejected) {\n    message = 'Cannot upload this file here'\n  }\n  if (readOnly) {\n    message = 'This field is read only'\n  }\n\n  return <Text size={1}>{message}</Text>\n}\n\nfunction OverlayComponent({\n  cardTone,\n  drag,\n  content,\n}: {\n  cardTone: Exclude<CardTone, 'inherit'>\n  drag: boolean\n  content: React.ReactNode\n}) {\n  return (\n    <Overlay justify=\"flex-end\" padding={3} tone={cardTone} drag={drag}>\n      <FlexOverlay direction=\"column\" align=\"center\" justify=\"center\">\n        {content}\n      </FlexOverlay>\n    </Overlay>\n  )\n}\n","import {ResetIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Card, Flex, Box, Text, Stack, Button} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\ntype Props = {\n  onClearValue?: () => void\n}\n\nconst ButtonWrapper = styled(Button)`\n  width: 100%;\n`\n\nexport function InvalidImageWarning({onClearValue}: Props) {\n  return (\n    <Card tone=\"caution\" padding={4} border radius={2}>\n      <Flex gap={4} marginBottom={4}>\n        <Box>\n          <Text size={1}>\n            <WarningOutlineIcon />\n          </Text>\n        </Box>\n        <Stack space={3}>\n          <Text size={1} weight=\"semibold\">\n            Invalid image value\n          </Text>\n          <Text size={1}>\n            The value of this field is not a valid image. Resetting this field will let you choose a\n            new image.\n          </Text>\n        </Stack>\n      </Flex>\n      <ButtonWrapper icon={ResetIcon} text=\"Reset value\" onClick={onClearValue} mode=\"ghost\" />\n    </Card>\n  )\n}\n","/* eslint-disable import/no-unresolved,react/jsx-handler-names */\n\nimport {\n  Box,\n  Button,\n  Card,\n  Dialog,\n  Menu,\n  MenuButton,\n  MenuButtonProps,\n  MenuItem,\n  Stack,\n  ToastParams,\n} from '@sanity/ui'\nimport {get} from 'lodash'\nimport {Observable, Subscription} from 'rxjs'\nimport {ChevronDownIcon, ImageIcon, SearchIcon} from '@sanity/icons'\nimport {\n  AssetFromSource,\n  AssetSource,\n  Image as BaseImage,\n  ImageAsset,\n  ImageSchemaType,\n  Path,\n  UploadState,\n} from '@sanity/types'\nimport React, {ReactNode} from 'react'\nimport {SanityClient} from '@sanity/client'\nimport {isImageSource} from '@sanity/asset-utils'\nimport {PatchEvent, setIfMissing, unset} from '../../../patch'\nimport {FieldMember} from '../../../store'\nimport {InputProps, ObjectInputProps} from '../../../types'\nimport {\n  ResolvedUploader,\n  Uploader,\n  UploaderResolver,\n  UploadOptions,\n} from '../../../studio/uploads/types'\nimport {UploadPlaceholder} from '../common/UploadPlaceholder'\nimport {WithReferencedAsset} from '../../../utils/WithReferencedAsset'\nimport {FileTarget} from '../common/styles'\nimport {ImageUrlBuilder} from '../types'\nimport {UploadProgress} from '../common/UploadProgress'\nimport {handleSelectAssetFromSource} from '../common/assetSource'\nimport {ActionsMenu} from '../common/ActionsMenu'\nimport {UploadWarning} from '../common/UploadWarning'\nimport {ImageToolInput} from '../ImageToolInput'\nimport {FormInput} from '../../../components'\nimport {MemberField, MemberFieldError, MemberFieldSet} from '../../../members'\nimport {PresenceOverlay} from '../../../../presence'\nimport {FIXME} from '../../../../FIXME'\nimport {ImperativeToast} from '../../../../components'\nimport {ChangeIndicator} from '../../../../changeIndicators'\nimport {ImageActionsMenu} from './ImageActionsMenu'\nimport {ImagePreview} from './ImagePreview'\nimport {InvalidImageWarning} from './InvalidImageWarning'\n\n/** @beta */\nexport interface BaseImageInputValue extends Partial<BaseImage> {\n  _upload?: UploadState\n}\n\n/** @beta */\nexport interface BaseImageInputProps\n  extends ObjectInputProps<BaseImageInputValue, ImageSchemaType> {\n  assetSources: AssetSource[]\n  directUploads?: boolean\n  imageUrlBuilder: ImageUrlBuilder\n  observeAsset: (documentId: string) => Observable<ImageAsset>\n  resolveUploader: UploaderResolver\n  client: SanityClient\n}\n\nconst getDevicePixelRatio = () => {\n  if (typeof window === 'undefined' || !window.devicePixelRatio) {\n    return 1\n  }\n  return Math.round(Math.max(1, window.devicePixelRatio))\n}\n\ntype FileInfo = {\n  type: string // mime type\n  kind: string // 'file' or 'string'\n}\n\ntype BaseImageInputState = {\n  isUploading: boolean\n  selectedAssetSource: AssetSource | null\n  // Metadata about files currently over the drop area\n  hoveringFiles: FileInfo[]\n  isStale: boolean\n  hotspotButtonElement: HTMLButtonElement | null\n  menuButtonElement: HTMLButtonElement | null\n}\n\ntype Focusable = {\n  focus: () => void\n  offsetHeight: number\n}\n\nfunction passThrough({children}: {children?: React.ReactNode}) {\n  return children\n}\n\nconst ASSET_FIELD_PATH = ['asset']\n\nconst ASSET_IMAGE_MENU_POPOVER: MenuButtonProps['popover'] = {portal: true}\n\n/** @internal */\nexport class BaseImageInput extends React.PureComponent<BaseImageInputProps, BaseImageInputState> {\n  _assetElementRef: null | Focusable = null\n  _assetPath: Path\n  uploadSubscription: null | Subscription = null\n\n  state: BaseImageInputState = {\n    isUploading: false,\n    selectedAssetSource: null,\n    hoveringFiles: [],\n    isStale: false,\n    hotspotButtonElement: null,\n    menuButtonElement: null,\n  }\n\n  constructor(props: BaseImageInputProps) {\n    super(props)\n    this._assetPath = props.path.concat(ASSET_FIELD_PATH)\n  }\n\n  toast: {push: (params: ToastParams) => void} | null = null\n\n  focus() {\n    if (this._assetElementRef) {\n      this._assetElementRef.focus()\n    }\n  }\n\n  setFocusElement = (el: HTMLElement | null) => {\n    this._assetElementRef = el\n  }\n\n  setMenuButtonElement = (el: HTMLButtonElement | null) => {\n    this.setState({menuButtonElement: el})\n  }\n\n  setHotspotButtonElement = (el: HTMLButtonElement | null) => {\n    this.setState({hotspotButtonElement: el})\n  }\n\n  isImageToolEnabled() {\n    return get(this.props.schemaType, 'options.hotspot') === true\n  }\n\n  clearUploadStatus() {\n    if (this.props.value?._upload) {\n      this.props.onChange(unset(['_upload']))\n    }\n  }\n\n  cancelUpload() {\n    if (this.uploadSubscription) {\n      this.uploadSubscription.unsubscribe()\n      this.clearUploadStatus()\n    }\n  }\n\n  getUploadOptions = (file: File): ResolvedUploader[] => {\n    const {schemaType, resolveUploader} = this.props\n    const uploader = resolveUploader && resolveUploader(schemaType, file)\n    return uploader ? [{type: schemaType, uploader}] : []\n  }\n\n  uploadFirstAccepted(files: File[]) {\n    const {schemaType, resolveUploader} = this.props\n\n    const match = files\n      .map((file) => ({file, uploader: resolveUploader(schemaType, file)}))\n      .find((result) => result.uploader)\n\n    if (match) {\n      this.uploadWith(match.uploader!, match.file)\n    }\n  }\n\n  uploadWith = (uploader: Uploader, file: File, assetDocumentProps: UploadOptions = {}) => {\n    const {schemaType, onChange, client} = this.props\n    const {label, title, description, creditLine, source} = assetDocumentProps\n    const options = {\n      metadata: get(schemaType, 'options.metadata'),\n      storeOriginalFilename: get(schemaType, 'options.storeOriginalFilename'),\n      label,\n      title,\n      description,\n      creditLine,\n      source,\n    }\n\n    this.cancelUpload()\n    this.setState({isUploading: true})\n    onChange(setIfMissing({_type: schemaType.name}))\n    this.uploadSubscription = uploader.upload(client, file, schemaType, options).subscribe({\n      next: (uploadEvent) => {\n        if (uploadEvent.patches) {\n          onChange(uploadEvent.patches)\n        }\n      },\n      error: (err) => {\n        // eslint-disable-next-line no-console\n        console.error(err)\n        this.toast?.push({\n          status: 'error',\n          description: 'The upload could not be completed at this time.',\n          title: 'Upload failed',\n        })\n\n        this.clearUploadStatus()\n      },\n      complete: () => {\n        onChange([unset(['hotspot']), unset(['crop'])])\n        this.setState({isUploading: false})\n        // this.toast.push({\n        //   status: 'success',\n        //   title: 'Upload completed',\n        // })\n      },\n    })\n  }\n\n  handleRemoveButtonClick = () => {\n    const {value} = this.props\n\n    // When removing the image, we should also remove any crop and hotspot\n    // _type and _key are \"meta\"-properties and are not significant unless\n    // other properties are present. Thus, we want to remove the entire\n    // \"container\" object if these are the only properties present, BUT\n    // only if we're not an array element, as removing the array element\n    // will close the selection dialog. Instead, when closing the dialog,\n    // the array logic will check for an \"empty\" value and remove it for us\n    const allKeys = Object.keys(value || {})\n    const remainingKeys = allKeys.filter(\n      (key) => !['_type', '_key', '_upload', 'asset', 'crop', 'hotspot'].includes(key)\n    )\n\n    const isEmpty = remainingKeys.length === 0\n    const removeKeys = ['asset']\n      .concat(allKeys.filter((key) => ['crop', 'hotspot', '_upload'].includes(key)))\n      .map((key) => unset([key]))\n\n    this.props.onChange(isEmpty && !this.valueIsArrayElement() ? unset() : removeKeys)\n  }\n\n  handleFieldChange = (event: PatchEvent) => {\n    const {onChange, schemaType} = this.props\n\n    // When editing a metadata field for an image (eg `altText`), and no asset\n    // is currently selected, we want to unset the entire image field if the\n    // field we are currently editing goes blank and gets unset.\n    //\n    // For instance:\n    // An image field with an `altText` and a `title` subfield, where the image\n    // `asset` and the `title` field is empty, and we are erasing the `alt` field.\n    // We do _not_ however want to clear the field if any content is present in\n    // the other fields - but we do not consider `crop` and `hotspot`.\n    //\n    // Also, we don't want to use this logic for array items, since the parent will\n    // take care of it when closing the array dialog\n    if (!this.valueIsArrayElement() && this.eventIsUnsettingLastFilledField(event)) {\n      onChange(unset())\n      return\n    }\n\n    onChange(\n      event.prepend(\n        setIfMissing({\n          _type: schemaType.name,\n        })\n      ).patches\n    )\n  }\n\n  eventIsUnsettingLastFilledField = (event: PatchEvent): boolean => {\n    const patch = event.patches[0]\n    if (event.patches.length !== 1 || patch.type !== 'unset') {\n      return false\n    }\n\n    const allKeys = Object.keys(this.props.value || {})\n    const remainingKeys = allKeys.filter(\n      (key) => !['_type', '_key', 'crop', 'hotspot'].includes(key)\n    )\n\n    const isEmpty =\n      event.patches[0].path.length === 1 &&\n      remainingKeys.length === 1 &&\n      remainingKeys[0] === event.patches[0].path[0]\n\n    return isEmpty\n  }\n\n  valueIsArrayElement = () => {\n    const {path} = this.props\n    const parentPathSegment = path.slice(-1)[0]\n\n    // String path segment mean an object path, while a number or a\n    // keyed segment means we're a direct child of an array\n    return typeof parentPathSegment !== 'string'\n  }\n\n  handleOpenDialog = () => {\n    const {onFieldOpen} = this.props\n    onFieldOpen('hotspot')\n  }\n\n  handleCloseDialog = () => {\n    const {onFieldClose} = this.props\n    onFieldClose('hotspot')\n\n    // Set focus on hotspot button in `ImageActionsMenu` when closing the dialog\n    this.state.hotspotButtonElement?.focus()\n  }\n\n  handleSelectAssetFromSource = (assetFromSource: AssetFromSource[]) => {\n    const {onChange, schemaType, resolveUploader} = this.props\n    handleSelectAssetFromSource({\n      assetFromSource,\n      onChange,\n      type: schemaType,\n      resolveUploader,\n      uploadWith: this.uploadWith,\n      isImage: true,\n    })\n\n    this.setState({selectedAssetSource: null})\n  }\n\n  handleFilesOver = (hoveringFiles: FileInfo[]) => {\n    this.setState({\n      hoveringFiles,\n    })\n  }\n  handleFilesOut = () => {\n    this.setState({\n      hoveringFiles: [],\n    })\n  }\n\n  handleCancelUpload = () => {\n    this.cancelUpload()\n  }\n\n  handleClearUploadState = () => {\n    this.setState({isStale: false})\n    this.clearUploadStatus()\n  }\n\n  handleStaleUpload = () => {\n    this.setState({isStale: true})\n  }\n\n  handleClearField = () => {\n    this.props.onChange([unset(['asset']), unset(['crop']), unset(['hotspot'])])\n  }\n\n  handleSelectFiles = (files: File[]) => {\n    const {directUploads, readOnly} = this.props\n    const {hoveringFiles} = this.state\n\n    if (directUploads && !readOnly) {\n      this.uploadFirstAccepted(files)\n    } else if (hoveringFiles.length > 0) {\n      this.handleFilesOut()\n    }\n  }\n\n  handleSelectImageFromAssetSource = (source: AssetSource) => {\n    this.setState({selectedAssetSource: source})\n  }\n\n  handleAssetSourceClosed = () => {\n    this.setState({selectedAssetSource: null})\n\n    // Set focus on menu button in `ImageActionsMenu` when closing the dialog\n    this.state.menuButtonElement?.focus()\n  }\n\n  renderHotspotInput = (hotspotInputProps: Omit<InputProps, 'renderDefault'>) => {\n    const {value, changed, id, imageUrlBuilder} = this.props\n\n    const withImageTool = this.isImageToolEnabled() && value && value.asset\n\n    return (\n      <Dialog\n        header=\"Edit hotspot and crop\"\n        id={`${id}_dialog`}\n        onClose={this.handleCloseDialog}\n        width={1}\n        __unstable_autoFocus={false}\n      >\n        <PresenceOverlay>\n          <Box padding={4}>\n            <Stack space={5}>\n              {withImageTool && value?.asset && (\n                <ImageToolInput\n                  {...this.props}\n                  imageUrl={imageUrlBuilder.image(value.asset).url()}\n                  value={value as FIXME}\n                  presence={hotspotInputProps.presence}\n                  changed={changed}\n                />\n              )}\n            </Stack>\n          </Box>\n        </PresenceOverlay>\n      </Dialog>\n    )\n  }\n\n  renderPreview = () => {\n    const {value, schemaType, readOnly, directUploads, imageUrlBuilder, resolveUploader} =\n      this.props\n\n    if (!value || !isImageSource(value)) {\n      return null\n    }\n\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n    const imageUrl = imageUrlBuilder\n      .width(2000)\n      .fit('max')\n      .image(value)\n      .dpr(getDevicePixelRatio())\n      .auto('format')\n      .url()\n\n    return (\n      <ImagePreview\n        drag={!value?._upload && hoveringFiles.length > 0}\n        isRejected={rejectedFilesCount > 0 || !directUploads}\n        readOnly={readOnly}\n        src={imageUrl}\n        alt=\"Preview of uploaded image\"\n      />\n    )\n  }\n\n  renderAssetMenu() {\n    const {\n      value,\n      assetSources,\n      schemaType,\n      readOnly,\n      directUploads,\n      imageUrlBuilder,\n      observeAsset,\n    } = this.props\n\n    const asset = value?.asset\n    if (!asset) {\n      return null\n    }\n\n    const accept = get(schemaType, 'options.accept', 'image/*')\n\n    const showAdvancedEditButton = value && asset && this.isImageToolEnabled()\n\n    let browseMenuItem: ReactNode =\n      assetSources && assetSources.length === 0 ? null : (\n        <MenuItem\n          icon={SearchIcon}\n          text=\"Select\"\n          onClick={() => {\n            this.handleSelectImageFromAssetSource(assetSources[0])\n          }}\n          disabled={readOnly}\n          data-testid=\"file-input-browse-button\"\n        />\n      )\n\n    if (assetSources && assetSources.length > 1) {\n      browseMenuItem = assetSources.map((assetSource) => {\n        return (\n          <MenuItem\n            key={assetSource.name}\n            text={assetSource.title}\n            onClick={() => {\n              this.handleSelectImageFromAssetSource(assetSource)\n            }}\n            icon={assetSource.icon || ImageIcon}\n            data-testid={`file-input-browse-button-${assetSource.name}`}\n            disabled={readOnly}\n          />\n        )\n      })\n    }\n\n    return (\n      <WithReferencedAsset observeAsset={observeAsset} reference={asset}>\n        {({_id, originalFilename, extension}) => {\n          let copyUrl: string | undefined\n          let downloadUrl: string | undefined\n\n          if (isImageSource(value)) {\n            const filename = originalFilename || `download.${extension}`\n            downloadUrl = imageUrlBuilder.image(_id).forceDownload(filename).url()\n            copyUrl = imageUrlBuilder.image(_id).url()\n          }\n\n          return (\n            <ImageActionsMenu\n              onEdit={this.handleOpenDialog}\n              showEdit={showAdvancedEditButton}\n              setHotspotButtonElement={this.setHotspotButtonElement}\n              setMenuButtonElement={this.setMenuButtonElement}\n            >\n              <ActionsMenu\n                onUpload={this.handleSelectFiles}\n                browse={browseMenuItem}\n                onReset={this.handleRemoveButtonClick}\n                downloadUrl={downloadUrl}\n                copyUrl={copyUrl}\n                readOnly={readOnly}\n                directUploads={directUploads}\n                accept={accept}\n              />\n            </ImageActionsMenu>\n          )\n        }}\n      </WithReferencedAsset>\n    )\n  }\n\n  renderBrowser() {\n    const {assetSources, readOnly, directUploads, id} = this.props\n\n    if (assetSources && assetSources.length === 0) return null\n\n    if (assetSources && assetSources.length > 1 && !readOnly && directUploads) {\n      return (\n        <MenuButton\n          id={`${id}_assetImageButton`}\n          button={\n            <Button\n              mode=\"ghost\"\n              text=\"Select\"\n              data-testid=\"file-input-multi-browse-button\"\n              icon={SearchIcon}\n              iconRight={ChevronDownIcon}\n            />\n          }\n          menu={\n            <Menu>\n              {assetSources.map((assetSource) => {\n                return (\n                  <MenuItem\n                    key={assetSource.name}\n                    text={assetSource.title}\n                    onClick={() => {\n                      this.handleSelectImageFromAssetSource(assetSource)\n                    }}\n                    icon={assetSource.icon || ImageIcon}\n                    disabled={readOnly}\n                    data-testid={`file-input-browse-button-${assetSource.name}`}\n                  />\n                )\n              })}\n            </Menu>\n          }\n          popover={ASSET_IMAGE_MENU_POPOVER}\n        />\n      )\n    }\n\n    return (\n      <Button\n        fontSize={2}\n        text=\"Select\"\n        icon={SearchIcon}\n        mode=\"ghost\"\n        onClick={() => {\n          this.handleSelectImageFromAssetSource(assetSources[0])\n        }}\n        data-testid=\"file-input-browse-button\"\n        disabled={readOnly}\n      />\n    )\n  }\n\n  renderUploadPlaceholder() {\n    const {schemaType, readOnly, directUploads, resolveUploader} = this.props\n\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n\n    const accept = get(schemaType, 'options.accept', 'image/*')\n\n    return (\n      <div style={{padding: 1}}>\n        <Card\n          tone={readOnly ? 'transparent' : 'inherit'}\n          border\n          padding={3}\n          style={\n            hoveringFiles.length === 0\n              ? {borderStyle: 'dashed'}\n              : {borderStyle: 'dashed', borderColor: 'transparent'}\n          }\n        >\n          <UploadPlaceholder\n            browse={this.renderBrowser()}\n            onUpload={this.handleSelectFiles}\n            readOnly={readOnly}\n            hoveringFiles={hoveringFiles}\n            acceptedFiles={acceptedFiles}\n            rejectedFilesCount={rejectedFilesCount}\n            type=\"image\"\n            accept={accept}\n            directUploads={directUploads}\n          />\n        </Card>\n      </div>\n    )\n  }\n\n  renderUploadState(uploadState: UploadState) {\n    const {isUploading} = this.state\n    const elementHeight = this._assetElementRef?.offsetHeight\n    const height = elementHeight === 0 ? undefined : elementHeight\n\n    return (\n      <UploadProgress\n        uploadState={uploadState}\n        onCancel={isUploading ? this.handleCancelUpload : undefined}\n        onStale={this.handleStaleUpload}\n        height={height}\n      />\n    )\n  }\n\n  renderAssetSource() {\n    const {selectedAssetSource} = this.state\n    const {value, observeAsset} = this.props\n    if (!selectedAssetSource) {\n      return null\n    }\n    const Component = selectedAssetSource.component\n\n    if (value && value.asset) {\n      return (\n        <WithReferencedAsset observeAsset={observeAsset} reference={value.asset}>\n          {(imageAsset) => (\n            <Component\n              selectedAssets={[imageAsset]}\n              assetType=\"image\"\n              selectionType=\"single\"\n              onClose={this.handleAssetSourceClosed}\n              onSelect={this.handleSelectAssetFromSource}\n            />\n          )}\n        </WithReferencedAsset>\n      )\n    }\n    return (\n      <Component\n        selectedAssets={[]}\n        selectionType=\"single\"\n        assetType=\"image\"\n        onClose={this.handleAssetSourceClosed}\n        onSelect={this.handleSelectAssetFromSource}\n      />\n    )\n  }\n\n  setToast = (toast: {push: (params: ToastParams) => void}) => {\n    this.toast = toast\n  }\n\n  getFileTone() {\n    const {schemaType, value, readOnly, directUploads, resolveUploader} = this.props\n\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n\n    if (hoveringFiles.length > 0) {\n      if (rejectedFilesCount > 0 || !directUploads) {\n        return 'critical'\n      }\n    }\n\n    if (!value?._upload && !readOnly && hoveringFiles.length > 0) {\n      return 'primary'\n    }\n\n    if (readOnly) {\n      return 'transparent'\n    }\n\n    return value?._upload && value?.asset ? 'transparent' : 'default'\n  }\n\n  renderAsset() {\n    const {value, readOnly, elementProps} = this.props\n\n    const {hoveringFiles, isStale} = this.state\n\n    const hasValueOrUpload = Boolean(value?._upload || value?.asset)\n\n    if (value && typeof value.asset !== 'undefined' && !value?._upload && !isImageSource(value)) {\n      return () => <InvalidImageWarning onClearValue={this.handleClearField} />\n    }\n\n    // todo: convert this to a functional component and use this with useCallback\n    //  it currently has to return a new function on every render in order to pick up state from this component\n    return (inputProps: Omit<InputProps, 'renderDefault'>) => (\n      <>\n        {isStale && (\n          <Box marginBottom={2}>\n            <UploadWarning onClearStale={this.handleClearUploadState} />\n          </Box>\n        )}\n\n        <ChangeIndicator\n          path={inputProps.path.concat(ASSET_FIELD_PATH)}\n          hasFocus={!!inputProps.focused}\n          isChanged={inputProps.changed}\n        >\n          {/* not uploading */}\n          {!value?._upload && (\n            <FileTarget\n              {...elementProps}\n              tabIndex={0}\n              disabled={Boolean(readOnly)}\n              ref={this.setFocusElement}\n              onFiles={this.handleSelectFiles}\n              onFilesOver={this.handleFilesOver}\n              onFilesOut={this.handleFilesOut}\n              tone={this.getFileTone()}\n              $border={hasValueOrUpload || hoveringFiles.length > 0}\n              style={{padding: 1}}\n              sizing=\"border\"\n              radius={2}\n            >\n              {!value?.asset && this.renderUploadPlaceholder()}\n              {!value?._upload && value?.asset && (\n                <div style={{position: 'relative'}}>\n                  {this.renderPreview()}\n                  {this.renderAssetMenu()}\n                </div>\n              )}\n            </FileTarget>\n          )}\n\n          {/* uploading */}\n          {value?._upload && this.renderUploadState(value._upload)}\n        </ChangeIndicator>\n      </>\n    )\n  }\n\n  render() {\n    const {members, renderInput, renderField, renderItem, renderPreview} = this.props\n\n    const {selectedAssetSource} = this.state\n\n    // we use the hotspot field as the \"owner\" of both hotspot and crop\n    const hotspotField = members.find(\n      (member): member is FieldMember => member.kind === 'field' && member.name === 'hotspot'\n    )\n\n    return (\n      // The Stack space should match the space in ObjectInput\n      <Stack space={5} data-testid=\"image-input\">\n        <ImperativeToast ref={this.setToast} />\n\n        {members.map((member) => {\n          if (member.kind === 'field' && (member.name === 'crop' || member.name === 'hotspot')) {\n            // we're rendering these separately\n            return null\n          }\n\n          if (member.kind === 'field') {\n            return (\n              <MemberField\n                key={member.key}\n                member={member}\n                renderInput={member.name === 'asset' ? this.renderAsset() : renderInput}\n                renderField={member.name === 'asset' ? passThrough : renderField}\n                renderItem={renderItem}\n                renderPreview={renderPreview}\n              />\n            )\n          }\n\n          if (member.kind === 'fieldSet') {\n            return (\n              <MemberFieldSet\n                key={member.key}\n                member={member}\n                renderInput={renderInput}\n                renderField={renderField}\n                renderItem={renderItem}\n                renderPreview={renderPreview}\n              />\n            )\n          }\n          if (member.kind === 'error') {\n            return <MemberFieldError key={member.key} member={member} />\n          }\n          //@ts-expect-error all possible cases should be covered\n          return <>Unknown member kind: ${member.kind}</>\n        })}\n\n        {hotspotField?.open && (\n          <FormInput\n            {...this.props}\n            absolutePath={hotspotField.field.path}\n            renderInput={this.renderHotspotInput}\n          />\n        )}\n        {selectedAssetSource && this.renderAssetSource()}\n      </Stack>\n    )\n  }\n}\n","import React, {useCallback} from 'react'\nimport imageUrlBuilder from '@sanity/image-url'\nimport {SchemaType} from '@sanity/types'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {BaseImageInput, BaseImageInputProps} from '../../inputs/files/ImageInput'\nimport {useFormBuilder} from '../../useFormBuilder'\nimport {resolveUploader as defaultResolveUploader} from '../uploads/resolveUploader'\nimport {FileLike} from '../uploads/types'\nimport {useDocumentPreviewStore} from '../../../store'\nimport {useClient} from '../../../hooks'\nimport {observeImageAsset} from './client-adapters/assets'\n\n/** @beta */\nexport type ImageInputProps = Omit<\n  BaseImageInputProps,\n  | 'assetSources'\n  | 'directUploads'\n  | 'imageUrlBuilder'\n  | 'observeAsset'\n  | 'client'\n  | 'resolveUploader'\n>\n\n/** @beta */\nexport function StudioImageInput(props: ImageInputProps) {\n  const sourcesFromSchema = props.schemaType.options?.sources\n  const {image} = useFormBuilder().__internal\n  const documentPreviewStore = useDocumentPreviewStore()\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const formBuilder = useFormBuilder()\n  const supportsImageUploads = formBuilder.__internal.image.directUploads\n\n  const resolveUploader = useCallback(\n    (type: SchemaType, file: FileLike) => {\n      if (!supportsImageUploads) {\n        return null\n      }\n      return defaultResolveUploader(type, file)\n    },\n    [supportsImageUploads]\n  )\n\n  // note: type.options.sources may be an empty array and in that case we're\n  // disabling selecting images from asset source  (it's a feature, not a bug)\n  const assetSources = React.useMemo(\n    () => sourcesFromSchema || image.assetSources,\n    [image, sourcesFromSchema]\n  )\n\n  const builder = React.useMemo(() => imageUrlBuilder(client), [client])\n\n  const observeAsset = useCallback(\n    (id: string) => observeImageAsset(documentPreviewStore, id),\n    [documentPreviewStore]\n  )\n\n  return (\n    <BaseImageInput\n      {...props}\n      client={client}\n      assetSources={assetSources}\n      directUploads={image.directUploads}\n      imageUrlBuilder={builder}\n      observeAsset={observeAsset}\n      resolveUploader={resolveUploader}\n    />\n  )\n}\n","import {RefObject, useEffect} from 'react'\n\n// This is a modified version of https://usehooks.com/useOnClickOutside that can take multiple element refs\n// There is currently a bug in the `useClickOutside` hook from @sanity/ui that requires the refs to be passed as\n// actual HTML elements instead of mutable refs. This requires the consumer to store elements in component state\n// which adds quite a bit of cruft and isn't always feasible\nexport function useOnClickOutside(\n  refs: RefObject<HTMLElement>[],\n  handler: (event: Event) => void\n): void {\n  useEffect(() => {\n    const listener = (event: Event) => {\n      const target = event.target\n      if (target instanceof HTMLElement) {\n        if (refs.some((ref) => ref.current?.contains(target))) {\n          return\n        }\n        handler(event)\n      }\n    }\n    document.addEventListener('mousedown', listener)\n    document.addEventListener('touchstart', listener)\n    return () => {\n      document.removeEventListener('mousedown', listener)\n      document.removeEventListener('touchstart', listener)\n    }\n  }, [refs, handler])\n}\n","import {useCallback, useState} from 'react'\nimport {catchError, map, startWith} from 'rxjs/operators'\nimport {Observable, of} from 'rxjs'\nimport {useMemoObservable} from 'react-rx'\nimport {usePrevious} from '../../hooks/usePrevious'\nimport {CrossDatasetReferenceInfo} from './types'\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst noop = () => {}\n\nconst INITIAL_LOADING_STATE: Loadable<CrossDatasetReferenceInfo> = {\n  isLoading: true,\n  result: undefined,\n  error: undefined,\n  retry: noop,\n}\n\nconst EMPTY_STATE: Loadable<any> = {\n  isLoading: false,\n  result: undefined,\n  error: undefined,\n  retry: noop,\n}\n\nexport type Loadable<T> =\n  | {isLoading: true; result: undefined; error: undefined; retry: () => void}\n  | {isLoading: false; result: T; error: undefined; retry: () => void}\n  | {isLoading: false; result: undefined; error: Error; retry: () => void}\n\nexport type GetReferenceInfoFn = (doc: {\n  _id: string\n  _type?: string\n}) => Observable<CrossDatasetReferenceInfo>\n\nexport function useReferenceInfo(\n  doc: {_id: string; _type?: string},\n  getReferenceInfo: GetReferenceInfoFn\n): Loadable<CrossDatasetReferenceInfo> {\n  const [retryAttempt, setRetryAttempt] = useState<number>(0)\n\n  const retry = useCallback(() => {\n    setRetryAttempt((current) => current + 1)\n  }, [])\n\n  const referenceInfo = useMemoObservable(\n    () =>\n      doc._id\n        ? getReferenceInfo(doc).pipe(\n            map(\n              (result) =>\n                ({\n                  isLoading: false,\n                  result,\n                  error: undefined,\n                  retry,\n                } as const)\n            ),\n            startWith(INITIAL_LOADING_STATE),\n            catchError((err: Error) => {\n              console.error(err)\n              return of({isLoading: false, result: undefined, error: err, retry} as const)\n            })\n          )\n        : of(EMPTY_STATE),\n    [retryAttempt, getReferenceInfo, doc?._id, doc?._type, retry],\n    INITIAL_LOADING_STATE\n  )\n\n  // workaround for a \"bug\" with useMemoObservable that doesn't\n  // return the initial value upon resubscription\n  const previousId = usePrevious(doc._id, doc._id)\n  if (previousId !== doc._id) {\n    return INITIAL_LOADING_STATE\n  }\n  return referenceInfo\n}\n","import {Flex} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const StyledPreviewFlex = styled(Flex)`\n  /* this is a hack to avoid layout jumps while previews are loading\n  or the message is not tall enough to fill the card\n  there's probably better ways of solving this */\n  min-height: 36px;\n`\n\nexport const TooltipContent = styled(Flex)`\n  /* This limits the width of the tooltip content */\n  max-width: 250px;\n`\n","import React, {createElement, ReactNode, useMemo} from 'react'\nimport {CrossDatasetType, PreviewValue} from '@sanity/types'\nimport {Box, Flex, Inline, Label, Text, Tooltip} from '@sanity/ui'\nimport {AccessDeniedIcon, HelpCircleIcon, LaunchIcon} from '@sanity/icons'\nimport imageUrlBuilder from '@sanity/image-url'\nimport {isImageSource} from '@sanity/asset-utils'\nimport {DocumentAvailability} from '../../../preview'\nimport {DefaultPreview, PreviewMediaDimensions, TextWithTone} from '../../../components'\nimport {FIXME} from '../../../FIXME'\n\nimport {StyledPreviewFlex, TooltipContent} from './CrossDatasetReferencePreview.styled'\n\nfunction UnavailableMessage(props: {children: ReactNode}) {\n  return (\n    <TooltipContent padding={3}>\n      <Box flex={1}>\n        <Box>\n          <Text as=\"p\" size={1}>\n            {props.children}\n          </Text>\n        </Box>\n      </Box>\n    </TooltipContent>\n  )\n}\n\n/**\n * Used to preview a referenced type\n * Takes the reference type as props\n */\nexport function CrossDatasetReferencePreview(props: {\n  availability: DocumentAvailability | null\n  id: string\n  hasStudioUrl?: boolean\n  showStudioUrlIcon?: boolean\n  preview: {published: PreviewValue | undefined}\n  dataset: string\n  projectId: string\n  refType?: CrossDatasetType\n  showTypeLabel: boolean\n}) {\n  const {\n    refType,\n    showStudioUrlIcon,\n    hasStudioUrl,\n    showTypeLabel,\n    availability,\n    preview,\n    id,\n    dataset,\n    projectId,\n  } = props\n  const notFound = availability?.reason === 'NOT_FOUND'\n  const insufficientPermissions = availability?.reason === 'PERMISSION_DENIED'\n\n  const previewMedia = preview.published?.media\n\n  const media = useMemo(() => {\n    if (previewMedia) {\n      const isValidImageAsset =\n        typeof (previewMedia as FIXME)?.asset !== 'undefined' && isImageSource(previewMedia)\n      const isValidElement = React.isValidElement(previewMedia)\n\n      if (!isValidImageAsset && !isValidElement) {\n        return null\n      }\n\n      return function MediaPreview({dimensions}: {dimensions: PreviewMediaDimensions}) {\n        return isValidElement ? (\n          previewMedia\n        ) : (\n          <img\n            src={imageUrlBuilder({dataset, projectId})\n              .image(previewMedia as FIXME)\n              .withOptions(dimensions)\n              .url()}\n            alt=\"Image preview of referenced document\"\n            referrerPolicy=\"strict-origin-when-cross-origin\"\n          />\n        )\n      }\n    }\n    return refType?.icon ? createElement(refType.icon) : null\n  }, [previewMedia, dataset, projectId, refType?.icon])\n\n  return (\n    <StyledPreviewFlex align=\"center\" justify=\"center\" flex={1} data-testid=\"preview\">\n      {availability?.available ? (\n        <Box flex={1}>\n          <DefaultPreview\n            title={preview.published?.title}\n            subtitle={preview.published?.subtitle}\n            media={media || false}\n          />\n        </Box>\n      ) : (\n        <Box flex={1}>\n          <Flex align=\"center\">\n            <Box flex={1} paddingY={2}>\n              <Text muted>Document unavailable</Text>\n            </Box>\n          </Flex>\n        </Box>\n      )}\n\n      <Box paddingLeft={3}>\n        <Inline space={4}>\n          {refType && showTypeLabel && (\n            <Label size={1} muted>\n              {refType.title || refType.type}\n            </Label>\n          )}\n\n          {(insufficientPermissions || notFound) && (\n            <Box>\n              <Tooltip\n                portal\n                content={\n                  notFound ? (\n                    <UnavailableMessage>\n                      The referenced document no longer exist and might have been deleted.\n                      <br />\n                      (id: <code>{id}</code>)\n                    </UnavailableMessage>\n                  ) : (\n                    <UnavailableMessage>\n                      The referenced document could not be accessed due to insufficient permissions\n                    </UnavailableMessage>\n                  )\n                }\n              >\n                <TextWithTone tone=\"default\">\n                  {insufficientPermissions ? <AccessDeniedIcon /> : <HelpCircleIcon />}\n                </TextWithTone>\n              </Tooltip>\n            </Box>\n          )}\n\n          {!(notFound || insufficientPermissions) && showStudioUrlIcon && (\n            <Box>\n              <Tooltip\n                portal\n                content={\n                  <TooltipContent padding={2}>\n                    {hasStudioUrl ? (\n                      <Text size={1}>This document opens in another Studio</Text>\n                    ) : (\n                      <Text size={1}>\n                        This document cannot be opened <br /> (unable to resolve URL to Studio)\n                      </Text>\n                    )}\n                  </TooltipContent>\n                }\n              >\n                <TextWithTone size={1} tone=\"default\" muted={!hasStudioUrl}>\n                  <LaunchIcon />\n                </TextWithTone>\n              </Tooltip>\n            </Box>\n          )}\n        </Inline>\n      </Box>\n    </StyledPreviewFlex>\n  )\n}\n","import {useClient} from '../../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../studioClient'\n\nexport function useProjectId(): string {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  return client.config().projectId as string\n}\n","/* eslint-disable max-nested-callbacks,no-nested-ternary */\nimport React from 'react'\nimport {CrossDatasetReferenceSchemaType} from '@sanity/types'\nimport {Stack, TextSkeleton} from '@sanity/ui'\nimport {Observable} from 'rxjs'\nimport {Alert} from '../../components/Alert'\nimport {CrossDatasetReferenceInfo} from './types'\nimport {useReferenceInfo} from './useReferenceInfo'\nimport {CrossDatasetReferencePreview} from './CrossDatasetReferencePreview'\nimport {useProjectId} from './utils/useProjectId'\n\n/**\n * Used to preview a referenced type\n * Takes as props the referenced document, the reference type and a hook to subscribe to\n * in order to listen for the reference info\n */\nexport function OptionPreview(props: {\n  document: {_id: string; _type: string}\n  referenceType: CrossDatasetReferenceSchemaType\n  getReferenceInfo: (doc: {_id: string; _type?: string}) => Observable<CrossDatasetReferenceInfo>\n}) {\n  const {\n    isLoading,\n    result: referenceInfo,\n    error,\n  } = useReferenceInfo(props.document, props.getReferenceInfo)\n  const projectId = useProjectId()\n\n  if (isLoading) {\n    return (\n      <Stack space={2} padding={1}>\n        <TextSkeleton style={{maxWidth: 320}} radius={1} animated />\n        <TextSkeleton style={{maxWidth: 200}} radius={1} size={1} animated />\n      </Stack>\n    )\n  }\n\n  if (error) {\n    return (\n      <Stack space={2} padding={1}>\n        <Alert title=\"Failed to load referenced document\">Error: {error.message}</Alert>\n      </Stack>\n    )\n  }\n\n  if (!referenceInfo) {\n    return null\n  }\n\n  if (referenceInfo.availability?.reason === 'PERMISSION_DENIED') {\n    return (\n      <Stack space={2} padding={1}>\n        Insufficient permissions to view this document\n      </Stack>\n    )\n  }\n\n  const refType = props.referenceType.to.find((toEntry) => toEntry.type === referenceInfo.type)\n  if (!refType) {\n    return (\n      <Stack space={2} padding={1}>\n        Search returned a type that's not valid for this reference: \"${referenceInfo.type}\"\n      </Stack>\n    )\n  }\n  return (\n    referenceInfo &&\n    refType && (\n      <CrossDatasetReferencePreview\n        id={referenceInfo.id}\n        availability={referenceInfo.availability}\n        preview={referenceInfo.preview}\n        refType={refType}\n        dataset={props.referenceType.dataset}\n        projectId={projectId}\n        showTypeLabel={props.referenceType.to.length > 1}\n      />\n    )\n  )\n}\n","import React from 'react'\nimport {CrossDatasetReferenceValue, CrossDatasetReferenceSchemaType} from '@sanity/types'\nimport {Stack, Text, TextSkeleton} from '@sanity/ui'\nimport {Loadable} from './useReferenceInfo'\nimport {CrossDatasetReferenceInfo} from './types'\nimport {CrossDatasetReferencePreview} from './CrossDatasetReferencePreview'\nimport {useProjectId} from './utils/useProjectId'\n\nexport function PreviewReferenceValue(props: {\n  value: CrossDatasetReferenceValue\n  showStudioUrlIcon?: boolean\n  hasStudioUrl?: boolean\n  type: CrossDatasetReferenceSchemaType\n  referenceInfo: Loadable<CrossDatasetReferenceInfo>\n}) {\n  const {value, type, showStudioUrlIcon, hasStudioUrl, referenceInfo} = props\n  const projectId = useProjectId()\n\n  if (referenceInfo.isLoading || referenceInfo.error) {\n    return (\n      <Stack space={2} padding={1}>\n        <TextSkeleton style={{maxWidth: 320}} radius={1} animated={!referenceInfo.error} />\n        <TextSkeleton style={{maxWidth: 200}} radius={1} size={1} animated={!referenceInfo.error} />\n      </Stack>\n    )\n  }\n  const showTypeLabel = type.to.length > 1\n\n  const refTypeName = referenceInfo.result?.type\n  const refType = type.to.find((toType) => toType.type === refTypeName)\n\n  if (referenceInfo.result.availability?.available && !refType) {\n    return (\n      <Stack space={2} padding={2}>\n        <Text as=\"p\">\n          The referenced document is of invalid type: ({refTypeName || 'unknown'})\n          <pre>{JSON.stringify(value, null, 2)}</pre>\n        </Text>\n      </Stack>\n    )\n  }\n\n  return (\n    <CrossDatasetReferencePreview\n      availability={referenceInfo.result.availability}\n      hasStudioUrl={hasStudioUrl}\n      showStudioUrlIcon={showStudioUrlIcon}\n      preview={referenceInfo.result.preview}\n      refType={refType}\n      projectId={projectId}\n      dataset={type.dataset}\n      id={value._ref}\n      showTypeLabel={showTypeLabel}\n    />\n  )\n}\n","import React, {forwardRef, useCallback} from 'react'\nimport {Autocomplete, Box, Flex, Popover, Text} from '@sanity/ui'\nimport styled from 'styled-components'\n\nconst StyledPopover = styled(Popover)`\n  & > div {\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n`\n\nconst StyledText = styled(Text)`\n  word-break: break-word;\n`\n\nexport const ReferenceAutocomplete = forwardRef(function ReferenceAutocomplete(\n  props: React.ComponentProps<typeof Autocomplete> & {\n    referenceElement: HTMLDivElement | null\n    searchString?: string\n    portalRef?: React.RefObject<HTMLDivElement>\n  },\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const hasResults = props.options && props.options.length > 0\n  const renderPopover = useCallback(\n    (\n      {\n        content,\n        hidden,\n        inputElement,\n        onMouseEnter,\n        onMouseLeave,\n      }: {\n        content: React.ReactElement | null\n        hidden: boolean\n        inputElement: HTMLInputElement | null\n        onMouseEnter: () => void\n        onMouseLeave: () => void\n      },\n      contentRef: React.Ref<HTMLDivElement>\n    ) => (\n      <StyledPopover\n        data-testid=\"autocomplete-popover\"\n        placement=\"bottom-start\"\n        arrow={false}\n        constrainSize\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n        content={\n          <div ref={contentRef}>\n            {hasResults ? (\n              content\n            ) : (\n              <Box padding={4}>\n                <Flex align=\"center\" height=\"fill\" justify=\"center\">\n                  <StyledText align=\"center\" muted>\n                    No results for <strong>“{props.searchString}”</strong>\n                  </StyledText>\n                </Flex>\n              </Box>\n            )}\n          </div>\n        }\n        open={!props.loading && !hidden}\n        ref={props.portalRef}\n        portal\n        referenceElement={props.referenceElement || inputElement}\n        matchReferenceWidth\n      />\n    ),\n    [hasResults, props.searchString, props.loading, props.portalRef, props.referenceElement]\n  )\n  return <Autocomplete {...props} ref={ref} renderPopover={renderPopover} />\n})\n","import {ResetIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Card, Flex, Box, Text, Stack, Button} from '@sanity/ui'\nimport React, {useMemo} from 'react'\nimport styled from 'styled-components'\nimport {CrossDatasetReferenceValue} from '@sanity/types'\n\ntype Props = {\n  value?: CrossDatasetReferenceValue\n  onClearValue?: () => void\n}\n\nconst ButtonWrapper = styled(Button)`\n  width: 100%;\n`\n\nexport function DisabledFeatureWarning({value, onClearValue}: Props) {\n  const hasRef = useMemo(() => Boolean(value?._ref), [value?._ref])\n\n  return (\n    <Card\n      tone=\"caution\"\n      padding={4}\n      border\n      radius={2}\n      data-testid=\"alert-cross-dataset-reference-feature-disabled\"\n    >\n      <Flex gap={4} marginBottom={hasRef ? 4 : undefined}>\n        <Box>\n          <Text size={1}>\n            <WarningOutlineIcon />\n          </Text>\n        </Box>\n        <Stack space={3}>\n          <Text as=\"h2\" size={1} weight=\"semibold\">\n            Unavailable feature: Cross dataset reference\n          </Text>\n          {hasRef && (\n            <Stack space={3}>\n              <Text as=\"p\" size={1}>\n                This feature has been disabled. Read how to enable it in{' '}\n                <a\n                  href=\"https://www.sanity.io/docs/cross-dataset-references\"\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                >\n                  documentation\n                </a>\n              </Text>\n              <Text as=\"p\" size={1}>\n                You can still clear this field's existing reference, but that cannot be revoked as\n                long as the feature is disabled.\n              </Text>\n            </Stack>\n          )}\n          {!hasRef && (\n            <Text as=\"p\" size={1}>\n              Read how to enable it in{' '}\n              <a\n                href=\"https://www.sanity.io/docs/cross-dataset-references\"\n                target=\"_blank\"\n                rel=\"noreferrer\"\n              >\n                documentation\n              </a>\n            </Text>\n          )}\n        </Stack>\n      </Flex>\n      {onClearValue && hasRef && (\n        <ButtonWrapper icon={ResetIcon} text=\"Reset value\" onClick={onClearValue} mode=\"ghost\" />\n      )}\n    </Card>\n  )\n}\n","import {catchError, map, shareReplay, startWith} from 'rxjs/operators'\nimport {Observable, of} from 'rxjs'\nimport {SanityClient} from '@sanity/client'\nimport {useMemoObservable} from 'react-rx'\nimport {useClient} from '../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\n\ninterface Features {\n  isLoading: boolean\n  enabled: boolean\n  features: string[]\n}\n\nconst INITIAL_LOADING_STATE: Features = {\n  isLoading: true,\n  enabled: true,\n  features: [],\n}\n\n/**\n * fetches all the enabled features for this project\n */\nfunction fetchFeatures({versionedClient}: {versionedClient: SanityClient}): Observable<string[]> {\n  return versionedClient.observable.request<string[]>({\n    uri: `/features`,\n    tag: 'features',\n  })\n}\n\nlet cachedFeatureRequest: Observable<string[]>\n\nexport function useFeatureEnabled(featureKey: string): Features {\n  const versionedClient = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  if (!cachedFeatureRequest) {\n    cachedFeatureRequest = fetchFeatures({versionedClient}).pipe(shareReplay())\n  }\n\n  const featureInfo = useMemoObservable(\n    () =>\n      cachedFeatureRequest.pipe(\n        map((features = []) => ({\n          isLoading: false,\n          enabled: Boolean(features?.includes(featureKey)),\n          features,\n        })),\n        startWith(INITIAL_LOADING_STATE),\n        catchError((err: Error) => {\n          console.error(err)\n          return of({isLoading: false, enabled: true, features: []})\n        })\n      ),\n    [featureKey],\n    INITIAL_LOADING_STATE\n  )\n\n  return featureInfo\n}\n","/* eslint-disable complexity, max-nested-callbacks, no-nested-ternary */\n\nimport React, {useCallback, useMemo, useRef, useState, useId} from 'react'\nimport {CrossDatasetReferenceValue, CrossDatasetReferenceSchemaType} from '@sanity/types'\nimport {EllipsisVerticalIcon, ResetIcon as ClearIcon, SyncIcon as ReplaceIcon} from '@sanity/icons'\nimport {concat, Observable, of} from 'rxjs'\nimport {catchError, distinctUntilChanged, filter, map, scan, switchMap, tap} from 'rxjs/operators'\nimport {\n  Box,\n  Button,\n  Card,\n  Flex,\n  Inline,\n  Menu,\n  MenuButton,\n  MenuItem,\n  Stack,\n  Text,\n  useToast,\n} from '@sanity/ui'\nimport {useObservableCallback} from 'react-rx'\nimport {FOCUS_TERMINATOR} from '@sanity/util/paths'\nimport {ObjectInputProps} from '../../types'\nimport {set, unset} from '../../patch'\nimport {AlertStrip} from '../../components/AlertStrip'\nimport {useOnClickOutside} from '../../hooks/useOnClickOutside'\nimport {getPublishedId, isNonNullable} from '../../../util'\nimport {FIXME} from '../../../FIXME'\nimport {ChangeIndicator} from '../../../changeIndicators'\nimport {PreviewCard} from '../../../components'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {CrossDatasetReferenceInfo, CrossDatasetSearchHit, SearchState} from './types'\nimport {OptionPreview} from './OptionPreview'\nimport {GetReferenceInfoFn, useReferenceInfo} from './useReferenceInfo'\nimport {PreviewReferenceValue} from './PreviewReferenceValue'\nimport {ReferenceAutocomplete} from './ReferenceAutocomplete'\nimport {DisabledFeatureWarning} from './DisabledFeatureWarning'\nimport {useFeatureEnabled} from './useFeatureEnabled'\nimport {useProjectId} from './utils/useProjectId'\n\nconst INITIAL_SEARCH_STATE: SearchState = {\n  hits: [],\n  isLoading: false,\n}\n\n/** @internal */\nexport interface CrossDatasetReferenceInputProps\n  extends ObjectInputProps<CrossDatasetReferenceValue, CrossDatasetReferenceSchemaType> {\n  getReferenceInfo: (\n    doc: {_id: string; _type?: string},\n    type: CrossDatasetReferenceSchemaType\n  ) => Observable<CrossDatasetReferenceInfo>\n  onSearch: (query: string) => Observable<CrossDatasetSearchHit[]>\n}\n\nconst NO_FILTER = () => true\n\nconst REF_PATH = ['_ref']\nconst CROSS_DATASET_FEATUREKEY = 'crossDatasetReferences'\n\n/** @internal */\nexport function CrossDatasetReferenceInput(props: CrossDatasetReferenceInputProps) {\n  const {\n    changed,\n    focused,\n    focusPath,\n    getReferenceInfo,\n    onChange,\n    onPathFocus,\n    onSearch,\n    path,\n    readOnly,\n    schemaType,\n    validation,\n    value,\n    elementProps,\n  } = props\n\n  const projectId = useProjectId()\n\n  const [searchState, setSearchState] = useState<SearchState>(INITIAL_SEARCH_STATE)\n\n  const handleChange = useCallback(\n    (id: string) => {\n      if (!id) {\n        onChange(unset())\n        onPathFocus([])\n        return\n      }\n\n      const hit = searchState.hits.find((h) => h.id === id)\n\n      if (!hit) {\n        throw new Error('Selected an item that wasnt part of the result set')\n      }\n\n      onChange(\n        set({\n          _type: schemaType.name,\n          _ref: getPublishedId(id),\n          _projectId: projectId,\n          _dataset: schemaType.dataset,\n          _weak: schemaType.weak,\n          // persist _key between mutations if the value is in an array\n          _key: value?._key,\n        })\n      )\n\n      onPathFocus([])\n    },\n    [\n      value?._key,\n      searchState.hits,\n      schemaType.name,\n      schemaType.dataset,\n      schemaType.weak,\n      projectId,\n      onChange,\n      onPathFocus,\n    ]\n  )\n\n  const handleClear = useCallback(() => {\n    onChange(unset())\n  }, [onChange])\n\n  const handleAutocompleteKeyDown = useCallback(\n    (event: any) => {\n      // escape\n      if (event.keyCode === 27) {\n        onPathFocus?.([])\n      }\n    },\n    [onPathFocus]\n  )\n\n  const getReferenceInfoMemo: GetReferenceInfoFn = useCallback(\n    (doc) => getReferenceInfo(doc, schemaType),\n    [getReferenceInfo, schemaType]\n  )\n\n  const refDoc = useMemo(() => ({_id: value?._ref}), [value?._ref])\n\n  const loadableReferenceInfo = useReferenceInfo(refDoc as FIXME, getReferenceInfoMemo)\n  const featureInfo = useFeatureEnabled(CROSS_DATASET_FEATUREKEY)\n\n  const autocompletePopoverReferenceElementRef = useRef<HTMLDivElement | null>(null)\n\n  const hasFocusAtRef = focusPath.length === 1 && focusPath[0] === '_ref'\n\n  // --- focus handling\n  const focusElementRef = elementProps.ref\n  useDidUpdate({hasFocusAt: hasFocusAtRef, ref: value?._ref}, (prev, current) => {\n    const refUpdated = prev?.ref !== current.ref\n    const focusAtUpdated = prev?.hasFocusAt !== current.hasFocusAt\n\n    if ((focusAtUpdated || refUpdated) && current.hasFocusAt) {\n      // if search mode changed and we're having focus always ensure the\n      // ref element gets focus\n      focusElementRef.current?.focus()\n    }\n  })\n\n  const weakIs = value?._weak ? 'weak' : 'strong'\n  const weakShouldBe = schemaType.weak === true ? 'weak' : 'strong'\n\n  const hasRef = Boolean(value?._ref)\n\n  const handleFixStrengthMismatch = useCallback(() => {\n    onChange(schemaType.weak === true ? set(true, ['_weak']) : unset(['_weak']))\n  }, [onChange, schemaType])\n\n  const {push} = useToast()\n\n  const errors = useMemo(() => validation.filter((item) => item.level === 'error'), [validation])\n\n  const handleFocus = useCallback(\n    (event: FIXME) => {\n      if (event.currentTarget === elementProps.ref.current) {\n        onPathFocus?.([FOCUS_TERMINATOR])\n      }\n    },\n    [elementProps.ref, onPathFocus]\n  )\n\n  const handleAutocompleteFocus = useCallback(\n    (event: FIXME) => {\n      if (event.currentTarget === elementProps.ref.current) {\n        onPathFocus?.(REF_PATH)\n      }\n    },\n    [elementProps.ref, onPathFocus]\n  )\n  const handleReplace = useCallback(() => {\n    onPathFocus?.(REF_PATH)\n  }, [onPathFocus])\n\n  const inputId = useId()\n\n  const handleQueryChange = useObservableCallback(\n    (inputValue$: Observable<string | null>) => {\n      return inputValue$.pipe(\n        filter(isNonNullable),\n        distinctUntilChanged(),\n        switchMap((searchString) =>\n          concat(\n            of({isLoading: true}),\n            onSearch(searchString).pipe(\n              map((hits) => ({hits, searchString, isLoading: false})),\n              catchError((error) => {\n                push({\n                  title: 'Reference search failed',\n                  description: error.message,\n                  status: 'error',\n                  id: `reference-search-fail-${inputId}`,\n                })\n\n                console.error(error)\n                return of({hits: []})\n              })\n            )\n          )\n        ),\n\n        scan(\n          (prevState, nextState): SearchState => ({...prevState, ...nextState}),\n          INITIAL_SEARCH_STATE\n        ),\n\n        tap(setSearchState)\n      )\n    },\n    // @todo: add onSearch to the deps list when it's verified that it's safe to do so\n    [inputId, push]\n  )\n\n  const handleAutocompleteOpenButtonClick = useCallback(() => {\n    handleQueryChange('')\n  }, [handleQueryChange])\n\n  const showWeakRefMismatch = !loadableReferenceInfo.isLoading && hasRef && weakIs !== weakShouldBe\n\n  const studioUrl =\n    (value?._ref &&\n      schemaType.studioUrl?.({\n        id: value?._ref,\n        type: loadableReferenceInfo?.result?.type,\n      })) ||\n    null\n\n  const renderOption = useCallback(\n    (option: any) => {\n      return (\n        <PreviewCard as=\"button\" type=\"button\" radius={2}>\n          <Box paddingX={3} paddingY={1}>\n            <OptionPreview\n              referenceType={schemaType}\n              document={option.hit.published}\n              getReferenceInfo={getReferenceInfoMemo}\n            />\n          </Box>\n        </PreviewCard>\n      )\n    },\n    [schemaType, getReferenceInfoMemo]\n  )\n\n  const preview = loadableReferenceInfo.result?.preview.published\n\n  const isEditing = hasFocusAtRef || !value?._ref\n\n  // --- click outside handling\n  const clickOutsideBoundaryRef = useRef<HTMLDivElement | null>(null)\n  const autocompletePortalRef = useRef<HTMLDivElement | null>(null)\n  const createButtonMenuPortalRef = useRef<HTMLDivElement | null>(null)\n  useOnClickOutside(\n    [clickOutsideBoundaryRef, autocompletePortalRef, createButtonMenuPortalRef],\n    () => {\n      if (hasFocusAtRef) {\n        onPathFocus([])\n      }\n    }\n  )\n\n  return (\n    <>\n      {!featureInfo.isLoading && !featureInfo.enabled && (\n        <DisabledFeatureWarning value={value} onClearValue={handleClear} />\n      )}\n      {(featureInfo.isLoading || featureInfo.enabled) && (\n        <Stack space={1}>\n          {isEditing ? (\n            <Stack space={2} ref={clickOutsideBoundaryRef}>\n              <ChangeIndicator path={path} isChanged={changed} hasFocus={!!focused}>\n                <div ref={autocompletePopoverReferenceElementRef}>\n                  <ReferenceAutocomplete\n                    {...elementProps}\n                    data-testid=\"autocomplete\"\n                    loading={searchState.isLoading}\n                    referenceElement={autocompletePopoverReferenceElementRef.current}\n                    portalRef={autocompletePortalRef}\n                    id={inputId || ''}\n                    options={searchState.hits.map((hit) => ({\n                      value: hit.id,\n                      hit: hit,\n                    }))}\n                    onFocus={handleAutocompleteFocus}\n                    radius={1}\n                    placeholder=\"Type to search\"\n                    onKeyDown={handleAutocompleteKeyDown}\n                    readOnly={readOnly}\n                    disabled={loadableReferenceInfo.isLoading}\n                    onQueryChange={handleQueryChange}\n                    searchString={searchState.searchString}\n                    onChange={handleChange}\n                    filterOption={NO_FILTER}\n                    renderOption={renderOption}\n                    openButton={{onClick: handleAutocompleteOpenButtonClick}}\n                  />\n                </div>\n              </ChangeIndicator>\n            </Stack>\n          ) : (\n            <ChangeIndicator path={path} isChanged={changed} hasFocus={!!focused}>\n              <Card\n                padding={0}\n                border\n                flex={1}\n                radius={1}\n                tone={\n                  readOnly\n                    ? 'transparent'\n                    : loadableReferenceInfo.error || errors.length > 0\n                    ? 'critical'\n                    : 'default'\n                }\n              >\n                <Flex align=\"center\" padding={1}>\n                  {studioUrl ? (\n                    <PreviewCard\n                      as=\"a\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      href={studioUrl}\n                      data-as=\"a\"\n                      flex={1}\n                      padding={1}\n                      paddingRight={3}\n                      radius={2}\n                      tone=\"inherit\"\n                      __unstable_focusRing\n                      tabIndex={0}\n                      onFocus={handleFocus}\n                      ref={elementProps.ref}\n                    >\n                      <PreviewReferenceValue\n                        value={value}\n                        referenceInfo={loadableReferenceInfo}\n                        showStudioUrlIcon\n                        hasStudioUrl={!!studioUrl}\n                        type={schemaType}\n                      />\n                    </PreviewCard>\n                  ) : (\n                    <PreviewCard\n                      flex={1}\n                      padding={1}\n                      paddingRight={3}\n                      radius={2}\n                      tone=\"inherit\"\n                      __unstable_focusRing\n                      tabIndex={0}\n                      onFocus={handleFocus}\n                      ref={elementProps.ref}\n                    >\n                      <PreviewReferenceValue\n                        value={value}\n                        referenceInfo={loadableReferenceInfo}\n                        showStudioUrlIcon\n                        type={schemaType}\n                      />\n                    </PreviewCard>\n                  )}\n\n                  <Inline paddingX={1}>\n                    <MenuButton\n                      button={\n                        <Button\n                          padding={2}\n                          mode=\"bleed\"\n                          icon={EllipsisVerticalIcon}\n                          data-testid=\"menu-button\"\n                        />\n                      }\n                      id={`${inputId}-menuButton`}\n                      menu={\n                        <Menu>\n                          {!readOnly && (\n                            <>\n                              <MenuItem\n                                text=\"Clear\"\n                                tone=\"critical\"\n                                icon={ClearIcon}\n                                data-testid=\"menu-item-clear\"\n                                onClick={handleClear}\n                              />\n\n                              <MenuItem\n                                text=\"Replace\"\n                                icon={ReplaceIcon}\n                                data-testid=\"menu-item-replace\"\n                                onClick={handleReplace}\n                              />\n                            </>\n                          )}\n                        </Menu>\n                      }\n                      placement=\"right\"\n                      popover={{portal: true, tone: 'default'}}\n                    />\n                  </Inline>\n                </Flex>\n                {showWeakRefMismatch && (\n                  <AlertStrip\n                    padding={1}\n                    title=\"Reference strength mismatch\"\n                    status=\"warning\"\n                    data-testid=\"alert-reference-strength-mismatch\"\n                  >\n                    <Stack space={3}>\n                      <Text as=\"p\" muted size={1}>\n                        This reference is <em>{weakIs}</em>, but according to the current schema it\n                        should be <em>{weakShouldBe}.</em>\n                      </Text>\n\n                      <Text as=\"p\" muted size={1}>\n                        {schemaType.weak ? (\n                          <>\n                            It will not be possible to delete the \"{preview?.title}\"-document\n                            without first removing this reference.\n                          </>\n                        ) : (\n                          <>\n                            This makes it possible to delete the \"{preview?.title}\"-document without\n                            first deleting this reference, leaving this field referencing a\n                            nonexisting document.\n                          </>\n                        )}\n                      </Text>\n                      <Button\n                        onClick={handleFixStrengthMismatch}\n                        text={<>Convert to {weakShouldBe} reference</>}\n                        tone=\"caution\"\n                      />\n                    </Stack>\n                  </AlertStrip>\n                )}\n\n                {loadableReferenceInfo.error && (\n                  <AlertStrip\n                    padding={1}\n                    title=\"Unable to load reference metadata\"\n                    status=\"warning\"\n                    data-testid=\"alert-reference-info-failed\"\n                  >\n                    <Stack space={3}>\n                      <Text as=\"p\" muted size={1}>\n                        Error: {loadableReferenceInfo.error.message}\n                      </Text>\n                      <Button\n                        onClick={loadableReferenceInfo.retry!}\n                        text={<>Retry</>}\n                        tone=\"primary\"\n                      />\n                    </Stack>\n                  </AlertStrip>\n                )}\n              </Card>\n            </ChangeIndicator>\n          )}\n        </Stack>\n      )}\n    </>\n  )\n}\n","import {createContext} from 'react'\nimport {UserColorManager} from './types'\n\nexport const UserColorManagerContext = createContext<UserColorManager | null>(null)\n","import {useContext} from 'react'\nimport {empty} from 'rxjs'\nimport {useMemoObservable} from 'react-rx'\nimport {UserColorManagerContext} from './context'\nimport {UserColor, UserColorManager} from './types'\n\n/** @internal */\nexport function useUserColorManager(): UserColorManager {\n  const userColorManager = useContext(UserColorManagerContext)\n\n  if (!userColorManager) {\n    throw new Error('UserColorManager: missing context value')\n  }\n\n  return userColorManager\n}\n\n/** @internal */\nexport function useUserColor(userId: string | null): UserColor {\n  const manager = useUserColorManager()\n\n  return useMemoObservable(userId ? manager.listen(userId) : empty(), [userId], manager.get(null))\n}\n","import {Observable} from 'rxjs'\nimport {shareReplay} from 'rxjs/operators'\nimport {hues, ColorHueKey, COLOR_HUES, ColorTintKey} from '@sanity/color'\nimport {ThemeColorSchemeKey} from '@sanity/ui'\nimport {UserColorHue, UserColorManager, UserColor, UserId} from './types'\n\n/** @internal */\nexport interface UserColorManagerOptions {\n  anonymousColor?: UserColor\n  userStore?: {me: Observable<{id: string} | null>}\n  colors?: Record<UserColorHue, UserColor>\n  currentUserColor?: UserColorHue\n  scheme: ThemeColorSchemeKey\n}\n\nconst DEFAULT_CURRENT_USER_HUE: ColorHueKey = 'purple'\n\n// Exclude green and red because they can be confused with \"add\" and \"remove\"\n// Exclude gray because it looks like \"color not found\"\nconst USER_COLOR_EXCLUDE_HUES = ['green', 'red', 'gray']\n\nconst defaultHues: ColorHueKey[] = COLOR_HUES.filter(\n  (hue) => !USER_COLOR_EXCLUDE_HUES.includes(hue)\n)\n\nconst getTints = (scheme: ThemeColorSchemeKey): Record<string, ColorTintKey> => {\n  const isDarkScheme = scheme === 'dark'\n\n  return {\n    background: isDarkScheme ? '900' : '100',\n    border: isDarkScheme ? '700' : '300',\n    text: isDarkScheme ? '200' : '700',\n  }\n}\n\nconst getDefaultColors = (scheme: ThemeColorSchemeKey): Record<ColorHueKey, UserColor> => {\n  const {background, border, text} = getTints(scheme)\n\n  return defaultHues.reduce((colors, hue) => {\n    colors[hue] = {\n      name: hue,\n      background: hues[hue][background].hex,\n      border: hues[hue][border].hex,\n      text: hues[hue][text].hex,\n      tints: hues[hue],\n    }\n    return colors\n  }, {} as Record<ColorHueKey, UserColor>)\n}\n\nconst getAnonymousColor = (scheme: ThemeColorSchemeKey): UserColor => {\n  const {background, border, text} = getTints(scheme)\n\n  return {\n    name: 'gray',\n    background: hues.gray[background].hex,\n    border: hues.gray[border].hex,\n    text: hues.gray[text].hex,\n    tints: hues.gray,\n  }\n}\n\n/** @internal */\nexport function createUserColorManager(options: UserColorManagerOptions): UserColorManager {\n  const {\n    anonymousColor: anonymousColorProp,\n    colors,\n    currentUserColor: currentUserColorProp,\n    scheme,\n  } = options\n\n  const userColors = colors || getDefaultColors(scheme)\n  const anonymousColor = anonymousColorProp || getAnonymousColor(scheme)\n  const currentUserColor = currentUserColorProp || DEFAULT_CURRENT_USER_HUE\n\n  if (!userColors.hasOwnProperty(currentUserColor)) {\n    throw new Error(`'colors' must contain 'currentUserColor' (${currentUserColor})`)\n  }\n\n  const userColorKeys: UserColorHue[] = Object.keys(userColors)\n  const subscriptions = new Map<UserId, Observable<UserColor>>()\n  const previouslyAssigned = new Map<UserId, UserColorHue>()\n  const assignedCounts: Record<UserColorHue, number> = userColorKeys.reduce((counts, color) => {\n    counts[color] = 0\n    return counts\n  }, {} as Record<UserColorHue, number>)\n\n  // This isn't really needed because we're reusing subscriptions,\n  // but is useful for debugging and poses a minimal overhead\n  const assigned = new Map<UserId, UserColorHue>()\n\n  let currentUserId: UserId | null\n\n  if (options?.userStore) {\n    options.userStore.me.subscribe((user) => setCurrentUser(user ? user.id : null))\n  }\n\n  return {get, listen}\n\n  function get(userId: UserId | null): UserColor {\n    if (!userId) {\n      return anonymousColor\n    }\n\n    return userColors[getUserHue(userId)]\n  }\n\n  function getUserHue(userId: UserId): UserColorHue {\n    if (userId === currentUserId) {\n      return currentUserColor\n    }\n\n    const assignedHue = assigned.get(userId)\n    if (assignedHue) {\n      return assignedHue\n    }\n\n    // Prefer to reuse the color previously assigned, BUT:\n    // ONLY if it's unused -or- there are no other unused colors\n    const prevHue = previouslyAssigned.get(userId)\n    if (prevHue && (assignedCounts[prevHue] === 0 || !hasUnusedColor())) {\n      return assignHue(userId, prevHue)\n    }\n\n    // Prefer \"static\" color based on user ID if unused\n    const preferredHue = getPreferredHue(userId)\n    if (assignedCounts[preferredHue] === 0) {\n      return assignHue(userId, preferredHue)\n    }\n\n    // Fall back to least used color, with a preference on the previous\n    // used color if there are ties for least used\n    return assignHue(userId, getLeastUsedHue(prevHue))\n  }\n\n  function listen(userId: string): Observable<UserColor> {\n    let subscription = subscriptions.get(userId)\n    if (subscription) {\n      return subscription\n    }\n\n    const hue = getUserHue(userId)\n    subscription = getObservableColor(userId, hue)\n    subscriptions.set(userId, subscription)\n    return subscription\n  }\n\n  function assignHue(userId: string, hue: UserColorHue): UserColorHue {\n    assigned.set(userId, hue)\n    previouslyAssigned.set(userId, hue)\n    assignedCounts[hue]++\n    return hue\n  }\n\n  function unassignHue(userId: string, hue: UserColorHue) {\n    assigned.delete(userId)\n    assignedCounts[hue]--\n  }\n\n  function getUnusedColor(): UserColorHue | undefined {\n    return userColorKeys.find((colorHue) => assignedCounts[colorHue] === 0)\n  }\n\n  function hasUnusedColor(): boolean {\n    return Boolean(getUnusedColor())\n  }\n\n  function getLeastUsedHue(tieBreakerPreference?: UserColorHue): UserColorHue {\n    let leastUses = +Infinity\n    let leastUsed: UserColorHue[] = []\n\n    userColorKeys.forEach((colorHue) => {\n      const uses = assignedCounts[colorHue]\n      if (uses === leastUses) {\n        leastUsed.push(colorHue)\n      } else if (uses < leastUses) {\n        leastUses = uses\n        leastUsed = [colorHue]\n      }\n    })\n\n    return tieBreakerPreference && leastUsed.includes(tieBreakerPreference)\n      ? tieBreakerPreference\n      : leastUsed[0]\n  }\n\n  function getObservableColor(userId: string, hue: UserColorHue): Observable<UserColor> {\n    return new Observable<UserColor>((subscriber) => {\n      const userColor = userColors[hue]\n      subscriber.next(userColor)\n      return () => {\n        subscriptions.delete(userId)\n        unassignHue(userId, hue)\n      }\n    }).pipe(shareReplay({refCount: true}))\n  }\n\n  function setCurrentUser(userId: string | null) {\n    currentUserId = userId\n    assignedCounts[currentUserColor] += userId ? 1 : -1\n  }\n\n  function getPreferredHue(userId: string): UserColorHue {\n    let hash = 0\n    for (let i = 0; i < userId.length; i++) {\n      // eslint-disable-next-line no-bitwise\n      hash = ((hash << 5) - hash + userId.charCodeAt(i)) | 0\n    }\n    return userColorKeys[Math.abs(hash) % userColorKeys.length]\n  }\n}\n","import React, {useMemo} from 'react'\nimport {useColorScheme} from '../studio'\nimport {UserColorManagerContext} from './context'\nimport {UserColorManager} from './types'\nimport {createUserColorManager} from './manager'\n\n/** @internal */\nexport interface UserColorManagerProviderProps {\n  children: React.ReactNode\n  manager?: UserColorManager\n}\n\n/** @internal */\nexport function UserColorManagerProvider({\n  children,\n  manager: managerFromProps,\n}: UserColorManagerProviderProps): React.ReactElement {\n  const {scheme} = useColorScheme()\n\n  const manager = useMemo(() => {\n    return managerFromProps || createUserColorManager({scheme})\n  }, [managerFromProps, scheme])\n\n  return (\n    <UserColorManagerContext.Provider value={manager}>{children}</UserColorManagerContext.Provider>\n  )\n}\n","import {\n  IndexTuple,\n  isIndexSegment,\n  isIndexTuple,\n  isKeyedObject,\n  isKeySegment,\n  KeyedSegment,\n  Path,\n  PathSegment,\n} from '@sanity/types'\nimport {isRecord} from '../../util'\n\nconst rePropName =\n  /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g\nconst reKeySegment = /_key\\s*==\\s*['\"](.*)['\"]/\n\n/** @internal */\nexport function pathToString(path: Path): string {\n  if (!Array.isArray(path)) {\n    throw new Error('Path is not an array')\n  }\n\n  return path.reduce<string>((target, segment, i) => {\n    const segmentType = typeof segment\n    if (segmentType === 'number') {\n      return `${target}[${segment}]`\n    }\n\n    if (segmentType === 'string') {\n      const separator = i === 0 ? '' : '.'\n      return `${target}${separator}${segment}`\n    }\n\n    if (isKeySegment(segment) && segment._key) {\n      return `${target}[_key==\"${segment._key}\"]`\n    }\n\n    if (Array.isArray(segment)) {\n      const [from, to] = segment\n      return `${target}[${from}:${to}]`\n    }\n\n    throw new Error(`Unsupported path segment \\`${JSON.stringify(segment)}\\``)\n  }, '')\n}\n\n/** @internal */\nexport function getValueAtPath(rootValue: unknown, path: Path): unknown {\n  const segment = path[0]\n  if (!segment) {\n    return rootValue\n  }\n\n  const tail = path.slice(1)\n  if (isIndexSegment(segment)) {\n    return getValueAtPath(Array.isArray(rootValue) ? rootValue[segment] : undefined, tail)\n  }\n\n  if (isKeySegment(segment)) {\n    return getValueAtPath(\n      Array.isArray(rootValue) ? rootValue.find((item) => item._key === segment._key) : undefined,\n      tail\n    )\n  }\n\n  if (typeof segment === 'string') {\n    return getValueAtPath(isRecord(rootValue) ? rootValue[segment] : undefined, tail)\n  }\n\n  throw new Error(`Unknown segment type ${JSON.stringify(segment)}`)\n}\n\n/** @internal */\nexport function findIndex(array: unknown[], segment: PathSegment): number {\n  if (typeof segment !== 'number' && !isKeySegment(segment)) {\n    return -1\n  }\n\n  return typeof segment === 'number'\n    ? segment\n    : array.findIndex((item) => isKeyedObject(item) && item._key === segment._key)\n}\n\n/** @internal */\nexport function stringToPath(path: string): Path {\n  const segments = path.match(rePropName)\n  if (!segments) {\n    throw new Error('Invalid path string')\n  }\n\n  return segments.map(normalizePathSegment)\n}\n\n/** @internal */\nexport function normalizePathSegment(segment: string): PathSegment {\n  if (isIndexSegment(segment)) {\n    return normalizeIndexSegment(segment)\n  }\n\n  if (isKeySegment(segment)) {\n    return normalizeKeySegment(segment)\n  }\n\n  if (isIndexTuple(segment)) {\n    return normalizeIndexTupleSegment(segment)\n  }\n\n  return segment\n}\n\n/** @internal */\nexport function normalizeIndexSegment(segment: string): PathSegment {\n  return Number(segment.replace(/[^\\d]/g, ''))\n}\n\n/** @internal */\nexport function normalizeKeySegment(segment: string): KeyedSegment {\n  const segments = segment.match(reKeySegment)\n  if (!segments) {\n    throw new Error('Invalid key segment')\n  }\n\n  return {_key: segments[1]}\n}\n\n/** @internal */\nexport function normalizeIndexTupleSegment(segment: string): IndexTuple {\n  const [from, to] = segment.split(':').map((seg) => (seg === '' ? seg : Number(seg)))\n  return [from, to]\n}\n\n/** @internal */\nexport function pathsAreEqual(pathA: Path, pathB: Path): boolean {\n  if (pathA.length !== pathB.length) {\n    return false\n  }\n\n  return pathA.every((segmentA, index) => {\n    const segmentB = pathB[index]\n    if (isKeySegment(segmentA) && isKeySegment(segmentB)) {\n      return segmentA._key === segmentB._key\n    }\n\n    if (isIndexSegment(segmentA)) {\n      return Number(segmentA) === Number(segmentB)\n    }\n\n    if (isIndexTuple(segmentA) && isIndexTuple(segmentB)) {\n      return segmentA[0] === segmentB[0] && segmentA[1] === segmentB[1]\n    }\n\n    return segmentA === segmentB\n  })\n}\n\n/** @internal */\nexport function getItemKey(arrayItem: unknown): string | undefined {\n  return isKeyedObject(arrayItem) ? arrayItem._key : undefined\n}\n\n/** @internal */\nexport function getItemKeySegment(arrayItem: unknown): KeyedSegment | undefined {\n  const key = getItemKey(arrayItem)\n  return key ? {_key: key} : undefined\n}\n\n/** @internal */\nexport function isEmptyObject(item: unknown): boolean {\n  return typeof item === 'object' && item !== null && Object.keys(item).length <= 0\n}\n","import {isIndexSegment, isKeySegment, isIndexTuple, Path, KeyedSegment} from '@sanity/types'\nimport {UserColorManager, UserColor} from '../../../user-color'\nimport {stringToPath, pathToString} from '../../paths/helpers'\nimport {\n  Annotation,\n  Diff,\n  ItemDiff,\n  ArrayDiff,\n  ObjectDiff,\n  StringDiff,\n  StringDiffSegment,\n} from '../../types'\n\n/** @internal */\nexport function getAnnotationColor(\n  colorManager: UserColorManager,\n  annotation?: Annotation | null\n): UserColor {\n  return colorManager.get(annotation?.author || null)\n}\n\n/** @internal */\nexport function getAnnotationAtPath(diff: Diff, diffPath: string | Path): Annotation | undefined {\n  const path: Path = Array.isArray(diffPath) ? diffPath : stringToPath(diffPath)\n\n  return getAnnotationAt(diff, path)\n}\n\n/** @internal */\nexport function getDiffAtPath(diff: Diff, diffPath: string | Path): Diff | undefined {\n  const path: Path = Array.isArray(diffPath) ? diffPath : stringToPath(diffPath)\n  return getDiffAt(diff, path)\n}\n\nfunction getAnnotationAt(diff: Diff, path: Path): Annotation | undefined {\n  const diffAt = getDiffAt(diff, path)\n  if (!diffAt) {\n    return undefined\n  }\n\n  if (diffAt.action === 'unchanged') {\n    return undefined\n  }\n\n  return diffAt.annotation || undefined\n}\n\n// eslint-disable-next-line complexity\nfunction getDiffAt(diff: Diff, path: Path, parentPath: Path = []): Diff | undefined {\n  if (path.length === 0) {\n    return diff\n  }\n\n  const segment = path[0]\n  const tail = path.slice(1)\n\n  if (isIndexTuple(segment)) {\n    throw new Error('Index tuples are not supported in diff paths')\n  }\n\n  if (isIndexSegment(segment) || isKeySegment(segment)) {\n    const location = isIndexSegment(segment) ? `at index ${segment}` : `with key ${segment._key}`\n    if (diff.type !== 'array') {\n      warn(`Failed to get item ${location} at path ${pathToString(parentPath)} (not an array)`)\n      return undefined\n    }\n\n    const itemDiff = diff.items.find(\n      isIndexSegment(segment)\n        ? (item) => item.toIndex === segment\n        : (item) => itemMatchesKey(item, segment)\n    )\n\n    if (!itemDiff) {\n      warn(`Failed to get item ${location} at path ${pathToString(parentPath)} (item missing)`)\n      return undefined\n    }\n\n    return getDiffAt(itemDiff.diff, tail, parentPath.concat(segment))\n  }\n\n  if (diff.type !== 'object') {\n    warn(`Failed to get property ${segment} at path ${pathToString(parentPath)} (not an object)`)\n    return undefined\n  }\n\n  const fieldDiff = diff.fields[segment]\n  if (typeof fieldDiff === 'undefined') {\n    warn(\n      `Failed to get property ${segment} at path ${pathToString(parentPath)} (field did not exist)`\n    )\n    return undefined\n  }\n\n  return getDiffAt(fieldDiff, tail, parentPath.concat(segment))\n}\n\n/* eslint-disable no-console, @typescript-eslint/no-unused-vars */\nfunction warn(msg: string) {\n  //console.warn(msg)\n}\n/* eslint-enable no-console, @typescript-eslint/no-unused-vars */\n\nfunction itemMatchesKey(item: ItemDiff, key: KeyedSegment) {\n  const itemDiff = item.diff\n  return itemDiff.type !== 'object' || !itemDiff.toValue ? false : itemDiff.toValue._key === key\n}\n\n/** @internal */\nexport type DiffVisitor = (diff: Diff | StringDiffSegment, path: Path) => boolean\n\n/**\n * Visit all diffs in tree, until visitor returns false\n *\n * @param diff - Diff to visit\n * @param visitor - Visitor function, return false to stop from going deeper\n *\n * @internal\n */\nexport function visitDiff(\n  diff: Diff | StringDiffSegment,\n  visitor: DiffVisitor,\n  path: Path = []\n): void {\n  if (!visitor(diff, path)) {\n    return\n  }\n\n  if (diff.type === 'array') {\n    visitArrayDiff(diff, visitor, path)\n    return\n  }\n\n  if (diff.type === 'object') {\n    visitObjectDiff(diff, visitor, path)\n    return\n  }\n\n  if (diff.type === 'string') {\n    visitStringDiff(diff, visitor, path)\n  }\n}\n\nfunction visitArrayDiff(diff: ArrayDiff, visitor: DiffVisitor, path: Path) {\n  if (diff.action === 'unchanged') {\n    return\n  }\n\n  diff.items.forEach((itemDiff) => {\n    const _key = itemDiff.diff.type === 'object' && (itemDiff.diff.toValue?._key as string)\n    const segment = _key ? {_key} : getItemDiffIndex(itemDiff)\n    visitDiff(itemDiff.diff, visitor, path.concat(segment))\n  })\n}\n\nfunction visitObjectDiff(diff: ObjectDiff, visitor: DiffVisitor, path: Path) {\n  if (diff.action === 'unchanged') {\n    return\n  }\n\n  Object.keys(diff.fields).forEach((fieldName) => {\n    const fieldDiff = diff.fields[fieldName]\n    visitDiff(fieldDiff, visitor, path.concat(fieldName))\n  })\n}\n\nfunction visitStringDiff(diff: StringDiff, visitor: DiffVisitor, path: Path) {\n  if (diff.action === 'unchanged') {\n    return\n  }\n\n  diff.segments.forEach((segment) => {\n    visitDiff(segment, visitor, path)\n  })\n}\n\nfunction getItemDiffIndex(itemDiff: ItemDiff): number {\n  return typeof itemDiff.toIndex === 'undefined' ? itemDiff.fromIndex || 0 : itemDiff.toIndex\n}\n","import {Path} from '@sanity/types'\nimport {useMemo} from 'react'\nimport {UserColor, useUserColorManager} from '../../../user-color'\nimport {Annotation, Diff} from '../../types'\nimport {getAnnotationColor, getAnnotationAtPath} from './helpers'\n\n/** @internal */\nexport function useAnnotationColor(annotation?: Annotation | null): UserColor {\n  const userColorManager = useUserColorManager()\n\n  return getAnnotationColor(userColorManager, annotation)\n}\n\n/** @internal */\nexport function useDiffAnnotationColor(diff: Diff, path: string | Path = []): UserColor {\n  const userColorManager = useUserColorManager()\n  const annotation = useMemo(() => getAnnotationAtPath(diff, path), [diff, path])\n\n  return useMemo(\n    () => getAnnotationColor(userColorManager, annotation),\n    [annotation, userColorManager]\n  )\n}\n","import {Path} from '@sanity/types'\nimport {Tooltip, TooltipProps, Text, Stack, Flex, Inline, Label} from '@sanity/ui'\nimport React from 'react'\nimport {LegacyLayerProvider, UserAvatar} from '../../../components'\nimport {useTimeAgo} from '../../../hooks'\nimport {useUser} from '../../../store'\nimport {AnnotationDetails, Diff} from '../../types'\nimport {getAnnotationAtPath, useAnnotationColor} from '../annotations'\n\n/** @internal */\nexport interface DiffTooltipProps extends TooltipProps {\n  children: React.ReactElement\n  description?: React.ReactNode\n  diff: Diff\n  path?: Path | string\n}\n\n/** @internal */\nexport interface DiffTooltipWithAnnotationsProps extends TooltipProps {\n  annotations: AnnotationDetails[]\n  children: React.ReactElement\n  description?: React.ReactNode\n}\n\n/** @internal */\nexport function DiffTooltip(props: DiffTooltipProps | DiffTooltipWithAnnotationsProps) {\n  if ('diff' in props) {\n    const {diff, path = [], ...restProps} = props\n    const annotation = getAnnotationAtPath(diff, path)\n\n    return <DiffTooltipWithAnnotation {...restProps} annotations={annotation ? [annotation] : []} />\n  }\n\n  return <DiffTooltipWithAnnotation {...props} />\n}\n\nfunction DiffTooltipWithAnnotation(props: DiffTooltipWithAnnotationsProps) {\n  const {annotations, children, description = 'Changed', ...restProps} = props\n\n  if (!annotations) {\n    return children\n  }\n\n  const content = (\n    <Stack padding={3} space={2}>\n      <Label size={1} style={{textTransform: 'uppercase'}} muted>\n        {description}\n      </Label>\n      <Stack space={2}>\n        {annotations.map((annotation, idx) => (\n          <AnnotationItem annotation={annotation} key={idx} />\n        ))}\n      </Stack>\n    </Stack>\n  )\n\n  return (\n    <LegacyLayerProvider zOffset=\"paneFooter\">\n      <Tooltip\n        content={content}\n        // data-placement={restProps.placement}\n        portal\n        allowedAutoPlacements={['top', 'bottom']}\n        {...restProps}\n      >\n        {children}\n      </Tooltip>\n    </LegacyLayerProvider>\n  )\n}\n\nfunction AnnotationItem({annotation}: {annotation: AnnotationDetails}) {\n  const {author, timestamp} = annotation\n  const [user] = useUser(author)\n  const color = useAnnotationColor(annotation)\n  const timeAgo = useTimeAgo(timestamp, {minimal: true})\n\n  return (\n    <Inline space={2}>\n      <Flex\n        align=\"center\"\n        paddingRight={3}\n        style={{\n          backgroundColor: color.background,\n          color: color.text,\n          borderRadius: 'calc(23px / 2)',\n        }}\n      >\n        <UserAvatar user={author} />\n        <Inline paddingLeft={2}>\n          <Text muted size={1} style={{color: color.text}}>\n            {user ? user.displayName : 'Loading…'}\n          </Text>\n        </Inline>\n      </Flex>\n      <Text as=\"time\" muted size={1} dateTime={timestamp}>\n        {timeAgo}\n      </Text>\n    </Inline>\n  )\n}\n","import {Path} from '@sanity/types'\nimport React, {forwardRef, useMemo} from 'react'\nimport {Card, rem} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {getAnnotationAtPath, useAnnotationColor} from '../annotations'\nimport {Annotation, Diff} from '../../types'\nimport {DiffTooltip} from './DiffTooltip'\n\n/** @internal */\nexport interface DiffCardProps {\n  annotation?: Annotation\n  as?: React.ElementType | keyof JSX.IntrinsicElements\n  diff?: Diff\n  disableHoverEffect?: boolean\n  path?: Path | string\n  tooltip?: {description?: React.ReactNode} | boolean\n}\n\nconst StyledCard = styled(Card)`\n  --diff-card-radius: ${({theme}) => rem(theme.sanity.radius[2])};\n  --diff-card-bg-color: ${({theme}) => theme.sanity.color.card.enabled.bg};\n\n  max-width: 100%;\n  position: relative;\n  border-radius: var(--diff-card-radius);\n\n  &:not(del) {\n    text-decoration: none;\n  }\n\n  &[data-hover] {\n    &::after {\n      content: '';\n      display: block;\n      position: absolute;\n      left: 0;\n      right: 0;\n      bottom: 0;\n    }\n\n    &:hover {\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n\n      &::after {\n        bottom: -3px;\n        border-top: 1px solid var(---diff-card-bg-color);\n        border-bottom: 2px solid currentColor;\n        border-bottom-left-radius: var(--diff-card-radius);\n        border-bottom-right-radius: var(--diff-card-radius);\n      }\n    }\n\n    [data-from-to-layout]:hover & {\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n\n      &::after {\n        bottom: -3px;\n        border-top: 1px solid var(---diff-card-bg-color);\n        border-bottom: 2px solid currentColor;\n        border-bottom-left-radius: var(--diff-card-radius);\n        border-bottom-right-radius: var(--diff-card-radius);\n      }\n    }\n  }\n`\n\nconst EMPTY_PATH: Path = []\n\n/** @internal */\nexport const DiffCard = forwardRef(function DiffCard(\n  props: DiffCardProps & Omit<React.HTMLProps<HTMLElement>, 'as' | 'height'>,\n  ref\n) {\n  const {\n    annotation: annotationProp,\n    as = 'div',\n    children,\n    className,\n    diff,\n    disableHoverEffect,\n    path = EMPTY_PATH,\n    style = {},\n    tooltip,\n    ...restProps\n  } = props\n\n  const annotation = useMemo(\n    () => annotationProp || getAnnotationAtPath(diff!, path),\n    [annotationProp, diff, path]\n  )\n\n  const color = useAnnotationColor(annotation)\n\n  const element = (\n    <StyledCard\n      {...restProps}\n      as={as}\n      className={className}\n      data-hover={disableHoverEffect || !annotation ? undefined : ''}\n      ref={ref}\n      radius={1}\n      style={{\n        ...style,\n        backgroundColor: color.background,\n        color: color.text,\n      }}\n    >\n      {children}\n    </StyledCard>\n  )\n\n  if (tooltip && annotation) {\n    return (\n      <DiffTooltip\n        annotations={[annotation]}\n        description={tooltip && typeof tooltip === 'object' && tooltip.description}\n      >\n        {element}\n      </DiffTooltip>\n    )\n  }\n\n  return element\n})\n","import React from 'react'\nimport {Box, rem, Text} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {FromToIndex, Annotation, FieldChangeNode} from '../../types'\nimport {getAnnotationAtPath} from '../annotations'\nimport {DiffCard} from './DiffCard'\n\nconst RoundedCard = styled.div`\n  border-radius: ${({theme}) => rem(theme.sanity.radius[2])};\n  padding: ${({theme}) => rem(theme.sanity.space[1])};\n`\n\nconst AnnotationText = styled(Text)`\n  &:not([hidden]) {\n    color: inherit;\n  }\n`\n\n/** @internal */\nexport function ChangeTitleSegment(props: {\n  change?: FieldChangeNode\n  segment: string | FromToIndex\n}) {\n  const {change, segment} = props\n\n  if (typeof segment === 'string') {\n    return (\n      <Box style={segment.length > 30 ? {maxWidth: 100} : {}}>\n        <Text title={segment} size={1} weight=\"semibold\" textOverflow=\"ellipsis\">\n          {segment}\n        </Text>\n      </Box>\n    )\n  }\n\n  const {hasMoved, fromIndex, toIndex, annotation} = segment\n  const created = typeof fromIndex === 'undefined'\n  const deleted = typeof toIndex === 'undefined'\n  if (created) {\n    // Item was created\n    return <CreatedTitleSegment annotation={annotation} change={change} toIndex={toIndex} />\n  }\n\n  if (deleted) {\n    // Item was deleted\n    return <DeletedTitleSegment annotation={annotation} fromIndex={fromIndex} />\n  }\n\n  if (hasMoved && typeof toIndex !== 'undefined' && typeof fromIndex !== 'undefined') {\n    // Item was moved\n    return <MovedTitleSegment annotation={annotation} fromIndex={fromIndex} toIndex={toIndex} />\n  }\n\n  // Changed/unchanged\n  const readableIndex = (toIndex || 0) + 1\n  return (\n    <Box padding={1}>\n      <Text size={1} weight=\"semibold\">\n        #{readableIndex}\n      </Text>\n    </Box>\n  )\n}\n\nfunction CreatedTitleSegment(props: {\n  annotation: Annotation | undefined\n  change?: FieldChangeNode\n  toIndex?: number\n}) {\n  const {annotation: annotationProp, change, toIndex = 0} = props\n  const readableIndex = toIndex + 1\n  const description = `Added in position ${readableIndex}`\n  const content = <>#{readableIndex}</>\n  const diffAnnotation = change?.diff ? getAnnotationAtPath(change.diff, []) : undefined\n  const annotation = diffAnnotation || annotationProp\n\n  if (annotation) {\n    return (\n      <DiffCard annotation={annotation} tooltip={{description}} as={RoundedCard}>\n        <AnnotationText\n          size={1}\n          weight=\"semibold\"\n          forwardedAs=\"ins\"\n          style={{textDecoration: 'none'}}\n        >\n          {content}\n        </AnnotationText>\n      </DiffCard>\n    )\n  }\n\n  return (\n    <Text size={1} weight=\"semibold\">\n      {content}\n    </Text>\n  )\n}\n\nfunction DeletedTitleSegment(props: {annotation: Annotation | undefined; fromIndex?: number}) {\n  const {annotation, fromIndex = 0} = props\n  const readableIndex = fromIndex + 1\n  const description = `Removed from position ${readableIndex}`\n  return (\n    <DiffCard annotation={annotation || null} as={RoundedCard} tooltip={{description}}>\n      <AnnotationText size={1} weight=\"semibold\" forwardedAs=\"del\">\n        #{readableIndex}\n      </AnnotationText>\n    </DiffCard>\n  )\n}\n\nfunction MovedTitleSegment(props: {\n  annotation: Annotation | undefined\n  fromIndex: number\n  toIndex: number\n}) {\n  const {annotation, fromIndex, toIndex} = props\n  const indexDiff = toIndex - fromIndex\n  const indexSymbol = indexDiff < 0 ? '↑' : '↓'\n  const positions = Math.abs(indexDiff)\n  const description = `Moved ${positions} position${positions === 1 ? '' : 's'} ${\n    indexDiff < 0 ? 'up' : 'down'\n  }`\n\n  return (\n    <>\n      <Box padding={1}>\n        <AnnotationText size={1} weight=\"semibold\">\n          #{toIndex + 1}\n        </AnnotationText>\n      </Box>\n      <DiffCard annotation={annotation} as={RoundedCard} tooltip={{description}}>\n        <AnnotationText size={1} weight=\"semibold\">\n          {indexSymbol}\n          {Math.abs(indexDiff)}\n        </AnnotationText>\n      </DiffCard>\n    </>\n  )\n}\n","import React from 'react'\nimport {Breadcrumbs, Text} from '@sanity/ui'\nimport {ChangeTitlePath, FieldChangeNode} from '../../types'\nimport {ChangeTitleSegment} from './ChangeTitleSegment'\n\n/** @internal */\nexport function ChangeBreadcrumb(props: {change?: FieldChangeNode; titlePath: ChangeTitlePath}) {\n  const {change, titlePath} = props\n\n  return (\n    <Breadcrumbs\n      separator={\n        <Text muted size={1}>\n          /\n        </Text>\n      }\n    >\n      {titlePath.map((titleSegment, idx) => {\n        const showSegment = typeof titleSegment === 'string' || !change || change.showIndex\n\n        if (!showSegment) {\n          return null\n        }\n\n        return <ChangeTitleSegment change={change} key={idx} segment={titleSegment} />\n      })}\n    </Breadcrumbs>\n  )\n}\n","import {ConditionalProperty, ConditionalPropertyCallbackContext, CurrentUser} from '@sanity/types'\nimport {omit} from 'lodash'\nimport {useMemo, useRef} from 'react'\nimport {isRecord} from '../../util'\n\nexport function isThenable(value: unknown): value is Promise<unknown> {\n  return isRecord(value) && typeof value?.then === 'function'\n}\n\nexport function omitDeprecatedRole(user: CurrentUser): Omit<CurrentUser, 'role'> {\n  return omit(user, 'role')\n}\n\nexport function useCheckCondition(\n  checkProperty: ConditionalProperty,\n  checkPropertyName: string,\n  context: ConditionalPropertyCallbackContext\n): boolean {\n  const {currentUser, document, parent, value} = context\n\n  const didWarn = useRef(false)\n\n  return useMemo(() => {\n    let isTrueIsh = false\n\n    if (typeof checkProperty === 'boolean' || checkProperty === undefined) {\n      return checkProperty || false\n    }\n\n    try {\n      isTrueIsh = checkProperty({\n        document,\n        parent,\n        value,\n        currentUser,\n      })\n    } catch (err) {\n      console.error(\n        `An error occurred while running the callback from \\`${checkPropertyName}\\`: ${err.message}`\n      )\n      return false\n    }\n\n    if (isThenable(isTrueIsh) && !didWarn.current) {\n      console.warn(\n        `The \\`${checkPropertyName}\\` option is either a promise or a promise returning function. Async callbacks for \\`${checkPropertyName}\\` option is not currently supported.`\n      )\n      return false\n    }\n\n    if (typeof isTrueIsh === 'undefined') {\n      console.warn(\n        `The \\`${checkPropertyName}\\` option is or returned \\`undefined\\`. \\`${checkPropertyName}\\` should return a boolean.`\n      )\n    }\n\n    return isTrueIsh\n  }, [checkProperty, document, parent, value, currentUser, checkPropertyName])\n}\n","import {SanityDocument, ConditionalProperty} from '@sanity/types'\nimport {useCurrentUser} from '../../store'\nimport {useUnique} from '../../util'\nimport {useCheckCondition} from './utils'\n\n/**\n * @internal Not yet a stable API\n */\nexport interface ConditionalPropertyProps {\n  parent?: unknown\n  value: unknown\n  document?: SanityDocument\n  checkProperty: ConditionalProperty\n  checkPropertyKey: string\n}\n\n/**\n * Resolve a callback function to a boolean using the passed arguments\n *\n * @internal Not yet a stable API\n */\nconst useConditionalProperty = (props: ConditionalPropertyProps): boolean => {\n  const {checkProperty = false, checkPropertyKey, document, parent, value: valueProp} = props\n  const value = useUnique(valueProp)\n  const currentUser = useCurrentUser()\n\n  const isPropertyTruthy = useCheckCondition(checkProperty, checkPropertyKey, {\n    currentUser,\n    document,\n    parent,\n    value,\n  })\n\n  return isPropertyTruthy\n}\n\nexport {useConditionalProperty as unstable_useConditionalProperty}\n","import {Path} from '@sanity/types'\nimport {createContext} from 'react'\n\n/** @internal */\nexport const DiffContext = createContext<{path: Path}>({path: []})\n","import {SchemaType, ObjectSchemaType} from '@sanity/types'\n\n/** @internal */\nexport interface FieldValueError {\n  message: string\n  value: unknown\n}\n\n/** @internal */\nexport function getValueError(value: unknown, schemaType: SchemaType): FieldValueError | undefined {\n  const {jsonType} = schemaType\n  const valueType = Array.isArray(value) ? 'array' : typeof value\n\n  if (value === null || valueType === 'undefined') {\n    return undefined\n  }\n\n  if (valueType !== jsonType) {\n    return {message: `Value is ${valueType}, expected ${jsonType}`, value}\n  }\n\n  if (isObjectType(schemaType) && isObjectValue(value)) {\n    for (const field of schemaType.fields) {\n      const fieldError = getValueError(value[field.name], field.type as SchemaType)\n      if (fieldError) {\n        return fieldError\n      }\n    }\n  }\n\n  return undefined\n}\n\nfunction isObjectType(schemaType: SchemaType): schemaType is ObjectSchemaType {\n  return schemaType.jsonType === 'object'\n}\n\nfunction isObjectValue(value: unknown): value is Record<string, unknown> {\n  return value !== null && !Array.isArray(value) && typeof value === 'object'\n}\n","import {ArraySchemaType, isTypedObject, SchemaType} from '@sanity/types'\nimport {Diff} from '../types'\n\nexport function resolveTypeName(value: unknown): string {\n  return isTypedObject(value) ? value._type : resolveJSType(value)\n}\n\nexport function getArrayDiffItemType(\n  diff: Diff,\n  schemaType: ArraySchemaType\n): {fromType?: SchemaType; toType?: SchemaType} {\n  if (diff.action === 'added') {\n    return {\n      toType: resolveArrayMemberType(schemaType, diff.toValue),\n    }\n  }\n\n  if (diff.action === 'changed') {\n    return {\n      fromType: resolveArrayMemberType(schemaType, diff.fromValue),\n      toType: resolveArrayMemberType(schemaType, diff.toValue),\n    }\n  }\n\n  if (diff.action === 'removed') {\n    return {\n      fromType: resolveArrayMemberType(schemaType, diff.fromValue),\n    }\n  }\n\n  // unchanged\n  return {\n    toType: resolveArrayMemberType(schemaType, diff.toValue),\n  }\n}\n\nfunction resolveArrayMemberType(\n  schemaType: ArraySchemaType,\n  value: unknown\n): SchemaType | undefined {\n  const typeName = resolveTypeName(value)\n  const declared = schemaType.of.find((candidate) => candidate.name === typeName)\n  if (declared) {\n    return declared as any\n  }\n\n  return (schemaType.of.length === 1 ? schemaType.of[0] : undefined) as any\n}\n\nfunction resolveJSType(val: unknown) {\n  if (Array.isArray(val)) {\n    return 'array'\n  }\n\n  if (val === null) {\n    return 'null'\n  }\n\n  return typeof val\n}\n","export const ANNOTATION_SYMBOLS = [\n  // [startTag, endTag]\n  ['\\uF050', '\\uF051'],\n  ['\\uF052', '\\uF053'],\n  ['\\uF054', '\\uF055'],\n  ['\\uF056', '\\uF057'],\n  ['\\uF058', '\\uF059'],\n  ['\\uF05A', '\\uF05B'],\n  ['\\uF05C', '\\uF05D'],\n  ['\\uF05F', '\\uF060'],\n  ['\\uF061', '\\uF062'],\n  ['\\uF063', '\\uF064'],\n  ['\\uF065', '\\uF066'],\n  ['\\uF067', '\\uF068'],\n  ['\\uF069', '\\uF06A'],\n  ['\\uF06B', '\\uF06C'],\n  ['\\uF06E', '\\uF06F'],\n  ['\\uF070', '\\uF071'],\n  ['\\uF072', '\\uF073'],\n  ['\\uF074', '\\uF075'],\n  ['\\uF076', '\\uF077'],\n  ['\\uF078', '\\uF079'],\n  ['\\uF07A', '\\uF07B'],\n  ['\\uF07C', '\\uF07D'],\n  ['\\uF07E', '\\uF07F'],\n  ['\\uF080', '\\uF081'],\n  ['\\uF082', '\\uF083'],\n  ['\\uF084', '\\uF085'],\n  ['\\uF086', '\\uF087'],\n  ['\\uF088', '\\uF089'],\n  ['\\uF08A', '\\uF08B'],\n  ['\\uF08C', '\\uF08D'],\n  ['\\uF08E', '\\uF08F'],\n]\n\nexport const CHILD_SYMBOL = '\\uF0D0'\n\nexport const DECORATOR_SYMBOLS = [\n  // [startTag, endTag]\n  ['\\uF000', '\\uF001'],\n  ['\\uF002', '\\uF003'],\n  ['\\uF004', '\\uF005'],\n  ['\\uF006', '\\uF007'],\n  ['\\uF008', '\\uF009'],\n  ['\\uF00A', '\\uF00B'],\n  ['\\uF00C', '\\uF00D'],\n  ['\\uF00F', '\\uF010'],\n  ['\\uF011', '\\uF012'],\n  ['\\uF013', '\\uF014'],\n  ['\\uF015', '\\uF016'],\n  ['\\uF017', '\\uF018'],\n  ['\\uF019', '\\uF01A'],\n  ['\\uF01B', '\\uF01C'],\n  ['\\uF01E', '\\uF01F'],\n  ['\\uF020', '\\uF021'],\n]\n\nexport const EMPTY_BLOCK_SYMBOL = '\\u21B2'\n\nexport const INLINE_SYMBOLS = [\n  '\\uF090',\n  '\\uF091',\n  '\\uF092',\n  '\\uF093',\n  '\\uF094',\n  '\\uF095',\n  '\\uF096',\n  '\\uF097',\n  '\\uF098',\n  '\\uF099',\n  '\\uF09A',\n  '\\uF09B',\n  '\\uF09C',\n  '\\uF09D',\n  '\\uF09E',\n  '\\uF09F',\n  '\\uF0A0',\n  '\\uF0A1',\n  '\\uF0A2',\n  '\\uF0A3',\n  '\\uF0A4',\n  '\\uF0A5',\n  '\\uF0A6',\n  '\\uF0A7',\n  '\\uF0A8',\n  '\\uF0A9',\n  '\\uF0AA',\n  '\\uF0AB',\n  '\\uF0AC',\n  '\\uF0AD',\n  '\\uF0AE',\n  '\\uF0AF',\n  '\\uF0B0',\n  '\\uF0B1',\n  '\\uF0B2',\n  '\\uF0B3',\n  '\\uF0B4',\n  '\\uF0B5',\n  '\\uF0B6',\n  '\\uF0B7',\n  '\\uF0B8',\n  '\\uF0B9',\n  '\\uF0BA',\n  '\\uF0BB',\n  '\\uF0BC',\n  '\\uF0BD',\n  '\\uF0BE',\n  '\\uF0BF',\n]\n\nexport const TRAILING_SPACE_SYMBOL = '\\u205F'\n\nexport const SEGMENT_START_SYMBOL = '\\u2060'\n","import {flatten, isEqual, orderBy} from 'lodash'\nimport {ArraySchemaType, Block, ObjectField, ObjectSchemaType, SchemaType} from '@sanity/types'\nimport {\n  diff_match_patch as DiffMatchPatch,\n  DIFF_DELETE,\n  DIFF_EQUAL,\n  DIFF_INSERT,\n} from 'diff-match-patch'\nimport {\n  ArrayDiff,\n  DiffComponent,\n  DiffComponentOptions,\n  ObjectDiff,\n  StringDiffSegment,\n} from '../../../types'\nimport * as TextSymbols from './symbols'\n\nimport {\n  InlineSymbolMap,\n  MarkSymbolMap,\n  PortableTextBlock,\n  PortableTextDiff,\n  PortableTextChild,\n  SpanTypeSchema,\n} from './types'\n\nconst dmp = new DiffMatchPatch()\n\nexport const UNKNOWN_TYPE_NAME = '_UNKOWN_TYPE_'\n\nexport function hasPTMemberType(schemaType: ArraySchemaType): boolean {\n  return schemaType.of.some(isPTSchemaType)\n}\n\nconst startMarkSymbols = TextSymbols.DECORATOR_SYMBOLS.map((set) => set[0]).concat(\n  TextSymbols.ANNOTATION_SYMBOLS.map((set) => set[0])\n)\nconst endMarkSymbols = TextSymbols.DECORATOR_SYMBOLS.map((set) => set[1]).concat(\n  TextSymbols.ANNOTATION_SYMBOLS.map((set) => set[1])\n)\nconst allSymbols = startMarkSymbols\n  .concat(endMarkSymbols)\n  .concat(TextSymbols.INLINE_SYMBOLS)\n  .concat(TextSymbols.CHILD_SYMBOL)\n  .concat(TextSymbols.SEGMENT_START_SYMBOL)\nconst symbolRegex = new RegExp(`${allSymbols.join('|')}`, 'g')\nconst segmentRegex = new RegExp(`${allSymbols.join('|')}|\\n`, 'g')\n\ninterface BlockSchemaType extends ObjectSchemaType {\n  diffComponent: DiffComponent<ObjectDiff<Block>> | DiffComponentOptions<ObjectDiff<Block>>\n}\n\nexport function isPTSchemaType(schemaType: SchemaType): schemaType is BlockSchemaType {\n  return schemaType.jsonType === 'object' && schemaType.name === 'block'\n}\n\nexport function isHeader(node: PortableTextBlock): boolean {\n  return !!node.style && ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'].includes(node.style)\n}\n\nexport function findChildDiff(diff: ObjectDiff, child: PortableTextChild): ObjectDiff {\n  const childrenDiff = diff.fields.children as ArrayDiff\n  return childrenDiff.items\n    .filter(\n      (item: any) =>\n        item.diff.isChanged && (item.diff.toValue === child || item.diff.fromValue === child)\n    )\n    .map((item: any) => item.diff)\n    .map((childDiff: any) => childDiff as ObjectDiff)[0]\n}\n\nexport function getChildSchemaType(\n  fields: ObjectField<SchemaType>[],\n  child: PortableTextChild\n): ObjectSchemaType | undefined {\n  const childrenField = fields.find((f) => f.name === 'children')\n  const cSchemaType =\n    (childrenField &&\n      childrenField.type &&\n      childrenField.type.jsonType === 'array' &&\n      (childrenField.type.of.find((type) => type.name === child._type) as ObjectSchemaType)) ||\n    undefined\n  return cSchemaType\n}\n\nexport function getDecorators(spanSchemaType: SpanTypeSchema): {title: string; value: string}[] {\n  if (spanSchemaType.decorators) {\n    return orderBy(spanSchemaType.decorators, ['value'], ['asc'])\n  }\n  return []\n}\n\nexport function getAnnotations(spanSchemaType: SpanTypeSchema): ObjectSchemaType[] {\n  if (spanSchemaType.annotations) {\n    return orderBy(spanSchemaType.annotations, ['name'], ['asc'])\n  }\n  return []\n}\n\nexport function isDecorator(name: string, schemaType: SpanTypeSchema): boolean {\n  return getDecorators(schemaType).some((dec) => dec.value === name)\n}\n\nexport function blockToSymbolizedText(\n  diff: ObjectDiff,\n  block: PortableTextBlock | undefined,\n  decoratorMap: MarkSymbolMap,\n  annotationMap: MarkSymbolMap,\n  inlineMap: InlineSymbolMap\n): string {\n  if (!block) {\n    return ''\n  }\n  return block.children\n    .map((child) => {\n      let returned = child.text?.replace(symbolRegex, '') || '' // Make sure symbols aren't in the text already\n      if (child._type === 'span') {\n        // Attatch stringdiff segments\n        const spanDiff = findSpanDiffFromChild(diff, child)\n        const textDiff = spanDiff?.fields.text\n        if (\n          textDiff &&\n          textDiff.toValue === child.text &&\n          textDiff.type === 'string' &&\n          textDiff.action !== 'unchanged'\n        ) {\n          returned = textDiff.segments\n            .filter((seg: any) => seg.action !== 'removed')\n            .map((seg: any) => seg.text.replace(symbolRegex, ''))\n            .join(TextSymbols.SEGMENT_START_SYMBOL)\n        }\n        if (child.marks) {\n          child.marks.forEach((mark) => {\n            const _isDecorator = !!decoratorMap[mark]\n            if (_isDecorator) {\n              returned = `${decoratorMap[mark][0]}${returned}${decoratorMap[mark][1]}`\n            } else if (annotationMap[mark]) {\n              returned = `${annotationMap[mark][0]}${returned}${annotationMap[mark][1]}`\n            }\n          })\n        }\n      } else {\n        returned = inlineMap[child._key]\n      }\n      return `${TextSymbols.CHILD_SYMBOL}${returned}`\n    })\n    .join('')\n}\n\nexport function createPortableTextDiff(\n  diff: ObjectDiff,\n  schemaType: ObjectSchemaType\n): PortableTextDiff {\n  const displayValue =\n    diff.action === 'removed'\n      ? (diff.fromValue as PortableTextBlock)\n      : (diff.toValue as PortableTextBlock)\n  const _diff: PortableTextDiff = {\n    ...diff,\n    origin: diff,\n    displayValue,\n  }\n\n  if (displayValue) {\n    const annotationMap: MarkSymbolMap = {}\n    const decoratorMap: MarkSymbolMap = {}\n    const inlineMap: InlineSymbolMap = {}\n    const spanSchemaType = getChildSchemaType(schemaType.fields, {_key: 'bogus', _type: 'span'})\n    if (spanSchemaType) {\n      getDecorators(spanSchemaType).forEach((dec, index) => {\n        decoratorMap[dec.value] = TextSymbols.DECORATOR_SYMBOLS[index]\n      })\n    }\n    const allMarkDefs = getAllMarkDefs(_diff.origin)\n    allMarkDefs.forEach((markDef, index) => {\n      annotationMap[markDef._key] = TextSymbols.ANNOTATION_SYMBOLS[index]\n    })\n    const inlines = getInlineObjects(_diff.origin)\n    inlines.forEach((inline, index) => {\n      inlineMap[inline._key] = TextSymbols.INLINE_SYMBOLS[index]\n    })\n    const fromText = blockToSymbolizedText(\n      _diff.origin,\n      _diff.fromValue as PortableTextBlock,\n      decoratorMap,\n      annotationMap,\n      inlineMap\n    )\n    const toText = blockToSymbolizedText(\n      _diff.origin,\n      _diff.toValue as PortableTextBlock,\n      decoratorMap,\n      annotationMap,\n      inlineMap\n    )\n    const toPseudoValue = {\n      ...displayValue,\n      children: [\n        {\n          _type: 'span',\n          _key: 'pseudoSpanKey',\n          text: toText,\n          marks: [],\n        },\n      ],\n    }\n    const fromPseudoValue = {\n      displayValue,\n      children: [\n        {\n          _type: 'span',\n          _key: 'pseudoSpanKey',\n          text: fromText,\n          marks: [],\n        },\n      ],\n    }\n    const pseudoDiff = {\n      origin: diff,\n      action: 'changed',\n      type: 'object',\n      displayValue: toPseudoValue,\n      fromValue: fromPseudoValue,\n      toValue: toPseudoValue,\n      isChanged: true,\n      fields: {\n        children: {\n          action: 'changed',\n          type: 'array',\n          isChanged: true,\n          items: [\n            {\n              diff: {\n                action: 'changed',\n                type: 'object',\n                isChanged: true,\n                fields: {\n                  text: {\n                    type: 'string',\n                    action: 'changed',\n                    isChanged: true,\n                    fromValue: fromText,\n                    toValue: toText,\n                    segments: buildSegments(fromText, toText).map((seg) => ({\n                      ...seg,\n                      ...(_diff.action !== 'unchanged' && _diff.annotation\n                        ? {annotation: _diff.annotation} // Fallback if we can't find a spesific original diff\n                        : {}),\n                    })),\n                  },\n                },\n                fromValue: fromPseudoValue.children[0],\n                toValue: toPseudoValue.children[0],\n              },\n              annotation: null,\n              fromIndex: 0,\n              toIndex: 0,\n              hasMoved: false,\n            },\n          ],\n          fromValue: fromPseudoValue.children,\n          toValue: toPseudoValue.children,\n        },\n      },\n    }\n    return pseudoDiff as PortableTextDiff\n  }\n  throw new Error('Can not display this diff')\n}\n\nfunction buildSegments(fromInput: string, toInput: string): StringDiffSegment[] {\n  const segments: StringDiffSegment[] = []\n  const dmpDiffs = dmp.diff_main(fromInput, toInput)\n  dmp.diff_cleanupEfficiency(dmpDiffs)\n\n  let fromIdx = 0\n  let toIdx = 0\n  for (const [op, text] of dmpDiffs) {\n    switch (op) {\n      case DIFF_EQUAL:\n        segments.push({\n          type: 'stringSegment',\n          action: 'unchanged',\n          text,\n        })\n        fromIdx += text.length\n        toIdx += text.length\n        break\n      case DIFF_DELETE:\n        segments.push({\n          type: 'stringSegment',\n          action: 'removed',\n          text: fromInput.substring(fromIdx, fromIdx + text.length),\n          annotation: null,\n        })\n        fromIdx += text.length\n        break\n      case DIFF_INSERT:\n        segments.push({\n          type: 'stringSegment',\n          action: 'added',\n          text: toInput.substring(toIdx, toIdx + text.length),\n          annotation: null,\n        })\n        toIdx += text.length\n        break\n      default:\n      // Do nothing\n    }\n  }\n  // Clean up so that marks / symbols are treated as an own segment\n  return flatten(\n    segments.map((seg) => {\n      const newSegments: StringDiffSegment[] = []\n      if (seg.text.length > 1) {\n        const markMatches = [...seg.text.matchAll(segmentRegex)]\n        let lastIndex = -1\n        markMatches.forEach((match) => {\n          const index = match.index || 0\n          if (index > lastIndex) {\n            newSegments.push({...seg, text: seg.text.substring(lastIndex + 1, index)})\n            newSegments.push({...seg, text: match[0]})\n          }\n          if (match === markMatches[markMatches.length - 1]) {\n            newSegments.push({...seg, text: seg.text.substring(index + 1)})\n          }\n          lastIndex = index\n        })\n        if (markMatches.length === 0) {\n          newSegments.push(seg)\n        }\n      } else {\n        newSegments.push(seg)\n      }\n      return newSegments\n    })\n  )\n}\n\nexport function getInlineObjects(diff: ObjectDiff): PortableTextChild[] {\n  const allChildren = [\n    ...(diff.toValue ? diff.toValue.children.filter((cld: any) => cld._type !== 'span') : []),\n  ]\n  const previousChildren = diff.fromValue\n    ? diff.fromValue.children.filter((cld: any) => cld._type !== 'span')\n    : []\n  previousChildren.forEach((oCld: any) => {\n    if (!allChildren.some((cld) => oCld._key === cld._key)) {\n      allChildren.push(oCld)\n    }\n  })\n  return orderBy(allChildren, ['_key'], ['asc']) as PortableTextChild[]\n}\n\nexport function findSpanDiffFromChild(\n  diff: ObjectDiff,\n  child: PortableTextChild\n): ObjectDiff | undefined {\n  // Find span in original diff which has a string segment similar to the one from the input\n  const candidate =\n    diff.fields.children &&\n    diff.fields.children.action !== 'unchanged' &&\n    diff.fields.children.type === 'array' &&\n    diff.fields.children.items.find(\n      (item: any) =>\n        item.diff &&\n        item.diff.type === 'object' &&\n        (item.diff.action === 'removed'\n          ? item.diff.fromValue && item.diff.fromValue._key === child._key\n          : (item.diff.toValue && item.diff.toValue._key) === child._key)\n    )\n  if (candidate) {\n    return candidate.diff as ObjectDiff\n  }\n  return undefined\n}\n\nexport function findAnnotationDiff(diff: ObjectDiff, markDefKey: string): ObjectDiff | undefined {\n  return (\n    ((diff.fields.markDefs &&\n      diff.fields.markDefs.isChanged &&\n      diff.fields.markDefs.type === 'array' &&\n      diff.fields.markDefs.items.find(\n        (item: any) =>\n          item.diff &&\n          item.diff.type === 'object' &&\n          ((item.diff.toValue && item.diff.toValue._key && item.diff.toValue._key === markDefKey) ||\n            (item.diff.fromValue &&\n              item.diff.fromValue._key &&\n              item.diff.fromValue._key === markDefKey))\n      )?.diff) as ObjectDiff) || undefined\n  )\n}\n\nexport function isEmptyObject(object: PortableTextChild): boolean {\n  return (object && isEqual(Object.keys(object), ['_key', '_type'])) || false\n}\n\nexport function escapeRegExp(text: string): string {\n  return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&')\n}\n\nexport function getAllMarkDefs(diff: ObjectDiff): PortableTextChild[] {\n  const allDefs: PortableTextChild[] = [\n    ...(diff.toValue && diff.toValue.markDefs ? diff.toValue.markDefs : []),\n  ]\n  const oldDefs: PortableTextChild[] =\n    diff.fromValue && diff.fromValue.markDefs ? diff.fromValue.markDefs : []\n  oldDefs.forEach((oDef) => {\n    if (!allDefs.some((def) => oDef._key === def._key)) {\n      allDefs.push(oDef)\n    }\n  })\n  return orderBy(allDefs, ['_key'], ['asc'])\n}\n","import {DiffComponentResolver} from './types'\n\n// import diffResolvers from 'all:part:@sanity/base/diff-resolver'\nexport const diffResolvers: DiffComponentResolver[] = []\n","import React from 'react'\nimport {UserColor} from '../../../../user-color'\nimport {FieldPreviewComponent} from '../../../preview'\n\ntype BooleanProps = {\n  checked: boolean | undefined | null\n  color?: UserColor\n}\n\nexport const BooleanPreview: FieldPreviewComponent<boolean> = function BooleanPreview({\n  value,\n  schemaType,\n  color,\n}) {\n  const Preview = schemaType.options?.layout === 'checkbox' ? Checkbox : Switch\n  return <Preview checked={value} color={color} />\n}\n\nexport function Checkbox({checked, color}: BooleanProps) {\n  return (\n    <svg\n      width=\"17\"\n      height=\"17\"\n      viewBox=\"0 0 17 17\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      fill={color?.background}\n    >\n      <rect x=\"0\" y=\"0\" width=\"17\" height=\"17\" rx=\"2.5\" />\n      {typeof checked === 'undefined' && (\n        <path d=\"M4.07996 8.5H12.92\" stroke={color?.text} strokeWidth=\"2\" />\n      )}\n      {checked && <path d=\"M3.5 8L7 11.5L13.5 5\" stroke={color?.text} strokeWidth=\"2\" />}\n    </svg>\n  )\n}\n\nexport function Switch({checked, color}: BooleanProps) {\n  return (\n    <svg width=\"38\" height=\"22\" viewBox=\"0 0 38 22\" xmlns=\"http://www.w3.org/2000/svg\">\n      <rect width=\"38\" height=\"22\" rx=\"11\" fill={checked ? color?.border : color?.background} />\n      {typeof checked === 'undefined' && (\n        <rect x=\"11\" y=\"3\" width=\"16\" height=\"16\" rx=\"8\" fill=\"white\" />\n      )}\n      {checked && <rect x=\"18\" y=\"3\" width=\"16\" height=\"16\" rx=\"8\" fill=\"white\" />}\n      {typeof checked === 'boolean' && !checked && (\n        <rect x=\"4\" y=\"3\" width=\"16\" height=\"16\" rx=\"8\" fill=\"white\" />\n      )}\n    </svg>\n  )\n}\n","import {Box, Flex, Text} from '@sanity/ui'\nimport React from 'react'\nimport {DiffTooltip, FromToArrow, useDiffAnnotationColor} from '../../../diff'\nimport {BooleanDiff, DiffComponent} from '../../../types'\nimport {Checkbox, Switch} from '../preview'\n\nexport const BooleanFieldDiff: DiffComponent<BooleanDiff> = ({diff, schemaType}) => {\n  const {fromValue, toValue} = diff\n  const {title, options} = schemaType\n  const Preview = options?.layout === 'checkbox' ? Checkbox : Switch\n  const userColor = useDiffAnnotationColor(diff, [])\n\n  const showToValue = toValue !== undefined && toValue !== null\n\n  return (\n    <Flex align=\"center\">\n      <DiffTooltip diff={diff}>\n        <Flex align=\"center\">\n          <Preview checked={fromValue} color={userColor} />\n\n          {showToValue && (\n            <>\n              <Box marginX={2}>\n                <FromToArrow />\n              </Box>\n              <Preview checked={toValue} color={userColor} />\n            </>\n          )}\n        </Flex>\n      </DiffTooltip>\n\n      {showToValue && title && (\n        <Box marginLeft={2}>\n          <Text size={1} weight=\"semibold\">\n            {title}\n          </Text>\n        </Box>\n      )}\n    </Flex>\n  )\n}\n","import {Path, SanityDocument, SchemaType} from '@sanity/types'\nimport {createContext} from 'react'\nimport {ObjectDiff} from '../../types'\n\n/** @internal */\nexport type DocumentChangeContextInstance = {\n  documentId: string\n  schemaType: SchemaType\n  rootDiff: ObjectDiff | null\n  isComparingCurrent: boolean\n  FieldWrapper: React.ComponentType<{path: Path; children: React.ReactNode; hasHover: boolean}>\n  value: Partial<SanityDocument>\n}\n\n/** @internal */\nexport const DocumentChangeContext = createContext<DocumentChangeContextInstance | null>(null)\n","import {useContext} from 'react'\nimport {\n  DocumentChangeContext,\n  DocumentChangeContextInstance,\n} from '../contexts/DocumentChangeContext'\n\n/** @internal */\nexport function useDocumentChange(): DocumentChangeContextInstance {\n  const documentChange = useContext(DocumentChangeContext)\n\n  if (!documentChange) {\n    throw new Error('DocumentChange: missing context value')\n  }\n\n  return documentChange\n}\n","import {useEffect, useState} from 'react'\nimport {useClient} from '../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\n\nexport function useRefValue<T extends Record<string, any> = Record<string, any>>(\n  refId: string | undefined | null\n): T | undefined {\n  const [value, setValue] = useState<T | undefined>(undefined)\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  useEffect(() => {\n    if (!refId) {\n      return undefined\n    }\n\n    const subscription = client.observable.getDocument<T>(refId).subscribe(setValue)\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [client, refId])\n\n  // Always return undefined in the case of a falsey ref to prevent bug\n  // when going from an ID to an undefined state\n  return refId ? value : undefined\n}\n","export function getSizeDiff(prev: number | undefined, next: number | undefined): number {\n  if (!prev || !next) {\n    return 0\n  }\n\n  const increase = next - prev\n  const pct = Math.round((increase / prev) * 100)\n\n  return pct\n}\n","import {DocumentIcon} from '@sanity/icons'\nimport React, {useMemo} from 'react'\nimport {Box, Card, Flex, Text} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {DiffCard, DiffTooltip, FromTo, MetaInfo, ChangeList} from '../../../diff'\nimport {DiffComponent, ObjectDiff} from '../../../types'\nimport {useRefValue} from '../../../diff/hooks'\nimport {getSizeDiff} from './helpers'\nimport {File, FileAsset} from './types'\n\nconst SizeDiff = styled.div`\n  ${({theme}) => `\n    --size-diff-positive: ${theme.sanity.color.solid.positive.enabled.bg};\n    --size-diff-negative: ${theme.sanity.color.solid.critical.enabled.bg};\n  `}\n  &:not([hidden]) {\n    display: inline-block;\n  }\n\n  [data-number='positive'] {\n    color: var(--size-diff-positive);\n  }\n\n  [data-number='negative'] {\n    color: var(--size-diff-negative);\n  }\n`\n\nexport const FileFieldDiff: DiffComponent<ObjectDiff<File>> = ({diff, schemaType}) => {\n  const {fromValue, toValue, fields} = diff\n  const fromAsset = fromValue?.asset\n  const toAsset = toValue?.asset\n  const prev = useRefValue<FileAsset>(fromAsset?._ref)\n  const next = useRefValue<FileAsset>(toAsset?._ref)\n\n  const changedFields = Object.entries(fields)\n    .filter(([name, field]) => field.isChanged && name !== '_type')\n    .map(([name]) => name)\n\n  const didAssetChange = changedFields.includes('asset')\n\n  const nestedFields = schemaType.fields\n    .filter((field) => field.name !== 'asset' && changedFields.includes(field.name))\n    .map((field) => field.name)\n\n  // Sizes in MB TODO: improve. Apple uses 1000^2\n  const prevSize = prev?.size && prev.size / 1000 / 1000\n  const nextSize = next?.size && next.size / 1000 / 1000\n  const pctDiff = getSizeDiff(prevSize, nextSize)\n\n  const roundedPrevSize = prevSize ? prevSize.toFixed(2) : undefined\n  const roundedNextSize = nextSize ? nextSize.toFixed(2) : undefined\n\n  const cardStyles = useMemo(() => ({display: 'block', flex: 1}), [])\n\n  const from = prev && (\n    <DiffCard as=\"del\" diff={diff} path=\"asset._ref\" style={cardStyles}>\n      <MetaInfo title={prev.originalFilename || 'Untitled'} icon={DocumentIcon}>\n        <Text size={0} style={{color: 'inherit'}}>{`${roundedPrevSize}MB`}</Text>\n      </MetaInfo>\n    </DiffCard>\n  )\n\n  const to = next && (\n    <DiffCard as=\"ins\" diff={diff} path=\"asset._ref\" style={cardStyles}>\n      <MetaInfo title={next.originalFilename || 'Untitled'} icon={DocumentIcon}>\n        <Flex align=\"center\">\n          <Text size={0} style={{color: 'inherit'}}>{`${roundedNextSize}MB`}</Text>\n          {pctDiff !== 0 && (\n            <Card radius={2} padding={1} as={SizeDiff} marginLeft={2}>\n              <Text size={0} data-number={pctDiff > 0 ? 'positive' : 'negative'}>\n                {pctDiff > 0 && '+'}\n                {pctDiff}%\n              </Text>\n            </Card>\n          )}\n        </Flex>\n      </MetaInfo>\n    </DiffCard>\n  )\n\n  const FileAssetChange = (\n    <>\n      {/* Removed only */}\n      {from && !to && (\n        <DiffTooltip diff={diff} path=\"asset._ref\" description=\"Removed\">\n          {from}\n        </DiffTooltip>\n      )}\n\n      {/* Removed and added */}\n      {from && to && (\n        <DiffTooltip diff={diff} path=\"asset._ref\">\n          <FromTo from={from} layout=\"grid\" to={to} />\n        </DiffTooltip>\n      )}\n\n      {/* Added only */}\n      {!from && to && (\n        <DiffTooltip diff={diff} path=\"asset._ref\" description=\"Added\">\n          {to}\n        </DiffTooltip>\n      )}\n    </>\n  )\n\n  return (\n    <>\n      {didAssetChange && FileAssetChange}\n      {nestedFields.length > 0 && (\n        <Box marginTop={didAssetChange ? 4 : 3}>\n          <ChangeList diff={diff} schemaType={schemaType} fields={nestedFields} />\n        </Box>\n      )}\n    </>\n  )\n}\n","// @todo: use `polished` for this?\nexport function hexToRgba(hex: string, opacity: number): string {\n  const rgba = (/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex) || ([] as string[]))\n    .slice(1)\n    .map((num) => parseInt(num, 16))\n    .concat(opacity)\n  return `rgba(${rgba.join(', ')})`\n}\n\n// @todo: replace this\nexport function simpleHash(str: string): string {\n  let hash = 0\n\n  if (str.length == 0) {\n    return hash.toString()\n  }\n\n  for (let i = 0; i < str.length; i++) {\n    const char = str.charCodeAt(i)\n\n    // eslint-disable-next-line no-bitwise\n    hash = (hash << 5) - hash + char\n\n    // eslint-disable-next-line no-bitwise\n    hash &= hash // Convert to 32bit integer\n  }\n\n  return hash.toString()\n}\n\nexport function getDeviceDpr(): number {\n  const base = Math.ceil(window.devicePixelRatio || 1)\n  return Math.min(3, Math.max(1, base))\n}\n","import {Image, ImageCrop, ImageHotspot} from '@sanity/types'\nimport React from 'react'\nimport {DiffTooltip, useDiffAnnotationColor} from '../../../diff'\nimport {ObjectDiff} from '../../../types'\nimport {hexToRgba} from './helpers'\n\ninterface HotspotCropSVGProps {\n  crop?: ImageCrop\n  diff: ObjectDiff<Image>\n  hash: string\n  hotspot?: ImageHotspot\n  width?: number\n  height?: number\n}\n\nexport function HotspotCropSVG(\n  props: HotspotCropSVGProps & Omit<React.SVGProps<SVGElement>, 'ref' | 'width' | 'height'>\n) {\n  const {crop, diff, hash, hotspot, width = 100, height = 100, ...restProps} = props\n  const cropColor = useDiffAnnotationColor(diff, 'crop')\n  const hotspotColor = useDiffAnnotationColor(diff, 'hotspot')\n\n  return (\n    <svg\n      {...restProps}\n      fill=\"none\"\n      width={width}\n      height={height}\n      viewBox={`0 0 ${width} ${height}`}\n    >\n      <defs>\n        {crop && hotspot && (\n          <mask id={`mask-hotspot-${hash}`}>\n            <rect x={0} y={0} width={width} height={height} fill=\"#fff\" />\n            <HotspotSVG\n              hotspot={hotspot}\n              fill=\"#000\"\n              offset={1}\n              width={width}\n              height={height}\n              stroke=\"#000\"\n              strokeWidth={3}\n            />\n          </mask>\n        )}\n      </defs>\n\n      {crop && (\n        <DiffTooltip diff={diff} path=\"crop\" description=\"Crop changed\">\n          <g>\n            <CropSVG\n              crop={crop}\n              fill={hexToRgba(cropColor.border, 0.25)}\n              mask={hotspot ? `url(#mask-hotspot-${hash})` : undefined}\n              stroke={cropColor.border}\n              strokeWidth={1}\n              width={width}\n              height={height}\n            />\n          </g>\n        </DiffTooltip>\n      )}\n\n      {hotspot && (\n        <DiffTooltip diff={diff} path=\"hotspot\" description=\"Hotspot changed\">\n          <g>\n            <HotspotSVG\n              hotspot={hotspot}\n              fill={hexToRgba(hotspotColor.border, 0.25)}\n              stroke={hotspotColor.border}\n              strokeWidth={1}\n              width={width}\n              height={height}\n            />\n          </g>\n        </DiffTooltip>\n      )}\n    </svg>\n  )\n}\n\nfunction CropSVG({\n  crop,\n  width,\n  height,\n  ...restProps\n}: {crop: ImageCrop; width: number; height: number} & Omit<\n  React.SVGProps<SVGRectElement>,\n  'width' | 'height'\n>) {\n  const rectProps = {\n    x: crop.left * width,\n    y: crop.top * height,\n    width: (1 - crop.right - crop.left) * width,\n    height: (1 - crop.bottom - crop.top) * height,\n  }\n\n  return <rect {...restProps} {...rectProps} style={{vectorEffect: 'non-scaling-stroke'}} />\n}\n\nfunction HotspotSVG({\n  hotspot,\n  offset = 0,\n  width,\n  height,\n  ...restProps\n}: {hotspot: ImageHotspot; offset?: number; width: number; height: number} & Omit<\n  React.SVGProps<SVGEllipseElement>,\n  'width' | 'height'\n>) {\n  const ellipseProps = {\n    cx: hotspot.x * width,\n    cy: hotspot.y * height,\n    rx: (hotspot.width / 2) * width + offset,\n    ry: (hotspot.height / 2) * height + offset,\n  }\n\n  return <ellipse {...restProps} {...ellipseProps} style={{vectorEffect: 'non-scaling-stroke'}} />\n}\n","import React, {SyntheticEvent, useMemo} from 'react'\nimport {getImageDimensions, isDefaultCrop, isDefaultHotspot} from '@sanity/asset-utils'\nimport imageUrlBuilder from '@sanity/image-url'\nimport {ImageIcon} from '@sanity/icons'\nimport {Box, Card, Flex, Text} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {hues} from '@sanity/color'\nimport {useClient} from '../../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../studioClient'\nimport {MetaInfo} from '../../../diff'\nimport {useDocumentValues} from '../../../../store'\nimport {getDeviceDpr, simpleHash} from './helpers'\nimport {HotspotCropSVG} from './HotspotCropSVG'\nimport {ImagePreviewProps, MinimalAsset} from './types'\n\nconst ASSET_FIELDS = ['originalFilename']\n\n// To trigger error state, change `src` attribute to random string (\"foo\")\n// To trigger slow loading, use a throttling proxy (charles) or browser devtools\n\n// To trigger deleted state, set `id` to valid, non-existant image asset ID,\n// eg: 'image-1217bc35db5030739b7be571c79d3c401551911d-300x200-png'\n\nexport const NoImagePreview = () => (\n  <Card flex={1} tone=\"transparent\" padding={4} radius={2} height=\"stretch\">\n    <Flex align=\"center\" justify=\"center\" height=\"fill\">\n      <Text size={1} muted>\n        (no image)\n      </Text>\n    </Flex>\n  </Card>\n)\n\nconst ImageWrapper = styled.div`\n  height: 100%;\n  max-height: 190px;\n  position: relative;\n\n  /* Ideally the checkerboard component currently in the form builder should be made available and used here */\n  background-color: ${hues.gray[100].hex};\n  background-image: linear-gradient(45deg, ${hues.gray[50].hex} 25%, transparent 25%),\n    linear-gradient(-45deg, ${hues.gray[50].hex} 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, ${hues.gray[50].hex} 75%),\n    linear-gradient(-45deg, transparent 75%, ${hues.gray[50].hex} 75%);\n  background-size: 16px 16px;\n  background-position: 0 0, 0 8px, 8px -8px, -8px 0;\n\n  &::after {\n    content: '';\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    box-shadow: inset 0 0 0 1px var(--card-border-color);\n    pointer-events: none;\n  }\n\n  &[data-changed] {\n    opacity: 0.45;\n  }\n`\n\nconst Image = styled.img`\n  display: block;\n  flex: 1;\n  min-height: 0;\n  object-fit: contain;\n  width: 100%;\n  height: 100%;\n\n  &[data-action='removed'] {\n    opacity: 0.45;\n  }\n`\n\nconst HotspotDiff = styled.div`\n  svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n`\n\nexport function ImagePreview(props: ImagePreviewProps): React.ReactElement {\n  const {id, action, diff, hotspot, crop, is} = props\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const [imageError, setImageError] = React.useState<SyntheticEvent<HTMLImageElement, Event>>()\n  const {value: asset} = useDocumentValues<MinimalAsset>(id, ASSET_FIELDS)\n  const dimensions = getImageDimensions(id)\n  const imageBuilder = useMemo(() => imageUrlBuilder(client), [client])\n\n  // undefined = still loading, null = its gone\n  const assetIsDeleted = asset === null\n\n  const title = (asset && asset.originalFilename) || 'Untitled'\n  const imageSource = imageBuilder\n    .image(id)\n    .height(190) // Should match container max-height\n    .dpr(getDeviceDpr())\n    .fit('max')\n\n  const assetChanged = diff.fromValue?.asset?._ref !== diff.toValue?.asset?._ref\n\n  const metaAction = action === 'changed' ? undefined : action\n\n  return (\n    <Flex direction=\"column\" height=\"fill\" flex={1}>\n      <Box flex={1} padding={2} paddingBottom={0}>\n        <Flex\n          as={ImageWrapper}\n          direction=\"column\"\n          data-changed={is === 'from' && assetChanged ? '' : undefined}\n          data-error={imageError ? '' : undefined}\n        >\n          {!assetIsDeleted && !imageError && (\n            <Image\n              src={imageSource.toString() || ''}\n              alt={title}\n              data-action={metaAction}\n              onError={setImageError}\n              width={dimensions.width}\n              height={dimensions.height}\n            />\n          )}\n\n          {(assetIsDeleted || imageError) && (\n            <Box paddingY={5}>\n              <Text size={1} muted align=\"center\">\n                {assetIsDeleted ? 'Image is deleted' : 'Error loading image'}\n              </Text>\n            </Box>\n          )}\n\n          <HotspotDiff>\n            <HotspotCropSVG\n              crop={crop && !isDefaultCrop(crop) ? crop : undefined}\n              diff={diff}\n              hash={simpleHash(`${imageSource.toString() || ''}-${is}`)}\n              hotspot={hotspot && !isDefaultHotspot(hotspot) ? hotspot : undefined}\n              width={dimensions.width}\n              height={dimensions.height}\n            />\n          </HotspotDiff>\n        </Flex>\n      </Box>\n\n      <MetaInfo title={title} icon={ImageIcon} markRemoved={assetChanged && is === 'from'}>\n        {metaAction ? (\n          <div>{metaAction}</div>\n        ) : (\n          <div>\n            {dimensions.width} × {dimensions.height}\n          </div>\n        )}\n      </MetaInfo>\n    </Flex>\n  )\n}\n","import {Image} from '@sanity/types'\nimport React from 'react'\nimport {Box, Card, Text} from '@sanity/ui'\nimport {DiffCard, DiffTooltip, ChangeList, getAnnotationAtPath} from '../../../diff'\nimport {DiffComponent, ObjectDiff} from '../../../types'\nimport {FromTo} from '../../../diff/components'\nimport {ImagePreview, NoImagePreview} from './ImagePreview'\n\nconst IMAGE_META_FIELDS = ['crop', 'hotspot']\nconst BASE_IMAGE_FIELDS = ['asset', ...IMAGE_META_FIELDS]\n\nconst CARD_STYLES = {\n  flex: 1,\n}\n\nexport const ImageFieldDiff: DiffComponent<ObjectDiff<Image>> = ({diff, schemaType}) => {\n  const {fromValue, toValue, fields, isChanged} = diff\n  const fromRef = fromValue?.asset?._ref\n  const toRef = toValue?.asset?._ref\n  const assetAnnotation = getAnnotationAtPath(diff, ['asset', '_ref'])\n\n  // Get all the changed fields within this image field\n  const changedFields = Object.keys(fields).filter(\n    (name) => fields[name].isChanged && name !== '_type'\n  )\n\n  const nestedFields = schemaType.fields\n    .filter(\n      (field) => !BASE_IMAGE_FIELDS.includes(field.name) && changedFields.includes(field.name)\n    )\n    .map((field) => field.name)\n\n  let assetAction: 'changed' | 'added' | 'removed' = 'changed'\n  if (!fromRef && toRef) {\n    assetAction = 'added'\n  } else if (!toRef && fromRef) {\n    assetAction = 'removed'\n  }\n\n  const didAssetChange = changedFields.includes('asset')\n  const didCropChange = changedFields.includes('crop')\n  const didHotspotChange = changedFields.includes('hotspot')\n  const didMetaChange = didCropChange || didHotspotChange\n  const showImageDiff = didAssetChange || didMetaChange\n  const showMetaChange = didMetaChange && !didAssetChange\n\n  const from =\n    fromValue && fromRef ? (\n      <DiffCard annotation={assetAnnotation} style={CARD_STYLES}>\n        <ImagePreview\n          is=\"from\"\n          id={fromRef}\n          diff={diff}\n          action={assetAction}\n          hotspot={showMetaChange && didHotspotChange ? fromValue.hotspot : undefined}\n          crop={showMetaChange && didCropChange ? fromValue.crop : undefined}\n        />\n      </DiffCard>\n    ) : (\n      <NoImagePreview />\n    )\n\n  const to =\n    toValue && toRef ? (\n      <DiffCard annotation={assetAnnotation} style={CARD_STYLES}>\n        <ImagePreview\n          is=\"to\"\n          id={toRef}\n          diff={diff}\n          hotspot={showMetaChange && didHotspotChange ? toValue.hotspot : undefined}\n          crop={showMetaChange && didCropChange ? toValue.crop : undefined}\n        />\n      </DiffCard>\n    ) : (\n      <NoImagePreview />\n    )\n\n  if (!from && !to) {\n    return (\n      <Card padding={4} radius={2} tone=\"transparent\">\n        <Text muted size={1} align=\"center\">\n          Image not set\n        </Text>\n      </Card>\n    )\n  }\n\n  if (!isChanged) {\n    return toRef ? (\n      <DiffCard annotation={assetAnnotation} style={CARD_STYLES}>\n        <ImagePreview id={toRef} is=\"to\" diff={diff} />\n      </DiffCard>\n    ) : null\n  }\n\n  const imageDiff = <FromTo align=\"center\" from={from} layout=\"grid\" to={to} />\n\n  return (\n    <>\n      {showImageDiff &&\n        (didAssetChange ? (\n          <DiffTooltip\n            annotations={assetAnnotation ? [assetAnnotation] : []}\n            description={`${assetAction[0].toUpperCase()}${assetAction.slice(1)}`}\n          >\n            {imageDiff}\n          </DiffTooltip>\n        ) : (\n          imageDiff\n        ))}\n      {nestedFields.length > 0 && (\n        <Box marginTop={showImageDiff ? 4 : 3}>\n          <ChangeList diff={diff} schemaType={schemaType} fields={nestedFields} />\n        </Box>\n      )}\n    </>\n  )\n}\n","import {Box} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {FieldPreviewComponent} from '../../../preview'\n\nconst NumberWrapper = styled.div`\n  display: inline-block;\n  word-break: break-all;\n`\n\nexport const NumberPreview: FieldPreviewComponent<string> = (props) => {\n  const {value} = props\n\n  return (\n    <Box as={NumberWrapper} paddingX={2} paddingY={1}>\n      {value}\n    </Box>\n  )\n}\n","import React from 'react'\nimport {DiffFromTo} from '../../../diff'\nimport {DiffComponent, NumberDiff} from '../../../types'\nimport {NumberPreview} from '../preview/NumberPreview'\n\nexport const NumberFieldDiff: DiffComponent<NumberDiff> = ({diff, schemaType}) => {\n  return (\n    <DiffFromTo\n      diff={diff}\n      schemaType={schemaType}\n      previewComponent={NumberPreview}\n      layout=\"inline\"\n    />\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst Quote = styled.blockquote`\n  margin: 0;\n`\n\nexport default function Blockquote({children}: {children: React.ReactNode}): JSX.Element {\n  return (\n    <div>\n      <Quote>{children}</Quote>\n    </div>\n  )\n}\n","import {Heading} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\nconst headingSizes: Record<string, number | undefined> = {\n  h1: 2,\n  h2: 1,\n  h3: 0,\n  h4: 0,\n  h5: 0,\n  h6: 0,\n}\n\nconst StyledHeading = styled(Heading)`\n  &:not([hidden]) {\n    display: inline;\n    text-transform: none;\n    margin: 0;\n\n    &::before,\n    &::after {\n      content: unset;\n    }\n  }\n`\n\nexport default function Header({\n  style,\n  children,\n}: {\n  style: string\n  children: React.ReactNode\n}): JSX.Element {\n  return <StyledHeading size={headingSizes[style]}>{children}</StyledHeading>\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst StyledParagraph = styled.p`\n  text-transform: none;\n  white-space: wrap;\n  overflow-wrap: break-word;\n  margin: 0;\n`\n\nexport default function Paragraph({children}: {children: React.ReactNode}): JSX.Element {\n  return <StyledParagraph>{children}</StyledParagraph>\n}\n","import {Box, Card, Stack, Text} from '@sanity/ui'\nimport {Path} from '@sanity/types'\nimport React, {useCallback, useContext} from 'react'\nimport {DiffContext, DiffTooltip, useDiffAnnotationColor} from '../../../../diff'\nimport {isHeader} from '../helpers'\nimport {PortableTextBlock, PortableTextDiff} from '../types'\nimport {ConnectorContext} from '../../../../../changeIndicators'\nimport Blockquote from './Blockquote'\nimport Header from './Header'\nimport Paragraph from './Paragraph'\n\nconst EMPTY_PATH: Path = []\n\nexport default function Block(props: {\n  diff: PortableTextDiff\n  block: PortableTextBlock\n  children: JSX.Element\n}): JSX.Element {\n  const {diff, block, children} = props\n  const color = useDiffAnnotationColor(diff, EMPTY_PATH)\n  const {path: fullPath} = useContext(DiffContext)\n  const {onSetFocus} = useContext(ConnectorContext)\n  const isRemoved = diff.action === 'removed'\n  let returned = children\n\n  const handleClick = useCallback(\n    (event: any) => {\n      event.stopPropagation()\n\n      if (!isRemoved) {\n        onSetFocus(fullPath)\n      }\n    },\n    [fullPath, isRemoved, onSetFocus]\n  )\n\n  if (block.style === 'blockquote') {\n    returned = <Blockquote>{returned}</Blockquote>\n  } else if (block.style && isHeader(block)) {\n    returned = <Header style={block.style}>{returned}</Header>\n  } else {\n    returned = <Paragraph>{returned}</Paragraph>\n  }\n\n  let fromStyle: string | undefined\n  // If style was changed, indicate that\n  if (\n    diff.origin.action === 'changed' &&\n    diff.origin.fields.style &&\n    diff.origin.fields.style.action === 'changed' &&\n    diff.origin.fields.style.annotation\n  ) {\n    fromStyle = diff?.origin?.fromValue?.style\n\n    const style = color ? {background: color.background, color: color.text} : {}\n\n    returned = (\n      <Card\n        padding={3}\n        border\n        radius={2}\n        style={{borderStyle: 'dotted'}}\n        diff-block-action={diff.action}\n        data-block-note={`changed_from_style_${fromStyle || 'undefined'}`}\n      >\n        <Stack space={2}>\n          <DiffTooltip\n            annotations={[diff.origin.fields.style?.annotation]}\n            diff={diff.origin.fields.style}\n          >\n            <Text size={0}>Changed block style from '{fromStyle}'</Text>\n          </DiffTooltip>\n          <Box style={style}>{returned}</Box>\n        </Stack>\n      </Card>\n    )\n  }\n\n  return (\n    <div\n      onClick={handleClick}\n      data-diff-block-action={diff.action}\n      data-block-note={`changed_from_style_${fromStyle || 'undefined'}`}\n    >\n      {returned}\n    </div>\n  )\n}\n","import {Box, Text} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const InlineBox = styled(Box)`\n  &:not([hidden]) {\n    display: inline;\n    align-items: center;\n\n    &[data-changed] {\n      cursor: pointer;\n    }\n  }\n`\n\nexport const InlineText = styled(Text)`\n  &:not([hidden]) {\n    display: inline;\n    color: inherit;\n  }\n`\n\nexport const PreviewContainer = styled(Box)`\n  &:not([hidden]) {\n    display: inline-flex;\n    align-items: center;\n\n    ${InlineBox} [data-ui=\"Text\"] {\n      opacity: 0.5;\n    }\n  }\n`\n\nexport const PopoverContainer = styled(Box)`\n  min-width: 160px;\n  max-height: 40vh;\n  overflow-y: auto;\n`\n","import {ChevronDownIcon} from '@sanity/icons'\nimport {useClickOutside, Label, Popover, Flex} from '@sanity/ui'\nimport {toString} from '@sanity/util/paths'\nimport {isKeySegment, ObjectSchemaType, Path} from '@sanity/types'\nimport React, {useCallback, useContext, useEffect, useMemo, useState} from 'react'\nimport styled from 'styled-components'\nimport {ChangeList, DiffContext, DiffTooltip, useDiffAnnotationColor} from '../../../../diff'\nimport {ObjectDiff} from '../../../../types'\nimport {PortableTextChild} from '../types'\nimport {isEmptyObject} from '../helpers'\nimport {ConnectorContext, useReportedValues} from '../../../../../changeIndicators'\nimport {InlineBox, InlineText, PopoverContainer, PreviewContainer} from './styledComponents'\n\ninterface AnnotationProps {\n  diff?: ObjectDiff\n  object: PortableTextChild\n  schemaType?: ObjectSchemaType\n  path: Path\n  children: React.ReactNode\n}\n\nconst AnnotationWrapper = styled.div`\n  text-decoration: none;\n  display: inline;\n  position: relative;\n  border: 0;\n  padding: 0;\n  border-bottom: 2px dotted currentColor;\n  box-shadow: inset 0 0 0 1px var(--card-border-color);\n  white-space: nowrap;\n  align-items: center;\n  background-color: color(var(--card-fg-color) a(10%));\n\n  &[data-changed] {\n    cursor: pointer;\n  }\n\n  &[data-removed] {\n    text-decoration: line-through;\n  }\n\n  &:hover ${PreviewContainer} {\n    opacity: 1;\n  }\n`\n\nexport function Annotation({\n  children,\n  diff,\n  object,\n  schemaType,\n  path,\n  ...restProps\n}: AnnotationProps) {\n  if (!schemaType) {\n    return <AnnotationWrapper {...restProps}>Unknown schema type</AnnotationWrapper>\n  }\n  if (diff && diff.action !== 'unchanged') {\n    return (\n      <AnnnotationWithDiff\n        {...restProps}\n        diff={diff}\n        object={object}\n        schemaType={schemaType}\n        path={path}\n      >\n        {children}\n      </AnnnotationWithDiff>\n    )\n  }\n  return <AnnotationWrapper>{children}</AnnotationWrapper>\n}\n\ninterface AnnnotationWithDiffProps {\n  diff: ObjectDiff\n  object: PortableTextChild\n  schemaType: ObjectSchemaType\n  path: Path\n  children?: React.ReactNode\n}\n\nfunction AnnnotationWithDiff({\n  diff,\n  children,\n  object,\n  schemaType,\n  path,\n  ...restProps\n}: AnnnotationWithDiffProps) {\n  const {onSetFocus} = useContext(ConnectorContext)\n  const {path: fullPath} = useContext(DiffContext)\n  const [popoverElement, setPopoverElement] = useState<HTMLDivElement | null>(null)\n  const color = useDiffAnnotationColor(diff, [])\n  const style = useMemo(\n    () => (color ? {background: color.background, color: color.text} : {}),\n    [color]\n  )\n  const isRemoved = diff.action === 'removed'\n  const [open, setOpen] = useState(false)\n  const emptyObject = object && isEmptyObject(object)\n  const markDefPath = useMemo(\n    () => [path[0]].concat(['markDefs', {_key: object._key}]),\n    [object._key, path]\n  )\n  const prefix = useMemo(\n    () =>\n      fullPath.slice(\n        0,\n        fullPath.findIndex((seg) => isKeySegment(seg) && seg._key === object._key)\n      ),\n    [fullPath, object._key]\n  )\n  const annotationPath = useMemo(() => prefix.concat(path), [path, prefix])\n  const myPath = useMemo(() => prefix.concat(markDefPath), [markDefPath, prefix])\n  const myValue = `field-${toString(myPath)}`\n  const values = useReportedValues()\n  const isEditing = useMemo(\n    () => values.filter(([p]) => p.startsWith(myValue)).length > 0,\n    [myValue, values]\n  )\n\n  useEffect(() => {\n    if (!open && isEditing) {\n      setOpen(true)\n      onSetFocus(myPath)\n    }\n  }, [isEditing, myPath, onSetFocus, open])\n\n  const handleOpenPopup = useCallback(\n    (event: any) => {\n      event.stopPropagation()\n      setOpen(true)\n      if (!isRemoved) {\n        event.preventDefault()\n        onSetFocus(annotationPath) // Go to span first\n        setTimeout(() => onSetFocus(myPath), 10) // Open edit object interface\n      }\n    },\n    [annotationPath, isRemoved, myPath, onSetFocus]\n  )\n\n  const handleClickOutside = useCallback(() => {\n    if (!isEditing) {\n      setOpen(false)\n    }\n  }, [isEditing])\n\n  useClickOutside(handleClickOutside, [popoverElement])\n\n  const annotation = (diff.action !== 'unchanged' && diff.annotation) || null\n  const annotations = useMemo(() => (annotation ? [annotation] : []), [annotation])\n\n  const popoverContent = (\n    <DiffContext.Provider value={{path: myPath}}>\n      <PopoverContainer padding={3}>\n        <div>\n          {emptyObject && (\n            <Label size={1} muted>\n              Empty {schemaType.title}\n            </Label>\n          )}\n          {!emptyObject && <ChangeList diff={diff} schemaType={schemaType} />}\n        </div>\n      </PopoverContainer>\n    </DiffContext.Provider>\n  )\n\n  return (\n    <AnnotationWrapper\n      {...restProps}\n      onClick={handleOpenPopup}\n      style={style}\n      data-changed=\"\"\n      data-removed={diff.action === 'removed' ? '' : undefined}\n    >\n      <Popover content={popoverContent} open={open} ref={setPopoverElement} portal>\n        <PreviewContainer paddingLeft={1}>\n          <DiffTooltip annotations={annotations} description={`${diff.action} annotation`}>\n            <InlineBox style={{display: 'inline-flex'}}>\n              <span>{children}</span>\n              <Flex align=\"center\" paddingX={1}>\n                <InlineText size={0}>\n                  <ChevronDownIcon />\n                </InlineText>\n              </Flex>\n            </InlineBox>\n          </DiffTooltip>\n        </PreviewContainer>\n      </Popover>\n    </AnnotationWrapper>\n  )\n}\n","import {Theme} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\nconst DecoratorWrapper = styled.span`\n  display: inline;\n  ${({theme, decoration}: {theme: Theme; decoration: string}) => {\n    switch (decoration) {\n      case 'strong':\n        return 'font-weight: bold;'\n      case 'em':\n        return 'font-style: italic;'\n      case 'underline':\n        return 'text-decoration: underline;'\n      case 'overline':\n        return 'text-decoration: overline;'\n      case 'strike-through':\n        return 'text-decoration: line-through;'\n      case 'code':\n        return `\n          font-family: ${theme.sanity.fonts.code.family};\n          background: ${theme.sanity.color.muted.default.enabled.bg};\n        `\n      default:\n        return ''\n    }\n  }}\n`\n\nexport default function Decorator({mark, children}: {mark: string; children: JSX.Element}) {\n  return <DecoratorWrapper decoration={mark}>{children}</DecoratorWrapper>\n}\n","import {ChevronDownIcon} from '@sanity/icons'\nimport {isKeySegment, ObjectSchemaType, Path} from '@sanity/types'\nimport {Card, Flex, Label, Popover, useClickOutside} from '@sanity/ui'\nimport {FOCUS_TERMINATOR, toString} from '@sanity/util/paths'\nimport React, {useCallback, useContext, useState, useEffect, useMemo} from 'react'\nimport styled from 'styled-components'\nimport {ChangeList, DiffContext, DiffTooltip, useDiffAnnotationColor} from '../../../../diff'\nimport {ObjectDiff} from '../../../../types'\nimport {PortableTextChild} from '../types'\nimport {isEmptyObject} from '../helpers'\nimport {ConnectorContext, useReportedValues} from '../../../../../changeIndicators'\nimport {Preview} from '../../../../../preview/components/Preview'\nimport {InlineBox, InlineText, PopoverContainer, PreviewContainer} from './styledComponents'\n\ninterface InlineObjectProps {\n  diff?: ObjectDiff\n  object: PortableTextChild\n  path: Path\n  schemaType?: ObjectSchemaType\n}\n\nconst InlineObjectWrapper = styled(Card)`\n  &:not([hidden]) {\n    display: inline;\n    cursor: pointer;\n    white-space: nowrap;\n    align-items: center;\n\n    &[data-removed] {\n      text-decoration: line-through;\n    }\n\n    ${InlineBox} {\n      display: inline-flex;\n    }\n  }\n`\n\nexport function InlineObject({diff, object, schemaType, ...restProps}: InlineObjectProps) {\n  if (!schemaType) {\n    return (\n      <InlineObjectWrapper {...restProps} border radius={1}>\n        Unknown schema type: {object._type}\n      </InlineObjectWrapper>\n    )\n  }\n\n  if (diff) {\n    return (\n      <InlineObjectWithDiff {...restProps} diff={diff} object={object} schemaType={schemaType} />\n    )\n  }\n\n  return (\n    <InlineObjectWrapper>\n      <Preview schemaType={schemaType} value={object} layout=\"inline\" />\n    </InlineObjectWrapper>\n  )\n}\n\ninterface InlineObjectWithDiffProps {\n  diff: ObjectDiff\n  object: PortableTextChild\n  path: Path\n  schemaType: ObjectSchemaType\n}\n\nfunction InlineObjectWithDiff({\n  diff,\n  object,\n  path,\n  schemaType,\n  ...restProps\n}: InlineObjectWithDiffProps) {\n  const {path: fullPath} = useContext(DiffContext)\n  const {onSetFocus} = useContext(ConnectorContext)\n  const color = useDiffAnnotationColor(diff, [])\n  const style = useMemo(\n    () => (color ? {background: color.background, color: color.text} : {}),\n    [color]\n  )\n  const [open, setOpen] = useState(false)\n  const emptyObject = object && isEmptyObject(object)\n  const isRemoved = diff.action === 'removed'\n  const prefix = fullPath.slice(\n    0,\n    fullPath.findIndex((seg) => isKeySegment(seg) && seg._key === object._key)\n  )\n  const myPath = prefix.concat(path)\n  const myValue = `field-${toString(myPath)}`\n  const values = useReportedValues()\n  const isEditing = values.filter(([p]) => p.startsWith(myValue)).length > 0\n\n  const focusPath = fullPath.slice(0, -1).concat(path).concat([FOCUS_TERMINATOR])\n\n  useEffect(() => {\n    if (isEditing) {\n      setOpen(true)\n      onSetFocus(focusPath)\n    }\n  }, [isEditing])\n\n  const handleOpenPopup = useCallback(\n    (event: any) => {\n      event.stopPropagation()\n      setOpen(true)\n      if (!isRemoved) {\n        onSetFocus(focusPath)\n        return\n      }\n      event.preventDefault()\n    },\n    [focusPath]\n  )\n\n  const handleClose = useCallback(() => {\n    setOpen(false)\n  }, [])\n\n  const popoverContent = (\n    <DiffContext.Provider value={{path: myPath}}>\n      <PopoverContent\n        diff={diff}\n        emptyObject={emptyObject}\n        onClose={handleClose}\n        schemaType={schemaType}\n      />\n    </DiffContext.Provider>\n  )\n\n  const annotation = (diff.action !== 'unchanged' && diff.annotation) || null\n  const annotations = annotation ? [annotation] : []\n\n  return (\n    <InlineObjectWrapper\n      {...restProps}\n      onClick={handleOpenPopup}\n      style={style}\n      data-removed={diff.action === 'removed' ? '' : undefined}\n      border\n      radius={2}\n    >\n      <Popover content={popoverContent} open={open} portal>\n        <PreviewContainer>\n          <DiffTooltip annotations={annotations} description={`${diff.action} inline object`}>\n            <InlineBox>\n              <Preview schemaType={schemaType} value={object} layout=\"inline\" />\n              <Flex align=\"center\" paddingX={1}>\n                <InlineText size={0}>\n                  <ChevronDownIcon />\n                </InlineText>\n              </Flex>\n            </InlineBox>\n          </DiffTooltip>\n        </PreviewContainer>\n      </Popover>\n    </InlineObjectWrapper>\n  )\n}\n\nfunction PopoverContent({\n  diff,\n  emptyObject,\n  onClose,\n  schemaType,\n}: {\n  diff: ObjectDiff\n  emptyObject: boolean\n  onClose: () => void\n  schemaType: ObjectSchemaType\n}) {\n  const [popoverElement, setPopoverElement] = useState<HTMLDivElement | null>(null)\n  // const {isTopLayer} = useLayer()\n\n  const handleClickOutside = useCallback(() => {\n    // Popover doesn't close at all when using this condition\n    // if (!isTopLayer) return\n    onClose()\n  }, [onClose])\n\n  useClickOutside(handleClickOutside, [popoverElement])\n\n  return (\n    <PopoverContainer ref={setPopoverElement} padding={3}>\n      {emptyObject && (\n        <Label size={1} muted>\n          Empty {schemaType.title}\n        </Label>\n      )}\n      {!emptyObject && <ChangeList diff={diff} schemaType={schemaType} />}\n    </PopoverContainer>\n  )\n}\n","import {isKeySegment, Path} from '@sanity/types'\nimport React, {SyntheticEvent, useCallback, useMemo} from 'react'\nimport {startCase} from 'lodash'\nimport {DiffCard, DiffContext} from '../../../../diff'\nimport {ObjectDiff, StringDiff, StringDiffSegment} from '../../../../types'\nimport {ConnectorContext} from '../../../../../changeIndicators'\nimport {InlineBox} from './styledComponents'\n\ninterface TextProps {\n  diff?: StringDiff\n  childDiff?: ObjectDiff\n  children: JSX.Element\n  path: Path\n  segment: StringDiffSegment\n}\n\nexport function Text({\n  diff,\n  childDiff,\n  children,\n  path,\n  segment,\n  ...restProps\n}: TextProps & Omit<React.HTMLProps<HTMLSpanElement>, 'onClick'>) {\n  const diffWithFallback = diff || childDiff\n  const hasChanged =\n    diffWithFallback && diffWithFallback.action !== 'unchanged' && segment.action !== 'unchanged'\n  if (hasChanged) {\n    return (\n      <TextWithDiff {...restProps} childDiff={childDiff} diff={diff} segment={segment} path={path}>\n        {children}\n      </TextWithDiff>\n    )\n  }\n  return <InlineBox>{children}</InlineBox>\n}\n\nexport function TextWithDiff({diff, childDiff, children, path, segment, ...restProps}: TextProps) {\n  const {onSetFocus} = React.useContext(ConnectorContext)\n  const {path: fullPath} = React.useContext(DiffContext)\n  const spanSegment = useMemo(() => path.slice(-2, 1)[0], [path])\n  const isRemoved = diff && diff.action === 'removed'\n  const prefix = fullPath.slice(\n    0,\n    fullPath.findIndex(\n      (seg) => isKeySegment(seg) && isKeySegment(spanSegment) && seg._key === spanSegment._key\n    )\n  )\n  const focusPath = prefix.concat(path)\n\n  const handleClick = useCallback(\n    (event: SyntheticEvent) => {\n      event.stopPropagation()\n      if (!isRemoved) {\n        event.preventDefault()\n        onSetFocus(focusPath)\n      }\n    },\n    [focusPath, isRemoved, onSetFocus]\n  )\n  const realSeg = diff && diff.segments.find((rSeg: any) => rSeg.text === segment.text)\n\n  const diffWithFallback = realSeg || diff || childDiff\n  const annotation =\n    (diffWithFallback && diffWithFallback.action !== 'unchanged' && diffWithFallback.annotation) ||\n    null\n  const diffCard =\n    annotation && segment.action !== 'unchanged' ? (\n      <DiffCard\n        annotation={annotation}\n        as={segment.action === 'removed' ? 'del' : 'ins'}\n        tooltip={{description: `${startCase(segment.action)} text`}}\n      >\n        {children}\n      </DiffCard>\n    ) : null\n  return (\n    <InlineBox {...restProps} onClick={handleClick} data-changed=\"\">\n      <span>\n        <>{diffCard || children}</>\n      </span>\n    </InlineBox>\n  )\n}\n","import {ObjectSchemaType, SchemaType} from '@sanity/types'\nimport {startCase, uniq, xor} from 'lodash'\nimport React, {ReactElement, useCallback, useMemo} from 'react'\nimport {DiffCard} from '../../../../diff'\nimport {ArrayDiff, ObjectDiff, StringDiff, StringDiffSegment} from '../../../../types'\nimport {PortableTextBlock, PortableTextChild, PortableTextDiff, SpanTypeSchema} from '../types'\n\nimport * as TextSymbols from '../symbols'\n\nimport {\n  escapeRegExp,\n  getAllMarkDefs,\n  findChildDiff,\n  findAnnotationDiff,\n  findSpanDiffFromChild,\n  getChildSchemaType,\n  getDecorators,\n  getInlineObjects,\n  isDecorator,\n} from '../helpers'\n\nimport Block from './Block'\nimport {Annotation} from './Annotation'\nimport Decorator from './Decorator'\nimport {InlineObject} from './InlineObject'\nimport {Text} from './Text'\n\nconst decoratorSymbolsStart = TextSymbols.DECORATOR_SYMBOLS.map((set) => set[0])\nconst decoratorSymbolsEnd = TextSymbols.DECORATOR_SYMBOLS.map((set) => set[1])\nconst annotationSymbolsStart = TextSymbols.ANNOTATION_SYMBOLS.map((set) => set[0])\nconst annotationSymbolsEnd = TextSymbols.ANNOTATION_SYMBOLS.map((set) => set[1])\n\nconst allSymbolsStart = decoratorSymbolsStart.concat(annotationSymbolsStart)\nconst allSymbolsEnd = decoratorSymbolsEnd.concat(annotationSymbolsEnd)\n\nconst allDecoratorSymbols = decoratorSymbolsStart.concat(decoratorSymbolsEnd)\nconst markRegex = new RegExp(`${allDecoratorSymbols.concat(allSymbolsEnd).join('|')}`, 'g')\n\ntype Props = {\n  diff: PortableTextDiff\n  schemaType: ObjectSchemaType\n}\n\nexport default function PortableText(props: Props): JSX.Element {\n  const {diff, schemaType} = props\n  const block = (diff.origin.toValue || diff.origin.fromValue) as PortableTextBlock\n\n  const inlineObjects = useMemo(\n    () => (diff.origin.toValue ? getInlineObjects(diff.origin) : []),\n    [diff.origin]\n  )\n\n  const renderChild = useCallback(\n    (ptDiffChild: PortableTextChild) => {\n      const spanSchemaType = getChildSchemaType(schemaType.fields, ptDiffChild) as SpanTypeSchema\n      let decoratorTypes: {title: string; value: string}[] = []\n      if (spanSchemaType) {\n        decoratorTypes = getDecorators(spanSchemaType)\n        const childrenDiff = diff.fields.children as ArrayDiff\n        const segments =\n          (childrenDiff.items[0].diff &&\n            childrenDiff.items[0].diff.type === 'object' &&\n            childrenDiff.items[0].diff.fields.text.type === 'string' &&\n            childrenDiff.items[0].diff.fields.text.segments) ||\n          []\n        const returnedChildren: React.ReactNode[] = []\n        const annotationSegments: Record<string, React.ReactNode[]> = {}\n        // Special case for new empty PT-block (single span child with empty text)\n        if (\n          isEmptyTextChange(block, diff) &&\n          (diff.origin.action === 'added' || diff.origin.action === 'removed')\n        ) {\n          const textDiff = findChildDiff(diff.origin, block.children[0]) || diff.origin\n          if (textDiff && textDiff.action !== 'unchanged') {\n            return (\n              <DiffCard\n                annotation={textDiff.annotation}\n                as={textDiff.action === 'removed' ? 'del' : 'ins'}\n                key={`empty-block-${block._key}`}\n                tooltip={{\n                  description: `${startCase(textDiff.action)} empty text`,\n                }}\n              >\n                <span>{TextSymbols.EMPTY_BLOCK_SYMBOL}</span>\n              </DiffCard>\n            )\n          }\n        }\n        // Run through all the segments from the PortableTextDiff\n        let childToIndex = -1\n        let segIndex = -1\n        const activeAnnotations: {mark: string; object: PortableTextChild; symbols: string[]}[] = []\n        let endedAnnotation:\n          | {mark: string; object: PortableTextChild; symbols: string[]}\n          | undefined\n        const allMarkDefs = getAllMarkDefs(diff.origin)\n        segments.forEach((seg) => {\n          segIndex++\n          const isInline = TextSymbols.INLINE_SYMBOLS.includes(seg.text)\n          const isMarkStart = allSymbolsStart.includes(seg.text)\n          const isMarkEnd = allSymbolsEnd.includes(seg.text)\n          const isChildStart = seg.text === TextSymbols.CHILD_SYMBOL\n          const isRemoved = seg.action === 'removed'\n          if (isChildStart) {\n            if (!isRemoved) {\n              childToIndex++\n            }\n            // No output\n          } else if (isMarkStart || isMarkEnd) {\n            if (isMarkStart && annotationSymbolsStart.includes(seg.text)) {\n              const object = allMarkDefs[annotationSymbolsStart.indexOf(seg.text)]\n              if (object) {\n                activeAnnotations.push({\n                  mark: object._key,\n                  symbols: [\n                    seg.text,\n                    annotationSymbolsEnd[annotationSymbolsStart.indexOf(seg.text)],\n                  ],\n                  object,\n                })\n              }\n            }\n            if (isMarkEnd && annotationSymbolsEnd.includes(seg.text)) {\n              endedAnnotation = activeAnnotations.pop()\n            }\n            // No output\n          } else if (isInline) {\n            // Render inline object\n            const indexOfSymbol = TextSymbols.INLINE_SYMBOLS.findIndex((sym) => sym === seg.text)\n            const key = inlineObjects[indexOfSymbol]?._key\n            const originChild = inlineObjects[indexOfSymbol]\n            if (key) {\n              const objectSchemaType = getChildSchemaType(schemaType.fields, originChild)\n              const objectDiff = findChildDiff(diff.origin, originChild)\n              returnedChildren.push(\n                <InlineObject\n                  key={`inline-object-${originChild._key}`}\n                  object={originChild}\n                  path={[{_key: block._key}, 'children', {_key: originChild._key}]}\n                  diff={objectDiff}\n                  schemaType={objectSchemaType}\n                />\n              )\n            }\n          } else if (seg.text) {\n            // TODO: find a better way of getting a removed child\n            const getChildFromFromValue = () =>\n              diff.origin.fromValue?.children.find(\n                (cld: any) => cld.text && cld.text.match(escapeRegExp(seg.text))\n              ) as PortableTextChild\n            const child = block.children[childToIndex] || getChildFromFromValue()\n            const childDiff = child && findSpanDiffFromChild(diff.origin, child)\n            if (!child) {\n              throw new Error('Could not find child')\n            }\n            const textDiff = childDiff?.fields?.text\n              ? (childDiff?.fields?.text as StringDiff)\n              : undefined\n            const text = (\n              <Text\n                diff={textDiff}\n                key={`text-${child._key}-${segIndex}`}\n                path={[{_key: block._key}, 'children', {_key: child._key}]}\n                childDiff={childDiff}\n                segment={seg}\n              >\n                {renderTextSegment({\n                  diff,\n                  child,\n                  decoratorTypes,\n                  seg,\n                  segIndex,\n                  spanSchemaType,\n                })}\n              </Text>\n            )\n\n            // Render annotations text changes within the annotation child\n            if (activeAnnotations.length > 0) {\n              activeAnnotations.forEach((active) => {\n                annotationSegments[active.mark] = annotationSegments[active.mark] || []\n                annotationSegments[active.mark].push(text)\n              })\n            }\n            if (endedAnnotation) {\n              const key = `annotation-${endedAnnotation.object._key}`\n              const lastChild = returnedChildren[returnedChildren.length - 1] as ReactElement\n              if (lastChild && lastChild.key !== key) {\n                const annotationDiff = findAnnotationDiff(diff.origin, endedAnnotation.mark)\n                const objectSchemaType =\n                  endedAnnotation &&\n                  spanSchemaType.annotations &&\n                  spanSchemaType.annotations.find(\n                    (type) =>\n                      endedAnnotation &&\n                      endedAnnotation.object &&\n                      type.name === endedAnnotation.object._type\n                  )\n                returnedChildren.push(\n                  <Annotation\n                    object={endedAnnotation.object}\n                    diff={annotationDiff}\n                    path={[{_key: block._key}, 'children', {_key: child._key}]}\n                    schemaType={objectSchemaType}\n                    key={key}\n                  >\n                    <>{annotationSegments[endedAnnotation.mark]}</>\n                  </Annotation>\n                )\n              }\n              // delete annotationSegments[endedAnnotation.mark]\n              endedAnnotation = undefined\n            }\n            if (activeAnnotations.length === 0) {\n              returnedChildren.push(text)\n            }\n          } // end if seg.text\n        })\n        return React.createElement('div', {key: block._key}, ...returnedChildren)\n      }\n      throw new Error(\"'span' schemaType not found\")\n    },\n    [block, diff, inlineObjects, schemaType]\n  )\n\n  return (\n    <Block block={diff.displayValue} diff={diff}>\n      {<>{(diff.displayValue.children || []).map((child) => renderChild(child))}</>}\n    </Block>\n  )\n}\n\nfunction renderTextSegment({\n  diff,\n  child,\n  decoratorTypes,\n  seg,\n  segIndex,\n  spanSchemaType,\n}: {\n  diff: PortableTextDiff\n  child: PortableTextChild\n  decoratorTypes: {title: string; value: string}[]\n  seg: StringDiffSegment\n  segIndex: number\n  spanSchemaType: SpanTypeSchema\n}): JSX.Element {\n  // Newlines\n  if (seg.text === '\\n') {\n    return <br />\n  }\n  // Make sure we render trailing spaces correctly\n  let children = (\n    <span key={`text-${segIndex}`}>\n      {seg.text.replace(/ /g, TextSymbols.TRAILING_SPACE_SYMBOL)}\n    </span>\n  )\n  const spanDiff = child && findSpanDiffFromChild(diff.origin, child)\n  // Render decorator diff info\n  const activeMarks = child.marks || []\n  if (spanDiff) {\n    children = renderDecorators({\n      activeMarks,\n      decoratorTypes,\n      diff,\n      children,\n      seg,\n      segIndex,\n      spanDiff,\n      spanSchemaType,\n    })\n  }\n  // Render the segment with the active marks\n  if (activeMarks && activeMarks.length > 0) {\n    activeMarks.forEach((mark) => {\n      if (isDecorator(mark, spanSchemaType)) {\n        children = (\n          // eslint-disable-next-line react/no-array-index-key\n          <Decorator mark={mark} key={`decorator-${mark}-${child._key}-${segIndex}`}>\n            {children}\n          </Decorator>\n        )\n      }\n    })\n  }\n  return children\n}\n\nfunction renderDecorators({\n  activeMarks,\n  decoratorTypes,\n  diff,\n  children,\n  seg,\n  segIndex,\n  spanDiff,\n  spanSchemaType,\n}: {\n  activeMarks: string[]\n  decoratorTypes: {title: string; value: string}[]\n  diff: PortableTextDiff\n  children: JSX.Element\n  seg: StringDiffSegment\n  segIndex: number\n  spanDiff: ObjectDiff\n  spanSchemaType: SchemaType\n}): JSX.Element {\n  let returned = <span key={`text-segment-${segIndex}`}>{children}</span>\n  const fromPtDiffText: string =\n    (diff.origin.fromValue && diff.fromValue && diff.fromValue.children[0].text) || '' // Always one child\n\n  // There are cases where we have changed marks, but it's an indirect change in the diff data.\n  // For example when '<>normal-text</><>bold-text</>' and 'bold' is unbolded. Then 'bold' is added to first span,\n  // and 'bold' is removed from the second span: '<>normal-text-bold</><>-text</>'. No marks are changed.\n  // We do however want to indicate to the user that someone removed bold from 'bold'\n  // In these cases, fallback to the diff annotation information in the span itself.\n  const indirectMarksAnnotation =\n    (spanDiff && spanDiff.action !== 'unchanged' && spanDiff.annotation) || undefined\n\n  const marksDiff = spanDiff?.fields?.marks as ArrayDiff\n  const marksAnnotation =\n    (marksDiff && marksDiff.action !== 'unchanged' && marksDiff.annotation) ||\n    indirectMarksAnnotation\n\n  let marksChanged: string[] = []\n  const ptDiffChildren = fromPtDiffText\n    .split(TextSymbols.CHILD_SYMBOL)\n    .filter((text) => !!text)\n    .join('')\n  const ptDiffMatchString = ptDiffChildren\n  const controlString = ptDiffMatchString.substring(\n    0,\n    ptDiffMatchString.indexOf(seg.text) + seg.text.length\n  )\n  const toTest = controlString.substring(0, controlString.indexOf(seg.text))\n  const marks: string[] = []\n  const matches = [...toTest.matchAll(markRegex)]\n  matches.forEach((match) => {\n    const sym = match[0]\n    const set = TextSymbols.DECORATOR_SYMBOLS.concat(TextSymbols.ANNOTATION_SYMBOLS).find(\n      (aSet) => aSet.indexOf(sym) > -1\n    )\n    if (set) {\n      const isMarkStart = sym === set[0]\n      const mark: string =\n        decoratorTypes[\n          isMarkStart ? decoratorSymbolsStart.indexOf(sym) : decoratorSymbolsEnd.indexOf(sym)\n        ]?.value || sym // Annotation marks are uniqe anyway\n      const notClosed = toTest.lastIndexOf(sym) > toTest.lastIndexOf(set[1])\n      if (notClosed) {\n        marks.push(mark)\n      }\n    }\n  })\n  marksChanged = xor(activeMarks, uniq(marks))\n  // Only for decorators, annotations are taken care of elsewhere\n  if (\n    marksAnnotation &&\n    marksChanged.length > 0 &&\n    marksChanged.some((m) => isDecorator(m, spanSchemaType))\n  ) {\n    returned = (\n      <DiffCard\n        annotation={marksAnnotation}\n        key={`diffcard-annotation-${segIndex}-${marksChanged.join('-')}`}\n        as={'ins'}\n        tooltip={{\n          description: 'Changed formatting',\n        }}\n      >\n        {returned}\n      </DiffCard>\n    )\n  }\n  return returned\n}\n\nfunction isEmptyTextChange(block: PortableTextBlock, diff: PortableTextDiff) {\n  return (\n    block.children.length === 1 &&\n    block.children[0]._type === 'span' &&\n    typeof block.children[0].text === 'string' &&\n    block.children[0].text === '' &&\n    diff.origin.action !== 'unchanged'\n  )\n}\n","import React, {useMemo} from 'react'\nimport {DiffComponent, ObjectDiff} from '../../../types'\nimport PortableText from './components/PortableText'\nimport {createPortableTextDiff} from './helpers'\n\nexport const PTDiff: DiffComponent<ObjectDiff> = (props) => {\n  const {diff, schemaType} = props\n\n  const ptDiff = useMemo(() => createPortableTextDiff(diff, schemaType), [diff, schemaType])\n\n  return (\n    <div data-diff-action={diff.action}>\n      <PortableText diff={ptDiff} schemaType={schemaType} />\n    </div>\n  )\n}\n","import {Reference} from '@sanity/types'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {Box} from '@sanity/ui'\n\nimport {FieldPreviewComponent} from '../../../preview'\nimport {Preview} from '../../../../preview/components/Preview'\n\nconst ReferenceWrapper = styled.div`\n  word-wrap: break-word;\n`\n\nexport const ReferencePreview: FieldPreviewComponent<Reference> = ({value, schemaType}) => (\n  <Box as={ReferenceWrapper} padding={2}>\n    <Preview schemaType={schemaType} value={value} layout=\"default\" />\n  </Box>\n)\n","import React from 'react'\nimport {DiffFromTo} from '../../../diff'\nimport {DiffComponent, ReferenceDiff} from '../../../types'\nimport {ReferencePreview} from '../preview/ReferencePreview'\n\nexport const ReferenceFieldDiff: DiffComponent<ReferenceDiff> = ({diff, schemaType}) => {\n  return (\n    <DiffFromTo\n      align=\"center\"\n      diff={diff}\n      layout=\"grid\"\n      path=\"_ref\"\n      previewComponent={ReferencePreview}\n      schemaType={schemaType}\n    />\n  )\n}\n","import {Box} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {FieldPreviewComponent} from '../../../preview'\n\nconst StringWrapper = styled.div`\n  display: inline-block;\n  word-break: break-all;\n  white-space: pre-wrap;\n`\n\nexport const StringPreview: FieldPreviewComponent<string> = (props) => {\n  const {value} = props\n\n  return (\n    <Box as={StringWrapper} paddingX={2} paddingY={1}>\n      {value}\n    </Box>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {DiffFromTo, DiffString} from '../../../diff'\nimport {DiffComponent, StringDiff} from '../../../types'\nimport {StringPreview} from '../preview/StringPreview'\n\nconst StringWrapper = styled.div`\n  white-space: pre-wrap;\n  word-wrap: break-word;\n`\n\nexport const StringFieldDiff: DiffComponent<StringDiff> = ({diff, schemaType}) => {\n  const {options} = schemaType\n\n  if (options?.list) {\n    // When the string is considered to be an \"enum\", don't show individual\n    // string segment changes, rather treat is as a \"from -> to\" diff\n    return <DiffFromTo diff={diff} previewComponent={StringPreview} schemaType={schemaType} />\n  }\n\n  return (\n    <StringWrapper>\n      <DiffString diff={diff} />\n    </StringWrapper>\n  )\n}\n","import {DiffComponent, DiffComponentOptions} from '../../types'\n\nimport {BooleanFieldDiff} from '../../types/boolean/diff'\nimport {FileFieldDiff} from '../../types/file/diff'\nimport {ImageFieldDiff} from '../../types/image/diff'\nimport {NumberFieldDiff} from '../../types/number/diff'\nimport {PTDiff} from '../../types/portableText/diff'\nimport {ReferenceFieldDiff} from '../../types/reference/diff'\nimport {StringFieldDiff} from '../../types/string/diff'\n\nexport const defaultComponents: Record<\n  string,\n  DiffComponent<any> | DiffComponentOptions<any> | undefined\n> = {\n  block: PTDiff,\n  boolean: {component: BooleanFieldDiff, showHeader: false},\n  file: FileFieldDiff,\n  image: ImageFieldDiff,\n  number: NumberFieldDiff,\n  reference: ReferenceFieldDiff,\n  string: StringFieldDiff,\n}\n","import {ArraySchemaType, ObjectSchemaType, SchemaType} from '@sanity/types'\nimport {ComponentType} from 'react'\nimport {diffResolvers} from '../../TODO'\nimport {Diff, DiffComponent, DiffComponentOptions} from '../../types'\nimport {defaultComponents} from './defaultComponents'\n\n/** @internal */\nexport function resolveDiffComponent<D extends Diff = any>(\n  type: SchemaType,\n  parentSchemaType?: ArraySchemaType | ObjectSchemaType\n): DiffComponent<D> | DiffComponentOptions | undefined {\n  let itType: SchemaType | undefined = type\n\n  while (itType) {\n    const resolved =\n      itType?.components?.diff ||\n      tryResolve(itType, parentSchemaType) ||\n      defaultComponents[itType.name]\n\n    if (resolved) {\n      return resolved as DiffComponent<any>\n    }\n\n    itType = itType.type\n  }\n\n  return defaultComponents[type.jsonType]\n}\n\nfunction tryResolve(\n  schemaType: SchemaType,\n  parentSchemaType?: ArraySchemaType | ObjectSchemaType\n): DiffComponent<any> | DiffComponentOptions | undefined {\n  const resolvers = diffResolvers\n\n  let resolved: ComponentType | DiffComponentOptions | undefined\n\n  for (const resolver of resolvers) {\n    if (typeof resolver !== 'function') {\n      // eslint-disable-next-line no-console\n      console.error('Diff component resolver is not a function: ', resolver)\n      continue\n    }\n\n    resolved = resolver({schemaType, parentSchemaType})\n\n    if (resolved) {\n      return resolved as DiffComponent\n    }\n  }\n  return undefined\n}\n","import {ChangeNode, Diff, FieldChangeNode, GroupChangeNode, ItemDiff} from '../types'\n\n/** @internal */\nexport function getChangeVerb(diff: Diff): 'Added' | 'Removed' | 'Changed' {\n  const hadPrevValue = hasValue(diff.fromValue)\n  const hasNextValue = hasValue(diff.toValue)\n  if (!hadPrevValue && hasNextValue) {\n    return 'Added'\n  }\n\n  if (!hasNextValue && hadPrevValue) {\n    return 'Removed'\n  }\n\n  return 'Changed'\n}\n\n/** @internal */\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nexport function noop(): void {}\n\n/** @internal */\nexport function isFieldChange(change: ChangeNode): change is FieldChangeNode {\n  return change.type === 'field'\n}\n\n/** @internal */\nexport function isGroupChange(change: ChangeNode): change is GroupChangeNode {\n  return change.type === 'group'\n}\n\n/** @internal */\nexport function isAddedItemDiff(\n  item: ItemDiff\n): item is ItemDiff & {diff: Diff & {action: 'added'}} {\n  return item.diff.action === 'added'\n}\n\n/** @internal */\nexport function isRemovedItemDiff(\n  item: ItemDiff\n): item is ItemDiff & {diff: Diff & {action: 'removed'}} {\n  return item.diff.action === 'removed'\n}\n\n/** @internal */\nexport function isUnchangedDiff(diff: Diff): diff is Diff & {action: 'unchanged'} {\n  return diff.action === 'unchanged'\n}\n\n/** @internal */\nfunction hasValue(value: unknown) {\n  return value !== null && typeof value !== 'undefined' && value !== ''\n}\n","import {\n  Path,\n  MultiFieldSet,\n  ObjectField,\n  ArraySchemaType,\n  ObjectSchemaType,\n  SchemaType,\n} from '@sanity/types'\nimport {pathToString, pathsAreEqual, getItemKeySegment} from '../../paths'\nimport {getValueError} from '../../validation'\nimport {getArrayDiffItemType} from '../../schema/helpers'\nimport {hasPTMemberType} from '../../types/portableText/diff/helpers'\nimport {\n  ArrayDiff,\n  ChangeNode,\n  ChangeTitlePath,\n  Diff,\n  DiffComponent,\n  FieldChangeNode,\n  ItemDiff,\n  ObjectDiff,\n} from '../../types'\nimport {resolveDiffComponent} from '../resolve/resolveDiffComponent'\nimport {isFieldChange} from '../helpers'\n\ninterface DiffContext {\n  itemDiff?: ItemDiff\n  parentDiff?: ArrayDiff | ObjectDiff\n  parentSchema?: ArraySchemaType | ObjectSchemaType\n  fieldFilter?: string[]\n}\n\nexport function buildChangeList(\n  schemaType: SchemaType,\n  diff: Diff,\n  path: Path = [],\n  titlePath: ChangeTitlePath = [],\n  context: DiffContext = {}\n): ChangeNode[] {\n  const diffComponent = resolveDiffComponent(schemaType, context.parentSchema)\n\n  if (!diffComponent) {\n    if (schemaType.jsonType === 'object' && diff.type === 'object') {\n      return buildObjectChangeList(schemaType as ObjectSchemaType, diff, path, titlePath, context)\n    }\n\n    if (schemaType.jsonType === 'array' && diff.type === 'array') {\n      return buildArrayChangeList(schemaType, diff, path, titlePath)\n    }\n  }\n\n  return getFieldChange(schemaType, diff, path, titlePath, context)\n}\n\nexport function buildObjectChangeList(\n  schemaType: ObjectSchemaType,\n  diff: ObjectDiff,\n  path: Path = [],\n  titlePath: ChangeTitlePath = [],\n  diffContext: DiffContext = {}\n): ChangeNode[] {\n  const changes: ChangeNode[] = []\n\n  const childContext: DiffContext = {...diffContext, parentSchema: schemaType}\n  const fieldSets =\n    schemaType.fieldsets || schemaType.fields.map((field) => ({single: true, field}))\n  for (const fieldSet of fieldSets) {\n    if (fieldSet.single) {\n      changes.push(...buildFieldChange(fieldSet.field, diff, path, titlePath, childContext))\n    } else {\n      changes.push(\n        ...buildFieldsetChangeList(fieldSet as MultiFieldSet, diff, path, titlePath, childContext)\n      )\n    }\n  }\n\n  if (changes.length < 2) {\n    return changes\n  }\n\n  return [\n    {\n      type: 'group',\n      key: pathToString(path) || 'root',\n      path,\n      titlePath,\n      changes: reduceTitlePaths(changes, titlePath.length),\n      schemaType,\n    },\n  ]\n}\n\nexport function buildFieldChange(\n  field: ObjectField,\n  diff: ObjectDiff,\n  path: Path,\n  titlePath: ChangeTitlePath,\n  diffContext: DiffContext & {fieldFilter?: string[]} = {}\n): ChangeNode[] {\n  const {fieldFilter, ...context} = diffContext\n  const fieldDiff = diff.fields[field.name]\n  if (!fieldDiff || !fieldDiff.isChanged || (fieldFilter && !fieldFilter.includes(field.name))) {\n    return []\n  }\n\n  const fieldPath = path.concat([field.name])\n  const fieldTitlePath = titlePath.concat([field.type.title || field.name])\n  return buildChangeList(field.type as any, fieldDiff, fieldPath, fieldTitlePath, context)\n}\n\nexport function buildFieldsetChangeList(\n  fieldSet: MultiFieldSet,\n  diff: ObjectDiff,\n  path: Path,\n  titlePath: ChangeTitlePath,\n  diffContext: DiffContext & {fieldFilter?: string[]} = {}\n): ChangeNode[] {\n  const {fields, name, title, readOnly, hidden} = fieldSet\n  const {fieldFilter, ...context} = diffContext\n\n  const fieldSetHidden = hidden\n  const fieldsetReadOnly = readOnly\n\n  const fieldSetTitlePath = titlePath.concat([title || name])\n  const changes: ChangeNode[] = []\n\n  for (const field of fields) {\n    const fieldDiff = diff.fields[field.name]\n    if (!fieldDiff || !fieldDiff.isChanged || (fieldFilter && !fieldFilter.includes(field.name))) {\n      continue\n    }\n\n    const fieldPath = path.concat([field.name])\n    const fieldTitlePath = fieldSetTitlePath.concat([field.type.title || field.name])\n    changes.push(\n      ...buildChangeList(\n        {\n          readOnly: fieldsetReadOnly,\n          hidden: fieldSetHidden,\n          ...field.type,\n        } as any,\n        fieldDiff,\n        fieldPath,\n        fieldTitlePath,\n        context\n      )\n    )\n  }\n\n  if (changes.length < 2) {\n    return changes\n  }\n\n  return [\n    {\n      type: 'group',\n      key: pathToString(path) || 'root',\n      fieldsetName: name,\n      path,\n      titlePath: fieldSetTitlePath,\n      changes: reduceTitlePaths(changes, fieldSetTitlePath.length),\n      readOnly: fieldsetReadOnly,\n      hidden: fieldSetHidden,\n    },\n  ]\n}\n\nexport function buildArrayChangeList(\n  schemaType: ArraySchemaType,\n  diff: ArrayDiff,\n  path: Path = [],\n  titlePath: ChangeTitlePath = []\n): ChangeNode[] {\n  const changedOrMoved = diff.items.filter(\n    (item) => (item.hasMoved && item.fromIndex !== item.toIndex) || item.diff.action !== 'unchanged'\n  )\n\n  if (changedOrMoved.length === 0) {\n    return []\n  }\n\n  const isPortableText = hasPTMemberType(schemaType)\n  const list: ChangeNode[] = []\n  const changes = changedOrMoved.reduce((acc, itemDiff) => {\n    const memberTypes = getArrayDiffItemType(itemDiff.diff, schemaType)\n    const memberType = memberTypes.toType || memberTypes.fromType\n    if (!memberType) {\n      // eslint-disable-next-line no-console\n      console.warn('Could not determine schema type for item at %s', pathToString(path))\n      return acc\n    }\n\n    const segment =\n      getItemKeySegment(itemDiff.diff.fromValue) ||\n      getItemKeySegment(itemDiff.diff.toValue) ||\n      diff.items.indexOf(itemDiff)\n\n    const itemPath = path.concat(segment)\n    const itemContext: DiffContext = {itemDiff, parentDiff: diff, parentSchema: schemaType}\n    const itemTitlePath = titlePath.concat({\n      hasMoved: itemDiff.hasMoved,\n      toIndex: itemDiff.toIndex,\n      fromIndex: itemDiff.fromIndex,\n      annotation:\n        itemDiff.diff.action === 'unchanged' ? itemDiff.annotation : itemDiff.diff.annotation,\n    })\n\n    const attachItemDiff = (change: ChangeNode): ChangeNode => {\n      if (change.type === 'field' && pathsAreEqual(itemPath, change.path)) {\n        change.itemDiff = itemDiff\n      }\n\n      return change\n    }\n\n    const children = buildChangeList(\n      memberType,\n      itemDiff.diff,\n      itemPath,\n      itemTitlePath,\n      itemContext\n    ).map(attachItemDiff)\n\n    if (isPortableText) {\n      children.filter(isFieldChange).forEach((field, index, siblings) => {\n        field.showHeader = siblings.length === 1\n        field.showIndex = itemDiff.fromIndex !== itemDiff.toIndex && itemDiff.hasMoved\n      })\n    }\n\n    if (children.length === 0) {\n      // This can happen when there are no changes to the actual element, it's just been moved\n      acc.push(...getFieldChange(memberType, itemDiff.diff, itemPath, itemTitlePath, itemContext))\n    } else {\n      acc.push(...children)\n    }\n\n    return acc\n  }, list)\n\n  if (changes.length > 1) {\n    return [\n      {\n        type: 'group',\n        key: pathToString(path) || 'root',\n        path,\n        titlePath,\n        changes: reduceTitlePaths(changes, titlePath.length),\n        schemaType,\n      },\n    ]\n  }\n\n  return changes\n}\n\nfunction getFieldChange(\n  schemaType: SchemaType,\n  diff: Diff,\n  path: Path,\n  titlePath: ChangeTitlePath,\n  {itemDiff, parentDiff, parentSchema}: DiffContext = {}\n): FieldChangeNode[] {\n  const {fromValue, toValue, type} = diff\n\n  // Treat undefined => [] as no change\n  if (type === 'array' && isEmpty(fromValue) && isEmpty(toValue)) {\n    return []\n  }\n\n  let error\n  if (typeof fromValue !== 'undefined') {\n    error = getValueError(fromValue, schemaType)\n  }\n\n  if (!error && typeof toValue !== 'undefined') {\n    error = getValueError(toValue, schemaType)\n  }\n\n  let showHeader = true\n  let component: DiffComponent | undefined\n\n  const diffComponent = resolveDiffComponent(schemaType, parentSchema)\n  if (diffComponent && typeof diffComponent === 'function') {\n    // Just a diff component with default options\n    component = diffComponent\n  } else if (diffComponent) {\n    // Diff component with options\n    component = (diffComponent as any).component\n    showHeader =\n      typeof (diffComponent as any).showHeader === 'undefined'\n        ? showHeader\n        : (diffComponent as any).showHeader\n  }\n\n  return [\n    {\n      type: 'field',\n      diff,\n      path,\n      error,\n      itemDiff,\n      parentDiff,\n      titlePath,\n      schemaType,\n      showHeader,\n      showIndex: true,\n      key: pathToString(path) || 'root',\n      diffComponent: error ? undefined : component,\n      parentSchema,\n    },\n  ]\n}\n\nfunction reduceTitlePaths(changes: ChangeNode[], byLength = 1): ChangeNode[] {\n  return changes.map((change) => {\n    change.titlePath = change.titlePath.slice(byLength)\n    return change\n  })\n}\n\nfunction isEmpty(item: unknown): boolean {\n  return (Array.isArray(item) && item.length === 0) || item === null || typeof item === 'undefined'\n}\n","import {Path, PathSegment} from '@sanity/types'\nimport {ChangeNode, FieldChangeNode} from '../../types'\nimport {getItemKey} from '../../paths'\n\nconst isAddedAction = (change: ChangeNode): boolean => {\n  return change.type === 'field' && change.diff.action === 'added'\n}\n\nconst flattenChangeNode = (changeNode: ChangeNode): FieldChangeNode[] => {\n  if (changeNode.type !== 'group') {\n    return [changeNode]\n  }\n\n  const newSubChanges: FieldChangeNode[] = []\n\n  changeNode.changes.forEach((cChange) => {\n    newSubChanges.push(...flattenChangeNode(cChange))\n  })\n\n  return newSubChanges\n}\n\n/**\n * Checks whether a path is under another path within the tree.\n */\nconst isSubpathOf = (subPath: Path, parentPath: Path): boolean => {\n  if (parentPath.length >= subPath.length) {\n    return false\n  }\n\n  for (let i = 0; i < parentPath.length; i++) {\n    if (parentPath[i] !== subPath[i]) {\n      return false\n    }\n  }\n\n  return true\n}\n\nconst pathSegmentOfCorrectType = (item: Record<string, unknown>, child: string): PathSegment => {\n  const nextItem = item[child]\n\n  const key = getItemKey(nextItem)\n\n  if (key) {\n    return {_key: key}\n  }\n\n  const isArray = Array.isArray(item)\n\n  if (isArray) {\n    return parseInt(child, 10)\n  }\n\n  return child\n}\n\nexport {isAddedAction, flattenChangeNode, isSubpathOf, pathSegmentOfCorrectType}\n","import {\n  isIndexSegment,\n  isKeyedObject,\n  isKeySegment,\n  isTypedObject,\n  PatchOperations,\n  Path,\n} from '@sanity/types'\nimport {diffItem} from 'sanity-diff-patch'\nimport {isRecord} from '../../../util'\nimport {\n  findIndex,\n  getItemKeySegment,\n  getValueAtPath,\n  isEmptyObject,\n  pathToString,\n} from '../../paths'\nimport {\n  ArrayDiff,\n  ChangeNode,\n  Diff,\n  DiffPatch,\n  InsertDiffPatch,\n  ItemDiff,\n  ObjectDiff,\n  FieldOperationsAPI,\n  SetDiffPatch,\n  UnsetDiffPatch,\n} from '../../types'\nimport {flattenChangeNode, isAddedAction, isSubpathOf, pathSegmentOfCorrectType} from './helpers'\n\nconst diffOptions = {diffMatchPatch: {enabled: false}}\n\nexport function undoChange(\n  change: ChangeNode,\n  rootDiff: ObjectDiff | null,\n  documentOperations: FieldOperationsAPI\n): void {\n  if (!rootDiff) {\n    return\n  }\n\n  const patches: PatchOperations[] = []\n\n  if (change.type === 'group') {\n    const allChanges = flattenChangeNode(change)\n\n    const unsetChanges = allChanges.filter(isAddedAction)\n\n    allChanges\n      .filter((child) => !isAddedAction(child))\n      .forEach((child) => undoChange(child, rootDiff, documentOperations))\n\n    patches.push(\n      ...buildUnsetPatches(\n        rootDiff,\n        unsetChanges.map((unsetChange) => unsetChange.path)\n      )\n    )\n  } else if (change.diff.action === 'added') {\n    // The reverse of an add operation is an unset -\n    // so we don't need to worry about moved items in this case\n    patches.push(...buildUnsetPatches(rootDiff, [change.path]))\n  } else if (\n    change.type === 'field' &&\n    change.itemDiff &&\n    change.parentDiff &&\n    change.parentDiff.type === 'array' &&\n    change.itemDiff.hasMoved\n  ) {\n    // If an array item has moved, we need to unset + insert it again\n    // (we lack a \"move\" patch currently)\n    patches.push(...buildMovePatches(change.itemDiff, change.parentDiff, change.path))\n  } else {\n    // For all other operations, try to find the most optimal case\n    patches.push(...buildUndoPatches(change.diff, rootDiff, change.path))\n  }\n\n  documentOperations.patch.execute(patches)\n}\n\nfunction buildUnsetPatch(rootDiff: ObjectDiff, path: Path, concurrentUnsetPaths: Path[]): Path {\n  const previousValue = rootDiff.toValue as Record<string, unknown>\n\n  return furthestEmptyAncestor(previousValue, path, concurrentUnsetPaths)\n}\n\nfunction buildUnsetPatches(rootDiff: ObjectDiff, paths: Path[]): PatchOperations[] {\n  const patches: Path[] = []\n\n  for (let i = 0; i < paths.length; i++) {\n    const unsetByEarlierPatch = patches.some((patch) => isSubpathOf(paths[i], patch))\n\n    if (unsetByEarlierPatch) {\n      continue\n    }\n\n    patches.push(buildUnsetPatch(rootDiff, paths[i], paths))\n  }\n\n  return [{unset: [...new Set(patches.map(pathToString))]}]\n}\n\n/**\n * Find the path to the furthest empty ancestor that's also a stub.\n *\n * Used for removing all stubs when unsetting a nested value.\n */\nfunction furthestEmptyAncestor(\n  /**\n   * The state of the tree before the change was made.\n   */\n  previousValue: Record<string, unknown>,\n  /**\n   * Path of the value to unset. Used for recursing.\n   */\n  currentPath: Path,\n  /**\n   * An optional list of path to forcefully mark as a stub regardless of what it actually is.\n   */\n  ignorePaths: Path[] = [],\n  /**\n   * Same as the first value of currentPath.\n   */\n  initialPath?: Path\n): Path {\n  if (currentPath.length <= 0) {\n    /*\n     * This means we are at root and no ancestors are stubs. We\n     * can therefore safely unset only the actual value.\n     */\n    if (!initialPath) {\n      /*\n       * Will happen if the function is started with `currentPath = []`.\n       */\n      throw new Error('Root has no ancestor')\n    }\n\n    return initialPath\n  }\n\n  const ancestorPath = currentPath.slice(0, -1)\n  const ancestorValue = getValueAtPath(previousValue, ancestorPath)\n\n  /*\n   * If the ancestor also is a stub we can add it to the ignore-list\n   * so it'll be \"remembered\" as a stub without us having to scan\n   * the whole tree again.\n   */\n  const updatedIgnorePaths = [\n    ancestorPath,\n\n    /*\n     * We can filter out all the subpaths from under this ancestor\n     * because since we ignore it higher up in the tree it doesn't\n     * matter anymore what the values of subpaths are.\n     */\n    ...ignorePaths.filter((path) => !isSubpathOf(path, ancestorPath)),\n  ]\n\n  return isStub(ancestorValue, ancestorPath, ignorePaths)\n    ? furthestEmptyAncestor(previousValue, ancestorPath, updatedIgnorePaths, initialPath)\n    : currentPath\n}\n\nfunction buildMovePatches(\n  itemDiff: ItemDiff,\n  parentDiff: ArrayDiff,\n  path: Path\n): PatchOperations[] {\n  const basePath = path.slice(0, -1)\n  const {parentValue, fromIndex, fromValue} = getFromItem(parentDiff, itemDiff)\n\n  let insertLocation\n  if (fromIndex === 0) {\n    // If it was moved from the beginning, we can use a simple prepend\n    insertLocation = {before: pathToString([...basePath, 0])}\n  } else {\n    // Try to use item key segments where possible, falling back to array indexes\n    const prevIndex = fromIndex - 1\n    const prevItemKey = getItemKeySegment(parentValue[prevIndex])\n    const prevSegment = prevItemKey || prevIndex\n    insertLocation = {after: pathToString([...basePath, prevSegment])}\n  }\n\n  return [\n    {\n      unset: [pathToString(path)],\n    },\n    {\n      insert: {...insertLocation, items: [fromValue]} as any,\n    },\n  ]\n}\n\nfunction buildUndoPatches(diff: Diff, rootDiff: ObjectDiff, path: Path): PatchOperations[] {\n  const patches = diffItem(diff.toValue, diff.fromValue, diffOptions, path) as DiffPatch[]\n\n  const inserts = patches\n    .filter((patch): patch is InsertDiffPatch => patch.op === 'insert')\n    .map(({after, items}) => ({insert: {after: pathToString(after), items}} as any))\n\n  const unsets = patches\n    .filter((patch): patch is UnsetDiffPatch => patch.op === 'unset')\n    .reduce((acc, patch) => acc.concat(pathToString(patch.path)), [] as string[])\n\n  const stubbedPaths = new Set<string>()\n  const stubs: PatchOperations[] = []\n\n  let hasSets = false\n  const sets = patches\n    .filter((patch): patch is SetDiffPatch => patch.op === 'set')\n    .reduce((acc, patch) => {\n      hasSets = true\n      stubs.push(...getParentStubs(patch.path, rootDiff, stubbedPaths))\n      acc[pathToString(patch.path)] = patch.value\n      return acc\n    }, {} as Record<string, unknown>)\n\n  return [\n    ...stubs,\n    ...inserts,\n    ...(unsets.length > 0 ? [{unset: unsets}] : []),\n    ...(hasSets ? [{set: sets}] : []),\n  ]\n}\n\nfunction getParentStubs(path: Path, rootDiff: ObjectDiff, stubbed: Set<string>): PatchOperations[] {\n  const value = rootDiff.fromValue as Record<string, unknown>\n  const nextValue = rootDiff.toValue as Record<string, unknown>\n  const stubs: PatchOperations[] = []\n\n  for (let i = 1; i <= path.length; i++) {\n    const subPath = path.slice(0, i)\n    const pathStr = pathToString(subPath)\n    if (stubbed.has(pathStr)) {\n      continue\n    }\n\n    const nextSegment = path[i]\n    const nextIsArrayElement = isKeySegment(nextSegment) || isIndexSegment(nextSegment)\n    const itemValue = getValueAtPath(value, subPath)\n    const stub = getStubValue(itemValue)\n\n    // If the next array element does not exist, we need to inject an insert stub here\n    if (\n      nextIsArrayElement &&\n      Array.isArray(itemValue) &&\n      !getValueAtPath(nextValue, path.slice(0, i + 1))\n    ) {\n      const indexAtPrev = findIndex(itemValue, nextSegment)\n      const prevItem = itemValue[indexAtPrev - 1]\n      const nextItem = getValueAtPath(value, subPath.concat(nextSegment))\n      const prevSeg = isKeyedObject(prevItem) ? {_key: prevItem._key} : indexAtPrev - 1\n      const after = pathToString(subPath.concat(indexAtPrev < 1 ? 0 : prevSeg))\n      stubs.push({setIfMissing: {[pathStr]: []}})\n      stubs.push({insert: {after, items: [getStubValue(nextItem)]} as any})\n\n      i++\n      continue\n    }\n\n    if (typeof stub === 'undefined') {\n      continue\n    }\n\n    stubbed.add(pathStr)\n    stubs.push({setIfMissing: {[pathStr]: stub as Record<string, unknown>}})\n  }\n  return stubs\n}\n\n/**\n * Check if all items in an object or an array are stubs.\n */\nfunction onlyContainsStubs(\n  /**\n   * The item to check whether is a stub.\n   */\n  item: unknown,\n  /**\n   * The path to the item we're checking.\n   */\n  path: Path,\n  /**\n   * An optional list of path to forcefully mark as a stub regardless of what it actually is.\n   */\n  ignorePaths?: Path[]\n): boolean {\n  /*\n   * If we're trying to check for stubs inside something which isn't an object\n   * or an array we're checking a string for example and it they cannot\n   * contain stubs.\n   */\n  if (!isRecord(item) || !Array.isArray(item)) {\n    return false\n  }\n\n  for (const child in item) {\n    if (!Object.prototype.hasOwnProperty.call(item, child)) {\n      continue\n    }\n\n    /*\n     * _type or _key field alone doesn't affect whether the field is a stub or\n     * not.\n     */\n    if (child === '_type' || child === '_key') {\n      continue\n    }\n\n    const nextPath = [...path, pathSegmentOfCorrectType(item as Record<string, unknown>, child)]\n\n    if (!isStub(item[child], nextPath, ignorePaths)) {\n      return false\n    }\n  }\n\n  return true\n}\n\nfunction isStub(item: unknown, path: Path, ignorePaths?: Path[]): boolean {\n  const isIgnoredPath = ignorePaths?.some(\n    (ignorePath) => pathToString(ignorePath) === pathToString(path)\n  )\n\n  const isEmptyArray = Array.isArray(item) && item.length <= 0\n\n  return (\n    isIgnoredPath ||\n    item === undefined ||\n    item === null ||\n    isEmptyArray ||\n    isEmptyObject(item) ||\n    onlyContainsStubs(item, path, ignorePaths)\n  )\n}\n\nfunction getStubValue(item: unknown): unknown {\n  if (Array.isArray(item)) {\n    return []\n  }\n\n  if (typeof item !== 'object' || item === null) {\n    return undefined\n  }\n\n  const props: Record<string, unknown> = {}\n\n  if (isKeyedObject(item)) {\n    props._key = item._key\n  }\n\n  if (isTypedObject(item)) {\n    props._type = item._type\n  }\n\n  return props\n}\n\nfunction getFromItem(parentDiff: ArrayDiff, itemDiff: ItemDiff) {\n  if (parentDiff.fromValue && typeof itemDiff.fromIndex === 'number') {\n    const fromValue = parentDiff.fromValue[itemDiff.fromIndex]\n    return {\n      parentValue: parentDiff.fromValue,\n      fromIndex: itemDiff.fromIndex,\n      fromValue,\n    }\n  }\n\n  // Shouldn't ever happen\n  throw new Error(`Failed to find item at index ${itemDiff.fromIndex}`)\n}\n","import {createContext} from 'react'\nimport {ConditionalReadOnlyContextValue} from './types'\n\n/**\n * @internal\n */\nexport const ConditionalReadOnlyContext = createContext<ConditionalReadOnlyContextValue | null>(\n  null\n)\n","import {useContext} from 'react'\nimport {ConditionalReadOnlyContext} from './ConditionalReadOnlyContext'\n\n/**\n * @internal\n */\nexport function useConditionalReadOnly(): boolean | null {\n  const context = useContext(ConditionalReadOnlyContext)\n\n  if (!context) {\n    return null\n  }\n\n  return context.readOnly || null\n}\n","import React from 'react'\nimport {ErrorOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Flex, Text} from '@sanity/ui'\nimport {isDev} from '../../../environment'\n\n/** @internal */\nexport interface DiffErrorBoundaryProps {\n  children: React.ReactNode\n}\n\n/** @internal */\nexport interface DiffErrorBoundaryState {\n  error?: Error\n}\n\n/** @internal */\nexport class DiffErrorBoundary extends React.Component<\n  DiffErrorBoundaryProps,\n  DiffErrorBoundaryState\n> {\n  static getDerivedStateFromError(error: Error) {\n    return {error}\n  }\n\n  state: DiffErrorBoundaryState = {}\n\n  // eslint-disable-next-line class-methods-use-this\n  componentDidCatch(error: Error) {\n    console.error('Error rendering diff component: ')\n    console.error(error)\n  }\n\n  render() {\n    const {error} = this.state\n\n    if (!error) {\n      return this.props.children\n    }\n\n    return (\n      <Card padding={3} radius={2} tone=\"critical\">\n        <Flex>\n          <Text size={1}>\n            <ErrorOutlineIcon />\n          </Text>\n\n          <Box paddingLeft={3}>\n            <Text as=\"h3\" size={1} weight=\"medium\">\n              Rendering the changes to this field caused an error\n            </Text>\n\n            {isDev && (\n              <Box marginTop={2}>\n                <Text as=\"p\" size={1}>\n                  Check the developer console for more information\n                </Text>\n              </Box>\n            )}\n          </Box>\n        </Flex>\n      </Card>\n    )\n  }\n}\n","import {Text, TextProps} from '@sanity/ui'\nimport React, {createElement} from 'react'\nimport {ArrowRightIcon, ArrowDownIcon} from '@sanity/icons'\n\n/** @internal */\nexport type FromToArrowDirection = 'down' | 'right'\n\nconst arrowComponents = {\n  down: ArrowDownIcon,\n  right: ArrowRightIcon,\n}\n\n/** @internal */\nexport function FromToArrow(\n  props: {direction?: FromToArrowDirection} & TextProps &\n    Omit<React.HTMLProps<HTMLDivElement>, 'children' | 'ref'>\n) {\n  const {direction = 'right', ...restProps} = props\n  const arrowComponent = arrowComponents[direction]\n\n  return (\n    <Text muted size={1} {...restProps}>\n      {createElement(arrowComponent)}\n    </Text>\n  )\n}\n","import {Box, BoxProps, Card, Code, Label, Stack} from '@sanity/ui'\nimport React, {useCallback, useEffect, useRef, useState} from 'react'\nimport styled, {DefaultTheme, StyledComponent} from 'styled-components'\nimport {pathToString} from '../../paths'\nimport {FieldChangeNode} from '../../types'\nimport {FromToArrow} from './FromToArrow'\n\n/** @internal */\nexport interface DiffInspectWrapperProps {\n  children: React.ReactNode\n  change: FieldChangeNode\n  as?: StyledComponent<'div', DefaultTheme>\n}\n\nconst CodeWrapper = styled.pre`\n  overflow-x: auto;\n  position: relative;\n`\n\nconst Meta = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n`\n\n/** @internal */\nexport function DiffInspectWrapper(props: DiffInspectWrapperProps & BoxProps): React.ReactElement {\n  const {children, as, change, ...restProps} = props\n  const isHovering = useRef(false)\n  const [isInspecting, setIsInspecting] = useState(false)\n\n  const toggleInspect = useCallback(() => setIsInspecting((state) => !state), [setIsInspecting])\n  const handleMouseEnter = useCallback(() => (isHovering.current = true), [])\n  const handleMouseLeave = useCallback(() => (isHovering.current = false), [isHovering])\n\n  useEffect(() => {\n    function onKeyDown(evt: KeyboardEvent) {\n      const {metaKey, key} = evt\n      if (metaKey && key === 'i' && isHovering.current) {\n        toggleInspect()\n      }\n    }\n\n    window.addEventListener('keydown', onKeyDown, false)\n    return () => window.removeEventListener('keydown', onKeyDown, false)\n  }, [toggleInspect])\n\n  return (\n    <Box as={as} onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave} {...restProps}>\n      {isInspecting ? <DiffInspector change={change} /> : children}\n    </Box>\n  )\n}\n\nconst MetaLabel = ({title}: {title: string}) => (\n  <Box padding={3} display=\"inline-block\" as={Meta}>\n    <Label size={1} muted>\n      {title}\n    </Label>\n  </Box>\n)\n\nfunction DiffInspector({change}: {change: FieldChangeNode}): React.ReactElement | null {\n  return (\n    <Stack space={3}>\n      <Card padding={3} tone=\"transparent\" as={CodeWrapper} radius={1}>\n        <MetaLabel title=\"meta\" />\n        <Code language=\"json\" size={1}>\n          {printMeta({\n            path: pathToString(change.path),\n            fromIndex: change.itemDiff?.fromIndex,\n            toIndex: change.itemDiff?.toIndex,\n            hasMoved: change.itemDiff?.hasMoved,\n            action: change.diff.action,\n            isChanged: change.diff.isChanged,\n          })}\n        </Code>\n      </Card>\n      <Card as={CodeWrapper} tone=\"critical\" padding={3} radius={1}>\n        <MetaLabel title=\"from\" />\n        <Code language=\"json\" size={1}>\n          {jsonify(change.diff.fromValue)}\n        </Code>\n      </Card>\n      <Card>\n        <FromToArrow direction=\"down\" align=\"center\" />\n      </Card>\n      <Card as={CodeWrapper} tone=\"positive\" padding={3} radius={1}>\n        <MetaLabel title=\"to\" />\n        <Code language=\"json\" size={1}>\n          {jsonify(change.diff.toValue)}\n        </Code>\n      </Card>\n    </Stack>\n  )\n}\n\nfunction jsonify(value: unknown) {\n  if (typeof value === 'undefined') {\n    return 'undefined'\n  }\n\n  return JSON.stringify(value, null, 2)\n}\n\nfunction printMeta(keys: Record<string, unknown>) {\n  const lines: string[] = []\n\n  Object.entries(keys).forEach(([key, value]) => {\n    if (typeof value !== 'undefined' && value !== null) {\n      lines.push(`${key}: ${value}`)\n    }\n  })\n\n  return lines.join('\\n')\n}\n","import React, {forwardRef, useMemo} from 'react'\nimport {Flex, Grid, rem, useTheme} from '@sanity/ui'\nimport {FromToArrow} from './FromToArrow'\n\n/** @internal */\nexport type FromToProps = {\n  align?: 'top' | 'center' | 'bottom'\n  layout?: 'grid' | 'inline'\n  from?: React.ReactNode\n  to?: React.ReactNode\n} & Omit<React.HTMLProps<HTMLDivElement>, 'children' | 'as' | 'height' | 'wrap'>\n\nconst INLINE_COLUMN_STYLES = {flexShrink: 0}\nconst BLOCK_COLUMN_STYLES = {alignItems: 'stretch'}\n\nconst FLEX_ALIGN: Record<string, 'flex-start' | 'center' | 'flex-end'> = {\n  top: 'flex-start',\n  center: 'center',\n  bottom: 'flex-end',\n  default: 'flex-start',\n}\n\n/** @internal */\nexport const FromTo = forwardRef<HTMLDivElement, FromToProps>(function FromTo(props, ref) {\n  const {align = 'top', layout = 'inline', from, to, style, ...restProps} = props\n  const theme = useTheme()\n\n  const Layout = layout === 'inline' ? Flex : Grid\n  const layoutStyles = useMemo(\n    () => ({\n      ...style,\n      ...(layout === 'inline'\n        ? {maxWidth: '100%', display: 'inline-flex'}\n        : {gridTemplateColumns: `minmax(0, 1fr) ${rem(theme.sanity.space[5])} minmax(0, 1fr)`}),\n    }),\n    [layout, style, theme]\n  )\n\n  const columnStyles = layout === 'inline' ? INLINE_COLUMN_STYLES : BLOCK_COLUMN_STYLES\n\n  return (\n    <Layout {...restProps} ref={ref} style={layoutStyles} data-from-to-layout>\n      {from && (\n        <>\n          <Flex align={FLEX_ALIGN[align]} style={columnStyles}>\n            {from}\n          </Flex>\n          <Flex align=\"center\" justify=\"center\" padding={2}>\n            <FromToArrow />\n          </Flex>\n        </>\n      )}\n      <Flex align={FLEX_ALIGN[align]} style={columnStyles}>\n        {to}\n      </Flex>\n    </Layout>\n  )\n})\n","import {Path, SchemaType} from '@sanity/types'\nimport React, {createElement, CSSProperties} from 'react'\nimport {FieldPreviewComponent} from '../../preview'\nimport {Diff} from '../../types'\nimport {getChangeVerb} from '../helpers'\nimport {DiffCard} from './DiffCard'\nimport {DiffTooltip} from './DiffTooltip'\nimport {FromTo} from './FromTo'\n\n/** @internal */\nexport interface DiffFromToProps {\n  align?: 'top' | 'center' | 'bottom'\n  cardClassName?: string\n  diff: Diff\n  layout?: 'grid' | 'inline'\n  path?: Path | string\n  previewComponent: FieldPreviewComponent\n  schemaType: SchemaType\n}\n\nconst cardStyles: CSSProperties = {\n  flex: 1,\n  minWidth: 0,\n  display: 'block',\n  whiteSpace: 'break-spaces',\n}\n\n/** @internal */\nexport function DiffFromTo(props: DiffFromToProps) {\n  const {align, cardClassName, diff, layout, path, previewComponent, schemaType} = props\n  const {action} = diff\n  const changeVerb = getChangeVerb(diff)\n\n  if (action === 'unchanged') {\n    return (\n      <DiffCard className={cardClassName} style={cardStyles}>\n        {createElement(previewComponent, {schemaType, value: diff.toValue})}\n      </DiffCard>\n    )\n  }\n\n  const from = diff.fromValue !== undefined && diff.fromValue !== null && (\n    <DiffCard as=\"del\" className={cardClassName} diff={diff} path={path} style={cardStyles}>\n      {createElement(previewComponent, {schemaType, value: diff.fromValue})}\n    </DiffCard>\n  )\n\n  const to = diff.toValue !== undefined && diff.toValue !== null && (\n    <DiffCard as=\"ins\" className={cardClassName} diff={diff} path={path} style={cardStyles}>\n      {createElement(previewComponent, {schemaType, value: diff.toValue})}\n    </DiffCard>\n  )\n\n  if (from && !to) {\n    return (\n      <DiffTooltip description={changeVerb} diff={diff} path={path}>\n        {from}\n      </DiffTooltip>\n    )\n  }\n\n  if (!from && to) {\n    return (\n      <DiffTooltip description={changeVerb} diff={diff} path={path}>\n        {to}\n      </DiffTooltip>\n    )\n  }\n\n  return (\n    <DiffTooltip description={changeVerb} diff={diff} path={path}>\n      <FromTo align={align} from={from} layout={layout} to={to} />\n    </DiffTooltip>\n  )\n}\n","import React from 'react'\nimport {Box} from '@sanity/ui'\nimport {FieldPreviewComponent} from '../../preview'\nimport {Diff, DiffComponent} from '../../types'\nimport {Preview} from '../../../preview/components/Preview'\nimport {DiffFromTo} from './DiffFromTo'\n\nconst FallbackPreview: FieldPreviewComponent<React.ReactNode> = ({value, schemaType}) => {\n  return (\n    <Box padding={2}>\n      <Preview schemaType={schemaType} value={value as any} layout=\"default\" />\n    </Box>\n  )\n}\n\n/** @internal */\nexport const FallbackDiff: DiffComponent<Diff<unknown, Record<string, unknown>>> = (props) => {\n  const {diff, schemaType} = props\n\n  return (\n    <DiffFromTo\n      diff={diff}\n      schemaType={schemaType}\n      previewComponent={FallbackPreview}\n      layout=\"grid\"\n    />\n  )\n}\n","import {RevertIcon} from '@sanity/icons'\nimport {Button, ButtonProps} from '@sanity/ui'\nimport React, {forwardRef} from 'react'\nimport styled from 'styled-components'\n\nconst Root = styled(Button)`\n  [data-ui='Text'] {\n    font-weight: normal;\n  }\n\n  div[data-ui='Box'] {\n    display: none;\n  }\n\n  &:not([data-disabled='true']):hover,\n  &:not([data-disabled='true']):focus {\n    --card-fg-color: ${({theme}) => theme.sanity.color.solid.critical.enabled.bg};\n    --card-bg-color: transparent;\n    --card-border-color: transparent;\n\n    div[data-ui='Box'] {\n      display: block;\n    }\n  }\n`\n\n/** @internal */\nexport const RevertChangesButton = forwardRef(function RevertChangesButton(\n  props: ButtonProps & Omit<React.HTMLProps<HTMLButtonElement>, 'ref'>,\n  ref: React.ForwardedRef<HTMLButtonElement>\n): React.ReactElement {\n  const {selected, ...restProps} = props\n\n  return (\n    <Root\n      icon={RevertIcon}\n      selected={selected}\n      text=\"Revert changes\"\n      mode=\"bleed\"\n      padding={1}\n      fontSize={1}\n      space={2}\n      ref={ref}\n      {...restProps}\n    />\n  )\n})\n","import {ErrorOutlineIcon} from '@sanity/icons'\nimport {Text, Box, Card, Flex} from '@sanity/ui'\nimport React from 'react'\nimport {FieldValueError} from '../../validation'\n\n/** @internal */\nexport function ValueError({error}: {error: FieldValueError}) {\n  return (\n    <Card tone=\"critical\" padding={3}>\n      <Flex align=\"flex-start\">\n        <Box>\n          <Text>\n            <ErrorOutlineIcon />\n          </Text>\n        </Box>\n        <Box flex={1} paddingLeft={3}>\n          <Text size={1} as=\"p\">\n            Value error: {error.message}\n          </Text>\n        </Box>\n      </Flex>\n    </Card>\n  )\n}\n","import styled from 'styled-components'\nimport {rem, Popover} from '@sanity/ui'\n\nexport const FieldChangeContainer = styled.div`\n  --field-change-error: ${({theme}) => theme.sanity.color.solid.critical.enabled.bg};\n  &[data-revert-all-changes-hover] [data-revert-all-hover]::before {\n    border-left: 2px solid var(--field-change-error);\n  }\n`\n\nexport const DiffBorder = styled.div`\n  --field-change-error: ${({theme}) => theme.sanity.color.solid.critical.enabled.bg};\n  --diff-inspect-padding-xsmall: ${({theme}) => rem(theme.sanity.space[1])};\n  --diff-inspect-padding-small: ${({theme}) => rem(theme.sanity.space[2])};\n\n  position: relative;\n  padding: var(--diff-inspect-padding-xsmall) 0 var(--diff-inspect-padding-xsmall)\n    var(--diff-inspect-padding-small);\n\n  &::before {\n    content: '';\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    border-left: 1px solid var(--card-border-color);\n  }\n\n  &[data-error]:hover::before,\n  &[data-revert-field-hover]:hover::before {\n    border-left: 2px solid var(--field-change-error);\n  }\n`\n\nexport const PopoverWrapper = styled(Popover)`\n  /* hides the popover when the target of it has left the visible part of the window.\n   without it, the popover will be on top of the headers (document title & changes)\n   and footers (changed notifications, publish button etc)*/\n  &[data-popper-reference-hidden='true'] {\n    display: none;\n  }\n`\n","import React, {useCallback, useMemo, useState} from 'react'\nimport {Stack, Box, Button, Text, Grid, useClickOutside} from '@sanity/ui'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {useConditionalReadOnly} from '../../conditional-property/conditionalReadOnly'\nimport {useDocumentOperation} from '../../../hooks'\nimport {FieldChangeNode, FieldOperationsAPI} from '../../types'\nimport {undoChange} from '../changes/undoChange'\nimport {DiffContext} from '../contexts/DiffContext'\nimport {useDocumentChange} from '../hooks'\nimport {useDocumentPairPermissions} from '../../../store'\nimport {ChangeBreadcrumb} from './ChangeBreadcrumb'\nimport {DiffErrorBoundary} from './DiffErrorBoundary'\nimport {DiffInspectWrapper} from './DiffInspectWrapper'\nimport {FallbackDiff} from './FallbackDiff'\nimport {RevertChangesButton} from './RevertChangesButton'\nimport {ValueError} from './ValueError'\nimport {FieldChangeContainer, DiffBorder, PopoverWrapper} from './FieldChange.styled'\n\n/** @internal */\nexport function FieldChange(\n  props: {\n    change: FieldChangeNode\n    readOnly?: boolean\n    hidden?: boolean\n  } & React.HTMLAttributes<HTMLDivElement>\n) {\n  const {change, hidden, readOnly} = props\n  const conditionalReadOnly = useConditionalReadOnly() ?? readOnly\n  const DiffComponent = change.diffComponent || FallbackDiff\n  const {\n    documentId,\n    schemaType,\n    rootDiff,\n    isComparingCurrent,\n    FieldWrapper = React.Fragment,\n  } = useDocumentChange()\n  const ops = useDocumentOperation(documentId, schemaType.name) as FieldOperationsAPI\n  const [confirmRevertOpen, setConfirmRevertOpen] = useState(false)\n  const [revertHovered, setRevertHovered] = useState(false)\n  const [revertButtonElement, setRevertButtonElement] = useState<HTMLDivElement | null>(null)\n\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id: documentId,\n    type: schemaType.name,\n    permission: 'update',\n  })\n\n  const handleRevertChanges = useCallback(() => {\n    undoChange(change, rootDiff, ops)\n  }, [change, rootDiff, ops])\n\n  const handleRevertChangesConfirm = useCallback(() => {\n    setConfirmRevertOpen(true)\n  }, [])\n\n  const closeRevertChangesConfirmDialog = React.useCallback(() => {\n    setConfirmRevertOpen(false)\n  }, [])\n\n  const handleRevertButtonMouseEnter = useCallback(() => {\n    setRevertHovered(true)\n  }, [])\n\n  const handleRevertButtonMouseLeave = useCallback(() => {\n    setRevertHovered(false)\n  }, [])\n\n  const handleClickOutside = useCallback(() => setConfirmRevertOpen(false), [])\n\n  useClickOutside(handleClickOutside, [revertButtonElement])\n\n  const content = useMemo(\n    () =>\n      hidden ? null : (\n        <Stack space={1} as={FieldChangeContainer}>\n          {change.showHeader && <ChangeBreadcrumb change={change} titlePath={change.titlePath} />}\n\n          <FieldWrapper path={change.path} hasHover={revertHovered}>\n            <DiffInspectWrapper\n              change={change}\n              as={DiffBorder}\n              data-revert-field-hover={revertHovered ? '' : undefined}\n              data-error={change.error ? '' : undefined}\n              data-revert-all-hover\n            >\n              {change.error ? (\n                <ValueError error={change.error} />\n              ) : (\n                <DiffErrorBoundary>\n                  <DiffContext.Provider value={{path: change.path}}>\n                    <DiffComponent\n                      diff={change.diff}\n                      schemaType={change.schemaType as ObjectSchemaType}\n                    />\n                  </DiffContext.Provider>\n                </DiffErrorBoundary>\n              )}\n\n              {isComparingCurrent && !isPermissionsLoading && permissions?.granted && (\n                <PopoverWrapper\n                  content={\n                    <Box padding={3} sizing=\"border\">\n                      Are you sure you want to revert the changes?\n                      <Grid columns={2} gap={2} marginTop={2}>\n                        <Button mode=\"ghost\" onClick={closeRevertChangesConfirmDialog}>\n                          <Text align=\"center\">Cancel</Text>\n                        </Button>\n                        <Button tone=\"critical\" onClick={handleRevertChanges}>\n                          <Text align=\"center\">Revert change</Text>\n                        </Button>\n                      </Grid>\n                    </Box>\n                  }\n                  open={confirmRevertOpen}\n                  portal\n                  placement=\"left\"\n                  ref={setRevertButtonElement}\n                >\n                  <Box flex={1}>\n                    <RevertChangesButton\n                      onClick={handleRevertChangesConfirm}\n                      onMouseEnter={handleRevertButtonMouseEnter}\n                      onMouseLeave={handleRevertButtonMouseLeave}\n                      selected={confirmRevertOpen}\n                      disabled={conditionalReadOnly}\n                      data-testid={`single-change-revert-button-${change?.key}`}\n                    />\n                  </Box>\n                </PopoverWrapper>\n              )}\n            </DiffInspectWrapper>\n          </FieldWrapper>\n        </Stack>\n      ),\n    [\n      change,\n      closeRevertChangesConfirmDialog,\n      conditionalReadOnly,\n      confirmRevertOpen,\n      DiffComponent,\n      FieldWrapper,\n      hidden,\n      handleRevertButtonMouseEnter,\n      handleRevertButtonMouseLeave,\n      handleRevertChanges,\n      handleRevertChangesConfirm,\n      isComparingCurrent,\n      isPermissionsLoading,\n      permissions,\n      revertHovered,\n    ]\n  )\n\n  return content\n}\n","import {useEffect, useRef, useState} from 'react'\n\nexport function useHover<T extends HTMLElement>(): [React.MutableRefObject<T | null>, boolean] {\n  const ref = useRef<T | null>(null)\n  const [value, setValue] = useState(false)\n\n  useEffect(() => {\n    const node = ref.current\n\n    if (!node) {\n      return () => undefined\n    }\n\n    const handleMouseOver = () => setValue(true)\n    const handleMouseOut = () => setValue(false)\n\n    node.addEventListener('mouseover', handleMouseOver)\n    node.addEventListener('mouseout', handleMouseOut)\n\n    return () => {\n      node.removeEventListener('mouseover', handleMouseOver)\n      node.removeEventListener('mouseout', handleMouseOut)\n    }\n  }, [])\n\n  return [ref, value]\n}\n","import {rem, Popover} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const ChangeListWrapper = styled.div`\n  display: grid;\n  grid-template-columns: minmax(0, 1fr);\n`\n\nexport const GroupChangeContainer = styled.div`\n  --field-change-error: ${({theme}) => theme.sanity.color.solid.critical.enabled.bg};\n  --diff-inspect-padding-xsmall: ${({theme}) => rem(theme.sanity.space[1])};\n  --diff-inspect-padding-small: ${({theme}) => rem(theme.sanity.space[2])};\n\n  position: relative;\n  padding: var(--diff-inspect-padding-xsmall) var(--diff-inspect-padding-small);\n\n  &::before {\n    content: '';\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    border-left: 1px solid var(--card-border-color);\n  }\n\n  &[data-error]:hover::before,\n  &[data-revert-group-hover]:hover::before,\n  &[data-revert-all-groups-hover]::before {\n    border-left: 2px solid var(--field-change-error);\n  }\n`\n\nexport const PopoverWrapper = styled(Popover)`\n  /* hides the popover when the target of it has left the visible part of the window.\n   without it, the popover will be on top of the headers (document title & changes)\n   and footers (changed notifications, publish button etc)*/\n  &[data-popper-reference-hidden='true'] {\n    display: none;\n  }\n`\n","import React, {useCallback, useContext, useMemo, useState} from 'react'\nimport {Box, Stack, Button, Grid, Text, useClickOutside} from '@sanity/ui'\nimport {useDocumentOperation} from '../../../hooks'\nimport {undoChange} from '../changes/undoChange'\nimport {isFieldChange} from '../helpers'\nimport {isPTSchemaType} from '../../types/portableText/diff'\nimport {GroupChangeNode, FieldOperationsAPI} from '../../types'\nimport {useHover} from '../../utils/useHover'\nimport {pathsAreEqual} from '../../paths'\nimport {DiffContext} from '../contexts/DiffContext'\nimport {useDocumentChange} from '../hooks'\nimport {useDocumentPairPermissions} from '../../../store'\nimport {ChangeBreadcrumb} from './ChangeBreadcrumb'\nimport {ChangeResolver} from './ChangeResolver'\nimport {RevertChangesButton} from './RevertChangesButton'\nimport {ChangeListWrapper, GroupChangeContainer, PopoverWrapper} from './GroupChange.styled'\n\n/** @internal */\nexport function GroupChange(\n  props: {\n    change: GroupChangeNode\n    readOnly?: boolean\n    hidden?: boolean\n  } & React.HTMLAttributes<HTMLDivElement>\n): React.ReactElement | null {\n  const {\n    change: group,\n    readOnly,\n    hidden,\n    // 'data-revert-all-changes-hover': dataRevertAllChangesHover,\n    ...restProps\n  } = props\n  const {titlePath, changes, path: groupPath} = group\n  const {path: diffPath} = useContext(DiffContext)\n  const {documentId, schemaType, FieldWrapper, rootDiff, isComparingCurrent} = useDocumentChange()\n\n  const isPortableText = changes.every(\n    (change) => isFieldChange(change) && isPTSchemaType(change.schemaType)\n  )\n\n  const isNestedInDiff = pathsAreEqual(diffPath, groupPath)\n  const [revertButtonRef, isRevertButtonHovered] = useHover<HTMLButtonElement>()\n\n  const docOperations = useDocumentOperation(documentId, schemaType.name) as FieldOperationsAPI\n  const [confirmRevertOpen, setConfirmRevertOpen] = useState(false)\n  const [revertPopoverElement, setRevertPopoverElement] = useState<HTMLDivElement | null>(null)\n\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id: documentId,\n    type: schemaType.name,\n    permission: 'update',\n  })\n\n  const handleRevertChanges = useCallback(\n    () => undoChange(group, rootDiff, docOperations),\n    [group, rootDiff, docOperations]\n  )\n\n  const handleRevertChangesConfirm = useCallback(() => {\n    setConfirmRevertOpen(true)\n  }, [])\n\n  const closeRevertChangesConfirmDialog = useCallback(() => {\n    setConfirmRevertOpen(false)\n  }, [])\n\n  useClickOutside(() => setConfirmRevertOpen(false), [revertPopoverElement])\n\n  const content = useMemo(\n    () =>\n      hidden ? null : (\n        <Stack\n          space={1}\n          as={GroupChangeContainer}\n          data-revert-group-hover={isRevertButtonHovered ? '' : undefined}\n          data-portable-text={isPortableText ? '' : undefined}\n          // data-revert-all-groups-hover={\n          //   restProps[] === '' ? '' : undefined\n          // }\n        >\n          <Stack as={ChangeListWrapper} space={5}>\n            {changes.map((change) => (\n              <ChangeResolver\n                key={change.key}\n                change={change}\n                readOnly={readOnly}\n                hidden={hidden}\n              />\n            ))}\n          </Stack>\n          {isComparingCurrent && !isPermissionsLoading && permissions?.granted && (\n            <PopoverWrapper\n              content={\n                <Box>\n                  Are you sure you want to revert the changes?\n                  <Grid columns={2} gap={2} marginTop={2}>\n                    <Button mode=\"ghost\" onClick={closeRevertChangesConfirmDialog}>\n                      <Text align=\"center\">Cancel</Text>\n                    </Button>\n                    <Button tone=\"critical\" onClick={handleRevertChanges}>\n                      <Text align=\"center\">Revert change</Text>\n                    </Button>\n                  </Grid>\n                </Box>\n              }\n              portal\n              padding={4}\n              placement={'left'}\n              open={confirmRevertOpen}\n              ref={setRevertPopoverElement}\n            >\n              <Box>\n                <RevertChangesButton\n                  onClick={handleRevertChangesConfirm}\n                  ref={revertButtonRef}\n                  selected={confirmRevertOpen}\n                  disabled={readOnly}\n                  data-testid={`group-change-revert-button-${group.fieldsetName}`}\n                />\n              </Box>\n            </PopoverWrapper>\n          )}\n        </Stack>\n      ),\n    [\n      changes,\n      closeRevertChangesConfirmDialog,\n      confirmRevertOpen,\n      readOnly,\n      group.fieldsetName,\n      handleRevertChanges,\n      handleRevertChangesConfirm,\n      hidden,\n      isComparingCurrent,\n      isRevertButtonHovered,\n      isPermissionsLoading,\n      isPortableText,\n      permissions,\n      revertButtonRef,\n    ]\n  )\n\n  return hidden ? null : (\n    <Stack space={1} {...restProps}>\n      <ChangeBreadcrumb titlePath={titlePath} />\n      {isNestedInDiff || !FieldWrapper ? (\n        content\n      ) : (\n        <FieldWrapper hasHover={isRevertButtonHovered} path={group.path}>\n          {content}\n        </FieldWrapper>\n      )}\n    </Stack>\n  )\n}\n","import {ConditionalProperty, SanityDocument} from '@sanity/types'\nimport React from 'react'\nimport {Text} from '@sanity/ui'\nimport {unstable_useConditionalProperty as useConditionalProperty} from '../../conditional-property'\nimport {ChangeNode} from '../../types'\nimport {useDocumentChange} from '../hooks'\nimport {FieldChange} from './FieldChange'\nimport {GroupChange} from './GroupChange'\n\n/** @internal */\nexport interface ChangeResolverProps {\n  change: ChangeNode\n  readOnly?: ConditionalProperty\n  hidden?: ConditionalProperty\n}\n\n/** @internal */\nexport function ChangeResolver(props: ChangeResolverProps) {\n  const {change, hidden, readOnly} = props\n  const {value} = useDocumentChange()\n\n  const isHidden = useConditionalProperty({\n    // @todo: is parent missing here?\n    document: value as SanityDocument,\n    checkProperty: hidden || change.schemaType?.hidden,\n    checkPropertyKey: 'hidden',\n    value: change.type === 'field' ? change.diff.toValue : undefined,\n  })\n\n  const isReadOnly = useConditionalProperty({\n    // @todo: is parent missing here?\n    document: value as SanityDocument,\n    checkProperty: readOnly || change.schemaType?.readOnly,\n    checkPropertyKey: 'readOnly',\n    value: change.type === 'field' ? change.diff.toValue : undefined,\n  })\n\n  if (isHidden) return null\n\n  if (change.type === 'field') {\n    return <FieldChange change={change} readOnly={isReadOnly} />\n  }\n\n  if (change.type === 'group') {\n    return (\n      <GroupChange\n        change={change}\n        data-testid={`group-change-${change.fieldsetName}`}\n        readOnly={isReadOnly}\n      />\n    )\n  }\n\n  return (\n    <Text>\n      Unknown change type: <code>{(change as any).type || 'undefined'}</code>\n    </Text>\n  )\n}\n","import {Stack, Text} from '@sanity/ui'\nimport React from 'react'\n\n/** @internal */\nexport function NoChanges() {\n  return (\n    <Stack space={3}>\n      <Text size={1} weight=\"semibold\" as=\"h3\">\n        There are no changes\n      </Text>\n      <Text as=\"p\" size={1} muted>\n        Edit the document or select an older version in the timeline to see a list of changes appear\n        in this panel.\n      </Text>\n    </Stack>\n  )\n}\n","import {Popover} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const ChangeListWrapper = styled.div`\n  display: grid;\n  grid-template-columns: minmax(0, 1fr);\n`\n\nexport const PopoverWrapper = styled(Popover)`\n  /* hides the popover when the target of it has left the visible part of the window.\n   without it, the popover will be on top of the headers (document title & changes)\n   and footers (changed notifications, publish button etc)*/\n  &[data-popper-reference-hidden='true'] {\n    display: none;\n  }\n`\n","import {Button, Box, Card, Grid, Stack, useClickOutside} from '@sanity/ui'\nimport {RevertIcon} from '@sanity/icons'\nimport React, {useCallback, useContext, useMemo, useState} from 'react'\nimport {SanityDocument} from '@sanity/client'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {unstable_useConditionalProperty as useConditionalProperty} from '../../conditional-property'\nimport {ObjectDiff, ChangeNode, FieldOperationsAPI} from '../../types'\nimport {DiffContext} from '../contexts/DiffContext'\nimport {buildObjectChangeList} from '../changes/buildChangeList'\nimport {undoChange} from '../changes/undoChange'\nimport {useDocumentChange} from '../hooks/useDocumentChange'\nimport {useDocumentPairPermissions} from '../../../store'\nimport {useDocumentOperation} from '../../../hooks'\nimport {ChangeResolver} from './ChangeResolver'\nimport {NoChanges} from './NoChanges'\nimport {ChangeListWrapper, PopoverWrapper} from './ChangeList.styled'\n\n/** @internal */\nexport interface ChangeListProps {\n  schemaType: ObjectSchemaType\n  diff: ObjectDiff\n  fields?: string[]\n}\n\n/** @internal */\nexport function ChangeList({diff, fields, schemaType}: ChangeListProps): React.ReactElement | null {\n  const {documentId, isComparingCurrent, value} = useDocumentChange()\n  const docOperations = useDocumentOperation(documentId, schemaType.name) as FieldOperationsAPI\n  const {path} = useContext(DiffContext)\n  const isRoot = path.length === 0\n  const [confirmRevertAllOpen, setConfirmRevertAllOpen] = useState(false)\n  const [confirmRevertAllHover, setConfirmRevertAllHover] = useState(false)\n\n  const isReadOnly = useConditionalProperty({\n    document: value as SanityDocument,\n    value: undefined,\n    checkProperty: schemaType.readOnly,\n    checkPropertyKey: 'readOnly',\n  })\n\n  if (schemaType.jsonType !== 'object') {\n    throw new Error(`Only object schema types are allowed in ChangeList`)\n  }\n\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id: documentId,\n    type: schemaType.name,\n    permission: 'update',\n  })\n\n  const allChanges = useMemo(\n    () => buildObjectChangeList(schemaType, diff, path, [], {fieldFilter: fields}),\n    [schemaType, fields, path, diff]\n  )\n\n  const changes = useMemo(\n    () => (fields && fields.length === 0 ? [] : maybeFlatten(allChanges)),\n    [allChanges, fields]\n  )\n\n  const rootChange = allChanges[0]\n\n  const revertAllChanges = useCallback(() => {\n    undoChange(rootChange, diff, docOperations)\n    setConfirmRevertAllOpen(false)\n  }, [rootChange, diff, docOperations])\n\n  const handleRevertAllChangesClick = useCallback(() => {\n    setConfirmRevertAllOpen(true)\n  }, [])\n\n  const handleRevertAllChangesMouseEnter = useCallback(() => {\n    setConfirmRevertAllHover(true)\n  }, [])\n\n  const handleRevertAllChangesMouseLeave = useCallback(() => {\n    setConfirmRevertAllHover(false)\n  }, [])\n\n  const closeRevertAllChangesConfirmDialog = useCallback(() => {\n    setConfirmRevertAllOpen(false)\n  }, [])\n\n  const [revertAllContainerElement, setRevertAllContainerElement] = useState<HTMLDivElement | null>(\n    null\n  )\n\n  const handleClickOutside = useCallback(() => setConfirmRevertAllOpen(false), [])\n\n  useClickOutside(handleClickOutside, [revertAllContainerElement])\n\n  if (changes.length === 0) {\n    return isRoot ? <NoChanges /> : null\n  }\n\n  const showFooter = isRoot && changes.length > 1\n\n  return (\n    <Card>\n      <Stack space={5}>\n        <Stack as={ChangeListWrapper} space={5}>\n          {changes.map((change) => (\n            <div key={change.key}>\n              <ChangeResolver\n                change={change}\n                key={change.key}\n                data-revert-all-changes-hover={confirmRevertAllHover ? '' : undefined}\n                readOnly={isReadOnly || change?.readOnly}\n                hidden={change?.hidden}\n              />\n            </div>\n          ))}\n        </Stack>\n\n        {showFooter && isComparingCurrent && !isPermissionsLoading && permissions?.granted && (\n          <PopoverWrapper\n            content={\n              <Box>\n                Are you sure you want to revert all {changes.length} changes?\n                <Grid columns={2} gap={2} marginTop={2}>\n                  <Button mode=\"ghost\" text=\"Cancel\" onClick={closeRevertAllChangesConfirmDialog} />\n                  <Button tone=\"critical\" text=\"Revert all\" onClick={revertAllChanges} />\n                </Grid>\n              </Box>\n            }\n            open={confirmRevertAllOpen}\n            padding={4}\n            placement={'left'}\n            portal\n            ref={setRevertAllContainerElement}\n          >\n            <Stack>\n              <Button\n                tone=\"critical\"\n                mode=\"ghost\"\n                text=\"Revert all changes\"\n                icon={RevertIcon}\n                onClick={handleRevertAllChangesClick}\n                onMouseEnter={handleRevertAllChangesMouseEnter}\n                onMouseLeave={handleRevertAllChangesMouseLeave}\n                disabled={isReadOnly}\n              />\n            </Stack>\n          </PopoverWrapper>\n        )}\n      </Stack>\n    </Card>\n  )\n}\n\nfunction maybeFlatten(changes: ChangeNode[]) {\n  return changes.length === 1 && changes[0].type === 'group' && changes[0].path.length === 0\n    ? changes[0].changes\n    : changes\n}\n","import {Text, Card, rem} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {StringDiffSegment, StringDiff} from '../../types'\nimport {DiffCard} from './DiffCard'\n\nconst RoundedCard = styled.span`\n  border-radius: ${({theme}) => rem(theme.sanity.radius[1])};\n`\n\nconst ChangeSegment = styled(Text)`\n  &:not([hidden]) {\n    display: inline;\n    line-height: calc(1.25em + 2px);\n  }\n\n  &:hover {\n    background-color: none !important;\n    background-image: linear-gradient(\n      to bottom,\n      var(--card-bg-color) 0,\n      var(--card-bg-color) 33.333%,\n      currentColor 33.333%,\n      currentColor 100%\n    );\n    background-size: 1px 3px;\n    background-repeat: repeat-x;\n    background-position-y: bottom;\n    padding-bottom: 3px;\n    box-shadow: 0 0 0 1px var(--card-bg-color);\n    z-index: 1;\n  }\n`\n\n/** @internal */\nexport function DiffStringSegment(props: {segment: StringDiffSegment}): React.ReactElement {\n  const {segment} = props\n  const {text} = segment\n\n  if (segment.action === 'added') {\n    return (\n      <DiffCard\n        annotation={segment.annotation}\n        disableHoverEffect\n        tooltip={{description: 'Added'}}\n        as={RoundedCard}\n      >\n        <ChangeSegment as=\"ins\" style={{textDecoration: 'none'}}>\n          {text}\n        </ChangeSegment>\n      </DiffCard>\n    )\n  }\n\n  if (segment.action === 'removed') {\n    return (\n      <DiffCard\n        annotation={segment.annotation}\n        as={RoundedCard}\n        disableHoverEffect\n        tooltip={{description: 'Removed'}}\n      >\n        <ChangeSegment as=\"del\">{text}</ChangeSegment>\n      </DiffCard>\n    )\n  }\n\n  return (\n    <Card as=\"span\" radius={2} style={{display: 'inline'}}>\n      {text}\n    </Card>\n  )\n}\n\n/** @internal */\nexport function DiffString(props: {diff: StringDiff}) {\n  const {diff} = props\n\n  return (\n    <>\n      {(diff.segments || []).map((segment, segmentIndex) => (\n        <DiffStringSegment\n          // eslint-disable-next-line react/no-array-index-key\n          key={segmentIndex}\n          segment={segment}\n        />\n      ))}\n    </>\n  )\n}\n","import {Text, Box, Flex, Stack} from '@sanity/ui'\nimport React, {createElement} from 'react'\nimport styled from 'styled-components'\n\n/** @internal */\nexport interface MetaInfoProps {\n  title: string\n  action?: string\n  icon?: React.ComponentType\n  children?: React.ReactNode\n  markRemoved?: boolean\n}\n\nconst MetaText = styled(Text)`\n  color: inherit;\n`\n\n/** @internal */\nexport function MetaInfo(props: MetaInfoProps) {\n  const {title, action, icon, children, markRemoved} = props\n\n  return (\n    <Flex padding={2} align=\"center\">\n      {icon && (\n        <Box padding={2}>\n          <MetaText size={4} forwardedAs={markRemoved ? 'del' : 'div'}>\n            {createElement(icon)}\n          </MetaText>\n        </Box>\n      )}\n\n      <Stack space={2} paddingLeft={2}>\n        <MetaText\n          size={1}\n          weight=\"semibold\"\n          forwardedAs={markRemoved ? 'del' : 'h3'}\n          textOverflow=\"ellipsis\"\n        >\n          {title}\n        </MetaText>\n\n        {action && <div>{action}</div>}\n\n        <MetaText size={0} textOverflow=\"ellipsis\">\n          {children}\n        </MetaText>\n      </Stack>\n    </Flex>\n  )\n}\n","import {isKeyedObject} from '@sanity/types'\n\nexport function isEqual(item: unknown, otherItem: unknown): boolean {\n  if (item === otherItem) {\n    return true\n  }\n\n  if (typeof item !== typeof otherItem) {\n    return false\n  }\n\n  if (typeof item !== 'object' && !Array.isArray(item)) {\n    return item === otherItem\n  }\n\n  if (isKeyedObject(item) && isKeyedObject(otherItem) && item._key === otherItem._key) {\n    return true\n  }\n\n  if (Array.isArray(item) && Array.isArray(otherItem)) {\n    if (item.length !== otherItem.length) {\n      return false\n    }\n\n    return item.every((child, i) => isEqual(child, otherItem[i]))\n  }\n\n  if (item === null || otherItem === null) {\n    return item === otherItem\n  }\n\n  const obj = item as Record<string, unknown>\n  const otherObj = otherItem as Record<string, unknown>\n\n  const keys = Object.keys(obj)\n  const otherKeys = Object.keys(otherObj)\n  if (keys.length !== otherKeys.length) {\n    return false\n  }\n\n  return keys.every((keyName) => isEqual(obj[keyName], otherObj[keyName]))\n}\n","import {ArraySchemaType, isKeyedObject, SchemaType, TypedObject} from '@sanity/types'\nimport {Box, Flex} from '@sanity/ui'\nimport React from 'react'\nimport {useUserColorManager} from '../../../../user-color'\nimport {DiffTooltip, FromToArrow, getAnnotationColor} from '../../../diff'\nimport {Annotation, ArrayDiff, Diff, DiffComponent, ItemDiff} from '../../../types'\nimport {Checkbox} from '../../boolean/preview'\nimport {isEqual} from '../util/arrayUtils'\nimport {Preview} from '../../../../preview/components/Preview'\n\ninterface NamedListOption {\n  title?: string\n  value: unknown\n}\n\ninterface NormalizedListOption {\n  title?: string\n  value: unknown\n  memberType?: Exclude<SchemaType, ArraySchemaType>\n  isPresent: boolean\n  annotation: Annotation\n  itemIndex: number\n}\n\nexport const ArrayOfOptionsFieldDiff: DiffComponent<ArrayDiff> = ({diff, schemaType}) => {\n  const options = schemaType.options?.list\n  const colorManager = useUserColorManager()\n  if (!Array.isArray(options)) {\n    // Shouldn't happen, because the resolver should only resolve here if it does\n    return null\n  }\n\n  return (\n    <div>\n      {diff.items\n        .map((item) => normalizeItems(item, diff, schemaType))\n        .filter((item): item is NormalizedListOption => item !== null)\n        .sort(sortItems)\n        .map((item, index) => {\n          const {annotation, isPresent, value, memberType, title} = item\n          const color = getAnnotationColor(colorManager, annotation)\n          const action = isPresent ? 'Added' : 'Removed'\n          return (\n            <Flex align=\"center\" key={getItemKey(diff, index)}>\n              <DiffTooltip annotations={annotation ? [annotation] : []} description={action}>\n                <Flex align=\"center\">\n                  <Checkbox checked={!isPresent} color={color} />\n                  <Box margin={2}>\n                    <FromToArrow />\n                  </Box>\n                  <Checkbox checked={isPresent} color={color} />\n                </Flex>\n              </DiffTooltip>\n              <Flex align=\"center\">\n                <ItemPreview value={title || value} memberType={memberType} />\n              </Flex>\n            </Flex>\n          )\n        })}\n    </div>\n  )\n}\n\nfunction normalizeItems(\n  item: ItemDiff,\n  parentDiff: ArrayDiff,\n  schemaType: ArraySchemaType\n): NormalizedListOption | null {\n  if (item.diff.action === 'unchanged') {\n    return null\n  }\n\n  const {fromValue, toValue} = parentDiff\n  const value = getValue(item.diff)\n  const wasPresent = isInArray(value, fromValue)\n  const isPresent = isInArray(value, toValue)\n  if (wasPresent === isPresent) {\n    return null\n  }\n\n  return {\n    title: getItemTitle(value, schemaType),\n    memberType: resolveMemberType(getValue(item.diff), schemaType),\n    itemIndex: getOptionIndex(value, schemaType),\n    annotation: item.annotation,\n    isPresent,\n    value,\n  }\n}\n\nfunction sortItems(itemA: NormalizedListOption, itemB: NormalizedListOption): number {\n  return itemA.itemIndex - itemB.itemIndex\n}\n\nfunction ItemPreview({value, memberType}: {memberType?: SchemaType; value: unknown}) {\n  return (\n    <Box marginX={2} marginY={1}>\n      {typeof value === 'string' || typeof value === 'number' ? (\n        value\n      ) : (\n        <Preview schemaType={memberType!} value={value as any} layout=\"default\" />\n      )}\n    </Box>\n  )\n}\n\nfunction isInArray(value: unknown, parent?: unknown[] | null): boolean {\n  const array = parent || []\n  return typeof value === 'object' && value !== null\n    ? array.some((item) => isEqual(item, value))\n    : array.includes(value)\n}\n\nfunction getItemKey(diff: Diff, index: number): string | number {\n  const value = diff.toValue || diff.fromValue\n  return isKeyedObject(value) ? value._key : index\n}\n\nfunction getValue(diff: Diff) {\n  return typeof diff.toValue === 'undefined' ? diff.fromValue : diff.toValue\n}\n\nfunction resolveMemberType(item: unknown, schemaType: ArraySchemaType) {\n  const itemTypeName = resolveTypeName(item)\n  return schemaType.of.find((memberType) => memberType.name === itemTypeName)\n}\n\nfunction resolveTypeName(value: unknown): string {\n  const jsType = resolveJSType(value)\n  if (jsType !== 'object') {\n    return jsType\n  }\n\n  const obj = value as TypedObject\n  return ('_type' in obj && obj._type) || jsType\n}\n\nfunction resolveJSType(val: unknown) {\n  if (val === null) {\n    return 'null'\n  }\n\n  if (Array.isArray(val)) {\n    return 'array'\n  }\n\n  return typeof val\n}\n\nfunction isNamedOption(item: unknown | NamedListOption): item is NamedListOption {\n  return typeof item === 'object' && item !== null && 'title' in item\n}\n\nfunction getOptionIndex(item: unknown, schemaType: ArraySchemaType): number {\n  const list = schemaType.options?.list || []\n  return list.findIndex((opt) => isEqual(isNamedOption(opt) ? opt.value : opt, item))\n}\n\nfunction getItemTitle(item: unknown, schemaType: ArraySchemaType): string | undefined {\n  const list = (schemaType.options?.list || []) as NamedListOption[]\n  const index = getOptionIndex(item, schemaType)\n  return index === -1 ? undefined : list[index].title || undefined\n}\n","import * as legacyDateFormat from '@sanity/util/legacyDateFormat'\nimport {StringSchemaType} from '@sanity/types'\nimport {Box} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {FieldPreviewComponent} from '../../../preview'\n\nconst DEFAULT_DATE_FORMAT = 'YYYY-MM-DD'\nconst DEFAULT_TIME_FORMAT = 'HH:mm'\n\nconst DatetimeWrapper = styled.div`\n  display: inline-block;\n  word-wrap: break-word;\n`\n\nexport const DatetimePreview: FieldPreviewComponent<string> = function DatetimePreview({\n  value,\n  schemaType,\n}) {\n  return (\n    <Box as={DatetimeWrapper} paddingX={2} paddingY={1}>\n      {formatDateTime(value, schemaType)}\n    </Box>\n  )\n}\n\nfunction formatDateTime(value: string, schemaType: StringSchemaType): string {\n  const {options, name} = schemaType\n  const dateFormat = options?.dateFormat || DEFAULT_DATE_FORMAT\n  const timeFormat = options?.timeFormat || DEFAULT_TIME_FORMAT\n\n  return legacyDateFormat.format(\n    new Date(value),\n    name === 'date' ? dateFormat : `${dateFormat} ${timeFormat}`\n  )\n}\n","import React from 'react'\nimport {DiffFromTo} from '../../../diff'\nimport {DiffComponent, StringDiff} from '../../../types'\nimport {DatetimePreview} from '../preview'\n\nexport const DatetimeFieldDiff: DiffComponent<StringDiff> = ({diff, schemaType}) => {\n  return (\n    <DiffFromTo\n      align=\"center\"\n      diff={diff}\n      schemaType={schemaType}\n      previewComponent={DatetimePreview}\n    />\n  )\n}\n","import React from 'react'\nimport {DiffFromTo} from '../../../diff'\nimport {DiffComponent, StringDiff} from '../../../types'\nimport {StringPreview} from '../../string/preview'\n\nexport const UrlFieldDiff: DiffComponent<StringDiff> = ({diff, schemaType}) => {\n  return <DiffFromTo diff={diff} schemaType={schemaType} previewComponent={StringPreview} />\n}\n","import {Box} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {Slug} from '@sanity/types'\nimport {FieldPreviewComponent} from '../../../preview'\n\nconst SlugWrapper = styled.div`\n  display: inline-block;\n  word-break: break-all;\n  white-space: pre-wrap;\n`\n\nexport const SlugPreview: FieldPreviewComponent<Slug> = (props) => {\n  const {value} = props\n\n  return (\n    <Box as={SlugWrapper} paddingX={2} paddingY={1}>\n      {value.current}\n    </Box>\n  )\n}\n","import React from 'react'\nimport {DiffFromTo} from '../../../diff'\nimport {DiffComponent, ObjectDiff} from '../../../types'\nimport {SlugPreview} from '../preview'\n\ninterface Slug {\n  current?: string\n}\n\nexport const SlugFieldDiff: DiffComponent<ObjectDiff<Slug>> = ({diff, schemaType}) => {\n  return (\n    <DiffFromTo\n      layout=\"inline\"\n      diff={diff}\n      schemaType={schemaType}\n      previewComponent={SlugPreview}\n    />\n  )\n}\n","import {ArrayOfOptionsFieldDiff} from '../../types/array/diff'\nimport {DatetimeFieldDiff} from '../../types/datetime/diff'\nimport {UrlFieldDiff} from '../../types/url/diff'\nimport {SlugFieldDiff} from '../../types/slug/diff'\nimport {DiffComponentResolver} from '../../types'\n\n/** @internal */\nexport const diffResolver: DiffComponentResolver = ({schemaType}) => {\n  // datetime or date\n  if (['datetime', 'date'].includes(schemaType.name)) {\n    return DatetimeFieldDiff\n  }\n\n  if (schemaType.name === 'url') {\n    return UrlFieldDiff\n  }\n\n  if (schemaType.name === 'slug') {\n    return SlugFieldDiff\n  }\n\n  if (schemaType.jsonType === 'array' && Array.isArray(schemaType.options?.list)) {\n    return ArrayOfOptionsFieldDiff\n  }\n\n  return undefined\n}\n","import {Path, SanityDocument} from '@sanity/types'\nimport {isEqual} from 'lodash'\nimport {useEffect, useMemo, useState} from 'react'\nimport {Subject} from 'rxjs'\nimport {distinctUntilChanged, map} from 'rxjs/operators'\nimport {getValueAtPath} from '../field'\nimport {useUnique} from '../util'\nimport {useFormBuilder} from './useFormBuilder'\n\n/**\n * @beta\n */\nexport function useFormValue(path: Path): unknown {\n  const uniquePath = useUnique(path)\n  const {getDocument, patchChannel} = useFormBuilder().__internal\n  const documentValueSubject = useMemo(() => new Subject<SanityDocument | undefined>(), [])\n  const documentValue$ = useMemo(() => documentValueSubject.asObservable(), [documentValueSubject])\n  const [value, setValue] = useState(() => getValueAtPath(getDocument(), uniquePath))\n\n  // Subscribe to all document changes\n  useEffect(\n    () => patchChannel.subscribe(() => documentValueSubject.next(getDocument())),\n    [documentValueSubject, getDocument, patchChannel]\n  )\n\n  // Subscribe to value at `path`\n  useEffect(() => {\n    const value$ = documentValue$.pipe(\n      map((documentValue) =>\n        uniquePath.length === 0 ? documentValue : getValueAtPath(documentValue, uniquePath)\n      ),\n      distinctUntilChanged((x, y) => isEqual(x, y))\n    )\n\n    const sub = value$.subscribe(setValue)\n\n    return () => sub.unsubscribe()\n  }, [documentValue$, uniquePath])\n\n  return value\n}\n","import {SanityClient} from '@sanity/client'\nimport {CrossDatasetReferenceSchemaType, ReferenceFilterSearchOptions} from '@sanity/types'\nimport {Observable} from 'rxjs'\nimport {map} from 'rxjs/operators'\nimport {createWeightedSearch} from '../../../../../search'\nimport {collate} from '../../../../../util'\n\ninterface SearchHit {\n  id: string\n  type: string\n  published: undefined | {_id: string; _type: string}\n}\n\nexport function search(\n  client: SanityClient,\n  textTerm: string,\n  type: CrossDatasetReferenceSchemaType,\n  options: ReferenceFilterSearchOptions\n): Observable<SearchHit[]> {\n  const searchWeighted = createWeightedSearch(\n    type.to.map((crossDatasetType) => ({\n      name: crossDatasetType.type,\n      // eslint-disable-next-line camelcase\n      __experimental_search: crossDatasetType.__experimental_search,\n    })),\n\n    client,\n    options\n  )\n\n  return searchWeighted(textTerm, {includeDrafts: false}).pipe(\n    // pick the 100 best matches\n    map((results) => results.map((result) => result.hit)),\n    map(collate),\n    map((collated) =>\n      collated.map((entry) => ({\n        id: entry.id,\n        type: entry.type,\n        published: entry.published,\n      }))\n    )\n  )\n}\n","import {map, switchMap} from 'rxjs/operators'\nimport {CrossDatasetReferenceSchemaType} from '@sanity/types'\nimport {combineLatest, Observable, of} from 'rxjs'\nimport {SanityClient} from '@sanity/client'\nimport {keyBy} from 'lodash'\nimport {CrossDatasetReferenceInfo} from '../../../../inputs/CrossDatasetReferenceInput/types'\nimport {\n  DocumentAvailability,\n  DocumentPreviewStore,\n  getPreviewPaths,\n  prepareForPreview,\n  Previewable,\n} from '../../../../../preview'\nimport {FIXME} from '../../../../../FIXME'\nimport {isRecord} from '../../../../../util'\n\nconst REQUEST_TAG_BASE = 'cross-dataset-refs'\n\nconst AVAILABILITY_READABLE = {\n  available: true,\n  reason: 'READABLE',\n} as const\n\nconst AVAILABILITY_PERMISSION_DENIED = {\n  available: false,\n  reason: 'PERMISSION_DENIED',\n} as const\n\nconst AVAILABILITY_NOT_FOUND = {\n  available: false,\n  reason: 'NOT_FOUND',\n} as const\n\n/**\n * Takes a client instance and returns a function that can be called to retrieve reference information\n */\nexport function createGetReferenceInfo(context: {\n  client: SanityClient\n  documentPreviewStore: DocumentPreviewStore\n}) {\n  const {client, documentPreviewStore} = context\n  const {dataset, projectId} = client.config()\n  const apiConfig = dataset && projectId ? {dataset, projectId} : undefined\n\n  /**\n   * Takes an id and a reference schema type, returns metadata about it\n   * Assumption: _id is always published id\n   */\n  return function getReferenceInfo(\n    doc: {_id: string; _type?: string}, // pass {_id, _type} instead and we can skip the `fetchType`\n    referenceType: CrossDatasetReferenceSchemaType\n  ): Observable<CrossDatasetReferenceInfo> {\n    return (\n      doc._type\n        ? of(doc)\n        : documentPreviewStore\n            .observeDocumentTypeFromId(doc._id, apiConfig)\n            .pipe(map((docType): {_id: string; _type?: string} => ({_id: doc._id, _type: docType})))\n    ).pipe(\n      switchMap((resolvedDoc) => {\n        if (!resolvedDoc._type) {\n          // we still can't read the type of the referenced document. This may be due to either 1) lack of access 2) lack of existence\n          // we want to display a reason to the end user, so we're fetching metadata about it\n          return fetchDocumentAvailability(client, doc._id).pipe(\n            map((availability) => ({\n              id: doc._id,\n              type: undefined,\n              availability,\n              preview: {published: undefined},\n            }))\n          )\n        }\n        const refSchemaType = referenceType.to.find(\n          (candidate) => candidate.type === resolvedDoc._type\n        )\n\n        const previewPaths = [\n          ...(getPreviewPaths(refSchemaType?.preview) || []),\n          ['_updatedAt'],\n          ['_createdAt'],\n        ]\n\n        const publishedPreview$ = documentPreviewStore\n          .observePaths(doc as Previewable, previewPaths, apiConfig)\n          .pipe(\n            map((result) => (result ? prepareForPreview(result, refSchemaType as FIXME) : result))\n          )\n\n        return combineLatest([publishedPreview$]).pipe(\n          map(([publishedPreview]) => {\n            return {\n              type: resolvedDoc._type,\n              id: doc._id,\n              availability: AVAILABILITY_READABLE,\n              preview: {\n                published: isRecord(publishedPreview) ? publishedPreview : undefined,\n              },\n            }\n          })\n        )\n      })\n    )\n  }\n}\n\nfunction fetchDocumentAvailability(\n  client: SanityClient,\n  id: string\n): Observable<DocumentAvailability | null> {\n  const requestOptions = {\n    uri: client.getDataUrl('doc', id),\n    json: true,\n    query: {excludeContent: 'true'},\n    tag: `${REQUEST_TAG_BASE}.availability`,\n  }\n\n  return client.observable.request(requestOptions).pipe(\n    map((response) => {\n      const omitted = keyBy(response.omitted || [], (entry) => entry.id)\n      const omittedEntry = omitted[id]\n      if (!omittedEntry) {\n        // it's not omitted, so it exists and is readable\n        return AVAILABILITY_READABLE\n      }\n      // omitted because it doesn't exist\n      if (omittedEntry.reason === 'existence') {\n        return AVAILABILITY_NOT_FOUND\n      }\n      if (omittedEntry.reason === 'permission') {\n        // omitted because it's not readable\n        return AVAILABILITY_PERMISSION_DENIED\n      }\n      return null\n    })\n  )\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {\n  CrossDatasetReferenceValue,\n  CrossDatasetReferenceSchemaType,\n  Path,\n  ReferenceFilterOptions,\n  ReferenceFilterSearchOptions,\n  SanityDocument,\n} from '@sanity/types'\nimport {get} from '@sanity/util/paths'\nimport {from, throwError} from 'rxjs'\nimport {catchError, mergeMap} from 'rxjs/operators'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../studioClient'\nimport {CrossDatasetReferenceInput} from '../../../inputs/CrossDatasetReferenceInput'\nimport {useClient} from '../../../../hooks'\nimport {ObjectInputProps} from '../../../types'\nimport {useFormValue} from '../../../useFormValue'\nimport {useDocumentPreviewStore} from '../../../../store'\nimport {FIXME} from '../../../../FIXME'\nimport {search} from './datastores/search'\nimport {createGetReferenceInfo} from './datastores/getReferenceInfo'\n\n// eslint-disable-next-line require-await\nasync function resolveUserDefinedFilter(\n  options: ReferenceFilterOptions | undefined,\n  document: SanityDocument,\n  valuePath: Path\n): Promise<ReferenceFilterSearchOptions> {\n  if (!options) {\n    return {}\n  }\n\n  if (typeof options.filter === 'function') {\n    const parentPath = valuePath.slice(0, -1)\n    const parent = get(document, parentPath) as Record<string, unknown>\n    return options.filter({document, parentPath, parent})\n  }\n\n  return {\n    filter: options.filter,\n    params: 'filterParams' in options ? options.filterParams : undefined,\n  }\n}\n\n/**\n * @beta\n */\nexport type StudioCrossDatasetReferenceInputProps = ObjectInputProps<\n  CrossDatasetReferenceValue,\n  CrossDatasetReferenceSchemaType\n>\n\nfunction useValueRef<T>(value: T): {current: T} {\n  const ref = useRef(value)\n  ref.current = value\n  return ref\n}\n\ntype SearchError = {\n  message: string\n  details?: {\n    type: string\n    description: string\n  }\n}\n\n/**\n * @beta\n */\nexport function StudioCrossDatasetReferenceInput(props: StudioCrossDatasetReferenceInputProps) {\n  const {path, schemaType} = props\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const documentPreviewStore = useDocumentPreviewStore()\n\n  const crossDatasetClient = useMemo(() => {\n    return (\n      client\n        .withConfig({\n          dataset: schemaType.dataset,\n          apiVersion: '2022-03-07',\n          ignoreBrowserTokenWarning: true,\n        })\n\n        // seems like this is required to prevent this client from sometimes magically get mutated with a new projectId and dataset\n        .clone()\n    )\n  }, [client, schemaType.dataset])\n\n  const documentValue = useFormValue([]) as FIXME\n  const documentRef = useValueRef(documentValue)\n\n  const handleSearch = useCallback(\n    (searchString: string) =>\n      from(resolveUserDefinedFilter(schemaType.options, documentRef.current, path)).pipe(\n        mergeMap(({filter, params}) =>\n          search(crossDatasetClient, searchString, schemaType, {\n            ...schemaType.options,\n            filter,\n            params,\n            tag: 'search.cross-dataset-reference',\n          })\n        ),\n\n        catchError((err: SearchError) => {\n          const isQueryError = err.details && err.details.type === 'queryParseError'\n          if (schemaType.options?.filter && isQueryError) {\n            err.message = `Invalid reference filter, please check the custom \"filter\" option`\n          }\n          return throwError(err)\n        })\n      ),\n\n    [crossDatasetClient, documentRef, path, schemaType]\n  )\n\n  const getReferenceInfo = useMemo(\n    () => createGetReferenceInfo({client: crossDatasetClient, documentPreviewStore}),\n    [crossDatasetClient, documentPreviewStore]\n  )\n\n  return (\n    <CrossDatasetReferenceInput\n      {...props}\n      getReferenceInfo={getReferenceInfo}\n      onSearch={handleSearch}\n    />\n  )\n}\n","import React, {ComponentProps, ForwardedRef, forwardRef, useCallback, useMemo, useRef} from 'react'\nimport {from, throwError} from 'rxjs'\nimport {catchError, mergeMap} from 'rxjs/operators'\nimport * as PathUtils from '@sanity/util/paths'\nimport {\n  Path,\n  Reference,\n  ReferenceFilterSearchOptions,\n  ReferenceOptions,\n  ReferenceSchemaType,\n  SanityDocument,\n} from '@sanity/types'\nimport {useClient, useSchema} from '../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {useDocumentPreviewStore} from '../../../store'\nimport {useReferenceInputOptions} from '../../studio'\nimport {useFormValue} from '../../useFormValue'\nimport {FIXME} from '../../../FIXME'\nimport * as adapter from '../../studio/inputs/client-adapters/reference'\nimport {isNonNullable} from '../../../util'\nimport {EditReferenceEvent} from './types'\n\nfunction useValueRef<T>(value: T): {current: T} {\n  const ref = useRef(value)\n  ref.current = value\n  return ref\n}\n\ninterface SearchError {\n  message: string\n  details?: {\n    type: string\n    description: string\n  }\n}\n\n// eslint-disable-next-line require-await\nasync function resolveUserDefinedFilter(\n  options: ReferenceOptions | undefined,\n  document: SanityDocument,\n  valuePath: Path\n): Promise<ReferenceFilterSearchOptions> {\n  if (!options) {\n    return {}\n  }\n\n  if (typeof options.filter === 'function') {\n    const parentPath = valuePath.slice(0, -1)\n    const parent = PathUtils.get(document, parentPath) as Record<string, unknown>\n    return options.filter({document, parentPath, parent})\n  }\n\n  return {\n    filter: options.filter,\n    params: 'filterParams' in options ? options.filterParams : undefined,\n  }\n}\n\ninterface Options {\n  path: Path\n  schemaType: ReferenceSchemaType\n  value?: Reference\n}\n\nexport function useReferenceInput(options: Options) {\n  const {path, schemaType} = options\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const schema = useSchema()\n  const documentPreviewStore = useDocumentPreviewStore()\n  const searchClient = useMemo(() => client.withConfig({apiVersion: '2021-03-25'}), [client])\n  const {EditReferenceLinkComponent, onEditReference, activePath, initialValueTemplateItems} =\n    useReferenceInputOptions()\n\n  const documentValue = useFormValue([]) as FIXME\n  const documentRef = useValueRef(documentValue)\n\n  const documentTypeName = documentRef.current?._type\n\n  const isCurrentDocumentLiveEdit = useMemo(() => {\n    return schema.get(documentTypeName)?.liveEdit\n  }, [documentTypeName, schema])\n\n  const disableNew = schemaType.options?.disableNew === true\n\n  const handleSearch = useCallback(\n    (searchString: string) =>\n      from(resolveUserDefinedFilter(schemaType.options, documentRef.current, path)).pipe(\n        mergeMap(({filter, params}) =>\n          adapter.referenceSearch(searchClient, searchString, schemaType, {\n            ...schemaType.options,\n            filter,\n            params,\n            tag: 'search.reference',\n          })\n        ),\n\n        catchError((err: SearchError) => {\n          const isQueryError = err.details && err.details.type === 'queryParseError'\n          if (schemaType.options?.filter && isQueryError) {\n            err.message = `Invalid reference filter, please check the custom \"filter\" option`\n          }\n          return throwError(err)\n        })\n      ),\n\n    [documentRef, path, searchClient, schemaType]\n  )\n\n  const template = options.value?._strengthenOnPublish?.template\n  const EditReferenceLink = useMemo(\n    () =>\n      forwardRef(function EditReferenceLink_(\n        _props: ComponentProps<NonNullable<typeof EditReferenceLinkComponent>>,\n        forwardedRef: ForwardedRef<'a'>\n      ) {\n        return EditReferenceLinkComponent ? (\n          <EditReferenceLinkComponent\n            {..._props}\n            ref={forwardedRef}\n            parentRefPath={path}\n            template={template}\n          />\n        ) : null\n      }),\n    [EditReferenceLinkComponent, path, template]\n  )\n\n  const handleEditReference = useCallback(\n    (event: EditReferenceEvent) => {\n      onEditReference?.({\n        parentRefPath: path,\n        id: event.id,\n        type: event.type,\n        template: event.template,\n      })\n    },\n    [onEditReference, path]\n  )\n\n  const selectedState = PathUtils.startsWith(path, activePath?.path || [])\n    ? activePath?.state\n    : 'none'\n\n  const createOptions = useMemo(() => {\n    if (disableNew) {\n      return []\n    }\n    return (\n      (initialValueTemplateItems || [])\n        // eslint-disable-next-line max-nested-callbacks\n        .filter((i) => schemaType.to.some((refType) => refType.name === i.template?.schemaType))\n        .map((item) =>\n          item.template?.schemaType\n            ? {\n                id: item.id,\n                title:\n                  item.title || `${item.template.schemaType} from template ${item.template.id}`,\n                type: item.template.schemaType,\n                icon: item.icon,\n                template: {\n                  id: item.template.id,\n                  params: item.parameters,\n                },\n\n                permission: {granted: item.granted, reason: item.reason},\n              }\n            : undefined\n        )\n        .filter(isNonNullable)\n    )\n  }, [disableNew, initialValueTemplateItems, schemaType.to])\n\n  const getReferenceInfo = useCallback(\n    (id: string) => adapter.getReferenceInfo(documentPreviewStore, id, schemaType),\n    [documentPreviewStore, schemaType]\n  )\n\n  return {\n    selectedState,\n    handleSearch,\n    isCurrentDocumentLiveEdit,\n    handleEditReference,\n    EditReferenceLink,\n    createOptions,\n    getReferenceInfo,\n  }\n}\n","/* eslint-disable max-nested-callbacks */\n/* eslint-disable no-nested-ternary */\n\nimport React from 'react'\nimport {ReferenceSchemaType} from '@sanity/types'\nimport {Stack, Text, TextSkeleton} from '@sanity/ui'\nimport {Observable} from 'rxjs'\nimport {Alert} from '../../components/Alert'\nimport {RenderPreviewCallback} from '../../types'\nimport {ReferenceInfo} from './types'\nimport {useReferenceInfo} from './useReferenceInfo'\nimport {ReferencePreview} from './ReferencePreview'\n\n/**\n * Used to preview a referenced type\n * Takes the reference type as props\n */\nexport function OptionPreview(props: {\n  id: string\n  type: ReferenceSchemaType\n  getReferenceInfo: (id: string) => Observable<ReferenceInfo>\n  renderPreview: RenderPreviewCallback\n}) {\n  const {getReferenceInfo, id: documentId, renderPreview} = props\n  const {isLoading, result: referenceInfo, error} = useReferenceInfo(documentId, getReferenceInfo)\n\n  if (isLoading) {\n    return (\n      <Stack space={2} padding={1}>\n        <TextSkeleton style={{maxWidth: 320}} radius={1} animated />\n        <TextSkeleton style={{maxWidth: 200}} radius={1} size={1} animated />\n      </Stack>\n    )\n  }\n\n  if (error) {\n    return (\n      <Stack space={2} padding={1}>\n        <Alert title=\"Failed to load referenced document\">\n          <Text muted size={1}>\n            Error: {error.message}\n          </Text>\n        </Alert>\n      </Stack>\n    )\n  }\n\n  if (!referenceInfo) {\n    return null\n  }\n\n  if (referenceInfo.availability.reason === 'PERMISSION_DENIED') {\n    return (\n      <Stack space={2} padding={1}>\n        Insufficient permissions to view this document\n      </Stack>\n    )\n  }\n\n  const refType = props.type.to.find((toType) => toType.name === referenceInfo.type)\n\n  if (!refType) {\n    return (\n      <Stack space={2} padding={1}>\n        Search returned a type that's not valid for this reference: \"${referenceInfo.type}\"\n      </Stack>\n    )\n  }\n\n  return (\n    referenceInfo &&\n    refType && (\n      <ReferencePreview\n        availability={referenceInfo.availability}\n        id={referenceInfo.id}\n        layout=\"default\"\n        preview={referenceInfo.preview}\n        refType={refType}\n        renderPreview={renderPreview}\n        showTypeLabel={props.type.to.length > 1}\n      />\n    )\n  )\n}\n","/* eslint-disable complexity */\n/* eslint-disable max-nested-callbacks,no-nested-ternary */\n\nimport React, {ComponentProps} from 'react'\nimport {AddIcon} from '@sanity/icons'\nimport {Box, Button, Menu, MenuButton, MenuItem, Tooltip} from '@sanity/ui'\nimport {InsufficientPermissionsMessage} from '../../../components'\nimport {CreateReferenceOption} from './types'\n\ninterface Props extends ComponentProps<typeof Button> {\n  id: string\n  createOptions: CreateReferenceOption[]\n  menuRef?: React.RefObject<HTMLDivElement>\n  onCreate: (option: CreateReferenceOption) => void\n}\n\nfunction ConditionalTooltip(\n  props: ComponentProps<typeof Tooltip> & {enabled: boolean}\n): React.ReactElement {\n  const {enabled, ...rest} = props\n  return enabled ? <Tooltip {...rest} /> : <>{props.children}</>\n}\n\nconst INLINE_BLOCK_STYLE = {display: 'inline-flex'}\nconst FULL_WIDTH = {width: '100%'}\n\nexport function CreateButton(props: Props) {\n  const {createOptions, onCreate, id, ...rest} = props\n\n  const canCreateAny = createOptions.some((option) => option.permission.granted)\n  if (!canCreateAny) {\n    return (\n      <Tooltip\n        content={\n          <Box padding={2}>\n            <InsufficientPermissionsMessage operationLabel=\"create a new reference\" />\n          </Box>\n        }\n      >\n        {/* this wrapper div is needed because disabled button doesn't trigger mouse events */}\n        <div style={INLINE_BLOCK_STYLE}>\n          <Button text=\"Create new\" mode=\"ghost\" disabled icon={AddIcon} style={FULL_WIDTH} />\n        </div>\n      </Tooltip>\n    )\n  }\n\n  return createOptions.length > 1 ? (\n    <MenuButton\n      button={<Button {...rest} text=\"Create new…\" mode=\"ghost\" icon={AddIcon} />}\n      id={id}\n      menu={\n        <Menu ref={props.menuRef}>\n          {createOptions.map((createOption) => (\n            <ConditionalTooltip\n              enabled={!createOption.permission.granted}\n              key={createOption.id}\n              content={\n                <Box padding={2}>\n                  <InsufficientPermissionsMessage operationLabel=\"create this type of document\" />\n                </Box>\n              }\n              portal\n            >\n              {/* this wrapper div is needed because disabled button doesn't trigger mouse events */}\n              <div>\n                <MenuItem\n                  disabled={!createOption.permission.granted}\n                  icon={createOption.icon}\n                  text={createOption.title}\n                  onClick={() => onCreate(createOption)}\n                />\n              </div>\n            </ConditionalTooltip>\n          ))}\n        </Menu>\n      }\n      placement=\"right\"\n      popover={{portal: true, tone: 'default', constrainSize: true}}\n    />\n  ) : (\n    <Button\n      {...rest}\n      text=\"Create new\"\n      mode=\"ghost\"\n      disabled={!createOptions[0].permission.granted}\n      onClick={() => onCreate(createOptions[0])}\n      icon={AddIcon}\n    />\n  )\n}\n","import React, {forwardRef, useCallback} from 'react'\nimport {Autocomplete, Box, Flex, Popover, Text} from '@sanity/ui'\nimport styled from 'styled-components'\n\nconst StyledPopover = styled(Popover)`\n  & > div {\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n`\n\nconst StyledText = styled(Text)`\n  word-break: break-word;\n`\n\nexport const ReferenceAutocomplete = forwardRef(function ReferenceAutocomplete(\n  props: React.ComponentProps<typeof Autocomplete> & {\n    referenceElement: HTMLDivElement | null\n    searchString?: string\n    portalRef?: React.RefObject<HTMLDivElement>\n  },\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const hasResults = props.options && props.options.length > 0\n  const renderPopover = useCallback(\n    (\n      {\n        content,\n        hidden,\n        inputElement,\n        onMouseEnter,\n        onMouseLeave,\n      }: {\n        content: React.ReactElement | null\n        hidden: boolean\n        inputElement: HTMLInputElement | null\n        onMouseEnter: () => void\n        onMouseLeave: () => void\n      },\n      contentRef: React.Ref<HTMLDivElement>\n    ) => (\n      <StyledPopover\n        placement=\"bottom-start\"\n        arrow={false}\n        constrainSize\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n        content={\n          <div ref={contentRef}>\n            {hasResults ? (\n              content\n            ) : (\n              <Box padding={4}>\n                <Flex align=\"center\" height=\"fill\" justify=\"center\">\n                  <StyledText align=\"center\" muted>\n                    No results for <strong>“{props.searchString}”</strong>\n                    {props.searchString?.toLowerCase() === 'capybara' ? (\n                      <>. What a shame. There should be more Capybaras.</>\n                    ) : null}\n                  </StyledText>\n                </Flex>\n              </Box>\n            )}\n          </div>\n        }\n        open={!props.loading && !hidden}\n        ref={props.portalRef}\n        portal\n        referenceElement={props.referenceElement || inputElement}\n        matchReferenceWidth\n      />\n    ),\n    [hasResults, props.searchString, props.loading, props.portalRef, props.referenceElement]\n  )\n  return <Autocomplete {...props} ref={ref} renderPopover={renderPopover} />\n})\n","import {Grid, useElementRect} from '@sanity/ui'\nimport React, {ReactNode, ForwardedRef, forwardRef, useCallback, useState} from 'react'\nimport styled, {css} from 'styled-components'\n\nconst NARROW_LAYOUT = css`\n  grid-template-columns: minmax(0px, 1fr);\n`\n\nconst WIDE_LAYOUT = css`\n  grid-template-columns: 1fr min-content;\n`\n\nconst Root = styled(Grid)<{$narrow: boolean}>((props: {$narrow: boolean}) =>\n  props.$narrow ? NARROW_LAYOUT : WIDE_LAYOUT\n)\n\nexport const AutocompleteContainer = forwardRef(function AutocompleteContainer(\n  props: {\n    children: ReactNode\n  },\n  forwardedRef: ForwardedRef<HTMLDivElement>\n) {\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n\n  const handleNewRef = useCallback(\n    (element: HTMLDivElement) => {\n      // there's a bit of \"double bookkeeping\" here. since useElementRect needs to re-run whenever the ref updates,\n      // and thus we need to keep it in the state\n      setForwardedRef(forwardedRef, element)\n      setRootElement(element)\n    },\n    [forwardedRef]\n  )\n\n  const inputWrapperRect = useElementRect(rootElement)\n\n  return (\n    <Root ref={handleNewRef} gap={1} $narrow={(inputWrapperRect?.width || 0) < 480}>\n      {props.children}\n    </Root>\n  )\n})\n\nfunction setForwardedRef<T>(ref: ForwardedRef<T>, instance: T) {\n  if (typeof ref === 'function') {\n    ref(instance)\n  } else if (ref) {\n    ref.current = instance\n  }\n}\n","/* eslint-disable complexity */\n/* eslint-disable max-nested-callbacks,no-nested-ternary */\n\nimport React, {KeyboardEvent, FocusEvent, useCallback, useRef, useState, useMemo} from 'react'\nimport {concat, Observable, of} from 'rxjs'\n\nimport {catchError, distinctUntilChanged, filter, map, scan, switchMap, tap} from 'rxjs/operators'\nimport {Box, Button, Stack, Text, useToast} from '@sanity/ui'\nimport {useObservableCallback} from 'react-rx'\nimport {uuid} from '@sanity/uuid'\nimport styled from 'styled-components'\nimport {set, setIfMissing, unset} from '../../patch'\nimport {Alert} from '../../components/Alert'\nimport {PreviewCard} from '../../../components'\nimport {getPublishedId, isNonNullable} from '../../../util'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {useReferenceInput} from './useReferenceInput'\nimport {\n  CreateReferenceOption,\n  ReferenceInputProps,\n  ReferenceSearchHit,\n  ReferenceSearchState,\n} from './types'\nimport {OptionPreview} from './OptionPreview'\nimport {useReferenceInfo} from './useReferenceInfo'\nimport {CreateButton} from './CreateButton'\nimport {ReferenceAutocomplete} from './ReferenceAutocomplete'\nimport {AutocompleteContainer} from './AutocompleteContainer'\n\nconst StyledPreviewCard = styled(PreviewCard)`\n  /* this is a hack to avoid layout jumps while previews are loading\n  there's probably better ways of solving this */\n  min-height: 36px;\n`\n\nconst INITIAL_SEARCH_STATE: ReferenceSearchState = {\n  hits: [],\n  isLoading: false,\n}\n\nconst NO_FILTER = () => true\n\nfunction nonNullable<T>(v: T): v is NonNullable<T> {\n  return v !== null\n}\n\ninterface AutocompleteOption {\n  hit: ReferenceSearchHit\n  value: string\n}\nexport function ReferenceInput(props: ReferenceInputProps) {\n  const {\n    createOptions,\n    onChange,\n    onEditReference,\n    onSearch,\n    schemaType,\n    readOnly,\n    id,\n    onPathFocus,\n    value,\n    renderPreview,\n    path,\n    elementProps,\n  } = props\n\n  const {getReferenceInfo} = useReferenceInput({\n    path,\n    schemaType,\n    value,\n  })\n\n  const [searchState, setSearchState] = useState<ReferenceSearchState>(INITIAL_SEARCH_STATE)\n\n  const handleCreateNew = useCallback(\n    (option: CreateReferenceOption) => {\n      const newDocumentId = uuid()\n\n      const patches = [\n        setIfMissing({}),\n        set(schemaType.name, ['_type']),\n        set(newDocumentId, ['_ref']),\n        set(true, ['_weak']),\n        set({type: option.type, weak: schemaType.weak, template: option.template}, [\n          '_strengthenOnPublish',\n        ]),\n      ].filter(isNonNullable)\n\n      onChange(patches)\n\n      onEditReference({id: newDocumentId, type: option.type, template: option.template})\n      onPathFocus([])\n    },\n    [onChange, onEditReference, onPathFocus, schemaType]\n  )\n\n  const handleChange = useCallback(\n    (nextId: string) => {\n      if (!nextId) {\n        onChange(unset())\n        onPathFocus([])\n        return\n      }\n\n      const hit = searchState.hits.find((h) => h.id === nextId)\n\n      if (!hit) {\n        throw new Error('Selected an item that wasnt part of the result set')\n      }\n      // if there's no published version of this document, set the reference to weak\n\n      const patches = [\n        setIfMissing({}),\n        set(schemaType.name, ['_type']),\n        set(getPublishedId(nextId), ['_ref']),\n        hit.published && !schemaType.weak ? unset(['_weak']) : set(true, ['_weak']),\n        hit.published\n          ? unset(['_strengthenOnPublish'])\n          : set({type: hit?.type, weak: schemaType.weak}, ['_strengthenOnPublish']),\n      ].filter(isNonNullable)\n\n      onChange(patches)\n      // Move focus away from _ref and one level up\n      onPathFocus([])\n    },\n    [onChange, onPathFocus, schemaType.name, schemaType.weak, searchState.hits]\n  )\n\n  const handleClear = useCallback(() => {\n    onChange(unset())\n  }, [onChange])\n\n  const handleAutocompleteKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        onPathFocus([])\n      }\n    },\n    [onPathFocus]\n  )\n\n  const loadableReferenceInfo = useReferenceInfo(value?._ref, getReferenceInfo)\n\n  const autocompletePopoverReferenceElementRef = useRef<HTMLDivElement | null>(null)\n\n  const {push} = useToast()\n\n  const handleQueryChange = useObservableCallback(\n    (inputValue$: Observable<string | null>) => {\n      return inputValue$.pipe(\n        filter(nonNullable),\n        distinctUntilChanged(),\n        switchMap((searchString) =>\n          concat(\n            of({isLoading: true}),\n            onSearch(searchString).pipe(\n              map((hits) => ({hits, searchString, isLoading: false})),\n              catchError((error) => {\n                push({\n                  title: 'Reference search failed',\n                  description: error.message,\n                  status: 'error',\n                  id: `reference-search-fail-${id}`,\n                })\n\n                console.error(error)\n                return of({hits: []})\n              })\n            )\n          )\n        ),\n\n        scan(\n          (prevState, nextState): ReferenceSearchState => ({...prevState, ...nextState}),\n          INITIAL_SEARCH_STATE\n        ),\n\n        tap(setSearchState)\n      )\n    },\n    [id, onSearch, push]\n  )\n\n  const handleAutocompleteOpenButtonClick = useCallback(() => {\n    handleQueryChange('')\n  }, [handleQueryChange])\n\n  const handleCreateButtonKeyDown = useCallback(\n    (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        onPathFocus([])\n      }\n    },\n    [onPathFocus]\n  )\n\n  const renderOption = useCallback(\n    (option: AutocompleteOption) => {\n      const documentId = option.hit.draft?._id || option.hit.published?._id || option.value\n\n      return (\n        <StyledPreviewCard forwardedAs=\"button\" type=\"button\" radius={2} tone=\"inherit\">\n          <Box paddingX={3} paddingY={1}>\n            <OptionPreview\n              getReferenceInfo={getReferenceInfo}\n              id={documentId}\n              renderPreview={renderPreview}\n              type={schemaType}\n            />\n          </Box>\n        </StyledPreviewCard>\n      )\n    },\n    [schemaType, getReferenceInfo, renderPreview]\n  )\n\n  const renderValue = useCallback(() => {\n    return (\n      loadableReferenceInfo.result?.preview.draft?.title ||\n      loadableReferenceInfo.result?.preview.published?.title ||\n      ''\n    )\n  }, [\n    loadableReferenceInfo.result?.preview.draft?.title,\n    loadableReferenceInfo.result?.preview.published?.title,\n  ])\n\n  const handleFocus = useCallback(() => onPathFocus(['_ref']), [onPathFocus])\n  const handleBlur = useCallback(\n    (event: FocusEvent) => {\n      if (!autocompletePopoverReferenceElementRef.current?.contains(event.relatedTarget)) {\n        props.elementProps.onBlur(event)\n      }\n    },\n    [props.elementProps]\n  )\n\n  const isWeakRefToNonexistent =\n    loadableReferenceInfo?.result?.availability?.reason === 'NOT_FOUND' &&\n    !value?._strengthenOnPublish &&\n    value?._weak\n\n  useDidUpdate(props.focusPath?.[0] === '_ref', (hadFocusAtRef, hasFocusAtRef) => {\n    if (!hadFocusAtRef && hasFocusAtRef) {\n      elementProps.ref.current?.focus()\n    }\n  })\n  const hits: AutocompleteOption[] = useMemo(\n    () =>\n      searchState.hits.map((hit) => ({\n        value: hit.id,\n        hit: hit,\n      })),\n    [searchState.hits]\n  )\n  return (\n    <Stack space={1} data-testid=\"reference-input\">\n      <Stack space={2}>\n        {isWeakRefToNonexistent ? (\n          <Alert\n            data-testid=\"alert-nonexistent-document\"\n            title=\"Nonexistent document reference\"\n            suffix={\n              <Stack padding={2}>\n                <Button text=\"Clear\" onClick={handleClear} />\n              </Stack>\n            }\n          >\n            <Text size={1}>\n              This field is currently referencing a document that doesn't exist (ID:\n              <code>{value._ref}</code>). You can either remove the reference or replace it with\n              another document.\n            </Text>\n          </Alert>\n        ) : null}\n        <AutocompleteContainer ref={autocompletePopoverReferenceElementRef}>\n          <ReferenceAutocomplete\n            {...elementProps}\n            onFocus={handleFocus}\n            onBlur={handleBlur}\n            data-testid=\"autocomplete\"\n            loading={searchState.isLoading}\n            referenceElement={autocompletePopoverReferenceElementRef.current}\n            options={hits}\n            radius={1}\n            placeholder=\"Type to search\"\n            onKeyDown={handleAutocompleteKeyDown}\n            readOnly={loadableReferenceInfo.isLoading}\n            onQueryChange={handleQueryChange}\n            searchString={searchState.searchString}\n            onChange={handleChange}\n            filterOption={NO_FILTER}\n            renderOption={renderOption as any}\n            renderValue={renderValue}\n            value={value?._ref}\n            openButton={{onClick: handleAutocompleteOpenButtonClick}}\n          />\n\n          {!readOnly && createOptions.length > 0 && (\n            <CreateButton\n              id={`${id}-selectTypeMenuButton`}\n              createOptions={createOptions}\n              onCreate={handleCreateNew}\n              onKeyDown={handleCreateButtonKeyDown}\n            />\n          )}\n        </AutocompleteContainer>\n      </Stack>\n    </Stack>\n  )\n}\n","import {\n  Path,\n  Reference,\n  ReferenceFilterSearchOptions,\n  ReferenceOptions,\n  ReferenceSchemaType,\n  SanityDocument,\n} from '@sanity/types'\nimport * as PathUtils from '@sanity/util/paths'\nimport {get} from '@sanity/util/paths'\nimport React, {ComponentProps, ForwardedRef, forwardRef, useCallback, useMemo, useRef} from 'react'\nimport {from, throwError} from 'rxjs'\nimport {catchError, mergeMap} from 'rxjs/operators'\nimport * as adapter from '../client-adapters/reference'\nimport {ReferenceInput} from '../../../inputs/ReferenceInput/ReferenceInput'\nimport {CreateReferenceOption, EditReferenceEvent} from '../../../inputs/ReferenceInput/types'\nimport {useReferenceInputOptions} from '../../contexts'\nimport {ObjectInputProps} from '../../../types'\nimport {useFormValue} from '../../../useFormValue'\nimport {useClient, useSchema} from '../../../../hooks'\nimport {useDocumentPreviewStore} from '../../../../store'\nimport {FIXME} from '../../../../FIXME'\nimport {isNonNullable} from '../../../../util'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../studioClient'\n\n// eslint-disable-next-line require-await\nasync function resolveUserDefinedFilter(\n  options: ReferenceOptions | undefined,\n  document: SanityDocument,\n  valuePath: Path\n): Promise<ReferenceFilterSearchOptions> {\n  if (!options) {\n    return {}\n  }\n\n  if (typeof options.filter === 'function') {\n    const parentPath = valuePath.slice(0, -1)\n    const parent = get(document, parentPath) as Record<string, unknown>\n    return options.filter({document, parentPath, parent})\n  }\n\n  return {\n    filter: options.filter,\n    params: 'filterParams' in options ? options.filterParams : undefined,\n  }\n}\n\n/**\n * @beta\n */\nexport type StudioReferenceInputProps = ObjectInputProps<Reference, ReferenceSchemaType>\n\nfunction useValueRef<T>(value: T): {current: T} {\n  const ref = useRef(value)\n  ref.current = value\n  return ref\n}\n\ntype SearchError = {\n  message: string\n  details?: {\n    type: string\n    description: string\n  }\n}\n\n/**\n * @beta\n */\nexport function StudioReferenceInput(props: StudioReferenceInputProps) {\n  const searchClient = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const schema = useSchema()\n  const documentPreviewStore = useDocumentPreviewStore()\n  const {path, schemaType} = props\n  const {EditReferenceLinkComponent, onEditReference, activePath, initialValueTemplateItems} =\n    useReferenceInputOptions()\n\n  const documentValue = useFormValue([]) as FIXME\n  const documentRef = useValueRef(documentValue)\n  const documentTypeName = documentRef.current?._type\n  const refType = schema.get(documentTypeName)\n\n  const isDocumentLiveEdit = useMemo(() => refType?.liveEdit, [refType])\n\n  const disableNew = schemaType.options?.disableNew === true\n\n  const handleSearch = useCallback(\n    (searchString: string) =>\n      from(resolveUserDefinedFilter(schemaType.options, documentRef.current, path)).pipe(\n        mergeMap(({filter, params}) =>\n          adapter.referenceSearch(searchClient, searchString, schemaType, {\n            ...schemaType.options,\n            filter,\n            params,\n            tag: 'search.reference',\n          })\n        ),\n\n        catchError((err: SearchError) => {\n          const isQueryError = err.details && err.details.type === 'queryParseError'\n          if (schemaType.options?.filter && isQueryError) {\n            err.message = `Invalid reference filter, please check the custom \"filter\" option`\n          }\n          return throwError(err)\n        })\n      ),\n\n    [documentRef, path, searchClient, schemaType]\n  )\n\n  const template = props.value?._strengthenOnPublish?.template\n  const EditReferenceLink = useMemo(\n    () =>\n      forwardRef(function EditReferenceLink_(\n        _props: ComponentProps<NonNullable<typeof EditReferenceLinkComponent>>,\n        forwardedRef: ForwardedRef<'a'>\n      ) {\n        return EditReferenceLinkComponent ? (\n          <EditReferenceLinkComponent\n            {..._props}\n            ref={forwardedRef}\n            parentRefPath={path}\n            template={template}\n          />\n        ) : null\n      }),\n    [EditReferenceLinkComponent, path, template]\n  )\n\n  const handleEditReference = useCallback(\n    (event: EditReferenceEvent) => {\n      onEditReference?.({\n        parentRefPath: path,\n        id: event.id,\n        type: event.type,\n        template: event.template,\n      })\n    },\n    [onEditReference, path]\n  )\n\n  const selectedState = PathUtils.startsWith(path, activePath?.path || [])\n    ? activePath?.state\n    : 'none'\n\n  const createOptions = useMemo(() => {\n    if (disableNew) {\n      return []\n    }\n    return (\n      (initialValueTemplateItems || [])\n        // eslint-disable-next-line max-nested-callbacks\n        .filter((i) => {\n          return schemaType.to.some((_refType) => {\n            return _refType.name === i.template?.schemaType\n          })\n        })\n        .map((item): CreateReferenceOption | undefined =>\n          item.template?.schemaType\n            ? {\n                id: item.id,\n                title:\n                  item.title || `${item.template.schemaType} from template ${item.template?.id}`,\n                type: item.template.schemaType,\n                icon: item.icon,\n                template: {\n                  id: item.template?.id,\n                  params: item.parameters,\n                },\n\n                permission: {granted: item.granted, reason: item.reason},\n              }\n            : undefined\n        )\n        .filter(isNonNullable)\n    )\n  }, [disableNew, initialValueTemplateItems, schemaType.to])\n\n  const getReferenceInfo = useCallback(\n    (id: any, _type: any) => adapter.getReferenceInfo(documentPreviewStore, id, _type),\n    [documentPreviewStore]\n  )\n\n  return (\n    <ReferenceInput\n      {...props}\n      onSearch={handleSearch}\n      liveEdit={isDocumentLiveEdit}\n      getReferenceInfo={getReferenceInfo}\n      selectedState={selectedState}\n      editReferenceLinkComponent={EditReferenceLink}\n      createOptions={createOptions}\n      onEditReference={handleEditReference}\n    />\n  )\n}\n","import {\n  isArrayOfObjectsSchemaType,\n  isArrayOfPrimitivesSchemaType,\n  isBooleanSchemaType,\n  isNumberSchemaType,\n  isObjectSchemaType,\n  isStringSchemaType,\n} from '@sanity/types'\nimport {\n  ArrayOfObjectsInputProps,\n  ArrayOfPrimitivesInputProps,\n  BooleanInputProps,\n  InputProps,\n  NumberInputProps,\n  ObjectInputProps,\n  StringInputProps,\n} from './inputProps'\nimport {ItemProps, ObjectItemProps} from './itemProps'\n\n/** @beta */\nexport function isObjectItemProps(\n  item: ItemProps | Omit<ItemProps, 'renderDefault'>\n): item is ObjectItemProps {\n  return isObjectSchemaType(item.schemaType)\n}\n\n/** @beta */\nexport function isObjectInputProps(\n  inputProps: InputProps | Omit<InputProps, 'renderDefault'>\n): inputProps is ObjectInputProps {\n  return isObjectSchemaType(inputProps.schemaType)\n}\n\n/** @beta */\nexport function isStringInputProps(\n  inputProps: InputProps | Omit<InputProps, 'renderDefault'>\n): inputProps is StringInputProps {\n  return isStringSchemaType(inputProps.schemaType)\n}\n\n/** @beta */\nexport function isNumberInputProps(\n  inputProps: InputProps | Omit<InputProps, 'renderDefault'>\n): inputProps is NumberInputProps {\n  return isNumberSchemaType(inputProps.schemaType)\n}\n\n/** @beta */\nexport function isBooleanInputProps(\n  inputProps: InputProps | Omit<InputProps, 'renderDefault'>\n): inputProps is BooleanInputProps {\n  return isBooleanSchemaType(inputProps.schemaType)\n}\n\n/** @beta */\nexport function isArrayOfObjectsInputProps(\n  inputProps: InputProps | Omit<InputProps, 'renderDefault'>\n): inputProps is ArrayOfObjectsInputProps {\n  return isArrayOfObjectsSchemaType(inputProps.schemaType)\n}\n\n/** @beta */\nexport function isArrayOfPrimitivesInputProps(\n  inputProps: InputProps | Omit<InputProps, 'renderDefault'>\n): inputProps is ArrayOfPrimitivesInputProps {\n  return isArrayOfPrimitivesSchemaType(inputProps.schemaType)\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {Box, Card, Checkbox, Flex, Grid} from '@sanity/ui'\nimport {resolveTypeName} from '@sanity/util/content'\nimport {ArraySchemaType, isKeyedObject} from '@sanity/types'\nimport {set, unset} from '../../../patch'\nimport {ArrayOfObjectsInputProps} from '../../../types'\nimport {ChangeIndicator} from '../../../../changeIndicators'\nimport {IncompatibleItemType} from '../../../members/array/IncompatibleItemType'\n\nfunction isEqual(item: any, otherItem: any): boolean {\n  if (item === otherItem) {\n    return true\n  }\n  if (typeof item !== typeof otherItem) {\n    return false\n  }\n  if (typeof item !== 'object' && !Array.isArray(item)) {\n    return item === otherItem\n  }\n  if (item._key && item._key === otherItem._key) {\n    return true\n  }\n  if (Array.isArray(item)) {\n    if (!item.length !== otherItem.length) {\n      return false\n    }\n    return item.every((it, i) => isEqual(item[i], otherItem[i]))\n  }\n  const keys = Object.keys(item)\n  const otherKeys = Object.keys(item)\n  if (keys.length !== otherKeys.length) {\n    return false\n  }\n  return keys.every((keyName) => isEqual(item[keyName], otherItem[keyName]))\n}\n\nfunction inArray(array: unknown[], candidate: unknown) {\n  return array ? array.some((item) => isEqual(item, candidate)) : false\n}\n\nfunction getMemberTypeOfItem(schemaType: ArraySchemaType, item: unknown) {\n  return schemaType.of.find((memberType) => memberType.name === resolveTypeName(item))\n}\n\nconst EMPTY_ARRAY: unknown[] = []\n\ninterface ObjectOption {\n  _key?: string\n}\n\n/**\n * Array of predefined object options input\n * Note: this input can handle only object values\n *\n * @beta\n */\nexport function ArrayOfObjectOptionsInput(props: ArrayOfObjectsInputProps) {\n  const {\n    renderPreview,\n    schemaType,\n    onChange,\n    onPathFocus,\n    value = [],\n    readOnly,\n    elementProps,\n    path,\n    changed,\n  } = props\n\n  const options = useMemo(\n    () =>\n      ((schemaType.options?.list || EMPTY_ARRAY) as ObjectOption[]).map((option, index) =>\n        isKeyedObject(option) ? option : {...option, _key: `auto-generated-${index}`}\n      ),\n    [schemaType.options?.list]\n  )\n\n  const handleChange = useCallback(\n    (isChecked: boolean, changedOption: ObjectOption) => {\n      if (!isChecked && isKeyedObject(changedOption)) {\n        // This is an optimization that only works if list items are _keyed\n        onChange(unset([{_key: changedOption._key}]))\n        return\n      }\n\n      const nextValue = options.filter((option) =>\n        isEqual(changedOption, option) ? isChecked : inArray(value, option)\n      )\n\n      onChange(nextValue.length > 0 ? set(nextValue) : unset())\n    },\n    [onChange, options, value]\n  )\n\n  const handleItemFocus = useCallback(\n    (index: number) => {\n      onPathFocus([index])\n    },\n    [onPathFocus]\n  )\n\n  const isGrid = schemaType.options?.layout === 'grid'\n\n  return (\n    <ChangeIndicator path={path} isChanged={changed} hasFocus={false}>\n      <Grid\n        gap={2}\n        columns={isGrid ? Math.min(options.length, 4) : 1}\n        tabIndex={0}\n        {...elementProps}\n      >\n        {options.map((option, index) => {\n          const optionType = getMemberTypeOfItem(schemaType, option)\n          const checked = inArray(value, option)\n          const disabled = !optionType\n\n          return (\n            <Flex key={index} align=\"center\" as=\"label\" muted={disabled}>\n              <Checkbox\n                disabled={disabled}\n                checked={checked}\n                onChange={(e) => handleChange(e.currentTarget.checked, option)}\n                onFocus={() => handleItemFocus(index)}\n                readOnly={readOnly}\n              />\n              <Box flex={1} marginLeft={2}>\n                {optionType ? (\n                  renderPreview({\n                    layout: 'default',\n                    schemaType: optionType,\n                    value: option,\n                  })\n                ) : (\n                  <Card tone=\"caution\" radius={2}>\n                    <IncompatibleItemType value={option} onFocus={() => handleItemFocus(index)} />\n                  </Card>\n                )}\n              </Box>\n            </Flex>\n          )\n        })}\n      </Grid>\n    </ChangeIndicator>\n  )\n}\n","import {Box, Card, Code, Flex, Popover, Stack, Text, Theme, useClickOutside} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {BulbOutlineIcon, UnknownIcon} from '@sanity/icons'\nimport {resolveTypeName} from '@sanity/util/content'\nimport styled from 'styled-components'\n\nconst PopoverCard = styled(Card)`\n  max-width: ${({theme}: {theme: Theme}) => theme.sanity.container[1]}px;\n`\n\ninterface Props {\n  value: unknown\n  onFocus?: (event: React.FocusEvent) => void\n  vertical?: boolean\n}\n\nexport function IncompatibleItemType(props: Props) {\n  const {value, onFocus, vertical, ...rest} = props\n  const [showDetails, setShowDetails] = React.useState(false)\n  const [popoverRef, setPopoverRef] = React.useState<HTMLElement | null>(null)\n\n  useClickOutside(() => setShowDetails(false), [popoverRef])\n\n  const handleKeyDown = React.useCallback((e: any) => {\n    if (e.key === 'Escape' || e.key === 'Tab') {\n      setShowDetails(false)\n    }\n  }, [])\n\n  const handleShowDetails = useCallback(() => {\n    setShowDetails((v) => !v)\n  }, [])\n\n  const typeName = resolveTypeName(value)\n  return (\n    <Popover\n      open={showDetails}\n      ref={setPopoverRef}\n      onKeyDown={handleKeyDown}\n      portal\n      constrainSize\n      tone=\"default\"\n      content={\n        <PopoverCard margin={1} padding={3} onKeyDown={handleKeyDown} tabIndex={0} overflow=\"auto\">\n          <Stack space={4}>\n            <Box>\n              <Text weight=\"semibold\">Why is this happening?</Text>\n            </Box>\n            <Text size={1}>\n              The current schema does not declare items of type <code>{typeName}</code> as valid for\n              this list. This could mean that the type has been removed as a valid item type, or\n              that someone else has added it to their own local schema that is not yet deployed.\n            </Text>\n            <Box>\n              <Text size={1}>\n                <BulbOutlineIcon /> You can still move or delete this item, but it cannot be edited\n                since the schema definition for its type is nowhere to be found.\n              </Text>\n            </Box>\n            <Stack space={2}>\n              <Text size={1} weight=\"semibold\">\n                JSON representation of this item:\n              </Text>\n              <Card padding={2} overflow=\"auto\" border>\n                <Code size={1} as=\"pre\" language=\"json\">\n                  {JSON.stringify(value, null, 2)}\n                </Code>\n              </Card>\n            </Stack>\n          </Stack>\n        </PopoverCard>\n      }\n    >\n      <Card\n        as=\"button\"\n        type=\"button\"\n        radius={2}\n        tone=\"inherit\"\n        paddingX={2}\n        paddingY={3}\n        flex={1}\n        onFocus={onFocus}\n        onClick={handleShowDetails}\n        onKeyDown={handleKeyDown}\n        __unstable_focusRing\n        {...rest}\n      >\n        <Flex align=\"center\">\n          <Box marginRight={3}>\n            <Text>\n              <UnknownIcon />\n            </Text>\n          </Box>\n\n          <Box flex={1}>\n            <Text size={1} textOverflow=\"ellipsis\">\n              Item of type <code>{typeName}</code> not valid for this list\n            </Text>\n          </Box>\n        </Flex>\n      </Card>\n    </Popover>\n  )\n}\n","import React, {useMemo} from 'react'\nimport {startCase} from 'lodash'\nimport {Box, Checkbox, Flex, Grid, Text} from '@sanity/ui'\nimport {resolveTypeName} from '@sanity/util/content'\nimport {ArraySchemaType} from '@sanity/types'\nimport {set, unset} from '../../../patch'\nimport {ArrayOfPrimitivesInputProps} from '../../../types'\nimport {IncompatibleItemType} from '../ArrayOfObjectsInput/List/IncompatibleItemType'\nimport {ChangeIndicator} from '../../../../changeIndicators'\n\nfunction isPrimitiveOption(option: unknown): option is NormalizedPrimitiveOption {\n  return Boolean(option && typeof option === 'object' && 'title' in option && 'value' in option)\n}\n\nfunction normalizeOptions(options: unknown[]) {\n  return options.map((option) => {\n    if (isPrimitiveOption(option)) {\n      return {\n        title: option.title || startCase(String(option.value)),\n        value: option.value,\n      }\n    }\n    return {\n      title: startCase(String(option)),\n      value: option as string | number | boolean,\n    }\n  })\n}\n\ninterface NormalizedPrimitiveOption {\n  title: string\n  value: string | boolean | number\n}\n\nfunction getMemberTypeOfItem(schemaType: ArraySchemaType, option: NormalizedPrimitiveOption) {\n  return schemaType.of.find((memberType) => memberType.name === resolveTypeName(option.value))\n}\n\n/**\n * Array of predefined primitive options input\n * Note: this input can only handle primitive values\n *\n * @beta\n */\nexport function ArrayOfPrimitiveOptionsInput(props: ArrayOfPrimitivesInputProps) {\n  const {\n    schemaType,\n    onChange,\n    value = [],\n    readOnly,\n    path,\n    changed,\n    onIndexFocus,\n    elementProps,\n  } = props\n\n  const options = useMemo(\n    () => normalizeOptions(schemaType.options?.list || []),\n    [schemaType.options?.list]\n  )\n\n  const handleChange = (isChecked: boolean, changedValue: string | boolean | number) => {\n    const nextValue = options\n      .map((option) => option.value)\n      .filter((optionValue) =>\n        // note: sparse arrays are not supported here, so multiple options with same value will all be checked\n        optionValue === changedValue ? isChecked : value.includes(optionValue)\n      )\n\n    onChange(nextValue.length > 0 ? set(nextValue) : unset())\n  }\n\n  const isGrid = schemaType.options?.layout === 'grid'\n\n  return (\n    <ChangeIndicator path={path} isChanged={changed} hasFocus={false}>\n      <Grid gap={2} columns={isGrid ? Math.min(options.length, 4) : 1} {...elementProps}>\n        {options.map((option, index) => {\n          const optionType = getMemberTypeOfItem(schemaType, option)\n          const checked = value.includes(option.value)\n\n          const disabled = !optionType\n\n          return (\n            <Flex key={index} align=\"center\" as=\"label\" muted={disabled}>\n              <Checkbox\n                disabled={disabled}\n                checked={checked}\n                onChange={(e) => handleChange(e.currentTarget.checked, option.value)}\n                onFocus={() => onIndexFocus(index)}\n                readOnly={readOnly}\n              />\n\n              <Box padding={2}>\n                <Text>{option.title}</Text>\n              </Box>\n\n              {!optionType && (\n                <IncompatibleItemType value={option} onFocus={() => onIndexFocus(index)} />\n              )}\n            </Flex>\n          )\n        })}\n      </Grid>\n    </ChangeIndicator>\n  )\n}\n","import React from 'react'\nimport {\n  ArrayOfObjectsInputProps,\n  ArrayOfPrimitivesInputProps,\n  isArrayOfObjectsInputProps,\n} from '../../../types'\nimport {ArrayOfObjectOptionsInput} from './ArrayOfObjectOptionsInput'\nimport {ArrayOfPrimitiveOptionsInput} from './ArrayOfPrimitiveOptionsInput'\n\n/**\n * @beta\n */\nexport function ArrayOfOptionsInput(props: ArrayOfObjectsInputProps | ArrayOfPrimitivesInputProps) {\n  return isArrayOfObjectsInputProps(props) ? (\n    <ArrayOfObjectOptionsInput {...props} />\n  ) : (\n    <ArrayOfPrimitiveOptionsInput {...props} />\n  )\n}\n","import styled from 'styled-components'\nimport {Card, Flex} from '@sanity/ui'\n\nexport const OverlayContainer = styled.div`\n  position: relative;\n`\n\nexport const ContentContainer = styled.div`\n  z-index: 13;\n  opacity: 0;\n  transition: opacity 300ms linear;\n`\n\nexport const CardContainer = styled(Card)`\n  border: 1px solid var(--card-border-color);\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 12;\n  transition: opacity 150ms ease-in-out;\n  opacity: 0;\n  box-sizing: border-box;\n`\n\nexport const FlexContainer = styled(Flex)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n\n  :hover,\n  :focus {\n    & ${CardContainer} {\n      opacity: 0.9;\n    }\n\n    & ${ContentContainer} {\n      opacity: 1;\n    }\n  }\n`\n","// This is transitional in order to track usage of the ActivateOnFocusPart part from within the form-builder package\nimport React, {KeyboardEvent, useCallback, useMemo, useState} from 'react'\nimport {Text} from '@sanity/ui'\nimport {\n  OverlayContainer,\n  FlexContainer,\n  CardContainer,\n  ContentContainer,\n} from './ActivateOnFocus.styles'\n\nconst isTouchDevice = () =>\n  (typeof window !== 'undefined' && 'ontouchstart' in window) ||\n  (typeof navigator !== 'undefined' && navigator.maxTouchPoints > 0)\n\n/**\n * @internal\n */\nexport interface ActivateOnFocusProps {\n  children: React.ReactNode\n  message?: React.ReactNode\n  onActivate?: () => void\n  isOverlayActive: boolean\n}\n\n/**\n * @internal\n */\n\nexport function ActivateOnFocus(props: ActivateOnFocusProps) {\n  const {children, message, onActivate, isOverlayActive} = props\n  const [focused, setFocused] = useState(false)\n\n  const handleClick = useCallback(() => {\n    if (onActivate) {\n      onActivate()\n    }\n  }, [onActivate])\n\n  const handleKeyDown = useCallback(\n    (event: KeyboardEvent<HTMLDivElement>) => {\n      if (!isOverlayActive) {\n        return\n      }\n      if (event.code === 'Space' && onActivate) {\n        event.preventDefault()\n        onActivate()\n      }\n    },\n    [isOverlayActive, onActivate]\n  )\n\n  const handleOnFocus = useCallback(() => {\n    setFocused(true)\n  }, [])\n\n  const handleBlur = useCallback(() => {\n    setFocused(false)\n  }, [])\n\n  const msg = useMemo(() => {\n    const isTouch = isTouchDevice()\n    let activateVerb = isTouch ? 'Tap' : 'Click'\n    if (focused && !isTouch) {\n      activateVerb += ' or press space'\n    }\n    const text = message || `${activateVerb} to activate`\n    return <Text weight=\"semibold\">{text}</Text>\n  }, [focused, message])\n\n  return (\n    <OverlayContainer\n      onBlur={handleBlur}\n      onClick={handleClick}\n      onFocus={handleOnFocus}\n      onKeyDown={handleKeyDown}\n    >\n      {isOverlayActive && (\n        <FlexContainer tabIndex={0} align=\"center\" justify=\"center\">\n          <CardContainer\n            // Almost all input elements have radius=1, and this component is\n            // typically used for overlaying input elements.\n            // @todo Consider making `radius` a component property of `ActivateOnFocus`.\n            radius={1}\n          />\n          <ContentContainer>{msg}</ContentContainer>\n        </FlexContainer>\n      )}\n      {children}\n    </OverlayContainer>\n  )\n}\n","import {normalizeBlock} from '@sanity/block-tools'\nimport {PortableTextBlock} from '@sanity/portable-text-editor'\nimport {FormPatch, insert} from '../../../patch'\nimport {InsertCallback} from './types'\n\nexport function createInsertCallback(options: {\n  allowedDecorators: string[]\n  block: PortableTextBlock\n  onChange: (patches: FormPatch[]) => void\n}): InsertCallback {\n  const {allowedDecorators, block, onChange} = options\n\n  let toInsert\n\n  return (givenBlock: PortableTextBlock | PortableTextBlock[]): void => {\n    toInsert = Array.isArray(givenBlock) ? givenBlock : [givenBlock]\n    toInsert = toInsert.map((blk) =>\n      normalizeBlock(blk, {\n        allowedDecorators,\n      })\n    )\n\n    const patches = [insert(toInsert, 'after', [{_key: block._key}])]\n\n    return onChange(patches)\n  }\n}\n","import {normalizeBlock} from '@sanity/block-tools'\nimport {PortableTextBlock} from '@sanity/portable-text-editor'\nimport {FormPatch, set} from '../../../patch'\nimport {SetCallback} from './types'\n\nexport function createSetCallback(options: {\n  allowedDecorators: string[]\n  block: PortableTextBlock\n  onChange: (patches: FormPatch[]) => void\n}): SetCallback {\n  const {allowedDecorators, block, onChange} = options\n\n  return (givenBlock: PortableTextBlock): void => {\n    const patches = [\n      set(\n        normalizeBlock(givenBlock, {\n          allowedDecorators,\n        }),\n\n        [{_key: block._key}]\n      ),\n    ]\n\n    return onChange(patches)\n  }\n}\n","import {PortableTextBlock} from '@sanity/portable-text-editor'\nimport {FormPatch, unset} from '../../../patch'\nimport {UnsetCallback} from './types'\n\nexport function createUnsetCallback(options: {\n  block: PortableTextBlock\n  onChange: (patches: FormPatch[]) => void\n}): UnsetCallback {\n  const {block, onChange} = options\n\n  return (): void => {\n    const patches = [unset([{_key: block._key}])]\n\n    return onChange(patches)\n  }\n}\n","import {\n  PortableTextEditor,\n  PortableTextBlock,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport React, {useCallback, useMemo} from 'react'\nimport styled from 'styled-components'\nimport {PatchArg} from '../../patch'\nimport {RenderBlockActionsCallback, RenderBlockActionsProps} from './types'\nimport {createInsertCallback, createSetCallback, createUnsetCallback} from './callbacks'\n\ninterface BlockActionsProps {\n  block: PortableTextBlock\n  onChange: (...patches: PatchArg[]) => void\n  renderBlockActions?: RenderBlockActionsCallback\n}\n\nconst Root = styled.div`\n  display: flex;\n  pointer-events: 'all';\n`\n\n// function isClassComponent(component: React.ComponentType) {\n//   return typeof component === 'function' && !!component.prototype?.isReactComponent\n// }\n\n// function isFunctionComponent(component: React.ComponentType) {\n//   return typeof component === 'function' && String(component).includes('return React.createElement')\n// }\n\nexport function BlockActions(props: BlockActionsProps) {\n  const editor = usePortableTextEditor()\n  const {block, onChange, renderBlockActions} = props\n  const decoratorValues = useMemo(\n    () => PortableTextEditor.getPortableTextFeatures(editor).decorators.map((d) => d.value),\n    [editor]\n  )\n\n  const blockActions = useMemo(() => {\n    if (renderBlockActions) {\n      const blockActionProps: RenderBlockActionsProps = {\n        block,\n        value: PortableTextEditor.getValue(editor),\n        set: createSetCallback({allowedDecorators: decoratorValues, block, onChange}),\n        unset: createUnsetCallback({block, onChange}),\n        insert: createInsertCallback({allowedDecorators: decoratorValues, block, onChange}),\n      }\n\n      // // Support returning a class component for renderBlockActions (to keep backward compatability as it was possible before)\n      // if (isClassComponent(renderBlockActions) || isFunctionComponent(renderBlockActions)) {\n      //   const RenderComponent = renderBlockActions\n      //   return <RenderComponent {...blockActionProps} />\n      // }\n      return renderBlockActions(blockActionProps)\n    }\n    return undefined\n  }, [renderBlockActions, block, editor, onChange, decoratorValues])\n\n  // Take focus away from the editor so dealing with block actions doesn't interfere with the editor focus\n  const handleClick = useCallback(() => {\n    PortableTextEditor.blur(editor)\n  }, [editor])\n\n  // Don't render anything if the renderBlockActions function returns null.\n  // Note that if renderBlockComponent is a React class, this will never be the case.\n  if (!blockActions) return null\n\n  return (\n    <Root contentEditable={false} onKeyDown={handleClick} onMouseDown={handleClick}>\n      {blockActions}\n    </Root>\n  )\n}\n","import {rgba} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const ReviewChangesHighlightBlock = styled.div(({theme}) => {\n  const {radius, space, color} = theme.sanity\n  const bg = rgba(color.spot.yellow, 0.2)\n\n  return css`\n    position: absolute;\n    border-radius: ${radius[3]}px;\n    top: -${space[2]}px;\n    bottom: -${space[1] + space[1]}px;\n    left: ${space[4] + space[1]}px;\n    right: 0;\n    background-color: ${bg};\n  `\n})\n","import styled, {css} from 'styled-components'\nimport {ChangeIndicator} from '../../../../changeIndicators'\n\nexport const StyledChangeIndicatorWithProvidedFullPath = styled(ChangeIndicator)(() => {\n  return css`\n    width: 1px;\n    height: 100%;\n\n    & > div {\n      height: 100%;\n    }\n  `\n})\n","/**\n * Reconciles two versions of a state tree by iterating over the next and deep comparing against the next towards the previous.\n * Wherever identical values are found, the previous value is kept, preserving object identities for arrays and objects where possible\n * @param previous - the previous value\n * @param next - the next/current value\n */\nexport function immutableReconcile<T>(previous: unknown, next: T): T {\n  return _immutableReconcile(previous, next, new WeakSet())\n}\n\nfunction _immutableReconcile<T>(\n  previous: unknown,\n  next: T,\n  /**\n   * Keep track of visited nodes to prevent infinite recursion in case of circular structures\n   */\n  parents: WeakSet<any>\n): T {\n  if (previous === next) return previous as T\n\n  // eslint-disable-next-line no-eq-null\n  if (previous == null || next == null) return next\n\n  const prevType = typeof previous\n  const nextType = typeof next\n\n  // Different types\n  if (prevType !== nextType) return next\n\n  if (Array.isArray(next)) {\n    parents.add(next)\n\n    assertType<unknown[]>(previous)\n    assertType<unknown[]>(next)\n\n    let allEqual = previous.length === next.length\n    const result = []\n    for (let index = 0; index < next.length; index++) {\n      if (parents.has(next[index])) {\n        return next\n      }\n\n      const nextItem = _immutableReconcile(previous[index], next[index], parents)\n\n      if (nextItem !== previous[index]) {\n        allEqual = false\n      }\n      result[index] = nextItem\n    }\n    return (allEqual ? previous : result) as any\n  }\n\n  if (typeof next === 'object') {\n    parents.add(next)\n    assertType<Record<string, unknown>>(previous)\n    assertType<Record<string, unknown>>(next)\n\n    const nextKeys = Object.keys(next)\n    let allEqual = Object.keys(previous).length === nextKeys.length\n    const result: Record<string, unknown> = {}\n    for (const key of nextKeys) {\n      if (parents.has(next[key])) {\n        return next\n      }\n      const nextValue = _immutableReconcile(previous[key], next[key]!, parents)\n      if (nextValue !== previous[key]) {\n        allEqual = false\n      }\n      result[key] = nextValue\n    }\n    return (allEqual ? previous : result) as T\n  }\n  return next\n}\n\n// just some typescript trickery get type assertion\n// eslint-disable-next-line @typescript-eslint/no-empty-function, no-empty-function\nfunction assertType<T>(value: unknown): asserts value is T {}\n","import {SchemaType} from '@sanity/types'\nimport {ArrayOfObjectsFormNode, FieldMember, ObjectMember} from '../../store'\n\nexport function _isBlockType(type: SchemaType): boolean {\n  if (type.type) {\n    return _isBlockType(type.type)\n  }\n\n  return type.name === 'block'\n}\n\nexport function _isObjectFieldMember(\n  member: ObjectMember\n): member is FieldMember<ArrayOfObjectsFormNode> {\n  return member.kind === 'field' && member.field.schemaType.jsonType === 'object'\n}\n\nexport function _isArrayOfObjectsFieldMember(\n  member: ObjectMember\n): member is FieldMember<ArrayOfObjectsFormNode> {\n  return member.kind === 'field' && member.field.schemaType.jsonType === 'array'\n}\n","import {FormNodeValidation} from '@sanity/types'\nimport {useMemo, useRef} from 'react'\nimport {EMPTY_ARRAY} from '../../../../util'\nimport {BaseFormNode} from '../../../store'\nimport {immutableReconcile} from '../../../store/utils/immutableReconcile'\nimport {useChildValidation} from '../../../studio/contexts/Validation'\nimport {_isBlockType} from '../_helpers'\n\nconst NONEXISTENT_PATH = ['@@_NONEXISTENT_PATH_@@']\n\n/** @internal */\nexport function useMemberValidation(member: BaseFormNode | undefined) {\n  const prev = useRef<FormNodeValidation[] | null>(null)\n  const memberValidation =\n    member?.validation && member.validation.length > 0 ? member.validation : EMPTY_ARRAY\n  const childValidation = useChildValidation(member?.path || NONEXISTENT_PATH)\n\n  const validation = useMemo(\n    () =>\n      member?.schemaType && _isBlockType(member?.schemaType)\n        ? memberValidation\n        : memberValidation.concat(childValidation),\n    [childValidation, member, memberValidation]\n  )\n\n  const [hasError, hasWarning, hasInfo] = useMemo(\n    () => [\n      validation.filter((v) => v.level === 'error').length > 0,\n      validation.filter((v) => v.level === 'warning').length > 0,\n      validation.filter((v) => v.level === 'info').length > 0,\n    ],\n    [validation]\n  )\n\n  const reconciled = immutableReconcile(prev.current, validation)\n  prev.current = reconciled\n\n  return useMemo(() => {\n    return {\n      validation: reconciled,\n      hasError,\n      hasWarning,\n      hasInfo,\n    }\n  }, [reconciled, hasError, hasWarning, hasInfo])\n}\n","import React, {createContext} from 'react'\nimport {PortableTextMarker} from '../../../types'\n\nexport const PortableTextMarkersContext = createContext<PortableTextMarker[]>([])\n\nexport function PortableTextMarkersProvider(props: {\n  markers: PortableTextMarker[]\n  children: React.ReactNode\n}) {\n  return (\n    <PortableTextMarkersContext.Provider value={props.markers}>\n      {props.children}\n    </PortableTextMarkersContext.Provider>\n  )\n}\n","import {Path} from '@sanity/types'\nimport {isEqual} from '@sanity/util/paths'\nimport {useContext, useMemo} from 'react'\nimport {PortableTextMarker} from '../../../types'\nimport {PortableTextMarkersContext} from '../contexts/PortableTextMarkers'\n\nexport function usePortableTextMarkers(path: Path): PortableTextMarker[] {\n  const ctx = useContext(PortableTextMarkersContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  const markers = useMemo(() => ctx.filter((m) => isEqual(m.path, path)), [ctx, path])\n  return markers\n}\n","import React, {createContext} from 'react'\nimport {PortableTextMemberItem} from '../PortableTextInput'\n\nexport const PortableTextMemberItemsContext = createContext<PortableTextMemberItem[]>([])\n\nexport function PortableTextMemberItemsProvider(props: {\n  memberItems: PortableTextMemberItem[]\n  children: React.ReactNode\n}) {\n  return (\n    <PortableTextMemberItemsContext.Provider value={props.memberItems}>\n      {props.children}\n    </PortableTextMemberItemsContext.Provider>\n  )\n}\n","import {useContext} from 'react'\nimport {PortableTextMemberItemsContext} from '../contexts/PortableTextMembers'\nimport {PortableTextMemberItem} from '../PortableTextInput'\n\nexport function usePortableTextMemberItem(key: string): PortableTextMemberItem | undefined {\n  const ctx = useContext(PortableTextMemberItemsContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx.find((m) => m.key === key)\n}\n\nexport function usePortableTextMemberItems(): PortableTextMemberItem[] {\n  const ctx = useContext(PortableTextMemberItemsContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx\n}\n","const DEBUG_RENDERING = false\n\nfunction getRandomColor(): string {\n  const letters = '0123456789ABCDEF'\n  let color = '#'\n  for (let i = 0; i < 6; i++) {\n    color += letters[Math.floor(Math.random() * 16)]\n  }\n  return color\n}\n\nexport function debugRender(style?: React.CSSProperties): React.CSSProperties | undefined {\n  return DEBUG_RENDERING\n    ? {\n        ...(style ? style : {}),\n        color: style && style.color ? style.color : getRandomColor(),\n        background: style && style.background ? style.background : getRandomColor(),\n      }\n    : undefined\n}\n","import {EditIcon, LinkIcon, TrashIcon, EyeOpenIcon, EllipsisVerticalIcon} from '@sanity/icons'\nimport {\n  PortableTextBlock,\n  PortableTextEditor,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport {\n  Button,\n  Menu,\n  MenuButton,\n  MenuButtonProps,\n  MenuItem,\n  useGlobalKeyDown,\n  useLayer,\n} from '@sanity/ui'\nimport React, {\n  forwardRef,\n  MouseEvent,\n  ReactElement,\n  useCallback,\n  useMemo,\n  useRef,\n  useId,\n} from 'react'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {RenderPreviewCallback} from '../../../types'\nimport {is} from '../../../utils/is'\nimport {FIXME} from '../../../../FIXME'\nimport {IntentLink} from 'sanity/router'\n\ninterface BlockObjectPreviewProps {\n  focused: boolean\n  isActive?: boolean\n  onClickingDelete: (event: MouseEvent) => void\n  onClickingEdit: () => void\n  readOnly?: boolean\n  renderPreview: RenderPreviewCallback\n  type: ObjectSchemaType\n  value: PortableTextBlock\n}\n\nconst POPOVER_PROPS: MenuButtonProps['popover'] = {\n  constrainSize: true,\n  placement: 'bottom',\n  portal: 'default',\n  tone: 'default',\n}\n\nexport function BlockObjectPreview(props: BlockObjectPreviewProps): ReactElement {\n  const {\n    focused,\n    isActive,\n    onClickingDelete,\n    onClickingEdit,\n    readOnly,\n    renderPreview,\n    type,\n    value,\n  } = props\n  const {isTopLayer} = useLayer()\n  const editor = usePortableTextEditor()\n  const menuButtonId = useId()\n  const menuButton = useRef<HTMLButtonElement | null>(null)\n  const isTabbing = useRef<boolean>(false)\n  const isImageType = is('image', type)\n\n  const referenceLink = useMemo(\n    () =>\n      forwardRef(function ReferenceLink(linkProps: FIXME, ref: FIXME) {\n        return <IntentLink {...linkProps} intent=\"edit\" params={{id: value._ref}} ref={ref} />\n      }),\n    [value?._ref]\n  )\n\n  // Go to menu when tabbed to\n  // Focus block on escape\n  useGlobalKeyDown(\n    useCallback(\n      (event) => {\n        if (!focused) {\n          return\n        }\n        if (event.key === 'Escape' && isTopLayer) {\n          isTabbing.current = false\n          PortableTextEditor.focus(editor)\n        }\n        if (event.key === 'Tab') {\n          if (menuButton.current && !isTabbing.current) {\n            event.preventDefault()\n            event.stopPropagation()\n            menuButton.current.focus()\n            isTabbing.current = true\n          }\n        }\n      },\n      [focused, isTopLayer, editor]\n    )\n  )\n\n  const actions = (\n    <MenuButton\n      button={\n        <Button\n          aria-label=\"Open menu\"\n          fontSize={1}\n          iconRight={EllipsisVerticalIcon}\n          mode=\"bleed\"\n          paddingX={2}\n          tabIndex={isActive ? 0 : 1}\n        />\n      }\n      ref={menuButton}\n      id={menuButtonId}\n      menu={\n        <Menu>\n          {value?._ref && (\n            <MenuItem as={referenceLink} data-as=\"a\" icon={LinkIcon} text=\"Open reference\" />\n          )}\n\n          {readOnly && <MenuItem icon={EyeOpenIcon} onClick={onClickingEdit} text=\"View\" />}\n          {!readOnly && <MenuItem icon={EditIcon} onClick={onClickingEdit} text=\"Edit\" />}\n          {!readOnly && (\n            <MenuItem icon={TrashIcon} onClick={onClickingDelete} text=\"Delete\" tone=\"critical\" />\n          )}\n        </Menu>\n      }\n      popover={POPOVER_PROPS}\n    />\n  )\n\n  return (\n    <>\n      {renderPreview({\n        actions,\n        layout: isImageType ? 'blockImage' : 'block',\n        schemaType: type,\n        value,\n      })}\n    </>\n  )\n}\n","import {hues} from '@sanity/color'\nimport {Card, Theme, Flex, Box} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const Root = styled(Card)((props: {theme: Theme}) => {\n  const {color, radius, space} = props.theme.sanity\n\n  const overlay = css`\n    pointer-events: none;\n    content: '';\n    position: absolute;\n    top: -${space[1]}px;\n    bottom: -${space[1]}px;\n    left: -${space[1]}px;\n    right: -${space[1]}px;\n    border-radius: ${radius[2]}px;\n    mix-blend-mode: ${color.dark ? 'screen' : 'multiply'};\n  `\n\n  return css`\n    box-shadow: 0 0 0 1px var(--card-border-color);\n    border-radius: ${radius[1]}px;\n    pointer-events: all;\n    position: relative;\n\n    &[data-focused] {\n      box-shadow: 0 0 0 1px ${color.selectable?.primary.selected.border};\n    }\n\n    &:not([data-focused]):not([data-selected]) {\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.input.default.hovered.border};\n        }\n      }\n    }\n\n    &[data-markers] {\n      &:after {\n        ${overlay}\n        background-color: ${color.dark ? hues.purple[950].hex : hues.purple[50].hex};\n      }\n    }\n\n    &[data-warning] {\n      &:after {\n        ${overlay}\n        background-color: ${color.muted.caution.hovered.bg};\n      }\n\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.muted.caution.hovered.border};\n        }\n      }\n    }\n\n    &[data-invalid] {\n      &:after {\n        ${overlay}\n        background-color: ${color.input.invalid.enabled.bg};\n      }\n\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.input.invalid.hovered.border};\n        }\n      }\n    }\n  `\n})\n\nexport const PreviewContainer = styled(Flex)`\n  user-select: none;\n  pointer-events: none;\n`\n\nexport const ChangeIndicatorWrapper = styled.div<{$hasChanges: boolean}>(\n  ({theme, $hasChanges}: {theme: Theme; $hasChanges: boolean}) => {\n    const {space} = theme.sanity\n\n    return css`\n      position: absolute;\n      width: ${space[2]}px;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      padding-left: ${space[1]}px;\n      user-select: none;\n\n      ${!$hasChanges &&\n      css`\n        display: none;\n      `}\n\n      [data-dragged] & {\n        visibility: hidden;\n      }\n    `\n  }\n)\n\nexport const InnerFlex = styled(Flex)`\n  position: relative;\n\n  [data-dragged] > & {\n    opacity: 0.5;\n  }\n`\n\nexport const BlockActionsOuter = styled(Box)`\n  width: 25px;\n  position: relative;\n\n  [data-dragged] & {\n    visibility: hidden;\n  }\n`\n\nexport const BlockActionsInner = styled(Flex)`\n  position: absolute;\n  right: 0;\n  [data-dragged] & {\n    visibility: hidden;\n  }\n`\n\nexport const TooltipBox = styled(Box)`\n  max-width: 250px;\n`\nexport const BlockPreview = styled(Box)``\n","import {\n  PortableTextEditor,\n  PortableTextBlock,\n  RenderAttributes,\n  EditorSelection,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport {ObjectSchemaType, Path} from '@sanity/types'\nimport {Tooltip, Flex, ResponsivePaddingProps} from '@sanity/ui'\nimport React, {useCallback, useMemo, useRef, useState} from 'react'\nimport {PatchArg} from '../../../patch'\nimport {RenderCustomMarkers, RenderPreviewCallback} from '../../../types'\nimport {RenderBlockActionsCallback} from '../types'\nimport {BlockActions} from '../BlockActions'\nimport {ReviewChangesHighlightBlock, StyledChangeIndicatorWithProvidedFullPath} from '../_common'\nimport {useFormBuilder} from '../../../useFormBuilder'\nimport {useMemberValidation} from '../hooks/useMemberValidation'\nimport {usePortableTextMarkers} from '../hooks/usePortableTextMarkers'\nimport {usePortableTextMemberItem} from '../hooks/usePortableTextMembers'\nimport {pathToString} from '../../../../field'\nimport {debugRender} from '../debugRender'\nimport {BlockObjectPreview} from './BlockObjectPreview'\nimport {\n  Root,\n  PreviewContainer,\n  ChangeIndicatorWrapper,\n  InnerFlex,\n  BlockActionsOuter,\n  BlockActionsInner,\n  TooltipBox,\n  BlockPreview,\n} from './BlockObject.styles'\n\ninterface BlockObjectProps {\n  attributes: RenderAttributes\n  block: PortableTextBlock\n  isActive?: boolean\n  isFullscreen?: boolean\n  onChange: (...patches: PatchArg[]) => void\n  onItemOpen: (path: Path) => void\n  readOnly?: boolean\n  renderBlockActions?: RenderBlockActionsCallback\n  renderCustomMarkers?: RenderCustomMarkers\n  renderPreview: RenderPreviewCallback\n  type: ObjectSchemaType\n}\n\nexport function BlockObject(props: BlockObjectProps) {\n  const {\n    attributes: {focused, selected, path},\n    block,\n    isActive,\n    isFullscreen,\n    onChange,\n    onItemOpen,\n    readOnly,\n    renderBlockActions,\n    renderCustomMarkers,\n    renderPreview,\n    type,\n  } = props\n  const {Markers} = useFormBuilder().__internal.components\n  const elementRef = useRef<HTMLDivElement | null>(null)\n  const [reviewChangesHovered, setReviewChangesHovered] = useState<boolean>(false)\n  const markers = usePortableTextMarkers(path)\n  const editor = usePortableTextEditor()\n  const memberItem = usePortableTextMemberItem(pathToString(path))\n\n  const handleMouseOver = useCallback(() => setReviewChangesHovered(true), [])\n  const handleMouseOut = useCallback(() => setReviewChangesHovered(false), [])\n\n  const handleEdit = useCallback(() => {\n    if (memberItem) {\n      onItemOpen(memberItem.node.path)\n    }\n  }, [onItemOpen, memberItem])\n\n  const handleDoubleClickToOpen = useCallback(\n    (e: any) => {\n      e.preventDefault()\n      e.stopPropagation()\n      PortableTextEditor.blur(editor)\n      handleEdit()\n    },\n    [editor, handleEdit]\n  )\n\n  const handleDelete = useCallback(\n    (e: any) => {\n      e.stopPropagation()\n      e.preventDefault()\n      const sel: EditorSelection = {focus: {path, offset: 0}, anchor: {path, offset: 0}}\n      PortableTextEditor.delete(editor, sel, {mode: 'blocks'})\n      // Focus will not stick unless this is done through a timeout when deleted through clicking the menu button.\n      setTimeout(() => PortableTextEditor.focus(editor))\n    },\n    [editor, path]\n  )\n\n  const blockPreview = useMemo(() => {\n    return (\n      <BlockObjectPreview\n        focused={focused}\n        isActive={isActive}\n        onClickingDelete={handleDelete}\n        onClickingEdit={handleEdit}\n        readOnly={readOnly}\n        renderPreview={renderPreview}\n        type={type}\n        value={block}\n      />\n    )\n  }, [focused, isActive, handleDelete, handleEdit, readOnly, renderPreview, type, block])\n\n  const tone = selected || focused ? 'primary' : 'default'\n\n  const innerPaddingProps: ResponsivePaddingProps = useMemo(() => {\n    if (isFullscreen && !renderBlockActions) {\n      return {paddingX: 5}\n    }\n\n    if (isFullscreen && renderBlockActions) {\n      return {paddingLeft: 5, paddingRight: 2}\n    }\n\n    if (renderBlockActions) {\n      return {\n        paddingLeft: 3,\n        paddingRight: 2,\n      }\n    }\n\n    return {paddingX: 3}\n  }, [isFullscreen, renderBlockActions])\n\n  const {validation, hasError, hasWarning, hasInfo} = useMemberValidation(memberItem?.node)\n\n  const hasMarkers = Boolean(markers.length > 0)\n\n  const isImagePreview = memberItem?.node.schemaType.name === 'image'\n\n  const tooltipEnabled = hasError || hasWarning || hasInfo || hasMarkers\n  const toolTipContent = useMemo(\n    () =>\n      (tooltipEnabled && (validation.length > 0 || markers.length > 0) && (\n        <TooltipBox padding={2}>\n          <Markers\n            markers={markers}\n            validation={validation}\n            renderCustomMarkers={renderCustomMarkers}\n          />\n        </TooltipBox>\n      )) ||\n      null,\n    [Markers, markers, renderCustomMarkers, tooltipEnabled, validation]\n  )\n\n  const returned = useMemo(\n    () => (\n      <Flex paddingBottom={1} marginY={3} contentEditable={false} style={debugRender()}>\n        <InnerFlex flex={1}>\n          <PreviewContainer flex={1} {...innerPaddingProps}>\n            <Tooltip\n              placement=\"top\"\n              portal=\"editor\"\n              disabled={!tooltipEnabled}\n              content={toolTipContent}\n            >\n              <Root\n                data-focused={focused ? '' : undefined}\n                data-image-preview={isImagePreview ? '' : undefined}\n                data-invalid={hasError ? '' : undefined}\n                data-markers={hasMarkers && renderCustomMarkers ? '' : undefined}\n                data-read-only={readOnly ? '' : undefined}\n                data-selected={selected ? '' : undefined}\n                data-testid=\"pte-block-object\"\n                data-warning={hasWarning ? '' : undefined}\n                flex={1}\n                onDoubleClick={handleDoubleClickToOpen}\n                padding={isImagePreview ? 0 : 1}\n                ref={elementRef}\n                tone={tone}\n              >\n                <BlockPreview ref={memberItem?.elementRef as React.RefObject<HTMLDivElement>}>\n                  {blockPreview}\n                </BlockPreview>\n              </Root>\n            </Tooltip>\n          </PreviewContainer>\n\n          <BlockActionsOuter marginRight={1}>\n            <BlockActionsInner>\n              {renderBlockActions && block && focused && !readOnly && (\n                <BlockActions\n                  onChange={onChange}\n                  block={block}\n                  renderBlockActions={renderBlockActions}\n                />\n              )}\n            </BlockActionsInner>\n          </BlockActionsOuter>\n\n          {isFullscreen && memberItem && (\n            <ChangeIndicatorWrapper\n              onMouseOver={handleMouseOver}\n              onMouseOut={handleMouseOut}\n              $hasChanges={memberItem.member.item.changed}\n            >\n              <StyledChangeIndicatorWithProvidedFullPath\n                withHoverEffect={false}\n                hasFocus={focused}\n                path={memberItem.member.item.path}\n                isChanged={memberItem.member.item.changed}\n              />\n            </ChangeIndicatorWrapper>\n          )}\n\n          {reviewChangesHovered && <ReviewChangesHighlightBlock />}\n        </InnerFlex>\n      </Flex>\n    ),\n    [\n      block,\n      blockPreview,\n      focused,\n      handleDoubleClickToOpen,\n      handleMouseOut,\n      handleMouseOver,\n      hasError,\n      hasMarkers,\n      hasWarning,\n      innerPaddingProps,\n      isFullscreen,\n      isImagePreview,\n      memberItem,\n      onChange,\n      readOnly,\n      renderBlockActions,\n      renderCustomMarkers,\n      reviewChangesHovered,\n      selected,\n      tone,\n      toolTipContent,\n      tooltipEnabled,\n    ]\n  )\n\n  return returned\n}\n","import React, {useRef, useCallback, useEffect, useState} from 'react'\nimport {\n  Box,\n  Button,\n  Inline,\n  Popover,\n  PopoverProps,\n  Text,\n  useGlobalKeyDown,\n  useTheme,\n} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {EditIcon, TrashIcon} from '@sanity/icons'\n\nconst ToolbarPopover = styled(Popover)`\n  &[data-popper-reference-hidden='true'] {\n    display: none !important;\n  }\n`\n\nconst POPOVER_FALLBACK_PLACEMENTS: PopoverProps['fallbackPlacements'] = ['top', 'bottom']\n\ninterface InlineObjectToolbarPopoverProps {\n  open: boolean\n  onClose: () => void\n  onDelete: (event: React.MouseEvent<HTMLButtonElement>) => void\n  onEdit: (event: React.MouseEvent<HTMLButtonElement>) => void\n  referenceElement: HTMLElement | null\n  scrollElement: HTMLElement | null\n  title: string\n}\n\nexport function InlineObjectToolbarPopover(props: InlineObjectToolbarPopoverProps) {\n  const {onClose, onEdit, onDelete, referenceElement, scrollElement, title, open} = props\n  const {sanity} = useTheme()\n  const editButtonRef = useRef<HTMLButtonElement | null>(null)\n  const popoverScheme = sanity.color.dark ? 'light' : 'dark'\n  const isTabbing = useRef<boolean>(false)\n\n  // Close floating toolbar on Escape\n  // Focus to edit button on Tab\n  useGlobalKeyDown(\n    useCallback(\n      (event) => {\n        if (event.key === 'Escape') {\n          event.preventDefault()\n          event.stopPropagation()\n          isTabbing.current = false\n          onClose()\n        }\n        if (event.key === 'Tab') {\n          if (!isTabbing.current) {\n            event.preventDefault()\n            event.stopPropagation()\n            editButtonRef.current?.focus()\n            isTabbing.current = true\n          }\n        }\n      },\n      [onClose]\n    )\n  )\n\n  useEffect(() => {\n    if (isTabbing.current) {\n      editButtonRef.current?.focus()\n    }\n  }, [])\n\n  return (\n    <div contentEditable={false}>\n      <ToolbarPopover\n        boundaryElement={scrollElement}\n        constrainSize\n        content={\n          <Box padding={1}>\n            <Inline space={1}>\n              <Box padding={2}>\n                <Text weight=\"semibold\" size={1}>\n                  {title}\n                </Text>\n              </Box>\n              <Button\n                icon={EditIcon}\n                mode=\"bleed\"\n                onClick={onEdit}\n                padding={2}\n                ref={editButtonRef}\n                alt=\"Edit object\"\n              />\n              <Button\n                icon={TrashIcon}\n                mode=\"bleed\"\n                padding={2}\n                onClick={onDelete}\n                tone=\"critical\"\n                alt=\"Remove object\"\n              />\n            </Inline>\n          </Box>\n        }\n        fallbackPlacements={POPOVER_FALLBACK_PLACEMENTS}\n        open={open}\n        placement=\"top\"\n        portal=\"editor\"\n        referenceElement={referenceElement}\n        scheme={popoverScheme}\n      />\n    </div>\n  )\n}\n","import {hues} from '@sanity/color'\nimport {\n  PortableTextChild,\n  PortableTextEditor,\n  RenderAttributes,\n  Type,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport {Path} from '@sanity/types'\nimport React, {useCallback, useEffect, useMemo, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport {Box, Card, Theme, Tooltip} from '@sanity/ui'\nimport {RenderCustomMarkers, RenderPreviewCallback} from '../../../types'\nimport {useFormBuilder} from '../../../useFormBuilder'\nimport {PortableTextEditorElement} from '../Compositor'\nimport {usePortableTextMarkers} from '../hooks/usePortableTextMarkers'\nimport {useMemberValidation} from '../hooks/useMemberValidation'\nimport {usePortableTextMemberItem} from '../hooks/usePortableTextMembers'\nimport {pathToString} from '../../../../field/paths'\nimport {FIXME} from '../../../../FIXME'\nimport {InlineObjectToolbarPopover} from './InlineObjectToolbarPopover'\n\ninterface InlineObjectProps {\n  attributes: RenderAttributes\n  onItemOpen: (path: Path) => void\n  readOnly?: boolean\n  renderCustomMarkers?: RenderCustomMarkers\n  renderPreview: RenderPreviewCallback\n  scrollElement: HTMLElement | null\n  type: Type\n  value: PortableTextChild\n}\n\nfunction rootStyle({theme}: {theme: Theme}) {\n  const {color, radius} = theme.sanity\n\n  return css`\n    line-height: 0;\n    border-radius: ${radius[2]}px;\n    padding: 2px;\n    box-shadow: inset 0 0 0 1px var(--card-border-color);\n    height: calc(1em - 1px);\n    margin-top: 0.0625em;\n    cursor: default;\n\n    &:not([hidden]) {\n      display: inline-flex;\n      align-items: center;\n      vertical-align: top;\n    }\n\n    &[data-ready-only] {\n      cursor: default;\n    }\n\n    &[data-focused] {\n      box-shadow: inset 0 0 0 1px ${color.selectable?.primary.selected.border};\n      color: ${color.selectable?.primary.pressed.fg};\n    }\n\n    &[data-selected] {\n      background-color: ${color.selectable?.primary.pressed.bg};\n    }\n\n    &:not([data-focused]):not([data-selected]) {\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.input.default.hovered.border};\n        }\n      }\n    }\n\n    &[data-markers] {\n      --card-bg-color: ${color.dark ? hues.purple[950].hex : hues.purple[50].hex};\n    }\n\n    &[data-warning] {\n      --card-bg-color: ${color.muted.caution.hovered.bg};\n\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.muted.caution.hovered.border};\n        }\n      }\n    }\n\n    &[data-invalid] {\n      --card-bg-color: ${color.input.invalid.enabled.bg};\n      --card-border-color: ${color.input.invalid.enabled.border};\n\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.input.invalid.hovered.border};\n        }\n      }\n    }\n  `\n}\n\nconst Root = styled(Card)(rootStyle)\n\nconst PreviewSpan = styled.span`\n  display: block;\n  max-width: calc(5em + 80px);\n  position: relative;\n`\n\nconst TooltipBox = styled(Box)`\n  max-width: 250px;\n`\n\nexport const InlineObject = React.forwardRef(function InlineObject(\n  props: InlineObjectProps,\n  forwardedRef: React.ForwardedRef<PortableTextEditorElement>\n) {\n  const {\n    attributes: {focused, selected, path},\n    onItemOpen,\n    readOnly,\n    renderCustomMarkers,\n    renderPreview,\n    scrollElement,\n    type,\n    value,\n  } = props\n  const {Markers} = useFormBuilder().__internal.components\n  const editor = usePortableTextEditor()\n  const markers = usePortableTextMarkers(path)\n  const memberItem = usePortableTextMemberItem(pathToString(path))\n  const {validation, hasError, hasWarning} = useMemberValidation(memberItem?.node)\n  const hasValidationMarkers = validation.length > 0\n  const [popoverOpen, setPopoverOpen] = useState<boolean>(true)\n\n  const tone = useMemo(() => {\n    if (hasError) {\n      return 'critical'\n    }\n\n    if (hasWarning) {\n      return 'caution'\n    }\n\n    if (selected || focused) {\n      return 'primary'\n    }\n    return undefined\n  }, [focused, hasError, hasWarning, selected])\n\n  const preview = useMemo(() => {\n    return (\n      <PreviewSpan>\n        {renderPreview({\n          fallbackTitle: 'Click to edit',\n          layout: 'inline',\n          schemaType: type as FIXME,\n          value,\n        })}\n      </PreviewSpan>\n    )\n  }, [renderPreview, type, value])\n\n  const markersToolTip = useMemo(\n    () =>\n      markers.length > 0 || validation.length > 0 ? (\n        <Tooltip\n          placement=\"bottom\"\n          portal=\"editor\"\n          content={\n            <TooltipBox padding={2}>\n              <Markers\n                markers={markers}\n                validation={validation}\n                renderCustomMarkers={renderCustomMarkers}\n              />\n            </TooltipBox>\n          }\n        >\n          {preview}\n        </Tooltip>\n      ) : undefined,\n    [Markers, markers, validation, preview, renderCustomMarkers]\n  )\n\n  const handleRemoveClick = useCallback(\n    (event: React.MouseEvent<HTMLButtonElement>): void => {\n      event.preventDefault()\n      event.stopPropagation()\n      const point = {path, offset: 0}\n      const selection = {anchor: point, focus: point}\n      PortableTextEditor.delete(editor, selection, {mode: 'children'})\n      PortableTextEditor.focus(editor)\n    },\n    [editor, path]\n  )\n\n  const openItem = useCallback((): void => {\n    PortableTextEditor.blur(editor)\n    if (memberItem) {\n      onItemOpen(memberItem.node.path)\n      setPopoverOpen(false)\n    }\n  }, [editor, memberItem, onItemOpen])\n\n  const handlePopoverClose = useCallback(() => {\n    if (memberItem?.member.open) {\n      setPopoverOpen(true)\n    }\n    setPopoverOpen(false)\n  }, [memberItem?.member.open])\n\n  useEffect(() => {\n    if (memberItem?.member.open) {\n      setPopoverOpen(false)\n    } else if (focused) {\n      setPopoverOpen(true)\n    } else {\n      setPopoverOpen(false)\n    }\n  }, [editor, focused, memberItem?.member.open, selected])\n\n  return (\n    <>\n      <Root\n        data-focused={focused || undefined}\n        data-invalid={hasError || undefined}\n        data-warning={hasWarning || undefined}\n        data-selected={selected || undefined}\n        data-read-only={readOnly || undefined}\n        data-markers={hasValidationMarkers || undefined}\n        tone={tone}\n        forwardedAs=\"span\"\n        contentEditable={false}\n        ref={memberItem?.elementRef as React.RefObject<HTMLDivElement>}\n        onClick={readOnly ? openItem : undefined}\n        onDoubleClick={openItem}\n      >\n        <span ref={forwardedRef}>{markersToolTip || preview}</span>\n      </Root>\n      {focused && !readOnly && (\n        <InlineObjectToolbarPopover\n          open={popoverOpen}\n          onDelete={handleRemoveClick}\n          onEdit={openItem}\n          onClose={handlePopoverClose}\n          referenceElement={memberItem?.elementRef?.current || null}\n          scrollElement={scrollElement}\n          title={type?.title || type.name}\n        />\n      )}\n    </>\n  )\n})\n","import React, {useState, useRef, useMemo, useEffect, useCallback} from 'react'\nimport {\n  Box,\n  Button,\n  Inline,\n  Popover,\n  PopoverProps,\n  Text,\n  useGlobalKeyDown,\n  useTheme,\n} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {EditIcon, TrashIcon} from '@sanity/icons'\n\nconst ToolbarPopover = styled(Popover)`\n  &[data-popper-reference-hidden='true'] {\n    display: none !important;\n  }\n`\n\nconst POPOVER_FALLBACK_PLACEMENTS: PopoverProps['fallbackPlacements'] = ['top', 'bottom']\n\ninterface AnnotationToolbarPopoverProps {\n  /**\n   * Needed to update the popover position on scroll\n   */\n  scrollElement?: HTMLElement\n  annotationElement?: HTMLElement\n  textElement?: HTMLElement\n  onEdit: (event: React.MouseEvent<HTMLButtonElement>) => void\n  onDelete: (event: React.MouseEvent<HTMLButtonElement>) => void\n  title: string\n}\n\nexport function AnnotationToolbarPopover(props: AnnotationToolbarPopoverProps) {\n  const {scrollElement, annotationElement, textElement, title, onEdit, onDelete} = props\n  const [open, setOpen] = useState<boolean>(false)\n  const [cursorRect, setCursorRect] = useState<DOMRect | null>(null)\n  const [selection, setSelection] = useState<{\n    anchorNode: Node | null\n    anchorOffset: number\n    focusNode: Node | null\n    focusOffset: number\n  } | null>(null)\n  const isClosingRef = useRef<boolean>(false)\n  const rangeRef = useRef<Range | null>(null)\n  const editButtonRef = useRef<HTMLButtonElement>(null)\n  const isTabbing = useRef<boolean>(false)\n  const {sanity} = useTheme()\n\n  const popoverScheme = sanity.color.dark ? 'light' : 'dark'\n\n  // This is a \"virtual element\" (supported by Popper.js)\n  const cursorElement = useMemo(() => {\n    if (!cursorRect) {\n      return null\n    }\n\n    return {\n      getBoundingClientRect: () => {\n        return cursorRect\n      },\n    }\n  }, [cursorRect]) as HTMLElement\n\n  useEffect(() => {\n    if (!open || !scrollElement) {\n      return undefined\n    }\n\n    const handleScroll = () => {\n      if (rangeRef.current) {\n        setCursorRect(rangeRef.current.getBoundingClientRect())\n      }\n    }\n\n    scrollElement.addEventListener('scroll', handleScroll, {passive: true})\n\n    return () => {\n      scrollElement.removeEventListener('scroll', handleScroll)\n    }\n  }, [open, scrollElement])\n\n  // Close floating toolbar on Escape\n  useGlobalKeyDown(\n    useCallback(\n      (event) => {\n        if (!open) {\n          return\n        }\n        if (event.key === 'Escape') {\n          event.preventDefault()\n          event.stopPropagation()\n          setOpen(false)\n          isTabbing.current = false\n        }\n        if (event.key === 'Tab') {\n          if (!isTabbing.current) {\n            event.preventDefault()\n            event.stopPropagation()\n            editButtonRef.current?.focus()\n            isTabbing.current = true\n          }\n        }\n      },\n      [open]\n    )\n  )\n\n  // Detect selection changes\n  useEffect(() => {\n    function handleSelectionChange() {\n      if (!textElement) return\n      const winSelection = window.getSelection()\n      if (!winSelection) {\n        return\n      }\n      const {anchorNode, anchorOffset, focusNode, focusOffset} = winSelection\n\n      setSelection({\n        anchorNode,\n        anchorOffset,\n        focusNode,\n        focusOffset,\n      })\n    }\n\n    document.addEventListener('selectionchange', handleSelectionChange, {passive: true})\n\n    return () => {\n      document.removeEventListener('selectionchange', handleSelectionChange)\n    }\n  }, [textElement])\n\n  // Open popover when selection is within annotations\n  useEffect(() => {\n    if (!selection) return\n    if (isClosingRef.current) return\n    const {anchorNode, focusNode} = selection\n    // Safari would close the popover by loosing range when button is focused.\n    // If we are focused and currently tabbing to the action buttons, just return here.\n    if (isTabbing.current) {\n      return\n    }\n    if (annotationElement && annotationElement.contains(anchorNode) && anchorNode === focusNode) {\n      const range = window.getSelection()?.getRangeAt(0)\n      const rect = range?.getBoundingClientRect()\n\n      rangeRef.current = range || null\n\n      if (rect) {\n        setCursorRect(rect)\n      }\n      setOpen(true)\n    } else {\n      setOpen(false)\n      setCursorRect(null)\n      rangeRef.current = null\n    }\n  }, [selection, annotationElement])\n\n  if (!open) {\n    return null\n  }\n\n  return (\n    <ToolbarPopover\n      content={\n        <Box padding={1}>\n          <Inline space={1}>\n            <Box padding={2}>\n              <Text weight=\"semibold\" size={1}>\n                {title}\n              </Text>\n            </Box>\n            <Button\n              ref={editButtonRef}\n              icon={EditIcon}\n              mode=\"bleed\"\n              onClick={onEdit}\n              padding={2}\n              alt=\"Edit annotation\"\n            />\n            <Button\n              icon={TrashIcon}\n              mode=\"bleed\"\n              padding={2}\n              onClick={onDelete}\n              tone=\"critical\"\n              alt=\"Remove annotation\"\n            />\n          </Inline>\n        </Box>\n      }\n      fallbackPlacements={POPOVER_FALLBACK_PLACEMENTS}\n      open={open}\n      placement=\"top\"\n      portal=\"default\"\n      referenceElement={cursorElement}\n      scheme={popoverScheme}\n    />\n  )\n}\n","import {hues} from '@sanity/color'\nimport {\n  PortableTextChild,\n  PortableTextEditor,\n  RenderAttributes,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport {ObjectSchemaType, Path} from '@sanity/types'\nimport {Box, Theme, ThemeColorToneKey, Tooltip} from '@sanity/ui'\nimport React, {SyntheticEvent, useCallback, useMemo, useRef, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport {FIXME} from '../../../../FIXME'\nimport {pathToString} from '../../../../field'\nimport {RenderCustomMarkers} from '../../../types'\nimport {DefaultMarkers} from '../_legacyDefaultParts/Markers'\nimport {useFormBuilder} from '../../../useFormBuilder'\nimport {useMemberValidation} from '../hooks/useMemberValidation'\nimport {usePortableTextMarkers} from '../hooks/usePortableTextMarkers'\nimport {usePortableTextMemberItem} from '../hooks/usePortableTextMembers'\nimport {AnnotationToolbarPopover} from './AnnotationToolbarPopover'\n\ninterface AnnotationProps {\n  attributes: RenderAttributes\n  children: JSX.Element\n  onItemOpen: (path: Path) => void\n  readOnly?: boolean\n  renderCustomMarkers?: RenderCustomMarkers\n  scrollElement: HTMLElement | null\n  type: ObjectSchemaType\n  value: PortableTextChild\n}\n\nconst Root = styled.span<{$toneKey?: Exclude<ThemeColorToneKey, 'transparent'>}>(\n  (props: {$toneKey?: Exclude<ThemeColorToneKey, 'transparent'>; theme: Theme}) => {\n    const {$toneKey = 'default', theme} = props\n\n    return css`\n      text-decoration: none;\n      display: inline;\n      background-color: ${theme.sanity.color.selectable?.[$toneKey].enabled.bg};\n      border-bottom: 1px dashed ${theme.sanity.color.selectable?.[$toneKey].enabled.fg};\n      color: ${theme.sanity.color.selectable?.[$toneKey].enabled.fg};\n\n      &[data-link] {\n        border-bottom: 1px solid ${theme.sanity.color.selectable?.[$toneKey].enabled.fg};\n      }\n\n      &[data-custom-markers] {\n        background-color: ${theme.sanity.color.dark ? hues.purple[950].hex : hues.purple[50].hex};\n      }\n\n      &[data-warning] {\n        background-color: ${theme.sanity.color.muted.caution.hovered.bg};\n      }\n\n      &[data-error] {\n        background-color: ${theme.sanity.color.muted.critical.hovered.bg};\n      }\n    `\n  }\n)\n\nconst TooltipBox = styled(Box).attrs({forwardedAs: 'span'})`\n  max-width: 250px;\n`\n\nexport const Annotation = function Annotation(props: AnnotationProps) {\n  const {\n    attributes: {path},\n    children,\n    onItemOpen,\n    renderCustomMarkers,\n    scrollElement,\n    readOnly,\n    type,\n    value,\n  } = props\n  const {Markers = DefaultMarkers} = useFormBuilder().__internal.components\n  const annotationRef = useRef<HTMLElement>(null)\n  const editor = usePortableTextEditor()\n  const markDefPath = useMemo(\n    () => [path[0]].concat(['markDefs', {_key: value._key}]),\n    [path, value._key]\n  )\n  const [textElement, setTextElement] = useState<HTMLSpanElement | null>(null)\n  const memberItem = usePortableTextMemberItem(pathToString(markDefPath))\n  const {validation, hasError, hasWarning} = useMemberValidation(memberItem?.node)\n  const markers = usePortableTextMarkers(path)\n\n  const text = useMemo(\n    () => (\n      <span ref={setTextElement} data-annotation=\"\">\n        {children}\n      </span>\n    ),\n\n    [children]\n  )\n\n  const openItem = useCallback(() => {\n    if (memberItem) {\n      onItemOpen(memberItem.node.path)\n    }\n  }, [memberItem, onItemOpen])\n\n  const markersToolTip = useMemo(\n    () =>\n      validation.length > 0 || markers.length > 0 ? (\n        <Tooltip\n          placement=\"bottom\"\n          portal=\"default\"\n          content={\n            <TooltipBox padding={2}>\n              <Markers\n                markers={markers}\n                renderCustomMarkers={renderCustomMarkers}\n                validation={validation}\n              />\n            </TooltipBox>\n          }\n        >\n          <span>{text}</span>\n        </Tooltip>\n      ) : undefined,\n    [Markers, markers, renderCustomMarkers, text, validation]\n  )\n\n  const handleEditClick = useCallback(\n    (event: SyntheticEvent): void => {\n      PortableTextEditor.blur(editor)\n      event.preventDefault()\n      event.stopPropagation()\n      openItem()\n    },\n    [editor, openItem]\n  )\n\n  const handleRemoveClick = useCallback(\n    (event: React.MouseEvent<HTMLButtonElement>): void => {\n      event.preventDefault()\n      event.stopPropagation()\n      PortableTextEditor.removeAnnotation(editor, type as FIXME)\n      PortableTextEditor.focus(editor)\n    },\n    [editor, type]\n  )\n\n  const isLink = type.name === 'link'\n\n  const toneKey = useMemo(() => {\n    if (hasError) {\n      return 'critical'\n    }\n\n    if (hasWarning) {\n      return 'caution'\n    }\n\n    if (isLink) {\n      return 'primary'\n    }\n    return 'default'\n  }, [isLink, hasError, hasWarning])\n\n  const hasCustomMarkers = markers.length > 0\n  return (\n    <Root\n      $toneKey={toneKey}\n      ref={annotationRef}\n      data-link={isLink ? '' : undefined}\n      data-error={hasError ? '' : undefined}\n      data-warning={hasWarning ? '' : undefined}\n      data-custom-markers={hasCustomMarkers ? '' : undefined}\n      onClick={readOnly ? openItem : undefined}\n    >\n      <span ref={memberItem?.elementRef}>{markersToolTip || text}</span>\n      {!readOnly && (\n        <AnnotationToolbarPopover\n          textElement={textElement || undefined}\n          annotationElement={annotationRef.current || undefined}\n          scrollElement={scrollElement || undefined}\n          onEdit={handleEditClick}\n          onDelete={handleRemoveClick}\n          title={type?.title || type.name}\n        />\n      )}\n    </Root>\n  )\n}\n","import {ResponsivePaddingProps} from '@sanity/ui'\n\nexport const TEXT_LEVELS = [1, 2, 3, 4, 5, 6, 7, 8, 9]\n\nexport const TEXT_BULLET_MARKERS = ['●', '○', '■']\n\nexport const TEXT_NUMBER_FORMATS = ['number', 'lower-alpha', 'lower-roman']\n\nexport const TEXT_DECORATOR_TAGS: Record<string, React.ElementType> = {\n  em: 'em',\n  'strike-through': 's',\n  underline: 'u',\n  strong: 'strong',\n  code: 'code',\n}\n\nexport const TEXT_STYLE_PADDING: Record<string, ResponsivePaddingProps> = {\n  h1: {\n    paddingTop: 5,\n    paddingBottom: 4,\n  },\n  h2: {\n    paddingTop: 4,\n    paddingBottom: 4,\n  },\n  h3: {\n    paddingTop: 4,\n    paddingBottom: 3,\n  },\n  h4: {\n    paddingTop: 4,\n    paddingBottom: 3,\n  },\n  h5: {\n    paddingTop: 4,\n    paddingBottom: 3,\n  },\n  h6: {\n    paddingTop: 4,\n    paddingBottom: 2,\n  },\n  normal: {\n    paddingTop: 2,\n    paddingBottom: 3,\n  },\n  blockquote: {\n    paddingTop: 2,\n    paddingBottom: 3,\n  },\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {TEXT_DECORATOR_TAGS} from './constants'\n\ninterface DecoratorProps {\n  mark: string\n  children: React.ReactNode\n}\n\nconst Root = styled.span`\n  /* Make sure the annotation styling is visible */\n  &[data-mark='code'] {\n    mix-blend-mode: multiply;\n    color: inherit;\n  }\n`\n\nexport function Decorator(props: DecoratorProps) {\n  const {mark, children} = props\n  const tag = TEXT_DECORATOR_TAGS[mark]\n\n  return (\n    <Root as={tag} data-mark={mark}>\n      {children}\n    </Root>\n  )\n}\n","export function createListName(level: number): string {\n  return `list-level-${level}`\n}\n","import {hues} from '@sanity/color'\nimport {Box, Flex, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {TEXT_BULLET_MARKERS, TEXT_NUMBER_FORMATS} from './constants'\nimport {createListName} from './helpers'\n\ninterface TextBlockStyleProps {\n  $level: number\n}\n\nfunction textBlockStyle(props: TextBlockStyleProps & {theme: Theme}) {\n  const {$level, theme} = props\n  const {color, fonts, radius, space} = theme.sanity\n  const numberMarker = TEXT_NUMBER_FORMATS[($level - 1) % TEXT_NUMBER_FORMATS.length]\n  const bulletMarker = TEXT_BULLET_MARKERS[($level - 1) % TEXT_BULLET_MARKERS.length]\n\n  return css`\n    --marker-bg-color: transparent;\n\n    mix-blend-mode: ${color.dark ? 'screen' : 'multiply'};\n    position: relative;\n\n    & > [data-ui='TextBlock_inner'] {\n      position: relative;\n      flex: 1;\n    }\n\n    & > div:before {\n      content: '';\n      position: absolute;\n      top: -${space[1]}px;\n      bottom: -${space[1]}px;\n      left: -${space[1]}px;\n      right: -${space[1]}px;\n      border-radius: ${radius[2]}px;\n      background-color: var(--marker-bg-color);\n    }\n\n    &[data-markers] {\n      --marker-bg-color: ${color.dark ? hues.purple[950].hex : hues.purple[50].hex};\n    }\n\n    &[data-warning] {\n      --card-border-color: ${color.muted.caution.enabled.border};\n      --marker-bg-color: ${color.muted.caution.hovered.bg};\n    }\n\n    &[data-error] {\n      --card-border-color: ${color.muted.critical.enabled.border};\n      --marker-bg-color: ${color.muted.critical.hovered.bg};\n    }\n\n    & [data-list-prefix] {\n      position: absolute;\n      margin-left: -4.5rem;\n      width: 3.75rem;\n      text-align: right;\n      box-sizing: border-box;\n    }\n\n    &[data-list-item='number'] [data-list-prefix] {\n      font-variant-numeric: tabular-nums;\n\n      & > span:before {\n        content: counter(${createListName($level)}) '.';\n        content: counter(${createListName($level)}, ${numberMarker}) '.';\n      }\n    }\n\n    &[data-list-item='bullet'] [data-list-prefix] {\n      & > span {\n        position: relative;\n        top: -0.1875em;\n\n        &:before {\n          content: '${bulletMarker}';\n          font-size: 0.46666em;\n        }\n      }\n    }\n\n    & [data-text] {\n      overflow-wrap: anywhere;\n      text-transform: none;\n      white-space: pre-wrap;\n      font-family: ${fonts.text.family};\n      flex: 1;\n\n      *::selection {\n        background-color: ${color.selectable?.primary.pressed.bg};\n      }\n    }\n  `\n}\n\nexport const TextRoot = styled.div<TextBlockStyleProps>(textBlockStyle)\n\n// Because of a weird bug in Google Chrome regarding the @sanity/ui Flex component and spellchecking,\n// this is set to be a Box with 'display: flex'. Using the Flex component here results in Chrome\n// using 20% CPU when idle when spellchecking is on for some reason.\nexport const TextBlockFlexWrapper = styled(Box)`\n  position: relative;\n  display: flex;\n`\n\nexport const ListPrefixWrapper = styled.div`\n  user-select: none;\n  white-space: nowrap;\n`\n\nexport const BlockExtrasContainer = styled(Box)`\n  user-select: none;\n`\n\nexport const BlockActionsOuter = styled(Box)`\n  line-height: 0;\n  width: 25px;\n  position: relative;\n`\n\nexport const BlockActionsInner = styled(Flex)(({theme}: {theme: Theme}) => {\n  const {fonts, space} = theme.sanity\n  const textSize1 = fonts.text.sizes[1]\n  const textSize2 = fonts.text.sizes[2]\n  const capHeight1 = textSize1.lineHeight - textSize1.ascenderHeight - textSize1.descenderHeight\n  const capHeight2 = textSize2.lineHeight - textSize2.ascenderHeight - textSize2.descenderHeight\n  const buttonHeight = capHeight1 + space[2] + space[2]\n\n  // This calculates the following:\n  // > var buttonHeight = 25px\n  // > var capHeight2 = 11px\n  // > 0 - (buttonHeight - capHeight2) / 2 = -7px\n  const negativeTop = 0 - (buttonHeight - capHeight2) / 2\n\n  return css`\n    user-select: none;\n    position: absolute;\n    right: 0;\n    top: ${negativeTop}px;\n  `\n})\n\nexport const TooltipBox = styled(Box)`\n  max-width: 250px;\n`\n\nexport const TextFlex = styled(Flex)<{$level?: number}>`\n  position: relative;\n  padding-left: ${({$level}) => ($level ? $level * 32 : 0)}px;\n`\n\nexport const ChangeIndicatorWrapper = styled.div<{$hasChanges: boolean}>(\n  ({theme, $hasChanges}: {theme: Theme; $hasChanges: boolean}) => {\n    const {space} = theme.sanity\n\n    return css`\n      position: absolute;\n      width: ${space[2]}px;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      padding-left: ${space[1]}px;\n      user-select: none;\n\n      ${!$hasChanges &&\n      css`\n        display: none;\n      `}\n    `\n  }\n)\n","import {Heading, Text} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\ntype TextStyleProps = Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'ref'>\ntype BlockQuoteStyleProps = Omit<React.HTMLProps<HTMLQuoteElement>, 'as' | 'ref'>\n\n// Without this container, editing with Android breaks due to how Text is styled via responsiveFont in @sanity/ui\nconst TextContainer = styled.div`\n  display: block;\n`\n\nexport const Normal = ({children, ...rest}: TextStyleProps) => (\n  <Text data-testid=\"text-style--normal\" {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Text>\n)\n\nexport const Heading1 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h1\" data-testid=\"text-style--h1\" size={5} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nexport const Heading2 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h2\" data-testid=\"text-style--h2\" size={4} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nexport const Heading3 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h3\" data-testid=\"text-style--h3\" size={3} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nexport const Heading4 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h4\" data-testid=\"text-style--h4\" size={2} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nexport const Heading5 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h5\" data-testid=\"text-style--h5\" size={1} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nexport const Heading6 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h6\" data-testid=\"text-style--h6\" size={0} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nconst BlockQuoteRoot = styled.blockquote`\n  position: relative;\n  display: block;\n  margin: 0;\n  padding-left: ${({theme}) => theme.sanity.space[3]}px;\n\n  &::before {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: -4px;\n    bottom: -4px;\n    width: 3px;\n    background: var(--card-border-color);\n  }\n`\n\nexport const BlockQuote = ({children, ...rest}: TextStyleProps) => (\n  // @todo figure out props typings for BlockQuoteStyleProps\n  <BlockQuoteRoot data-testid=\"text-style--blockquote\" {...(rest as any as BlockQuoteStyleProps)}>\n    <Text as=\"p\">{children}</Text>\n  </BlockQuoteRoot>\n)\n\nexport const TEXT_STYLES: Record<string, React.ComponentType<TextStyleProps>> = {\n  normal: Normal,\n  h1: Heading1,\n  h2: Heading2,\n  h3: Heading3,\n  h4: Heading4,\n  h5: Heading5,\n  h6: Heading6,\n  blockquote: BlockQuote,\n}\n","import {PortableTextBlock, RenderAttributes} from '@sanity/portable-text-editor'\nimport {Box, Flex, ResponsivePaddingProps, Tooltip} from '@sanity/ui'\nimport React, {RefObject, useCallback, useMemo, useState} from 'react'\nimport {RenderCustomMarkers} from '../../../types'\nimport {PatchArg} from '../../../patch'\nimport {useFormBuilder} from '../../../useFormBuilder'\nimport {BlockActions} from '../BlockActions'\nimport {ReviewChangesHighlightBlock, StyledChangeIndicatorWithProvidedFullPath} from '../_common'\nimport {RenderBlockActionsCallback} from '../types'\nimport {useMemberValidation} from '../hooks/useMemberValidation'\nimport {usePortableTextMarkers} from '../hooks/usePortableTextMarkers'\nimport {usePortableTextMemberItem} from '../hooks/usePortableTextMembers'\nimport {pathToString} from '../../../../field'\nimport {debugRender} from '../debugRender'\nimport {TEXT_STYLE_PADDING} from './constants'\nimport {\n  BlockActionsInner,\n  BlockActionsOuter,\n  BlockExtrasContainer,\n  ChangeIndicatorWrapper,\n  ListPrefixWrapper,\n  TextBlockFlexWrapper,\n  TextFlex,\n  TextRoot,\n  TooltipBox,\n} from './TextBlock.styles'\nimport {TEXT_STYLES} from './textStyles'\n\nexport interface TextBlockProps {\n  attributes: RenderAttributes\n  block: PortableTextBlock\n  children: React.ReactNode\n  isFullscreen?: boolean\n  onChange: (...patches: PatchArg[]) => void\n  readOnly?: boolean\n  renderBlockActions?: RenderBlockActionsCallback\n  renderCustomMarkers?: RenderCustomMarkers\n  spellCheck?: boolean\n}\n\nexport function TextBlock(props: TextBlockProps) {\n  const {\n    attributes: {path, focused},\n    block,\n    children,\n    isFullscreen,\n    onChange,\n    readOnly,\n    renderBlockActions,\n    renderCustomMarkers,\n    spellCheck,\n  } = props\n  const {Markers} = useFormBuilder().__internal.components\n  const [reviewChangesHovered, setReviewChangesHovered] = useState<boolean>(false)\n  const markers = usePortableTextMarkers(path)\n  const memberItem = usePortableTextMemberItem(pathToString(path))\n\n  const handleChangeIndicatorMouseEnter = useCallback(() => setReviewChangesHovered(true), [])\n  const handleChangeIndicatorMouseLeave = useCallback(() => setReviewChangesHovered(false), [])\n\n  const {validation, hasError, hasWarning, hasInfo} = useMemberValidation(memberItem?.node)\n\n  const hasMarkers = Boolean(renderCustomMarkers) && markers.length > 0\n\n  const tooltipEnabled = hasError || hasWarning || hasMarkers || hasInfo\n\n  const text = useMemo(() => {\n    const TextStyle = TEXT_STYLES[block.style] || TEXT_STYLES.normal\n\n    return (\n      <TextFlex align=\"flex-start\" $level={block?.level}>\n        {block.listItem && (\n          <ListPrefixWrapper contentEditable={false}>\n            <TextStyle data-list-prefix=\"\" />\n          </ListPrefixWrapper>\n        )}\n        <TextStyle data-text=\"\" style={debugRender()}>\n          {children}\n        </TextStyle>\n      </TextFlex>\n    )\n  }, [block.style, block.listItem, block.level, children])\n\n  const innerPaddingProps: ResponsivePaddingProps = useMemo(() => {\n    if (isFullscreen && !renderBlockActions) {\n      return {paddingX: 5}\n    }\n\n    if (isFullscreen && renderBlockActions) {\n      return {paddingLeft: 5, paddingRight: 2}\n    }\n\n    if (renderBlockActions) {\n      return {\n        paddingLeft: 3,\n        paddingRight: 2,\n      }\n    }\n\n    return {paddingX: 3}\n  }, [isFullscreen, renderBlockActions])\n\n  const outerPaddingProps: ResponsivePaddingProps = useMemo(() => {\n    if (block.listItem) {\n      return {paddingY: 2}\n    }\n\n    return TEXT_STYLE_PADDING[block.style] || {paddingY: 2}\n  }, [block])\n\n  return (\n    <Box data-testid=\"text-block\" {...outerPaddingProps}>\n      <TextBlockFlexWrapper data-testid=\"text-block__wrapper\">\n        <Flex\n          flex={1}\n          {...innerPaddingProps}\n          ref={memberItem?.elementRef as RefObject<HTMLDivElement>}\n        >\n          <Box flex={1}>\n            <Tooltip\n              placement=\"top\"\n              portal=\"editor\"\n              disabled={!tooltipEnabled}\n              content={\n                tooltipEnabled && (\n                  <TooltipBox padding={2}>\n                    <Markers\n                      markers={markers}\n                      validation={validation}\n                      renderCustomMarkers={renderCustomMarkers}\n                    />\n                  </TooltipBox>\n                )\n              }\n            >\n              <TextRoot\n                data-error={hasError ? '' : undefined}\n                data-list-item={block.listItem}\n                data-markers={hasMarkers ? '' : undefined}\n                data-read-only={readOnly}\n                data-testid=\"text-block__text\"\n                data-warning={hasWarning ? '' : undefined}\n                $level={block.level}\n                spellCheck={spellCheck}\n              >\n                {text}\n              </TextRoot>\n            </Tooltip>\n          </Box>\n\n          <BlockExtrasContainer contentEditable={false}>\n            <BlockActionsOuter marginRight={1}>\n              <BlockActionsInner>\n                {renderBlockActions && focused && !readOnly && (\n                  <BlockActions\n                    onChange={onChange}\n                    block={block}\n                    renderBlockActions={renderBlockActions}\n                  />\n                )}\n              </BlockActionsInner>\n            </BlockActionsOuter>\n\n            {isFullscreen && memberItem && (\n              <ChangeIndicatorWrapper\n                $hasChanges={memberItem.member.item.changed}\n                onMouseEnter={handleChangeIndicatorMouseEnter}\n                onMouseLeave={handleChangeIndicatorMouseLeave}\n              >\n                <StyledChangeIndicatorWithProvidedFullPath\n                  hasFocus={focused}\n                  isChanged={memberItem.member.item.changed}\n                  path={memberItem.member.item.path}\n                  withHoverEffect={false}\n                />\n              </ChangeIndicatorWrapper>\n            )}\n          </BlockExtrasContainer>\n          {reviewChangesHovered && <ReviewChangesHighlightBlock />}\n        </Flex>\n      </TextBlockFlexWrapper>\n    </Box>\n  )\n}\n","import {Menu, MenuButton, MenuButtonProps, MenuDivider, MenuItem} from '@sanity/ui'\nimport React from 'react'\nimport {CollapseMenuProps} from './CollapseMenu'\n\nconst MENU_BUTTON_POPOVER_PROPS: MenuButtonProps['popover'] = {\n  portal: true,\n  constrainSize: true,\n}\n\nexport function CollapseOverflowMenu(\n  props: Pick<\n    CollapseMenuProps,\n    'disableRestoreFocusOnClose' | 'menuButtonProps' | 'onMenuClose'\n  > & {menuOptionsArray: React.ReactElement[]; menuButton: React.ReactElement}\n) {\n  const {disableRestoreFocusOnClose, menuButton, menuButtonProps, menuOptionsArray, onMenuClose} =\n    props\n\n  return (\n    <MenuButton\n      __unstable_disableRestoreFocusOnClose={disableRestoreFocusOnClose}\n      id=\"menu-button\"\n      onClose={onMenuClose}\n      popover={MENU_BUTTON_POPOVER_PROPS}\n      {...menuButtonProps}\n      button={menuButton}\n      menu={\n        <Menu>\n          {menuOptionsArray.map((c, index) => {\n            const {\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              collapsedProps = {},\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              expandedProps = {},\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              tooltipProps = {},\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              tooltipText,\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              dividerBefore,\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              fontSize,\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              padding,\n              text,\n              icon,\n              selected,\n              ...rest\n            } = c.props\n\n            return (\n              <React.Fragment key={c.key}>\n                {dividerBefore && index !== 0 && <MenuDivider />}\n                <MenuItem text={text} icon={icon} pressed={selected} {...rest} />\n              </React.Fragment>\n            )\n          })}\n        </Menu>\n      }\n    />\n  )\n}\n","import {Flex} from '@sanity/ui'\nimport React, {useEffect, useState} from 'react'\n\ninterface ObserveElementProps {\n  children: React.ReactElement\n  options?: IntersectionObserverInit\n  callback: IntersectionObserverCallback\n}\n\nexport function ObserveElement(props: ObserveElementProps) {\n  const {callback, children, options, ...rest} = props\n  const [el, setEl] = useState<HTMLDivElement | null>(null)\n\n  useEffect(() => {\n    if (!el) return undefined\n\n    const io = new IntersectionObserver(callback, options)\n    io.observe(el)\n\n    return () => {\n      io.unobserve(el)\n      io.disconnect()\n    }\n  }, [el, callback, options])\n\n  return (\n    <Flex ref={setEl} {...rest}>\n      {children}\n    </Flex>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst DividerDiv = styled.div`\n  border-right: 1px solid var(--card-border-color);\n  height: auto;\n\n  &[data-hidden] {\n    opacity: 0;\n  }\n`\n\ninterface CollapseMenuDividerProps {\n  hidden?: boolean\n}\n\nexport function CollapseMenuDivider(props: CollapseMenuDividerProps) {\n  const {hidden, ...rest} = props\n\n  return (\n    <DividerDiv data-ui=\"CollapseMenuDivider\" data-hidden={hidden ? '' : undefined} {...rest} />\n  )\n}\n","import {EllipsisVerticalIcon} from '@sanity/icons'\nimport {Box, Button, Flex, MenuButtonProps, Text, Tooltip, useElementRect} from '@sanity/ui'\nimport React, {cloneElement, forwardRef, useCallback, useMemo, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport {CollapseOverflowMenu} from './CollapseOverflowMenu'\nimport {ObserveElement} from './ObserveElement'\nimport {CollapseMenuDivider} from './CollapseMenuDivider'\n\n/** @internal */\nexport interface CollapseMenuProps {\n  children: React.ReactNode\n  collapsed?: boolean\n  collapseText?: boolean\n  disableRestoreFocusOnClose?: boolean\n  gap?: number | number[]\n  menuButtonProps?: Omit<MenuButtonProps, 'id' | 'menu' | 'button'> & {\n    id?: string\n    button?: React.ReactElement\n  }\n  onMenuClose?: () => void\n}\n\nconst FOCUS_RING_PADDING = 3\n\nconst OPTION_STYLE = css`\n  list-style: none;\n  display: flex;\n  white-space: nowrap;\n\n  &[data-hidden='true'] {\n    opacity: 0;\n    visibility: hidden;\n  }\n`\n\nconst OuterFlex = styled(Flex)`\n  padding: ${FOCUS_RING_PADDING}px;\n  margin: -${FOCUS_RING_PADDING}px;\n  box-sizing: border-box;\n`\n\nconst RootFlex = styled(Flex)`\n  border-radius: inherit;\n  position: relative;\n`\n\nconst RowFlex = styled(Flex)`\n  width: max-content;\n\n  &[data-hidden='true'] {\n    height: 0px;\n    visibility: hidden;\n  }\n`\n\nconst OptionObserveElement = styled(ObserveElement)`\n  ${OPTION_STYLE}\n`\n\nconst OptionHiddenFlex = styled(Flex)`\n  ${OPTION_STYLE}\n`\n\nfunction _isReactElement(node: unknown): node is React.ReactElement {\n  return Boolean(node)\n}\n\n/** @internal */\nexport const CollapseMenu = forwardRef(function CollapseMenu(\n  props: CollapseMenuProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {\n    children: childrenProp,\n    collapsed,\n    collapseText = true,\n    disableRestoreFocusOnClose,\n    gap,\n    menuButtonProps,\n    onMenuClose,\n    ...rest\n  } = props\n  const [rootEl, setRootEl] = useState<HTMLDivElement | null>(null)\n  const [hiddenRowEl, setHiddenRowEl] = useState<HTMLDivElement | null>(null)\n  const rootRect = useElementRect(rootEl)\n  const [menuOptions, setMenuOptions] = useState<React.ReactElement[]>([])\n\n  const hasOverflow = useMemo(() => {\n    if (rootRect && rootEl && hiddenRowEl) {\n      return rootRect.width < hiddenRowEl.scrollWidth\n    }\n    return false\n  }, [hiddenRowEl, rootEl, rootRect])\n\n  const menuButton = useMemo(\n    () => menuButtonProps?.button || <Button icon={EllipsisVerticalIcon} mode=\"bleed\" />,\n    [menuButtonProps]\n  )\n\n  const intersectionOptions = useMemo(\n    () => ({\n      root: rootEl,\n      threshold: 1,\n      rootMargin: '2px',\n    }),\n    [rootEl]\n  )\n\n  const children = useMemo(\n    () => React.Children.toArray(childrenProp).filter(_isReactElement),\n    [childrenProp]\n  )\n\n  const menuOptionsArray = useMemo(\n    // eslint-disable-next-line max-nested-callbacks\n    () => children.filter(({key}) => menuOptions.find((o: React.ReactElement) => o.key === key)),\n    [children, menuOptions]\n  )\n\n  const menuIsVisible = useMemo(\n    () => collapsed || menuOptionsArray.length > 0,\n    [collapsed, menuOptionsArray.length]\n  )\n\n  const isInMenu = useCallback(\n    (childKey: any) => menuOptionsArray.some((o) => o.key === childKey),\n    [menuOptionsArray]\n  )\n\n  const handleIntersection = useCallback(\n    (e: IntersectionObserverEntry, child: React.ReactElement) => {\n      const exists = isInMenu(child.key)\n\n      if (!e.isIntersecting && !exists) {\n        setMenuOptions((prev) => [child, ...prev])\n      }\n\n      if (e.isIntersecting && exists) {\n        const updatedOptions = menuOptionsArray.filter(({key}) => key !== child.key)\n\n        setMenuOptions(updatedOptions)\n      }\n    },\n    [isInMenu, menuOptionsArray]\n  )\n\n  const items = useMemo(\n    () =>\n      children.map((child) => {\n        const {collapsedProps, expandedProps} = child.props\n        const modeProps = hasOverflow ? collapsedProps : expandedProps\n        const text = hasOverflow && collapseText ? undefined : child.props.text\n\n        return cloneElement(child, {\n          ...modeProps,\n          text: text,\n        })\n      }),\n    [children, collapseText, hasOverflow]\n  )\n\n  if (collapsed) {\n    return (\n      <CollapseOverflowMenu\n        disableRestoreFocusOnClose={disableRestoreFocusOnClose}\n        menuButton={menuButton}\n        menuButtonProps={menuButtonProps}\n        menuOptionsArray={children}\n        onMenuClose={onMenuClose}\n      />\n    )\n  }\n\n  return (\n    <OuterFlex\n      align=\"center\"\n      data-ui=\"CollapseMenu\"\n      overflow=\"hidden\"\n      sizing=\"border\"\n      ref={ref}\n      {...rest}\n    >\n      <RootFlex direction=\"column\" flex={1} justify=\"center\" ref={setRootEl}>\n        {/* Content */}\n        <RowFlex gap={gap}>\n          {items.map((child, index) => {\n            const {dividerBefore, tooltipText = '', tooltipProps = {}} = child.props\n            const hidden = isInMenu(child.key)\n\n            return (\n              <React.Fragment key={child.key}>\n                {dividerBefore && index !== 0 && <CollapseMenuDivider hidden={hidden} />}\n\n                <OptionObserveElement\n                  options={intersectionOptions}\n                  // eslint-disable-next-line react/jsx-no-bind\n                  callback={(e) => handleIntersection(e[0], child)}\n                  aria-hidden={hidden}\n                  data-hidden={hidden}\n                >\n                  <Tooltip\n                    portal\n                    disabled={!tooltipText}\n                    content={\n                      <Box padding={2} sizing=\"border\">\n                        <Text size={1}>{tooltipText}</Text>\n                      </Box>\n                    }\n                    {...tooltipProps}\n                  >\n                    <Flex>\n                      {cloneElement(child, {\n                        disabled: child.props.disabled || hidden,\n                        'aria-hidden': hidden,\n                      })}\n                    </Flex>\n                  </Tooltip>\n                </OptionObserveElement>\n              </React.Fragment>\n            )\n          })}\n        </RowFlex>\n\n        {/* Hidden row used to detect when to collapse/collapse the layout  */}\n        <RowFlex data-hidden aria-hidden=\"true\" gap={gap} ref={setHiddenRowEl}>\n          {children.map((child, index) => {\n            const {dividerBefore} = child.props\n\n            return (\n              <React.Fragment key={child.key}>\n                {dividerBefore && index !== 0 && <CollapseMenuDivider />}\n                <OptionHiddenFlex key={child.key}>\n                  {cloneElement(child, {\n                    disabled: true,\n                    'aria-hidden': true,\n                  })}\n                </OptionHiddenFlex>\n              </React.Fragment>\n            )\n          })}\n        </RowFlex>\n      </RootFlex>\n\n      {menuIsVisible && (\n        <Flex marginLeft={gap}>\n          <CollapseOverflowMenu\n            disableRestoreFocusOnClose={disableRestoreFocusOnClose}\n            menuButton={menuButton}\n            menuButtonProps={menuButtonProps}\n            menuOptionsArray={menuOptionsArray}\n            onMenuClose={onMenuClose}\n          />\n        </Flex>\n      )}\n    </OuterFlex>\n  )\n})\n","import {Button, ButtonProps, TooltipProps} from '@sanity/ui'\nimport React, {forwardRef} from 'react'\n\n/** @internal */\nexport interface CommonProps extends Omit<ButtonProps, 'text' | 'iconRight'> {\n  as?: React.ElementType | keyof JSX.IntrinsicElements\n  dividerBefore?: boolean\n  focused?: boolean\n  tooltipProps?: TooltipProps\n  tooltipText?: React.ReactNode\n}\n\n/** @internal */\nexport interface CollapseMenuButtonProps extends CommonProps {\n  collapsedProps?: Omit<CommonProps, 'text'>\n  expandedProps?: CommonProps\n  text: ButtonProps['text']\n}\n\n/** @internal */\nexport const CollapseMenuButton = forwardRef(function CollapseMenuButton(\n  props: CollapseMenuButtonProps & Omit<React.HTMLProps<HTMLButtonElement>, 'as'>,\n  ref: React.ForwardedRef<HTMLButtonElement>\n) {\n  const {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    collapsedProps = {},\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    expandedProps = {},\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    tooltipProps = {},\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    tooltipText,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    dividerBefore,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ...rest\n  } = props\n\n  return <Button data-ui=\"CollapseMenuButton\" {...rest} ref={ref} />\n})\n","import React, {useMemo} from 'react'\nimport styled from 'styled-components'\n\ninterface Props {\n  icon: string\n  active: boolean\n}\n\nconst CustomIconDiv = styled.div`\n  width: 1em;\n  height: 1em;\n  border-radius: inherit;\n  background-origin: content-box;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  transform: scale(0.7);\n`\n\nexport function CustomIcon(props: Props) {\n  const {icon, active} = props\n\n  const inlineStyle = useMemo(\n    () => ({\n      backgroundImage: `url(${icon})`,\n      filter: active ? 'invert(100%)' : 'invert(0%)',\n    }),\n    [active, icon]\n  )\n\n  return <CustomIconDiv style={inlineStyle} />\n}\n","import {\n  BlockElementIcon,\n  BoldIcon,\n  CodeIcon,\n  InlineElementIcon,\n  ItalicIcon,\n  LinkIcon,\n  OlistIcon,\n  StrikethroughIcon,\n  UnderlineIcon,\n  UnknownIcon,\n  UlistIcon,\n} from '@sanity/icons'\nimport {\n  HotkeyOptions,\n  PortableTextEditor,\n  PortableTextFeature,\n  PortableTextFeatures,\n} from '@sanity/portable-text-editor'\nimport {get} from 'lodash'\nimport React from 'react'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {FIXME} from '../../../../FIXME'\nimport {BlockItem, BlockStyleItem, PTEToolbarAction, PTEToolbarActionGroup} from './types'\nimport {CustomIcon} from './CustomIcon'\n\nfunction getPTEFormatActions(\n  editor: PortableTextEditor,\n  disabled: boolean,\n  hotkeyOpts: HotkeyOptions\n): PTEToolbarAction[] {\n  const features = PortableTextEditor.getPortableTextFeatures(editor)\n  return features.decorators.map((decorator) => {\n    const shortCutKey = Object.keys(hotkeyOpts.marks || {}).find(\n      (key) => hotkeyOpts.marks?.[key] === decorator.value\n    )\n\n    let hotkeys: string[] = []\n    if (shortCutKey) {\n      hotkeys = [shortCutKey]\n    }\n\n    return {\n      type: 'format',\n      disabled: disabled,\n      icon: decorator.blockEditor?.icon,\n      key: decorator.value,\n      handle: (): void => {\n        PortableTextEditor.toggleMark(editor, decorator.value)\n        PortableTextEditor.focus(editor)\n      },\n      hotkeys,\n      title: decorator.title,\n    }\n  })\n}\n\nfunction getPTEListActions(editor: PortableTextEditor, disabled: boolean): PTEToolbarAction[] {\n  const features = PortableTextEditor.getPortableTextFeatures(editor)\n  return features.lists.map((listItem: PortableTextFeature) => {\n    return {\n      type: 'listStyle',\n      key: listItem.value,\n      disabled: disabled,\n      icon: listItem.blockEditor?.icon,\n      handle: (): void => {\n        PortableTextEditor.toggleList(editor, listItem.value)\n      },\n      title: listItem.title,\n    }\n  })\n}\n\nfunction getAnnotationIcon(item: PortableTextFeature): React.ComponentType | string | undefined {\n  return (\n    get(item, 'icon') ||\n    get(item, 'blockEditor.icon') ||\n    get(item, 'type.icon') ||\n    get(item, 'type.to.icon') ||\n    get(item, 'type.to[0].icon')\n  )\n}\n\nfunction getPTEAnnotationActions(\n  editor: PortableTextEditor,\n  disabled: boolean,\n  onInsert: (type: ObjectSchemaType) => void\n): PTEToolbarAction[] {\n  const features = PortableTextEditor.getPortableTextFeatures(editor)\n  const focusChild = PortableTextEditor.focusChild(editor)\n  const hasText = focusChild && focusChild.text\n  return features.annotations.map((item) => {\n    return {\n      type: 'annotation',\n      disabled: !hasText || disabled,\n      icon: getAnnotationIcon(item),\n      key: item.value,\n      handle: (active?: boolean): void => {\n        if (active) {\n          PortableTextEditor.removeAnnotation(editor, item.type)\n          PortableTextEditor.focus(editor)\n        } else {\n          onInsert(item.type as FIXME)\n        }\n      },\n      title: item.title,\n    }\n  })\n}\n\nexport function getPTEToolbarActionGroups(\n  editor: PortableTextEditor,\n  disabled: boolean,\n  onInsertAnnotation: (type: ObjectSchemaType) => void,\n  hotkeyOpts: HotkeyOptions\n): PTEToolbarActionGroup[] {\n  return [\n    {name: 'format', actions: getPTEFormatActions(editor, disabled, hotkeyOpts)},\n    {name: 'list', actions: getPTEListActions(editor, disabled)},\n    {name: 'annotation', actions: getPTEAnnotationActions(editor, disabled, onInsertAnnotation)},\n  ]\n}\n\nexport function getBlockStyles(features: PortableTextFeatures): BlockStyleItem[] {\n  return features.styles.map((style: PortableTextFeature) => {\n    return {\n      key: `style-${style.value}`,\n      style: style.value,\n      styleComponent: style && style.blockEditor && style.blockEditor.render,\n      title: style.title,\n    }\n  })\n}\n\nfunction getInsertMenuIcon(\n  type: ObjectSchemaType,\n  fallbackIcon: React.ComponentType\n): React.ComponentType {\n  const referenceIcon = get(type, 'to[0].icon')\n\n  return type.icon || (type.type && type.type.icon) || referenceIcon || fallbackIcon\n}\n\nexport function getInsertMenuItems(\n  features: PortableTextFeatures,\n  disabled: boolean,\n  onInsertBlock: (type: ObjectSchemaType) => void,\n  onInsertInline: (type: ObjectSchemaType) => void\n): BlockItem[] {\n  const blockItems = features.types.blockObjects.map(\n    (type, index): BlockItem => ({\n      handle: () => onInsertBlock(type as FIXME),\n      icon: getInsertMenuIcon(type as FIXME, BlockElementIcon),\n      inline: false,\n      key: `block-${index}`,\n      type: type as FIXME,\n    })\n  )\n\n  const inlineItems = features.types.inlineObjects.map(\n    (type, index): BlockItem => ({\n      handle: () => onInsertInline(type as FIXME),\n      icon: getInsertMenuIcon(type as FIXME, InlineElementIcon),\n      inline: true,\n      key: `inline-${index}`,\n      type: type as FIXME,\n    })\n  )\n\n  // Do not include items that are supposed to be hidden\n  const filteredBlockItems = blockItems.concat(inlineItems).filter((item) => !item.type?.hidden)\n\n  return filteredBlockItems\n}\n\nconst annotationIcons: Record<string, React.ComponentType> = {\n  link: LinkIcon,\n}\n\nconst formatIcons: Record<string, React.ComponentType> = {\n  strong: BoldIcon,\n  em: ItalicIcon,\n  'strike-through': StrikethroughIcon,\n  underline: UnderlineIcon,\n  code: CodeIcon,\n}\n\nconst listStyleIcons: Record<string, React.ComponentType> = {\n  number: OlistIcon,\n  bullet: UlistIcon,\n}\n\nexport function getActionIcon(action: PTEToolbarAction, active: boolean) {\n  if (action.icon) {\n    if (typeof action.icon === 'string') {\n      return <CustomIcon active={active} icon={action.icon} />\n    }\n\n    return action.icon\n  }\n\n  if (action.type === 'annotation') {\n    return annotationIcons[action.key] || UnknownIcon\n  }\n\n  if (action.type === 'listStyle') {\n    return listStyleIcons[action.key] || UnknownIcon\n  }\n\n  return formatIcons[action.key] || UnknownIcon\n}\n","import {\n  HotkeyOptions,\n  PortableTextBlock,\n  PortableTextChild,\n  PortableTextEditor,\n  PortableTextFeatures,\n  usePortableTextEditor,\n  usePortableTextEditorSelection,\n} from '@sanity/portable-text-editor'\nimport {ObjectSchemaType, Path} from '@sanity/types'\nimport {useCallback, useMemo} from 'react'\nimport {FIXME} from '../../../../FIXME'\nimport {useUnique} from '../../../../util'\nimport {getPTEToolbarActionGroups} from './helpers'\nimport {BlockStyleItem, PTEToolbarAction, PTEToolbarActionGroup} from './types'\n\nexport function useFocusBlock(): PortableTextBlock | undefined {\n  const editor = usePortableTextEditor()\n  const selection = usePortableTextEditorSelection()\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  return useMemo(() => PortableTextEditor.focusBlock(editor), [editor, selection]) // selection must be an additional dep here\n}\n\nexport function useFocusChild(): PortableTextChild | undefined {\n  const editor = usePortableTextEditor()\n  const selection = usePortableTextEditorSelection()\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  return useMemo(() => PortableTextEditor.focusChild(editor), [editor, selection]) // selection must be an additional dep here\n}\n\nexport function useFeatures(): PortableTextFeatures {\n  const editor = usePortableTextEditor()\n\n  return useMemo(() => PortableTextEditor.getPortableTextFeatures(editor), [editor])\n}\n\nexport function useActionGroups({\n  hotkeys,\n  onMemberOpen,\n  resolveInitialValue,\n  disabled,\n}: {\n  hotkeys: HotkeyOptions\n  onMemberOpen: (relativePath: Path) => void\n  resolveInitialValue: (type: ObjectSchemaType) => FIXME\n  disabled: boolean\n}): PTEToolbarActionGroup[] {\n  const editor = usePortableTextEditor()\n\n  const handleInsertAnnotation = useCallback(\n    async (type: ObjectSchemaType) => {\n      const initialValue = await resolveInitialValue(type)\n      const paths = PortableTextEditor.addAnnotation(editor, type as FIXME, initialValue)\n      if (paths && paths.markDefPath) {\n        onMemberOpen(paths.markDefPath)\n      }\n    },\n    [editor, onMemberOpen, resolveInitialValue]\n  )\n\n  return useMemo(\n    () =>\n      editor ? getPTEToolbarActionGroups(editor, disabled, handleInsertAnnotation, hotkeys) : [],\n    [disabled, editor, handleInsertAnnotation, hotkeys]\n  )\n}\n\nexport function useActiveActionKeys({\n  actions,\n}: {\n  actions: Array<PTEToolbarAction & {firstInGroup?: true}>\n}): string[] {\n  const editor = usePortableTextEditor()\n  const selection = usePortableTextEditorSelection()\n\n  return useUnique(\n    useMemo(\n      () => {\n        const activeAnnotationKeys = PortableTextEditor.activeAnnotations(editor).map(\n          (a) => a._type\n        )\n\n        return actions\n          .filter((a) => {\n            if (a.type === 'annotation') {\n              return activeAnnotationKeys.includes(a.key)\n            }\n\n            if (a.type === 'listStyle') {\n              return PortableTextEditor.hasListStyle(editor, a.key)\n            }\n\n            return PortableTextEditor.isMarkActive(editor, a.key)\n          })\n          .map((a) => a.key)\n      },\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      [\n        editor,\n        // This is needed so that active actions update as `selection` changes\n        selection,\n      ]\n    )\n  )\n}\n\nexport function useActiveStyleKeys({items}: {items: BlockStyleItem[]}): string[] {\n  const editor = usePortableTextEditor()\n  const focusBlock = useFocusBlock()\n  const selection = usePortableTextEditorSelection()\n\n  return useUnique(\n    useMemo(\n      () =>\n        items.filter((i) => PortableTextEditor.hasBlockStyle(editor, i.style)).map((i) => i.style),\n      //  eslint-disable-next-line react-hooks/exhaustive-deps\n      [\n        focusBlock,\n        // This is needed so that active styles update as `selection` changes\n        selection,\n      ]\n    )\n  )\n}\n","import React, {memo, useCallback, useMemo} from 'react'\nimport {Button, ButtonProps, PopoverProps} from '@sanity/ui'\nimport {EllipsisVerticalIcon} from '@sanity/icons'\nimport {PortableTextEditor, usePortableTextEditor} from '@sanity/portable-text-editor'\nimport {CollapseMenu, CollapseMenuButton} from '../../../../components/collapseMenu'\nimport {PTEToolbarAction, PTEToolbarActionGroup} from './types'\nimport {useActiveActionKeys, useFeatures, useFocusBlock} from './hooks'\nimport {getActionIcon} from './helpers'\n\nconst CollapseMenuMemo = memo(CollapseMenu)\n\nconst MENU_POPOVER_PROPS: PopoverProps = {constrainSize: true, portal: true}\nconst COLLAPSE_BUTTON_PROPS: ButtonProps = {padding: 2, mode: 'bleed'}\n\ninterface ActionMenuProps {\n  disabled: boolean\n  groups: PTEToolbarActionGroup[]\n  isFullscreen?: boolean\n  collapsed?: boolean\n}\n\nexport const ActionMenu = memo(function ActionMenu(props: ActionMenuProps) {\n  const {disabled: disabledProp, groups, isFullscreen, collapsed} = props\n  const focusBlock = useFocusBlock()\n  const features = useFeatures()\n  const editor = usePortableTextEditor()\n\n  const isVoidBlock = focusBlock?._type !== features.types.block.name\n  const isEmptyTextBlock =\n    !isVoidBlock && focusBlock?.children.length === 1 && focusBlock?.children[0].text === ''\n\n  const disabled = disabledProp || isVoidBlock\n\n  const actions: Array<PTEToolbarAction & {firstInGroup?: true}> = useMemo(\n    () =>\n      groups.reduce<Array<PTEToolbarAction & {firstInGroup?: true}>>((acc, group) => {\n        return acc.concat(\n          group.actions.map(\n            // eslint-disable-next-line max-nested-callbacks\n            (action: PTEToolbarAction, actionIndex) => {\n              if (actionIndex === 0) return {...action, firstInGroup: true}\n              return action\n            }\n          )\n        )\n      }, []),\n    [groups]\n  )\n\n  const activeKeys = useActiveActionKeys({actions})\n\n  const handleMenuClose = useCallback(() => {\n    PortableTextEditor.focus(editor)\n  }, [editor])\n\n  const children = useMemo(\n    () =>\n      actions.map((action) => {\n        const annotationDisabled = action.type === 'annotation' && isEmptyTextBlock\n        const active = activeKeys.includes(action.key)\n        return (\n          <CollapseMenuButton\n            disabled={disabled || annotationDisabled}\n            {...COLLAPSE_BUTTON_PROPS}\n            dividerBefore={action.firstInGroup}\n            icon={getActionIcon(action, active)}\n            key={action.key}\n            // eslint-disable-next-line react/jsx-no-bind\n            onClick={() => action.handle(active)}\n            selected={active}\n            text={action.title || action.key}\n            tooltipText={action.title || action.key}\n            tooltipProps={{\n              disabled: disabled || annotationDisabled,\n              placement: isFullscreen ? 'bottom' : 'top',\n              portal: 'default',\n            }}\n          />\n        )\n      }),\n    [actions, activeKeys, disabled, isEmptyTextBlock, isFullscreen]\n  )\n\n  const menuButtonProps = useMemo(\n    () => ({\n      button: <Button icon={EllipsisVerticalIcon} mode=\"bleed\" padding={2} disabled={disabled} />,\n      popover: MENU_POPOVER_PROPS,\n    }),\n\n    [disabled]\n  )\n\n  return (\n    <CollapseMenuMemo\n      collapsed={collapsed}\n      disableRestoreFocusOnClose\n      gap={1}\n      menuButtonProps={menuButtonProps}\n      onMenuClose={handleMenuClose}\n    >\n      {children}\n    </CollapseMenuMemo>\n  )\n})\n","import React, {memo, useCallback, useEffect, useMemo, useState} from 'react'\nimport {PortableTextEditor, usePortableTextEditor} from '@sanity/portable-text-editor'\nimport {Button, Menu, MenuButton, MenuButtonProps, MenuItem, Text} from '@sanity/ui'\nimport {SelectIcon} from '@sanity/icons'\nimport styled from 'styled-components'\nimport {\n  Heading1,\n  Heading2,\n  Heading3,\n  Heading4,\n  Heading5,\n  Heading6,\n  BlockQuote,\n  Normal,\n} from '../text/textStyles'\nimport {useActiveStyleKeys, useFeatures, useFocusBlock} from './hooks'\nimport {BlockStyleItem} from './types'\n\nconst MenuButtonMemo = memo(MenuButton)\n\ninterface BlockStyleSelectProps {\n  disabled: boolean\n  items: BlockStyleItem[]\n}\n\nconst StyledMenuItem = styled(MenuItem)`\n  // Change the border color variable used by BlockQuote\n  // to make the border visible when the MenuItem is selected\n  &[data-selected] {\n    [data-option='blockquote'] {\n      --card-border-color: var(--card-muted-fg-color);\n    }\n  }\n`\n\nconst StyledButton = styled(Button)`\n  width: 100%;\n`\n\nconst MENU_POPOVER_PROPS: MenuButtonProps['popover'] = {\n  constrainSize: true,\n  placement: 'bottom-start',\n  portal: 'default',\n}\n\nconst TEXT_STYLE_OPTIONS: Record<string, (title: React.ReactNode) => React.ReactNode> = {\n  h1: (title) => <Heading1>{title}</Heading1>,\n  h2: (title) => <Heading2>{title}</Heading2>,\n  h3: (title) => <Heading3>{title}</Heading3>,\n  h4: (title) => <Heading4>{title}</Heading4>,\n  h5: (title) => <Heading5>{title}</Heading5>,\n  h6: (title) => <Heading6>{title}</Heading6>,\n  normal: (title) => <Normal>{title}</Normal>,\n  blockquote: (title) => <BlockQuote data-option=\"blockquote\">{title}</BlockQuote>,\n}\n\nconst TEXT_STYLE_KEYS = Object.keys(TEXT_STYLE_OPTIONS)\n\nconst preventDefault = (event: React.MouseEvent<HTMLButtonElement>) => event.preventDefault()\n\nconst emptyStyle: BlockStyleItem = {\n  key: 'style-none',\n  style: '',\n  title: 'No style',\n}\n\nexport const BlockStyleSelect = memo(function BlockStyleSelect(\n  props: BlockStyleSelectProps\n): JSX.Element {\n  const {disabled, items: itemsProp} = props\n  const editor = usePortableTextEditor()\n  const features = useFeatures()\n  const focusBlock = useFocusBlock()\n  const [changed, setChanged] = useState(false)\n\n  const _disabled =\n    disabled || (focusBlock ? features.types.block.name !== focusBlock._type : false)\n\n  // @todo: Explain what this does\n  const activeKeys = useActiveStyleKeys({items: itemsProp})\n\n  const {activeItems, items} = useMemo(() => {\n    const _activeItems = itemsProp.filter((item) => activeKeys.includes(item.style))\n\n    let _items = itemsProp\n\n    if (_activeItems.length === 0 && _items.length > 1) {\n      _items = _items.concat([emptyStyle])\n      _activeItems.push(emptyStyle)\n    }\n\n    return {activeItems: _activeItems, items: _items}\n  }, [activeKeys, itemsProp])\n\n  const menuButtonText = useMemo(() => {\n    if (activeItems.length > 1) return 'Multiple'\n    if (activeItems.length === 1) return activeItems[0].title\n    return emptyStyle.title\n  }, [activeItems])\n\n  const handleChange = useCallback(\n    (item: BlockStyleItem): void => {\n      if (focusBlock && item.style !== focusBlock.style) {\n        PortableTextEditor.toggleBlockStyle(editor, item.style)\n      }\n      setChanged(true)\n    },\n    [editor, focusBlock]\n  )\n\n  const renderOption = useCallback((style: string, title: string) => {\n    const hasTextStyle = TEXT_STYLE_KEYS.includes(style)\n    const renderStyle = TEXT_STYLE_OPTIONS[style]\n\n    if (hasTextStyle) {\n      return renderStyle(title)\n    }\n\n    return <Text>{title}</Text>\n  }, [])\n\n  const button = useMemo(\n    () => (\n      <StyledButton\n        disabled={_disabled}\n        iconRight={SelectIcon}\n        mode=\"bleed\"\n        onClick={preventDefault}\n        padding={2}\n        text={menuButtonText}\n      />\n    ),\n    [_disabled, menuButtonText]\n  )\n\n  const menu = useMemo(\n    () => (\n      <Menu disabled={_disabled}>\n        {items.map((item) => {\n          return (\n            <StyledMenuItem\n              key={item.key}\n              pressed={activeItems.includes(item)}\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={_disabled ? undefined : () => handleChange(item)}\n            >\n              {renderOption(item.style, item?.title || item.style)}\n            </StyledMenuItem>\n          )\n        })}\n      </Menu>\n    ),\n    [_disabled, activeItems, handleChange, items, renderOption]\n  )\n\n  // Set focus back into the editor when the new value get's in\n  // This must be the last registered hook or it will not be able to focus properly.\n  useEffect(() => {\n    if (changed) {\n      PortableTextEditor.focus(editor)\n      setChanged(false)\n    }\n  }, [activeItems, changed, editor])\n\n  return (\n    <MenuButtonMemo\n      popover={MENU_POPOVER_PROPS}\n      id=\"block-style-select\"\n      button={button}\n      menu={menu}\n    />\n  )\n})\n","import React, {memo, useCallback, useMemo} from 'react'\nimport {AddIcon} from '@sanity/icons'\nimport {Button, PopoverProps} from '@sanity/ui'\nimport {PortableTextEditor, usePortableTextEditor} from '@sanity/portable-text-editor'\nimport {CollapseMenu, CollapseMenuButton} from '../../../../components/collapseMenu'\nimport {BlockItem} from './types'\nimport {useFeatures, useFocusBlock} from './hooks'\n\nconst CollapseMenuMemo = memo(CollapseMenu)\n\nconst MENU_POPOVER_PROPS: PopoverProps = {constrainSize: true, portal: true}\n\ninterface InsertMenuProps {\n  disabled: boolean\n  items: BlockItem[]\n  isFullscreen?: boolean\n  collapsed?: boolean\n}\n\nexport const InsertMenu = memo(function InsertMenu(props: InsertMenuProps) {\n  const {disabled, items, isFullscreen, collapsed} = props\n  const features = useFeatures()\n  const focusBlock = useFocusBlock()\n  const editor = usePortableTextEditor()\n\n  const isVoidFocus = focusBlock && focusBlock._type !== features.types.block.name\n\n  const handleMenuClose = useCallback(() => {\n    PortableTextEditor.focus(editor)\n  }, [editor])\n\n  const children = useMemo(() => {\n    return items.map((item) => {\n      const title = item.type.title || item.type.type?.name\n\n      return (\n        <CollapseMenuButton\n          aria-label={`Insert ${title}${item.inline ? ' (inline)' : ' (block)'}`}\n          padding={2}\n          mode=\"bleed\"\n          disabled={disabled || (isVoidFocus && item.inline === true)}\n          icon={item.icon}\n          key={item.key}\n          // eslint-disable-next-line react/jsx-no-bind, react/jsx-handler-names\n          onClick={item.handle}\n          text={title}\n          tooltipText={`Insert ${title}`}\n          tooltipProps={{\n            disabled,\n            placement: isFullscreen ? 'bottom' : 'top',\n            portal: 'default',\n          }}\n        />\n      )\n    })\n  }, [items, disabled, isVoidFocus, isFullscreen])\n\n  const menuButtonProps = useMemo(\n    () => ({\n      button: <Button icon={AddIcon} mode=\"bleed\" padding={2} disabled={disabled} />,\n      popover: MENU_POPOVER_PROPS,\n    }),\n\n    [disabled]\n  )\n\n  return (\n    <CollapseMenuMemo\n      collapsed={collapsed}\n      collapseText={false}\n      disableRestoreFocusOnClose\n      gap={1}\n      menuButtonProps={menuButtonProps}\n      onMenuClose={handleMenuClose}\n    >\n      {children}\n    </CollapseMenuMemo>\n  )\n})\n","import {\n  HotkeyOptions,\n  usePortableTextEditor,\n  usePortableTextEditorSelection,\n  PortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport React, {memo, useCallback, useMemo, useState} from 'react'\nimport {ObjectSchemaType, Path, SchemaType} from '@sanity/types'\nimport {Box, Button, Flex, Hotkeys, Text, Tooltip, useElementRect, useToast} from '@sanity/ui'\nimport {CollapseIcon, ExpandIcon} from '@sanity/icons'\nimport styled, {css} from 'styled-components'\nimport {FIXME} from '../../../../FIXME'\nimport {useRovingFocus} from '../../../../components'\nimport {useResolveInitialValueForType} from '../../../../store'\nimport {ActionMenu} from './ActionMenu'\nimport {BlockStyleSelect} from './BlockStyleSelect'\nimport {InsertMenu} from './InsertMenu'\nimport {getBlockStyles, getInsertMenuItems} from './helpers'\nimport {useActionGroups, useFeatures} from './hooks'\nimport {BlockItem, BlockStyleItem, PTEToolbarActionGroup} from './types'\n\ninterface ToolbarProps {\n  hotkeys: HotkeyOptions\n  isFullscreen: boolean\n  readOnly?: boolean\n  onMemberOpen: (relativePath: Path) => void\n  onToggleFullscreen: () => void\n}\n\nconst RootFlex = styled(Flex)`\n  width: 100%;\n`\n\nconst StyleSelectBox = styled(Box)`\n  width: 8em;\n`\n\nconst StyleSelectFlex = styled(Flex)`\n  border-right: 1px solid var(--card-border-color);\n`\n\nconst ActionMenuBox = styled(Box)<{$withInsertMenu: boolean}>`\n  ${({$withInsertMenu}) =>\n    $withInsertMenu &&\n    css`\n      max-width: max-content;\n      border-right: 1px solid var(--card-border-color);\n    `}\n`\n\nconst FullscreenButtonBox = styled(Box)`\n  border-left: 1px solid var(--card-border-color);\n`\n\nconst SLOW_INITIAL_VALUE_LIMIT = 300\n\nconst IS_MAC =\n  typeof window != 'undefined' && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform)\n\nconst InnerToolbar = memo(function InnerToolbar({\n  actionGroups,\n  blockStyles,\n  disabled,\n  insertMenuItems,\n  isFullscreen,\n  onToggleFullscreen,\n}: {\n  actionGroups: PTEToolbarActionGroup[]\n  blockStyles: BlockStyleItem[]\n  disabled: boolean\n  insertMenuItems: BlockItem[]\n  isFullscreen: boolean\n  onToggleFullscreen: () => void\n}) {\n  const actionsLen = actionGroups.reduce((acc, x) => acc + x.actions.length, 0)\n  const showActionMenu = actionsLen > 0\n  const showInsertMenu = insertMenuItems.length > 0\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n  const rootElementRect = useElementRect(rootElement)\n\n  const collapsed = rootElementRect ? rootElementRect?.width < 400 : false\n  const showBlockStyleSelect = blockStyles.length > 1\n\n  useRovingFocus({\n    rootElement: rootElement,\n  })\n\n  return (\n    <RootFlex align=\"center\" ref={setRootElement}>\n      {showBlockStyleSelect && (\n        <StyleSelectFlex flex={collapsed ? 1 : undefined}>\n          <StyleSelectBox padding={isFullscreen ? 2 : 1}>\n            <BlockStyleSelect disabled={disabled} items={blockStyles} />\n          </StyleSelectBox>\n        </StyleSelectFlex>\n      )}\n\n      <Flex flex={1}>\n        {showActionMenu && (\n          <ActionMenuBox\n            flex={collapsed ? undefined : 1}\n            padding={isFullscreen ? 2 : 1}\n            $withInsertMenu={showInsertMenu}\n          >\n            <ActionMenu\n              disabled={disabled}\n              collapsed={collapsed}\n              groups={actionGroups}\n              isFullscreen={isFullscreen}\n            />\n          </ActionMenuBox>\n        )}\n\n        {showInsertMenu && (\n          <Box flex={collapsed ? undefined : 1} padding={isFullscreen ? 2 : 1}>\n            <InsertMenu\n              disabled={disabled}\n              collapsed={collapsed}\n              items={insertMenuItems}\n              isFullscreen={isFullscreen}\n            />\n          </Box>\n        )}\n      </Flex>\n      <FullscreenButtonBox padding={isFullscreen ? 2 : 1}>\n        <Tooltip\n          content={\n            <Flex align=\"center\" padding={1}>\n              <Box flex={1} paddingX={1}>\n                <Text size={1}>{`${isFullscreen ? 'Collapse' : 'Expand'} editor`}</Text>\n              </Box>\n              <Box marginLeft={1}>\n                <Hotkeys keys={[`${IS_MAC ? 'Cmd' : 'Ctrl'}`, 'Enter']} />\n              </Box>\n            </Flex>\n          }\n          placement={isFullscreen ? 'bottom' : 'top'}\n          portal=\"default\"\n        >\n          <Button\n            padding={2}\n            icon={isFullscreen ? CollapseIcon : ExpandIcon}\n            mode=\"bleed\"\n            onClick={onToggleFullscreen}\n          />\n        </Tooltip>\n      </FullscreenButtonBox>\n    </RootFlex>\n  )\n})\n\nexport function Toolbar(props: ToolbarProps) {\n  const {hotkeys, isFullscreen, readOnly, onMemberOpen, onToggleFullscreen} = props\n  const features = useFeatures()\n  const editor = usePortableTextEditor()\n  const selection = usePortableTextEditorSelection()\n  const resolveInitialValueForType = useResolveInitialValueForType()\n  const disabled = readOnly || !selection\n\n  const {push} = useToast()\n\n  const resolveInitialValue = useCallback(\n    (type: ObjectSchemaType) => {\n      let isSlow = false\n      const slowTimer = setTimeout(() => {\n        isSlow = true\n        push({\n          id: 'resolving-initial-value',\n          status: 'info',\n          title: 'Resolving initial value…',\n        })\n      }, SLOW_INITIAL_VALUE_LIMIT)\n      return resolveInitialValueForType(type as unknown as SchemaType, {})\n        .then((value) => {\n          if (isSlow) {\n            // I found no way to close an existing toast, so this will replace the message in the\n            // \"Resolving initial value…\"-toast and then make sure it gets closed.\n            push({\n              id: 'resolving-initial-value',\n              status: 'info',\n              duration: 500,\n              title: 'Initial value resolved',\n            })\n          }\n          return value\n        })\n        .catch((error) => {\n          push({\n            title: `Could not resolve initial value`,\n            id: 'resolving-initial-value',\n            description: `Unable to resolve initial value for type: ${type.name}: ${error.message}.`,\n            status: 'error',\n          })\n\n          return undefined\n        })\n        .finally(() => clearTimeout(slowTimer))\n    },\n    [push]\n  )\n\n  const handleInsertBlock = useCallback(\n    async (type: ObjectSchemaType) => {\n      const initialValue = await resolveInitialValue(type)\n      const path = PortableTextEditor.insertBlock(editor, type as FIXME, initialValue)\n      if (path) {\n        onMemberOpen(path)\n      }\n    },\n    [editor, onMemberOpen, resolveInitialValue]\n  )\n\n  const handleInsertInline = useCallback(\n    async (type: ObjectSchemaType) => {\n      const initialValue = await resolveInitialValue(type)\n      const path = PortableTextEditor.insertChild(editor, type as FIXME, initialValue)\n      if (path) {\n        onMemberOpen(path)\n      }\n    },\n    [editor, onMemberOpen, resolveInitialValue]\n  )\n\n  const actionGroups = useActionGroups({\n    hotkeys,\n    onMemberOpen,\n    resolveInitialValue,\n    disabled: true,\n  })\n\n  const blockStyles = useMemo(() => getBlockStyles(features), [features])\n\n  const insertMenuItems = useMemo(\n    () => getInsertMenuItems(features, disabled, handleInsertBlock, handleInsertInline),\n    [disabled, features, handleInsertBlock, handleInsertInline]\n  )\n\n  return (\n    <InnerToolbar\n      actionGroups={actionGroups}\n      blockStyles={blockStyles}\n      disabled={disabled}\n      insertMenuItems={insertMenuItems}\n      isFullscreen={isFullscreen}\n      onToggleFullscreen={onToggleFullscreen}\n    />\n  )\n}\n","import {Card, Container, rem} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {ScrollContainer} from '../../../components/scroll'\nimport {createListName, TEXT_LEVELS} from './text'\n\nexport const Root = styled(Card)<{$fullscreen: boolean}>`\n  height: ${({$fullscreen}) => ($fullscreen ? '100%' : '15em')};\n\n  &:not([hidden]) {\n    display: flex;\n  }\n\n  flex-direction: column;\n`\n\nexport const ToolbarCard = styled(Card)`\n  z-index: 10;\n  line-height: 0;\n`\n\nexport const EditableCard = styled(Card)`\n  position: relative;\n  overflow: hidden;\n\n  & > [data-portal] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    pointer-events: none;\n\n    & > * {\n      pointer-events: initial;\n    }\n  }\n\n  &::selection,\n  *::selection {\n    background-color: transparent;\n  }\n`\n\nexport const Scroller = styled(ScrollContainer)`\n  position: relative;\n  overflow: auto;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n\n  & > * {\n    flex: 1;\n    min-height: auto;\n  }\n`\n\nexport const EditableContainer = styled(Container)`\n  /* @todo: calculate from theme */\n  /* max-width: 728px; */\n`\n\nexport const EditableWrapper = styled(Card)<{$isFullscreen: boolean; $readOnly?: boolean}>`\n  height: 100%;\n  width: 100%;\n  counter-reset: ${TEXT_LEVELS.map((l) => createListName(l)).join(' ')};\n  overflow: hidden;\n\n  & > div {\n    height: 100%;\n  }\n\n  & .pt-editable {\n    display: block;\n    width: 100%;\n    height: 100%;\n\n    ${TEXT_LEVELS.map((l) => {\n      return css`\n        & > .pt-list-item-number[class~='pt-list-item-level-${l}'] {\n          counter-increment: ${createListName(l)};\n        }\n      `\n    })}\n\n    & > .pt-list-item-bullet + .pt-list-item-number,\n    & > .pt-list-item-number + .pt-list-item-bullet {\n      margin-top: ${({theme}) => theme.sanity.space[3]}px;\n      counter-reset: ${TEXT_LEVELS.map((l) => createListName(l)).join(' ')};\n    }\n\n    & > :not(.pt-list-item) + .pt-list-item {\n      margin-top: ${({theme}) => theme.sanity.space[2]}px;\n    }\n\n    /* Reset the list count if the element is not a numbered list item */\n    & > :not(.pt-list-item-number) {\n      counter-reset: ${TEXT_LEVELS.map((l) => createListName(l)).join(' ')};\n    }\n\n    ${TEXT_LEVELS.slice(1).map((l) => {\n      return css`\n        & > .pt-list-item-level-${l} + .pt-list-item-level-${l - 1} {\n          counter-reset: ${createListName(l)};\n        }\n      `\n    })}\n\n    & > .pt-list-item + :not(.pt-list-item) {\n      margin-top: ${({theme}) => theme.sanity.space[3]}px;\n    }\n\n    & > :first-child {\n      padding-top: ${({$isFullscreen, theme}) => theme.sanity.space[$isFullscreen ? 5 : 3]}px;\n    }\n\n    & > :last-child {\n      padding-bottom: ${({$isFullscreen, theme}) => theme.sanity.space[$isFullscreen ? 9 : 5]}px;\n    }\n\n    /* & > .pt-block {\n      & .pt-inline-object {\n      }\n    } */\n\n    & .pt-drop-indicator {\n      pointer-events: none;\n      border: 1px solid var(--card-focus-ring-color) !important;\n      height: 0px !important;\n      border-radius: 1px;\n      margin-top: -3px;\n      left: calc(\n        ${({$isFullscreen, theme}) =>\n            $isFullscreen ? rem(theme.sanity.space[5]) : rem(theme.sanity.space[3])} - 1px\n      );\n      right: calc(\n        ${({$isFullscreen, theme}) =>\n            $isFullscreen ? rem(theme.sanity.space[5]) : rem(theme.sanity.space[3])} - 1px\n      );\n      width: calc(\n        100% -\n          ${({$isFullscreen, theme}) =>\n            $isFullscreen ? rem(theme.sanity.space[5] * 2) : rem(theme.sanity.space[3] * 2)} + 2px\n      ) !important;\n    }\n  }\n`\n","import {usePortableTextEditor} from '@sanity/portable-text-editor'\nimport {useMemo} from 'react'\n\nexport function useSpellcheck(): boolean {\n  const editor = usePortableTextEditor()\n  return useMemo(() => {\n    // Chrome 96. has serious perf. issues with spellchecking\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=1271918\n    // This issue is verified fixed in Chrome 97.\n    const spellCheckOption = editor.portableTextFeatures.types.block.options?.spellCheck\n    const isChrome96 =\n      typeof navigator === 'undefined' ? false : /Chrome\\/96/.test(navigator.userAgent)\n    return spellCheckOption === undefined && isChrome96 === true ? false : spellCheckOption\n  }, [editor])\n}\n","import {PortableTextEditor} from '@sanity/portable-text-editor'\nimport {useMemo} from 'react'\nimport scrollIntoView from 'scroll-into-view-if-needed'\n\n// This hook is used to scroll the editor selection into place when actively editing the document.\nexport function useScrollSelectionIntoView(scrollElement: HTMLElement | null) {\n  return useMemo(\n    () =>\n      (editor: PortableTextEditor, domRange: Range): void => {\n        const selection = PortableTextEditor.getSelection(editor)\n        if (selection) {\n          const leafEl = domRange.startContainer.parentElement\n          if (!leafEl) {\n            return\n          }\n          scrollIntoView(leafEl, {\n            scrollMode: 'if-needed',\n            boundary: scrollElement,\n            block: 'start',\n            inline: 'nearest',\n          })\n        }\n      },\n    [scrollElement]\n  )\n}\n","import {\n  HotkeyOptions,\n  PortableTextEditable,\n  RenderAnnotationFunction,\n  RenderBlockFunction,\n  RenderChildFunction,\n  RenderDecoratorFunction,\n  OnPasteFn,\n  OnCopyFn,\n  EditorSelection,\n  PortableTextEditor,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport {Path} from '@sanity/types'\nimport {BoundaryElementProvider, useBoundaryElement, useGlobalKeyDown, useLayer} from '@sanity/ui'\nimport React, {useCallback, useMemo, useRef} from 'react'\nimport {Toolbar} from './toolbar'\nimport {Decorator} from './text'\nimport {\n  EditableCard,\n  EditableContainer,\n  EditableWrapper,\n  Root,\n  Scroller,\n  ToolbarCard,\n} from './Editor.styles'\nimport {useSpellcheck} from './hooks/useSpellCheck'\nimport {useScrollSelectionIntoView} from './hooks/useScrollSelectionIntoView'\n\ninterface EditorProps {\n  hotkeys: HotkeyOptions\n  initialSelection?: EditorSelection\n  isActive: boolean\n  isFullscreen: boolean\n  onCopy?: OnCopyFn\n  onItemOpen: (path: Path) => void\n  onPaste?: OnPasteFn\n  onToggleFullscreen: () => void\n  path: Path\n  readOnly?: boolean\n  renderAnnotation: RenderAnnotationFunction\n  renderBlock: RenderBlockFunction\n  renderChild: RenderChildFunction\n  scrollElement: HTMLElement | null\n  setPortalElement?: (portalElement: HTMLDivElement | null) => void\n  setScrollElement: (scrollElement: HTMLElement | null) => void\n}\n\nconst renderDecorator: RenderDecoratorFunction = (mark, mType, attributes, defaultRender) => {\n  return <Decorator mark={mark}>{defaultRender()}</Decorator>\n}\n\nexport function Editor(props: EditorProps) {\n  const {\n    hotkeys,\n    initialSelection,\n    isActive,\n    isFullscreen,\n    onCopy,\n    onItemOpen,\n    onPaste,\n    onToggleFullscreen,\n    path,\n    readOnly,\n    renderAnnotation,\n    renderBlock,\n    renderChild,\n    scrollElement,\n    setPortalElement,\n    setScrollElement,\n  } = props\n  const {isTopLayer} = useLayer()\n  const editableRef = useRef<HTMLDivElement | null>(null)\n  const editor = usePortableTextEditor()\n\n  const {element: boundaryElement} = useBoundaryElement()\n\n  // Let escape close fullscreen mode\n  useGlobalKeyDown(\n    useCallback(\n      (event: KeyboardEvent) => {\n        if (!isTopLayer || !isFullscreen) {\n          return\n        }\n        if (event.key === 'Escape') {\n          onToggleFullscreen()\n        }\n      },\n      [onToggleFullscreen, isFullscreen, isTopLayer]\n    )\n  )\n\n  // Keep the editor focused even though we are clicking on the background or the toolbar of the editor.\n  const handleMouseDown = useCallback((event: React.SyntheticEvent) => {\n    if (event.target instanceof Node && !editableRef.current?.contains(event.target)) {\n      event.preventDefault()\n      event.stopPropagation()\n    }\n  }, [])\n\n  const renderPlaceholder = useCallback(() => <>Empty</>, [])\n  const spellcheck = useSpellcheck()\n\n  const scrollSelectionIntoView = useScrollSelectionIntoView(scrollElement)\n\n  const editable = useMemo(\n    () => (\n      <PortableTextEditable\n        hotkeys={hotkeys}\n        onCopy={onCopy}\n        onPaste={onPaste}\n        ref={editableRef}\n        renderAnnotation={renderAnnotation}\n        renderBlock={renderBlock}\n        renderChild={renderChild}\n        renderDecorator={renderDecorator}\n        renderPlaceholder={renderPlaceholder}\n        scrollSelectionIntoView={scrollSelectionIntoView}\n        selection={initialSelection}\n        spellCheck={spellcheck}\n      />\n    ),\n    [\n      hotkeys,\n      initialSelection,\n      onCopy,\n      onPaste,\n      renderAnnotation,\n      renderBlock,\n      renderChild,\n      renderPlaceholder,\n      scrollSelectionIntoView,\n      spellcheck,\n    ]\n  )\n\n  const handleToolBarOnMemberOpen = useCallback(\n    (relativePath: Path) => {\n      PortableTextEditor.blur(editor)\n      onItemOpen(path.concat(relativePath))\n    },\n    [editor, onItemOpen, path]\n  )\n\n  return (\n    <Root $fullscreen={isFullscreen} data-testid=\"pt-editor\" onMouseDown={handleMouseDown}>\n      {isActive && (\n        <ToolbarCard data-testid=\"pt-editor__toolbar-card\" shadow={1}>\n          <Toolbar\n            isFullscreen={isFullscreen}\n            hotkeys={hotkeys}\n            onMemberOpen={handleToolBarOnMemberOpen}\n            readOnly={readOnly}\n            onToggleFullscreen={onToggleFullscreen}\n          />\n        </ToolbarCard>\n      )}\n\n      <EditableCard flex={1} tone={readOnly ? 'transparent' : 'default'}>\n        <Scroller ref={setScrollElement}>\n          <EditableContainer padding={isFullscreen ? 2 : 0} sizing=\"border\" width={1}>\n            <EditableWrapper\n              $isFullscreen={isFullscreen}\n              tone={readOnly ? 'transparent' : 'default'}\n            >\n              <BoundaryElementProvider element={isFullscreen ? scrollElement : boundaryElement}>\n                {editable}\n              </BoundaryElementProvider>\n            </EditableWrapper>\n          </EditableContainer>\n        </Scroller>\n\n        <div data-portal=\"\" ref={setPortalElement} />\n      </EditableCard>\n    </Root>\n  )\n}\n","import {Layer} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {focusRingBorderStyle, focusRingStyle} from '../../components/withFocusRing/helpers'\n\nexport const Root = styled.div(({theme}) => {\n  const {focusRing, input} = theme.sanity\n  const base = theme.sanity.color.base\n  const color = theme.sanity.color.input\n  const border = {\n    color: color.default.enabled.border,\n    width: input.border.width,\n  }\n\n  return css`\n    --input-box-shadow: ${focusRingBorderStyle(border)};\n\n    position: relative;\n\n    & [data-wrapper] {\n      overflow: hidden;\n      position: relative;\n      z-index: 1;\n      padding: ${input.border.width}px;\n    }\n\n    & [data-border] {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      box-shadow: var(--input-box-shadow);\n      z-index: 2;\n      border-radius: 1px;\n      pointer-events: none;\n    }\n\n    &:not([data-read-only])[data-focused] [data-border] {\n      --input-box-shadow: ${focusRingStyle({\n        base,\n        border,\n        focusRing,\n      })};\n    }\n  `\n})\n\n// This element only wraps the input when in \"fullscreen\" mode\nexport const ExpandedLayer = styled(Layer)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n`\n","import {useMemo} from 'react'\nimport {\n  HotkeyOptions,\n  PortableTextEditor,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\n\n// This hook will create final hotkeys for the editor from on those from props.\nexport function useHotkeys(hotkeys: HotkeyOptions): HotkeyOptions {\n  const editor = usePortableTextEditor()\n\n  // Guard that hotkeys from props will be a stable object.\n  // If this props is defined inline and is always a new object, there will be issues with key handling and cursor!\n  const initialHotkeys = useMemo(() => hotkeys, [])\n  if (initialHotkeys !== hotkeys) {\n    console.warn(\n      'Make sure that hotkeys are a stable object across renders, or there will be issues with key handling in the Portable Text Editor.'\n    )\n  }\n  return useMemo(() => {\n    const defaultHotkeys: {marks: Record<string, string>} = {marks: {}}\n    const ptFeatures = PortableTextEditor.getPortableTextFeatures(editor)\n    ptFeatures.decorators.forEach((dec) => {\n      switch (dec.value) {\n        case 'strong':\n          defaultHotkeys.marks['mod+b'] = dec.value\n          break\n        case 'em':\n          defaultHotkeys.marks['mod+i'] = dec.value\n          break\n        case 'underline':\n          defaultHotkeys.marks['mod+u'] = dec.value\n          break\n        case 'code':\n          defaultHotkeys.marks[\"mod+'\"] = dec.value\n          break\n        default:\n      }\n    })\n    return {\n      marks: {...defaultHotkeys.marks, ...(initialHotkeys || {}).marks},\n      custom: initialHotkeys.custom,\n    }\n  }, [editor, initialHotkeys])\n}\n\n// If we want to have a hotkey to open up a focused object, we can use this:\n//\n// const handleOpenObjectHotkey = (\n//   event: React.BaseSyntheticEvent,\n//   ptEditor: PortableTextEditor\n// ) => {\n//   const selection = PortableTextEditor.getSelection(ptEditor)\n//   if (selection) {\n//     event.preventDefault()\n//     event.stopPropagation()\n//     const {focus} = selection\n//     const activeAnnotations = PortableTextEditor.activeAnnotations(ptEditor)\n//     const focusBlock = PortableTextEditor.focusBlock(ptEditor)\n//     const focusChild = PortableTextEditor.focusChild(ptEditor)\n//     if (activeAnnotations.length > 0) {\n//       onFocus([\n//         ...focus.path.slice(0, 1),\n//         'markDefs',\n//         {_key: activeAnnotations[0]._key},\n//         FOCUS_TERMINATOR,\n//       ])\n//       return\n//     }\n//     if (focusChild && PortableTextEditor.isVoid(ptEditor, focusChild)) {\n//       onFocus([...focus.path, FOCUS_TERMINATOR])\n//       return\n//     }\n//     if (focusBlock && PortableTextEditor.isVoid(ptEditor, focusBlock)) {\n//       onFocus([...focus.path.slice(0, 1), FOCUS_TERMINATOR])\n//     }\n//   }\n// }\n","import {ObjectSchemaType} from '@sanity/types'\n\nconst parseResponsiveWidth = (value: unknown): (number | 'auto')[] => {\n  if (Array.isArray(value)) {\n    return value.flatMap(parseResponsiveWidth)\n  }\n  if (typeof value === 'number') {\n    return [value]\n  }\n  return value === 'auto' ? ['auto'] : []\n}\nconst parseModalType = (value: unknown): 'popover' | 'dialog' | undefined => {\n  return value === 'dialog' || value === 'popover' ? value : undefined\n}\n\nexport function _getModalOption(\n  schemaType: ObjectSchemaType\n): {type?: 'dialog' | 'popover'; width: (number | 'auto')[]} | undefined {\n  const raw = schemaType.options?.modal\n  return typeof raw === 'object' && raw !== null\n    ? {\n        type: parseModalType(raw.type),\n        width: parseResponsiveWidth(raw.width),\n      }\n    : undefined\n}\n","import React, {useId} from 'react'\nimport {Box, Dialog, PortalProvider, usePortal} from '@sanity/ui'\nimport {PresenceOverlay} from '../../../../../presence'\nimport {ModalWidth} from './types'\n\ninterface DefaultEditDialogProps {\n  title: string | React.ReactNode\n  onClose: () => void\n  children: React.ReactNode\n  width?: ModalWidth\n}\n\nexport function DefaultEditDialog(props: DefaultEditDialogProps) {\n  const {onClose, children, title, width = 1} = props\n\n  const dialogId = useId()\n  const portal = usePortal()\n\n  return (\n    <Dialog\n      __unstable_autoFocus\n      id={dialogId || ''}\n      onClose={onClose}\n      header={title}\n      portal=\"default\"\n      width={width}\n    >\n      <PresenceOverlay margins={[0, 0, 1, 0]}>\n        <Box padding={4}>\n          <PortalProvider element={portal.elements?.default}>{children}</PortalProvider>\n        </Box>\n      </PresenceOverlay>\n    </Dialog>\n  )\n}\n","export const debugElement =\n  process.env.NODE_ENV === 'production'\n    ? null\n    : {\n        getBoundingClientRect: () => {\n          const x = 200\n          const y = 200\n\n          return {\n            left: x,\n            top: y,\n            right: x,\n            bottom: y,\n            width: 0,\n            height: 0,\n          }\n        },\n      }\n","/* eslint-disable react/no-unused-prop-types */\n\nimport {CloseIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Container,\n  Flex,\n  Popover,\n  PopoverProps,\n  PortalProvider,\n  Text,\n  useBoundaryElement,\n  useClickOutside,\n  useGlobalKeyDown,\n  usePortal,\n} from '@sanity/ui'\nimport React, {useCallback, useEffect, useMemo, useState} from 'react'\nimport styled from 'styled-components'\nimport {FIXME} from '../../../../../FIXME'\nimport {PresenceOverlay} from '../../../../../presence'\nimport {PortableTextEditorElement} from '../../Compositor'\nimport {debugElement} from './debug'\nimport {ModalWidth} from './types'\n\ninterface PopoverEditDialogProps {\n  children: React.ReactNode\n  elementRef?: React.MutableRefObject<PortableTextEditorElement>\n  onClose: () => void\n  scrollElement: HTMLElement\n  title: string | React.ReactNode\n  width?: ModalWidth\n}\n\nconst RootPopover = styled(Popover)`\n  &[data-popper-reference-hidden='true'] {\n    visibility: hidden;\n    pointer-events: none;\n  }\n\n  & > div {\n    overflow: hidden;\n  }\n`\n\nconst ContentContainer = styled(Container)`\n  &:not([hidden]) {\n    display: flex;\n  }\n  direction: column;\n`\n\nconst ContentScrollerBox = styled(Box)`\n  /* Prevent overflow caused by change indicator */\n  overflow-x: hidden;\n  overflow-y: auto;\n`\n\nconst ContentHeaderBox = styled(Box)`\n  box-shadow: 0 1px 0 var(--card-shadow-outline-color);\n  position: relative;\n  z-index: 10;\n  min-height: auto;\n`\n\nconst POPOVER_FALLBACK_PLACEMENTS: PopoverProps['fallbackPlacements'] = ['top', 'bottom']\n\nexport function PopoverEditDialog(props: PopoverEditDialogProps) {\n  const {width, elementRef, onClose, scrollElement} = props\n\n  useGlobalKeyDown(\n    useCallback(\n      (event: KeyboardEvent) => {\n        if (event.key === 'Escape') {\n          onClose()\n        }\n      },\n      [onClose]\n    )\n  )\n\n  const [forceUpdate, setForceUpdate] = useState(0)\n  const virtualElement = useMemo(() => {\n    if (!elementRef?.current?.getBoundingClientRect()) {\n      return null\n    }\n\n    return {\n      contextElement: elementRef.current || undefined,\n      getBoundingClientRect: () => {\n        return elementRef.current?.getBoundingClientRect() || null\n      },\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [elementRef?.current, forceUpdate])\n\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n\n  const handleScrollOrResize = useCallback(() => {\n    setForceUpdate(forceUpdate + 1)\n  }, [forceUpdate])\n\n  useEffect(() => {\n    if (scrollElement) {\n      scrollElement.addEventListener('scroll', handleScrollOrResize, true)\n    }\n    return () => {\n      if (scrollElement) {\n        scrollElement.removeEventListener('scroll', handleScrollOrResize, true)\n      }\n    }\n  }, [handleScrollOrResize, scrollElement])\n\n  return (\n    <RootPopover\n      constrainSize\n      content={<Content {...props} rootElement={rootElement} width={width} />}\n      fallbackPlacements={POPOVER_FALLBACK_PLACEMENTS}\n      placement=\"bottom\"\n      open\n      portal=\"default\"\n      ref={setRootElement}\n      referenceElement={virtualElement || (debugElement as FIXME)}\n    />\n  )\n}\n\nfunction Content(\n  props: PopoverEditDialogProps & {\n    rootElement: HTMLDivElement | null\n  }\n) {\n  const {onClose, rootElement, width = 0, title} = props\n  const {element: boundaryElement} = useBoundaryElement()\n  const portal = usePortal()\n\n  useClickOutside(onClose, [rootElement], boundaryElement)\n\n  return (\n    <ContentContainer width={width}>\n      <Flex direction=\"column\" flex={1}>\n        <ContentHeaderBox padding={1}>\n          <Flex align=\"center\">\n            <Box flex={1} padding={2}>\n              <Text weight=\"semibold\">{title}</Text>\n            </Box>\n\n            <Button icon={CloseIcon} mode=\"bleed\" onClick={onClose} padding={2} />\n          </Flex>\n        </ContentHeaderBox>\n        <ContentScrollerBox flex={1}>\n          <PresenceOverlay margins={[0, 0, 1, 0]}>\n            <Box padding={3}>\n              <PortalProvider element={portal.elements?.default}>{props.children}</PortalProvider>\n            </Box>\n          </PresenceOverlay>\n        </ContentScrollerBox>\n      </Flex>\n    </ContentContainer>\n  )\n}\n","import {\n  EditorSelection,\n  PortableTextEditor,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport React, {useCallback, useEffect, useMemo, useRef, useState} from 'react'\nimport {_getModalOption} from '../helpers'\nimport {PortableTextMemberItem} from '../../PortableTextInput'\nimport {DefaultEditDialog} from './DefaultEditDialog'\nimport {PopoverEditDialog} from './PopoverEditDialog'\n\nexport function ObjectEditModal(props: {\n  children: React.ReactNode\n  kind: PortableTextMemberItem['kind']\n  memberItem: PortableTextMemberItem\n  onClose: () => void\n  scrollElement: HTMLElement\n}) {\n  const {memberItem, onClose, scrollElement, kind} = props\n  const {schemaType} = memberItem.node\n  const modalOption = useMemo(() => _getModalOption(schemaType), [schemaType])\n\n  const modalType = useMemo(() => {\n    if (modalOption?.type) return modalOption.type\n\n    // If the object is inline or an annotation, then default to \"popover\"\n    return kind === 'inlineObject' || kind === 'annotation' ? 'popover' : 'dialog'\n  }, [kind, modalOption])\n\n  const [firstField, setFirstField] = useState<HTMLElement | null>(null)\n  const editor = usePortableTextEditor()\n  const initialSelection = useRef<EditorSelection | null>(PortableTextEditor.getSelection(editor))\n\n  const handleClose = useCallback(() => {\n    // Force a new selection here as the selection is a callback dep. for showing the popup\n    PortableTextEditor.focus(editor)\n    PortableTextEditor.select(editor, initialSelection.current)\n    onClose()\n  }, [editor, onClose])\n\n  const title = <>Edit {memberItem.node.schemaType.title}</>\n\n  // Set focus on the first field\n  useEffect(() => {\n    if (firstField) {\n      return\n    }\n    const firstFieldMember = memberItem.node.members.find((m) => m.kind === 'field')\n    if (firstFieldMember && firstFieldMember.kind === 'field') {\n      const firstFieldElm = document.getElementById(firstFieldMember.field.id) as HTMLElement | null\n      if (firstFieldElm) {\n        setFirstField(firstFieldElm)\n        firstFieldElm.focus()\n      }\n    }\n  }, [firstField, memberItem])\n\n  if (modalType === 'popover') {\n    // 2022/11/18: Test if the elementRef is set before opening. On newly created annotations,\n    // this might not be true, and currently the @sanity/ui Popover code will not\n    // properly show the Popover if it's given at a later point.\n    return memberItem.elementRef?.current ? (\n      <PopoverEditDialog\n        elementRef={memberItem.elementRef}\n        onClose={handleClose}\n        width={modalOption?.width}\n        scrollElement={scrollElement}\n        title={title}\n      >\n        {props.children}\n      </PopoverEditDialog>\n    ) : null\n  }\n\n  return (\n    <DefaultEditDialog title={title} onClose={handleClose} width={modalOption?.width}>\n      {props.children}\n    </DefaultEditDialog>\n  )\n}\n","import {PortableTextEditor, usePortableTextEditor} from '@sanity/portable-text-editor'\nimport {Path} from '@sanity/types'\nimport {useEffect, useMemo} from 'react'\nimport scrollIntoView from 'scroll-into-view-if-needed'\nimport {usePortableTextMemberItems} from './usePortableTextMembers'\n\ninterface Props {\n  editorRootPath: Path\n  hasFormFocus: boolean // Wether we have focus on something in the editor's form state\n  scrollElement: HTMLElement | null\n  onItemClose: () => void\n}\n\n// This hook will scroll to the \"opened\" portable text object's editor dom node.\n// If the opened item is a regular text block, place the cursor there as well.\nexport function useScrollToOpenedMember(props: Props): void {\n  const {editorRootPath, scrollElement, hasFormFocus, onItemClose} = props\n  const portableTextMemberItems = usePortableTextMemberItems()\n  const editor = usePortableTextEditor()\n\n  // Find the opened item with the highest path\n  const memberItem = useMemo(() => {\n    return portableTextMemberItems\n      .filter((item) => item.member.open)\n      .sort((a, b) => b.member.item.path.length - a.member.item.path.length)[0]\n  }, [portableTextMemberItems])\n\n  useEffect(() => {\n    // If the editor already has form focus, don't interfere.\n    if (hasFormFocus) {\n      return\n    }\n    if (memberItem?.elementRef?.current) {\n      scrollIntoView(memberItem.elementRef?.current, {\n        boundary: scrollElement,\n        scrollMode: 'if-needed',\n      })\n      // If this is a text block, place the cursor in the beginning of it.\n      if (memberItem.kind === 'textBlock') {\n        const relativePath = memberItem.member.item.path.slice(editorRootPath.length)\n        PortableTextEditor.select(editor, {\n          anchor: {path: relativePath, offset: 0},\n          focus: {path: relativePath, offset: 0},\n        })\n        PortableTextEditor.focus(editor)\n        // \"auto-close\" regular text blocks or they get sticky here when trying to focus on an other field\n        // There is no natural way of closing them (however opening something else would close them)\n        onItemClose()\n      }\n    }\n  }, [editor, hasFormFocus, editorRootPath.length, memberItem, scrollElement, onItemClose])\n}\n","import React, {useState, useMemo, useCallback} from 'react'\nimport {\n  EditorSelection,\n  OnCopyFn,\n  OnPasteFn,\n  PortableTextBlock,\n  PortableTextEditor,\n  usePortableTextEditor,\n  HotkeyOptions,\n  RenderAttributes,\n} from '@sanity/portable-text-editor'\nimport {ObjectSchemaType, Path} from '@sanity/types'\nimport {\n  BoundaryElementProvider,\n  Portal,\n  PortalProvider,\n  useBoundaryElement,\n  usePortal,\n} from '@sanity/ui'\nimport {ArrayOfObjectsInputProps, RenderCustomMarkers} from '../../types'\nimport {FormInput} from '../../components'\nimport {ActivateOnFocus} from '../../components/ActivateOnFocus/ActivateOnFocus'\nimport {EMPTY_ARRAY} from '../../../util'\nimport {FIXME} from '../../../FIXME'\nimport {ChangeIndicator} from '../../../changeIndicators'\nimport {BlockObject} from './object/BlockObject'\nimport {InlineObject} from './object/InlineObject'\nimport {Annotation, TextBlock} from './text'\nimport {RenderBlockActionsCallback} from './types'\nimport {Editor} from './Editor'\nimport {ExpandedLayer, Root} from './Compositor.styles'\nimport {useHotkeys} from './hooks/useHotKeys'\nimport {ObjectEditModal} from './object/renderers/ObjectEditModal'\nimport {useScrollToOpenedMember} from './hooks/useScrollToOpenedMember'\nimport {usePortableTextMemberItems} from './hooks/usePortableTextMembers'\nimport {_isBlockType} from './_helpers'\n\ninterface InputProps extends ArrayOfObjectsInputProps<PortableTextBlock> {\n  hasFocus: boolean\n  hotkeys?: HotkeyOptions\n  isActive: boolean\n  isFullscreen: boolean\n  onActivate: () => void\n  onCopy?: OnCopyFn\n  onPaste?: OnPasteFn\n  onToggleFullscreen: () => void\n  path: Path\n  renderBlockActions?: RenderBlockActionsCallback\n  renderCustomMarkers?: RenderCustomMarkers\n}\n\n/** @internal */\nexport type PortableTextEditorElement = HTMLDivElement | HTMLSpanElement | null\n\n/** @internal */\nexport function Compositor(props: InputProps) {\n  const {\n    changed,\n    focusPath = EMPTY_ARRAY,\n    focused,\n    hasFocus,\n    hotkeys,\n    isActive,\n    isFullscreen,\n    onChange,\n    onCopy,\n    onActivate,\n    onItemOpen,\n    onItemClose,\n    onPaste,\n    onToggleFullscreen,\n    path,\n    renderBlockActions,\n    renderCustomMarkers,\n    value,\n    readOnly,\n    renderPreview,\n  } = props\n\n  const editor = usePortableTextEditor()\n\n  const [wrapperElement, setWrapperElement] = useState<HTMLDivElement | null>(null)\n  const [scrollElement, setScrollElement] = useState<HTMLElement | null>(null)\n  const portableTextMemberItems = usePortableTextMemberItems()\n\n  const {element: boundaryElement} = useBoundaryElement()\n\n  // Scroll to the DOM element of the \"opened\" portable text member when relevant.\n  useScrollToOpenedMember({\n    hasFormFocus: focusPath.length > 0,\n    editorRootPath: path,\n    scrollElement,\n    onItemClose,\n  })\n\n  const handleToggleFullscreen = useCallback(() => {\n    onToggleFullscreen()\n  }, [onToggleFullscreen])\n\n  const hotkeysWithFullscreenToggle = useMemo(\n    () => ({\n      ...hotkeys,\n      custom: {\n        'mod+enter': onToggleFullscreen,\n        ...(hotkeys?.custom || {}),\n      },\n    }),\n\n    [hotkeys, onToggleFullscreen]\n  )\n\n  const editorHotkeys = useHotkeys(hotkeysWithFullscreenToggle)\n\n  const ptFeatures = useMemo(() => PortableTextEditor.getPortableTextFeatures(editor), [editor])\n  const hasContent = !!value\n\n  const initialSelection = useMemo(\n    (): EditorSelection =>\n      focusPath.length > 0\n        ? {\n            anchor: {path: focusPath, offset: 0},\n            focus: {path: focusPath, offset: 0},\n          }\n        : null,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [] // Only initial\n  )\n\n  const renderBlock = useCallback(\n    (\n      block: PortableTextBlock,\n      blockType: ObjectSchemaType,\n      attributes: RenderAttributes,\n      defaultRender: (b: PortableTextBlock) => JSX.Element\n    ) => {\n      const isTextBlock = block._type === ptFeatures.types.block.name\n      if (isTextBlock) {\n        return (\n          <TextBlock\n            attributes={attributes}\n            block={block}\n            isFullscreen={isFullscreen}\n            onChange={onChange}\n            readOnly={readOnly}\n            renderBlockActions={hasContent ? renderBlockActions : undefined}\n            renderCustomMarkers={hasContent ? renderCustomMarkers : undefined}\n          >\n            {defaultRender(block)}\n          </TextBlock>\n        )\n      }\n\n      return (\n        <BlockObject\n          attributes={attributes}\n          block={block}\n          isFullscreen={isFullscreen}\n          onChange={onChange}\n          onItemOpen={onItemOpen}\n          readOnly={readOnly}\n          renderBlockActions={hasContent ? renderBlockActions : undefined}\n          renderCustomMarkers={hasContent ? renderCustomMarkers : undefined}\n          renderPreview={renderPreview}\n          type={blockType}\n        />\n      )\n    },\n    [\n      hasContent,\n      isFullscreen,\n      onChange,\n      onItemOpen,\n      ptFeatures.types.block.name,\n      readOnly,\n      renderBlockActions,\n      renderCustomMarkers,\n      renderPreview,\n    ]\n  )\n\n  const renderChild = useCallback(\n    (child: any, childType: any, attributes: any, defaultRender: any) => {\n      const isSpan = child._type === ptFeatures.types.span.name\n      if (isSpan) {\n        return defaultRender(child)\n      }\n\n      return (\n        <InlineObject\n          attributes={attributes}\n          onItemOpen={onItemOpen}\n          readOnly={readOnly}\n          renderCustomMarkers={renderCustomMarkers}\n          scrollElement={scrollElement}\n          type={childType}\n          value={child}\n          renderPreview={renderPreview}\n        />\n      )\n    },\n    [\n      onItemOpen,\n      ptFeatures.types.span.name,\n      readOnly,\n      renderCustomMarkers,\n      renderPreview,\n      scrollElement,\n    ]\n  )\n\n  const renderAnnotation = useCallback(\n    (annotation: any, annotationType: any, attributes: any, defaultRender: any) => {\n      return (\n        <Annotation\n          attributes={attributes}\n          onItemOpen={onItemOpen}\n          readOnly={readOnly}\n          renderCustomMarkers={renderCustomMarkers}\n          scrollElement={scrollElement}\n          value={annotation}\n          type={annotationType}\n        >\n          {defaultRender()}\n        </Annotation>\n      )\n    },\n    [onItemOpen, readOnly, renderCustomMarkers, scrollElement]\n  )\n\n  const [portalElement, setPortalElement] = useState<HTMLDivElement | null>(null)\n\n  const openMemberItems = useMemo(\n    () => portableTextMemberItems.filter((m) => m.member.open && !_isBlockType(m.node.schemaType)),\n    [portableTextMemberItems]\n  )\n\n  const editorNode = useMemo(\n    () => (\n      <Editor\n        hotkeys={editorHotkeys}\n        initialSelection={initialSelection}\n        isActive={isActive}\n        isFullscreen={isFullscreen}\n        onItemOpen={onItemOpen}\n        onCopy={onCopy}\n        onPaste={onPaste}\n        onToggleFullscreen={handleToggleFullscreen}\n        path={path}\n        readOnly={readOnly}\n        renderAnnotation={renderAnnotation}\n        renderBlock={renderBlock}\n        renderChild={renderChild}\n        setPortalElement={setPortalElement}\n        scrollElement={scrollElement}\n        setScrollElement={setScrollElement}\n      />\n    ),\n\n    // Keep only stable ones here!\n    [\n      editorHotkeys,\n      handleToggleFullscreen,\n      initialSelection,\n      isActive,\n      isFullscreen,\n      onCopy,\n      onItemOpen,\n      onPaste,\n      path,\n      readOnly,\n      renderAnnotation,\n      renderBlock,\n      renderChild,\n      scrollElement,\n    ]\n  )\n\n  const boundaryElm = isFullscreen ? scrollElement : boundaryElement\n\n  const handleEditModalClose = useCallback(() => {\n    onItemClose()\n  }, [onItemClose])\n\n  const children = useMemo(\n    () =>\n      boundaryElm && (\n        <>\n          {editorNode}\n          <BoundaryElementProvider element={boundaryElm}>\n            {openMemberItems.map((dMemberItem) => {\n              return (\n                <ObjectEditModal\n                  kind={dMemberItem.kind}\n                  key={dMemberItem.member.key}\n                  memberItem={dMemberItem}\n                  onClose={handleEditModalClose}\n                  scrollElement={boundaryElm}\n                >\n                  <FormInput absolutePath={dMemberItem.node.path} {...(props as FIXME)} />\n                </ObjectEditModal>\n              )\n            })}\n          </BoundaryElementProvider>\n        </>\n      ),\n    [boundaryElm, editorNode, openMemberItems, props, handleEditModalClose]\n  )\n\n  const portal = usePortal()\n  const portalElements = useMemo(\n    () => ({\n      collapsed: wrapperElement,\n      default: portal.element,\n      editor: portalElement,\n      expanded: portal.element,\n    }),\n\n    [portal.element, portalElement, wrapperElement]\n  )\n\n  return (\n    <PortalProvider __unstable_elements={portalElements}>\n      <ActivateOnFocus onActivate={onActivate} isOverlayActive={!isActive}>\n        <ChangeIndicator\n          disabled={isFullscreen}\n          hasFocus={Boolean(focused)}\n          isChanged={changed}\n          path={path}\n        >\n          <Root data-focused={hasFocus ? '' : undefined} data-read-only={readOnly ? '' : undefined}>\n            <div data-wrapper=\"\" ref={setWrapperElement}>\n              <Portal __unstable_name={isFullscreen ? 'expanded' : 'collapsed'}>\n                {isFullscreen ? <ExpandedLayer>{children}</ExpandedLayer> : children}\n              </Portal>\n            </div>\n            <div data-border=\"\" />\n          </Root>\n        </ChangeIndicator>\n      </ActivateOnFocus>\n    </PortalProvider>\n  )\n}\n","import {InvalidValueResolution} from '@sanity/portable-text-editor'\nimport {Box, Button, Card, Code, Grid, Stack, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {Alert} from '../../components/Alert'\n\ninterface InvalidValueProps {\n  onChange: (...args: any[]) => any\n  onIgnore: () => void\n  resolution: InvalidValueResolution\n}\n\nexport function InvalidValue(props: InvalidValueProps) {\n  const {onChange, onIgnore, resolution} = props\n\n  const handleAction = useCallback(() => {\n    if (resolution) {\n      onChange({type: 'mutation', patches: resolution.patches})\n    }\n  }, [onChange, resolution])\n\n  if (!resolution) return null\n\n  return (\n    <Alert\n      suffix={\n        <Stack padding={2}>\n          {resolution.action && (\n            <Grid columns={[1, 2]} gap={1}>\n              <Button mode=\"ghost\" onClick={onIgnore} text=\"Ignore\" />\n              <Button onClick={handleAction} text={resolution.action} tone=\"caution\" />\n            </Grid>\n          )}\n\n          <Box padding={3}>\n            {resolution.action && (\n              <Text as=\"p\" muted size={1}>\n                NOTE: It’s generally safe to perform the action above, but if you are in doubt, get\n                in touch with those responsible for configuring your studio.\n              </Text>\n            )}\n          </Box>\n        </Stack>\n      }\n      title={<>Invalid Portable Text Editor value</>}\n    >\n      <Stack space={3}>\n        <Text as=\"p\" muted size={1}>\n          {resolution.description}\n        </Text>\n\n        <Card border overflow=\"auto\" padding={2} tone=\"inherit\">\n          <Code language=\"json\">{JSON.stringify(resolution.item, null, 2)}</Code>\n        </Card>\n      </Stack>\n    </Alert>\n  )\n}\n","import {Path, PathSegment} from '@sanity/types'\nimport {get, find} from 'lodash'\nimport {useCallback} from 'react'\nimport shallowEquals from 'shallow-equals'\nimport {isRecord} from '../../../util'\nimport {FormPatch} from '../../patch'\nimport {useFormBuilder} from '../../useFormBuilder'\n\n/**\n * @internal\n */\nexport interface PatchesData {\n  patches: Array<FormPatch>\n  shouldReset: boolean\n  snapshot: any\n}\n\n/**\n * @internal\n */\nexport type PatchesSubscriber = (data: PatchesData) => void\n\n/**\n * @internal\n */\nexport function usePatches(props: {path: Path}): {\n  subscribe: (subscriber: PatchesSubscriber) => () => void\n} {\n  const {path} = props\n  const {patchChannel} = useFormBuilder().__internal\n\n  const subscribe = useCallback(\n    (subscriber: PatchesSubscriber) => {\n      return patchChannel.subscribe(({snapshot, patches}) => {\n        const filteredPatches = patches\n          .filter((patch) => _startsWith(patch.path, path))\n          .map((patch) => ({\n            ...patch,\n            path: patch.path.slice(path.length),\n          }))\n\n        if (filteredPatches.length) {\n          subscriber({\n            shouldReset: _shouldReset(path, patches),\n            snapshot: isRecord(snapshot) ? _getValueAtPath(snapshot, path) : {},\n            patches: filteredPatches,\n          })\n        }\n      })\n    },\n    [path, patchChannel]\n  )\n\n  return {subscribe}\n}\n\nfunction _isSegmentEqual(segment1: PathSegment, segment2: PathSegment) {\n  const segment1Type = typeof segment1\n  if (segment1Type !== typeof segment2) {\n    return false\n  }\n  if (segment1Type === 'object') {\n    return shallowEquals(segment1, segment2)\n  }\n  return segment1 === segment2\n}\n\nfunction _startsWith(subjectPath: Path, checkPath: Path) {\n  if (subjectPath === checkPath) {\n    return true\n  }\n  if (!Array.isArray(subjectPath) || !Array.isArray(checkPath)) {\n    return false\n  }\n  if (subjectPath.length < checkPath.length) {\n    return false\n  }\n  for (let i = 0, len = checkPath.length; i < len; i++) {\n    if (!_isSegmentEqual(checkPath[i], subjectPath[i])) {\n      return false\n    }\n  }\n  return true\n}\n\nfunction _isAncestor(path1: Path, path2: Path) {\n  return path1.length === 0 || (_startsWith(path2, path1) && !_startsWith(path1, path2))\n}\n\nfunction _shouldReset(path: Path, patches: FormPatch[]) {\n  return patches.some(\n    (patch) => _isAncestor(patch.path, path) && (patch.type === 'set' || patch.type === 'unset')\n  )\n}\n\nfunction _getValueAtPath(value: Record<string, unknown>, path: Path) {\n  return path.reduce((result, segment) => {\n    if (typeof segment === 'object') {\n      return find(result, segment)\n    }\n\n    return get(result, segment)\n  }, value)\n}\n","import {ArraySchemaType} from '@sanity/types'\nimport {\n  EditorChange,\n  OnCopyFn,\n  OnPasteFn,\n  Patch as EditorPatch,\n  PortableTextBlock,\n  PortableTextEditor,\n  HotkeyOptions,\n  InvalidValue,\n  EditorSelection,\n  Patch,\n} from '@sanity/portable-text-editor'\nimport React, {\n  useEffect,\n  useState,\n  useMemo,\n  useCallback,\n  useRef,\n  useImperativeHandle,\n  createRef,\n} from 'react'\nimport {Subject} from 'rxjs'\nimport {Box, useToast} from '@sanity/ui'\nimport scrollIntoView from 'scroll-into-view-if-needed'\nimport {debounce} from 'lodash'\nimport {FormPatch, SANITY_PATCH_TYPE} from '../../patch'\nimport {ArrayOfObjectsItemMember, ObjectFormNode} from '../../store'\nimport type {ArrayOfObjectsInputProps, PortableTextMarker, RenderCustomMarkers} from '../../types'\nimport {EMPTY_ARRAY} from '../../../util'\nimport {pathToString} from '../../../field'\nimport {FIXME} from '../../../FIXME'\nimport {isMemberArrayOfObjects} from '../../members/object/fields/asserters'\nimport {Compositor, PortableTextEditorElement} from './Compositor'\nimport {InvalidValue as RespondToInvalidContent} from './InvalidValue'\nimport {usePatches} from './usePatches'\nimport {RenderBlockActionsCallback} from './types'\nimport {PortableTextMarkersProvider} from './contexts/PortableTextMarkers'\nimport {PortableTextMemberItemsProvider} from './contexts/PortableTextMembers'\nimport {_isArrayOfObjectsFieldMember, _isBlockType} from './_helpers'\n\n/** @internal */\nexport type PTObjectMember = ArrayOfObjectsItemMember\n\n/** @internal */\nexport interface PortableTextMemberItem {\n  kind: 'annotation' | 'textBlock' | 'objectBlock' | 'inlineObject'\n  key: string\n  member: PTObjectMember\n  node: ObjectFormNode\n  elementRef?: React.MutableRefObject<PortableTextEditorElement> | undefined\n}\n\n/**\n * @alpha\n */\nexport interface PortableTextInputProps\n  extends ArrayOfObjectsInputProps<PortableTextBlock, ArraySchemaType> {\n  hotkeys?: HotkeyOptions\n  markers?: PortableTextMarker[]\n  onCopy?: OnCopyFn\n  onPaste?: OnPasteFn\n  renderBlockActions?: RenderBlockActionsCallback\n  renderCustomMarkers?: RenderCustomMarkers\n}\n\n/**\n * The root Portable Text Input component\n *\n * @alpha\n */\nexport function PortableTextInput(props: PortableTextInputProps) {\n  const {\n    focused,\n    focusPath,\n    hotkeys,\n    markers = EMPTY_ARRAY,\n    members,\n    onChange,\n    onCopy,\n    onPathFocus,\n    onInsert,\n    onPaste,\n    path,\n    readOnly,\n    renderBlockActions,\n    renderCustomMarkers,\n    schemaType: type,\n    value,\n    elementProps,\n  } = props\n\n  // Make the PTE focusable from the outside\n  useImperativeHandle(elementProps.ref, () => ({\n    focus() {\n      if (editorRef.current) {\n        PortableTextEditor.focus(editorRef.current)\n      }\n    },\n  }))\n\n  const {subscribe} = usePatches({path})\n  const editorRef = useRef<PortableTextEditor | null>(null)\n  const [hasFocus, setHasFocus] = useState(false)\n  const [ignoreValidationError, setIgnoreValidationError] = useState(false)\n  const [invalidValue, setInvalidValue] = useState<InvalidValue | null>(null)\n  const [isFullscreen, setIsFullscreen] = useState(false)\n  const [isActive, setIsActive] = useState(false)\n\n  // Set as active whenever we have focus inside the editor.\n  useEffect(() => {\n    if (hasFocus || focusPath.length > 1) {\n      setIsActive(true)\n    }\n  }, [hasFocus, focusPath])\n\n  const toast = useToast()\n  const portableTextMemberItemsRef: React.MutableRefObject<PortableTextMemberItem[]> = useRef([])\n\n  // Memoized patch stream\n  const patchSubject: Subject<{\n    patches: EditorPatch[]\n    snapshot: PortableTextBlock[] | undefined\n  }> = useMemo(() => new Subject(), [])\n  const remotePatch$ = useMemo(() => patchSubject.asObservable(), [patchSubject])\n\n  const innerElementRef = useRef<HTMLDivElement | null>(null)\n\n  const handleToggleFullscreen = useCallback(() => {\n    if (editorRef.current) {\n      const prevSel = PortableTextEditor.getSelection(editorRef.current)\n      setIsFullscreen((v) => !v)\n      setTimeout(() => {\n        if (editorRef.current) {\n          PortableTextEditor.focus(editorRef.current)\n          if (prevSel) {\n            PortableTextEditor.select(editorRef.current, {...prevSel})\n          }\n        }\n      })\n    }\n  }, [])\n\n  // Reset invalidValue if new value is coming in from props\n  useEffect(() => {\n    if (invalidValue && value !== invalidValue.value) {\n      setInvalidValue(null)\n    }\n  }, [invalidValue, value])\n\n  // Subscribe to patches\n  useEffect(() => {\n    return subscribe(({patches, snapshot}): void => {\n      patchSubject.next({patches, snapshot})\n    })\n  }, [patchSubject, subscribe])\n\n  // Populate the portableTextMembers Map\n  const portableTextMemberItems: PortableTextMemberItem[] = useMemo(() => {\n    const result: {\n      kind: PortableTextMemberItem['kind']\n      member: PTObjectMember\n      node: ObjectFormNode\n    }[] = []\n\n    for (const member of members) {\n      if (member.kind === 'item') {\n        if (!_isBlockType(member.item.schemaType)) {\n          result.push({kind: 'objectBlock', member, node: member.item})\n        } else if (member.item.validation.length > 0 || member.item.changed) {\n          // Only text blocks that have validation or changes\n          result.push({kind: 'textBlock', member, node: member.item})\n        }\n\n        if (_isBlockType(member.item.schemaType)) {\n          // Inline objects\n          const childrenField = member.item.members.find(\n            (f) => f.kind === 'field' && f.name === 'children'\n          )\n\n          if (\n            childrenField &&\n            childrenField.kind === 'field' &&\n            isMemberArrayOfObjects(childrenField)\n          ) {\n            // eslint-disable-next-line max-depth\n            for (const child of childrenField.field.members) {\n              // eslint-disable-next-line max-depth\n              if (child.kind === 'item' && child.item.schemaType.name !== 'span') {\n                result.push({kind: 'inlineObject', member: child, node: child.item})\n              }\n            }\n          }\n\n          // Markdefs\n          const markDefArrayMember = member.item.members\n            .filter(_isArrayOfObjectsFieldMember)\n            .find((f) => f.name === 'markDefs')\n\n          if (markDefArrayMember) {\n            // eslint-disable-next-line max-depth\n            for (const child of markDefArrayMember.field.members) {\n              // eslint-disable-next-line max-depth\n              if (child.kind === 'item' && child.item.schemaType.jsonType === 'object') {\n                result.push({\n                  kind: 'annotation',\n                  member: child,\n                  node: child.item,\n                })\n              }\n            }\n          }\n        }\n      }\n    }\n\n    const items: PortableTextMemberItem[] = result.map((r) => {\n      const key = pathToString(r.node.path.slice(path.length))\n      const existingItem = portableTextMemberItemsRef.current.find((ref) => ref.key === key)\n\n      if (existingItem) {\n        existingItem.member = r.member\n        existingItem.node = r.node\n        return existingItem\n      }\n\n      return {\n        kind: r.kind,\n        key,\n        member: r.member,\n        node: r.node,\n        elementRef: createRef<PortableTextEditorElement>(),\n      }\n    })\n\n    portableTextMemberItemsRef.current = items\n\n    return items\n  }, [members, path])\n\n  const hasOpenItem = useMemo(() => {\n    return portableTextMemberItems.some((item) => item.member.open)\n  }, [portableTextMemberItems])\n\n  // Sets the focusPath from editor selection (when typing, moving the cursor, clicking around)\n  // This doesn't need to be immediate, so debounce it as it impacts performance.\n  const setFocusPathDebounced = useMemo(\n    () =>\n      debounce(\n        (sel: EditorSelection) => {\n          if (sel && hasFocus) onPathFocus(sel.focus.path)\n        },\n        500,\n        {trailing: true, leading: false}\n      ),\n    [hasFocus, onPathFocus]\n  )\n\n  // Handle editor changes\n  const handleEditorChange = useCallback(\n    (change: EditorChange): void => {\n      switch (change.type) {\n        case 'mutation':\n          onChange(toFormPatches(change.patches))\n          break\n        case 'selection':\n          setFocusPathDebounced(change.selection)\n          break\n        case 'focus':\n          setHasFocus(true)\n          break\n        case 'blur':\n          setHasFocus(false)\n          break\n        case 'undo':\n        case 'redo':\n          onChange(toFormPatches(change.patches))\n          break\n        case 'invalidValue':\n          setInvalidValue(change)\n          break\n        case 'error':\n          toast.push({\n            status: change.level,\n            description: change.description,\n          })\n          break\n        default:\n      }\n    },\n    [onChange, toast, setFocusPathDebounced]\n  )\n\n  const handleIgnoreInvalidValue = useCallback((): void => {\n    setIgnoreValidationError(true)\n  }, [])\n\n  const respondToInvalidContent = useMemo(() => {\n    if (invalidValue && invalidValue.resolution) {\n      return (\n        <Box marginBottom={2}>\n          <RespondToInvalidContent\n            onChange={handleEditorChange}\n            onIgnore={handleIgnoreInvalidValue}\n            resolution={invalidValue.resolution}\n          />\n        </Box>\n      )\n    }\n    return null\n  }, [handleEditorChange, handleIgnoreInvalidValue, invalidValue])\n\n  const handleActivate = useCallback((): void => {\n    if (!isActive) {\n      setIsActive(true)\n      if (!hasFocus) {\n        if (editorRef.current) {\n          PortableTextEditor.focus(editorRef.current)\n        }\n        setHasFocus(true)\n      }\n    }\n  }, [hasFocus, isActive])\n\n  // If the editor that has an opened item and isn't focused - scroll to the input if needed.\n  useEffect(() => {\n    if (!hasFocus && hasOpenItem && innerElementRef.current) {\n      scrollIntoView(innerElementRef.current, {\n        scrollMode: 'if-needed',\n      })\n    }\n  }, [focused, hasFocus, hasOpenItem])\n\n  return (\n    <Box ref={innerElementRef}>\n      {!ignoreValidationError && respondToInvalidContent}\n      {(!invalidValue || ignoreValidationError) && (\n        <PortableTextMarkersProvider markers={markers}>\n          <PortableTextMemberItemsProvider memberItems={portableTextMemberItems}>\n            <PortableTextEditor\n              ref={editorRef}\n              incomingPatches$={remotePatch$}\n              onChange={handleEditorChange}\n              maxBlocks={undefined} // TODO: from schema?\n              readOnly={readOnly}\n              type={type as FIXME}\n              value={value}\n            >\n              <Compositor\n                {...props}\n                focused={focused}\n                focusPath={focusPath}\n                hasFocus={hasFocus}\n                hotkeys={hotkeys}\n                isActive={isActive}\n                isFullscreen={isFullscreen}\n                onActivate={handleActivate}\n                onChange={onChange}\n                onCopy={onCopy}\n                onInsert={onInsert}\n                onPaste={onPaste}\n                onToggleFullscreen={handleToggleFullscreen}\n                readOnly={readOnly}\n                renderBlockActions={renderBlockActions}\n                renderCustomMarkers={renderCustomMarkers}\n                value={value}\n              />\n            </PortableTextEditor>\n          </PortableTextMemberItemsProvider>\n        </PortableTextMarkersProvider>\n      )}\n    </Box>\n  )\n}\n\nfunction toFormPatches(patches: any) {\n  return patches.map((p: Patch) => ({...p, patchType: SANITY_PATCH_TYPE})) as FormPatch[]\n}\n","export function focusRingBorderStyle(border: {color: string; width: number}): string {\n  return `inset 0 0 0 ${border.width}px ${border.color}`\n}\n\nexport function focusRingStyle(opts: {\n  base?: {bg: string}\n  border?: {color: string; width: number}\n  focusRing: {offset: number; width: number}\n}): string {\n  const {base, border, focusRing} = opts\n  const focusRingOutsetWidth = focusRing.offset + focusRing.width\n  const focusRingInsetWidth = 0 - focusRing.offset\n  const bgColor = base ? base.bg : 'var(--card-bg-color)'\n\n  return [\n    focusRingInsetWidth > 0 && `inset 0 0 0 ${focusRingInsetWidth}px var(--card-focus-ring-color)`,\n    border && focusRingBorderStyle(border),\n    focusRingInsetWidth < 0 && `0 0 0 ${0 - focusRingInsetWidth}px ${bgColor}`,\n    focusRingOutsetWidth > 0 && `0 0 0 ${focusRingOutsetWidth}px var(--card-focus-ring-color)`,\n  ]\n    .filter(Boolean)\n    .join(',')\n}\n","import {CloseIcon} from '@sanity/icons'\nimport {Box, Button, Card, Flex, isHTMLElement, rem, Text, Theme, useForwardedRef} from '@sanity/ui'\nimport React, {forwardRef, useCallback, useEffect, useMemo, useRef, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport type {CSSObject} from 'styled-components'\nimport {focusRingBorderStyle, focusRingStyle} from './styles'\n\nconst Root = styled(Box)((props: {theme: Theme}): CSSObject => {\n  const {theme} = props\n  const {focusRing, input, radius} = theme.sanity\n  const color = theme.sanity.color.input\n  const space = rem(theme.sanity.space[1])\n\n  return {\n    position: 'relative',\n    borderRadius: `${radius[1]}px`,\n    color: color.default.enabled.fg,\n    backgroundColor: color.default.enabled.bg,\n    boxShadow: focusRingBorderStyle({\n      color: color.default.enabled.border,\n      width: input.border.width,\n    }),\n\n    '& > .content': {\n      position: 'relative',\n      lineHeight: 0,\n      margin: `-${space} 0 0 -${space}`,\n    },\n\n    '& > .content > div': {\n      display: 'inline-block',\n      verticalAlign: 'top',\n      padding: `${space} 0 0 ${space}`,\n    },\n\n    // enabled\n    '&:not([data-read-only])': {\n      cursor: 'text',\n    },\n\n    // hovered\n    '@media(hover:hover)': {\n      '&:not([data-disabled]):not([data-read-only]):hover': {\n        borderColor: color.default.hovered.border,\n      },\n    },\n\n    // focused\n    '&:not([data-disabled]):not([data-read-only])[data-focused]': {\n      boxShadow: focusRingStyle({\n        border: {\n          color: color.default.enabled.border,\n          width: input.border.width,\n        },\n        focusRing,\n      }),\n    },\n\n    // disabled\n    '*:disabled + &': {\n      color: color.default.disabled.fg,\n      backgroundColor: color.default.disabled.bg,\n      boxShadow: focusRingBorderStyle({\n        color: color.default.disabled.border,\n        width: input.border.width,\n      }),\n    },\n  }\n})\n\nconst Input = styled.input((props: {theme: Theme}): CSSObject => {\n  const {theme} = props\n  const font = theme.sanity.fonts.text\n  const color = theme.sanity.color.input\n  const p = theme.sanity.space[2]\n  const size = theme.sanity.fonts.text.sizes[2]\n\n  return {\n    appearance: 'none',\n    background: 'none',\n    border: 0,\n    borderRadius: 0,\n    outline: 'none',\n    fontSize: rem(size.fontSize),\n    lineHeight: size.lineHeight / size.fontSize,\n    fontFamily: font.family,\n    fontWeight: font.weights.regular,\n    margin: 0,\n    display: 'block',\n    minWidth: '1px',\n    maxWidth: '100%',\n    boxSizing: 'border-box',\n    paddingTop: rem(p - size.ascenderHeight),\n    paddingRight: rem(p),\n    paddingBottom: rem(p - size.descenderHeight),\n    paddingLeft: rem(p),\n\n    // enabled\n    '&:not(:invalid):not(:disabled)': {\n      color: color.default.enabled.fg,\n    },\n\n    // disabled\n    '&:not(:invalid):disabled': {\n      color: color.default.disabled.fg,\n    },\n  }\n})\n\nconst Placeholder = styled(Box)((props: {theme: Theme}) => {\n  const {theme} = props\n  const color = theme.sanity.color.input\n\n  return css`\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    pointer-events: none;\n    --card-fg-color: ${color.default.enabled.placeholder};\n  `\n})\n\nexport const TagInput = forwardRef(\n  (\n    props: {\n      readOnly?: boolean\n      onChange?: (newValue: {value: string}[]) => void\n      onFocus?: (event: React.FocusEvent) => void\n      placeholder?: string\n      value?: {value: string}[]\n    } & Omit<React.HTMLProps<HTMLInputElement>, 'as' | 'onChange' | 'onFocus' | 'ref' | 'value'>,\n    ref: React.Ref<HTMLInputElement>\n  ) => {\n    const {\n      disabled,\n      onChange,\n      onFocus,\n      placeholder: placeholderProp,\n      readOnly,\n      value = [],\n      ...restProps\n    } = props\n    const placeholder = useMemo(() => {\n      if (placeholderProp) return placeholderProp\n      if (typeof window !== 'undefined' && 'ontouchstart' in window) {\n        return 'Enter tag…'\n      }\n      return 'Enter tag and press ENTER…'\n    }, [placeholderProp])\n    const [inputValue, setInputValue] = useState('')\n    const enabled = !disabled && !readOnly\n    const [focused, setFocused] = useState(false)\n    const forwardedRef = useForwardedRef(ref)\n    const rootRef = useRef<HTMLDivElement | null>(null)\n\n    const handleRootPointerDown = useCallback(\n      (event: React.PointerEvent<HTMLDivElement>) => {\n        const isTagElement = isHTMLElement(event.target) && event.target.closest('[data-ui=\"Tag\"]')\n\n        if (isTagElement) return\n\n        const inputElement = forwardedRef.current\n\n        if (inputElement) {\n          setTimeout(() => inputElement.focus(), 0)\n        }\n      },\n      [forwardedRef]\n    )\n\n    const handleInputBlur = useCallback(() => {\n      setFocused(false)\n    }, [])\n\n    const handleInputChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n      setInputValue(event.currentTarget.value)\n    }, [])\n\n    const handleInputFocus = useCallback(\n      (event: React.FocusEvent) => {\n        setFocused(true)\n        if (onFocus) onFocus(event)\n      },\n      [onFocus]\n    )\n\n    const handleInputKeyDown = useCallback(\n      (event: React.KeyboardEvent<HTMLInputElement>) => {\n        if (event.key === 'Enter') {\n          event.preventDefault()\n          event.stopPropagation()\n\n          if (onChange && inputValue) {\n            const newValue = value.concat([{value: inputValue}])\n\n            setInputValue('')\n\n            if (onChange) onChange(newValue)\n          }\n        }\n      },\n      [inputValue, onChange, value]\n    )\n\n    const handleTagRemove = useCallback(\n      (index: number) => {\n        if (!onChange) return\n\n        const newValue = value.slice(0)\n\n        newValue.splice(index, 1)\n\n        onChange(newValue)\n      },\n      [onChange, value]\n    )\n\n    useEffect(() => {\n      const inputElement = forwardedRef.current\n\n      if (inputElement) {\n        inputElement.style.width = '0'\n        inputElement.style.width = `${inputElement.scrollWidth}px`\n      }\n    }, [forwardedRef, inputValue])\n\n    return (\n      <Root\n        data-disabled={disabled ? '' : undefined}\n        data-focused={focused ? '' : undefined}\n        data-read-only={readOnly ? '' : undefined}\n        data-ui=\"TagInput\"\n        onPointerDown={handleRootPointerDown}\n        padding={1}\n        ref={rootRef}\n      >\n        {enabled && (\n          <Placeholder hidden={Boolean(inputValue || value.length)} padding={3}>\n            <Text textOverflow=\"ellipsis\">{placeholder}</Text>\n          </Placeholder>\n        )}\n\n        <div className=\"content\">\n          {value.map((tag, tagIndex) => (\n            // eslint-disable-next-line react/no-array-index-key\n            <div key={`tag-${tagIndex}`}>\n              <Tag\n                enabled={enabled}\n                index={tagIndex}\n                muted={disabled}\n                onRemove={handleTagRemove}\n                tag={tag}\n              />\n            </div>\n          ))}\n\n          <div key=\"tag-input\">\n            <Input\n              {...restProps}\n              disabled={!enabled}\n              onBlur={handleInputBlur}\n              onChange={handleInputChange}\n              onFocus={handleInputFocus}\n              onKeyDown={handleInputKeyDown}\n              ref={forwardedRef}\n              type=\"text\"\n              value={inputValue}\n            />\n          </div>\n        </div>\n      </Root>\n    )\n  }\n)\n\nTagInput.displayName = 'TagInput'\n\nfunction Tag(props: {\n  enabled: boolean\n  index: number\n  muted?: boolean\n  onRemove: (index: number) => void\n  tag: {value: string}\n}) {\n  const {enabled, index, muted, onRemove, tag} = props\n\n  const handleRemoveClick = useCallback(() => {\n    onRemove(index)\n  }, [index, onRemove])\n\n  return (\n    <Card data-ui=\"Tag\" padding={1} radius={2} tone=\"transparent\">\n      <Flex align=\"center\">\n        <Box flex={1} padding={1}>\n          <Text muted={muted}>{tag.value}</Text>\n        </Box>\n\n        {enabled && (\n          <Box marginLeft={1}>\n            <Button icon={CloseIcon} mode=\"bleed\" onClick={handleRemoveClick} padding={1} />\n          </Box>\n        )}\n      </Flex>\n    </Card>\n  )\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {set, unset} from '../patch'\nimport {TagInput} from '../components/tagInput'\nimport {ArrayOfPrimitivesInputProps} from '../types'\n\n/**\n * @beta\n */\nexport type TagsArrayInputProps = ArrayOfPrimitivesInputProps<string>\n\n/**\n * @beta\n */\nexport function TagsArrayInput(props: TagsArrayInputProps) {\n  const {onChange, readOnly, value = [], elementProps} = props\n  const tagInputValue = useMemo(() => value?.map((v) => ({value: v})), [value])\n\n  const handleChange = useCallback(\n    (nextValue: {value: string}[]) => {\n      onChange(nextValue.length === 0 ? unset() : set(nextValue.map((v) => v.value)))\n    },\n    [onChange]\n  )\n\n  return (\n    <TagInput onChange={handleChange} readOnly={readOnly} value={tagInputValue} {...elementProps} />\n  )\n}\n","import {Card, Grid, Theme} from '@sanity/ui'\nimport React, {ComponentProps, useCallback} from 'react'\nimport styled from 'styled-components'\nimport {MOVING_ITEM_CLASS_NAME, sortableItem, sortableList} from './sortable'\n\nconst ListItem = styled(Card)`\n  &.${MOVING_ITEM_CLASS_NAME} {\n    z-index: 10000;\n    border-radius: ${({theme}) => theme.sanity.radius[2]}px;\n    box-shadow: 0 0 0 0, 0 8px 17px 2px var(--card-shadow-umbra-color),\n      0 3px 14px 2px var(--card-shadow-penumbra-color),\n      0 5px 5px -3px var(--card-shadow-ambient-color);\n\n    // Used inside CellItem\n    [data-ui='DragHandleCard'] {\n      opacity: 1;\n    }\n\n    [data-ui='DragHandleButton'] {\n      background-color: ${({theme}: {theme: Theme}) =>\n        theme.sanity.color.button.bleed.primary.pressed.bg};\n      color: ${({theme}: {theme: Theme}) => theme.sanity.color.button.bleed.primary.pressed.fg};\n      [data-ui='Text'] {\n        color: inherit;\n      }\n    }\n  }\n`\n\nconst SortableList = sortableList(Grid)\nconst SortableListItem = sortableItem(ListItem)\n\ninterface ListProps extends ComponentProps<typeof Grid> {\n  sortable?: boolean\n  lockAxis?: 'x' | 'y' | 'xy'\n  axis?: 'x' | 'y' | 'xy'\n  onItemMove?: (event: {fromIndex: number; toIndex: number}) => void\n  children?: React.ReactNode\n  tabIndex?: number\n}\n\nexport function List(props: ListProps) {\n  const {onItemMove, sortable, ...rest} = props\n\n  // Note: this is here to make SortableList API compatible with onItemMove\n  const handleSortEnd = useCallback(\n    (event: {newIndex: number; oldIndex: number}) =>\n      onItemMove?.({\n        fromIndex: event.oldIndex,\n        toIndex: event.newIndex,\n      }),\n    [onItemMove]\n  )\n\n  return sortable ? <SortableList onSortEnd={handleSortEnd} {...rest} /> : <Grid {...rest} />\n}\n\ntype ItemProps = {sortable?: boolean; children?: React.ReactNode; index: number}\n\nexport function Item(props: ItemProps & ComponentProps<typeof Card>) {\n  const {sortable, ...rest} = props\n  return sortable ? <SortableListItem {...rest} /> : <ListItem {...rest} />\n}\n","import React, {useCallback, useId} from 'react'\nimport {EllipsisVerticalIcon, TrashIcon} from '@sanity/icons'\nimport {Box, Button, Menu, MenuButton, MenuItem} from '@sanity/ui'\nimport {ArrayItemError} from '../../../../store'\nimport {RowLayout} from '../../layouts/RowLayout'\nimport {IncompatibleItemType} from './IncompatibleItemType'\n\nconst MENU_POPOVER_PROPS = {portal: true, tone: 'default'} as const\n\nexport function ErrorItem(props: {\n  member: ArrayItemError\n  sortable?: boolean\n  onRemove: () => void\n}) {\n  const {member, sortable, onRemove} = props\n  const id = useId()\n\n  return (\n    <Box paddingX={1}>\n      <RowLayout\n        dragHandle={sortable}\n        tone=\"caution\"\n        menu={\n          <MenuButton\n            button={<Button padding={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n            id={`${id}-menuButton`}\n            menu={\n              <Menu>\n                <MenuItem text=\"Remove\" tone=\"critical\" icon={TrashIcon} onClick={onRemove} />\n              </Menu>\n            }\n            popover={MENU_POPOVER_PROPS}\n          />\n        }\n      >\n        {member.error.type === 'INVALID_ITEM_TYPE' ? (\n          <IncompatibleItemType value={member.error.value} />\n        ) : (\n          <div>Unexpected Error: {member.error.type}</div>\n        )}\n      </RowLayout>\n    </Box>\n  )\n}\n","import React from 'react'\nimport {SchemaType} from '@sanity/types'\nimport {Box, Text, Inline} from '@sanity/ui'\nimport {AccessDeniedIcon, UploadIcon} from '@sanity/icons'\nimport {FileLike, UploaderResolver} from '../../../studio/uploads/types'\n\ninterface Props {\n  hoveringFiles: FileLike[]\n  types: SchemaType[]\n  resolveUploader: UploaderResolver\n}\n\nexport function DropMessage(props: Props) {\n  const {hoveringFiles, types, resolveUploader} = props\n  const acceptedFiles = hoveringFiles.filter((file) =>\n    types.some((type) => resolveUploader(type, file))\n  )\n  const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n  const multiple = types.length > 1\n  return (\n    <>\n      {acceptedFiles.length > 0 ? (\n        <>\n          <Inline space={2}>\n            <Text>\n              <UploadIcon />\n            </Text>\n            <Text>\n              Drop to upload{' '}\n              {multiple && (\n                <>\n                  {acceptedFiles.length} file{acceptedFiles.length > 1 ? 's' : ''}\n                </>\n              )}\n            </Text>\n          </Inline>\n          {rejectedFilesCount > 0 && (\n            <Box marginTop={4}>\n              <Inline space={2}>\n                <Text muted size={1}>\n                  <AccessDeniedIcon />\n                </Text>\n                <Text muted size={1}>\n                  {rejectedFilesCount} file\n                  {rejectedFilesCount > 1 ? 's' : ''} can't be uploaded here\n                </Text>\n              </Inline>\n            </Box>\n          )}\n        </>\n      ) : (\n        <Inline space={2}>\n          <Text>\n            <AccessDeniedIcon />\n          </Text>\n          <Text>\n            Can't upload {hoveringFiles.length > 1 ? 'any of these files' : 'this file'} here\n          </Text>\n        </Inline>\n      )}\n    </>\n  )\n}\n","import styled from 'styled-components'\nimport {Layer} from '@sanity/ui'\n\nexport const Overlay = styled(Layer)`\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  top: -2px;\n  left: -2px;\n  right: -2px;\n  bottom: -2px;\n  background-color: var(--card-bg-color);\n  opacity: 0.8;\n`\n","import {Box, Flex, Text, useToast} from '@sanity/ui'\nimport React from 'react'\nimport {SchemaType} from '@sanity/types'\nimport {sortBy} from 'lodash'\nimport styled from 'styled-components'\nimport {FileLike, ResolvedUploader, UploaderResolver} from '../../../../studio/uploads/types'\nimport {FileInfo, fileTarget} from '../../../common/fileTarget'\nimport {DropMessage} from '../../../files/common/DropMessage'\nimport {UploadEvent} from '../../../../types'\nimport {Overlay} from './styles'\n\nexport interface UploadTargetProps {\n  types: SchemaType[]\n  resolveUploader?: UploaderResolver\n  onUpload?: (event: UploadEvent) => void\n  children?: React.ReactNode\n}\n\n// todo: define and export this as a core interface in this package\ninterface UploadTask {\n  file: File\n  uploaderCandidates: ResolvedUploader[]\n}\n\nconst Root = styled.div`\n  position: relative;\n`\n\nfunction getUploadCandidates(\n  types: SchemaType[],\n  resolveUploader: UploaderResolver,\n  file: FileLike\n) {\n  return types\n    .map((memberType) => ({\n      type: memberType,\n      uploader: resolveUploader(memberType, file),\n    }))\n    .filter((member) => member.uploader) as ResolvedUploader[]\n}\nexport function uploadTarget<Props>(Component: React.ComponentType<Props>) {\n  const FileTarget = fileTarget<any>(Component)\n\n  return React.forwardRef(function UploadTarget(\n    props: UploadTargetProps & Props,\n    forwardedRef: React.ForwardedRef<HTMLElement>\n  ) {\n    const {children, resolveUploader, onUpload, types, ...rest} = props\n    const {push: pushToast} = useToast()\n\n    const uploadFile = React.useCallback(\n      (file: File, resolvedUploader: ResolvedUploader) => {\n        const {type, uploader} = resolvedUploader\n        onUpload?.({file, schemaType: type, uploader})\n      },\n      [onUpload]\n    )\n\n    const handleFiles = React.useCallback(\n      (files: File[]) => {\n        if (!resolveUploader) {\n          return\n        }\n        const tasks: UploadTask[] = files.map((file) => ({\n          file,\n          uploaderCandidates: getUploadCandidates(types, resolveUploader, file),\n        }))\n        const ready = tasks.filter((task) => task.uploaderCandidates.length > 0)\n        const rejected: UploadTask[] = tasks.filter((task) => task.uploaderCandidates.length === 0)\n\n        if (rejected.length > 0) {\n          const plural = rejected.length > 1\n          pushToast({\n            closable: true,\n            status: 'warning',\n            title: `The following item${\n              plural ? 's' : ''\n            } can't be uploaded because there's no known conversion from content type${\n              plural ? 's' : ''\n            } to array item:`,\n            description: rejected.map((task, i) => (\n              <Flex key={i} padding={2}>\n                <Box marginLeft={1}>\n                  <Text weight=\"semibold\">{task.file.name}</Text>\n                </Box>\n                <Box paddingLeft={2}>\n                  <Text size={1}>({task.file.type})</Text>\n                </Box>\n              </Flex>\n            )),\n          })\n        }\n\n        // todo: consider if we should to ask the user here\n        // the list of candidates is sorted by their priority and the first one is selected\n        // const ambiguous = tasks\n        //   .filter(task => task.uploaderCandidates.length > 1)\n        ready.forEach((task) => {\n          uploadFile(\n            task.file,\n            // eslint-disable-next-line max-nested-callbacks\n            sortBy(task.uploaderCandidates, (candidate) => candidate.uploader.priority)[0]\n          )\n        })\n      },\n      [pushToast, resolveUploader, types, uploadFile]\n    )\n\n    const [hoveringFiles, setHoveringFiles] = React.useState<FileInfo[]>([])\n    const handleFilesOut = React.useCallback(() => setHoveringFiles([]), [])\n\n    return (\n      <Root>\n        <FileTarget\n          {...rest}\n          ref={forwardedRef}\n          onFiles={handleFiles}\n          onFilesOver={setHoveringFiles}\n          onFilesOut={handleFilesOut}\n        >\n          {resolveUploader && hoveringFiles.length > 0 && (\n            <Overlay zOffset={10}>\n              <DropMessage\n                hoveringFiles={hoveringFiles}\n                types={types}\n                resolveUploader={resolveUploader}\n              />\n            </Overlay>\n          )}\n          {children}\n        </FileTarget>\n      </Root>\n    )\n  })\n}\n","import {Card} from '@sanity/ui'\nimport {withFocusRing} from '../../../components/withFocusRing'\nimport {uploadTarget} from './uploadTarget/uploadTarget'\n\nexport const UploadTargetCard = uploadTarget(withFocusRing(Card))\n","/**\n * Find the index of the nearest element with the same value. Starts at given index and looks incrementally in either direction for the searchElement\n * It's *NOT* inclusive: If the element matches the element at the startIdx, startIdx will be returned\n * It prefers matches in the first half. If there's a tie it will pick the first element that comes before\n */\nexport function nearestIndexOf<T>(array: T[], startIdx: number, searchElement: T) {\n  return nearestIndex(array, startIdx, (element) => element === searchElement)\n}\n\n/**\n * Find the index of the nearest element matching the predicate. Starts at given index and looks incrementally in either direction\n * It's *NOT* inclusive: If the predicate matches the element at the startIdx, startIdx will be returned\n * It prefers matches in the first half. If there's a tie it will pick the first element that comes before\n */\nexport function nearestIndex<T>(\n  array: T[],\n  startIdx: number,\n  predicate: (element: T, index: number) => boolean\n) {\n  let lowerIdx = startIdx - 1\n  let upperIdx = startIdx\n  const len = array.length\n  while (lowerIdx > -1 || upperIdx < len) {\n    const upper = array[upperIdx]\n    if (upperIdx < len && predicate(upper, upperIdx)) {\n      return upperIdx\n    }\n    const lower = array[lowerIdx]\n    if (lowerIdx > -1 && predicate(lower, lowerIdx)) {\n      return lowerIdx\n    }\n    lowerIdx--\n    upperIdx++\n  }\n  return -1\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {Box, Button, Flex, Menu, MenuButton, MenuItem} from '@sanity/ui'\nimport {SchemaType} from '@sanity/types'\nimport {CopyIcon as DuplicateIcon, EllipsisVerticalIcon, TrashIcon} from '@sanity/icons'\nimport {FormFieldValidationStatus} from '../../../components/formField'\nimport {InsertMenu} from '../ArrayOfObjectsInput/InsertMenu'\nimport {PrimitiveItemProps} from '../../../types/itemProps'\nimport {RowLayout} from '../layouts/RowLayout'\nimport {FieldPresence} from '../../../../presence'\nimport {getEmptyValue} from './getEmptyValue'\n\nexport type DefaultItemProps = Omit<PrimitiveItemProps, 'renderDefault'> & {\n  insertableTypes: SchemaType[]\n  sortable: boolean\n}\n\nconst MENU_BUTTON_POPOVER_PROPS = {portal: true, tone: 'default'} as const\n\nexport const ItemRow = React.forwardRef(function ItemRow(\n  props: DefaultItemProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {\n    sortable,\n    value,\n    insertableTypes,\n    onInsert,\n    onRemove,\n    readOnly,\n    inputId,\n    validation,\n    children,\n    presence,\n    schemaType,\n  } = props\n\n  const hasError = validation.filter((item) => item.level === 'error').length > 0\n  const hasWarning = validation.filter((item) => item.level === 'warning').length > 0\n\n  const handleInsert = useCallback(\n    (pos: 'before' | 'after', insertType: SchemaType) => {\n      onInsert({position: pos, items: [getEmptyValue(insertType)]})\n    },\n    [onInsert]\n  )\n\n  const handleDuplicate = useCallback(() => {\n    if (value) onInsert({position: 'after', items: [value]})\n  }, [onInsert, value])\n\n  const tone = useMemo(() => {\n    if (hasError) {\n      return 'critical'\n    }\n    if (hasWarning) {\n      return 'caution'\n    }\n\n    return undefined\n  }, [hasError, hasWarning])\n\n  const menu = (\n    <MenuButton\n      button={<Button padding={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n      id={`${inputId}-menuButton`}\n      popover={MENU_BUTTON_POPOVER_PROPS}\n      menu={\n        <Menu>\n          <MenuItem text=\"Remove\" tone=\"critical\" icon={TrashIcon} onClick={onRemove} />\n\n          <MenuItem text=\"Duplicate\" icon={DuplicateIcon} onClick={handleDuplicate} />\n          <InsertMenu types={insertableTypes} onInsert={handleInsert} />\n        </Menu>\n      }\n    />\n  )\n\n  return (\n    <RowLayout\n      tone={tone}\n      menu={!readOnly && menu}\n      dragHandle={!readOnly && sortable}\n      presence={presence.length === 0 ? null : <FieldPresence presence={presence} maxAvatars={1} />}\n      validation={\n        validation.length > 0 ? (\n          <Box marginLeft={1} paddingX={1} paddingY={3}>\n            <FormFieldValidationStatus validation={validation} />\n          </Box>\n        ) : null\n      }\n    >\n      <Flex align={schemaType ? 'flex-end' : 'center'} ref={ref}>\n        <Flex align=\"flex-end\" flex={1}>\n          <Box flex={1} marginRight={2}>\n            {children}\n          </Box>\n        </Flex>\n      </Flex>\n    </RowLayout>\n  )\n})\n","/* eslint-disable react/no-unused-prop-types */\nimport {ArraySchemaType, isReferenceSchemaType} from '@sanity/types'\nimport {AddIcon} from '@sanity/icons'\nimport React, {useMemo, useId} from 'react'\nimport {Box, Button, Grid, Menu, MenuButton, MenuItem, Tooltip, Text} from '@sanity/ui'\nimport {ArrayInputFunctionsProps} from '../../../types'\n\n/** @beta */\nexport function ArrayOfPrimitivesFunctions<\n  MemberType extends string | boolean | number,\n  SchemaType extends ArraySchemaType\n>(props: ArrayInputFunctionsProps<MemberType, SchemaType>) {\n  const {schemaType, readOnly, children, onValueCreate, onItemAppend} = props\n  const menuButtonId = useId()\n\n  const insertItem = React.useCallback(\n    (itemType: any) => {\n      onItemAppend(onValueCreate(itemType))\n    },\n    [onValueCreate, onItemAppend]\n  )\n\n  const handleAddBtnClick = React.useCallback(() => {\n    insertItem(schemaType.of[0])\n  }, [schemaType, insertItem])\n\n  const popoverProps = useMemo(() => ({constrainSize: true, portal: true}), [])\n\n  if (readOnly) {\n    return (\n      <Tooltip\n        portal\n        content={\n          <Box padding={2} sizing=\"border\">\n            <Text size={1} muted>\n              This field is read-only\n            </Text>\n          </Box>\n        }\n      >\n        <Grid>\n          <Button\n            icon={AddIcon}\n            mode=\"ghost\"\n            disabled\n            text={schemaType.of.length === 1 ? 'Add item' : 'Add item...'}\n          />\n        </Grid>\n      </Tooltip>\n    )\n  }\n\n  return (\n    <Grid gap={1} style={{gridTemplateColumns: 'repeat(auto-fit, minmax(100px, 1fr))'}}>\n      {schemaType.of.length === 1 ? (\n        <Button icon={AddIcon} mode=\"ghost\" onClick={handleAddBtnClick} text=\"Add item\" />\n      ) : (\n        <MenuButton\n          button={<Button icon={AddIcon} mode=\"ghost\" text=\"Add item…\" />}\n          id={menuButtonId || ''}\n          menu={\n            <Menu>\n              {schemaType.of.map((memberDef, i) => {\n                // Use reference icon if reference is to one schemaType only\n                const referenceIcon =\n                  isReferenceSchemaType(memberDef) &&\n                  (memberDef.to || []).length === 1 &&\n                  memberDef.to[0].icon\n\n                const icon = memberDef.icon || memberDef.type?.icon || referenceIcon\n                return (\n                  <MenuItem\n                    key={i}\n                    text={memberDef.title || memberDef.type?.name}\n                    onClick={() => insertItem(memberDef)}\n                    icon={icon}\n                  />\n                )\n              })}\n            </Menu>\n          }\n          popover={popoverProps}\n        />\n      )}\n\n      {children}\n    </Grid>\n  )\n}\n","import React from 'react'\nimport {get} from 'lodash'\nimport {Card, Stack, Text} from '@sanity/ui'\nimport {ArrayOfPrimitivesInputProps} from '../../../types'\nimport {Item, List} from '../common/list'\nimport {PrimitiveItemProps} from '../../../types/itemProps'\nimport {ArrayOfPrimitivesItem} from '../../../members'\nimport {ErrorItem} from '../ArrayOfObjectsInput/List/ErrorItem'\nimport {UploadTargetCard} from '../common/UploadTargetCard'\nimport {getEmptyValue} from './getEmptyValue'\n\nimport {PrimitiveValue} from './types'\nimport {nearestIndexOf} from './utils/nearestIndex'\nimport {ItemRow} from './ItemRow'\nimport {ArrayOfPrimitivesFunctions} from './ArrayOfPrimitivesFunctions'\n\n// Note: this should be a class component until React provides support for a hook version of getSnapshotBeforeUpdate\n/** @beta */\nexport class ArrayOfPrimitivesInput extends React.PureComponent<ArrayOfPrimitivesInputProps> {\n  _element: HTMLElement | null = null\n\n  handleAppend = (itemValue: PrimitiveValue) => {\n    const {value = [], onIndexFocus, onItemAppend} = this.props\n    onItemAppend(itemValue)\n    onIndexFocus(value.length)\n  }\n\n  handlePrepend = (itemValue: PrimitiveValue) => {\n    const {onIndexFocus, value = [], onItemPrepend} = this.props\n    onItemPrepend(itemValue)\n    onIndexFocus(value.length)\n  }\n  handleSortEnd = (event: {fromIndex: number; toIndex: number}) => {\n    const {onIndexFocus, onMoveItem, value} = this.props\n    if (value) onMoveItem(event)\n    onIndexFocus(event.toIndex)\n  }\n\n  focus() {\n    if (this._element) {\n      this._element.focus()\n    }\n  }\n\n  getSnapshotBeforeUpdate(prevProps: ArrayOfPrimitivesInputProps) {\n    const {focusPath: prevFocusPath = [], value: prevValue = []} = prevProps\n    const {focusPath = [], value = []} = this.props\n    if (prevFocusPath[0] === focusPath[0] && prevValue.length !== value.length) {\n      // the length of the array has changed, but the focus path has not, which may happen if someone inserts or removes a new item above the one currently in focus\n      const focusIndex = focusPath[0]\n\n      const selection = window.getSelection()\n      if (!(selection?.focusNode instanceof HTMLElement)) {\n        return null\n      }\n\n      const input = selection.focusNode?.querySelector('input,textarea')\n\n      return input instanceof HTMLInputElement\n        ? {\n            prevFocusedIndex: focusIndex,\n            restoreSelection: {\n              text: selection.toString(),\n              start: input.selectionStart,\n              end: input.selectionEnd,\n              value: input.value,\n            },\n          }\n        : {}\n    }\n\n    return null\n  }\n\n  componentDidUpdate(\n    prevProps: ArrayOfPrimitivesInputProps,\n    prevState: Record<string, unknown>,\n    snapshot?: {restoreSelection: {start: number; end: number}; prevFocusedIndex: number}\n  ) {\n    const {onIndexFocus} = this.props\n    if (snapshot?.restoreSelection && prevProps.value) {\n      const prevFocusedValue = prevProps.value[snapshot.prevFocusedIndex]\n\n      const nearestIndex = nearestIndexOf(\n        this.props.value || [],\n        snapshot.prevFocusedIndex,\n        prevFocusedValue\n      )\n\n      if (nearestIndex === -1) {\n        return\n      }\n      const newInput = this._element?.querySelector(\n        `[data-item-index='${nearestIndex}'] input,textarea`\n      )\n\n      if (newInput instanceof HTMLInputElement) {\n        newInput.focus()\n        try {\n          newInput.setSelectionRange(snapshot.restoreSelection.start, snapshot.restoreSelection.end)\n        } catch {\n          // not all inputs supports selection (e.g. <input type=\"number\" />)\n        }\n      }\n      onIndexFocus(nearestIndex)\n    }\n  }\n\n  renderArrayItem = (props: Omit<PrimitiveItemProps, 'renderDefault'>) => {\n    const {schemaType} = this.props\n    const sortable = schemaType.options?.sortable !== false\n    return <ItemRow {...props} sortable={sortable} insertableTypes={schemaType.of} />\n  }\n\n  render() {\n    const {\n      schemaType,\n      members,\n      readOnly,\n      renderInput,\n      onUpload,\n      onItemRemove,\n      resolveUploader,\n      elementProps,\n      arrayFunctions: ArrayFunctions = ArrayOfPrimitivesFunctions,\n    } = this.props\n\n    const isSortable = !readOnly && get(schemaType, 'options.sortable') !== false\n\n    return (\n      <Stack space={3} data-testid=\"array-primitives-input\">\n        <UploadTargetCard\n          types={schemaType.of}\n          resolveUploader={resolveUploader}\n          onUpload={onUpload}\n          {...elementProps}\n          tabIndex={0}\n        >\n          <Stack space={1}>\n            {members.length === 0 ? (\n              <Card padding={3} border style={{borderStyle: 'dashed'}} radius={2}>\n                <Text align=\"center\" muted size={1}>\n                  {schemaType.placeholder || <>No items</>}\n                </Text>\n              </Card>\n            ) : (\n              <Card padding={1} border>\n                <List onItemMove={this.handleSortEnd} sortable={isSortable} gap={1}>\n                  {members.map((member, index) => {\n                    return (\n                      <Item key={member.key} sortable={isSortable} index={index}>\n                        {member.kind === 'item' && (\n                          <ArrayOfPrimitivesItem\n                            member={member}\n                            renderItem={this.renderArrayItem}\n                            renderInput={renderInput}\n                          />\n                        )}\n                        {member.kind === 'error' && (\n                          <ErrorItem\n                            sortable={isSortable}\n                            member={member}\n                            onRemove={() => onItemRemove(index)}\n                          />\n                        )}\n                      </Item>\n                    )\n                  })}\n                </List>\n              </Card>\n            )}\n          </Stack>\n        </UploadTargetCard>\n\n        <ArrayFunctions\n          onChange={this.props.onChange}\n          onItemAppend={this.handleAppend}\n          onItemPrepend={this.handlePrepend}\n          onValueCreate={getEmptyValue}\n          readOnly={this.props.readOnly}\n          schemaType={this.props.schemaType}\n          value={this.props.value}\n        />\n      </Stack>\n    )\n  }\n}\n","import {Box, Card, CardTone, Flex} from '@sanity/ui'\nimport React, {ComponentProps, ReactNode} from 'react'\nimport styled from 'styled-components'\nimport {DragHandle} from '../common/DragHandle'\n\ninterface RowLayoutProps {\n  tone?: CardTone\n  dragHandle?: boolean\n  focused?: boolean\n  presence?: ReactNode\n  validation?: ReactNode\n  menu?: ReactNode\n  footer?: ReactNode\n  selected?: boolean\n  children?: ReactNode\n}\n\nconst FooterFlex = styled(Flex)`\n  min-height: 35px;\n`\nconst PresenceFlex = styled(Flex)`\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: 35px;\n`\n\nconst DragHandleCard = styled(Card)`\n  position: absolute;\n  top: 0;\n  left: 0;\n`\nconst Root = styled(Card)`\n  transition: border-color 250ms;\n  box-sizing: border-box;\n  position: relative;\n\n  @media (hover: hover) {\n    ${DragHandleCard} {\n      opacity: 0;\n    }\n\n    &:hover,\n    &:focus-within {\n      ${DragHandleCard} {\n        opacity: 1;\n      }\n    }\n  }\n\n  &[aria-selected='true'] {\n    box-shadow: 0 0 0 2px var(--card-focus-ring-color);\n  }\n`\n\n/**\n * Use this to get the layout for grid items\n */\nexport function CellLayout(props: RowLayoutProps & ComponentProps<typeof Root>) {\n  const {validation, selected, tone, presence, children, dragHandle, menu, footer, ...rest} = props\n\n  return (\n    <Root\n      forwardedAs={Flex}\n      direction=\"column\"\n      border\n      selected={selected}\n      aria-selected={selected}\n      radius={2}\n      tone={tone}\n      {...rest}\n    >\n      {children}\n\n      {dragHandle && (\n        <DragHandleCard\n          margin={1}\n          radius={2}\n          display=\"flex\"\n          tone=\"inherit\"\n          data-ui=\"DragHandleCard\"\n        >\n          <DragHandle grid padding={2} mode=\"ghost\" />\n        </DragHandleCard>\n      )}\n\n      {presence && (\n        <PresenceFlex align=\"center\" marginX={1}>\n          {presence}\n        </PresenceFlex>\n      )}\n\n      <FooterFlex align=\"center\" paddingX={1} sizing=\"border\" justify=\"space-between\">\n        <Flex>{validation}</Flex>\n        <Box>{footer}</Box>\n        {menu}\n      </FooterFlex>\n    </Root>\n  )\n}\n","import {\n  Box,\n  Button,\n  Card,\n  CardTone,\n  Flex,\n  Menu,\n  MenuButton,\n  MenuItem,\n  Spinner,\n  Text,\n} from '@sanity/ui'\nimport React, {useCallback, useMemo, useRef} from 'react'\nimport {SchemaType} from '@sanity/types'\nimport {CopyIcon as DuplicateIcon, EllipsisVerticalIcon, TrashIcon} from '@sanity/icons'\nimport styled from 'styled-components'\nimport {getSchemaTypeTitle} from '../../../../../schema'\nimport {ObjectItem, ObjectItemProps} from '../../../../types'\nimport {useScrollIntoViewOnFocusWithin} from '../../../../hooks/useScrollIntoViewOnFocusWithin'\nimport {useDidUpdate} from '../../../../hooks/useDidUpdate'\nimport {useChildPresence} from '../../../../studio/contexts/Presence'\nimport {randomKey} from '../../../../utils/randomKey'\nimport {FormFieldValidationStatus} from '../../../../components'\nimport {FieldPresence} from '../../../../../presence'\nimport {useChildValidation} from '../../../../studio/contexts/Validation'\nimport {ChangeIndicator} from '../../../../../changeIndicators'\nimport {CellLayout} from '../../layouts/CellLayout'\nimport {createProtoArrayValue} from '../createProtoArrayValue'\nimport {InsertMenu} from '../InsertMenu'\nimport {FIXME} from '../../../../../FIXME'\nimport {EditPortal} from '../../../../components/EditPortal'\n\ntype GridItemProps<Item extends ObjectItem> = Omit<ObjectItemProps<Item>, 'renderDefault'>\n\nconst PreviewCard = styled(Card)`\n  border-top-right-radius: inherit;\n  border-top-left-radius: inherit;\n  height: 100%;\n  position: relative;\n\n  @media (hover: hover) {\n    &:hover {\n      filter: brightness(95%);\n    }\n  }\n\n  &:focus:focus-visible {\n    box-shadow: 0 0 0 2px var(--card-focus-ring-color);\n  }\n`\n\nfunction getTone({\n  readOnly,\n  hasErrors,\n  hasWarnings,\n}: {\n  readOnly: boolean | undefined\n  hasErrors: boolean\n  hasWarnings: boolean\n}): CardTone {\n  if (readOnly) {\n    return 'transparent'\n  }\n  if (hasErrors) {\n    return 'critical'\n  }\n  return hasWarnings ? 'caution' : 'default'\n}\nconst MENU_POPOVER_PROPS = {portal: true, tone: 'default'} as const\nconst INITIAL_VALUE_CARD_STYLE = {\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  bottom: 0,\n  right: 0,\n} as const\n\nexport function GridItem<Item extends ObjectItem = ObjectItem>(props: GridItemProps<Item>) {\n  const {\n    schemaType,\n    parentSchemaType,\n    path,\n    readOnly,\n    onRemove,\n    value,\n    open,\n    onInsert,\n    onFocus,\n    onOpen,\n    onClose,\n    changed,\n    focused,\n    children,\n    inputProps: {renderPreview},\n  } = props\n\n  const sortable = parentSchemaType.options?.sortable !== false\n  const insertableTypes = parentSchemaType.of\n\n  const previewCardRef = useRef<FIXME | null>(null)\n\n  // this is here to make sure the item is visible if it's being edited behind a modal\n  useScrollIntoViewOnFocusWithin(previewCardRef, open)\n\n  useDidUpdate(focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus && previewCardRef.current) {\n      // Note: if editing an inline item, focus is handled by the item input itself and no ref is being set\n      previewCardRef.current?.focus()\n    }\n  })\n\n  const resolvingInitialValue = (value as any)._resolvingInitialValue\n\n  const handleDuplicate = useCallback(() => {\n    onInsert({\n      items: [{...value, _key: randomKey()}],\n      position: 'after',\n    })\n  }, [onInsert, value])\n\n  const handleInsert = useCallback(\n    (pos: 'before' | 'after', insertType: SchemaType) => {\n      onInsert({\n        items: [createProtoArrayValue(insertType)],\n        position: pos,\n      })\n    },\n    [onInsert]\n  )\n\n  const childPresence = useChildPresence(path, true)\n  const presence = useMemo(() => {\n    return childPresence.length === 0 ? null : (\n      <FieldPresence presence={childPresence} maxAvatars={1} />\n    )\n  }, [childPresence])\n\n  const childValidation = useChildValidation(path, true)\n  const validation = useMemo(() => {\n    return childValidation.length === 0 ? null : (\n      <Box marginLeft={1} paddingX={1} paddingY={3}>\n        <FormFieldValidationStatus validation={childValidation} __unstable_showSummary />\n      </Box>\n    )\n  }, [childValidation])\n\n  const hasErrors = childValidation.some((v) => v.level === 'error')\n  const hasWarnings = childValidation.some((v) => v.level === 'warning')\n\n  const menu = useMemo(\n    () =>\n      readOnly ? null : (\n        <MenuButton\n          button={<Button padding={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n          id={`${props.inputId}-menuButton`}\n          menu={\n            <Menu>\n              <MenuItem text=\"Remove\" tone=\"critical\" icon={TrashIcon} onClick={onRemove} />\n              <MenuItem text=\"Duplicate\" icon={DuplicateIcon} onClick={handleDuplicate} />\n              <InsertMenu types={insertableTypes} onInsert={handleInsert} />\n            </Menu>\n          }\n          popover={MENU_POPOVER_PROPS}\n        />\n      ),\n    [handleDuplicate, handleInsert, onRemove, insertableTypes, props.inputId, readOnly]\n  )\n\n  const tone = getTone({readOnly, hasErrors, hasWarnings})\n\n  const item = (\n    <CellLayout\n      menu={menu}\n      presence={presence}\n      validation={validation}\n      tone={tone}\n      radius={2}\n      border\n      focused={focused}\n      dragHandle={sortable}\n      selected={open}\n    >\n      <PreviewCard\n        tone=\"inherit\"\n        overflow=\"auto\"\n        forwardedAs=\"button\"\n        data-ui=\"PreviewCard\"\n        data-as=\"button\"\n        type=\"button\"\n        flex={1}\n        tabIndex={0}\n        disabled={resolvingInitialValue}\n        onClick={onOpen}\n        ref={previewCardRef}\n        onFocus={onFocus}\n        __unstable_focusRing\n      >\n        {renderPreview({\n          schemaType,\n          value,\n          layout: 'media',\n          withBorder: false,\n          withShadow: false,\n        })}\n        {resolvingInitialValue && (\n          <Card as={Flex} style={INITIAL_VALUE_CARD_STYLE}>\n            <Flex align=\"center\" justify=\"center\" gap={1} padding={1}>\n              <Box padding={3}>\n                <Spinner muted />\n              </Box>\n              <Text muted size={1}>\n                Resolving initial value…\n              </Text>\n            </Flex>\n          </Card>\n        )}\n      </PreviewCard>\n    </CellLayout>\n  )\n\n  const itemTypeTitle = getSchemaTypeTitle(schemaType)\n  return (\n    <>\n      <ChangeIndicator path={path} isChanged={changed} hasFocus={Boolean(focused)}>\n        {item}\n      </ChangeIndicator>\n      {open && (\n        <EditPortal\n          header={readOnly ? `View ${itemTypeTitle}` : `Edit ${itemTypeTitle}`}\n          type={parentSchemaType?.options?.modal?.type || 'dialog'}\n          width={parentSchemaType?.options?.modal?.width ?? 1}\n          id={value._key}\n          onClose={onClose}\n          legacy_referenceElement={previewCardRef.current}\n        >\n          {children}\n        </EditPortal>\n      )}\n    </>\n  )\n}\n","import {Box, Card, Code, Popover, Stack, Text, Theme, useClickOutside} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {BulbOutlineIcon, UnknownIcon} from '@sanity/icons'\nimport {resolveTypeName} from '@sanity/util/content'\nimport styled from 'styled-components'\n\nconst PopoverCard = styled(Card)`\n  max-width: ${({theme}: {theme: Theme}) => theme.sanity.container[1]}px;\n`\n\ninterface Props {\n  value: unknown\n  onFocus?: (event: React.FocusEvent) => void\n  vertical?: boolean\n}\n\nexport function IncompatibleItemType(props: Props) {\n  const {value, onFocus, vertical, ...rest} = props\n  const [showDetails, setShowDetails] = React.useState(false)\n  const [popoverRef, setPopoverRef] = React.useState<HTMLElement | null>(null)\n\n  useClickOutside(() => setShowDetails(false), [popoverRef])\n\n  const handleKeyDown = React.useCallback((e: any) => {\n    if (e.key === 'Escape' || e.key === 'Tab') {\n      setShowDetails(false)\n    }\n  }, [])\n\n  const handleShowDetails = useCallback(() => {\n    setShowDetails((v) => !v)\n  }, [])\n\n  const typeName = resolveTypeName(value)\n  return (\n    <Popover\n      open={showDetails}\n      ref={setPopoverRef}\n      onKeyDown={handleKeyDown}\n      portal\n      constrainSize\n      tone=\"default\"\n      content={\n        <PopoverCard margin={1} padding={3} onKeyDown={handleKeyDown} tabIndex={0} overflow=\"auto\">\n          <Stack space={4}>\n            <Box>\n              <Text weight=\"semibold\">Why is this happening?</Text>\n            </Box>\n            <Text size={1}>\n              The current schema does not declare items of type <code>{typeName}</code> as valid for\n              this list. This could mean that the type has been removed as a valid item type, or\n              that someone else has added it to their own local schema that is not yet deployed.\n            </Text>\n            <Box>\n              <Text size={1}>\n                <BulbOutlineIcon /> You can still move or delete this item, but it cannot be edited\n                since the schema definition for its type is nowhere to be found.\n              </Text>\n            </Box>\n            <Stack space={2}>\n              <Text size={1} weight=\"semibold\">\n                JSON representation of this item:\n              </Text>\n              <Card padding={2} overflow=\"auto\" border>\n                <Code size={1} as=\"pre\" language=\"json\">\n                  {JSON.stringify(value, null, 2)}\n                </Code>\n              </Card>\n            </Stack>\n          </Stack>\n        </PopoverCard>\n      }\n    >\n      <Card\n        as=\"button\"\n        type=\"button\"\n        radius={2}\n        tone=\"inherit\"\n        paddingX={2}\n        paddingY={3}\n        style={{height: '100%'}}\n        onFocus={onFocus}\n        onClick={handleShowDetails}\n        onKeyDown={handleKeyDown}\n        __unstable_focusRing\n        {...rest}\n      >\n        <Stack space={4} marginTop={2}>\n          <Box margin={1}>\n            <Text align=\"center\" size={4}>\n              <UnknownIcon />\n            </Text>\n          </Box>\n          <Text align=\"center\" size={1}>\n            Items of type <code>{typeName}</code> is not valid for this list\n          </Text>\n        </Stack>\n      </Card>\n    </Popover>\n  )\n}\n","import React, {useCallback, useId} from 'react'\nimport {EllipsisVerticalIcon, TrashIcon} from '@sanity/icons'\nimport {Button, Menu, MenuButton, MenuItem} from '@sanity/ui'\nimport {ArrayItemError} from '../../../../store'\nimport {useFormCallbacks} from '../../../../studio/contexts/FormCallbacks'\nimport {PatchEvent, unset} from '../../../../patch'\nimport {CellLayout} from '../../layouts/CellLayout'\nimport {IncompatibleItemType} from './IncompatibleItemType'\n\nconst MENU_POPOVER_PROPS = {portal: true, tone: 'default'} as const\n\nexport function ErrorItem(props: {member: ArrayItemError; sortable?: boolean}) {\n  const {member, sortable} = props\n  const id = useId()\n  const {onChange} = useFormCallbacks()\n\n  const handleRemove = useCallback(() => {\n    onChange(PatchEvent.from([unset([{_key: member.key}])]))\n  }, [onChange, member.key])\n\n  return (\n    <CellLayout\n      dragHandle={sortable}\n      tone=\"caution\"\n      style={{height: '100%'}}\n      menu={\n        <MenuButton\n          button={<Button padding={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n          id={`${id}-menuButton`}\n          menu={\n            <Menu>\n              <MenuItem text=\"Remove\" tone=\"critical\" icon={TrashIcon} onClick={handleRemove} />\n            </Menu>\n          }\n          popover={MENU_POPOVER_PROPS}\n        />\n      }\n    >\n      {member.error.type === 'INVALID_ITEM_TYPE' ? (\n        <IncompatibleItemType value={member.error.value} vertical />\n      ) : (\n        <div>Unexpected Error: {member.error.type}</div>\n      )}\n    </CellLayout>\n  )\n}\n","/* eslint-disable react/jsx-handler-names */\nimport {Card, Stack, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {Item, List} from '../../common/list'\nimport {ArrayOfObjectsInputProps, ObjectItem, ObjectItemProps} from '../../../../types'\nimport {ArrayOfObjectsItem} from '../../../../members'\nimport {createProtoArrayValue} from '../createProtoArrayValue'\nimport {UploadTargetCard} from '../../common/UploadTargetCard'\nimport {ArrayOfObjectsFunctions} from '../ArrayOfObjectsFunctions'\nimport {GridItem} from './GridItem'\nimport {ErrorItem} from './ErrorItem'\n\nconst EMPTY: [] = []\n\nexport function GridArrayInput<Item extends ObjectItem>(props: ArrayOfObjectsInputProps<Item>) {\n  const {\n    schemaType,\n    onChange,\n    value = EMPTY,\n    readOnly,\n    members,\n    elementProps,\n    resolveUploader,\n    onInsert,\n    onItemMove,\n    onUpload,\n    renderPreview,\n    renderField,\n    renderInput,\n    arrayFunctions: ArrayFunctions = ArrayOfObjectsFunctions,\n  } = props\n\n  const handlePrepend = useCallback(\n    (item: Item) => {\n      onInsert({items: [item], position: 'before', referenceItem: 0})\n    },\n    [onInsert]\n  )\n\n  const handleAppend = useCallback(\n    (item: Item) => {\n      onInsert({items: [item], position: 'after', referenceItem: -1})\n    },\n    [onInsert]\n  )\n\n  const sortable = schemaType.options?.sortable !== false\n\n  const renderItem = useCallback((itemProps: Omit<ObjectItemProps, 'renderDefault'>) => {\n    // todo: consider using a different item component for references\n    return <GridItem {...itemProps} />\n  }, [])\n\n  return (\n    <Stack space={3}>\n      <UploadTargetCard\n        types={schemaType.of}\n        resolveUploader={resolveUploader}\n        onUpload={onUpload}\n        {...elementProps}\n        tabIndex={0}\n      >\n        <Stack data-ui=\"ArrayInput__content\" space={3}>\n          {members?.length === 0 && (\n            <Card padding={3} border style={{borderStyle: 'dashed'}} radius={2}>\n              <Text align=\"center\" muted size={1}>\n                {schemaType.placeholder || <>No items</>}\n              </Text>\n            </Card>\n          )}\n          {members?.length > 0 && (\n            <Card border radius={1}>\n              <List\n                axis=\"xy\"\n                lockAxis=\"xy\"\n                columns={[2, 3, 4]}\n                gap={3}\n                padding={1}\n                margin={1}\n                onItemMove={onItemMove}\n                sortable={sortable}\n              >\n                {members.map((member, index) => (\n                  <Item key={member.key} sortable={sortable} index={index} flex={1}>\n                    {member.kind === 'item' && (\n                      <ArrayOfObjectsItem\n                        member={member}\n                        renderItem={renderItem}\n                        renderField={renderField}\n                        renderInput={renderInput}\n                        renderPreview={renderPreview}\n                      />\n                    )}\n                    {member.kind === 'error' && <ErrorItem sortable={sortable} member={member} />}\n                  </Item>\n                ))}\n              </List>\n            </Card>\n          )}\n        </Stack>\n      </UploadTargetCard>\n\n      <ArrayFunctions\n        onChange={onChange}\n        onItemAppend={handleAppend}\n        onItemPrepend={handlePrepend}\n        onValueCreate={createProtoArrayValue}\n        readOnly={readOnly}\n        schemaType={schemaType}\n        value={value}\n      />\n    </Stack>\n  )\n}\n","/* eslint-disable react/jsx-handler-names */\nimport {Card, Stack, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {Item, List} from '../../common/list'\nimport {ArrayOfObjectsInputProps, ObjectItem} from '../../../../types'\nimport {ArrayOfObjectsItem} from '../../../../members'\n\nimport {createProtoArrayValue} from '../createProtoArrayValue'\nimport {UploadTargetCard} from '../../common/UploadTargetCard'\nimport {ArrayOfObjectsFunctions} from '../ArrayOfObjectsFunctions'\nimport {ErrorItem} from './ErrorItem'\n\nconst EMPTY: [] = []\n\nexport function ListArrayInput<Item extends ObjectItem>(props: ArrayOfObjectsInputProps<Item>) {\n  const {\n    schemaType,\n    onChange,\n    value = EMPTY,\n    readOnly,\n    members,\n    elementProps,\n    resolveUploader,\n    onInsert,\n    onItemMove,\n    onUpload,\n    renderPreview,\n    renderField,\n    renderItem,\n    renderInput,\n    arrayFunctions: ArrayFunctions = ArrayOfObjectsFunctions,\n  } = props\n\n  const handlePrepend = useCallback(\n    (item: Item) => {\n      onInsert({items: [item], position: 'before', referenceItem: 0})\n    },\n    [onInsert]\n  )\n\n  const handleAppend = useCallback(\n    (item: Item) => {\n      onInsert({items: [item], position: 'after', referenceItem: -1})\n    },\n    [onInsert]\n  )\n\n  const sortable = schemaType.options?.sortable !== false\n\n  return (\n    <Stack space={3}>\n      <UploadTargetCard\n        types={schemaType.of}\n        resolveUploader={resolveUploader}\n        onUpload={onUpload}\n        {...elementProps}\n        tabIndex={0}\n      >\n        <Stack data-ui=\"ArrayInput__content\" space={3}>\n          {members.length === 0 ? (\n            <Card padding={3} border style={{borderStyle: 'dashed'}} radius={2}>\n              <Text align=\"center\" muted size={1}>\n                {schemaType.placeholder || <>No items</>}\n              </Text>\n            </Card>\n          ) : (\n            <Card border radius={1}>\n              <List gap={1} paddingY={1} onItemMove={onItemMove} sortable={sortable}>\n                {members.map((member, index) => (\n                  <Item key={member.key} sortable={sortable} index={index}>\n                    {member.kind === 'item' && (\n                      <ArrayOfObjectsItem\n                        member={member}\n                        renderItem={renderItem}\n                        renderField={renderField}\n                        renderInput={renderInput}\n                        renderPreview={renderPreview}\n                      />\n                    )}\n                    {member.kind === 'error' && (\n                      <ErrorItem\n                        sortable={sortable}\n                        member={member}\n                        onRemove={() => props.onItemRemove(member.key)}\n                      />\n                    )}\n                  </Item>\n                ))}\n              </List>\n            </Card>\n          )}\n        </Stack>\n      </UploadTargetCard>\n\n      <ArrayFunctions\n        onChange={onChange}\n        onItemAppend={handleAppend}\n        onItemPrepend={handlePrepend}\n        onValueCreate={createProtoArrayValue}\n        readOnly={readOnly}\n        schemaType={schemaType}\n        value={value}\n      />\n    </Stack>\n  )\n}\n","import React from 'react'\nimport {ArrayOfObjectsInputProps} from '../../../types'\nimport {GridArrayInput} from './Grid/GridArrayInput'\nimport {ListArrayInput} from './List/ListArrayInput'\n\n/**\n * @beta\n */\nexport function ArrayOfObjectsInput(props: ArrayOfObjectsInputProps) {\n  const isGrid = props.schemaType.options?.layout === 'grid'\n  return isGrid ? <GridArrayInput {...props} /> : <ListArrayInput {...props} />\n}\n","import {ArraySchemaType} from '@sanity/types'\nimport {ComponentType} from 'react'\nimport * as is from '../../utils/is'\nimport {ArrayOfOptionsInput} from '../../inputs/arrays/ArrayOfOptionsInput'\nimport {PortableTextInput} from '../../inputs/PortableText/PortableTextInput'\nimport {TagsArrayInput} from '../../inputs/TagsArrayInput'\nimport {ArrayOfPrimitivesInput} from '../../inputs/arrays/ArrayOfPrimitivesInput'\nimport {ArrayOfObjectsInput} from '../../inputs/arrays/ArrayOfObjectsInput'\n\nconst PRIMITIVES = ['string', 'number', 'boolean']\n\nexport function isArrayOfPrimitives(type: ArraySchemaType): boolean {\n  return type.of.every((ofType) => PRIMITIVES.includes(ofType.jsonType))\n}\n\nfunction isStringArray(type: ArraySchemaType): type is ArraySchemaType<string> {\n  return type.of.length === 1 && is.type('string', type.of[0])\n}\n\nfunction isTagsArray(type: ArraySchemaType<string>): boolean {\n  return type.options?.layout === 'tags'\n}\n\nfunction isPortableText(type: ArraySchemaType): boolean {\n  // TODO: better testing here, not only for type 'block' !\n  return type.of.some((memberType) => is.type('block', memberType))\n}\n\nfunction hasListOptions(type: ArraySchemaType): boolean {\n  return Boolean(type.options?.list)\n}\n\nexport function resolveArrayInput(type: ArraySchemaType): ComponentType<any> {\n  if (isStringArray(type) && isTagsArray(type)) {\n    return TagsArrayInput\n  }\n\n  // Schema provides predefines list\n  if (hasListOptions(type)) {\n    return ArrayOfOptionsInput\n  }\n\n  // Special component for array of primitive values\n  if (isArrayOfPrimitives(type)) {\n    return ArrayOfPrimitivesInput\n  }\n\n  // Use Portable Text editor if portable text.\n  if (isPortableText(type)) {\n    return PortableTextInput\n  }\n\n  return ArrayOfObjectsInput\n}\n","import {isTitledListValue, TitledListValue} from '@sanity/types'\nimport {Box, Card, Flex, Inline, Radio, Select, Stack, Text} from '@sanity/ui'\nimport {capitalize} from 'lodash'\nimport React, {useId, forwardRef, useCallback, useMemo} from 'react'\nimport {ChangeIndicator} from '../../changeIndicators'\nimport {PatchEvent, set, unset} from '../patch'\nimport {StringInputProps} from '../types'\n\nfunction toSelectItem(\n  option: TitledListValue<string | number> | string | number\n): TitledListValue<string | number> {\n  return isTitledListValue(option) ? option : {title: capitalize(`${option}`), value: option}\n}\n\nconst EMPTY_ITEM = {title: '', value: undefined}\n\n/**\n * @beta\n */\nexport function SelectInput(props: StringInputProps) {\n  const {\n    value,\n    readOnly,\n    validationError,\n    schemaType,\n    onChange,\n    path,\n    changed,\n    focused,\n    elementProps,\n  } = props\n  const items = useMemo(\n    () => (schemaType.options?.list || []).map(toSelectItem),\n    [schemaType.options?.list]\n  )\n  const currentItem = items.find((item) => item.value === value)\n  const isRadio = schemaType.options && schemaType.options.layout === 'radio'\n\n  const itemFromOptionValue = useCallback(\n    (optionValue: any) => {\n      const index = Number(optionValue)\n\n      return items[index]\n    },\n    [items]\n  )\n\n  const optionValueFromItem = useCallback(\n    (item: any) => {\n      return String(items.indexOf(item))\n    },\n    [items]\n  )\n\n  const inputId = useId()\n\n  const handleChange = React.useCallback(\n    (nextItem: TitledListValue<string | number> | null) => {\n      onChange(\n        PatchEvent.from(typeof nextItem?.value === 'undefined' ? unset() : set(nextItem.value))\n      )\n    },\n    [onChange]\n  )\n\n  const handleSelectChange = useCallback(\n    (event: React.ChangeEvent<HTMLSelectElement>) => {\n      const nextItem = itemFromOptionValue(event.currentTarget.value)\n\n      if (!nextItem) {\n        handleChange(EMPTY_ITEM)\n        return\n      }\n\n      handleChange(nextItem)\n    },\n    [handleChange, itemFromOptionValue]\n  )\n\n  const content = isRadio ? (\n    <RadioSelect\n      {...elementProps}\n      value={currentItem}\n      inputId={inputId}\n      items={items}\n      direction={schemaType.options?.direction || 'vertical'}\n      customValidity={validationError}\n      onChange={handleChange}\n    />\n  ) : (\n    <Select\n      {...elementProps}\n      customValidity={validationError}\n      value={optionValueFromItem(currentItem)}\n      onChange={handleSelectChange}\n    >\n      {[EMPTY_ITEM, ...items].map((item, i) => (\n        <option key={`${i - 1}`} value={i - 1}>\n          {item.title}\n        </option>\n      ))}\n    </Select>\n  )\n  return (\n    <ChangeIndicator path={path} isChanged={changed} hasFocus={!!focused}>\n      {content}\n    </ChangeIndicator>\n  )\n}\n\nconst RadioSelect = forwardRef(function RadioSelect(\n  props: {\n    items: TitledListValue<string | number>[]\n    value?: TitledListValue<string | number>\n    direction: 'horizontal' | 'vertical'\n    readOnly?: boolean\n    onChange: (value: TitledListValue<string | number> | null) => void\n    onFocus: (event: React.FocusEvent<HTMLElement>) => void\n    customValidity?: string\n    inputId?: string\n  },\n\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const {items, value, onChange, onFocus, readOnly, customValidity, direction, inputId} = props\n\n  const Layout = direction === 'horizontal' ? Inline : Stack\n  return (\n    <Card border padding={3} radius={1}>\n      <Layout space={3} role=\"group\">\n        {items.map((item, index) => (\n          <RadioSelectItem\n            customValidity={customValidity}\n            inputId={inputId}\n            item={item}\n            key={index}\n            onChange={onChange}\n            onFocus={onFocus}\n            readOnly={readOnly}\n            ref={index === 0 ? ref : null}\n            value={value}\n          />\n        ))}\n      </Layout>\n    </Card>\n  )\n})\n\nconst RadioSelectItem = forwardRef(function RadioSelectItem(\n  props: {\n    customValidity?: string\n    inputId?: string\n    item: TitledListValue<string | number>\n    onChange: (value: TitledListValue<string | number> | null) => void\n    onFocus: (event: React.FocusEvent<HTMLElement>) => void\n    readOnly?: boolean\n    value?: TitledListValue<string | number>\n  },\n\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const {customValidity, inputId, item, onChange, onFocus, readOnly, value} = props\n\n  const handleChange = useCallback(() => {\n    onChange(item)\n  }, [item, onChange])\n\n  return (\n    <Flex as=\"label\" align=\"center\">\n      <Radio\n        ref={ref}\n        checked={value === item}\n        onChange={handleChange}\n        onFocus={onFocus}\n        readOnly={readOnly}\n        customValidity={customValidity}\n        name={inputId}\n      />\n\n      <Box marginLeft={2}>\n        <Text size={1} weight=\"semibold\">\n          {item.title}\n        </Text>\n      </Box>\n    </Flex>\n  )\n})\n","import React from 'react'\nimport {TextInput} from '@sanity/ui'\nimport {StringInputProps} from '../types'\n\n/**\n * @beta\n */\nexport function StringInput(props: StringInputProps) {\n  const {validationError, elementProps} = props\n  return <TextInput {...elementProps} customValidity={validationError} data-testid=\"string-input\" />\n}\n","import {StringSchemaType} from '@sanity/types'\nimport {SelectInput} from '../../inputs/SelectInput'\nimport {StringInput} from '../../inputs/StringInput'\nimport {getOption} from './helpers'\n\nexport function resolveStringInput(type: StringSchemaType) {\n  return getOption(type, 'list') ? SelectInput : StringInput\n}\n","import type {SchemaType, RuleSpec, SchemaValidationValue, Rule} from '@sanity/types'\n\nconst normalizeRules = (\n  validation: SchemaValidationValue | undefined,\n  type?: SchemaType\n): Rule[] => {\n  if (typeof validation === 'function') {\n    throw new Error(\n      `Schema type \"${\n        type?.name || '<not-found>'\n      }\"'s \\`validation\\` was not run though \\`inferFromSchema\\``\n    )\n  }\n  if (!validation) return []\n  if (Array.isArray(validation)) return validation as Rule[]\n  return [validation]\n}\n\n/**\n * Finds the first matching validation rule spec from a Rule class instance.\n *\n * @internal\n * Note: This accesses private fields of the rule.\n */\nexport function getValidationRule<RuleFlag extends RuleSpec['flag']>(\n  type: SchemaType | undefined,\n  ruleName: RuleFlag\n): Extract<RuleSpec, {flag: RuleFlag}> | null {\n  for (const rule of normalizeRules(type?.validation, type)) {\n    for (const ruleSpec of rule._rules) {\n      if (ruleSpec.flag === ruleName) {\n        return ruleSpec as Extract<RuleSpec, {flag: RuleFlag}>\n      }\n    }\n  }\n\n  return null\n}\n","import React from 'react'\n\nimport {TextInput} from '@sanity/ui'\nimport {getValidationRule} from '../utils/getValidationRule'\nimport {NumberInputProps} from '../types'\n\n/**\n * @beta\n */\nexport function NumberInput(props: NumberInputProps) {\n  const {schemaType, validationError, elementProps} = props\n\n  // Show numpad on mobile if only positive numbers is preferred\n  const minRule = getValidationRule(schemaType, 'min')\n  const integerRule = getValidationRule(schemaType, 'integer')\n  const precisionRule = getValidationRule(schemaType, 'precision')\n  const onlyPositiveNumber = typeof minRule?.constraint === 'number' && minRule?.constraint >= 0\n  const onlyIntegers = integerRule || precisionRule?.constraint === 0\n\n  // eslint-disable-next-line no-nested-ternary\n  const inputMode = onlyPositiveNumber ? (onlyIntegers ? 'numeric' : 'decimal') : 'text'\n\n  return (\n    <TextInput\n      {...elementProps}\n      type=\"number\"\n      step=\"any\"\n      inputMode={inputMode}\n      customValidity={validationError}\n      placeholder={schemaType.placeholder}\n      pattern={onlyPositiveNumber ? '[d]*' : undefined}\n      max={Number.MAX_SAFE_INTEGER}\n      min={Number.MIN_SAFE_INTEGER}\n    />\n  )\n}\n","import {NumberSchemaType} from '@sanity/types'\nimport {SelectInput} from '../../inputs/SelectInput'\nimport {NumberInput} from '../../inputs/NumberInput'\nimport {getOption} from './helpers'\n\nexport function resolveNumberInput(type: NumberSchemaType) {\n  return getOption(type, 'list') ? SelectInput : NumberInput\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {Box, Card, Checkbox, Flex, Switch} from '@sanity/ui'\nimport {BooleanInputProps} from '../types'\nimport {FormFieldHeaderText} from '../components/formField/FormFieldHeaderText'\nimport {FormFieldStatus} from '../components/formField/FormFieldStatus'\n\nconst CenterAlignedBox = styled(Box)`\n  align-self: center;\n`\n\nconst ZeroLineHeightBox = styled(Box)`\n  line-height: 0;\n`\n\n/**\n * @beta\n */\nexport function BooleanInput(props: BooleanInputProps) {\n  const {id, value, schemaType, readOnly, elementProps} = props\n  const layout = schemaType.options?.layout || 'switch'\n\n  const indeterminate = typeof value !== 'boolean'\n  const checked = value || false\n\n  const LayoutSpecificInput = layout === 'checkbox' ? Checkbox : Switch\n\n  return (\n    <Card border data-testid=\"boolean-input\" radius={1}>\n      <Flex>\n        <ZeroLineHeightBox padding={3}>\n          <LayoutSpecificInput\n            label={schemaType.title}\n            {...elementProps}\n            indeterminate={indeterminate}\n            checked={checked}\n            style={{margin: -4}}\n            disabled={readOnly}\n          />\n        </ZeroLineHeightBox>\n        <Box flex={1} paddingY={3}>\n          <FormFieldHeaderText\n            description={schemaType.description}\n            inputId={id}\n            // validation={validation}\n            title={schemaType.title}\n          />\n        </Box>\n        <CenterAlignedBox paddingX={3} paddingY={1}>\n          <FormFieldStatus maxAvatars={1} position=\"top\">\n            {/*<FieldPresence maxAvatars={1} presence={presence} />*/}\n          </FormFieldStatus>\n        </CenterAlignedBox>\n      </Flex>\n    </Card>\n  )\n}\n","import React from 'react'\nimport {TextInput} from '@sanity/ui'\nimport {StringInputProps} from '../types'\n\n/**\n * @beta\n */\nexport type EmailInputProps = StringInputProps\n\n/**\n * @beta\n */\nexport function EmailInput(props: EmailInputProps) {\n  const {validationError, elementProps} = props\n  return (\n    <TextInput {...elementProps} type=\"email\" inputMode=\"email\" customValidity={validationError} />\n  )\n}\n","import React, {useCallback} from 'react'\nimport {Box, Button, Card, Code, Stack, Text} from '@sanity/ui'\nimport {TrashIcon} from '@sanity/icons'\nimport {FormPatch, PatchEvent, unset} from '../../patch'\nimport {Details} from '../../components/Details'\nimport {Alert} from '../../components/Alert'\nimport {isDev} from '../../../environment'\n\ntype Props = {\n  fieldNames: string[]\n  value?: Record<string, unknown>\n  onChange(patch: FormPatch): void\n  onChange(patch: FormPatch[]): void\n  onChange(patch: PatchEvent): void\n  readOnly?: boolean\n}\n\nexport function UnknownFields(props: Props) {\n  const {fieldNames, onChange, readOnly, value} = props\n  const fieldsLen = fieldNames.length\n\n  const handleUnsetClick = useCallback(\n    (fieldName: any) => {\n      onChange(unset([fieldName]))\n    },\n    [onChange]\n  )\n\n  return (\n    <Alert\n      status=\"warning\"\n      title={\n        <>\n          {fieldsLen === 1 && <>Unknown field found</>}\n          {fieldsLen > 1 && <>Unknown fields found</>}\n        </>\n      }\n    >\n      <Text as=\"p\" muted size={1}>\n        {fieldsLen === 1 ? (\n          <>Encountered a field that is not defined in the schema.</>\n        ) : (\n          <>Encountered {fieldsLen} fields that are not defined in the schema.</>\n        )}\n      </Text>\n\n      <Details marginTop={4} open={isDev} title={<>Developer info</>}>\n        <Box marginBottom={3}>\n          <Text as=\"p\" muted size={1}>\n            {fieldsLen === 1 ? (\n              <>\n                This field is not defined in the schema, which could mean that the field definition\n                has been removed or that someone else has added it to their own local project and\n                have not deployed their changes yet.\n              </>\n            ) : (\n              <>\n                These fields are not defined in the document’s schema, which could mean that the\n                field definitions have been removed or that someone else has added them to their own\n                local project and have not deployed their changes yet.\n              </>\n            )}\n          </Text>\n        </Box>\n\n        <Stack as=\"ul\" space={3}>\n          {fieldNames.map((fieldName) => {\n            return (\n              <UnknownField\n                key={fieldName}\n                fieldName={fieldName}\n                onUnsetClick={handleUnsetClick}\n                readOnly={readOnly}\n                value={value?.[fieldName]}\n              />\n            )\n          })}\n        </Stack>\n      </Details>\n    </Alert>\n  )\n}\n\nfunction UnknownField({\n  fieldName,\n  onUnsetClick,\n  readOnly,\n  value,\n}: {\n  fieldName: string\n  onUnsetClick: (fieldName: string) => void\n  readOnly?: boolean\n  value: unknown\n}) {\n  const handleUnsetClick = useCallback(() => {\n    onUnsetClick(fieldName)\n  }, [fieldName, onUnsetClick])\n\n  return (\n    <Card as=\"li\" padding={3} radius={2} shadow={1} tone=\"caution\">\n      <Stack space={2}>\n        <Card border radius={1}>\n          <Card borderBottom padding={3}>\n            <Code weight=\"medium\">{fieldName}</Code>\n          </Card>\n          <Box overflow=\"auto\" padding={3}>\n            <Code language=\"json\">{JSON.stringify(value, null, 2)}</Code>\n          </Box>\n        </Card>\n\n        {readOnly && (\n          <Text as=\"p\" muted size={1}>\n            This field is <strong>read only</strong> according to the document’s schema and cannot\n            be unset. If you want to be able to unset this in Studio, make sure you remove the{' '}\n            <code>readOnly</code> field from the enclosing type in the schema.\n          </Text>\n        )}\n\n        {!readOnly && (\n          <Button\n            icon={TrashIcon}\n            onClick={handleUnsetClick}\n            tone=\"critical\"\n            text={<>Remove field</>}\n          />\n        )}\n      </Stack>\n    </Card>\n  )\n}\n","import {Card} from '@sanity/ui'\nimport styled from 'styled-components'\n\n// The negative margins here removes the extra space between the tabs and the fields when inside of a grid\nexport const FieldGroupTabsWrapper = styled(Card)<{$level?: number}>`\n  margin-bottom: ${({$level, theme}) => ($level === 0 ? 0 : theme.sanity.space[5] * -1)}px;\n  padding-bottom: ${({$level, theme}) =>\n    $level === 0 ? theme.sanity.space[4] : theme.sanity.space[4]}px;\n`\n","import React, {forwardRef} from 'react'\nimport {Tab} from '@sanity/ui'\n\ninterface GroupType {\n  'aria-controls': string\n  autoFocus?: boolean\n  disabled?: boolean\n  icon?: React.ComponentType\n  name: string\n  onClick?: (value: string) => void\n  selected: boolean\n  title: string\n}\n\nexport const GroupTab = forwardRef(function GroupTab(\n  props: GroupType,\n  ref: React.Ref<HTMLButtonElement>\n) {\n  // Separate props for resolving conditional hidden groups\n  const {onClick} = props\n\n  // Here goes the content of our component\n  const handleClick = React.useCallback(() => {\n    onClick?.(props.name)\n  }, [props.name, onClick])\n\n  return (\n    <Tab\n      data-testid={`group-tab-${name}`}\n      size={1}\n      id={`${props.name}-tab`}\n      label={props.title}\n      ref={ref}\n      {...props}\n      onClick={handleClick}\n    />\n  )\n})\n\nexport const GroupOption = (props: Omit<GroupType, 'onClick' | 'autoFocus'>) => {\n  const {name, title, ...rest} = props\n  const {selected} = props\n\n  return (\n    <option\n      title={title}\n      value={name}\n      id={`${name}-tab`}\n      aria-controls={rest['aria-controls']}\n      data-testid={`group-select-${name}`}\n      aria-selected={selected ? 'true' : 'false'}\n    >\n      {title || name}\n    </option>\n  )\n}\n","import React, {useCallback} from 'react'\nimport {ElementQuery, Select, TabList} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {FormFieldGroup} from '../../../store'\nimport {GroupOption, GroupTab} from './GroupTab'\n\ninterface FieldGroupTabsProps {\n  disabled?: boolean\n  groups: FormFieldGroup[]\n  inputId?: string\n  onClick?: (name: string) => void\n  shouldAutoFocus?: boolean\n}\n\nconst Root = styled(ElementQuery)`\n  /* Hide on small screens */\n  &[data-eq-max~='0'] [data-ui='TabList'] {\n    display: none;\n  }\n\n  /* Hide on medium to large screens */\n  [data-ui='Select'] {\n    display: none;\n  }\n\n  /* Show on small screens */\n  &[data-eq-max~='0'] [data-ui='Select'] {\n    display: block;\n  }\n`\n\n/* For medium to large screens, use TabList and Tab from Sanity UI  */\nconst GroupTabs = ({\n  inputId,\n  groups,\n  onClick,\n  shouldAutoFocus = true,\n  disabled,\n}: FieldGroupTabsProps) => (\n  <TabList space={2} data-testid=\"field-group-tabs\">\n    {groups\n      .map((group) => {\n        return (\n          <GroupTab\n            aria-controls={`${inputId}-field-group-fields`}\n            autoFocus={shouldAutoFocus && group.selected}\n            disabled={disabled || group.disabled}\n            icon={group?.icon}\n            key={`${inputId}-${group.name}-tab`}\n            name={group.name}\n            onClick={onClick}\n            selected={Boolean(group.selected)}\n            title={group.title || group.name}\n          />\n        )\n      })\n      .filter(Boolean)}\n  </TabList>\n)\n\n/* For small screens, use Select from Sanity UI  */\nconst GroupSelect = ({\n  disabled,\n  groups,\n  inputId,\n  onSelect,\n  shouldAutoFocus = true,\n}: Omit<FieldGroupTabsProps, 'onClick'> & {onSelect: (name: string) => void}) => {\n  const handleSelect = useCallback(\n    (event: React.ChangeEvent<HTMLSelectElement>) => {\n      onSelect(event.currentTarget.value)\n    },\n    [onSelect]\n  )\n\n  return (\n    <Select\n      aria-label=\"Field groups\"\n      autoFocus={shouldAutoFocus}\n      data-testid=\"field-group-select\"\n      disabled={disabled}\n      fontSize={2}\n      muted\n      onChange={handleSelect}\n      value={groups.find((g) => g.selected)?.name}\n    >\n      {groups.map((group) => {\n        // Separate hidden in order to resolve it to a boolean type\n        return (\n          <GroupOption\n            aria-controls={`${inputId}-field-group-fields`}\n            disabled={group.disabled}\n            key={`${inputId}-${group.name}-tab`}\n            name={group.name}\n            selected={Boolean(group.selected)}\n            title={group.title || group.name}\n          />\n        )\n      })}\n    </Select>\n  )\n}\n\nexport const FieldGroupTabs = React.memo(function FieldGroupTabs({\n  disabled = false,\n  onClick,\n  ...props\n}: FieldGroupTabsProps) {\n  const handleClick = useCallback(\n    (groupName: any) => {\n      onClick?.(groupName)\n    },\n    [onClick]\n  )\n\n  return (\n    <Root data-testid=\"field-group-root\">\n      <GroupTabs {...props} disabled={disabled} onClick={handleClick} />\n      <GroupSelect {...props} disabled={disabled} onSelect={handleClick} />\n    </Root>\n  )\n})\n","import React, {memo, useCallback, useMemo} from 'react'\nimport {Grid, Stack} from '@sanity/ui'\nimport {ObjectInputProps} from '../../types'\nimport {ObjectInputMembers} from '../../members'\nimport {UnknownFields} from './UnknownFields'\nimport {FieldGroupTabsWrapper} from './ObjectInput.styled'\nimport {FieldGroupTabs} from './fieldGroups/FieldGroupTabs'\n\n/** @beta */\nexport const ObjectInput = memo(function ObjectInput(props: ObjectInputProps) {\n  const {\n    schemaType,\n    groups,\n    members,\n    onChange,\n    renderInput,\n    renderField,\n    renderItem,\n    renderPreview,\n    level,\n    value,\n    id,\n    path,\n    onFieldGroupSelect,\n  } = props\n\n  const {columns} = schemaType.options || {}\n\n  const renderedUnknownFields = useMemo(() => {\n    if (!schemaType.fields) {\n      return null\n    }\n\n    const knownFieldNames = schemaType.fields.map((field) => field.name)\n    const unknownFields = Object.keys(value || {}).filter(\n      (key) => !key.startsWith('_') && !knownFieldNames.includes(key)\n    )\n\n    if (unknownFields.length === 0) {\n      return null\n    }\n\n    return <UnknownFields fieldNames={unknownFields} value={value} onChange={onChange} />\n  }, [onChange, schemaType.fields, value])\n\n  const renderObjectMembers = useCallback(\n    () => (\n      <ObjectInputMembers\n        members={members}\n        renderInput={renderInput}\n        renderField={renderField}\n        renderItem={renderItem}\n        renderPreview={renderPreview}\n      />\n    ),\n    [members, renderField, renderInput, renderItem, renderPreview]\n  )\n\n  if (members.length === 0) {\n    return null\n  }\n  return (\n    <Stack space={5}>\n      {groups.length > 0 ? (\n        <FieldGroupTabsWrapper $level={level} data-testid=\"field-groups\">\n          <FieldGroupTabs\n            groups={groups}\n            inputId={id}\n            onClick={onFieldGroupSelect}\n            shouldAutoFocus={path.length === 0}\n          />\n        </FieldGroupTabsWrapper>\n      ) : null}\n\n      {columns ? (\n        <Grid columns={columns} gap={4} marginTop={1}>\n          {renderObjectMembers()}\n        </Grid>\n      ) : (\n        renderObjectMembers()\n      )}\n\n      {renderedUnknownFields}\n    </Stack>\n  )\n})\n","import {Card, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\n\ninterface CalendarDayProps {\n  date: Date\n  focused?: boolean\n  onSelect: (date: Date) => void\n  isCurrentMonth?: boolean\n  isToday: boolean\n  selected?: boolean\n}\n\nexport function CalendarDay(props: CalendarDayProps) {\n  const {date, focused, isCurrentMonth, isToday, onSelect, selected} = props\n\n  const handleClick = useCallback(() => {\n    onSelect(date)\n  }, [date, onSelect])\n\n  return (\n    <div aria-selected={selected} data-ui=\"CalendarDay\">\n      <Card\n        aria-label={date.toDateString()}\n        aria-pressed={selected}\n        as=\"button\"\n        __unstable_focusRing\n        data-weekday\n        data-focused={focused ? 'true' : ''}\n        role=\"button\"\n        tabIndex={-1}\n        onClick={handleClick}\n        padding={3}\n        radius={2}\n        selected={selected}\n        tone={isToday || selected ? 'primary' : 'default'}\n      >\n        <Text\n          muted={!selected && !isCurrentMonth}\n          style={{textAlign: 'center'}}\n          weight={isCurrentMonth ? 'medium' : 'regular'}\n        >\n          {date.getDate()}\n        </Text>\n      </Card>\n    </div>\n  )\n}\n","import {range} from 'lodash'\n\nexport const MONTH_NAMES = [\n  'January',\n  'February',\n  'March',\n  'April',\n  'May',\n  'June',\n  'July',\n  'August',\n  'September',\n  'October',\n  'November',\n  'December',\n]\n\nexport const WEEK_DAY_NAMES = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n\nexport const HOURS_24 = range(0, 24)\n\nexport const ARROW_KEYS = ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight']\n\nexport const DEFAULT_TIME_PRESETS = [\n  [0, 0],\n  [6, 0],\n  [12, 0],\n  [18, 0],\n  [23, 59],\n]\n\n// all weekdays except first\nexport const TAIL_WEEKDAYS = [1, 2, 3, 4, 5, 6]\n","import {addDays, eachWeekOfInterval, getWeek, lastDayOfMonth, startOfMonth} from 'date-fns'\nimport {TAIL_WEEKDAYS} from './constants'\n\nexport const getWeekStartsOfMonth = (date: Date): Date[] => {\n  const firstDay = startOfMonth(date)\n  return eachWeekOfInterval({\n    start: firstDay,\n    end: lastDayOfMonth(firstDay),\n  })\n}\n\nexport const getWeekDaysFromWeekStarts = (weekStarts: Date[]): Date[][] => {\n  return weekStarts.map((weekStart) => [\n    weekStart,\n    ...TAIL_WEEKDAYS.map((d) => addDays(weekStart, d)),\n  ])\n}\n\ntype Week = {\n  number: number\n  days: Date[]\n}\n\nexport const getWeeksOfMonth = (date: Date): Week[] =>\n  getWeekDaysFromWeekStarts(getWeekStartsOfMonth(date)).map(\n    (days): Week => ({\n      number: getWeek(days[0]),\n      days,\n    })\n  )\n\nexport const formatTime = (hours: number, minutes: number): string =>\n  `${`${hours}`.padStart(2, '0')}:${`${minutes}`.padStart(2, '0')}`\n","import {Box, Grid, Text} from '@sanity/ui'\nimport {isSameDay, isSameMonth} from 'date-fns'\nimport React from 'react'\nimport {CalendarDay} from './CalendarDay'\nimport {WEEK_DAY_NAMES} from './constants'\nimport {getWeeksOfMonth} from './utils'\n\ninterface CalendarMonthProps {\n  date: Date\n  focused?: Date\n  selected?: Date\n  onSelect: (date: Date) => void\n  hidden?: boolean\n}\n\nexport function CalendarMonth(props: CalendarMonthProps) {\n  return (\n    <Box aria-hidden={props.hidden || false} data-ui=\"CalendarMonth\">\n      <Grid gap={1} style={{gridTemplateColumns: 'repeat(7, minmax(44px, 46px))'}}>\n        {WEEK_DAY_NAMES.map((weekday) => (\n          <Box key={weekday} paddingY={2}>\n            <Text size={1} weight=\"medium\" style={{textAlign: 'center'}}>\n              {weekday}\n            </Text>\n          </Box>\n        ))}\n\n        {getWeeksOfMonth(props.date).map((week, weekIdx) =>\n          week.days.map((date, dayIdx) => {\n            const focused = props.focused && isSameDay(date, props.focused)\n            const selected = props.selected && isSameDay(date, props.selected)\n            const isToday = isSameDay(date, new Date())\n            const isCurrentMonth = props.focused && isSameMonth(date, props.focused)\n\n            return (\n              <CalendarDay\n                date={date}\n                focused={focused}\n                isCurrentMonth={isCurrentMonth}\n                isToday={isToday}\n                // eslint-disable-next-line react/no-array-index-key\n                key={`${weekIdx}-${dayIdx}`}\n                onSelect={props.onSelect}\n                selected={selected}\n              />\n            )\n          })\n        )}\n      </Grid>\n    </Box>\n  )\n}\n","export const features = {\n  dayPresets: false,\n  timePresets: false,\n}\n","import React from 'react'\nimport {TextInput} from '@sanity/ui'\n\ntype TextInputProps = React.ComponentProps<typeof TextInput>\n\n// todo: delete this when v0.34 of @sanity/ui is out\ntype Workaround = any\n\ntype Props = Workaround &\n  Omit<TextInputProps, 'onChange'> & {\n    onChange?: (\n      event: React.FocusEvent<HTMLInputElement> | React.ChangeEvent<HTMLInputElement>\n    ) => void\n  }\n\n/**\n * A TextInput that only emit onChange when it has to\n * By default it will only emit onChange when: 1) user hits enter or 2) user leaves the\n * field (e.g. onBlur) and the input value at this time is different from the given `value` prop\n */\nexport const LazyTextInput = React.forwardRef(function LazyTextInput(\n  {onChange, onBlur, onKeyPress, value, ...rest}: Props,\n  forwardedRef: React.ForwardedRef<HTMLInputElement>\n) {\n  const [inputValue, setInputValue] = React.useState<string>()\n\n  const handleChange = React.useCallback((event: any) => {\n    setInputValue(event.currentTarget.value)\n  }, [])\n\n  const checkEvent = React.useCallback(\n    (event: any) => {\n      const currentValue = event.currentTarget.value\n      if (currentValue !== `${value}`) {\n        if (onChange) {\n          onChange(event)\n        }\n      }\n      setInputValue(undefined)\n    },\n    [onChange, value]\n  )\n\n  const handleBlur = React.useCallback(\n    (e: any) => {\n      checkEvent(e)\n      if (onBlur) {\n        onBlur(e)\n      }\n    },\n    [checkEvent, onBlur]\n  )\n\n  const handleKeyPress = React.useCallback(\n    (e: React.KeyboardEvent<HTMLInputElement>) => {\n      if (e.key === 'Enter') {\n        checkEvent(e)\n      }\n      if (onKeyPress) {\n        onKeyPress(e)\n      }\n    },\n    [checkEvent, onKeyPress]\n  )\n\n  return (\n    <TextInput\n      {...rest}\n      data-testid=\"date-input\"\n      ref={forwardedRef}\n      value={inputValue === undefined ? value : inputValue}\n      onChange={handleChange}\n      onBlur={handleBlur}\n      onKeyPress={handleKeyPress}\n    />\n  )\n})\n","import React from 'react'\nimport {TextInput} from '@sanity/ui'\nimport {LazyTextInput} from '../LazyTextInput'\n\ntype Props = Omit<React.ComponentProps<typeof TextInput>, 'onChange' | 'value'> & {\n  value?: number\n  onChange: (year: number) => void\n}\n\nexport const YearInput = ({onChange, ...props}: Props) => {\n  const handleChange = React.useCallback(\n    (event: React.FocusEvent<HTMLInputElement> | React.ChangeEvent<HTMLInputElement>) => {\n      const numericValue = parseInt(event.currentTarget.value, 10)\n      if (!isNaN(numericValue)) {\n        onChange(numericValue)\n      }\n    },\n    [onChange]\n  )\n\n  return <LazyTextInput {...props} onChange={handleChange} inputMode=\"numeric\" />\n}\n","import {Box, Button, Flex, Grid, Select, Text, useForwardedRef} from '@sanity/ui'\nimport {ChevronLeftIcon, ChevronRightIcon} from '@sanity/icons'\nimport {addDays, addMonths, setDate, setHours, setMinutes, setMonth, setYear} from 'date-fns'\nimport {range} from 'lodash'\nimport React, {forwardRef, useCallback, useEffect} from 'react'\nimport {CalendarMonth} from './CalendarMonth'\nimport {ARROW_KEYS, HOURS_24, MONTH_NAMES, DEFAULT_TIME_PRESETS} from './constants'\nimport {features} from './features'\nimport {formatTime} from './utils'\nimport {YearInput} from './YearInput'\n\ntype CalendarProps = Omit<React.ComponentProps<'div'>, 'onSelect'> & {\n  selectTime?: boolean\n  selectedDate?: Date\n  timeStep?: number\n  onSelect: (date: Date) => void\n  focusedDate: Date\n  onFocusedDateChange: (index: Date) => void\n}\n\n// This is used to maintain focus on a child element of the calendar-grid between re-renders\n// When using arrow keys to move focus from a day in one month to another we are setting focus at the button for the day\n// after it has changed but *only* if we *already* had focus inside the calendar grid (e.g not if focus was on the \"next\n// year\" button, or any of the other controls)\n// When moving from the last day of a month that displays 6 weeks in the grid to a month that displays 5 weeks, current\n// focus gets lost on render, so this provides us with a stable element to help us preserve focus on a child element of\n// the calendar grid between re-renders\nconst PRESERVE_FOCUS_ELEMENT = (\n  <span\n    data-preserve-focus\n    style={{overflow: 'hidden', position: 'absolute', outline: 'none'}}\n    tabIndex={-1}\n  />\n)\n\nexport const Calendar = forwardRef(function Calendar(\n  props: CalendarProps,\n  forwardedRef: React.ForwardedRef<HTMLDivElement>\n) {\n  const {\n    selectTime,\n    onFocusedDateChange,\n    selectedDate = new Date(),\n    focusedDate = selectedDate,\n    timeStep = 1,\n    onSelect,\n    ...restProps\n  } = props\n\n  const setFocusedDate = useCallback(\n    (date: Date) => onFocusedDateChange(date),\n    [onFocusedDateChange]\n  )\n\n  const setFocusedDateMonth = useCallback(\n    (month: number) => setFocusedDate(setDate(setMonth(focusedDate, month), 1)),\n    [focusedDate, setFocusedDate]\n  )\n\n  const handleFocusedMonthChange = useCallback(\n    (e: React.FormEvent<HTMLSelectElement>) => setFocusedDateMonth(Number(e.currentTarget.value)),\n    [setFocusedDateMonth]\n  )\n\n  const moveFocusedDate = useCallback(\n    (by: number) => setFocusedDate(addMonths(focusedDate, by)),\n    [focusedDate, setFocusedDate]\n  )\n\n  const setFocusedDateYear = useCallback(\n    (year: number) => setFocusedDate(setYear(focusedDate, year)),\n    [focusedDate, setFocusedDate]\n  )\n\n  const handleDateChange = useCallback(\n    (date: Date) => {\n      onSelect(setMinutes(setHours(date, selectedDate.getHours()), selectedDate.getMinutes()))\n    },\n    [onSelect, selectedDate]\n  )\n\n  const handleMinutesChange = useCallback(\n    (event: React.FormEvent<HTMLSelectElement>) => {\n      const m = Number(event.currentTarget.value)\n      onSelect(setMinutes(selectedDate, m))\n    },\n    [onSelect, selectedDate]\n  )\n\n  const handleHoursChange = useCallback(\n    (event: React.FormEvent<HTMLSelectElement>) => {\n      const m = Number(event.currentTarget.value)\n      onSelect(setHours(selectedDate, m))\n    },\n    [onSelect, selectedDate]\n  )\n\n  const handleTimeChange = useCallback(\n    (hours: number, mins: number) => {\n      onSelect(setHours(setMinutes(selectedDate, mins), hours))\n    },\n    [onSelect, selectedDate]\n  )\n\n  const ref = useForwardedRef(forwardedRef)\n\n  const focusCurrentWeekDay = useCallback(() => {\n    ref.current?.querySelector<HTMLElement>(`[data-focused=\"true\"]`)?.focus()\n  }, [ref])\n\n  const handleKeyDown = useCallback(\n    (event: any) => {\n      if (!ARROW_KEYS.includes(event.key)) {\n        return\n      }\n      event.preventDefault()\n      if (event.target.hasAttribute('data-calendar-grid')) {\n        focusCurrentWeekDay()\n        return\n      }\n      if (event.key === 'ArrowUp') {\n        onFocusedDateChange(addDays(focusedDate, -7))\n      }\n      if (event.key === 'ArrowDown') {\n        onFocusedDateChange(addDays(focusedDate, 7))\n      }\n      if (event.key === 'ArrowLeft') {\n        onFocusedDateChange(addDays(focusedDate, -1))\n      }\n      if (event.key === 'ArrowRight') {\n        onFocusedDateChange(addDays(focusedDate, 1))\n      }\n      // set focus temporarily on this element to make sure focus is still inside the calendar-grid after re-render\n      ref.current?.querySelector<HTMLElement>('[data-preserve-focus]')?.focus()\n    },\n    [ref, focusCurrentWeekDay, onFocusedDateChange, focusedDate]\n  )\n\n  useEffect(() => {\n    focusCurrentWeekDay()\n  }, [focusCurrentWeekDay])\n\n  useEffect(() => {\n    const currentFocusInCalendarGrid = document.activeElement?.matches(\n      '[data-calendar-grid], [data-calendar-grid] [data-preserve-focus]'\n    )\n    if (\n      // Only move focus if it's currently in the calendar grid\n      currentFocusInCalendarGrid\n    ) {\n      focusCurrentWeekDay()\n    }\n  }, [ref, focusCurrentWeekDay, focusedDate])\n\n  const handleYesterdayClick = useCallback(\n    () => handleDateChange(addDays(new Date(), -1)),\n    [handleDateChange]\n  )\n\n  const handleTodayClick = useCallback(() => handleDateChange(new Date()), [handleDateChange])\n\n  const handleTomorrowClick = useCallback(\n    () => handleDateChange(addDays(new Date(), 1)),\n    [handleDateChange]\n  )\n\n  const handleNowClick = useCallback(() => onSelect(new Date()), [onSelect])\n\n  return (\n    <Box data-ui=\"Calendar\" {...restProps} ref={ref}>\n      {/* Select date */}\n      <Box padding={2}>\n        {/* Day presets */}\n        {features.dayPresets && (\n          <Grid columns={3} data-ui=\"CalendaryDayPresets\" gap={1}>\n            <Button text=\"Yesterday\" mode=\"bleed\" fontSize={1} onClick={handleYesterdayClick} />\n            <Button text=\"Today\" mode=\"bleed\" fontSize={1} onClick={handleTodayClick} />\n            <Button text=\"Tomorrow\" mode=\"bleed\" fontSize={1} onClick={handleTomorrowClick} />\n          </Grid>\n        )}\n\n        {/* Select month and year */}\n        <Flex>\n          <Box flex={1}>\n            <CalendarMonthSelect\n              moveFocusedDate={moveFocusedDate}\n              onChange={handleFocusedMonthChange}\n              value={focusedDate?.getMonth()}\n            />\n          </Box>\n          <Box marginLeft={2}>\n            <CalendarYearSelect\n              moveFocusedDate={moveFocusedDate}\n              onChange={setFocusedDateYear}\n              value={focusedDate.getFullYear()}\n            />\n          </Box>\n        </Flex>\n\n        {/* Selected month (grid of days) */}\n        <Box\n          data-calendar-grid\n          onKeyDown={handleKeyDown}\n          marginTop={2}\n          overflow=\"hidden\"\n          tabIndex={0}\n        >\n          <CalendarMonth\n            date={focusedDate}\n            focused={focusedDate}\n            onSelect={handleDateChange}\n            selected={selectedDate}\n          />\n          {PRESERVE_FOCUS_ELEMENT}\n        </Box>\n      </Box>\n\n      {/* Select time */}\n      {selectTime && (\n        <Box padding={2} style={{borderTop: '1px solid var(--card-border-color)'}}>\n          <Flex align=\"center\">\n            <Flex align=\"center\" flex={1}>\n              <Box>\n                <Select\n                  aria-label=\"Select hour\"\n                  value={selectedDate?.getHours()}\n                  onChange={handleHoursChange}\n                >\n                  {HOURS_24.map((h) => (\n                    <option key={h} value={h}>\n                      {`${h}`.padStart(2, '0')}\n                    </option>\n                  ))}\n                </Select>\n              </Box>\n\n              <Box paddingX={1}>\n                <Text>:</Text>\n              </Box>\n\n              <Box>\n                <Select\n                  aria-label=\"Select minutes\"\n                  value={selectedDate?.getMinutes()}\n                  onChange={handleMinutesChange}\n                >\n                  {range(0, 60, timeStep).map((m) => (\n                    <option key={m} value={m}>\n                      {`${m}`.padStart(2, '0')}\n                    </option>\n                  ))}\n                </Select>\n              </Box>\n            </Flex>\n\n            <Box marginLeft={2}>\n              <Button text=\"Set to current time\" mode=\"bleed\" onClick={handleNowClick} />\n            </Box>\n          </Flex>\n\n          {features.timePresets && (\n            <Flex direction=\"row\" justify=\"center\" align=\"center\" style={{marginTop: 5}}>\n              {DEFAULT_TIME_PRESETS.map(([hours, minutes]) => {\n                return (\n                  <CalendarTimePresetButton\n                    key={`${hours}-${minutes}`}\n                    hours={hours}\n                    minutes={minutes}\n                    onTimeChange={handleTimeChange}\n                    selectedDate={selectedDate}\n                  />\n                )\n              })}\n            </Flex>\n          )}\n        </Box>\n      )}\n    </Box>\n  )\n})\n\nfunction CalendarTimePresetButton(props: {\n  hours: number\n  minutes: number\n  onTimeChange: (hours: number, minutes: number) => void\n  selectedDate: Date\n}) {\n  const {hours, minutes, onTimeChange, selectedDate} = props\n  const formatted = formatTime(hours, minutes)\n\n  const handleClick = useCallback(() => {\n    onTimeChange(hours, minutes)\n  }, [hours, minutes, onTimeChange])\n\n  return (\n    <Button\n      text={formatted}\n      aria-label={`${formatted} on ${selectedDate.toDateString()}`}\n      mode=\"bleed\"\n      fontSize={1}\n      onClick={handleClick}\n    />\n  )\n}\n\nfunction CalendarMonthSelect(props: {\n  moveFocusedDate: (by: number) => void\n  onChange: (e: React.FormEvent<HTMLSelectElement>) => void\n  value?: number\n}) {\n  const {moveFocusedDate, onChange, value} = props\n\n  const handlePrevMonthClick = useCallback(() => moveFocusedDate(-1), [moveFocusedDate])\n\n  const handleNextMonthClick = useCallback(() => moveFocusedDate(1), [moveFocusedDate])\n\n  return (\n    <Flex flex={1}>\n      <Button\n        aria-label=\"Go to previous month\"\n        onClick={handlePrevMonthClick}\n        mode=\"bleed\"\n        icon={ChevronLeftIcon}\n        paddingX={2}\n        radius={0}\n      />\n      <Box flex={1}>\n        <Select radius={0} value={value} onChange={onChange}>\n          {MONTH_NAMES.map((m, i) => (\n            // eslint-disable-next-line react/no-array-index-key\n            <option key={i} value={i}>\n              {m}\n            </option>\n          ))}\n        </Select>\n      </Box>\n      <Button\n        aria-label=\"Go to next month\"\n        mode=\"bleed\"\n        icon={ChevronRightIcon}\n        onClick={handleNextMonthClick}\n        paddingX={2}\n        radius={0}\n      />\n    </Flex>\n  )\n}\n\nfunction CalendarYearSelect(props: {\n  moveFocusedDate: (by: number) => void\n  onChange: (year: number) => void\n  value?: number\n}) {\n  const {moveFocusedDate, onChange, value} = props\n\n  const handlePrevYearClick = useCallback(() => moveFocusedDate(-12), [moveFocusedDate])\n\n  const handleNextYearClick = useCallback(() => moveFocusedDate(12), [moveFocusedDate])\n\n  return (\n    <Flex>\n      <Button\n        aria-label=\"Previous year\"\n        onClick={handlePrevYearClick}\n        mode=\"bleed\"\n        icon={ChevronLeftIcon}\n        paddingX={2}\n        radius={0}\n      />\n      <YearInput value={value} onChange={onChange} radius={0} style={{width: 65}} />\n      <Button\n        aria-label=\"Next year\"\n        onClick={handleNextYearClick}\n        mode=\"bleed\"\n        icon={ChevronRightIcon}\n        paddingX={2}\n        radius={0}\n      />\n    </Flex>\n  )\n}\n","import React from 'react'\nimport {Calendar} from './calendar/Calendar'\n\nexport const DatePicker = React.forwardRef(function DatePicker(\n  props: Omit<React.ComponentProps<'div'>, 'onChange'> & {\n    value?: Date\n    onChange: (nextDate: Date) => void\n    selectTime?: boolean\n    timeStep?: number\n  },\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {value = new Date(), onChange, ...rest} = props\n  const [focusedDate, setFocusedDay] = React.useState<Date>()\n\n  const handleSelect = React.useCallback(\n    (nextDate: any) => {\n      onChange(nextDate)\n      setFocusedDay(undefined)\n    },\n    [onChange]\n  )\n\n  return (\n    <Calendar\n      {...rest}\n      ref={ref}\n      selectedDate={value}\n      onSelect={handleSelect}\n      focusedDate={focusedDate || value}\n      onFocusedDateChange={setFocusedDay}\n    />\n  )\n})\n","import React, {forwardRef, useCallback, useRef, useState} from 'react'\nimport FocusLock from 'react-focus-lock'\nimport {Box, Button, LayerProvider, Popover, useClickOutside, useForwardedRef} from '@sanity/ui'\nimport {CalendarIcon} from '@sanity/icons'\nimport {DatePicker} from './DatePicker'\nimport {LazyTextInput} from './LazyTextInput'\n\nexport interface DateTimeInputProps {\n  customValidity?: string\n  id?: string\n  inputValue?: string\n  onChange: (date: Date | null) => void\n  onInputChange?: (event: React.FocusEvent<HTMLInputElement>) => void\n  placeholder?: string\n  readOnly?: boolean\n  selectTime?: boolean\n  timeStep?: number\n  value?: Date\n}\n\nexport const DateTimeInput = forwardRef(function DateTimeInput(\n  props: DateTimeInputProps,\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const {value, inputValue, onInputChange, onChange, selectTime, timeStep, ...rest} = props\n  const [popoverRef, setPopoverRef] = useState<HTMLElement | null>(null)\n  const forwardedRef = useForwardedRef(ref)\n  const buttonRef = useRef(null)\n\n  const [isPickerOpen, setPickerOpen] = useState(false)\n\n  useClickOutside(() => setPickerOpen(false), [popoverRef])\n\n  const handleDeactivation = useCallback(() => {\n    forwardedRef.current?.focus()\n    forwardedRef.current?.select()\n  }, [forwardedRef])\n\n  const handleKeyUp = useCallback((e: any) => {\n    if (e.key === 'Escape') {\n      setPickerOpen(false)\n    }\n  }, [])\n\n  const handleClick = useCallback(() => setPickerOpen(true), [])\n\n  const suffix = (\n    <Box padding={1}>\n      <Button\n        ref={buttonRef}\n        icon={CalendarIcon}\n        mode=\"bleed\"\n        padding={2}\n        onClick={handleClick}\n        style={{display: 'block'}}\n        data-testid=\"select-date-button\"\n      />\n    </Box>\n  )\n\n  return (\n    <LazyTextInput\n      ref={forwardedRef}\n      {...rest}\n      value={inputValue}\n      onChange={onInputChange}\n      suffix={\n        isPickerOpen ? (\n          // Note: we're conditionally inserting the popover here due to an\n          // issue with popovers rendering incorrectly on subsequent renders\n          // see https://github.com/sanity-io/design/issues/519\n          <LayerProvider zOffset={1000}>\n            <Popover\n              constrainSize\n              data-testid=\"date-input-dialog\"\n              portal\n              content={\n                <Box overflow=\"auto\">\n                  <FocusLock onDeactivation={handleDeactivation}>\n                    <DatePicker\n                      selectTime={selectTime}\n                      timeStep={timeStep}\n                      onKeyUp={handleKeyUp}\n                      value={value}\n                      onChange={onChange}\n                    />\n                  </FocusLock>\n                </Box>\n              }\n              open\n              placement=\"bottom\"\n              ref={setPopoverRef}\n              radius={2}\n            >\n              {suffix}\n            </Popover>\n          </LayerProvider>\n        ) : (\n          suffix\n        )\n      }\n    />\n  )\n})\n","/* eslint-disable no-nested-ternary */\n\nimport React, {useEffect} from 'react'\n\nimport {TextInput, useForwardedRef} from '@sanity/ui'\nimport {DateTimeInput} from './base/DateTimeInput'\nimport {ParseResult} from './types'\n\nexport interface CommonDateTimeInputProps {\n  id: string\n  deserialize: (value: string) => ParseResult\n  formatInputValue: (date: Date) => string\n  onChange: (nextDate: string | null) => void\n  parseInputValue: (inputValue: string) => ParseResult\n  placeholder?: string\n  readOnly: boolean | undefined\n  selectTime?: boolean\n  serialize: (date: Date) => string\n  timeStep?: number\n  value: string | undefined\n}\n\nconst DEFAULT_PLACEHOLDER_TIME = new Date()\n\nexport const CommonDateTimeInput = React.forwardRef(function CommonDateTimeInput(\n  props: CommonDateTimeInputProps,\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const {\n    id,\n    deserialize,\n    formatInputValue,\n    onChange,\n    parseInputValue,\n    placeholder,\n    readOnly,\n    selectTime,\n    serialize,\n    timeStep,\n    value,\n    ...restProps\n  } = props\n\n  const [localValue, setLocalValue] = React.useState<string | null>(null)\n\n  useEffect(() => {\n    setLocalValue(null)\n  }, [value])\n\n  const handleDatePickerInputChange = React.useCallback(\n    (event: any) => {\n      const nextInputValue = event.currentTarget.value\n      const result = nextInputValue === '' ? null : parseInputValue(nextInputValue)\n\n      if (result === null) {\n        onChange(null)\n\n        // If the field value is undefined and we are clearing the invalid value\n        // the above useEffect won't trigger, so we do some extra clean up here\n        if (typeof value === 'undefined' && localValue) {\n          setLocalValue(null)\n        }\n      } else if (result.isValid) {\n        onChange(serialize(result.date))\n      } else {\n        setLocalValue(nextInputValue)\n      }\n    },\n    [localValue, serialize, onChange, parseInputValue]\n  )\n\n  const handleDatePickerChange = React.useCallback(\n    (nextDate: Date | null) => {\n      onChange(nextDate ? serialize(nextDate) : null)\n    },\n    [serialize, onChange]\n  )\n\n  const forwardedRef = useForwardedRef(ref)\n\n  const parseResult = localValue ? parseInputValue(localValue) : value ? deserialize(value) : null\n\n  const inputValue = localValue\n    ? localValue\n    : parseResult?.isValid\n    ? formatInputValue(parseResult.date)\n    : value\n\n  return readOnly ? (\n    <TextInput value={inputValue} readOnly />\n  ) : (\n    <DateTimeInput\n      {...restProps}\n      id={id}\n      selectTime={selectTime}\n      timeStep={timeStep}\n      placeholder={placeholder || `e.g. ${formatInputValue(DEFAULT_PLACEHOLDER_TIME)}`}\n      ref={forwardedRef}\n      value={parseResult?.date}\n      inputValue={inputValue || ''}\n      readOnly={Boolean(readOnly)}\n      onInputChange={handleDatePickerInputChange}\n      onChange={handleDatePickerChange}\n      customValidity={parseResult?.error}\n    />\n  )\n})\n","export function isValidDate(date: Date) {\n  return date instanceof Date && !isNaN(date.valueOf())\n}\n","import {format, parse} from '@sanity/util/legacyDateFormat'\nimport {getMinutes, setMinutes, parseISO} from 'date-fns'\nimport React, {useCallback} from 'react'\nimport {set, unset} from '../../patch'\nimport {StringInputProps} from '../../types'\nimport {CommonDateTimeInput} from './CommonDateTimeInput'\nimport {ParseResult} from './types'\nimport {isValidDate} from './utils'\n\ninterface ParsedOptions {\n  dateFormat: string\n  timeFormat: string\n  timeStep: number\n  calendarTodayLabel: string\n}\n\ninterface SchemaOptions {\n  dateFormat?: string\n  timeFormat?: string\n  timeStep?: number\n  calendarTodayLabel?: string\n}\n\n/** @beta */\nexport type DateTimeInputProps = StringInputProps\n\nconst DEFAULT_DATE_FORMAT = 'YYYY-MM-DD'\nconst DEFAULT_TIME_FORMAT = 'HH:mm'\n\nfunction parseOptions(options: SchemaOptions = {}): ParsedOptions {\n  return {\n    dateFormat: options.dateFormat || DEFAULT_DATE_FORMAT,\n    timeFormat: options.timeFormat || DEFAULT_TIME_FORMAT,\n    timeStep: ('timeStep' in options && Number(options.timeStep)) || 1,\n    calendarTodayLabel: options.calendarTodayLabel || 'Today',\n  }\n}\n\nfunction serialize(date: Date) {\n  return date.toISOString()\n}\nfunction deserialize(isoString: string): ParseResult {\n  const deserialized = new Date(isoString)\n  if (isValidDate(deserialized)) {\n    return {isValid: true, date: deserialized}\n  }\n  return {isValid: false, error: `Invalid date value: \"${isoString}\"`}\n}\n\n// enforceTimeStep takes a dateString and datetime schema options and enforces the time\n// to be within the configured timeStep\nfunction enforceTimeStep(dateString: string, timeStep: number) {\n  if (!timeStep || timeStep === 1) {\n    return dateString\n  }\n\n  const date = parseISO(dateString)\n  const minutes = getMinutes(date)\n  const leftOver = minutes % timeStep\n  if (leftOver !== 0) {\n    return serialize(setMinutes(date, minutes - leftOver))\n  }\n\n  return serialize(date)\n}\n\n/** @beta */\nexport function DateTimeInput(props: DateTimeInputProps) {\n  const {onChange, schemaType, value, elementProps} = props\n\n  const {dateFormat, timeFormat, timeStep} = parseOptions(schemaType.options)\n\n  const handleChange = useCallback(\n    (nextDate: string | null) => {\n      let date = nextDate\n      if (date !== null && timeStep > 1) {\n        date = enforceTimeStep(date, timeStep)\n      }\n\n      onChange(date === null ? unset() : set(date))\n    },\n    [onChange, timeStep]\n  )\n\n  const formatInputValue = React.useCallback(\n    (date: Date) => format(date, `${dateFormat} ${timeFormat}`),\n    [dateFormat, timeFormat]\n  )\n\n  const parseInputValue = React.useCallback(\n    (inputValue: string) => parse(inputValue, `${dateFormat} ${timeFormat}`),\n    [dateFormat, timeFormat]\n  )\n\n  return (\n    <CommonDateTimeInput\n      {...elementProps}\n      onChange={handleChange}\n      deserialize={deserialize}\n      formatInputValue={formatInputValue}\n      parseInputValue={parseInputValue}\n      placeholder={schemaType.placeholder}\n      selectTime\n      serialize={serialize}\n      timeStep={timeStep}\n      value={value}\n    />\n  )\n}\n","import React, {useCallback} from 'react'\nimport {format, parse} from '@sanity/util/legacyDateFormat'\nimport {set, unset} from '../../patch'\nimport {StringInputProps} from '../../types'\nimport {CommonDateTimeInput} from './CommonDateTimeInput'\n\ninterface ParsedOptions {\n  dateFormat: string\n  calendarTodayLabel: string\n}\n\ninterface SchemaOptions {\n  dateFormat?: string\n  calendarTodayLabel?: string\n}\n\n/** @beta */\nexport type DateInputProps = StringInputProps\n\n// This is the format dates are stored on\nconst VALUE_FORMAT = 'YYYY-MM-DD'\n// default to how they are stored\nconst DEFAULT_DATE_FORMAT = VALUE_FORMAT\n\nfunction parseOptions(options: SchemaOptions = {}): ParsedOptions {\n  return {\n    dateFormat: options.dateFormat || DEFAULT_DATE_FORMAT,\n    calendarTodayLabel: options.calendarTodayLabel || 'Today',\n  }\n}\n\nconst deserialize = (value: string) => parse(value, VALUE_FORMAT)\nconst serialize = (date: Date) => format(date, VALUE_FORMAT)\n\n/** @beta */\nexport function DateInput(props: DateInputProps) {\n  const {readOnly, onChange, schemaType, elementProps, value} = props\n  const {dateFormat} = parseOptions(schemaType.options)\n\n  const handleChange = useCallback(\n    (nextDate: string | null) => {\n      onChange(nextDate === null ? unset() : set(nextDate))\n    },\n    [onChange]\n  )\n\n  const formatInputValue = useCallback((date: Date) => format(date, dateFormat), [dateFormat])\n\n  const parseInputValue = useCallback(\n    (inputValue: string) => parse(inputValue, dateFormat),\n    [dateFormat]\n  )\n\n  return (\n    <CommonDateTimeInput\n      {...elementProps}\n      deserialize={deserialize}\n      formatInputValue={formatInputValue}\n      onChange={handleChange}\n      parseInputValue={parseInputValue}\n      placeholder={schemaType.placeholder}\n      readOnly={readOnly}\n      selectTime={false}\n      serialize={serialize}\n      value={value}\n    />\n  )\n}\n","import React from 'react'\nimport {TextSchemaType} from '@sanity/types'\nimport {TextArea} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {StringInputProps} from '../types'\n\n/**\n * @beta\n */\nexport type TextInputProps = StringInputProps<TextSchemaType>\n\nconst StyledTextArea = styled(TextArea)`\n  &[data-as='textarea'] {\n    resize: vertical;\n  }\n`\n\n/**\n * @beta\n */\nexport function TextInput(props: TextInputProps) {\n  const {schemaType, validationError, value, elementProps} = props\n\n  return (\n    <StyledTextArea\n      customValidity={validationError}\n      value={value || ''}\n      placeholder={schemaType.placeholder}\n      rows={typeof schemaType.rows === 'number' ? schemaType.rows : 10}\n      {...elementProps}\n    />\n  )\n}\n","import {TextInput} from '@sanity/ui'\nimport React from 'react'\nimport {getValidationRule} from '../utils/getValidationRule'\nimport {StringInputProps} from '../types'\n\n/**\n * @beta\n */\nexport type UrlInputProps = StringInputProps\n\n/**\n * @beta\n */\nexport function UrlInput(props: UrlInputProps) {\n  const {schemaType, validationError, elementProps} = props\n\n  const uriRule = getValidationRule(schemaType, 'uri')\n  const inputType = uriRule?.constraint?.options?.allowRelative ? 'text' : 'url'\n  return (\n    <TextInput\n      type={inputType}\n      inputMode=\"url\"\n      customValidity={validationError}\n      {...elementProps}\n    />\n  )\n}\n","import {SlugSchemaType, SlugSourceContext} from '@sanity/types'\nimport speakingurl from 'speakingurl'\nimport {FIXME} from '../../../../FIXME'\n\n// Fallback slugify function if not defined in field options\nconst defaultSlugify = (value: FIXME, type: SlugSchemaType): string => {\n  const maxLength = type.options?.maxLength\n  const slugifyOpts = {truncate: typeof maxLength === 'number' ? maxLength : 200, symbols: true}\n  return value ? speakingurl(value, slugifyOpts) : ''\n}\n\n// eslint-disable-next-line require-await\nexport async function slugify(\n  sourceValue: FIXME,\n  type: SlugSchemaType,\n  context: SlugSourceContext\n): Promise<string> {\n  if (!sourceValue) {\n    return sourceValue\n  }\n\n  const slugifier = type.options?.slugify || defaultSlugify\n  return slugifier(sourceValue, type, context)\n}\n","import React from 'react'\n\nexport type AsyncCompleteState<T> = {\n  status: 'complete'\n  result: T\n}\nexport type AsyncPendingState = {\n  status: 'pending'\n}\nexport type AsyncErrorState = {\n  status: 'error'\n  error: Error\n}\n\nexport type AsyncState<T> = AsyncPendingState | AsyncCompleteState<T> | AsyncErrorState\n\n/**\n * Takes an async function and returns a [AsyncState<value>, callback] pair.\n * Whenever the callback is invoked, a new AsyncState is returned.\n * If the returned callback is called again before the previous callback has settled, the resolution of the previous one will be ignored, thus preventing race conditions.\n * @param fn - an async function that returns a value\n * @param dependencies - list of dependencies that will return a new [value, callback] pair\n */\nexport function useAsync<T, U>(\n  fn: (arg: U) => Promise<T>,\n  dependencies: React.DependencyList\n): [null | AsyncState<T>, (arg: U) => void] {\n  const [state, setState] = React.useState<AsyncState<T> | null>(null)\n\n  const lastId = React.useRef(0)\n\n  const wrappedCallback = React.useCallback(\n    (arg: U) => {\n      const asyncId = ++lastId.current\n      setState({status: 'pending'})\n\n      Promise.resolve()\n        .then(() => fn(arg))\n        .then(\n          (res) => {\n            if (asyncId === lastId.current) {\n              setState({status: 'complete', result: res})\n            }\n          },\n          (err) => {\n            if (asyncId === lastId.current) {\n              setState({status: 'error', error: err})\n            }\n          }\n        )\n    },\n    [fn, ...dependencies]\n  )\n\n  return [state, wrappedCallback]\n}\n","import {SlugSourceContext} from '@sanity/types'\nimport {useMemo} from 'react'\nimport {useCurrentUser, useDataset, useProjectId, useSchema, useSource} from '../../../../../core'\n\n/**\n * @internal\n */\nexport type SlugContext = Omit<SlugSourceContext, 'parent' | 'parentPath'>\n\n/**\n * @internal\n */\nexport function useSlugContext(): SlugContext {\n  const {getClient} = useSource()\n  const schema = useSchema()\n  const currentUser = useCurrentUser()\n  const projectId = useProjectId()\n  const dataset = useDataset()\n\n  return useMemo(() => {\n    return {\n      projectId,\n      dataset,\n      getClient,\n      schema,\n      currentUser,\n    }\n  }, [getClient, schema, currentUser, projectId, dataset])\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {\n  Path,\n  SanityDocument,\n  SlugParent,\n  SlugSchemaType,\n  SlugSourceContext,\n  SlugSourceFn,\n  SlugValue,\n} from '@sanity/types'\nimport * as PathUtils from '@sanity/util/paths'\nimport {Box, Button, Card, Flex, Stack, TextInput} from '@sanity/ui'\nimport {PatchEvent, set, setIfMissing, unset} from '../../patch'\nimport {ObjectInputProps} from '../../types'\nimport {useFormBuilder} from '../../useFormBuilder'\nimport {slugify} from './utils/slugify'\nimport {useAsync} from './utils/useAsync'\nimport {SlugContext, useSlugContext} from './utils/useSlugContext'\n\n/**\n * @beta\n */\nexport type SlugInputProps = ObjectInputProps<SlugValue, SlugSchemaType>\n\nfunction getSlugSourceContext(\n  valuePath: Path,\n  document: SanityDocument,\n  context: SlugContext\n): SlugSourceContext {\n  const parentPath = valuePath.slice(0, -1)\n  const parent = PathUtils.get(document, parentPath) as SlugParent\n  return {parentPath, parent, ...context}\n}\n\n// eslint-disable-next-line require-await\nasync function getNewFromSource(\n  source: string | Path | SlugSourceFn,\n  document: SanityDocument,\n  context: SlugSourceContext\n): Promise<string | undefined> {\n  return typeof source === 'function'\n    ? source(document, context)\n    : (PathUtils.get(document, source) as string | undefined)\n}\n\n/**\n * @beta\n */\nexport function SlugInput(props: SlugInputProps) {\n  const {getDocument} = useFormBuilder().__internal\n  const {path, value, schemaType, validation, onChange, readOnly, elementProps} = props\n  const sourceField = schemaType.options?.source\n  const errors = useMemo(() => validation.filter((item) => item.level === 'error'), [validation])\n\n  const slugContext = useSlugContext()\n\n  const updateSlug = useCallback(\n    (nextSlug: any) => {\n      if (!nextSlug) {\n        onChange(PatchEvent.from(unset([])))\n        return\n      }\n\n      onChange(\n        PatchEvent.from([setIfMissing({_type: schemaType.name}), set(nextSlug, ['current'])])\n      )\n    },\n    [onChange, schemaType.name]\n  )\n\n  const [generateState, handleGenerateSlug] = useAsync(() => {\n    if (!sourceField) {\n      return Promise.reject(\n        new Error(`Source is missing. Check source on type \"${schemaType.name}\" in schema`)\n      )\n    }\n\n    const doc = getDocument() || ({_type: schemaType.name} as SanityDocument)\n    const sourceContext = getSlugSourceContext(path, doc, slugContext)\n    return getNewFromSource(sourceField, doc, sourceContext)\n      .then((newFromSource) => slugify(newFromSource || '', schemaType, sourceContext))\n      .then((newSlug) => updateSlug(newSlug))\n  }, [path, updateSlug, getDocument, schemaType, slugContext])\n\n  const isUpdating = generateState?.status === 'pending'\n\n  const handleChange = React.useCallback(\n    (event: any) => updateSlug(event.currentTarget.value),\n    [updateSlug]\n  )\n\n  return (\n    <Stack space={3}>\n      <Flex>\n        <Box flex={1}>\n          <TextInput\n            customValidity={errors.length > 0 ? errors[0].message : ''}\n            disabled={isUpdating}\n            onChange={handleChange}\n            value={value?.current || ''}\n            readOnly={readOnly}\n            {...elementProps}\n          />\n\n          {generateState?.status === 'error' && (\n            <Card padding={2} tone=\"critical\">\n              {generateState.error.message}\n            </Card>\n          )}\n        </Box>\n        {sourceField && (\n          <Box marginLeft={1}>\n            <Button\n              mode=\"ghost\"\n              type=\"button\"\n              disabled={readOnly || isUpdating}\n              onClick={handleGenerateSlug}\n              text={generateState?.status === 'pending' ? 'Generating…' : 'Generate'}\n            />\n          </Box>\n        )}\n      </Flex>\n    </Stack>\n  )\n}\n","import React, {useMemo} from 'react'\nimport {\n  ArrayOfObjectsInputProps,\n  ArrayOfPrimitivesInputProps,\n  isArrayOfPrimitivesInputProps,\n} from '../../types'\nimport {ArrayOfPrimitivesInput} from './ArrayOfPrimitivesInput'\nimport {ArrayOfOptionsInput} from './ArrayOfOptionsInput'\nimport {ArrayOfObjectsInput} from './ArrayOfObjectsInput'\n\n/**\n * Universal array input that will introspect its schemaType and delegate to the right implementation\n * Useful as a fallback/last resort input for an array type\n *\n * @beta\n */\nexport function UniversalArrayInput(props: ArrayOfObjectsInputProps | ArrayOfPrimitivesInputProps) {\n  const isArrayOfOptionsInput = useMemo(\n    () => Array.isArray(props.schemaType.options?.list),\n    [props.schemaType]\n  )\n\n  if (isArrayOfOptionsInput) {\n    return <ArrayOfOptionsInput {...props} />\n  }\n\n  return isArrayOfPrimitivesInputProps(props) ? (\n    <ArrayOfPrimitivesInput {...props} />\n  ) : (\n    <ArrayOfObjectsInput {...props} />\n  )\n}\n","import React from 'react'\nimport {BooleanInput} from '../../inputs/BooleanInput'\nimport {EmailInput} from '../../inputs/EmailInput'\nimport {NumberInput} from '../../inputs/NumberInput'\nimport {ObjectInput} from '../../inputs/ObjectInput'\nimport {StringInput} from '../../inputs/StringInput'\nimport {DateTimeInput, DateInput} from '../../inputs/DateInputs'\nimport {TextInput} from '../../inputs/TextInput'\nimport {UrlInput} from '../../inputs/UrlInput'\nimport {SlugInput} from '../../inputs/Slug/SlugInput'\nimport {StudioImageInput} from '../inputs/StudioImageInput'\nimport {StudioFileInput} from '../inputs/StudioFileInput'\nimport {StudioCrossDatasetReferenceInput} from '../inputs/crossDatasetReference/StudioCrossDatasetReferenceInput'\nimport {UniversalArrayInput} from '../../inputs/arrays/UniversalArrayInput'\nimport {FIXME} from '../../../FIXME'\n\nexport const defaultInputs: Record<string, React.ComponentType<FIXME>> = {\n  document: ObjectInput,\n  object: ObjectInput,\n  array: UniversalArrayInput,\n  boolean: BooleanInput,\n  number: NumberInput,\n  text: TextInput,\n  email: EmailInput,\n  datetime: DateTimeInput,\n  date: DateInput,\n  url: UrlInput,\n  image: StudioImageInput,\n  file: StudioFileInput,\n  string: StringInput,\n  slug: SlugInput,\n  crossDatasetReference: StudioCrossDatasetReferenceInput,\n}\n","/* eslint-disable react/jsx-handler-names */\nimport {ArraySchemaType, NumberSchemaType, SchemaType, StringSchemaType} from '@sanity/types'\nimport React from 'react'\nimport {InputProps} from '../../types'\nimport * as is from '../../utils/is'\nimport {PreviewProps} from '../../../components'\nimport {SanityDefaultPreview} from '../../../preview'\nimport {FIXME} from '../../../FIXME'\nimport {StudioReferenceInput} from '../inputs/reference/StudioReferenceInput'\nimport {resolveArrayInput} from './resolveArrayInput'\nimport {resolveStringInput} from './resolveStringInput'\nimport {resolveNumberInput} from './resolveNumberInput'\nimport {defaultInputs} from './defaultInputs'\nimport {getTypeChain} from './helpers'\n\nfunction resolveComponentFromTypeVariants(\n  type: SchemaType\n): React.ComponentType<FIXME> | undefined {\n  if (is.type('array', type)) {\n    return resolveArrayInput(type as ArraySchemaType)\n  }\n\n  if (is.type('reference', type)) {\n    return StudioReferenceInput\n  }\n\n  // String input with a select\n  if (is.type('string', type)) {\n    return resolveStringInput(type as StringSchemaType)\n  }\n\n  if (is.type('number', type)) {\n    return resolveNumberInput(type as NumberSchemaType)\n  }\n\n  return undefined\n}\n\nexport function defaultResolveInputComponent(\n  schemaType: SchemaType\n): React.ComponentType<Omit<InputProps, 'renderDefault'>> {\n  if (schemaType.components?.input) return schemaType.components.input\n\n  const componentFromTypeVariants = resolveComponentFromTypeVariants(schemaType)\n  if (componentFromTypeVariants) {\n    return componentFromTypeVariants\n  }\n\n  const typeChain = getTypeChain(schemaType, new Set())\n  const deduped = typeChain.reduce((acc, type) => {\n    acc[type.name] = type\n    return acc\n  }, {} as Record<string, SchemaType>)\n\n  // using an object + Object.values to de-dupe the type chain by type name\n  const subType = Object.values(deduped).find((t) => defaultInputs[t.name])\n\n  if (subType) {\n    return defaultInputs[subType.name]\n  }\n\n  throw new Error(`Could not find input component for schema type \\`${schemaType.name}\\``)\n}\n\nexport function defaultResolvePreviewComponent(\n  schemaType: SchemaType\n): React.ComponentType<Omit<PreviewProps, 'renderDefault'>> {\n  if (schemaType.components?.preview) return schemaType.components.preview\n\n  return SanityDefaultPreview\n}\n","import {SchemaType} from '@sanity/types'\nimport React, {createElement, useCallback} from 'react'\nimport {PreviewProps} from '../../components/previews'\nimport {\n  defaultResolveInputComponent,\n  defaultResolvePreviewComponent,\n} from '../studio/inputResolver/inputResolver'\nimport {FieldProps, InputProps, ItemProps} from '../types'\nimport {defaultResolveFieldComponent} from '../studio/inputResolver/fieldResolver'\nimport {defaultResolveItemComponent} from '../studio/inputResolver/itemResolver'\n\nfunction useResolveDefaultComponent<T extends {schemaType?: SchemaType}>(props: {\n  componentProps: Omit<T, 'renderDefault'>\n  componentResolver: (schemaType: SchemaType) => React.ComponentType<Omit<T, 'renderDefault'>>\n}): React.ReactElement<T> {\n  const {componentResolver, componentProps} = props\n\n  // NOTE: this will not happen, but we do this to avoid updating too many places\n  // TODO: We need to clean up the preview machinery + types to remove this\n  if (!componentProps.schemaType) {\n    throw new Error('the `schemaType` property must be defined')\n  }\n\n  const defaultResolvedComponent = componentResolver(componentProps.schemaType)\n\n  const renderDefault = useCallback(\n    (parentTypeProps: T) => {\n      if (!parentTypeProps.schemaType?.type) {\n        // In theory this should not be possible, and this error should never be thrown\n        throw new Error('Attempted to render form component of non-existent parent type')\n      }\n\n      // The components property is removed from the schemaType object\n      // in order to prevent that a component is render itself\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const {components, ...restSchemaType} = parentTypeProps.schemaType\n      const parentTypeResolvedComponent = componentResolver(restSchemaType)\n      return createElement(parentTypeResolvedComponent, parentTypeProps)\n    },\n    [componentResolver]\n  )\n\n  return createElement(defaultResolvedComponent, {\n    ...componentProps,\n    renderDefault,\n  }) as React.ReactElement<T>\n}\n\n/**\n * @internal\n */\nexport function DefaultInput(props: Omit<InputProps, 'renderDefault'>): React.ReactElement {\n  return useResolveDefaultComponent<Omit<InputProps, 'renderDefault'>>({\n    componentProps: props,\n    componentResolver: defaultResolveInputComponent,\n  })\n}\n\n/**\n * @internal\n */\nexport function DefaultField(props: Omit<FieldProps, 'renderDefault'>): React.ReactElement {\n  return useResolveDefaultComponent<Omit<FieldProps, 'renderDefault'>>({\n    componentProps: props,\n    componentResolver: defaultResolveFieldComponent,\n  })\n}\n\n/**\n * @internal\n */\nexport function DefaultItem(props: Omit<ItemProps, 'renderDefault'>): React.ReactElement {\n  return useResolveDefaultComponent<Omit<ItemProps, 'renderDefault'>>({\n    componentProps: props,\n    componentResolver: defaultResolveItemComponent,\n  })\n}\n\n/**\n * @internal\n */\nexport function DefaultPreview(props: Omit<PreviewProps, 'renderDefault'>): React.ReactElement {\n  return useResolveDefaultComponent<PreviewProps>({\n    componentProps: props,\n    componentResolver: defaultResolvePreviewComponent,\n  })\n}\n","import {ComponentType} from 'react'\nimport {PreviewProps} from '../../components/previews'\nimport {PluginOptions} from '../../config'\nimport {FieldProps, InputProps, ItemProps} from '../types'\n\nexport function pickInputComponent(\n  plugin: PluginOptions\n): ComponentType<Omit<InputProps, 'renderDefault'>> {\n  return plugin.form?.components?.input as ComponentType<Omit<InputProps, 'renderDefault'>>\n}\n\nexport function pickFieldComponent(\n  plugin: PluginOptions\n): ComponentType<Omit<FieldProps, 'renderDefault'>> {\n  return plugin.form?.components?.field as ComponentType<Omit<FieldProps, 'renderDefault'>>\n}\n\nexport function pickPreviewComponent(\n  plugin: PluginOptions\n): ComponentType<Omit<PreviewProps, 'renderDefault'>> {\n  return plugin.form?.components?.preview as ComponentType<Omit<PreviewProps, 'renderDefault'>>\n}\n\nexport function pickItemComponent(\n  plugin: PluginOptions\n): ComponentType<Omit<ItemProps, 'renderDefault'>> {\n  return plugin.form?.components?.item as ComponentType<Omit<ItemProps, 'renderDefault'>>\n}\n","import {ComponentType} from 'react'\nimport {useMiddlewareComponents} from '../../config/components'\nimport {FieldProps, InputProps, ItemProps} from '../types'\nimport {PreviewProps} from '../../components'\nimport {DefaultField, DefaultInput, DefaultItem, DefaultPreview} from './components'\nimport {\n  pickFieldComponent,\n  pickInputComponent,\n  pickItemComponent,\n  pickPreviewComponent,\n} from './picks'\n\n/**\n * @internal\n */\nexport function useInputComponent(): ComponentType<Omit<InputProps, 'renderDefault'>> {\n  return useMiddlewareComponents({\n    defaultComponent: DefaultInput,\n    pick: pickInputComponent,\n  })\n}\n\n/**\n * @internal\n */\nexport function useFieldComponent(): ComponentType<Omit<FieldProps, 'renderDefault'>> {\n  return useMiddlewareComponents({\n    defaultComponent: DefaultField,\n    pick: pickFieldComponent,\n  })\n}\n\n/**\n * @internal\n */\nexport function usePreviewComponent(): ComponentType<Omit<PreviewProps, 'renderDefault'>> {\n  return useMiddlewareComponents({\n    defaultComponent: DefaultPreview,\n    pick: pickPreviewComponent,\n  })\n}\n\n/**\n * @internal\n */\nexport function useItemComponent(): ComponentType<Omit<ItemProps, 'renderDefault'>> {\n  return useMiddlewareComponents({\n    defaultComponent: DefaultItem,\n    pick: pickItemComponent,\n  })\n}\n","import React from 'react'\nimport {RenderPreviewCallbackProps} from '../../form/types'\nimport {usePreviewComponent} from '../../form/form-components-hooks'\nimport {PreviewLoader} from '../index'\n\n/**\n * @internal\n */\nexport function Preview(props: RenderPreviewCallbackProps) {\n  const PreviewComponent = usePreviewComponent()\n  return <PreviewLoader {...props} component={PreviewComponent} />\n}\n","import React, {useCallback} from 'react'\nimport {Card, Text, Flex} from '@sanity/ui'\nimport {Asset as AssetType, SanityDocument} from '@sanity/types'\nimport {useSchema} from '../../../hooks'\nimport {Preview} from '../../../preview/components/Preview'\nimport {IntentLink} from 'sanity/router'\n\nexport const DocumentList = ({\n  asset,\n  assetType,\n  referringDocuments,\n}: {\n  asset: AssetType\n  assetType: 'image' | 'file'\n  referringDocuments: SanityDocument[]\n}) => {\n  const count = referringDocuments.length\n  const hasResults = count > 0\n  const filenamePlaceholder = asset.originalFilename ? (\n    <strong>{asset.originalFilename}</strong>\n  ) : (\n    `this ${assetType}`\n  )\n\n  if (!hasResults) {\n    return (\n      <Text size={[1, 1, 2, 2]} as=\"h2\" weight=\"regular\">\n        No documents are using {filenamePlaceholder}\n      </Text>\n    )\n  }\n\n  return (\n    <>\n      <Card borderBottom marginTop={2} paddingBottom={2} marginBottom={1}>\n        <Text as=\"h2\" size={[1, 1, 2, 2]} weight=\"regular\" textOverflow=\"ellipsis\">\n          {count} {count === 1 ? `document is` : `documents are`} using {filenamePlaceholder}\n        </Text>\n      </Card>\n      {referringDocuments.map((document: SanityDocument) => (\n        <DocumentLink key={document._id} document={document} />\n      ))}\n    </>\n  )\n}\n\nconst DocumentLink = ({document}: {document: SanityDocument}) => {\n  const schema = useSchema()\n\n  const LinkComponent = useCallback(\n    (linkProps: Omit<React.HTMLProps<HTMLAnchorElement>, 'ref'>) => (\n      <IntentLink {...linkProps} params={{id: document._id, type: document._type}} intent=\"edit\" />\n    ),\n\n    [document]\n  )\n\n  return (\n    <Card\n      as={LinkComponent}\n      paddingY={2}\n      paddingX={1}\n      radius={2}\n      key={document._id}\n      data-as=\"a\"\n      tabIndex={0}\n    >\n      <Flex align=\"center\" gap={2}>\n        <Preview\n          layout=\"default\"\n          value={{_type: 'reference', _ref: document._id}}\n          schemaType={schema.get(document._type)!}\n        />\n      </Flex>\n    </Card>\n  )\n}\n","import React, {CSSProperties} from 'react'\nimport {WarningOutlineIcon} from '@sanity/icons'\nimport {Card, Text, Grid, Flex} from '@sanity/ui'\nimport {UsageDialogProps} from './AssetUsageDialog'\n\ntype ConfirmMessageProps = Omit<UsageDialogProps, 'onClose' | 'onDelete'> & {\n  hasResults?: boolean\n}\n\nconst STYLE_ASSET_IMAGE: CSSProperties = {\n  maxWidth: '100%',\n  height: '120px',\n  objectFit: 'contain',\n  objectPosition: 'center',\n}\nconst STYLE_CONFIRM_CARD: CSSProperties = {\n  gridColumn: 'span 1',\n  overflow: 'hidden',\n  display: 'flex',\n  alignSelf: 'center',\n  justifyContent: 'center',\n}\nconst STYLE_IMAGE_WRAPPER: CSSProperties = {height: '100%'}\n\nexport const ConfirmMessage = ({asset, assetType, hasResults = false}: ConfirmMessageProps) => {\n  const isImage = assetType === 'image'\n  const filenamePlaceholder = asset.originalFilename ? (\n    <>\n      The {assetType} <strong>{asset.originalFilename}</strong>\n    </>\n  ) : (\n    `this ${assetType}`\n  )\n\n  if (hasResults) {\n    return (\n      <Card tone=\"caution\" padding={[3, 3, 4]} border radius={2} marginBottom={3}>\n        <Grid columns={3} gap={[2, 3, 4]}>\n          <Flex gap={[3, 4]} align=\"center\" style={{gridColumn: isImage ? 'span 2' : 'span 3'}}>\n            <Text>\n              <WarningOutlineIcon />\n            </Text>\n            <Text size={1}>\n              {filenamePlaceholder} cannot be deleted because it's being used. In order to delete\n              the {assetType} you need the remove all uses of it.\n            </Text>\n          </Flex>\n          {isImage && (\n            <Card __unstable_checkered border radius={1} style={STYLE_CONFIRM_CARD}>\n              <Flex align=\"center\" justify=\"center\" style={STYLE_IMAGE_WRAPPER}>\n                <img\n                  src={`${asset.url}?w=200`}\n                  style={STYLE_ASSET_IMAGE}\n                  alt=\"Preview of image\"\n                  referrerPolicy=\"strict-origin-when-cross-origin\"\n                />\n              </Flex>\n            </Card>\n          )}\n        </Grid>\n      </Card>\n    )\n  }\n\n  return (\n    <Card paddingX={[2, 3, 4]} paddingY={[3, 3, 3, 4]}>\n      <Grid columns={3} gap={3}>\n        <Flex style={{gridColumn: isImage ? 'span 2' : 'span 3'}} align=\"center\">\n          <Text>\n            You are about to delete the {assetType}\n            {asset.originalFilename && (\n              <>\n                {' '}\n                <strong>{asset.originalFilename}</strong>\n              </>\n            )}{' '}\n            and its metadata.\n            <br />\n            <br />\n            Are you sure?\n          </Text>\n        </Flex>\n        {isImage && (\n          <Card __unstable_checkered border radius={1} style={STYLE_CONFIRM_CARD}>\n            <Flex align=\"center\" justify=\"center\" style={STYLE_IMAGE_WRAPPER}>\n              <img\n                src={`${asset.url}?w=200`}\n                style={STYLE_ASSET_IMAGE}\n                alt=\"Preview of image\"\n                referrerPolicy=\"strict-origin-when-cross-origin\"\n              />\n            </Flex>\n          </Card>\n        )}\n      </Grid>\n    </Card>\n  )\n}\n","import React, {useEffect, useState} from 'react'\nimport {TrashIcon} from '@sanity/icons'\nimport {Box, Dialog, Grid, Button, Stack} from '@sanity/ui'\nimport {Asset as AssetType, SanityDocument} from '@sanity/types'\nimport {useDocumentStore} from '../../../store'\nimport {WithReferringDocuments} from '../../../components'\nimport {SpinnerWithText} from '../../components/SpinnerWithText'\nimport {DocumentList} from './DocumentList'\nimport {ConfirmMessage} from './ConfirmMessage'\n\nexport interface UsageDialogProps {\n  assetType?: 'file' | 'image'\n  mode?: 'listUsage' | 'confirmDelete'\n  asset: AssetType\n  isDeleting?: boolean\n  assetIsLoading?: boolean\n  referringDocuments?: SanityDocument[]\n  onClose: () => void\n  onDelete: () => void\n}\n\nconst MODE_CONFIRM_DELETE = 'confirmDelete'\nconst MODE_LIST_USAGE = 'listUsage'\n\nexport function AssetUsageDialog(props: UsageDialogProps) {\n  const documentStore = useDocumentStore()\n\n  return (\n    <WithReferringDocuments documentStore={documentStore} id={props.asset._id}>\n      {({isLoading, referringDocuments}) => (\n        <InnerAssetUsageDialog\n          {...props}\n          assetIsLoading={isLoading}\n          referringDocuments={referringDocuments}\n        />\n      )}\n    </WithReferringDocuments>\n  )\n}\n\nconst InnerAssetUsageDialog = ({\n  asset,\n  assetType = 'image',\n  mode = MODE_LIST_USAGE,\n  isDeleting = false,\n  assetIsLoading = false,\n  referringDocuments = [],\n  onClose,\n  onDelete,\n}: UsageDialogProps) => {\n  const isListMode = mode === MODE_LIST_USAGE\n  const defaultHeaderTitle = isListMode ? `Documents using ${assetType}` : `Delete ${assetType}`\n  const [canDelete, setCanDelete] = useState(false)\n  const [isLoadingParent, setIsLoadingParent] = useState(true)\n  const [publishedDocuments, setPublishedDocuments] = useState<SanityDocument[]>([])\n  const showActionFooter = mode === MODE_CONFIRM_DELETE\n  const hasResults = publishedDocuments.length > 0\n  const showDocumentList = mode === MODE_LIST_USAGE || hasResults\n  const noPaddingOnStack = mode === MODE_CONFIRM_DELETE && !hasResults\n  const footer = showActionFooter ? (\n    <Grid padding={2} gap={2} columns={2}>\n      <Button mode=\"bleed\" text=\"Cancel\" onClick={onClose} />\n      <Button\n        text=\"Delete\"\n        tone=\"critical\"\n        icon={TrashIcon}\n        onClick={onDelete}\n        loading={isDeleting}\n        disabled={!canDelete}\n      />\n    </Grid>\n  ) : undefined\n  useEffect(() => {\n    const drafts = referringDocuments.reduce<string[]>(\n      (acc, doc) => (doc._id.startsWith('drafts.') ? acc.concat(doc._id.slice(7)) : acc),\n      []\n    )\n\n    const documentsWithoutDrafts = referringDocuments.filter((doc) => !drafts.includes(doc._id))\n\n    setPublishedDocuments(documentsWithoutDrafts)\n    setCanDelete(documentsWithoutDrafts.length === 0 && !assetIsLoading)\n    setIsLoadingParent(assetIsLoading)\n  }, [assetIsLoading, referringDocuments])\n\n  return (\n    <Dialog\n      id=\"asset-dialog\"\n      header={defaultHeaderTitle}\n      width={1}\n      onClose={onClose}\n      footer={footer}\n      __unstable_autoFocus={!isLoadingParent}\n    >\n      {isLoadingParent && (\n        <Box padding={4}>\n          <SpinnerWithText text=\"Loading...\" />\n        </Box>\n      )}\n\n      {!isLoadingParent && (\n        <Stack\n          paddingX={noPaddingOnStack ? 0 : [2, 3, 4]}\n          paddingY={noPaddingOnStack ? 0 : [3, 3, 3, 4]}\n          space={1}\n        >\n          {mode === MODE_CONFIRM_DELETE && (\n            <ConfirmMessage asset={asset} assetType={assetType} hasResults={hasResults} />\n          )}\n\n          {showDocumentList && (\n            <DocumentList\n              asset={asset}\n              referringDocuments={publishedDocuments}\n              assetType={assetType}\n            />\n          )}\n        </Stack>\n      )}\n    </Dialog>\n  )\n}\n","import React from 'react'\nimport {LinkIcon, EllipsisVerticalIcon, TrashIcon} from '@sanity/icons'\nimport {Button, Menu, MenuItem, MenuButton} from '@sanity/ui'\nimport {AssetMenuAction} from './types'\n\nexport function AssetMenu({\n  isSelected,\n  border = true,\n  onAction,\n}: {\n  isSelected: boolean\n  border?: boolean\n  onAction: (action: AssetMenuAction) => void\n}) {\n  const triggerButtonMode = isSelected ? 'default' : 'bleed'\n  const triggerButtonTone = isSelected ? 'primary' : 'default'\n\n  return (\n    <MenuButton\n      button={\n        <Button\n          padding={2}\n          mode={border ? 'ghost' : triggerButtonMode}\n          icon={EllipsisVerticalIcon}\n          tone={border ? 'default' : triggerButtonTone}\n        />\n      }\n      id=\"asset-menu\"\n      portal\n      menu={\n        <Menu>\n          <MenuItem\n            text=\"Show uses\"\n            icon={LinkIcon}\n            onClick={() => {\n              onAction({type: 'showUsage'})\n            }}\n          />\n          <MenuItem\n            text=\"Delete\"\n            icon={TrashIcon}\n            tone=\"critical\"\n            onClick={() => {\n              onAction({type: 'delete'})\n            }}\n          />\n        </Menu>\n      }\n      placement=\"right\"\n    />\n  )\n}\n","import type {Subscription} from 'rxjs'\nimport React, {useState, useEffect, useRef, useCallback} from 'react'\nimport styled from 'styled-components'\nimport {Button, Card, useToast} from '@sanity/ui'\nimport {Asset as AssetType} from '@sanity/types'\nimport {useClient} from '../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {FullscreenSpinner} from '../../components/FullscreenSpinner'\nimport {AssetUsageDialog} from './AssetUsageDialog'\nimport {AssetMenu} from './AssetMenu'\nimport {AssetMenuAction} from './types'\n\ninterface AssetProps {\n  asset: AssetType\n  isSelected: boolean\n  onClick?: (...args: any[]) => any\n  onKeyPress?: (...args: any[]) => any\n  onDeleteFinished: (...args: any[]) => any\n}\n\n// Get pixel density of the current device\nconst DPI =\n  typeof window === 'undefined' || !window.devicePixelRatio\n    ? 1\n    : Math.round(window.devicePixelRatio)\n\nconst Image = styled.img`\n  position: absolute;\n  z-index: 1;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: block;\n  object-fit: contain;\n`\n\nconst Container = styled(Card)`\n  position: relative;\n  z-index: 1;\n  padding-bottom: 100%;\n`\n\nconst Root = styled.div`\n  position: relative;\n  display: inherit;\n`\n\nconst MenuContainer = styled.div`\n  box-sizing: border-box;\n  position: absolute;\n  z-index: 2;\n  display: none;\n  top: 3px;\n  right: 3px;\n\n  ${Root}:hover & {\n    display: block;\n  }\n`\n\nexport const AssetThumb = React.memo(function AssetThumb(props: AssetProps) {\n  const versionedClient = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const toast = useToast()\n  const deleteRef$ = useRef<Subscription>()\n  const {asset, onClick, onKeyPress, onDeleteFinished, isSelected} = props\n  const [showUsageDialog, setShowUsageDialog] = useState(false)\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false)\n  const [isDeleting, setIsDeleting] = useState(false)\n\n  useEffect(() => {\n    return () => {\n      if (deleteRef$.current) {\n        deleteRef$.current.unsubscribe()\n      }\n    }\n  }, [])\n\n  const handleConfirmDelete = useCallback(() => {\n    setShowDeleteDialog(true)\n  }, [setShowDeleteDialog])\n\n  const handleDialogClose = useCallback(() => {\n    setShowUsageDialog(false)\n    setShowDeleteDialog(false)\n  }, [setShowUsageDialog, setShowDeleteDialog])\n\n  const handleToggleUsageDialog = useCallback(() => {\n    setShowUsageDialog(true)\n  }, [setShowUsageDialog])\n\n  const handleDeleteError = useCallback(\n    (error: any) => {\n      toast.push({\n        closable: true,\n        status: 'error',\n        title: 'Image could not be deleted',\n        description: error.message,\n      })\n    },\n    [toast]\n  )\n\n  const handleDeleteSuccess = useCallback(() => {\n    toast.push({\n      status: 'success',\n      title: 'Image was deleted',\n    })\n  }, [toast])\n\n  const handleDeleteAsset = useCallback(() => {\n    setIsDeleting(true)\n\n    deleteRef$.current = versionedClient.observable.delete(asset._id).subscribe({\n      next: () => {\n        setIsDeleting(false)\n        onDeleteFinished(asset._id)\n        setShowDeleteDialog(false)\n        handleDeleteSuccess()\n      },\n      error: (err: Error) => {\n        setIsDeleting(false)\n        handleDeleteError(err)\n        // eslint-disable-next-line no-console\n        console.error('Could not delete asset', err)\n      },\n    })\n  }, [asset._id, handleDeleteError, handleDeleteSuccess, onDeleteFinished])\n\n  const handleMenuAction = useCallback(\n    (action: AssetMenuAction) => {\n      if (action.type === 'delete') {\n        handleConfirmDelete()\n      }\n\n      if (action.type === 'showUsage') {\n        handleToggleUsageDialog()\n      }\n    },\n    [handleConfirmDelete, handleToggleUsageDialog]\n  )\n\n  // const {asset, onClick, onKeyPress, isSelected} = props\n  const {originalFilename, _id, url} = asset\n  const imgH = 200 * Math.max(1, DPI)\n\n  // Mead can't convert gifs, so we might end up with large gifs that will cause the source window to use a lot of CPU\n  // We instead force them to display as jpgs\n  const imageUrl = url.includes('.gif')\n    ? `${url}?h=${imgH}&fit=max&fm=jpg`\n    : `${url}?h=${imgH}&fit=max`\n\n  return (\n    <Root>\n      <Button\n        tone=\"primary\"\n        selected={isSelected}\n        tabIndex={0}\n        data-id={_id}\n        mode=\"ghost\"\n        onKeyPress={onKeyPress}\n        padding={0}\n        style={{padding: 2}}\n      >\n        <Container __unstable_checkered>\n          <Image alt={originalFilename} src={imageUrl} onClick={onClick} data-id={_id} />\n          {isDeleting && <FullscreenSpinner />}\n        </Container>\n      </Button>\n      <MenuContainer>\n        <AssetMenu isSelected={isSelected} onAction={handleMenuAction} />\n      </MenuContainer>\n      {(showUsageDialog || showDeleteDialog) && (\n        <AssetUsageDialog\n          asset={asset}\n          mode={showDeleteDialog ? 'confirmDelete' : 'listUsage'}\n          onClose={handleDialogClose}\n          onDelete={handleDeleteAsset}\n          isDeleting={isDeleting}\n        />\n      )}\n    </Root>\n  )\n})\n","const BYTE_UNITS = ['B', 'kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\nconst BIBYTE_UNITS = ['B', 'kiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB']\nconst BIT_UNITS = ['b', 'kbit', 'Mbit', 'Gbit', 'Tbit', 'Pbit', 'Ebit', 'Zbit', 'Ybit']\nconst BIBIT_UNITS = ['b', 'kibit', 'Mibit', 'Gibit', 'Tibit', 'Pibit', 'Eibit', 'Zibit', 'Yibit']\n\n/**\n * Formats the given number using `Number#toLocaleString`.\n * - If locale is a string, the value is expected to be a locale-key (for example: `de`).\n * - If locale is true, the system default locale is used for translation.\n * - If no value for locale is specified, the number is returned unmodified.\n */\nconst toLocaleString = (\n  number: string | number,\n  locale: string | string[] | undefined | boolean,\n  options: Intl.NumberFormatOptions | undefined\n) => {\n  let result = number\n  if (typeof locale === 'string' || Array.isArray(locale)) {\n    result = number.toLocaleString(locale, options)\n  } else if (locale === true || options !== undefined) {\n    result = number.toLocaleString(undefined, options)\n  }\n\n  return result\n}\n\ninterface PrettyBytesOptions {\n  /**\n   * Include plus sign for positive numbers. If the difference is exactly zero a\n   * space character will be prepended instead for better alignment.\n   */\n  signed?: boolean\n  /**\n   * Format the number as bits instead of bytes. This can be useful when, for\n   * example, referring to bit rate.\n   */\n  bits?: boolean\n  /**\n   * Format the number using the Binary Prefix instead of the SI Prefix. This\n   * can be useful for presenting memory amounts. However, this should not be used for presenting file sizes.\n   */\n  binary?: boolean\n  /**\n   * Important: Only the number and decimal separator are localized. The unit\n   * title is not and will not be localized.\n   */\n  locale?: boolean | string | string[]\n  /**\n   * The minimum number of fraction digits to display.\n   *\n   * If neither minimumFractionDigits or maximumFractionDigits are set, the\n   * default behavior is to round to 3 significant digits.\n   */\n  minimumFractionDigits?: number\n  /**\n   * The maximum number of fraction digits to display.\n   *\n   * If neither minimumFractionDigits or maximumFractionDigits are set, the\n   * default behavior is to round to 3 significant digits.\n   */\n  maximumFractionDigits?: number\n}\n\n/**\n * Taken from here:\n * https://github.com/sindresorhus/pretty-bytes/blob/a0335ab397a1bc88831f317e4d6d46b7e03ea6be/index.js\n */\nexport function prettyBytes(\n  input: number,\n  {\n    bits = false,\n    binary = false,\n    signed = false,\n    minimumFractionDigits,\n    maximumFractionDigits,\n    locale,\n  }: PrettyBytesOptions = {}\n): string {\n  let number: string | number = input\n\n  if (!Number.isFinite(number)) {\n    throw new TypeError(`Expected a finite number, got ${typeof number}: ${number}`)\n  }\n\n  // eslint-disable-next-line no-nested-ternary\n  const UNITS = bits ? (binary ? BIBIT_UNITS : BIT_UNITS) : binary ? BIBYTE_UNITS : BYTE_UNITS\n\n  if (signed && number === 0) {\n    return ` 0 ${UNITS[0]}`\n  }\n\n  const isNegative = number < 0\n  // eslint-disable-next-line no-nested-ternary\n  const prefix = isNegative ? '-' : signed ? '+' : ''\n\n  if (isNegative) {\n    number = -number\n  }\n\n  let localeOptions: Intl.NumberFormatOptions | undefined\n\n  if (minimumFractionDigits !== undefined) {\n    localeOptions = {minimumFractionDigits}\n  }\n\n  if (maximumFractionDigits !== undefined) {\n    localeOptions = {maximumFractionDigits, ...localeOptions}\n  }\n\n  if (number < 1) {\n    const numberString = toLocaleString(number, locale, localeOptions)\n    return `${prefix + numberString} ${UNITS[0]}`\n  }\n\n  const exponent = Math.min(\n    Math.floor(binary ? Math.log(number) / Math.log(1024) : Math.log10(number) / 3),\n    UNITS.length - 1\n  )\n  number /= (binary ? 1024 : 1000) ** exponent\n\n  if (!localeOptions) {\n    number = number.toPrecision(3)\n  }\n\n  const numberString = toLocaleString(Number(number), locale, localeOptions)\n\n  const unit = UNITS[exponent]\n\n  return `${prefix + numberString} ${unit}`\n}\n","interface MimeTypeInfo {\n  title: string\n}\n\nconst MIME_TYPES: Record<string, MimeTypeInfo> = {\n  // Images\n  'image/bmp': {\n    title: 'Bitmap Image',\n  },\n  'image/jpeg': {\n    title: 'JPEG Image',\n  },\n  'image/gif': {\n    title: 'GIF Image',\n  },\n  'image/vnd.microsoft.icon': {\n    title: 'Icon',\n  },\n  'image/png': {\n    title: 'PNG Image',\n  },\n  'image/svg+xml': {\n    title: 'SVG Image',\n  },\n  'image/webp': {\n    title: 'WebP Image',\n  },\n  'image/tiff': {\n    title: 'TIFF Image',\n  },\n  'image/heic': {\n    title: 'HEIC Image',\n  },\n  // Audio\n  'audio/midi': {\n    title: 'MIDI Audio',\n  },\n  'audio/midi-x': {\n    title: 'MIDI Audio',\n  },\n  'audio/mpeg': {\n    title: 'MP3 Audio',\n  },\n  'audio/ogg': {\n    title: 'OGG Audio',\n  },\n  'audio/wav': {\n    title: 'WAV Audio',\n  },\n  'audio/webm': {\n    title: 'WebM Audio',\n  },\n  'audio/aac': {\n    title: 'AAC Audio',\n  },\n  // Video\n  'video/x-msvideo': {\n    title: 'AVI Video',\n  },\n  'video/mp4': {\n    title: 'MP4 Video',\n  },\n  'video/mpeg': {\n    title: 'MPEG Video',\n  },\n  'video/ogg': {\n    title: 'OGG Video',\n  },\n  'video/webm': {\n    title: 'WebM Video',\n  },\n  'video/quicktime': {\n    title: 'QuickTime Video',\n  },\n  // Documents\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': {\n    title: 'Excel Spreadsheet',\n  },\n  'application/vnd.ms-excel': {\n    title: 'Excel Spreadsheet',\n  },\n  'text/plain': {\n    title: 'Text',\n  },\n  'text/javascript': {\n    title: 'JavaScript',\n  },\n  'text/markdown': {\n    title: 'Markdown',\n  },\n  'text/csv': {\n    title: 'CSV',\n  },\n  'text/css': {\n    title: 'CSS',\n  },\n  'application/pdf': {\n    title: 'PDF Document',\n  },\n  'application/xml': {\n    title: 'XML Document',\n  },\n  'text/xml': {\n    title: 'XML Document',\n  },\n  'application/zip': {\n    title: 'ZIP Archive',\n  },\n  'application/vnd.rar': {\n    title: 'RAR Archive',\n  },\n  'application/x-7z-compressed': {\n    title: '7-zip Archive',\n  },\n  'application/octet-stream': {\n    title: 'Binary',\n  },\n}\n\nfunction convertMimeTypeToSomethingNice(mimeType: string): string {\n  const part = mimeType.replace('x-', '').split('/')[1]\n\n  return part.charAt(0).toUpperCase() + part.slice(1)\n}\n\nexport function formatMimeType(mimeType: string): string {\n  if (MIME_TYPES?.[mimeType]) {\n    return MIME_TYPES[mimeType].title\n  }\n\n  return convertMimeTypeToSomethingNice(mimeType)\n}\n","import type {Subscription} from 'rxjs'\nimport React, {useRef, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport {Button, Box, Card, Flex, Stack, Label, Text, Tooltip, Grid, useToast} from '@sanity/ui'\nimport {DocumentIcon, ChevronUpIcon, ChevronDownIcon, LinkIcon, TrashIcon} from '@sanity/icons'\nimport {Asset as AssetType} from '@sanity/types'\nimport {FIXME} from '../../../FIXME'\nimport {useClient, useTimeAgo} from '../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {prettyBytes} from './prettyBytes'\nimport {AssetUsageDialog} from './AssetUsageDialog'\nimport {AssetMenu} from './AssetMenu'\nimport {AssetMenuAction} from './types'\nimport {formatMimeType} from './utils/mimeType'\n\ninterface RowProps {\n  isMobile?: boolean\n  asset: AssetType\n  isSelected?: boolean\n  onClick?: (...args: any[]) => any\n  onKeyPress?: (...args: any[]) => any\n  onDeleteFinished?: (...args: any[]) => any\n}\n\nconst CardIconWrapper = styled.span`\n  background-color: transparent;\n  flex-shrink: 0;\n`\n\n// These are here because using vanilla UI components caused a type issue inside of styled-components\nconst CustomFlex = styled(Flex)``\nconst CustomText = styled(Text)``\nconst CustomCard = styled(Card)<RowProps>`\n  &:hover-within ${CustomText} {\n    --card-muted-fg-color: var(--card-muted-fg-color);\n    --card-fg-color: var(--card-fg-color);\n  }\n\n  ${(props) =>\n    props.isSelected &&\n    css`\n      --card-muted-fg-color: var(--card-bg-color);\n      --card-fg-color: var(--card-bg-color);\n    `}\n`\n\nconst RowButton = styled(Button)<RowProps>`\n  box-shadow: none;\n  min-width: 0;\n  cursor: pointer;\n  position: initial;\n\n  &:before,\n  &:after {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 2;\n  }\n\n  &:before {\n    z-index: 0;\n    pointer-events: none;\n    border-radius: 0.1875rem;\n  }\n\n  ${(props) =>\n    props.isSelected &&\n    css`\n      --card-muted-fg-color: var(--card-bg-color);\n      --card-fg-color: var(--card-bg-color);\n\n      &:before {\n        background-color: var(--card-focus-ring-color);\n      }\n\n      ${CardIconWrapper} {\n        --card-muted-fg-color: var(--card-bg-color);\n      }\n\n      ${CustomFlex} {\n        --card-muted-fg-color: var(--card-bg-color);\n        --card-fg-color: var(--card-bg-color);\n      }\n    `}\n\n  ${(props) =>\n    !props.isSelected &&\n    css`\n      &:hover:before {\n        background-color: var(--card-bg-color);\n      }\n\n      &:focus:before {\n        background-color: var(--card-code-bg-color);\n      }\n\n      &:focus-within:before {\n        background-color: var(--card-bg-color);\n      }\n    `}\n`\n\nconst STYLES_ROW_CARD = {position: 'relative' as FIXME}\nconst STYLES_ICON_CARD = {flexShrink: 0}\nconst STYLES_BUTTON_TEXT = {minWidth: 0}\nconst STYLES_ASSETMENU_WRAPPER = {\n  zIndex: 3,\n  marginTop: '-0.5rem',\n  marginBottom: '-0.5rem',\n}\n\nconst DISABLED_DELETE_TITLE = 'Cannot delete current file'\n\nexport const AssetRow = (props: RowProps) => {\n  const versionedClient = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const toast = useToast()\n  const deleteRef$ = useRef<Subscription>()\n  const [showUsageDialog, setShowUsageDialog] = useState(false)\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false)\n  const [isDeleting, setIsDeleting] = useState(false)\n  const [isOpen, setIsOpen] = useState(false)\n  const {asset, onClick, onKeyPress, onDeleteFinished, isSelected, isMobile} = props\n  const {originalFilename, _id, mimeType, size, _createdAt} = asset\n  const formattedTime = useTimeAgo(_createdAt, {agoSuffix: true})\n  const formattedMimeType = formatMimeType(mimeType)\n  const formattedSize = prettyBytes(size)\n  const showTooltip = (originalFilename || '').length > 37\n\n  const handleConfirmDelete = () => {\n    setShowDeleteDialog(true)\n  }\n\n  const handleDeleteError = (error: Error) => {\n    toast.push({\n      closable: true,\n      status: 'error',\n      title: 'File could not be deleted',\n      description: error.message,\n    })\n  }\n\n  const handleDeleteSuccess = () => {\n    toast.push({\n      status: 'success',\n      title: 'File was deleted',\n    })\n  }\n\n  const handleDeleteAsset = () => {\n    setIsDeleting(true)\n\n    deleteRef$.current = versionedClient.observable.delete(asset._id).subscribe({\n      next: () => {\n        setIsDeleting(false)\n        onDeleteFinished?.(asset._id)\n        setShowDeleteDialog(false)\n        handleDeleteSuccess()\n      },\n      error: (err: Error) => {\n        setIsDeleting(false)\n        handleDeleteError(err)\n        // eslint-disable-next-line no-console\n        console.error('Could not delete asset', err)\n      },\n    })\n  }\n\n  const handleDialogClose = () => {\n    setShowUsageDialog(false)\n    setShowDeleteDialog(false)\n  }\n\n  const handleToggleUsageDialog = () => {\n    setShowUsageDialog(true)\n  }\n\n  const handleToggleOpen = () => {\n    setIsOpen(!isOpen)\n  }\n\n  const handleMenuAction = (action: AssetMenuAction) => {\n    if (action.type === 'delete') {\n      handleConfirmDelete()\n    }\n\n    if (action.type === 'showUsage') {\n      handleToggleUsageDialog()\n    }\n  }\n\n  if (isMobile) {\n    return (\n      <Card paddingBottom={2} style={STYLES_ROW_CARD}>\n        <Grid\n          columns={4}\n          gap={1}\n          style={{\n            position: 'relative',\n            gridTemplateColumns: '1fr 30px',\n            opacity: isDeleting ? 0.5 : 1,\n          }}\n        >\n          <RowButton\n            asset={asset}\n            mode=\"bleed\"\n            padding={0}\n            data-id={_id}\n            onClick={onClick}\n            paddingY={1}\n          >\n            <Flex gap={2} flex={2} align=\"center\">\n              <Card as={CardIconWrapper} padding={2} tone=\"transparent\" radius={2}>\n                <Text muted size={2} style={STYLES_ICON_CARD}>\n                  <DocumentIcon />\n                </Text>\n              </Card>\n              <Text size={1} align=\"left\" textOverflow=\"ellipsis\" style={STYLES_BUTTON_TEXT}>\n                {originalFilename}\n              </Text>\n            </Flex>\n          </RowButton>\n          <Flex justify=\"flex-end\" align=\"center\" paddingRight={1} style={STYLES_ASSETMENU_WRAPPER}>\n            <Button\n              mode=\"bleed\"\n              fontSize={1}\n              padding={2}\n              onClick={handleToggleOpen}\n              icon={isOpen ? ChevronUpIcon : ChevronDownIcon}\n            />\n          </Flex>\n        </Grid>\n        {isOpen && (\n          <>\n            <Grid marginTop={3} columns={3} gap={1}>\n              <Stack space={2}>\n                <Label size={1} muted>\n                  Size\n                </Label>\n                <Text size={1} muted>\n                  {formattedSize}\n                </Text>\n              </Stack>\n              <Stack space={2}>\n                <Label size={1} muted>\n                  Type\n                </Label>\n                <Text size={1} muted>\n                  {formattedMimeType}\n                </Text>\n              </Stack>\n              <Stack space={2}>\n                <Label size={1} muted>\n                  Date added\n                </Label>\n                <Text size={1} muted>\n                  {formattedTime}\n                </Text>\n              </Stack>\n            </Grid>\n            <Stack space={2} marginTop={3}>\n              <Button\n                fontSize={1}\n                tone=\"default\"\n                mode=\"ghost\"\n                text=\"Show uses\"\n                onClick={handleToggleUsageDialog}\n                icon={LinkIcon}\n              />\n\n              <Button\n                fontSize={1}\n                tone=\"critical\"\n                mode=\"ghost\"\n                text=\"Delete\"\n                icon={TrashIcon}\n                disabled={isSelected}\n                title={isSelected ? DISABLED_DELETE_TITLE : 'Delete file'}\n                onClick={handleConfirmDelete}\n              />\n            </Stack>\n          </>\n        )}\n\n        {(showUsageDialog || showDeleteDialog) && (\n          <AssetUsageDialog\n            assetType=\"file\"\n            asset={asset}\n            mode={showDeleteDialog ? 'confirmDelete' : 'listUsage'}\n            onClose={handleDialogClose}\n            onDelete={handleDeleteAsset}\n            isDeleting={isDeleting}\n          />\n        )}\n      </Card>\n    )\n  }\n\n  return (\n    <CustomCard\n      asset={asset}\n      paddingBottom={1}\n      style={STYLES_ROW_CARD}\n      radius={0}\n      overflow={'hidden'}\n      isSelected={isSelected}\n      aria-selected=\"true\"\n    >\n      <Grid\n        columns={4}\n        gap={1}\n        data-id={_id}\n        paddingY={1}\n        style={{\n          position: 'relative',\n          gridTemplateColumns: '3fr 1fr 1fr 2fr 30px',\n          opacity: isDeleting ? 0.5 : 1,\n        }}\n      >\n        <RowButton\n          asset={asset}\n          mode=\"bleed\"\n          data-id={_id}\n          onClick={onClick}\n          padding={0}\n          onKeyPress={onKeyPress}\n          title={`Select the file ${originalFilename}`}\n          isSelected={isSelected}\n        >\n          <CustomFlex\n            gap={2}\n            flex={2}\n            paddingRight={1}\n            align=\"center\"\n            onClick={onClick}\n            onKeyPress={onKeyPress}\n            data-id={_id}\n            title={`Select the file ${originalFilename}`}\n          >\n            <Card\n              as={CardIconWrapper}\n              padding={2}\n              tone=\"transparent\"\n              radius={2}\n              style={STYLES_ICON_CARD}\n            >\n              <Text muted size={2}>\n                <DocumentIcon />\n              </Text>\n            </Card>\n            {showTooltip && (\n              <Tooltip\n                content={\n                  <Box padding={2}>\n                    <Text size={1}>{originalFilename}</Text>\n                  </Box>\n                }\n                fallbackPlacements={['right', 'left']}\n                placement=\"top\"\n                portal\n              >\n                <Text size={1} align=\"left\" textOverflow=\"ellipsis\" style={STYLES_BUTTON_TEXT}>\n                  {originalFilename}\n                </Text>\n              </Tooltip>\n            )}\n\n            {!showTooltip && (\n              <Text size={1} align=\"left\" textOverflow=\"ellipsis\" style={STYLES_BUTTON_TEXT}>\n                {originalFilename}\n              </Text>\n            )}\n          </CustomFlex>\n        </RowButton>\n        <CustomFlex align=\"center\">\n          <Text size={1} muted>\n            {formattedSize}\n          </Text>\n        </CustomFlex>\n        <CustomFlex align=\"center\">\n          <Text size={1} muted>\n            {formattedMimeType}\n          </Text>\n        </CustomFlex>\n        <CustomFlex align=\"center\">\n          <Text as=\"time\" size={1} muted dateTime={_createdAt}>\n            {formattedTime}\n          </Text>\n        </CustomFlex>\n        <CustomFlex\n          justify=\"flex-end\"\n          align=\"center\"\n          paddingX={1}\n          paddingY={1}\n          style={STYLES_ASSETMENU_WRAPPER}\n        >\n          <AssetMenu border={false} isSelected={false} onAction={handleMenuAction} />\n        </CustomFlex>\n      </Grid>\n      {(showUsageDialog || showDeleteDialog) && (\n        <AssetUsageDialog\n          assetType=\"file\"\n          asset={asset}\n          mode={showDeleteDialog ? 'confirmDelete' : 'listUsage'}\n          onClose={handleDialogClose}\n          onDelete={handleDeleteAsset}\n          isDeleting={isDeleting}\n        />\n      )}\n    </CustomCard>\n  )\n}\n","import React from 'react'\nimport {Box, Card, Flex, Grid, Label, Spinner, Stack, useMediaIndex} from '@sanity/ui'\nimport {Asset as AssetType} from '@sanity/types'\nimport {AssetRow} from './AssetRow'\n\ninterface Props {\n  onClick?: (...args: any[]) => any\n  onKeyPress?: (...args: any[]) => any\n  onDeleteFinished: (...args: any[]) => any\n  assets: AssetType[]\n  isLoading?: boolean\n  selectedAssets: AssetType[]\n}\n\nconst STYLES_FILENAME = {paddingLeft: '2.2rem'}\nconst STYLES_GRID = {gridTemplateColumns: '3fr 1fr 1fr 2fr 30px'}\n\nexport function TableList(props: Props) {\n  const mediaIndex = useMediaIndex()\n  const isMobile = mediaIndex < 2\n  const {assets, onClick, onKeyPress, onDeleteFinished, selectedAssets, isLoading} = props\n\n  return (\n    <Box padding={4}>\n      <Card borderBottom paddingBottom={2} marginBottom={1}>\n        {isMobile ? (\n          <Grid style={STYLES_GRID}>\n            <Box flex={2} paddingLeft={5}>\n              <Label muted size={1}>\n                Filename\n              </Label>\n            </Box>\n          </Grid>\n        ) : (\n          <Grid gap={1} style={STYLES_GRID}>\n            <Box flex={2} style={STYLES_FILENAME}>\n              <Label muted size={1}>\n                Filename\n              </Label>\n            </Box>\n            <Box flex={1}>\n              <Label muted size={1}>\n                Size\n              </Label>\n            </Box>\n            <Box flex={1}>\n              <Label muted size={1}>\n                Type\n              </Label>\n            </Box>\n            <Box flex={1}>\n              <Label muted size={1}>\n                Date added\n              </Label>\n            </Box>\n          </Grid>\n        )}\n      </Card>\n      <Stack>\n        {isLoading && assets.length === 0 && (\n          <Box paddingTop={4} paddingBottom={2}>\n            <Flex justify=\"center\">\n              <Spinner muted />\n            </Flex>\n          </Box>\n        )}\n        {assets.map((asset) => (\n          <AssetRow\n            key={asset._id}\n            asset={asset}\n            isMobile={isMobile}\n            isSelected={selectedAssets.some((selected) => selected._id === asset._id)}\n            onClick={onClick}\n            onKeyPress={onKeyPress}\n            onDeleteFinished={onDeleteFinished}\n          />\n        ))}\n      </Stack>\n    </Box>\n  )\n}\n","import type {Subscription} from 'rxjs'\nimport React, {useState, useRef, useCallback, useMemo, useEffect} from 'react'\nimport {DownloadIcon} from '@sanity/icons'\nimport {Box, Button, Card, Dialog, Flex, Grid, Spinner, Text} from '@sanity/ui'\nimport {Asset as AssetType, AssetFromSource, AssetSourceComponentProps} from '@sanity/types'\nimport {uniqueId} from 'lodash'\nimport styled from 'styled-components'\nimport {useClient} from '../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {AssetThumb} from './AssetThumb'\nimport {TableList} from './TableList'\n\nconst PER_PAGE = 200\nconst ASSET_TYPE_IMAGE = 'sanity.imageAsset'\nconst ASSET_TYPE_FILE = 'sanity.fileAsset'\n\nconst buildQuery = (start = 0, end = PER_PAGE, assetType = ASSET_TYPE_IMAGE) => `\n  *[_type == \"${assetType}\"] | order(_updatedAt desc) [${start}...${end}] {\n    _id,\n    _updatedAt,\n    _createdAt,\n    url,\n    originalFilename,\n    mimeType,\n    extension,\n    size,\n    metadata {dimensions}\n  }\n`\n\nconst ThumbGrid = styled(Grid)`\n  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n`\n\nconst CardLoadMore = styled(Card)`\n  border-top: 1px solid var(--card-border-color);\n  position: sticky;\n  bottom: 0;\n  z-index: 200;\n`\n\nconst DefaultAssetSource = function DefaultAssetSource(\n  props: AssetSourceComponentProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const versionedClient = useMemo(() => client.withConfig({apiVersion: '1'}), [client])\n  const _elementId = useRef(`default-asset-source-${uniqueId()}`)\n  const currentPageNumber = useRef(0)\n  const fetch$ = useRef<Subscription>()\n  const [assets, setAssets] = useState<AssetType[]>([])\n  const [isLastPage, setIsLastPage] = useState(false)\n  const [hasResetAutoFocus, setHasResetFocus] = useState(false)\n  const [isLoading, setIsLoading] = useState(true)\n  const {\n    selectedAssets,\n    assetType = 'image',\n    dialogHeaderTitle = 'Select image',\n    onClose,\n    onSelect,\n  } = props\n\n  const fetchPage = useCallback(\n    (pageNumber: number) => {\n      const start = pageNumber * PER_PAGE\n      const end = start + PER_PAGE\n      const isImageAssetType = assetType === 'image'\n      const tag = isImageAssetType ? 'asset.image-list' : 'asset.file-list'\n      const assetTypeParam = isImageAssetType ? ASSET_TYPE_IMAGE : ASSET_TYPE_FILE\n\n      setIsLoading(true)\n\n      fetch$.current = versionedClient.observable\n        .fetch(buildQuery(start, end, assetTypeParam), {}, {tag})\n        .subscribe((result) => {\n          setIsLastPage(result.length < PER_PAGE)\n          // eslint-disable-next-line max-nested-callbacks\n          setAssets((prevState) => prevState.concat(result))\n          setIsLoading(false)\n        })\n    },\n    [assetType, setIsLoading, setAssets, setIsLastPage, versionedClient]\n  )\n\n  const handleDeleteFinished = useCallback(\n    (id: any) => {\n      // eslint-disable-next-line max-nested-callbacks\n      setAssets((prevState) => prevState.filter((asset) => asset._id !== id))\n    },\n    [setAssets]\n  )\n\n  const select = useCallback(\n    (id: any) => {\n      const selected = assets.find((doc) => doc._id === id)\n\n      if (selected) {\n        const selectedSource: AssetFromSource[] = [{kind: 'assetDocumentId', value: id}]\n\n        onSelect(selectedSource)\n      }\n    },\n    [assets, onSelect]\n  )\n\n  const handleItemClick = useCallback(\n    (event: React.MouseEvent) => {\n      event.preventDefault()\n\n      select(event.currentTarget.getAttribute('data-id'))\n    },\n    [select]\n  )\n\n  const handleItemKeyPress = useCallback(\n    (event: React.KeyboardEvent) => {\n      if (event.key === 'Enter') {\n        event.preventDefault()\n        select(event.currentTarget.getAttribute('data-id'))\n      }\n    },\n    [select]\n  )\n\n  const handleClose = useCallback(() => {\n    if (onClose) {\n      onClose()\n    }\n  }, [onClose])\n\n  const handleFetchNextPage = useCallback(\n    (event: any) => {\n      event.preventDefault()\n      fetchPage(++currentPageNumber.current)\n    },\n    [fetchPage]\n  )\n\n  useEffect(() => {\n    fetchPage(currentPageNumber.current)\n\n    return () => {\n      if (fetch$.current) {\n        fetch$.current.unsubscribe()\n      }\n    }\n  }, [fetchPage])\n\n  useEffect(() => {\n    // We focus on the first item after we're doing loading, but only on initial load, as\n    // this will reset the scroll position to the top if we do it on the second page\n    if (!isLoading && (!currentPageNumber.current || currentPageNumber.current === 0)) {\n      setHasResetFocus(true)\n    }\n  }, [isLoading])\n\n  const renderedThumbView = useMemo(() => {\n    return (\n      <Box padding={4}>\n        <ThumbGrid gap={2}>\n          {assets.map((asset) => (\n            <AssetThumb\n              key={asset._id}\n              asset={asset}\n              isSelected={selectedAssets.some((selected) => selected._id === asset._id)}\n              onClick={handleItemClick}\n              onKeyPress={handleItemKeyPress}\n              onDeleteFinished={handleDeleteFinished}\n            />\n          ))}\n        </ThumbGrid>\n\n        {isLoading && assets.length === 0 && (\n          <Flex justify=\"center\">\n            <Spinner muted />\n          </Flex>\n        )}\n\n        {!isLoading && assets.length === 0 && (\n          <Text align=\"center\" muted>\n            No images\n          </Text>\n        )}\n      </Box>\n    )\n  }, [assets, handleDeleteFinished, handleItemClick, handleItemKeyPress, isLoading, selectedAssets])\n\n  const renderedTableView = useMemo(() => {\n    return (\n      <TableList\n        isLoading={isLoading}\n        assets={assets}\n        selectedAssets={selectedAssets}\n        onClick={handleItemClick}\n        onKeyPress={handleItemKeyPress}\n        onDeleteFinished={handleDeleteFinished}\n      />\n    )\n  }, [isLoading, assets, selectedAssets, handleItemClick, handleItemKeyPress, handleDeleteFinished])\n\n  return (\n    <Dialog\n      ref={ref}\n      id={_elementId.current}\n      header={dialogHeaderTitle}\n      width={2}\n      onClose={handleClose}\n      __unstable_autoFocus={hasResetAutoFocus}\n    >\n      {assetType === 'image' && renderedThumbView}\n      {assetType === 'file' && renderedTableView}\n      {assets.length > 0 && !isLastPage && (\n        <CardLoadMore tone=\"default\" padding={4}>\n          <Flex direction=\"column\">\n            <Button\n              type=\"button\"\n              icon={DownloadIcon}\n              loading={isLoading}\n              onClick={handleFetchNextPage}\n              text=\"Load more\"\n              tone=\"primary\"\n            />\n          </Flex>\n        </CardLoadMore>\n      )}\n    </Dialog>\n  )\n}\n\nexport const DefaultSource = React.memo(React.forwardRef(DefaultAssetSource))\n","import {DocumentsIcon} from '@sanity/icons'\nimport {AssetSource} from '@sanity/types'\nimport {FIXME} from '../../../FIXME'\nimport {DefaultSource} from './DefaultSource'\n\nexport const FileSource: AssetSource = {\n  name: 'sanity-default',\n  title: 'Uploaded files',\n  component: DefaultSource as FIXME,\n  icon: DocumentsIcon as FIXME,\n}\n","import {ImageIcon} from '@sanity/icons'\nimport {AssetSource} from '@sanity/types'\nimport {FIXME} from '../../../FIXME'\nimport {DefaultSource} from './DefaultSource'\n\nexport const ImageSource: AssetSource = {\n  name: 'sanity-default',\n  title: 'Uploaded images',\n  component: DefaultSource as FIXME,\n  icon: ImageIcon as FIXME,\n}\n","import {IntrinsicTypeName} from '@sanity/types'\nimport {ComponentType} from 'react'\nimport {SearchOperatorType} from './operators/defaultOperators'\n\nexport type Operator<TOperators = string> = OperatorDivider | OperatorItem<TOperators>\n\nexport type OperatorDivider = {\n  type: 'divider'\n}\n\nexport type OperatorItem<TOperators = string> = {\n  name: TOperators\n  type: 'item'\n}\n\ninterface SearchFilterBaseDefinition<TOperators> {\n  description?: string\n  icon: ComponentType\n  name: string\n  operators: Operator<TOperators>[]\n}\n\nexport interface SearchFilterFieldDefinition<TOperators = string>\n  extends SearchFilterBaseDefinition<TOperators> {\n  fieldType: IntrinsicTypeName\n  type: 'field'\n}\n\nexport interface SearchFilterPinnedDefinition<TOperators = string>\n  extends SearchFilterBaseDefinition<TOperators> {\n  fieldPath?: string\n  group?: string\n  title: string\n  type: 'pinned'\n}\n\n/**\n * @alpha\n */\nexport type SearchFilterDefinition<TOperators = string> =\n  | SearchFilterFieldDefinition<TOperators>\n  | SearchFilterPinnedDefinition<TOperators>\n\n/**\n * @alpha\n */\nexport function defineSearchFilter<TOperators = SearchOperatorType>(\n  filterDef: SearchFilterDefinition<TOperators>\n): typeof filterDef {\n  return filterDef\n}\n\n/**\n * @alpha\n */\nexport function defineSearchFilterOperators<TOperators = SearchOperatorType>(\n  operators: Operator<TOperators>[]\n): typeof operators {\n  return operators\n}\n\nexport function getFilterDefinition(\n  definitions: SearchFilterDefinition[],\n  filterName: string\n): SearchFilterDefinition | undefined {\n  return definitions.find((filter) => filter.name === filterName)\n}\n\n// TODO: we'll need to add field type to pinned filters, in order to properly infer\n// supported field types in the event all field filters are disabled / override\nexport function getSupportedFieldTypes(filterDefs: SearchFilterDefinition[]): string[] {\n  return filterDefs.reduce<string[]>((acc, val) => {\n    if (val.type === 'field') {\n      acc.push(val.fieldType)\n    }\n    return acc\n  }, [])\n}\n","import {\n  BlockContentIcon,\n  CalendarIcon,\n  CheckmarkCircleIcon,\n  DocumentIcon,\n  ImageIcon,\n  LinkIcon,\n  NumberIcon,\n  SelectIcon,\n  StringIcon,\n  UlistIcon,\n} from '@sanity/icons'\nimport {defineSearchFilter, SearchFilterDefinition} from './filters'\nimport {SearchOperatorType} from './operators/defaultOperators'\n\nexport const filterDefinitions: SearchFilterDefinition[] = [\n  // 'Pinned' filters\n  defineSearchFilter<SearchOperatorType>({\n    fieldPath: '_updatedAt',\n    icon: CalendarIcon,\n    operators: [\n      {name: 'dateTimeLast', type: 'item'},\n      {type: 'divider'},\n      {name: 'dateTimeAfter', type: 'item'},\n      {name: 'dateTimeBefore', type: 'item'},\n      {type: 'divider'},\n      {name: 'dateTimeEqual', type: 'item'},\n      {name: 'dateTimeNotEqual', type: 'item'},\n    ],\n    title: 'Updated at',\n    name: 'updatedAt',\n    type: 'pinned',\n  }),\n  defineSearchFilter<SearchOperatorType>({\n    fieldPath: '_createdAt',\n    icon: CalendarIcon,\n    operators: [\n      {name: 'dateTimeLast', type: 'item'},\n      {type: 'divider'},\n      {name: 'dateTimeAfter', type: 'item'},\n      {name: 'dateTimeBefore', type: 'item'},\n      {type: 'divider'},\n      {name: 'dateTimeEqual', type: 'item'},\n      {name: 'dateTimeNotEqual', type: 'item'},\n    ],\n    title: 'Created at',\n    name: 'createdAt',\n    type: 'pinned',\n  }),\n  defineSearchFilter<SearchOperatorType>({\n    icon: LinkIcon,\n    operators: [\n      {name: 'referencesDocument', type: 'item'},\n      {name: 'referencesAssetImage', type: 'item'},\n      {name: 'referencesAssetFile', type: 'item'},\n    ],\n    title: 'Contains document, image or file',\n    name: 'references',\n    type: 'pinned',\n  }),\n  // 'Field' filters\n  defineSearchFilter<SearchOperatorType>({\n    fieldType: 'array',\n    icon: UlistIcon,\n    name: 'array',\n    operators: [\n      {name: 'defined', type: 'item'},\n      {name: 'notDefined', type: 'item'},\n      {type: 'divider'},\n      {name: 'arrayCountEqual', type: 'item'},\n      {name: 'arrayCountNotEqual', type: 'item'},\n      {type: 'divider'},\n      {name: 'arrayCountGt', type: 'item'},\n      {name: 'arrayCountGte', type: 'item'},\n      {name: 'arrayCountLt', type: 'item'},\n      {name: 'arrayCountLte', type: 'item'},\n      {type: 'divider'},\n      {name: 'arrayCountRange', type: 'item'},\n    ],\n    type: 'field',\n  }),\n  defineSearchFilter<SearchOperatorType>({\n    fieldType: 'array',\n    icon: UlistIcon,\n    name: 'arrayList',\n    operators: [\n      {name: 'arrayListIncludes', type: 'item'},\n      {name: 'arrayListNotIncludes', type: 'item'},\n      {type: 'divider'},\n      {name: 'defined', type: 'item'},\n      {name: 'notDefined', type: 'item'},\n      {type: 'divider'},\n      {name: 'arrayCountEqual', type: 'item'},\n      {name: 'arrayCountNotEqual', type: 'item'},\n      {type: 'divider'},\n      {name: 'arrayCountGt', type: 'item'},\n      {name: 'arrayCountGte', type: 'item'},\n      {name: 'arrayCountLt', type: 'item'},\n      {name: 'arrayCountLte', type: 'item'},\n      {type: 'divider'},\n      {name: 'arrayCountRange', type: 'item'},\n    ],\n    type: 'field',\n  }),\n  defineSearchFilter<SearchOperatorType>({\n    fieldType: 'array',\n    icon: UlistIcon,\n    name: 'arrayReferences',\n    operators: [\n      {name: 'arrayReferenceIncludes', type: 'item'},\n      {name: 'arrayReferenceNotIncludes', type: 'item'},\n      {type: 'divider'},\n      {name: 'defined', type: 'item'},\n      {name: 'notDefined', type: 'item'},\n      {type: 'divider'},\n      {name: 'arrayCountEqual', type: 'item'},\n      {name: 'arrayCountNotEqual', type: 'item'},\n      {type: 'divider'},\n      {name: 'arrayCountGt', type: 'item'},\n      {name: 'arrayCountGte', type: 'item'},\n      {name: 'arrayCountLt', type: 'item'},\n      {name: 'arrayCountLte', type: 'item'},\n      {type: 'divider'},\n      {name: 'arrayCountRange', type: 'item'},\n    ],\n    type: 'field',\n  }),\n  defineSearchFilter<SearchOperatorType>({\n    fieldType: 'boolean',\n    icon: CheckmarkCircleIcon,\n    name: 'boolean',\n    operators: [\n      {name: 'booleanEqual', type: 'item'},\n      {type: 'divider'},\n      {name: 'notDefined', type: 'item'},\n    ],\n    type: 'field',\n  }),\n  defineSearchFilter<SearchOperatorType>({\n    fieldType: 'date',\n    icon: CalendarIcon,\n    name: 'date',\n    operators: [\n      {name: 'dateLast', type: 'item'},\n      {type: 'divider'},\n      {name: 'dateAfter', type: 'item'},\n      {name: 'dateBefore', type: 'item'},\n      {type: 'divider'},\n      {name: 'dateEqual', type: 'item'},\n      {name: 'dateNotEqual', type: 'item'},\n      {type: 'divider'},\n      {name: 'defined', type: 'item'},\n      {name: 'notDefined', type: 'item'},\n    ],\n    type: 'field',\n  }),\n  defineSearchFilter<SearchOperatorType>({\n    fieldType: 'datetime',\n    icon: CalendarIcon,\n    name: 'datetime',\n    operators: [\n      {name: 'dateTimeLast', type: 'item'},\n      {type: 'divider'},\n      {name: 'dateTimeAfter', type: 'item'},\n      {name: 'dateTimeBefore', type: 'item'},\n      {type: 'divider'},\n      {name: 'dateTimeEqual', type: 'item'},\n      {name: 'dateTimeNotEqual', type: 'item'},\n      {type: 'divider'},\n      {name: 'defined', type: 'item'},\n      {name: 'notDefined', type: 'item'},\n    ],\n    type: 'field',\n  }),\n  defineSearchFilter<SearchOperatorType>({\n    fieldType: 'email',\n    icon: StringIcon,\n    name: 'email',\n    operators: [\n      {name: 'stringMatches', type: 'item'},\n      {name: 'stringNotMatches', type: 'item'},\n      {type: 'divider'},\n      {name: 'stringEqual', type: 'item'},\n      {name: 'stringNotEqual', type: 'item'},\n      {type: 'divider'},\n      {name: 'defined', type: 'item'},\n      {name: 'notDefined', type: 'item'},\n    ],\n    type: 'field',\n  }),\n  defineSearchFilter<SearchOperatorType>({\n    fieldType: 'file',\n    icon: DocumentIcon,\n    name: 'file',\n    operators: [\n      {name: 'assetFileEqual', type: 'item'},\n      {name: 'assetFileNotEqual', type: 'item'},\n      {type: 'divider'},\n      {name: 'defined', type: 'item'},\n      {name: 'notDefined', type: 'item'},\n    ],\n    type: 'field',\n  }),\n  defineSearchFilter<SearchOperatorType>({\n    fieldType: 'image',\n    icon: ImageIcon,\n    name: 'image',\n    operators: [\n      {name: 'assetImageEqual', type: 'item'},\n      {name: 'assetImageNotEqual', type: 'item'},\n      {type: 'divider'},\n      {name: 'defined', type: 'item'},\n      {name: 'notDefined', type: 'item'},\n    ],\n    type: 'field',\n  }),\n  defineSearchFilter<SearchOperatorType>({\n    fieldType: 'number',\n    icon: NumberIcon,\n    name: 'number',\n    operators: [\n      {name: 'numberEqual', type: 'item'},\n      {name: 'numberNotEqual', type: 'item'},\n      {type: 'divider'},\n      {name: 'numberGt', type: 'item'},\n      {name: 'numberGte', type: 'item'},\n      {name: 'numberLt', type: 'item'},\n      {name: 'numberLte', type: 'item'},\n      {type: 'divider'},\n      {name: 'numberRange', type: 'item'},\n      {type: 'divider'},\n      {name: 'defined', type: 'item'},\n      {name: 'notDefined', type: 'item'},\n    ],\n    type: 'field',\n  }),\n  defineSearchFilter<SearchOperatorType>({\n    fieldType: 'array',\n    icon: BlockContentIcon,\n    name: 'portableText',\n    operators: [\n      {name: 'portableTextMatches', type: 'item'},\n      {name: 'portableTextNotMatches', type: 'item'},\n      {type: 'divider'},\n      {name: 'portableTextEqual', type: 'item'},\n      {name: 'portableTextNotEqual', type: 'item'},\n      {type: 'divider'},\n      {name: 'defined', type: 'item'},\n      {name: 'notDefined', type: 'item'},\n    ],\n    type: 'field',\n  }),\n  defineSearchFilter<SearchOperatorType>({\n    fieldType: 'reference',\n    icon: LinkIcon,\n    name: 'reference',\n    operators: [\n      {name: 'referenceEqual', type: 'item'},\n      {name: 'referenceNotEqual', type: 'item'},\n      {type: 'divider'},\n      {name: 'defined', type: 'item'},\n      {name: 'notDefined', type: 'item'},\n    ],\n    type: 'field',\n  }),\n  defineSearchFilter<SearchOperatorType>({\n    fieldType: 'slug',\n    icon: StringIcon,\n    name: 'slug',\n    operators: [\n      {name: 'slugMatches', type: 'item'},\n      {name: 'slugNotMatches', type: 'item'},\n      {type: 'divider'},\n      {name: 'slugEqual', type: 'item'},\n      {name: 'slugNotEqual', type: 'item'},\n      {type: 'divider'},\n      {name: 'defined', type: 'item'},\n      {name: 'notDefined', type: 'item'},\n    ],\n    type: 'field',\n  }),\n  defineSearchFilter<SearchOperatorType>({\n    fieldType: 'string',\n    icon: StringIcon,\n    name: 'string',\n    operators: [\n      {name: 'stringMatches', type: 'item'},\n      {name: 'stringNotMatches', type: 'item'},\n      {type: 'divider'},\n      {name: 'stringEqual', type: 'item'},\n      {name: 'stringNotEqual', type: 'item'},\n      {type: 'divider'},\n      {name: 'defined', type: 'item'},\n      {name: 'notDefined', type: 'item'},\n    ],\n    type: 'field',\n  }),\n  defineSearchFilter<SearchOperatorType>({\n    fieldType: 'string',\n    icon: SelectIcon,\n    name: 'stringList',\n    operators: [\n      {name: 'stringListEqual', type: 'item'},\n      {name: 'stringListNotEqual', type: 'item'},\n      {type: 'divider'},\n      {name: 'stringMatches', type: 'item'},\n      {name: 'stringNotMatches', type: 'item'},\n      {type: 'divider'},\n      {name: 'defined', type: 'item'},\n      {name: 'notDefined', type: 'item'},\n    ],\n    type: 'field',\n  }),\n  defineSearchFilter<SearchOperatorType>({\n    fieldType: 'text',\n    icon: StringIcon,\n    name: 'text',\n    operators: [\n      {name: 'stringMatches', type: 'item'},\n      {name: 'stringNotMatches', type: 'item'},\n      {type: 'divider'},\n      {name: 'stringEqual', type: 'item'},\n      {name: 'stringNotEqual', type: 'item'},\n      {type: 'divider'},\n      {name: 'defined', type: 'item'},\n      {name: 'notDefined', type: 'item'},\n    ],\n    type: 'field',\n  }),\n  defineSearchFilter<SearchOperatorType>({\n    fieldType: 'url',\n    icon: StringIcon,\n    name: 'url',\n    operators: [\n      {name: 'stringMatches', type: 'item'},\n      {name: 'stringNotMatches', type: 'item'},\n      {type: 'divider'},\n      {name: 'stringEqual', type: 'item'},\n      {name: 'stringNotEqual', type: 'item'},\n      {type: 'divider'},\n      {name: 'defined', type: 'item'},\n      {name: 'notDefined', type: 'item'},\n    ],\n    type: 'field',\n  }),\n]\n","import type {SanityDocument, SchemaType} from '@sanity/types'\nimport {Skeleton} from '@sanity/ui'\nimport React, {useMemo} from 'react'\nimport {useMemoObservable} from 'react-rx'\nimport {getPreviewStateObservable, getPreviewValueWithFallback} from '../../../../../../../preview'\nimport {useDocumentPreviewStore} from '../../../../../../../store'\n\nexport function ReferencePreviewTitle({\n  documentId,\n  schemaType,\n}: {\n  documentId: string\n  schemaType: SchemaType\n}) {\n  const documentPreviewStore = useDocumentPreviewStore()\n\n  // NOTE: this emits sync so can never be null\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const {draft, published, isLoading} = useMemoObservable(\n    () => getPreviewStateObservable(documentPreviewStore, schemaType, documentId, ''),\n    [documentId, documentPreviewStore, schemaType]\n  )!\n\n  const sanityDocument = useMemo(() => {\n    return {\n      _id: documentId,\n      _type: schemaType.name,\n    } as SanityDocument\n  }, [documentId, schemaType.name])\n\n  const previewValue = getPreviewValueWithFallback({\n    draft,\n    published,\n    value: sanityDocument,\n  })\n\n  if (isLoading) {\n    return <Skeleton animated marginLeft={1} radius={2} style={{width: '10ch', height: '1em'}} />\n  }\n\n  return <>{previewValue.title || documentId.slice(0, 8)}</>\n}\n","import type {Reference} from '@sanity/types'\nimport {format, isValid} from 'date-fns'\nimport pluralize from 'pluralize-esm'\nimport React from 'react'\nimport {useSchema} from '../../../../../../../hooks'\nimport type {OperatorNumberRangeValue} from '../../../definitions/operators/common'\nimport type {OperatorDateLastValue} from '../../../definitions/operators/dateOperators'\nimport {OperatorButtonValueComponentProps} from '../../../definitions/operators/operatorTypes'\nimport {ReferencePreviewTitle} from './ReferencePreviewTitle'\n\nconst DEFAULT_DATE_FORMAT = 'yyyy-MM-dd'\n\nexport function SearchButtonValueBoolean({value}: OperatorButtonValueComponentProps<boolean>) {\n  return <>{value ? 'True' : 'False'}</>\n}\n\nexport function SearchButtonValueDate({value}: OperatorButtonValueComponentProps<string>) {\n  const date = value ? new Date(value) : null\n  if (!date || !isValid(date)) {\n    return null\n  }\n  return <>{format(date, DEFAULT_DATE_FORMAT)}</>\n}\n\nexport function SearchButtonValueDateLast({\n  value,\n}: OperatorButtonValueComponentProps<OperatorDateLastValue>) {\n  return (\n    <>\n      {Math.floor(value?.value ?? 0)} {value.unit}\n    </>\n  )\n}\n\nexport function SearchButtonValueNumber({value}: OperatorButtonValueComponentProps<number>) {\n  return <>{value}</>\n}\n\nexport function SearchButtonValueNumberCount({value}: OperatorButtonValueComponentProps<number>) {\n  return (\n    <>\n      {value} {pluralize('item', value)}\n    </>\n  )\n}\n\nexport function SearchButtonValueNumberRange({\n  value,\n}: OperatorButtonValueComponentProps<OperatorNumberRangeValue>) {\n  return (\n    <>\n      {value.min} → {value.max}\n    </>\n  )\n}\n\nexport function SearchButtonValueNumberCountRange({\n  value,\n}: OperatorButtonValueComponentProps<OperatorNumberRangeValue>) {\n  return (\n    <>\n      {value.min} → {value.max} items\n    </>\n  )\n}\n\nexport function SearchButtonValueReference({value}: OperatorButtonValueComponentProps<Reference>) {\n  const schema = useSchema()\n  const documentId = value._ref\n  const schemaType = schema.get(value._type)\n  if (!schemaType) {\n    return null\n  }\n  return <ReferencePreviewTitle documentId={documentId} schemaType={schemaType} />\n}\n\nexport function SearchButtonValueString({\n  value,\n}: OperatorButtonValueComponentProps<string | number>) {\n  return <>{value}</>\n}\n","import {createContext, Dispatch} from 'react'\nimport {RecentSearchesStore} from '../../datastores/recentSearches'\nimport {SearchAction, SearchReducerState} from './reducer'\n\nexport interface SearchContextValue {\n  dispatch: Dispatch<SearchAction>\n  onClose: (() => void) | null\n  recentSearchesStore?: RecentSearchesStore\n  setOnClose: (onClose: () => void) => void\n  state: SearchReducerState\n}\n\nexport const SearchContext = createContext<SearchContextValue | undefined>(undefined)\n","import {useContext} from 'react'\nimport {SearchContext, SearchContextValue} from './SearchContext'\n\nexport function useSearchState(): SearchContextValue {\n  const context = useContext(SearchContext)\n  if (context === undefined) {\n    throw new Error('useSearchState must be used within an SearchProvider')\n  }\n  return context\n}\n","import {TextInput} from '@sanity/ui'\nimport React, {ChangeEvent, useCallback, useState} from 'react'\nimport {useSearchState} from '../../../../../contexts/search/useSearchState'\nimport {OperatorInputComponentProps} from '../../../../../definitions/operators/operatorTypes'\n\nexport function SearchFilterNumberInput({value, onChange}: OperatorInputComponentProps<number>) {\n  const [uncontrolledValue, setUncontrolledValue] = useState(value ?? '')\n\n  const {\n    state: {fullscreen},\n  } = useSearchState()\n\n  const handleChange = useCallback(\n    (event: ChangeEvent<HTMLInputElement>) => {\n      setUncontrolledValue(event.currentTarget.value)\n      const numValue = parseFloat(event.currentTarget.value)\n      onChange(Number.isFinite(numValue) ? numValue : null)\n    },\n    [onChange]\n  )\n\n  return (\n    <TextInput\n      fontSize={fullscreen ? 2 : 1}\n      onChange={handleChange}\n      placeholder=\"Value\"\n      step=\"any\"\n      type=\"number\"\n      value={uncontrolledValue}\n    />\n  )\n}\n","import {Box, Flex, TextInput} from '@sanity/ui'\nimport React, {ChangeEvent, useCallback, useState} from 'react'\nimport {useSearchState} from '../../../../../contexts/search/useSearchState'\nimport {OperatorNumberRangeValue} from '../../../../../definitions/operators/common'\nimport {OperatorInputComponentProps} from '../../../../../definitions/operators/operatorTypes'\n\nexport function SearchFilterNumberRangeInput({\n  onChange,\n  value,\n}: OperatorInputComponentProps<OperatorNumberRangeValue>) {\n  const [max, setMax] = useState(value?.max ?? '')\n  const [min, setMin] = useState(value?.min ?? '')\n\n  const {\n    state: {fullscreen},\n  } = useSearchState()\n\n  const handleMaxChange = useCallback(\n    (event: ChangeEvent<HTMLInputElement>) => {\n      setMax(event.currentTarget.value)\n      const numValue = parseFloat(event.currentTarget.value)\n      onChange({\n        max: Number.isFinite(numValue) ? numValue : null,\n        min: value?.min ?? null,\n      })\n    },\n    [value?.min, onChange]\n  )\n  const handleMinChange = useCallback(\n    (event: ChangeEvent<HTMLInputElement>) => {\n      setMin(event.currentTarget.value)\n      const numValue = parseFloat(event.currentTarget.value)\n      onChange({\n        max: value?.max ?? null,\n        min: Number.isFinite(numValue) ? numValue : null,\n      })\n    },\n    [value?.max, onChange]\n  )\n\n  return (\n    <Flex gap={2}>\n      <Box flex={1}>\n        <TextInput\n          fontSize={fullscreen ? 2 : 1}\n          onChange={handleMinChange}\n          placeholder=\"Min value\"\n          step=\"any\"\n          type=\"number\"\n          value={min}\n        />\n      </Box>\n      <Box flex={1}>\n        <TextInput\n          fontSize={fullscreen ? 2 : 1}\n          onChange={handleMaxChange}\n          placeholder=\"Max value\"\n          step=\"any\"\n          type=\"number\"\n          value={max}\n        />\n      </Box>\n    </Flex>\n  )\n}\n","import {isObjectSchemaType, ObjectField, SchemaType} from '@sanity/types'\n\nexport function getSchemaField(\n  schemaType: SchemaType,\n  fieldPath: string\n): ObjectField<SchemaType> | undefined {\n  const paths = fieldPath.split('.')\n  const firstPath = paths[0]\n  if (firstPath && isObjectSchemaType(schemaType)) {\n    const field = schemaType.fields.find((f) => f.name === firstPath)\n    if (field) {\n      const nextPath = paths.slice(1).join('.')\n      if (nextPath) {\n        return getSchemaField(field.type, nextPath)\n      }\n      return field\n    }\n  }\n  return undefined\n}\n","import type {SanityDocument} from '@sanity/client'\nimport type {SchemaType} from '@sanity/types'\nimport {Box, Inline, Label} from '@sanity/ui'\nimport React, {useMemo} from 'react'\nimport {useMemoObservable} from 'react-rx'\nimport styled from 'styled-components'\nimport {DocumentPreviewPresence} from '../../../../../../../presence'\nimport {\n  getPreviewStateObservable,\n  getPreviewValueWithFallback,\n  SanityDefaultPreview,\n} from '../../../../../../../preview'\nimport {DocumentPresence, useDocumentPreviewStore} from '../../../../../../../store'\n\ninterface SearchResultItemPreviewProps {\n  documentId: string\n  presence?: DocumentPresence[]\n  schemaType: SchemaType\n}\n\n/**\n * Temporary workaround: force all nested boxes on iOS to use `background-attachment: scroll`\n * to allow <Skeleton> components to render correctly within virtual lists.\n */\nconst SearchResultItemPreviewBox = styled(Box)`\n  @supports (-webkit-overflow-scrolling: touch) {\n    * [data-ui='Box'] {\n      background-attachment: scroll;\n    }\n  }\n`\n\nconst TypeLabel = styled(Label)`\n  max-width: 150px;\n`\n\nexport default function SearchResultItemPreview({\n  documentId,\n  presence,\n  schemaType,\n}: SearchResultItemPreviewProps) {\n  const documentPreviewStore = useDocumentPreviewStore()\n\n  // NOTE: this emits sync so can never be null\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const {draft, published, isLoading} = useMemoObservable(\n    () => getPreviewStateObservable(documentPreviewStore, schemaType, documentId, ''),\n    [documentId, documentPreviewStore, schemaType]\n  )!\n\n  const sanityDocument = useMemo(() => {\n    return {\n      _id: documentId,\n      _type: schemaType.name,\n    } as SanityDocument\n  }, [documentId, schemaType.name])\n\n  const status = useMemo(() => {\n    if (isLoading) return null\n    return (\n      <Inline space={3}>\n        {presence && presence.length > 0 && <DocumentPreviewPresence presence={presence} />}\n        <TypeLabel size={0} muted textOverflow=\"ellipsis\">\n          {schemaType.title}\n        </TypeLabel>\n      </Inline>\n    )\n  }, [isLoading, presence, schemaType.title])\n\n  return (\n    <SearchResultItemPreviewBox>\n      <SanityDefaultPreview\n        {...getPreviewValueWithFallback({\n          draft,\n          published,\n          value: sanityDocument,\n        })}\n        isPlaceholder={isLoading ?? true}\n        layout=\"default\"\n        icon={schemaType.icon}\n        status={status}\n      />\n    </SearchResultItemPreviewBox>\n  )\n}\n","import {Box, Card, ResponsiveMarginProps, ResponsivePaddingProps} from '@sanity/ui'\nimport React, {MouseEvent, useCallback} from 'react'\nimport styled from 'styled-components'\nimport {PreviewCard} from '../../../../../../../components/PreviewCard'\nimport {useSchema} from '../../../../../../../hooks'\nimport {useDocumentPresence} from '../../../../../../../store'\nimport SearchResultItemPreview from './SearchResultItemPreview'\nimport {useIntentLink} from 'sanity/router'\n\ninterface SearchResultItemProps extends ResponsiveMarginProps, ResponsivePaddingProps {\n  compact?: boolean\n  disableIntentLink?: boolean\n  documentId: string\n  documentType: string\n  onClick?: () => void\n}\n\nconst PreviewCardLink = styled(Card).attrs({as: 'a'})`\n  // Intentionally left empty – we just want to use the attrs() to set the as prop to \"a\"\n`\n\nexport function SearchResultItem({\n  compact,\n  disableIntentLink,\n  documentId,\n  documentType,\n  onClick,\n  ...rest\n}: SearchResultItemProps) {\n  const schema = useSchema()\n  const type = schema.get(documentType)\n  const documentPresence = useDocumentPresence(documentId)\n\n  const {onClick: onIntentClick, href} = useIntentLink({\n    intent: 'edit',\n    params: {\n      id: documentId,\n      type: type?.name,\n    },\n  })\n\n  const handleClick = useCallback(\n    (e: MouseEvent<HTMLElement>) => {\n      if (!disableIntentLink) {\n        onIntentClick(e)\n      }\n      onClick?.()\n    },\n    [disableIntentLink, onClick, onIntentClick]\n  )\n\n  if (!type) return null\n\n  return (\n    <Box {...rest}>\n      <PreviewCard\n        as={PreviewCardLink}\n        data-as=\"a\"\n        data-command-list-item\n        flex={1}\n        href={disableIntentLink ? undefined : href}\n        onClick={handleClick}\n        padding={compact ? 1 : 2}\n        radius={2}\n        tabIndex={-1}\n      >\n        <SearchResultItemPreview\n          documentId={documentId}\n          presence={documentPresence}\n          schemaType={type}\n        />\n      </PreviewCard>\n    </Box>\n  )\n}\n","import {studioTheme} from '@sanity/ui'\n\nconst IS_MAC =\n  typeof window != 'undefined' && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform)\n\n// Enable debug mode when the current URL contains the below fragment.\n// Must be prefixed with `_debug_`\nexport const DEBUG_FRAGMENT = '_debug_search_score'\n\n// Display debug filter information: shared document types and field values\nexport const DEBUG_MODE = false\n\n// Findability version, prepended to every search query for future measurement\nexport const FINDABILITY_MVI = 3\n\n// Max number of records to fetch per search request - intentionally set high to workaround\n// current limitations with studio search config\nexport const SEARCH_LIMIT = 1000\n\nexport const GLOBAL_SEARCH_KEY = 'k'\nexport const GLOBAL_SEARCH_KEY_MODIFIER = IS_MAC ? 'Cmd' : 'Ctrl'\n\nexport const POPOVER_INPUT_PADDING = studioTheme.space[1] // px\nexport const POPOVER_MAX_HEIGHT = 735 // px\nexport const POPOVER_MAX_WIDTH = 800 // px\n\n// Custom space between buttons and popover content\nexport const POPOVER_VERTICAL_MARGIN = 5 // px\n\nexport const POPOVER_RADIUS = 2\n\nexport const VIRTUAL_LIST_SEARCH_ITEM_HEIGHT = 59 // px\nexport const VIRTUAL_LIST_SEARCH_OVERSCAN = 4\n","import type {SearchTerms} from '../../../../../search'\n\nexport function hasSearchableTerms({\n  allowEmptyQueries,\n  terms,\n}: {\n  allowEmptyQueries?: boolean\n  terms: SearchTerms\n}): boolean {\n  const trimmedQuery = terms.query.trim()\n  return (\n    (allowEmptyQueries ? typeof trimmedQuery !== 'undefined' : trimmedQuery !== '') ||\n    (terms.filter && terms.filter?.trim() !== '') ||\n    terms.types.length > 0\n  )\n}\n","import type {ObjectSchemaType, Schema, SchemaType} from '@sanity/types'\nimport {getSearchableTypes} from '../../../../../search/common/utils'\nimport {SearchableType} from '../../../../../search'\n\n/**\n * Returns a list of all available document types filtered by a search string.\n * Types containing the search string in its `title` or `name` will be returned.\n */\nexport function getSelectableOmnisearchTypes(schema: Schema, typeFilter: string): SearchableType[] {\n  return getSearchableOmnisearchTypes(schema)\n    .filter((type) => inTypeFilter(type, typeFilter))\n    .sort(sortTypes)\n}\n\n/**\n * Return all searchable document types that are visible to omnisearch.\n * Documents with `__experimental_omnisearch_visibility: false` will be hidden.\n */\nexport function getSearchableOmnisearchTypes(schema: Schema): ObjectSchemaType[] {\n  return getSearchableTypes(schema).filter(\n    (type) => !(type.__experimental_omnisearch_visibility === false)\n  )\n}\n\nexport function sortTypes(a: SearchableType, b: SearchableType): number {\n  return (a.title ?? a.name).localeCompare(b.title ?? b.name)\n}\n\nfunction inTypeFilter(type: SchemaType, typeFilter: string): boolean {\n  return !typeFilter || (type.title ?? type.name).toLowerCase().includes(typeFilter?.toLowerCase())\n}\n","import type {Schema} from '@sanity/types'\nimport isEqual from 'lodash/isEqual'\nimport {useCallback, useMemo, useState} from 'react'\nimport {useObservableCallback} from 'react-rx'\nimport {concat, Observable, of, timer} from 'rxjs'\nimport {\n  catchError,\n  debounce,\n  distinctUntilChanged,\n  filter,\n  map,\n  scan,\n  switchMap,\n  tap,\n} from 'rxjs/operators'\nimport {useClient} from '../../../../../hooks'\nimport {createWeightedSearch, SearchOptions, SearchTerms, WeightedHit} from '../../../../../search'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../../studioClient'\nimport type {SearchState} from '../types'\nimport {hasSearchableTerms} from '../utils/hasSearchableTerms'\nimport {getSearchableOmnisearchTypes} from '../utils/selectors'\n\ninterface SearchRequest {\n  debounceTime?: number\n  options?: SearchOptions\n  terms: SearchTerms\n}\n\nconst DEFAULT_DEBOUNCE_TIME = 300 // ms\n\nconst INITIAL_SEARCH_STATE: SearchState = {\n  error: null,\n  hits: [],\n  loading: false,\n  terms: {\n    query: '',\n    types: [],\n  },\n}\n\nfunction nonNullable<T>(v: T): v is NonNullable<T> {\n  return v !== null\n}\n\nfunction sanitizeRequest(request: SearchRequest) {\n  return {\n    ...request,\n    terms: {\n      ...request.terms,\n      query: request.terms.query.trim(),\n    },\n  }\n}\n\nexport function useSearch({\n  allowEmptyQueries,\n  initialState,\n  onComplete,\n  onError,\n  onStart,\n  schema,\n}: {\n  allowEmptyQueries?: boolean\n  initialState: SearchState\n  onComplete?: (hits: WeightedHit[]) => void\n  onError?: (error: Error) => void\n  onStart?: () => void\n  schema: Schema\n}): {\n  handleSearch: (request: SearchRequest) => void\n  handleClearSearch: () => void\n  searchState: SearchState\n} {\n  const [searchState, setSearchState] = useState(initialState)\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  const searchWeighted = useMemo(\n    () =>\n      createWeightedSearch(getSearchableOmnisearchTypes(schema), client, {\n        tag: 'search.global',\n        unique: true,\n      }),\n    [client, schema]\n  )\n\n  const handleQueryChange = useObservableCallback(\n    (inputValue$: Observable<SearchRequest | null>) => {\n      return inputValue$.pipe(\n        filter(nonNullable),\n        map(sanitizeRequest),\n        distinctUntilChanged(isEqual),\n        filter((request: SearchRequest) =>\n          hasSearchableTerms({allowEmptyQueries, terms: request.terms})\n        ),\n        debounce((request) => timer(request?.debounceTime || DEFAULT_DEBOUNCE_TIME)),\n        tap(onStart),\n        switchMap((request) =>\n          concat(\n            of({\n              ...INITIAL_SEARCH_STATE,\n              loading: true,\n              options: request.options,\n              terms: request.terms,\n            }),\n            (searchWeighted(request.terms, request.options) as Observable<WeightedHit[]>).pipe(\n              map((hits) => ({hits})),\n              tap(({hits}) => onComplete?.(hits)),\n              catchError((error) => {\n                onError?.(error)\n                return of({\n                  ...INITIAL_SEARCH_STATE,\n                  error,\n                  loading: false,\n                  options: request.options,\n                  terms: request.terms,\n                })\n              })\n            ),\n            of({loading: false})\n          )\n        ),\n        scan((prevState, nextState): SearchState => {\n          return {...prevState, ...nextState}\n        }, INITIAL_SEARCH_STATE),\n        tap(setSearchState)\n      )\n    },\n    // @todo: add onComplete, onError and onStart to the deps list when it's verified that it's safe to do so\n    [allowEmptyQueries, searchWeighted]\n  )\n\n  const handleClearSearch = useCallback(() => {\n    setSearchState(INITIAL_SEARCH_STATE)\n    handleQueryChange({terms: INITIAL_SEARCH_STATE.terms}) // cancel current request\n  }, [handleQueryChange])\n\n  const handleSearch = useCallback(\n    (searchRequest: SearchRequest) => handleQueryChange(searchRequest),\n    [handleQueryChange]\n  )\n\n  return {handleSearch, handleClearSearch, searchState}\n}\n","import type {SearchableType} from '../../../../../search'\n\nconst DEFAULT_AVAILABLE_CHARS = 40 // excluding \"+x more\" suffix\n\nexport function documentTypesTruncated({\n  availableCharacters = DEFAULT_AVAILABLE_CHARS,\n  types,\n}: {\n  availableCharacters?: number\n  types: SearchableType[]\n}): string {\n  /**\n   * Get the total number of visible document types whose titles fit within `availableCharacters` count.\n   * The first document is always included, regardless of whether it fits within `availableCharacters` or not.\n   */\n  const visibleTypes = types.reduce<SearchableType[]>(\n    (function () {\n      let remaining = availableCharacters\n      return function (acc, val, index) {\n        const title = typeTitle(val)\n        remaining -= title.length\n\n        // Always include the first type, regardless of title length\n        if (index === 0) {\n          acc.push(val)\n        } else if (availableCharacters > title.length && remaining > title.length) {\n          acc.push(val)\n        }\n        return acc\n      }\n    })(),\n    []\n  )\n\n  const remainingCount = types.length - visibleTypes.length\n\n  if (!types.length) {\n    return 'All types'\n  }\n\n  return [\n    `${visibleTypes.map(typeTitle).join(', ')}`,\n    ...(remainingCount ? [`+${remainingCount} more`] : []),\n  ].join(' ')\n}\n\nfunction typeTitle(schemaType: SearchableType) {\n  return schemaType.title ?? schemaType.name\n}\n","import type {ReferenceValue} from '@sanity/types'\nimport {Autocomplete, Box, Flex, Popover, Text} from '@sanity/ui'\nimport React, {forwardRef, ReactElement, useCallback, useId, useMemo, useRef, useState} from 'react'\nimport styled from 'styled-components'\nimport {useSchema} from '../../../../../../../../../hooks'\nimport type {SearchableType, WeightedHit} from '../../../../../../../../../search'\nimport {getPublishedId} from '../../../../../../../../../util'\nimport {POPOVER_RADIUS} from '../../../../../constants'\nimport {useSearchState} from '../../../../../contexts/search/useSearchState'\nimport {useSearch} from '../../../../../hooks/useSearch'\nimport {documentTypesTruncated} from '../../../../../utils/documentTypesTruncated'\nimport {SearchResultItem} from '../../../../searchResults/item/SearchResultItem'\n\ninterface SearchHit {\n  hit: WeightedHit\n  value: string\n}\n\ninterface PopoverContentProps {\n  content: ReactElement | null\n  hidden: boolean\n  onMouseEnter: () => void\n  onMouseLeave: () => void\n}\n\ninterface ReferenceAutocompleteProps {\n  onSelect?: (reference: ReferenceValue | null) => void\n  types?: SearchableType[]\n  value?: ReferenceValue | null\n}\n\nconst NO_FILTER = () => true\n\nconst StyledText = styled(Text)`\n  word-break: break-word;\n`\n\nexport const ReferenceAutocomplete = forwardRef(function ReferenceAutocomplete(\n  {onSelect, types = [], value}: ReferenceAutocompleteProps,\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const autocompletePopoverReferenceElementRef = useRef<HTMLDivElement | null>(null)\n\n  const schema = useSchema()\n\n  const {\n    state: {fullscreen},\n  } = useSearchState()\n\n  const autocompleteId = useId()\n\n  const [hits, setHits] = useState<SearchHit[]>([])\n  const {handleSearch, searchState} = useSearch({\n    allowEmptyQueries: true,\n    initialState: {\n      hits: [],\n      loading: false,\n      error: null,\n      terms: {query: '', types},\n    },\n    onComplete: (weightedHits) => {\n      setHits(\n        weightedHits.map((weightedHit) => ({\n          hit: weightedHit,\n          value: weightedHit.hit._id,\n        }))\n      )\n    },\n    schema,\n  })\n\n  /**\n   * Trigger non-debounced search query when autocomplete is manually opened\n   */\n  const handleAutocompleteOpenButtonClick = useCallback(() => {\n    handleSearch({\n      debounceTime: 0,\n      options: {limit: 100},\n      terms: {query: '', types},\n    })\n  }, [handleSearch, types])\n\n  /**\n   * Trigger debounced search queries on text input.\n   *\n   * When search query has been cleared (either via manual input or by closing autocomplete),\n   * trigger an non-debounecd 'empty' search to clear search state terms and reset hits.\n   */\n  const handleQueryChange = useCallback(\n    (query: string | null) => {\n      if (query) {\n        handleSearch({\n          options: {limit: 100},\n          terms: {query: query || '', types},\n        })\n      } else {\n        handleSearch({\n          debounceTime: 0,\n          options: {limit: 0},\n          terms: {query: '', types},\n        })\n      }\n    },\n    [handleSearch, types]\n  )\n\n  const handleSelect = useCallback(\n    (val: string) => {\n      const hit = hits.find((h) => h.value === val)?.hit.hit\n      if (hit) {\n        onSelect?.({\n          _ref: getPublishedId(hit._id),\n          _type: hit._type,\n        })\n      }\n    },\n    [hits, onSelect]\n  )\n  const placeholderText = useMemo(() => {\n    const documentTypes = documentTypesTruncated({types})\n    if (types.length > 0) {\n      return `Search for ${documentTypes}`\n    }\n    return `Search all documents`\n  }, [types])\n\n  const renderOption = useCallback((option: any) => {\n    const documentType = option.hit.hit._type\n    return (\n      <SearchResultItem\n        compact\n        disableIntentLink\n        documentId={option.value}\n        documentType={documentType}\n      />\n    )\n  }, [])\n\n  const renderPopover = useCallback(\n    (props: PopoverContentProps, contentRef: React.ForwardedRef<HTMLDivElement>) => {\n      const {content, hidden, onMouseEnter, onMouseLeave} = props\n      const hasResults = hits && hits.length > 0\n      return (\n        <Popover\n          arrow={false}\n          constrainSize\n          content={\n            <div ref={contentRef}>\n              {hasResults\n                ? content\n                : searchState.terms.query && (\n                    <Box padding={4}>\n                      <Flex align=\"center\" height=\"fill\" justify=\"center\">\n                        <StyledText align=\"center\" muted>\n                          No results for <strong>“{searchState.terms.query}”</strong>\n                        </StyledText>\n                      </Flex>\n                    </Box>\n                  )}\n            </div>\n          }\n          matchReferenceWidth\n          onMouseEnter={onMouseEnter}\n          onMouseLeave={onMouseLeave}\n          open={!searchState.loading && !hidden}\n          overflow=\"auto\"\n          placement=\"bottom-start\"\n          radius={POPOVER_RADIUS}\n          referenceElement={autocompletePopoverReferenceElementRef.current}\n        />\n      )\n    },\n    [hits, searchState.loading, searchState.terms.query]\n  )\n\n  return (\n    <div ref={autocompletePopoverReferenceElementRef}>\n      <Autocomplete\n        aria-label={placeholderText}\n        filterOption={NO_FILTER}\n        fontSize={fullscreen ? 2 : 1}\n        id={autocompleteId}\n        loading={searchState.loading}\n        openButton={{onClick: handleAutocompleteOpenButtonClick}}\n        options={hits}\n        onQueryChange={handleQueryChange}\n        onSelect={handleSelect}\n        placeholder={placeholderText}\n        radius={2}\n        ref={ref}\n        renderOption={renderOption}\n        renderPopover={renderPopover}\n        value={value?._ref}\n      />\n    </div>\n  )\n})\n","import {isArraySchemaType, isReferenceSchemaType, ReferenceValue} from '@sanity/types'\nimport {Box, Button, Card, Stack} from '@sanity/ui'\nimport React, {useCallback, useMemo} from 'react'\nimport {useSchema} from '../../../../../../../../../hooks'\nimport {SearchableType} from '../../../../../../../../../search'\nimport {useSearchState} from '../../../../../contexts/search/useSearchState'\nimport {OperatorInputComponentProps} from '../../../../../definitions/operators/operatorTypes'\nimport {getSchemaField} from '../../../../../utils/getSchemaField'\nimport {SearchResultItem} from '../../../../searchResults/item/SearchResultItem'\nimport {ReferenceAutocomplete} from './ReferenceAutocomplete'\n\nexport function SearchFilterReferenceInput({\n  fieldDefinition,\n  onChange,\n  value,\n}: OperatorInputComponentProps<ReferenceValue>) {\n  const {\n    onClose,\n    state: {documentTypesNarrowed, fullscreen},\n  } = useSearchState()\n  const schema = useSchema()\n\n  const handleChange = useCallback(\n    (referenceValue: ReferenceValue | null) => onChange(referenceValue),\n    [onChange]\n  )\n\n  // Extract all searchable types\n  const searchableTypes = useMemo(() => {\n    if (!fieldDefinition) {\n      return []\n    }\n\n    return fieldDefinition.documentTypes\n      .filter((d) => documentTypesNarrowed.includes(d))\n      .flatMap((type) => {\n        const schemaType = schema.get(type)\n        if (schemaType) {\n          const field = getSchemaField(schemaType, fieldDefinition.fieldPath)\n          if (isArraySchemaType(field?.type)) {\n            return field?.type.of.filter(isReferenceSchemaType).flatMap((i) => i.to)\n          }\n          if (isReferenceSchemaType(field?.type)) {\n            return field?.type.to\n          }\n        }\n        return []\n      })\n      .reduce<SearchableType[]>((acc, val) => {\n        if (acc.findIndex((v) => v.name === val?.name) < 0) {\n          acc.push(val as SearchableType)\n        }\n        return acc\n      }, [])\n  }, [documentTypesNarrowed, fieldDefinition, schema])\n\n  const handleClear = useCallback(() => handleChange(null), [handleChange])\n\n  const handleClick = useCallback(() => {\n    onClose?.()\n  }, [onClose])\n\n  return (\n    <Box style={{width: 'min(calc(100vw - 40px), 420px)'}}>\n      {value?._ref && value?._type ? (\n        <Stack space={3}>\n          <Card padding={1} radius={1} shadow={1}>\n            <SearchResultItem\n              compact\n              documentId={value._ref}\n              documentType={value._type}\n              onClick={handleClick}\n            />\n          </Card>\n          <Button\n            fontSize={fullscreen ? 2 : 1}\n            mode=\"ghost\"\n            onClick={handleClear}\n            text=\"Clear\"\n            tone=\"critical\"\n          />\n        </Stack>\n      ) : (\n        <ReferenceAutocomplete onSelect={handleChange} types={searchableTypes} value={value} />\n      )}\n    </Box>\n  )\n}\n","import {SelectIcon} from '@sanity/icons'\nimport {isTitledListValue, StringOptions, TitledListValue} from '@sanity/types'\nimport {Box, Button, Code, Flex, Menu, MenuButton, MenuItem, Stack, Text} from '@sanity/ui'\nimport {capitalize, uniq} from 'lodash'\nimport React, {useCallback, useId, useMemo} from 'react'\nimport {useSchema} from '../../../../../../../../../hooks'\nimport {isNonNullable} from '../../../../../../../../../util'\nimport {useSearchState} from '../../../../../contexts/search/useSearchState'\nimport {OperatorInputComponentProps} from '../../../../../definitions/operators/operatorTypes'\nimport {getSchemaField} from '../../../../../utils/getSchemaField'\n\ninterface TitledListValueGroup extends Omit<TitledListValue<number | string>, 'title'> {\n  title: (number | string)[]\n}\n\nfunction CustomMenuItem({\n  onClick,\n  selected,\n  title,\n  value,\n}: {\n  onClick: (value: number | string) => void\n  selected: boolean\n  title: string\n  value: number | string\n}) {\n  const handleClick = useCallback(() => onClick(value), [onClick, value])\n\n  return (\n    <MenuItem onClick={handleClick} padding={3} pressed={selected} tone=\"default\">\n      <Flex align=\"center\" justify=\"space-between\" gap={3}>\n        <Stack paddingRight={2} space={2}>\n          <Text size={1} weight=\"regular\">\n            {title}\n          </Text>\n          {value && (\n            <Code muted size={0}>\n              {value}\n            </Code>\n          )}\n        </Stack>\n      </Flex>\n    </MenuItem>\n  )\n}\n\nexport function SearchFilterStringListInput({\n  fieldDefinition,\n  onChange,\n  value,\n}: OperatorInputComponentProps<number | string>) {\n  const menuButtonId = useId()\n\n  const {\n    state: {documentTypesNarrowed},\n  } = useSearchState()\n  const schema = useSchema()\n\n  // Build list items\n  const items = useMemo(() => {\n    if (!fieldDefinition) {\n      return []\n    }\n\n    const options = fieldDefinition.documentTypes\n      .filter((d) => documentTypesNarrowed.includes(d))\n      .map((type) => {\n        const schemaType = schema.get(type)\n        if (schemaType) {\n          const field = getSchemaField(schemaType, fieldDefinition.fieldPath)\n          return field?.type.options as StringOptions\n        }\n        return null\n      })\n      .filter(isNonNullable)\n\n    const selectOptions = options\n      .map((o) => o.list)\n      .flatMap((list) => list?.map((l) => toSelectItem(l)))\n      .filter(isNonNullable)\n\n    return selectOptions.reduce<TitledListValueGroup[]>((acc, val) => {\n      const prevIndex = acc.findIndex((v) => v.value === val?.value)\n      if (prevIndex > -1) {\n        const prevValue = acc[prevIndex]\n        acc[prevIndex] = {\n          ...acc[prevIndex],\n          title: uniq([...prevValue.title, val.title]).sort(),\n        }\n      } else {\n        acc.push({\n          ...val,\n          title: [val.title],\n        })\n      }\n      return acc\n    }, [])\n  }, [documentTypesNarrowed, fieldDefinition, schema])\n\n  const handleClick = useCallback(\n    (v: number | string) => {\n      onChange(v)\n    },\n    [onChange]\n  )\n\n  return (\n    <MenuButton\n      button={\n        <Button mode=\"ghost\" padding={3}>\n          <Flex align=\"center\" gap={2} justify=\"space-between\">\n            <Text size={1} weight=\"regular\">\n              {value ? value : 'Select...'}\n            </Text>\n            <Box marginLeft={1}>\n              <Text size={1}>\n                <SelectIcon />\n              </Text>\n            </Box>\n          </Flex>\n        </Button>\n      }\n      id={menuButtonId || ''}\n      menu={\n        <Menu>\n          {items.map((item, index) => (\n            <CustomMenuItem\n              // eslint-disable-next-line react/no-array-index-key\n              key={index}\n              onClick={handleClick}\n              selected={item.value === value}\n              title={item.title.join(', ')}\n              value={item.value || ''}\n            />\n          ))}\n        </Menu>\n      }\n      placement=\"bottom-start\"\n      popover={{\n        constrainSize: true,\n        portal: false,\n        radius: 2,\n      }}\n    />\n  )\n}\n\nfunction toSelectItem(\n  option: TitledListValue<string | number> | string | number\n): TitledListValue<string | number> {\n  return isTitledListValue(option) ? option : {title: capitalize(`${option}`), value: option}\n}\n","import React from 'react'\n\nexport const GteIcon = () => (\n  <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 25 25\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M7.04 19V17.512H17.36V19H7.04ZM7.04 15.328V13.624L12.08 11.872L15.32 10.816V10.72L12.08 9.664L7.04 7.912V6.208L17.36 9.88V11.656L7.04 15.328Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","import React from 'react'\n\nexport const GtIcon = () => (\n  <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 25 25\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M7.568 18.848V16.952L14.792 12.08V11.984L7.568 7.112V5.216L16.52 11.288V12.776L7.568 18.848Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","import React from 'react'\n\nexport const LteIcon = () => (\n  <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 25 25\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M7.04 19V17.512H17.36V19H7.04ZM17.36 15.328L7.04 11.656V9.88L17.36 6.208V7.912L12.32 9.664L9.08 10.72V10.816L12.32 11.872L17.36 13.624V15.328Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","import React from 'react'\n\nexport const LtIcon = () => (\n  <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 25 25\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M16.952 19.632L8 13.56V12.072L16.952 6V7.896L9.728 12.768V12.864L16.952 17.736V19.632Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","import {ComponentType} from 'react'\nimport {SearchFieldDefinition} from '../../types'\n\n/**\n * @alpha\n */\nexport interface SearchOperatorBase {\n  buttonLabel?: string\n  label: string\n  icon?: ComponentType\n  type: string\n}\n\n/**\n * @alpha\n */\nexport type SearchOperatorInput<TValue> = ComponentType<OperatorInputComponentProps<TValue>>\n\n/**\n * @alpha\n */\nexport type SearchOperatorButtonValue<TValue> = ComponentType<\n  OperatorButtonValueComponentProps<TValue>\n>\n\n/**\n * @alpha\n */\nexport interface OperatorButtonValueComponentProps<T> {\n  value: T\n}\n\n/**\n * @alpha\n */\nexport interface OperatorInputComponentProps<T> {\n  fieldDefinition?: SearchFieldDefinition\n  onChange: (value: T | null) => void\n  value: T | null\n}\n\n/**\n * @alpha\n */\nexport type SearchOperatorParams<TValue> = {fieldPath?: string; value?: TValue}\n\n/**\n * @alpha\n */\nexport type ValuelessSearchOperatorParams = {fieldPath?: string}\n\n/**\n * @alpha\n */\nexport interface SearchOperatorBuilder<TType extends string, TValue> extends SearchOperatorBase {\n  buttonValueComponent: SearchOperatorButtonValue<TValue>\n  groqFilter: (params: SearchOperatorParams<TValue>) => string | null\n  initialValue: TValue | null\n  inputComponent: SearchOperatorInput<TValue>\n  type: TType\n}\n\n/**\n * @alpha\n */\nexport interface ValuelessSearchOperatorBuilder<TType extends string> extends SearchOperatorBase {\n  buttonValueComponent?: never\n  groqFilter: (params: ValuelessSearchOperatorParams) => string | null\n  initialValue?: never\n  inputComponent?: never\n  type: TType\n}\n\n/**\n * @alpha\n */\nexport function defineSearchOperator<\n  TType extends string,\n  TValue extends unknown | never,\n  TOperatorSnippet extends\n    | {type: TType; inputComponent?: never}\n    | {type: TType; inputComponent: SearchOperatorInput<TValue>}\n>(\n  definition: (TOperatorSnippet extends {\n    type: TType\n    inputComponent: SearchOperatorInput<TValue>\n  }\n    ? SearchOperatorBuilder<TType, TValue>\n    : ValuelessSearchOperatorBuilder<TType>) &\n    TOperatorSnippet\n): typeof definition {\n  return definition\n}\n","export function toJSON(val: unknown): string {\n  return JSON.stringify(val)\n}\n","import {type ReferenceValue} from '@sanity/types'\nimport {\n  SearchButtonValueNumberCount,\n  SearchButtonValueNumberCountRange,\n  SearchButtonValueReference,\n  SearchButtonValueString,\n} from '../../components/filters/common/ButtonValue'\nimport {SearchFilterNumberInput} from '../../components/filters/filter/inputs/number/Number'\nimport {SearchFilterNumberRangeInput} from '../../components/filters/filter/inputs/number/NumberRange'\nimport {SearchFilterReferenceInput} from '../../components/filters/filter/inputs/reference/Reference'\nimport {SearchFilterStringListInput} from '../../components/filters/filter/inputs/string/StringList'\nimport {GteIcon} from '../../components/filters/icons/GteIcon'\nimport {GtIcon} from '../../components/filters/icons/GtIcon'\nimport {LteIcon} from '../../components/filters/icons/LteIcon'\nimport {LtIcon} from '../../components/filters/icons/LtIcon'\nimport {OperatorNumberRangeValue} from './common'\nimport {defineSearchOperator, SearchOperatorButtonValue, SearchOperatorInput} from './operatorTypes'\nimport {toJSON} from './operatorUtils'\n\n// @todo: don't manually cast `buttonValueComponent` and `inputComponent` once\n// we understand why `yarn etl` fails with 'Unable to follow symbol' errors\nexport const arrayOperators = {\n  arrayCountEqual: defineSearchOperator({\n    buttonLabel: 'has',\n    buttonValueComponent: SearchButtonValueNumberCount as SearchOperatorButtonValue<number>,\n    groqFilter: ({fieldPath, value}) =>\n      Number.isFinite(value) && fieldPath ? `count(${fieldPath}) == ${toJSON(value)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterNumberInput as SearchOperatorInput<number>,\n    label: 'quantity is',\n    type: 'arrayCountEqual',\n  }),\n  arrayCountGt: defineSearchOperator({\n    buttonLabel: 'has >',\n    buttonValueComponent: SearchButtonValueNumberCount as SearchOperatorButtonValue<number>,\n    groqFilter: ({fieldPath, value}) =>\n      Number.isFinite(value) && fieldPath ? `count(${fieldPath}) > ${toJSON(value)}` : null,\n    icon: GtIcon,\n    initialValue: null,\n    inputComponent: SearchFilterNumberInput as SearchOperatorInput<number>,\n    label: 'quantity greater than',\n    type: 'arrayCountGt',\n  }),\n  arrayCountGte: defineSearchOperator({\n    buttonLabel: 'has ≥',\n    buttonValueComponent: SearchButtonValueNumberCount as SearchOperatorButtonValue<number>,\n    groqFilter: ({fieldPath, value}) =>\n      Number.isFinite(value) && fieldPath ? `count(${fieldPath}) >= ${toJSON(value)}` : null,\n    icon: GteIcon,\n    initialValue: null,\n    inputComponent: SearchFilterNumberInput as SearchOperatorInput<number>,\n    label: 'quantity greater than or equal to',\n    type: 'arrayCountGte',\n  }),\n  arrayCountLt: defineSearchOperator({\n    buttonLabel: 'has <',\n    buttonValueComponent: SearchButtonValueNumberCount as SearchOperatorButtonValue<number>,\n    groqFilter: ({fieldPath, value}) =>\n      Number.isFinite(value) && fieldPath ? `count(${fieldPath}) < ${toJSON(value)}` : null,\n    icon: LtIcon,\n    initialValue: null,\n    inputComponent: SearchFilterNumberInput as SearchOperatorInput<number>,\n    label: 'quantity less than',\n    type: 'arrayCountLt',\n  }),\n  arrayCountLte: defineSearchOperator({\n    buttonLabel: 'has ≤',\n    buttonValueComponent: SearchButtonValueNumberCount as SearchOperatorButtonValue<number>,\n    groqFilter: ({fieldPath, value}) =>\n      Number.isFinite(value) && fieldPath ? `count(${fieldPath}) <= ${toJSON(value)}` : null,\n    icon: LteIcon,\n    initialValue: null,\n    inputComponent: SearchFilterNumberInput as SearchOperatorInput<number>,\n    label: 'quantity less than or equal to',\n    type: 'arrayCountLte',\n  }),\n  arrayCountNotEqual: defineSearchOperator({\n    buttonLabel: 'does not have',\n    buttonValueComponent: SearchButtonValueNumberCount as SearchOperatorButtonValue<number>,\n    groqFilter: ({fieldPath, value}) =>\n      Number.isFinite(value) && fieldPath ? `count(${fieldPath}) != ${toJSON(value)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterNumberInput as SearchOperatorInput<number>,\n    label: 'quantity is not',\n    type: 'arrayCountNotEqual',\n  }),\n  arrayCountRange: defineSearchOperator({\n    buttonLabel: 'has between',\n    buttonValueComponent:\n      SearchButtonValueNumberCountRange as SearchOperatorButtonValue<OperatorNumberRangeValue>,\n    groqFilter: ({fieldPath, value}) =>\n      Number.isFinite(value?.max) && Number.isFinite(value?.min) && fieldPath\n        ? `count(${fieldPath}) > ${toJSON(value?.min)} && count(${fieldPath}) < ${toJSON(\n            value?.max\n          )}`\n        : '',\n    initialValue: null,\n    inputComponent: SearchFilterNumberRangeInput as SearchOperatorInput<OperatorNumberRangeValue>,\n    label: 'quantity is between',\n    type: 'arrayCountRange',\n  }),\n  arrayListIncludes: defineSearchOperator({\n    buttonLabel: 'includes',\n    buttonValueComponent: SearchButtonValueString as SearchOperatorButtonValue<string | number>,\n    groqFilter: ({fieldPath, value}) =>\n      value && fieldPath ? `${toJSON(value)} in ${fieldPath}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterStringListInput as SearchOperatorInput<string | number>,\n    label: 'includes',\n    type: 'arrayListIncludes',\n  }),\n  arrayListNotIncludes: defineSearchOperator({\n    buttonLabel: 'does not include',\n    buttonValueComponent: SearchButtonValueString as SearchOperatorButtonValue<string | number>,\n    groqFilter: ({fieldPath, value}) =>\n      value && fieldPath ? `!(${toJSON(value)} in ${fieldPath})` : null,\n    initialValue: null,\n    inputComponent: SearchFilterStringListInput as SearchOperatorInput<string | number>,\n    label: 'does not include',\n    type: 'arrayListNotIncludes',\n  }),\n  arrayReferenceIncludes: defineSearchOperator({\n    buttonLabel: 'includes',\n    buttonValueComponent: SearchButtonValueReference as SearchOperatorButtonValue<ReferenceValue>,\n    groqFilter: ({fieldPath, value}) =>\n      value?._ref && fieldPath ? `${toJSON(value._ref)} in ${fieldPath}[]._ref` : null,\n    initialValue: null,\n    inputComponent: SearchFilterReferenceInput as SearchOperatorInput<ReferenceValue>,\n    label: 'includes',\n    type: 'arrayReferenceIncludes',\n  }),\n  arrayReferenceNotIncludes: defineSearchOperator({\n    buttonLabel: 'does not include',\n    buttonValueComponent: SearchButtonValueReference as SearchOperatorButtonValue<ReferenceValue>,\n    groqFilter: ({fieldPath, value}) =>\n      value?._ref && fieldPath ? `!(${toJSON(value._ref)} in ${fieldPath}[]._ref)` : null,\n    initialValue: null,\n    inputComponent: SearchFilterReferenceInput as SearchOperatorInput<ReferenceValue>,\n    label: 'does not include',\n    type: 'arrayReferenceNotIncludes',\n  }),\n}\n","import React, {createContext, useContext} from 'react'\nimport {Workspace} from '../config'\n\n/** @internal */\nexport interface WorkspaceProviderProps {\n  workspace: Workspace\n  children?: React.ReactChild\n}\nconst WorkspaceContext = createContext<Workspace | null>(null)\n\n/** @internal */\nexport function WorkspaceProvider({children, workspace}: WorkspaceProviderProps) {\n  return <WorkspaceContext.Provider value={workspace}>{children}</WorkspaceContext.Provider>\n}\n\n/** @beta */\nexport function useWorkspace(): Workspace {\n  const workspace = useContext(WorkspaceContext)\n\n  if (!workspace) throw new Error('Workspace: missing context value')\n\n  return workspace\n}\n","import React, {createContext, useContext} from 'react'\nimport {Source} from '../config'\nimport {useWorkspace} from './workspace'\n\n/** @internal */\nexport type SourceProviderProps =\n  | {source: Source; children?: React.ReactNode}\n  | {name: string; children?: React.ReactNode}\n\nconst SourceContext = createContext<Source | null>(null)\n\n/** @internal */\nexport function SourceProvider({children, ...props}: SourceProviderProps) {\n  const parentSource = useContext(SourceContext)\n  const {unstable_sources: sources} = useWorkspace()\n\n  if ('source' in props) {\n    const {source} = props\n    return <SourceContext.Provider value={source}>{children}</SourceContext.Provider>\n  }\n\n  if ('name' in props) {\n    const {name} = props\n    const source = sources.find((s) => s.name === name)\n    if (!source) {\n      throw new Error(`Could not find source with name \\`${name}\\` in current workspace`)\n    }\n    if (parentSource === source) return <>{children}</>\n    return <SourceContext.Provider value={source}>{children}</SourceContext.Provider>\n  }\n\n  throw new Error(\n    'Invalid props passed into SourceProvider. A `name` or a `source` object is required.'\n  )\n}\n\n/**\n * @internal\n * @deprecated INTERNAL USE ONLY\n */\nexport function useSource(): Source {\n  const source = useContext(SourceContext)\n  if (!source) throw new Error('Could not find `source` context')\n  return source\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Flex, ResponsivePaddingProps, Stack} from '@sanity/ui'\nimport React from 'react'\nimport {TextWithTone} from '../../../../../../../../../components'\n\nexport function AssetSourceError(props: ResponsivePaddingProps) {\n  return (\n    <Box {...props}>\n      <Flex align=\"flex-start\" gap={3}>\n        <TextWithTone tone=\"caution\">\n          <WarningOutlineIcon />\n        </TextWithTone>\n        <Stack space={4}>\n          <TextWithTone size={1} tone=\"caution\" weight=\"semibold\">\n            No valid asset sources found.\n          </TextWithTone>\n          <TextWithTone size={1} tone=\"caution\">\n            Currently, only the default asset source is supported.\n          </TextWithTone>\n          <TextWithTone size={1} tone=\"caution\">\n            Please ensure it's enabled in your studio configuration file.\n          </TextWithTone>\n        </Stack>\n      </Flex>\n    </Box>\n  )\n}\n","import {BinaryDocumentIcon} from '@sanity/icons'\nimport type {FileAsset, ReferenceValue} from '@sanity/types'\nimport {Card, Flex, LabelSkeleton, Stack, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {formatBytes} from '../../../../../../../../../../form/inputs/common/helper'\nimport {observeFileAsset} from '../../../../../../../../../../form/studio/inputs/client-adapters/assets'\nimport {WithReferencedAsset} from '../../../../../../../../../../form/utils/WithReferencedAsset'\nimport {useDocumentPreviewStore} from '../../../../../../../../../../store'\n\ninterface FileReferencePreviewProps {\n  reference: ReferenceValue\n}\n\nexport function FileReferencePreview({reference}: FileReferencePreviewProps) {\n  const documentPreviewStore = useDocumentPreviewStore()\n  const observeAsset = useCallback(\n    (id: string) => observeFileAsset(documentPreviewStore, id),\n    [documentPreviewStore]\n  )\n  return (\n    <WithReferencedAsset\n      observeAsset={observeAsset}\n      reference={reference}\n      waitPlaceholder={<FileSkeleton />}\n    >\n      {(asset) => <FilePreview asset={asset} />}\n    </WithReferencedAsset>\n  )\n}\n\nfunction FilePreview({asset}: {asset: FileAsset}) {\n  return (\n    <Card padding={2} shadow={1}>\n      <Flex align=\"center\" justify=\"space-between\" wrap=\"nowrap\">\n        <Card padding={3} radius={1} shadow={1} tone=\"transparent\">\n          <Text>\n            <BinaryDocumentIcon />\n          </Text>\n        </Card>\n        <Stack flex={1} space={2} marginLeft={3}>\n          <Text size={2} textOverflow=\"ellipsis\" muted>\n            {asset?.originalFilename || asset._id}\n          </Text>\n          <Text size={1} muted>\n            {formatBytes(asset.size)}\n          </Text>\n        </Stack>\n      </Flex>\n    </Card>\n  )\n}\n\nfunction FileSkeleton() {\n  return (\n    <Card padding={2} shadow={1}>\n      <Flex align=\"center\" justify=\"flex-start\">\n        <Card padding={3} radius={1} shadow={1} tone=\"transparent\">\n          <Text>\n            <BinaryDocumentIcon />\n          </Text>\n        </Card>\n        <Stack flex={1} space={2} marginLeft={3}>\n          <LabelSkeleton animated style={{width: '100%'}} radius={1} />\n          <LabelSkeleton animated style={{width: '100%'}} radius={1} />\n        </Stack>\n      </Flex>\n    </Card>\n  )\n}\n","import type {ImageAsset, ReferenceValue} from '@sanity/types'\nimport {Card, Flex, Spinner} from '@sanity/ui'\nimport React, {useCallback, useState} from 'react'\nimport styled from 'styled-components'\nimport {observeImageAsset} from '../../../../../../../../../../form/studio/inputs/client-adapters/assets'\nimport {WithReferencedAsset} from '../../../../../../../../../../form/utils/WithReferencedAsset'\nimport {useDocumentPreviewStore} from '../../../../../../../../../../store'\n\ninterface ImageReferencePreviewProps {\n  reference: ReferenceValue\n}\n\nconst Container = styled(Card)`\n  position: relative;\n  padding-bottom: 100%;\n`\n\nconst Image = styled.img`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: block;\n  object-fit: contain;\n`\n\nconst SpinnerFlex = styled(Flex)`\n  height: 100%;\n  position: absolute;\n  width: 100%;\n`\n\nexport function ImageReferencePreview({reference}: ImageReferencePreviewProps) {\n  const documentPreviewStore = useDocumentPreviewStore()\n  const observeAsset = useCallback(\n    (id: string) => observeImageAsset(documentPreviewStore, id),\n    [documentPreviewStore]\n  )\n  return (\n    <WithReferencedAsset observeAsset={observeAsset} reference={reference}>\n      {(asset) => <ImagePreview asset={asset} />}\n    </WithReferencedAsset>\n  )\n}\n\nfunction ImagePreview({asset}: {asset: ImageAsset}) {\n  const [loaded, setLoaded] = useState(false)\n  const imageUrl = `${asset.url}?h=800&fit=max`\n  const handleLoad = useCallback(() => setLoaded(true), [])\n\n  return (\n    <Container __unstable_checkered border>\n      {!loaded && (\n        <SpinnerFlex align=\"center\" justify=\"center\">\n          <Spinner />\n        </SpinnerFlex>\n      )}\n      <Image onLoad={handleLoad} src={imageUrl} />\n    </Container>\n  )\n}\n","import type {ReferenceValue} from '@sanity/types'\nimport React from 'react'\nimport {FileReferencePreview} from './FileReferencePreview'\nimport {ImageReferencePreview} from './ImageReferencePreview'\n\ninterface AssetPreviewProps {\n  reference: ReferenceValue\n}\nexport function AssetPreview({reference}: AssetPreviewProps) {\n  if (!reference) {\n    return null\n  }\n  if (reference._type.startsWith('sanity.fileAsset')) {\n    return <FileReferencePreview reference={reference} />\n  }\n  if (reference._type.startsWith('sanity.imageAsset')) {\n    return <ImageReferencePreview reference={reference} />\n  }\n  return null\n}\n","import {ChevronDownIcon, ImageIcon, SearchIcon, UndoIcon} from '@sanity/icons'\nimport type {AssetFromSource, AssetSource, ReferenceValue} from '@sanity/types'\nimport {Box, Button, Flex, Menu, MenuButton, MenuItem, Portal, Stack} from '@sanity/ui'\nimport React, {useCallback, useEffect, useId, useMemo, useState} from 'react'\nimport styled from 'styled-components'\nimport {Source} from '../../../../../../../../../config'\nimport {FileSource, ImageSource} from '../../../../../../../../../form/studio/assetSource'\nimport {useClient} from '../../../../../../../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../../../../../../studioClient'\nimport {useSource} from '../../../../../../../../source'\nimport {useSearchState} from '../../../../../contexts/search/useSearchState'\nimport type {OperatorInputComponentProps} from '../../../../../definitions/operators/operatorTypes'\nimport {AssetSourceError} from './AssetSourceError'\nimport {AssetPreview} from './preview/AssetPreview'\n\ntype AssetType = keyof Pick<Source['form'], 'file' | 'image'>\n\nconst ASSET_TYPE: Record<AssetType, string> = {\n  file: 'sanity.fileAsset',\n  image: 'sanity.imageAsset',\n}\n\nconst ContainerBox = styled(Box)`\n  width: min(calc(100vw - 40px), 320px);\n`\n\nexport function SearchFilterAssetInput(type?: AssetType) {\n  return function FieldInputAssetWithType({\n    onChange,\n    value,\n  }: OperatorInputComponentProps<ReferenceValue>) {\n    const [selectedAssetSource, setSelectedAssetSource] = useState<AssetSource | null>(null)\n    const [selectedAssetFromSource, setSelectedAssetFromSource] = useState<AssetFromSource | null>(\n      null\n    )\n\n    const {\n      state: {fullscreen},\n    } = useSearchState()\n\n    const {file, image} = useSource().form\n\n    // Get available asset sources\n    // NOTE: currently only the default studio asset source is supported\n    const assetSources = useMemo(() => {\n      switch (type) {\n        case 'file':\n          return file.assetSources.filter((a) => a.name === FileSource.name)\n        case 'image':\n          return image.assetSources.filter((a) => a.name === ImageSource.name)\n        default:\n          throw Error('Unknown asset source found')\n      }\n    }, [file.assetSources, image.assetSources])\n\n    const menuButtonId = useId()\n\n    const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n    const handleClear = useCallback(() => {\n      setSelectedAssetFromSource(null)\n      onChange(null)\n    }, [onChange])\n\n    const handleCloseAssetSource = useCallback(() => {\n      setSelectedAssetSource(null)\n    }, [])\n\n    const handleSelectAssetFromSource = useCallback(\n      (assetFromSource: AssetFromSource[]) => {\n        const firstAsset = assetFromSource[0]\n        setSelectedAssetFromSource(firstAsset)\n        handleCloseAssetSource()\n      },\n      [handleCloseAssetSource]\n    )\n\n    const handleSelectAssetSource = useCallback(\n      (source: AssetSource) => setSelectedAssetSource(source),\n      []\n    )\n\n    useEffect(() => {\n      // TODO: add custom resolver to handle other source types in future\n      if (\n        selectedAssetFromSource?.kind === 'assetDocumentId' &&\n        typeof selectedAssetFromSource?.value === 'string'\n      ) {\n        if (type) {\n          onChange({\n            _ref: selectedAssetFromSource.value,\n            _type: ASSET_TYPE[type],\n          })\n        }\n      }\n    }, [client, onChange, selectedAssetFromSource])\n\n    const AssetSourceComponent = selectedAssetSource?.component\n\n    const fontSize = fullscreen ? 2 : 1\n\n    const buttonText = value ? `Change ${type}` : `Select ${type}`\n\n    return (\n      <ContainerBox>\n        <Stack space={3}>\n          {/* Asset source component */}\n          {selectedAssetSource && AssetSourceComponent && (\n            <Portal>\n              <AssetSourceComponent\n                assetType={type}\n                dialogHeaderTitle={`Select ${type}`}\n                onClose={handleCloseAssetSource}\n                onSelect={handleSelectAssetFromSource}\n                selectedAssets={[]}\n                selectionType=\"single\"\n              />\n            </Portal>\n          )}\n\n          {/* Selected asset preview */}\n          {value && <AssetPreview reference={value} />}\n\n          <Flex gap={2}>\n            {/* No asset sources found */}\n            {assetSources.length === 0 && <AssetSourceError padding={2} />}\n\n            {/* Asset source select */}\n            {assetSources.length > 0 && (\n              <>\n                {assetSources.length > 1 ? (\n                  <MenuButton\n                    button={\n                      <Button\n                        fontSize={fontSize}\n                        icon={value ? UndoIcon : SearchIcon}\n                        iconRight={ChevronDownIcon}\n                        mode=\"ghost\"\n                        style={{flex: value ? 1 : 0}}\n                        text={buttonText}\n                      />\n                    }\n                    id={menuButtonId}\n                    menu={\n                      <Menu>\n                        {assetSources.map((source) => (\n                          <MenuItem\n                            fontSize={fontSize}\n                            icon={source.icon || ImageIcon}\n                            key={source.name}\n                            // eslint-disable-next-line react/jsx-no-bind\n                            onClick={() => handleSelectAssetSource(source)}\n                            text={source.title}\n                          />\n                        ))}\n                      </Menu>\n                    }\n                    popover={{\n                      constrainSize: true,\n                      portal: false,\n                      radius: 2,\n                    }}\n                  />\n                ) : (\n                  <Button\n                    fontSize={fontSize}\n                    icon={value ? UndoIcon : SearchIcon}\n                    mode=\"ghost\"\n                    // eslint-disable-next-line react/jsx-no-bind\n                    onClick={() => handleSelectAssetSource(assetSources[0])}\n                    style={{flex: value ? 1 : 0}}\n                    text={buttonText}\n                  />\n                )}\n              </>\n            )}\n\n            {/* Clear selected asset */}\n            {value && (\n              <Button\n                fontSize={fullscreen ? 2 : 1}\n                mode=\"ghost\"\n                onClick={handleClear}\n                style={{flex: 1}}\n                text=\"Clear\"\n                tone=\"critical\"\n              />\n            )}\n          </Flex>\n        </Stack>\n      </ContainerBox>\n    )\n  }\n}\n","import type {ReferenceValue} from '@sanity/types'\nimport {SearchButtonValueReference} from '../../components/filters/common/ButtonValue'\nimport {SearchFilterAssetInput} from '../../components/filters/filter/inputs/asset/Asset'\nimport {defineSearchOperator, SearchOperatorButtonValue} from './operatorTypes'\nimport {toJSON} from './operatorUtils'\n\n// @todo: don't manually cast `buttonValueComponent` and `inputComponent` once\n// we understand why `yarn etl` fails with 'Unable to follow symbol' errors\nexport const assetOperators = {\n  assetFileEqual: defineSearchOperator({\n    buttonLabel: 'is',\n    buttonValueComponent: SearchButtonValueReference as SearchOperatorButtonValue<ReferenceValue>,\n    groqFilter: ({fieldPath, value}) =>\n      value?._ref && fieldPath ? `${fieldPath}.asset._ref == ${toJSON(value._ref)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterAssetInput('file'),\n    label: 'is',\n    type: 'assetFileEqual',\n  }),\n  assetFileNotEqual: defineSearchOperator({\n    buttonLabel: 'is not',\n    buttonValueComponent: SearchButtonValueReference as SearchOperatorButtonValue<ReferenceValue>,\n    groqFilter: ({fieldPath, value}) =>\n      value?._ref && fieldPath ? `${fieldPath}.asset._ref != ${toJSON(value._ref)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterAssetInput('file'),\n    label: 'is not',\n    type: 'assetFileNotEqual',\n  }),\n  assetImageEqual: defineSearchOperator({\n    buttonLabel: 'is',\n    buttonValueComponent: SearchButtonValueReference as SearchOperatorButtonValue<ReferenceValue>,\n    groqFilter: ({fieldPath, value}) =>\n      value?._ref && fieldPath ? `${fieldPath}.asset._ref == ${toJSON(value._ref)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterAssetInput('image'),\n    label: 'is',\n    type: 'assetImageEqual',\n  }),\n  assetImageNotEqual: defineSearchOperator({\n    buttonLabel: 'is not',\n    buttonValueComponent: SearchButtonValueReference as SearchOperatorButtonValue<ReferenceValue>,\n    groqFilter: ({fieldPath, value}) =>\n      value?._ref && fieldPath ? `${fieldPath}.asset._ref != ${toJSON(value._ref)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterAssetInput('image'),\n    label: 'is not',\n    type: 'assetImageNotEqual',\n  }),\n}\n","import {Select} from '@sanity/ui'\nimport React, {ChangeEvent, useCallback} from 'react'\nimport {useSearchState} from '../../../../../contexts/search/useSearchState'\nimport {type OperatorInputComponentProps} from '../../../../../definitions/operators/operatorTypes'\n\nexport function SearchFilterBooleanInput({onChange, value}: OperatorInputComponentProps<boolean>) {\n  const {\n    state: {fullscreen},\n  } = useSearchState()\n\n  const handleChange = useCallback(\n    (event: ChangeEvent<HTMLSelectElement>) => {\n      onChange(event.currentTarget.value === 'true')\n    },\n    [onChange]\n  )\n\n  return (\n    <Select fontSize={fullscreen ? 2 : 1} onChange={handleChange} value={String(value ?? true)}>\n      <option value=\"true\">True</option>\n      <option value=\"false\">False</option>\n    </Select>\n  )\n}\n","import {SearchButtonValueBoolean} from '../../components/filters/common/ButtonValue'\nimport {SearchFilterBooleanInput} from '../../components/filters/filter/inputs/boolean/Boolean'\nimport {\n  defineSearchOperator,\n  SearchOperatorButtonValue,\n  SearchOperatorInput,\n  SearchOperatorParams,\n} from './operatorTypes'\nimport {toJSON} from './operatorUtils'\n\n// @todo: don't manually cast `buttonValueComponent` and `inputComponent` once\n// we understand why `yarn etl` fails with 'Unable to follow symbol' errors\nexport const booleanOperators = {\n  booleanEqual: defineSearchOperator({\n    buttonLabel: 'is',\n    buttonValueComponent: SearchButtonValueBoolean as SearchOperatorButtonValue<boolean>,\n    groqFilter: ({fieldPath, value}: SearchOperatorParams<boolean>) =>\n      typeof value !== 'undefined' && fieldPath ? `${fieldPath} == ${toJSON(value)}` : null,\n    initialValue: true,\n    inputComponent: SearchFilterBooleanInput as SearchOperatorInput<boolean>,\n    label: 'is',\n    type: 'booleanEqual',\n  }),\n}\n","import {defineSearchOperator} from './operatorTypes'\n\nexport const definedOperators = {\n  defined: defineSearchOperator({\n    buttonLabel: 'not empty',\n    groqFilter: ({fieldPath}) => (fieldPath ? `defined(${fieldPath})` : null),\n    label: 'not empty',\n    type: 'defined',\n  }),\n  notDefined: defineSearchOperator({\n    buttonLabel: 'empty',\n    groqFilter: ({fieldPath}) => (fieldPath ? `!defined(${fieldPath})` : null),\n    label: 'empty',\n    type: 'notDefined',\n  }),\n}\n","import {Box, TextInput} from '@sanity/ui'\nimport React, {ComponentProps, forwardRef} from 'react'\nimport styled, {css} from 'styled-components'\n\ninterface CustomTextInputProps extends ComponentProps<typeof TextInput> {\n  background?: boolean\n  smallClearButton?: boolean\n}\n\nconst CustomTextInputBox = styled(Box)(\n  ({background, smallClearButton}: {background?: boolean; smallClearButton?: boolean}) => {\n    return css`\n      width: 100%;\n\n      input + span {\n        background: ${({theme}) =>\n          background ? theme.sanity.color.card.disabled.bg2 : 'transparent'};\n      }\n\n      [data-qa='clear-button'] {\n        background: none;\n        box-shadow: none;\n        display: flex; /* TODO: hack, currently used to vertically center <TextInput>'s clearButton */\n        transform: ${smallClearButton ? 'scale(0.8)' : 'scale(1)'};\n        &:hover {\n          opacity: 0.5;\n        }\n      }\n    `\n  }\n)\n\nexport const CustomTextInput = forwardRef<HTMLInputElement, CustomTextInputProps>(\n  function CustomTextInput(props, ref) {\n    const {background, smallClearButton, ...rest} = props\n\n    return (\n      <CustomTextInputBox background={background} smallClearButton={smallClearButton}>\n        <TextInput {...rest} radius={background ? 2 : 1} ref={ref} />\n      </CustomTextInputBox>\n    )\n  }\n)\n","import {createContext} from 'react'\n\nexport interface DatePickerContextValue {\n  fontSize: number\n}\n\nexport const DatePickerContext = createContext<DatePickerContextValue | undefined>(undefined)\n","import {useContext} from 'react'\nimport {DatePickerContext, DatePickerContextValue} from './DatePickerContext'\n\nexport function useDatePicker(): DatePickerContextValue {\n  const context = useContext(DatePickerContext)\n  if (context === undefined) {\n    throw new Error('useDatePicker must be used within an DatePickerProvider')\n  }\n  return context\n}\n","import {Card, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {useDatePicker} from '../contexts/useDatePicker'\n\ninterface CalendarDayProps {\n  date: Date\n  focused?: boolean\n  onSelect: (date: Date) => void\n  isCurrentMonth?: boolean\n  isToday: boolean\n  selected?: boolean\n}\n\nexport function CalendarDay(props: CalendarDayProps) {\n  const {date, focused, isCurrentMonth, isToday, onSelect, selected} = props\n\n  const handleClick = useCallback(() => {\n    onSelect(date)\n  }, [date, onSelect])\n\n  const {fontSize} = useDatePicker()\n\n  return (\n    <div aria-selected={selected} data-ui=\"CalendarDay\">\n      <Card\n        aria-label={date.toDateString()}\n        aria-pressed={selected}\n        as=\"button\"\n        __unstable_focusRing\n        data-weekday\n        data-focused={focused ? 'true' : ''}\n        role=\"button\"\n        tabIndex={-1}\n        onClick={handleClick}\n        padding={3}\n        radius={2}\n        selected={selected}\n        tone={isToday || selected ? 'primary' : 'default'}\n      >\n        <Text\n          muted={!selected && !isCurrentMonth}\n          size={fontSize}\n          style={{textAlign: 'center'}}\n          weight=\"regular\"\n        >\n          {date.getDate()}\n        </Text>\n      </Card>\n    </div>\n  )\n}\n","import {range} from 'lodash'\n\nexport const MONTH_NAMES = [\n  'January',\n  'February',\n  'March',\n  'April',\n  'May',\n  'June',\n  'July',\n  'August',\n  'September',\n  'October',\n  'November',\n  'December',\n]\n\nexport const WEEK_DAY_NAMES = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n\nexport const HOURS_24 = range(0, 24)\n\nexport const ARROW_KEYS = ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight']\n\n// all weekdays except first\nexport const TAIL_WEEKDAYS = [1, 2, 3, 4, 5, 6]\n","import {addDays, eachWeekOfInterval, getWeek, lastDayOfMonth, startOfMonth} from 'date-fns'\nimport {TAIL_WEEKDAYS} from './constants'\n\nexport const getWeekStartsOfMonth = (date: Date): Date[] => {\n  const firstDay = startOfMonth(date)\n  return eachWeekOfInterval({\n    start: firstDay,\n    end: lastDayOfMonth(firstDay),\n  })\n}\n\nexport const getWeekDaysFromWeekStarts = (weekStarts: Date[]): Date[][] => {\n  return weekStarts.map((weekStart) => [\n    weekStart,\n    ...TAIL_WEEKDAYS.map((d) => addDays(weekStart, d)),\n  ])\n}\n\ntype Week = {\n  number: number\n  days: Date[]\n}\n\nexport const getWeeksOfMonth = (date: Date): Week[] =>\n  getWeekDaysFromWeekStarts(getWeekStartsOfMonth(date)).map(\n    (days): Week => ({\n      number: getWeek(days[0]),\n      days,\n    })\n  )\n\nexport const formatTime = (hours: number, minutes: number): string =>\n  `${`${hours}`.padStart(2, '0')}:${`${minutes}`.padStart(2, '0')}`\n","import {Box, Grid, Text} from '@sanity/ui'\nimport {isSameDay, isSameMonth} from 'date-fns'\nimport React from 'react'\nimport {useDatePicker} from '../contexts/useDatePicker'\nimport {CalendarDay} from './CalendarDay'\nimport {WEEK_DAY_NAMES} from './constants'\nimport {getWeeksOfMonth} from './utils'\n\ninterface CalendarMonthProps {\n  date: Date\n  focused?: Date\n  selected?: Date\n  onSelect: (date: Date) => void\n  hidden?: boolean\n}\n\nexport function CalendarMonth(props: CalendarMonthProps) {\n  const {fontSize} = useDatePicker()\n\n  return (\n    <Box aria-hidden={props.hidden || false} data-ui=\"CalendarMonth\">\n      <Grid gap={1} style={{gridTemplateColumns: 'repeat(7, minmax(44px, 46px))'}}>\n        {WEEK_DAY_NAMES.map((weekday) => (\n          <Box key={weekday} paddingY={2}>\n            <Text size={fontSize} weight=\"medium\" style={{textAlign: 'center'}}>\n              {weekday}\n            </Text>\n          </Box>\n        ))}\n\n        {getWeeksOfMonth(props.date).map((week, weekIdx) =>\n          week.days.map((date, dayIdx) => {\n            const focused = props.focused && isSameDay(date, props.focused)\n            const selected = props.selected && isSameDay(date, props.selected)\n            const isToday = isSameDay(date, new Date())\n            const isCurrentMonth = props.focused && isSameMonth(date, props.focused)\n\n            return (\n              <CalendarDay\n                date={date}\n                focused={focused}\n                isCurrentMonth={isCurrentMonth}\n                isToday={isToday}\n                // eslint-disable-next-line react/no-array-index-key\n                key={`${weekIdx}-${dayIdx}`}\n                onSelect={props.onSelect}\n                selected={selected}\n              />\n            )\n          })\n        )}\n      </Grid>\n    </Box>\n  )\n}\n","import React from 'react'\nimport {TextInput} from '@sanity/ui'\nimport {useDatePicker} from './contexts/useDatePicker'\n\ntype TextInputProps = React.ComponentProps<typeof TextInput>\n\ntype Props = Omit<TextInputProps, 'onChange'> & {\n  onChange?: (\n    event: React.FocusEvent<HTMLInputElement> | React.ChangeEvent<HTMLInputElement>\n  ) => void\n}\n\n/**\n * A TextInput that only emit onChange when it has to\n * By default it will only emit onChange when: 1) user hits enter or 2) user leaves the\n * field (e.g. onBlur) and the input value at this time is different from the given `value` prop\n */\nexport const LazyTextInput = React.forwardRef(function LazyTextInput(\n  {onChange, onBlur, onKeyPress, value, ...rest}: Props,\n  forwardedRef: React.ForwardedRef<HTMLInputElement>\n) {\n  const [inputValue, setInputValue] = React.useState<string>()\n\n  const {fontSize} = useDatePicker()\n\n  const handleChange = React.useCallback((event: any) => {\n    setInputValue(event.currentTarget.value)\n  }, [])\n\n  const checkEvent = React.useCallback(\n    (event: any) => {\n      const currentValue = event.currentTarget.value\n      if (currentValue !== `${value}`) {\n        if (onChange) {\n          onChange(event)\n        }\n      }\n      setInputValue(undefined)\n    },\n    [onChange, value]\n  )\n\n  const handleBlur = React.useCallback(\n    (e: any) => {\n      checkEvent(e)\n      if (onBlur) {\n        onBlur(e)\n      }\n    },\n    [checkEvent, onBlur]\n  )\n\n  const handleKeyPress = React.useCallback(\n    (e: React.KeyboardEvent<HTMLInputElement>) => {\n      if (e.key === 'Enter') {\n        checkEvent(e)\n      }\n      if (onKeyPress) {\n        onKeyPress(e)\n      }\n    },\n    [checkEvent, onKeyPress]\n  )\n\n  return (\n    <TextInput\n      {...rest}\n      data-testid=\"date-input\"\n      fontSize={fontSize}\n      ref={forwardedRef}\n      value={inputValue === undefined ? value : inputValue}\n      onChange={handleChange}\n      onBlur={handleBlur}\n      onKeyPress={handleKeyPress}\n    />\n  )\n})\n","import React from 'react'\nimport {TextInput} from '@sanity/ui'\nimport {LazyTextInput} from '../LazyTextInput'\n\ntype Props = Omit<React.ComponentProps<typeof TextInput>, 'onChange' | 'value'> & {\n  value?: number\n  onChange: (year: number) => void\n}\n\nexport const YearInput = ({onChange, ...props}: Props) => {\n  const handleChange = React.useCallback(\n    (event: React.FocusEvent<HTMLInputElement> | React.ChangeEvent<HTMLInputElement>) => {\n      const numericValue = parseInt(event.currentTarget.value, 10)\n      if (!isNaN(numericValue)) {\n        onChange(numericValue)\n      }\n    },\n    [onChange]\n  )\n\n  return <LazyTextInput {...props} onChange={handleChange} inputMode=\"numeric\" />\n}\n","import {Box, Button, Flex, Select, Text, useForwardedRef} from '@sanity/ui'\n// import {ChevronLeftIcon, ChevronRightIcon} from '@sanity/icons'\nimport {addDays, addMonths, setDate, setHours, setMinutes, setMonth, setYear} from 'date-fns'\nimport {range} from 'lodash'\nimport React, {forwardRef, useCallback, useEffect} from 'react'\nimport {useDatePicker} from '../contexts/useDatePicker'\nimport {CalendarMonth} from './CalendarMonth'\nimport {ARROW_KEYS, HOURS_24, MONTH_NAMES} from './constants'\nimport {YearInput} from './YearInput'\n\ntype CalendarProps = Omit<React.ComponentProps<'div'>, 'onSelect'> & {\n  selectTime?: boolean\n  selectedDate?: Date\n  timeStep?: number\n  onSelect: (date: Date) => void\n  focusedDate: Date\n  onFocusedDateChange: (index: Date) => void\n}\n\n// This is used to maintain focus on a child element of the calendar-grid between re-renders\n// When using arrow keys to move focus from a day in one month to another we are setting focus at the button for the day\n// after it has changed but *only* if we *already* had focus inside the calendar grid (e.g not if focus was on the \"next\n// year\" button, or any of the other controls)\n// When moving from the last day of a month that displays 6 weeks in the grid to a month that displays 5 weeks, current\n// focus gets lost on render, so this provides us with a stable element to help us preserve focus on a child element of\n// the calendar grid between re-renders\nconst PRESERVE_FOCUS_ELEMENT = (\n  <span\n    data-preserve-focus\n    style={{overflow: 'hidden', position: 'absolute', outline: 'none'}}\n    tabIndex={-1}\n  />\n)\n\nexport const Calendar = forwardRef(function Calendar(\n  props: CalendarProps,\n  forwardedRef: React.ForwardedRef<HTMLDivElement>\n) {\n  const {\n    selectTime,\n    onFocusedDateChange,\n    selectedDate = new Date(),\n    focusedDate = selectedDate,\n    timeStep = 1,\n    onSelect,\n    ...restProps\n  } = props\n\n  const {fontSize} = useDatePicker()\n\n  const setFocusedDate = useCallback(\n    (date: Date) => onFocusedDateChange(date),\n    [onFocusedDateChange]\n  )\n\n  const setFocusedDateMonth = useCallback(\n    (month: number) => setFocusedDate(setDate(setMonth(focusedDate, month), 1)),\n    [focusedDate, setFocusedDate]\n  )\n\n  const handleFocusedMonthChange = useCallback(\n    (e: React.FormEvent<HTMLSelectElement>) => setFocusedDateMonth(Number(e.currentTarget.value)),\n    [setFocusedDateMonth]\n  )\n\n  const moveFocusedDate = useCallback(\n    (by: number) => setFocusedDate(addMonths(focusedDate, by)),\n    [focusedDate, setFocusedDate]\n  )\n\n  const setFocusedDateYear = useCallback(\n    (year: number) => setFocusedDate(setYear(focusedDate, year)),\n    [focusedDate, setFocusedDate]\n  )\n\n  const handleDateChange = useCallback(\n    (date: Date) => {\n      onSelect(setMinutes(setHours(date, selectedDate.getHours()), selectedDate.getMinutes()))\n    },\n    [onSelect, selectedDate]\n  )\n\n  const handleMinutesChange = useCallback(\n    (event: React.FormEvent<HTMLSelectElement>) => {\n      const m = Number(event.currentTarget.value)\n      onSelect(setMinutes(selectedDate, m))\n    },\n    [onSelect, selectedDate]\n  )\n\n  const handleHoursChange = useCallback(\n    (event: React.FormEvent<HTMLSelectElement>) => {\n      const m = Number(event.currentTarget.value)\n      onSelect(setHours(selectedDate, m))\n    },\n    [onSelect, selectedDate]\n  )\n\n  const ref = useForwardedRef(forwardedRef)\n\n  const focusCurrentWeekDay = useCallback(() => {\n    ref.current?.querySelector<HTMLElement>(`[data-focused=\"true\"]`)?.focus()\n  }, [ref])\n\n  const handleKeyDown = useCallback(\n    (event: any) => {\n      if (!ARROW_KEYS.includes(event.key)) {\n        return\n      }\n      event.preventDefault()\n      if (event.target.hasAttribute('data-calendar-grid')) {\n        focusCurrentWeekDay()\n        return\n      }\n      if (event.key === 'ArrowUp') {\n        onFocusedDateChange(addDays(focusedDate, -7))\n      }\n      if (event.key === 'ArrowDown') {\n        onFocusedDateChange(addDays(focusedDate, 7))\n      }\n      if (event.key === 'ArrowLeft') {\n        onFocusedDateChange(addDays(focusedDate, -1))\n      }\n      if (event.key === 'ArrowRight') {\n        onFocusedDateChange(addDays(focusedDate, 1))\n      }\n      // set focus temporarily on this element to make sure focus is still inside the calendar-grid after re-render\n      ref.current?.querySelector<HTMLElement>('[data-preserve-focus]')?.focus()\n    },\n    [ref, focusCurrentWeekDay, onFocusedDateChange, focusedDate]\n  )\n\n  useEffect(() => {\n    focusCurrentWeekDay()\n  }, [focusCurrentWeekDay])\n\n  useEffect(() => {\n    const currentFocusInCalendarGrid = document.activeElement?.matches(\n      '[data-calendar-grid], [data-calendar-grid] [data-preserve-focus]'\n    )\n    if (\n      // Only move focus if it's currently in the calendar grid\n      currentFocusInCalendarGrid\n    ) {\n      focusCurrentWeekDay()\n    }\n  }, [ref, focusCurrentWeekDay, focusedDate])\n\n  const handleNowClick = useCallback(() => onSelect(new Date()), [onSelect])\n\n  return (\n    <Box data-ui=\"Calendar\" {...restProps} ref={ref}>\n      {/* Select date */}\n      <Box paddingBottom={2}>\n        {/* Select month and year */}\n        <Flex>\n          <Box flex={1}>\n            <CalendarMonthSelect\n              fontSize={fontSize}\n              moveFocusedDate={moveFocusedDate}\n              onChange={handleFocusedMonthChange}\n              value={focusedDate?.getMonth()}\n            />\n          </Box>\n          <Box marginLeft={2}>\n            <CalendarYearSelect\n              moveFocusedDate={moveFocusedDate}\n              onChange={setFocusedDateYear}\n              value={focusedDate?.getFullYear()}\n            />\n          </Box>\n        </Flex>\n\n        {/* Selected month (grid of days) */}\n        <Box\n          data-calendar-grid\n          onKeyDown={handleKeyDown}\n          marginTop={2}\n          overflow=\"hidden\"\n          tabIndex={0}\n        >\n          <CalendarMonth\n            date={focusedDate}\n            focused={focusedDate}\n            onSelect={handleDateChange}\n            selected={selectedDate}\n          />\n          {PRESERVE_FOCUS_ELEMENT}\n        </Box>\n      </Box>\n\n      {/* Select time */}\n      {selectTime && (\n        <Box>\n          <Flex align=\"center\">\n            <Flex align=\"center\" flex={1}>\n              <Box>\n                <Select\n                  aria-label=\"Select hour\"\n                  fontSize={fontSize}\n                  value={selectedDate?.getHours()}\n                  onChange={handleHoursChange}\n                >\n                  {HOURS_24.map((h) => (\n                    <option key={h} value={h}>\n                      {`${h}`.padStart(2, '0')}\n                    </option>\n                  ))}\n                </Select>\n              </Box>\n\n              <Box paddingX={1}>\n                <Text>:</Text>\n              </Box>\n\n              <Box>\n                <Select\n                  aria-label=\"Select minutes\"\n                  fontSize={fontSize}\n                  value={selectedDate?.getMinutes()}\n                  onChange={handleMinutesChange}\n                >\n                  {range(0, 60, timeStep).map((m) => (\n                    <option key={m} value={m}>\n                      {`${m}`.padStart(2, '0')}\n                    </option>\n                  ))}\n                </Select>\n              </Box>\n            </Flex>\n\n            <Box marginLeft={2}>\n              <Button fontSize={fontSize} text=\"Set to now\" mode=\"bleed\" onClick={handleNowClick} />\n            </Box>\n          </Flex>\n        </Box>\n      )}\n    </Box>\n  )\n})\n\nfunction CalendarMonthSelect(props: {\n  fontSize?: number\n  moveFocusedDate: (by: number) => void\n  onChange: (e: React.FormEvent<HTMLSelectElement>) => void\n  value?: number\n}) {\n  const {fontSize, moveFocusedDate, onChange, value} = props\n\n  return (\n    <Flex flex={1}>\n      <Box flex={1}>\n        <Select\n          aria-label=\"Select month\"\n          fontSize={fontSize ?? 1}\n          radius={0}\n          value={value}\n          onChange={onChange}\n        >\n          {MONTH_NAMES.map((m, i) => (\n            // eslint-disable-next-line react/no-array-index-key\n            <option key={i} value={i}>\n              {m}\n            </option>\n          ))}\n        </Select>\n      </Box>\n    </Flex>\n  )\n}\n\nfunction CalendarYearSelect(props: {\n  moveFocusedDate: (by: number) => void\n  onChange: (year: number) => void\n  value?: number\n}) {\n  const {moveFocusedDate, onChange, value} = props\n\n  return (\n    <Flex>\n      <YearInput\n        aria-label=\"Selected year\"\n        value={value}\n        onChange={onChange}\n        radius={0}\n        style={{width: 65}}\n      />\n    </Flex>\n  )\n}\n","import React, {ReactNode} from 'react'\nimport {DatePickerContext} from './DatePickerContext'\n\ninterface DatePickerProviderProps {\n  children?: ReactNode\n  fontSize?: number\n}\n\nexport function DatePickerProvider({children, fontSize = 1}: DatePickerProviderProps) {\n  return <DatePickerContext.Provider value={{fontSize}}>{children}</DatePickerContext.Provider>\n}\n","import React from 'react'\nimport {useSearchState} from '../../../../../../contexts/search/useSearchState'\nimport {Calendar} from './calendar/Calendar'\nimport {DatePickerProvider} from './contexts/DatePickerProvider'\n\nexport const DatePicker = React.forwardRef(function DatePicker(\n  props: Omit<React.ComponentProps<'div'>, 'onChange'> & {\n    value?: Date\n    onChange: (nextDate: Date) => void\n    selectTime?: boolean\n    timeStep?: number\n  },\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {value = new Date(), onChange, ...rest} = props\n  const [focusedDate, setFocusedDay] = React.useState<Date>()\n  const {\n    state: {fullscreen},\n  } = useSearchState()\n\n  const handleSelect = React.useCallback(\n    (nextDate: any) => {\n      onChange(nextDate)\n      setFocusedDay(undefined)\n    },\n    [onChange]\n  )\n\n  return (\n    <DatePickerProvider fontSize={fullscreen ? 2 : 1}>\n      <Calendar\n        {...rest}\n        ref={ref}\n        selectedDate={value}\n        onSelect={handleSelect}\n        focusedDate={focusedDate || value}\n        onFocusedDateChange={setFocusedDay}\n      />\n    </DatePickerProvider>\n  )\n})\n","import {Stack} from '@sanity/ui'\nimport {format, isValid, parse} from 'date-fns'\nimport React, {ChangeEvent, KeyboardEvent, useCallback, useEffect, useMemo, useState} from 'react'\nimport {useSearchState} from '../../../../../contexts/search/useSearchState'\nimport type {OperatorInputComponentProps} from '../../../../../definitions/operators/operatorTypes'\nimport {CustomTextInput} from '../../../../common/CustomTextInput'\nimport {DatePicker} from './datePicker/DatePicker'\n\nconst DEFAULT_DATE_FORMAT = 'yyyy-MM-dd'\nconst DEFAULT_TIME_FORMAT = 'HH:mm'\n\nexport function CommonDateInput({\n  onChange,\n  selectTime,\n  value,\n}: OperatorInputComponentProps<string> & {\n  selectTime?: boolean\n}) {\n  const dateFormat = useMemo(\n    () => [DEFAULT_DATE_FORMAT, ...(selectTime ? [DEFAULT_TIME_FORMAT] : [])].join(' '),\n    [selectTime]\n  )\n\n  const {\n    state: {fullscreen},\n  } = useSearchState()\n\n  const [customValidity, setCustomValidity] = useState<string | undefined>(undefined)\n  const [inputValue, setInputValue] = useState<string>(() =>\n    value ? format(new Date(value), dateFormat) : ''\n  )\n\n  const handleDatePickerChange = useCallback(\n    (date: Date | null) => {\n      const timestamp = date?.toISOString()\n      if (timestamp) {\n        onChange(timestamp)\n      }\n    },\n    [onChange]\n  )\n\n  const parseInputValue = useCallback(() => {\n    if (inputValue) {\n      const parsed = parse(inputValue, dateFormat, new Date())\n      const validDate = isValid(parsed)\n      onChange(validDate ? parsed.toISOString() : null)\n      setCustomValidity(validDate ? undefined : 'Invalid date')\n    }\n  }, [dateFormat, inputValue, onChange])\n\n  const handleTextInputBlur = useCallback(() => {\n    parseInputValue()\n  }, [parseInputValue])\n\n  const handleTextInputChange = useCallback((event: ChangeEvent<HTMLInputElement>) => {\n    setInputValue(event.currentTarget.value)\n  }, [])\n\n  const handleTextInputClear = useCallback(() => {\n    onChange(null)\n    setCustomValidity(undefined)\n    setInputValue('')\n  }, [onChange])\n\n  const handleTextInputKeyDown = useCallback(\n    (event: KeyboardEvent<HTMLInputElement>) => {\n      if (event.key === 'Enter') {\n        parseInputValue()\n      }\n    },\n    [parseInputValue]\n  )\n\n  useEffect(() => {\n    const updatedDate = value && new Date(value)\n\n    if (updatedDate && isValid(updatedDate)) {\n      setInputValue(format(updatedDate, dateFormat))\n      setCustomValidity(undefined)\n    }\n  }, [dateFormat, value])\n\n  const placeholderDate = useMemo(() => format(new Date(), dateFormat), [dateFormat])\n\n  return (\n    <Stack space={3}>\n      <CustomTextInput\n        aria-label=\"Date\"\n        clearButton={!!inputValue}\n        customValidity={customValidity}\n        fontSize={fullscreen ? 2 : 1}\n        onBlur={handleTextInputBlur}\n        onChange={handleTextInputChange}\n        onClear={handleTextInputClear}\n        onKeyDown={handleTextInputKeyDown}\n        placeholder={`Example: ${placeholderDate}`}\n        value={inputValue}\n      />\n      <DatePicker\n        onChange={handleDatePickerChange}\n        selectTime={selectTime}\n        value={value ? new Date(value) : undefined}\n      />\n    </Stack>\n  )\n}\n","import React from 'react'\nimport {OperatorInputComponentProps} from '../../../../../definitions/operators/operatorTypes'\nimport {CommonDateInput} from './CommonDate'\n\nexport function SearchFilterDateInput(props: OperatorInputComponentProps<string>) {\n  return <CommonDateInput {...props} />\n}\n","import {Box, Flex, Select, TextInput} from '@sanity/ui'\nimport React, {ChangeEvent, useCallback, useRef, useState} from 'react'\nimport {useSearchState} from '../../../../../contexts/search/useSearchState'\nimport {OperatorDateLastValue} from '../../../../../definitions/operators/dateOperators'\nimport {OperatorInputComponentProps} from '../../../../../definitions/operators/operatorTypes'\n\nexport function SearchFilterDateLastInput({\n  onChange,\n  value,\n}: OperatorInputComponentProps<OperatorDateLastValue>) {\n  const [uncontrolledValue, setUncontrolledValue] = useState(value?.value || '')\n  const dateUnit = useRef<OperatorDateLastValue['unit']>('days')\n  const dateValue = useRef<OperatorDateLastValue['value']>(value?.value || null)\n\n  const {\n    state: {fullscreen},\n  } = useSearchState()\n\n  const handleChange = useCallback(() => {\n    onChange({\n      unit: dateUnit?.current,\n      value: dateValue?.current,\n    })\n  }, [onChange])\n\n  const handleUnitChange = useCallback(\n    (event: ChangeEvent<HTMLSelectElement>) => {\n      dateUnit.current = event.currentTarget.value as OperatorDateLastValue['unit']\n      handleChange()\n    },\n    [handleChange]\n  )\n  const handleValueChange = useCallback(\n    (event: ChangeEvent<HTMLInputElement>) => {\n      setUncontrolledValue(event.currentTarget.value)\n      const numValue = parseFloat(event.currentTarget.value)\n      dateValue.current = Number.isFinite(numValue) ? numValue : null\n      handleChange()\n    },\n    [handleChange]\n  )\n\n  return (\n    <Flex gap={2}>\n      <Box flex={1}>\n        <TextInput\n          aria-label=\"Unit value\"\n          fontSize={fullscreen ? 2 : 1}\n          onChange={handleValueChange}\n          pattern=\"\\d*\"\n          step=\"1\"\n          type=\"number\"\n          value={uncontrolledValue}\n        />\n      </Box>\n      <Box flex={1}>\n        <Select\n          aria-label=\"Select unit\"\n          fontSize={fullscreen ? 2 : 1}\n          onChange={handleUnitChange}\n          value={value?.unit}\n        >\n          <option value=\"days\">Days</option>\n          <option value=\"months\">Months</option>\n          <option value=\"years\">Years</option>\n        </Select>\n      </Box>\n    </Flex>\n  )\n}\n","import React from 'react'\nimport {OperatorInputComponentProps} from '../../../../../definitions/operators/operatorTypes'\nimport {CommonDateInput} from './CommonDate'\n\nexport function SearchFilterDateTimeInput(props: OperatorInputComponentProps<string>) {\n  return <CommonDateInput {...props} selectTime />\n}\n","import {startOfToday, sub} from 'date-fns'\nimport {\n  SearchButtonValueDate,\n  SearchButtonValueDateLast,\n} from '../../components/filters/common/ButtonValue'\nimport {SearchFilterDateInput} from '../../components/filters/filter/inputs/date/Date'\nimport {SearchFilterDateLastInput} from '../../components/filters/filter/inputs/date/DateLast'\nimport {SearchFilterDateTimeInput} from '../../components/filters/filter/inputs/date/DateTime'\nimport {\n  defineSearchOperator,\n  SearchOperatorButtonValue,\n  SearchOperatorInput,\n  SearchOperatorParams,\n} from './operatorTypes'\nimport {toJSON} from './operatorUtils'\n\nexport interface OperatorDateRangeValue {\n  max: Date | null\n  min: Date | null\n}\n\nexport interface OperatorDateLastValue {\n  unit: 'days' | 'months' | 'years'\n  value: number | null\n}\n\n// @todo: don't manually cast `buttonValueComponent` and `inputComponent` once\n// we understand why `yarn etl` fails with 'Unable to follow symbol' errors\n\n// Common values shared between date & datetime defs\nconst COMMON = {\n  dateAfter: {\n    buttonLabel: 'after',\n    buttonValueComponent: SearchButtonValueDate as SearchOperatorButtonValue<string>,\n    initialValue: startOfToday().toISOString(),\n    label: 'is after',\n  },\n  dateBefore: {\n    buttonLabel: 'before',\n    buttonValueComponent: SearchButtonValueDate as SearchOperatorButtonValue<string>,\n    initialValue: startOfToday().toISOString(),\n    label: 'is before',\n  },\n  dateEqual: {\n    buttonLabel: 'is',\n    buttonValueComponent: SearchButtonValueDate as SearchOperatorButtonValue<string>,\n    groqFilter: ({fieldPath, value}: SearchOperatorParams<string>) => {\n      return value && fieldPath ? `${fieldPath} == ${toJSON(value)}` : null\n    },\n    initialValue: startOfToday().toISOString(),\n    label: 'is',\n  },\n  dateLast: {\n    buttonLabel: 'last',\n    buttonValueComponent:\n      SearchButtonValueDateLast as SearchOperatorButtonValue<OperatorDateLastValue>,\n    label: 'is in the last',\n  },\n  dateNotEqual: {\n    buttonLabel: 'is not',\n    buttonValueComponent: SearchButtonValueDate as SearchOperatorButtonValue<string>,\n    groqFilter: ({fieldPath, value}: SearchOperatorParams<string>) => {\n      return value && fieldPath ? `${fieldPath} != ${toJSON(value)}` : null\n    },\n    initialValue: startOfToday().toISOString(),\n    label: 'is not',\n  },\n}\n\nexport const dateOperators = {\n  dateAfter: defineSearchOperator({\n    ...COMMON.dateAfter,\n    groqFilter: ({fieldPath, value}: SearchOperatorParams<string>) => {\n      return value && fieldPath ? `${fieldPath} > ${toJSON(value)}` : null\n    },\n    inputComponent: SearchFilterDateInput as SearchOperatorInput<string>,\n    type: 'dateAfter',\n  }),\n  dateBefore: defineSearchOperator({\n    ...COMMON.dateBefore,\n    groqFilter: ({fieldPath, value}: SearchOperatorParams<string>) => {\n      return value && fieldPath ? `${fieldPath} < ${toJSON(value)}` : null\n    },\n    inputComponent: SearchFilterDateInput as SearchOperatorInput<string>,\n    type: 'dateBefore',\n  }),\n  dateEqual: defineSearchOperator({\n    ...COMMON.dateEqual,\n    inputComponent: SearchFilterDateInput as SearchOperatorInput<string>,\n    type: 'dateEqual',\n  }),\n  dateLast: defineSearchOperator({\n    ...COMMON.dateLast,\n    groqFilter: ({fieldPath, value}: SearchOperatorParams<OperatorDateLastValue>) => {\n      const flooredValue = typeof value?.value === 'number' ? Math.floor(value.value) : undefined\n      const timestampAgo = Number.isFinite(flooredValue)\n        ? sub(new Date(), {\n            days: value?.unit === 'days' ? flooredValue : 0,\n            months: value?.unit === 'months' ? flooredValue : 0,\n            years: value?.unit === 'years' ? flooredValue : 0,\n          }).toISOString()\n        : null\n      return timestampAgo && fieldPath ? `${fieldPath} > ${toJSON(timestampAgo)}` : null\n    },\n    inputComponent: SearchFilterDateLastInput as SearchOperatorInput<OperatorDateLastValue>,\n    initialValue: {\n      unit: 'days',\n      value: 7,\n    },\n    type: 'dateLast',\n  }),\n  dateNotEqual: defineSearchOperator({\n    ...COMMON.dateNotEqual,\n    inputComponent: SearchFilterDateInput as SearchOperatorInput<string>,\n    type: 'dateNotEqual',\n  }),\n  dateTimeAfter: defineSearchOperator({\n    ...COMMON.dateAfter,\n    groqFilter: ({fieldPath, value}: SearchOperatorParams<string>) => {\n      return value && fieldPath ? `dateTime(${fieldPath}) > dateTime(${toJSON(value)})` : null\n    },\n    inputComponent: SearchFilterDateTimeInput as SearchOperatorInput<string>,\n    type: 'dateTimeAfter',\n  }),\n  dateTimeBefore: defineSearchOperator({\n    ...COMMON.dateBefore,\n    groqFilter: ({fieldPath, value}: SearchOperatorParams<string>) => {\n      return value && fieldPath ? `dateTime(${fieldPath}) < dateTime(${toJSON(value)})` : null\n    },\n    inputComponent: SearchFilterDateTimeInput as SearchOperatorInput<string>,\n    type: 'dateTimeBefore',\n  }),\n  dateTimeEqual: defineSearchOperator({\n    ...COMMON.dateEqual,\n    inputComponent: SearchFilterDateTimeInput as SearchOperatorInput<string>,\n    type: 'dateTimeEqual',\n  }),\n  dateTimeLast: defineSearchOperator({\n    ...COMMON.dateLast,\n    groqFilter: ({fieldPath, value}: SearchOperatorParams<OperatorDateLastValue>) => {\n      const flooredValue = typeof value?.value === 'number' ? Math.floor(value.value) : undefined\n      const timestampAgo = Number.isFinite(flooredValue)\n        ? sub(new Date(), {\n            days: value?.unit === 'days' ? flooredValue : 0,\n            months: value?.unit === 'months' ? flooredValue : 0,\n            years: value?.unit === 'years' ? flooredValue : 0,\n          }).toISOString()\n        : null\n      return timestampAgo && fieldPath\n        ? `dateTime(${fieldPath}) > dateTime(${toJSON(timestampAgo)})`\n        : null\n    },\n    initialValue: {\n      unit: 'days',\n      value: 7,\n    },\n    inputComponent: SearchFilterDateLastInput as SearchOperatorInput<OperatorDateLastValue>,\n    type: 'dateTimeLast',\n  }),\n  dateTimeNotEqual: defineSearchOperator({\n    ...COMMON.dateNotEqual,\n    inputComponent: SearchFilterDateTimeInput as SearchOperatorInput<string>,\n    type: 'dateTimeNotEqual',\n  }),\n}\n","import {\n  SearchButtonValueNumber,\n  SearchButtonValueNumberRange,\n} from '../../components/filters/common/ButtonValue'\nimport {SearchFilterNumberInput} from '../../components/filters/filter/inputs/number/Number'\nimport {SearchFilterNumberRangeInput} from '../../components/filters/filter/inputs/number/NumberRange'\nimport {GteIcon} from '../../components/filters/icons/GteIcon'\nimport {GtIcon} from '../../components/filters/icons/GtIcon'\nimport {LteIcon} from '../../components/filters/icons/LteIcon'\nimport {LtIcon} from '../../components/filters/icons/LtIcon'\nimport {OperatorNumberRangeValue} from './common'\nimport {defineSearchOperator, SearchOperatorButtonValue, SearchOperatorInput} from './operatorTypes'\nimport {toJSON} from './operatorUtils'\n\n// @todo: don't manually cast `buttonValueComponent` and `inputComponent` once\n// we understand why `yarn etl` fails with 'Unable to follow symbol' errors\nexport const numberOperators = {\n  numberEqual: defineSearchOperator({\n    buttonLabel: 'is',\n    buttonValueComponent: SearchButtonValueNumber as SearchOperatorButtonValue<number>,\n    groqFilter: ({fieldPath, value}) =>\n      Number.isFinite(value) && fieldPath ? `${fieldPath} == ${toJSON(value)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterNumberInput as SearchOperatorInput<number>,\n    label: 'is',\n    type: 'numberEqual',\n  }),\n  numberGt: defineSearchOperator({\n    buttonLabel: '>',\n    buttonValueComponent: SearchButtonValueNumber as SearchOperatorButtonValue<number>,\n    groqFilter: ({fieldPath, value}) =>\n      Number.isFinite(value) && fieldPath ? `${fieldPath} > ${toJSON(value)}` : null,\n    icon: GtIcon,\n    initialValue: null,\n    inputComponent: SearchFilterNumberInput as SearchOperatorInput<number>,\n    label: 'greater than',\n    type: 'numberGt',\n  }),\n  numberGte: defineSearchOperator({\n    buttonLabel: '≥',\n    buttonValueComponent: SearchButtonValueNumber as SearchOperatorButtonValue<number>,\n    groqFilter: ({fieldPath, value}) =>\n      Number.isFinite(value) && fieldPath ? `${fieldPath} >= ${toJSON(value)}` : null,\n    icon: GteIcon,\n    initialValue: null,\n    inputComponent: SearchFilterNumberInput as SearchOperatorInput<number>,\n    label: 'greater than or equal to',\n    type: 'numberGte',\n  }),\n  numberLt: defineSearchOperator({\n    buttonLabel: '<',\n    buttonValueComponent: SearchButtonValueNumber as SearchOperatorButtonValue<number>,\n    groqFilter: ({fieldPath, value}) =>\n      Number.isFinite(value) && fieldPath ? `${fieldPath} < ${toJSON(value)}` : null,\n    icon: LtIcon,\n    initialValue: null,\n    inputComponent: SearchFilterNumberInput as SearchOperatorInput<number>,\n    label: 'less than',\n    type: 'numberLt',\n  }),\n  numberLte: defineSearchOperator({\n    buttonLabel: '≤',\n    buttonValueComponent: SearchButtonValueNumber as SearchOperatorButtonValue<number>,\n    groqFilter: ({fieldPath, value}) =>\n      Number.isFinite(value) && fieldPath ? `${fieldPath} <= ${toJSON(value)}` : null,\n    icon: LteIcon,\n    initialValue: null,\n    inputComponent: SearchFilterNumberInput as SearchOperatorInput<number>,\n    label: 'less than or equal to',\n    type: 'numberLte',\n  }),\n  numberNotEqual: defineSearchOperator({\n    buttonLabel: 'is not',\n    buttonValueComponent: SearchButtonValueNumber as SearchOperatorButtonValue<number>,\n    groqFilter: ({fieldPath, value}) =>\n      Number.isFinite(value) && fieldPath ? `${fieldPath} != ${toJSON(value)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterNumberInput as SearchOperatorInput<number>,\n    label: 'is not',\n    type: 'numberNotEqual',\n  }),\n  numberRange: defineSearchOperator({\n    buttonLabel: 'is between',\n    buttonValueComponent:\n      SearchButtonValueNumberRange as SearchOperatorButtonValue<OperatorNumberRangeValue>,\n    groqFilter: ({fieldPath, value}) =>\n      Number.isFinite(value?.max) && Number.isFinite(value?.min) && fieldPath\n        ? `${fieldPath} > ${toJSON(value?.min)} && ${fieldPath} < ${toJSON(value?.max)}`\n        : '',\n    initialValue: null,\n    inputComponent: SearchFilterNumberRangeInput as SearchOperatorInput<OperatorNumberRangeValue>,\n    label: 'is between',\n    type: 'numberRange',\n  }),\n}\n","import {TextInput} from '@sanity/ui'\nimport React, {ChangeEvent, useCallback} from 'react'\nimport {useSearchState} from '../../../../../contexts/search/useSearchState'\nimport {OperatorInputComponentProps} from '../../../../../definitions/operators/operatorTypes'\n\nexport function SearchFilterStringInput({\n  onChange,\n  value,\n}: OperatorInputComponentProps<number | string>) {\n  const {\n    state: {fullscreen},\n  } = useSearchState()\n\n  const handleChange = useCallback(\n    (event: ChangeEvent<HTMLInputElement>) => onChange(event.currentTarget.value || null),\n    [onChange]\n  )\n\n  return (\n    <TextInput\n      fontSize={fullscreen ? 2 : 1}\n      onChange={handleChange}\n      placeholder=\"Value\"\n      value={value || ''}\n    />\n  )\n}\n","import {SearchButtonValueString} from '../../components/filters/common/ButtonValue'\nimport {SearchFilterStringInput} from '../../components/filters/filter/inputs/string/String'\nimport {defineSearchOperator, SearchOperatorButtonValue, SearchOperatorInput} from './operatorTypes'\nimport {toJSON} from './operatorUtils'\n\n// @todo: don't manually cast `buttonValueComponent` and `inputComponent` once\n// we understand why `yarn etl` fails with 'Unable to follow symbol' errors\nexport const portableTextOperators = {\n  portableTextEqual: defineSearchOperator({\n    buttonLabel: 'is',\n    buttonValueComponent: SearchButtonValueString as SearchOperatorButtonValue<string | number>,\n    groqFilter: ({fieldPath, value}) =>\n      value && fieldPath ? `pt::text(${fieldPath}) == ${toJSON(value)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterStringInput as SearchOperatorInput<string | number>,\n    label: 'is',\n    type: 'portableTextEqual',\n  }),\n  portableTextMatches: defineSearchOperator({\n    buttonLabel: 'contains',\n    buttonValueComponent: SearchButtonValueString as SearchOperatorButtonValue<string | number>,\n    groqFilter: ({fieldPath, value}) =>\n      value && fieldPath ? `pt::text(${fieldPath}) match ${toJSON(value)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterStringInput as SearchOperatorInput<string | number>,\n    label: 'contains',\n    type: 'portableTextMatches',\n  }),\n  portableTextNotEqual: defineSearchOperator({\n    buttonLabel: 'is not',\n    buttonValueComponent: SearchButtonValueString as SearchOperatorButtonValue<string | number>,\n    groqFilter: ({fieldPath, value}) =>\n      value && fieldPath ? `pt::text(${fieldPath}) != ${toJSON(value)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterStringInput as SearchOperatorInput<string | number>,\n    label: 'is not',\n    type: 'portableTextNotEqual',\n  }),\n  portableTextNotMatches: defineSearchOperator({\n    buttonLabel: 'does not contain',\n    buttonValueComponent: SearchButtonValueString as SearchOperatorButtonValue<string | number>,\n    groqFilter: ({fieldPath, value}) =>\n      value && fieldPath ? `!(pt::text(${fieldPath}) match ${toJSON(value)})` : null,\n    initialValue: null,\n    inputComponent: SearchFilterStringInput as SearchOperatorInput<string | number>,\n    label: 'does not contain',\n    type: 'portableTextNotMatches',\n  }),\n}\n","import {ReferenceValue} from '@sanity/types'\nimport {SearchButtonValueReference} from '../../components/filters/common/ButtonValue'\nimport {SearchFilterAssetInput} from '../../components/filters/filter/inputs/asset/Asset'\nimport {SearchFilterReferenceInput} from '../../components/filters/filter/inputs/reference/Reference'\nimport {defineSearchOperator, SearchOperatorButtonValue, SearchOperatorInput} from './operatorTypes'\nimport {toJSON} from './operatorUtils'\n\n// @todo: don't manually cast `buttonValueComponent` and `inputComponent` once\n// we understand why `yarn etl` fails with 'Unable to follow symbol' errors\nexport const referenceOperators = {\n  referenceEqual: defineSearchOperator({\n    buttonLabel: 'is',\n    buttonValueComponent: SearchButtonValueReference as SearchOperatorButtonValue<ReferenceValue>,\n    groqFilter: ({fieldPath, value}) =>\n      value?._ref && fieldPath ? `${fieldPath}._ref == ${toJSON(value._ref)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterReferenceInput as SearchOperatorInput<ReferenceValue>,\n    label: 'is',\n    type: 'referenceEqual',\n  }),\n  referenceNotEqual: defineSearchOperator({\n    buttonLabel: 'is not',\n    buttonValueComponent: SearchButtonValueReference as SearchOperatorButtonValue<ReferenceValue>,\n    groqFilter: ({fieldPath, value}) =>\n      value?._ref && fieldPath ? `${fieldPath}._ref != ${toJSON(value._ref)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterReferenceInput as SearchOperatorInput<ReferenceValue>,\n    label: 'is not',\n    type: 'referenceNotEqual',\n  }),\n  referencesAssetFile: defineSearchOperator({\n    buttonLabel: '→',\n    buttonValueComponent: SearchButtonValueReference as SearchOperatorButtonValue<ReferenceValue>,\n    groqFilter: ({value}) => (value?._ref ? `references(${toJSON(value._ref)})` : null),\n    initialValue: null,\n    inputComponent: SearchFilterAssetInput('file'),\n    label: 'file',\n    type: 'referencesAssetFile',\n  }),\n  referencesAssetImage: defineSearchOperator({\n    buttonLabel: '→',\n    buttonValueComponent: SearchButtonValueReference as SearchOperatorButtonValue<ReferenceValue>,\n    groqFilter: ({value}) => (value?._ref ? `references(${toJSON(value._ref)})` : null),\n    initialValue: null,\n    inputComponent: SearchFilterAssetInput('image'),\n    label: 'image',\n    type: 'referencesAssetImage',\n  }),\n  referencesDocument: defineSearchOperator({\n    buttonLabel: '→',\n    buttonValueComponent: SearchButtonValueReference as SearchOperatorButtonValue<ReferenceValue>,\n    groqFilter: ({value}) => (value?._ref ? `references(${toJSON(value._ref)})` : null),\n    initialValue: null,\n    inputComponent: SearchFilterReferenceInput as SearchOperatorInput<ReferenceValue>,\n    label: 'document',\n    type: 'referencesDocument',\n  }),\n}\n","import {SearchButtonValueString} from '../../components/filters/common/ButtonValue'\nimport {SearchFilterStringInput} from '../../components/filters/filter/inputs/string/String'\nimport {defineSearchOperator, SearchOperatorButtonValue, SearchOperatorInput} from './operatorTypes'\nimport {toJSON} from './operatorUtils'\n\n// @todo: don't manually cast `buttonValueComponent` and `inputComponent` once\n// we understand why `yarn etl` fails with 'Unable to follow symbol' errors\nexport const slugOperators = {\n  slugEqual: defineSearchOperator({\n    buttonLabel: 'is',\n    buttonValueComponent: SearchButtonValueString as SearchOperatorButtonValue<string | number>,\n    groqFilter: ({fieldPath, value}) =>\n      value && fieldPath ? `${fieldPath}.current == ${toJSON(value)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterStringInput as SearchOperatorInput<string | number>,\n    label: 'is',\n    type: 'slugEqual',\n  }),\n  slugMatches: defineSearchOperator({\n    buttonLabel: 'contains',\n    buttonValueComponent: SearchButtonValueString as SearchOperatorButtonValue<string | number>,\n    groqFilter: ({fieldPath, value}) =>\n      value && fieldPath ? `${fieldPath}.current match ${toJSON(value)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterStringInput as SearchOperatorInput<string | number>,\n    label: 'contains',\n    type: 'slugMatches',\n  }),\n  slugNotEqual: defineSearchOperator({\n    buttonLabel: 'is not',\n    buttonValueComponent: SearchButtonValueString as SearchOperatorButtonValue<string | number>,\n    groqFilter: ({fieldPath, value}) =>\n      value && fieldPath ? `${fieldPath}.current != ${toJSON(value)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterStringInput as SearchOperatorInput<string | number>,\n    label: 'is not',\n    type: 'slugNotEqual',\n  }),\n  slugNotMatches: defineSearchOperator({\n    buttonLabel: 'does not contain',\n    buttonValueComponent: SearchButtonValueString as SearchOperatorButtonValue<string | number>,\n    groqFilter: ({fieldPath, value}) =>\n      value && fieldPath ? `!(${fieldPath}.current match ${toJSON(value)})` : null,\n    initialValue: null,\n    inputComponent: SearchFilterStringInput as SearchOperatorInput<string | number>,\n    label: 'does not contain',\n    type: 'slugNotMatches',\n  }),\n}\n","import {SearchButtonValueString} from '../../components/filters/common/ButtonValue'\nimport {SearchFilterStringInput} from '../../components/filters/filter/inputs/string/String'\nimport {SearchFilterStringListInput} from '../../components/filters/filter/inputs/string/StringList'\nimport {defineSearchOperator, SearchOperatorButtonValue, SearchOperatorInput} from './operatorTypes'\nimport {toJSON} from './operatorUtils'\n\n// @todo: don't manually cast `buttonValueComponent` and `inputComponent` once\n// we understand why `yarn etl` fails with 'Unable to follow symbol' errors\nexport const stringOperators = {\n  stringEqual: defineSearchOperator({\n    buttonLabel: 'is',\n    buttonValueComponent: SearchButtonValueString as SearchOperatorButtonValue<string | number>,\n    groqFilter: ({fieldPath, value}) =>\n      value && fieldPath ? `${fieldPath} == ${toJSON(value)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterStringInput as SearchOperatorInput<string | number>,\n    label: 'is',\n    type: 'stringEqual',\n  }),\n  stringListEqual: defineSearchOperator({\n    buttonLabel: 'is',\n    buttonValueComponent: SearchButtonValueString as SearchOperatorButtonValue<string | number>,\n    groqFilter: ({fieldPath, value}) =>\n      value && fieldPath ? `${fieldPath} == ${toJSON(value)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterStringListInput as SearchOperatorInput<string | number>,\n    label: 'is',\n    type: 'stringListEqual',\n  }),\n  stringListNotEqual: defineSearchOperator({\n    buttonLabel: 'is not',\n    buttonValueComponent: SearchButtonValueString as SearchOperatorButtonValue<string | number>,\n    groqFilter: ({fieldPath, value}) =>\n      value && fieldPath ? `${fieldPath} != ${toJSON(value)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterStringListInput as SearchOperatorInput<string | number>,\n    label: 'is not',\n    type: 'stringListNotEqual',\n  }),\n  stringMatches: defineSearchOperator({\n    buttonLabel: 'contains',\n    buttonValueComponent: SearchButtonValueString as SearchOperatorButtonValue<string | number>,\n    groqFilter: ({fieldPath, value}) =>\n      value && fieldPath ? `${fieldPath} match ${toJSON(value)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterStringInput as SearchOperatorInput<string | number>,\n    label: 'contains',\n    type: 'stringMatches',\n  }),\n  stringNotEqual: defineSearchOperator({\n    buttonLabel: 'is not',\n    buttonValueComponent: SearchButtonValueString as SearchOperatorButtonValue<string | number>,\n    groqFilter: ({fieldPath, value}) =>\n      value && fieldPath ? `${fieldPath} != ${toJSON(value)}` : null,\n    initialValue: null,\n    inputComponent: SearchFilterStringInput as SearchOperatorInput<string | number>,\n    label: 'is not',\n    type: 'stringNotEqual',\n  }),\n  stringNotMatches: defineSearchOperator({\n    buttonLabel: 'does not contain',\n    buttonValueComponent: SearchButtonValueString as SearchOperatorButtonValue<string | number>,\n    groqFilter: ({fieldPath, value}) =>\n      value && fieldPath ? `!(${fieldPath} match ${toJSON(value)})` : null,\n    initialValue: null,\n    inputComponent: SearchFilterStringInput as SearchOperatorInput<string | number>,\n    label: 'does not contain',\n    type: 'stringNotMatches',\n  }),\n}\n","import {arrayOperators} from './arrayOperators'\nimport {assetOperators} from './assetOperators'\nimport {booleanOperators} from './booleanOperators'\nimport {definedOperators} from './defineOperators'\nimport {dateOperators} from './dateOperators'\nimport {numberOperators} from './numberOperators'\nimport {portableTextOperators} from './portableTextOperators'\nimport {referenceOperators} from './referenceOperators'\nimport {slugOperators} from './slugOperators'\nimport {stringOperators} from './stringOperators'\n\nconst searchOperators = {\n  ...arrayOperators,\n  ...assetOperators,\n  ...booleanOperators,\n  ...dateOperators,\n  ...definedOperators,\n  ...numberOperators,\n  ...portableTextOperators,\n  ...referenceOperators,\n  ...slugOperators,\n  ...stringOperators,\n}\n\ntype DefaultOperators = typeof searchOperators\n\n/**\n * @alpha\n */\nexport type SearchOperatorType = keyof DefaultOperators\n\n/**\n * @internal\n */\nexport const operatorDefinitions = Object.values(searchOperators)\n","import type {AssetSource, SchemaTypeDefinition} from '@sanity/types'\nimport type {Template, TemplateResponse} from '../templates'\nimport {DocumentActionComponent} from './document/actions'\nimport {DocumentBadgeComponent} from './document/badges'\nimport type {\n  DocumentLanguageFilterComponent,\n  DocumentLanguageFilterContext,\n  AsyncConfigPropertyReducer,\n  ConfigContext,\n  ConfigPropertyReducer,\n  DocumentActionsContext,\n  DocumentBadgesContext,\n  NewDocumentOptionsContext,\n  ResolveProductionUrlContext,\n  Tool,\n} from './types'\nimport {SearchFilterDefinition} from '../studio/components/navbar/search/definitions/filters'\nimport {SearchOperatorDefinition} from '../studio/components/navbar/search/definitions/operators'\n\nexport const initialDocumentBadges: DocumentBadgeComponent[] = []\n\nexport const initialDocumentActions: DocumentActionComponent[] = []\n\nexport const initialLanguageFilter: DocumentLanguageFilterComponent[] = []\n\nexport const schemaTypesReducer: ConfigPropertyReducer<\n  SchemaTypeDefinition[],\n  Omit<ConfigContext, 'schema' | 'currentUser' | 'client' | 'getClient'>\n> = (prev, {schema}, context) => {\n  const schemaTypes = schema?.types\n\n  if (!schemaTypes) return prev\n  if (typeof schemaTypes === 'function') return schemaTypes(prev, context)\n  if (Array.isArray(schemaTypes)) return [...prev, ...schemaTypes]\n\n  throw new Error(\n    `Expected \\`schema.types\\` to an array or a function but found ${typeof schemaTypes} instead.`\n  )\n}\n\nexport const resolveProductionUrlReducer: AsyncConfigPropertyReducer<\n  string | undefined,\n  ResolveProductionUrlContext\n> = async (prev, {document}, context) => {\n  const resolveProductionUrl = document?.productionUrl\n  // the redundant await is useful for error logging because the error is caught\n  // in this stack vs somewhere down stream\n  // eslint-disable-next-line no-return-await\n  if (resolveProductionUrl) return await resolveProductionUrl(prev, context)\n  return prev\n}\n\nexport const toolsReducer: ConfigPropertyReducer<Tool[], ConfigContext> = (\n  prev,\n  {tools},\n  context\n) => {\n  if (!tools) return prev\n  if (typeof tools === 'function') return tools(prev, context)\n  if (Array.isArray(tools)) return [...prev, ...tools]\n\n  throw new Error(`Expected \\`tools\\` to an array or a function but found ${typeof tools} instead.`)\n}\n\n// we will need this when we ressurect user config for search\n/*export const searchFilterReducer: ConfigPropertyReducer<\n  SearchFilterDefinition<string>[],\n  ConfigContext\n> = (prev, {search}, context) => {\n  const filters = search?.filters\n  if (!filters) return prev\n  if (typeof filters === 'function') return filters(prev, context)\n  if (Array.isArray(filters)) return [...prev, ...filters]\n\n  throw new Error(\n    `Expected \\`filters\\` to be an array or a function but found ${typeof filters} instead.`\n  )\n}\n\nexport const searchOperatorsReducer: ConfigPropertyReducer<\n  SearchOperatorDefinition[],\n  ConfigContext\n> = (prev, {search}, context) => {\n  const operators = search?.operators\n  if (!operators) return prev\n  if (typeof operators === 'function') return operators(prev, context)\n  if (Array.isArray(operators)) return [...prev, ...operators]\n\n  throw new Error(\n    `Expected \\`operators\\` to be an array or a function but found ${typeof operators} instead.`\n  )\n}*/\n\nexport const schemaTemplatesReducer: ConfigPropertyReducer<Template[], ConfigContext> = (\n  prev,\n  {schema},\n  context\n) => {\n  const schemaTemplates = schema?.templates\n  if (!schemaTemplates) return prev\n  if (typeof schemaTemplates === 'function') return schemaTemplates(prev, context)\n  if (Array.isArray(schemaTemplates)) return [...prev, ...schemaTemplates]\n\n  throw new Error(\n    `Expected \\`schema.templates\\` to an array or a function but found ${typeof schemaTemplates} instead.`\n  )\n}\n\nexport const documentBadgesReducer: ConfigPropertyReducer<\n  DocumentBadgeComponent[],\n  DocumentBadgesContext\n> = (prev, {document}, context) => {\n  const documentBadges = document?.badges\n  if (!documentBadges) return prev\n\n  if (typeof documentBadges === 'function') return documentBadges(prev, context)\n  if (Array.isArray(documentBadges)) return [...prev, ...documentBadges]\n\n  throw new Error(\n    `Expected \\`document.actions\\` to an array or a function but found ${typeof documentBadges} instead.`\n  )\n}\n\nexport const documentActionsReducer: ConfigPropertyReducer<\n  DocumentActionComponent[],\n  DocumentActionsContext\n> = (prev, {document}, context) => {\n  const documentActions = document?.actions\n  if (!documentActions) return prev\n\n  if (typeof documentActions === 'function') return documentActions(prev, context)\n  if (Array.isArray(documentActions)) return [...prev, ...documentActions]\n\n  throw new Error(\n    `Expected \\`document.actions\\` to an array or a function but found ${typeof documentActions} instead.`\n  )\n}\n\nexport const newDocumentOptionsResolver: ConfigPropertyReducer<\n  TemplateResponse[],\n  NewDocumentOptionsContext\n> = (prev, {document}, context) => {\n  const resolveNewDocumentOptions = document?.newDocumentOptions\n  if (!resolveNewDocumentOptions) return prev\n\n  if (typeof resolveNewDocumentOptions !== 'function') {\n    throw new Error(\n      `Expected \\`document.resolveNewDocumentOptions\\` a function but found ${typeof resolveNewDocumentOptions} instead.`\n    )\n  }\n\n  return resolveNewDocumentOptions(prev, context)\n}\n\nexport const fileAssetSourceResolver: ConfigPropertyReducer<AssetSource[], ConfigContext> = (\n  prev,\n  {form},\n  context\n) => {\n  const assetSources = form?.file?.assetSources\n  if (!assetSources) return prev\n\n  if (typeof assetSources === 'function') return assetSources(prev, context)\n  if (Array.isArray(assetSources)) return [...prev, ...assetSources]\n\n  throw new Error(\n    `Expected \\`file.assetSources\\` to an array or a function but found ${typeof assetSources} instead.`\n  )\n}\n\nexport const imageAssetSourceResolver: ConfigPropertyReducer<AssetSource[], ConfigContext> = (\n  prev,\n  {form},\n  context\n) => {\n  const assetSources = form?.image?.assetSources\n  if (!assetSources) return prev\n\n  if (typeof assetSources === 'function') return assetSources(prev, context)\n  if (Array.isArray(assetSources)) return [...prev, ...assetSources]\n\n  throw new Error(\n    `Expected \\`image.assetSources\\` to an array or a function but found ${typeof assetSources} instead.`\n  )\n}\n\n/**\n * @internal\n */\nexport const documentLanguageFilterReducer: ConfigPropertyReducer<\n  DocumentLanguageFilterComponent[],\n  DocumentLanguageFilterContext\n> = (prev, {document}, context) => {\n  const resolveDocumentLanguageFilter = document?.unstable_languageFilter\n  if (!resolveDocumentLanguageFilter) return prev\n\n  if (typeof resolveDocumentLanguageFilter === 'function')\n    return resolveDocumentLanguageFilter(prev, context)\n\n  if (Array.isArray(resolveDocumentLanguageFilter))\n    return [...prev, ...resolveDocumentLanguageFilter]\n\n  throw new Error(\n    `Expected \\`document.actions\\` to an array or a function but found ${typeof resolveDocumentLanguageFilter} instead.`\n  )\n}\n","import {isRecord} from '../util'\n\n/** @internal */\nexport interface ConfigPropertyErrorOptions {\n  propertyName: string\n  path: string[]\n  cause: unknown\n}\n\n/** @internal */\nexport class ConfigPropertyError extends Error {\n  propertyName: string\n  path: string[]\n  cause: unknown\n\n  constructor({propertyName, path, cause}: ConfigPropertyErrorOptions) {\n    const message =\n      isRecord(cause) && typeof cause?.message === 'string' ? `: ${cause.message}` : ''\n\n    super(\n      `An error occurred while resolving \\`${propertyName}\\` from ${path.join(' > ')}${message}`\n    )\n\n    this.propertyName = propertyName\n    this.cause = cause\n    this.path = path\n  }\n}\n","import {PluginOptions} from './types'\n\n/**\n * @internal\n *\n * This function flattens the config tree into a list of configs in the order they should be applied.\n */\nexport const flattenConfig = (\n  {plugins = [], ...currentConfig}: PluginOptions,\n  path: string[]\n): Array<{config: PluginOptions; path: string[]}> => {\n  // The APIs used at the root config level\n  const rootConfig = {config: currentConfig, path: [...path, currentConfig.name]}\n\n  // An array with the APIs used in plugins\n  const allPlugins = plugins.flatMap((plugin) =>\n    flattenConfig(plugin, [...path, currentConfig.name])\n  )\n\n  const resolved = [...allPlugins, rootConfig]\n\n  return resolved\n}\n","import {ConfigPropertyError} from './ConfigPropertyError'\nimport {flattenConfig} from './flattenConfig'\nimport {PluginOptions, ConfigPropertyReducer, AsyncConfigPropertyReducer} from './types'\n\ninterface ResolveConfigPropertyOptions<TValue, TContext> {\n  propertyName: string\n  config: PluginOptions\n  context: TContext\n  initialValue: TValue\n  reducer: ConfigPropertyReducer<TValue, TContext>\n}\ninterface AsyncResolveConfigPropertyOptions<TValue, TContext> {\n  propertyName: string\n  config: PluginOptions\n  context: TContext\n  initialValue: TValue\n  asyncReducer: AsyncConfigPropertyReducer<TValue, TContext>\n}\n\nexport function resolveConfigProperty<TValue, TContext>(\n  options: ResolveConfigPropertyOptions<TValue, TContext>\n): TValue\nexport function resolveConfigProperty<TValue, TContext>(\n  options: AsyncResolveConfigPropertyOptions<TValue, TContext>\n): Promise<TValue>\nexport function resolveConfigProperty<TValue, TContext>({\n  config: inputConfig,\n  context,\n  initialValue,\n  propertyName,\n  ...reducers\n}:\n  | ResolveConfigPropertyOptions<TValue, TContext>\n  | AsyncResolveConfigPropertyOptions<TValue, TContext>): TValue | Promise<TValue> {\n  const configs = flattenConfig(inputConfig, [])\n\n  if ('reducer' in reducers) {\n    return configs.reduce((acc, {config, path}) => {\n      try {\n        return reducers.reducer(acc, config, context)\n      } catch (e) {\n        throw new ConfigPropertyError({\n          propertyName,\n          path: path,\n          cause: e,\n        })\n      }\n    }, initialValue)\n  }\n\n  const reducer = reducers.asyncReducer\n  return (async () => {\n    let current = initialValue\n    for (const {config, path} of configs) {\n      try {\n        current = await reducer(current, config, context)\n      } catch (e) {\n        throw new ConfigPropertyError({\n          propertyName,\n          path,\n          cause: e,\n        })\n      }\n    }\n    return current\n  })()\n}\n","import {isRecord} from '../util'\n\n/** @internal */\nexport interface ConfigResolutionErrorOptions {\n  name: string\n  type: string\n  causes: Array<ConfigResolutionError | Error | unknown>\n}\n\n/** @internal */\nexport class ConfigResolutionError extends Error {\n  name: string\n  type: string\n  causes: unknown[]\n\n  constructor({causes, name, type}: ConfigResolutionErrorOptions) {\n    const messages = causes\n      .filter(Boolean)\n      .map((cause) =>\n        isRecord(cause) && typeof cause?.message === 'string' ? cause.message : String(cause)\n      )\n\n    super(\n      `Could not resolve ${type}${name ? ` \\`${name}\\`` : ''}:\\n${messages\n        .map((message) => `\\t- ${message}`)\n        .join('\\n')}\\n\\n`\n    )\n\n    this.name = name\n    this.causes = causes\n    this.type = type\n  }\n}\n","import {Schema} from '@sanity/types'\n\n/** @internal */\n// TODO: consider removing this error in favor of the `ConfigResolutionError`\nexport class SchemaError extends Error {\n  constructor(public schema: Schema) {\n    super('SchemaError')\n  }\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {COLOR_HUES, hues} from '@sanity/color'\nimport {darken, lighten, hasBadContrast, readableColor} from 'color2k'\n\nfunction pseudoRandomNumber(seed: string) {\n  const hashCode = seed\n    .split('')\n    // eslint-disable-next-line no-bitwise\n    .reduce((prevHash, currVal) => ((prevHash << 5) - prevHash + currVal.charCodeAt(0)) | 0, 0)\n  return Math.abs((hashCode * 16807) % 2147483647) / 2147483647\n}\n\nconst SvgText = styled.text`\n  font-family: ${({theme}) => theme.sanity.fonts.heading.family};\n  font-weight: ${({theme}) => theme.sanity.fonts.heading.weights.bold};\n  font-size: 16px;\n  transform: translateY(1px);\n`\n\n/**\n * Creates an icon element based on the input title\n */\nexport function createDefaultIcon(title: string, subtitle: string) {\n  const rng1 = pseudoRandomNumber(`${title} ${subtitle}`)\n\n  const huesWithoutGray = COLOR_HUES.filter((hue) => hue !== 'gray')\n  const colorHue = huesWithoutGray[Math.floor(rng1 * huesWithoutGray.length)]\n  const possibleTints = ['300', '400', '500', '600', '700'] as const\n  const rng2 = pseudoRandomNumber(rng1.toString())\n  const tint = possibleTints[Math.floor(rng2 * possibleTints.length)]\n  const color = hues[colorHue][tint].hex\n\n  const letters = title\n    // split by whitespace\n    .split(/\\s/g)\n    // replace all non-word characters with empty string\n    .map((word) => word.replace(/\\\\W/g, ''))\n    // remove empty strings\n    .filter(Boolean)\n    // take the first two words\n    .slice(0, 2)\n    // grab the first letter and make it upper case\n    .map((i) => i.charAt(0).toUpperCase())\n\n  const darkened = darken(color, 0.4)\n  const lightened = lighten(color, 0.4)\n\n  /* eslint-disable no-negated-condition */\n  // eslint-disable-next-line no-nested-ternary\n  const textColor = !hasBadContrast(color, 'readable', darkened)\n    ? darkened\n    : !hasBadContrast(color, 'readable', lightened)\n    ? lightened\n    : readableColor(color)\n  /* eslint-enable no-negated-condition */\n\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\">\n      <rect width={32} height={32} rx={2} fill={color} />\n      <SvgText\n        x=\"50%\"\n        y=\"50%\"\n        textAnchor=\"middle\"\n        alignmentBaseline=\"middle\"\n        dominantBaseline=\"middle\"\n        fill={textColor}\n      >\n        {letters}\n      </SvgText>\n    </svg>\n  )\n}\n","/* eslint-disable max-nested-callbacks */\n\nimport {SanityClient} from '@sanity/client'\nimport {map, shareReplay} from 'rxjs/operators'\nimport {CurrentUser, Schema} from '@sanity/types'\nimport {studioTheme} from '@sanity/ui'\nimport {startCase} from 'lodash'\nimport {fromUrl} from '@sanity/bifur-client'\nimport {createElement, isValidElement} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {createSchema} from '../schema'\nimport {AuthStore, createAuthStore} from '../store/_legacy'\nimport {FileSource, ImageSource} from '../form/studio/assetSource'\nimport {InitialValueTemplateItem, Template, TemplateResponse} from '../templates'\nimport {isNonNullable} from '../util'\nimport {validateWorkspaces} from '../studio'\nimport {filterDefinitions} from '../studio/components/navbar/search/definitions/defaultFilters'\nimport {operatorDefinitions} from '../studio/components/navbar/search/definitions/operators/defaultOperators'\nimport {\n  Config,\n  PreparedConfig,\n  SingleWorkspace,\n  Source,\n  SourceClientOptions,\n  SourceOptions,\n  WorkspaceOptions,\n  WorkspaceSummary,\n} from './types'\nimport {\n  documentActionsReducer,\n  documentBadgesReducer,\n  documentLanguageFilterReducer,\n  fileAssetSourceResolver,\n  imageAssetSourceResolver,\n  initialDocumentActions,\n  initialDocumentBadges,\n  initialLanguageFilter,\n  newDocumentOptionsResolver,\n  resolveProductionUrlReducer,\n  schemaTemplatesReducer,\n  schemaTypesReducer,\n  toolsReducer,\n} from './configPropertyReducers'\nimport {resolveConfigProperty} from './resolveConfigProperty'\nimport {ConfigResolutionError} from './ConfigResolutionError'\nimport {SchemaError} from './SchemaError'\nimport {createDefaultIcon} from './createDefaultIcon'\n\ntype InternalSource = WorkspaceSummary['__internal']['sources'][number]\n\nfunction normalizeIcon(\n  icon: React.ComponentType | React.ElementType | undefined,\n  title: string,\n  subtitle = ''\n): JSX.Element {\n  if (isValidElementType(icon)) return createElement(icon)\n  if (isValidElement(icon)) return icon\n  return createDefaultIcon(title, subtitle)\n}\n\n/**\n * Takes in a config (created from the `defineConfig` function) and returns\n * an array of `WorkspaceSummary`. Note: this only partially resolves a config.\n *\n * For usage inside the Studio, it's preferred to pull the pre-resolved\n * workspaces and sources via `useWorkspace` or `useSource`. For usage outside\n * the Studio or for testing, use `resolveConfig`.\n *\n * @internal\n */\nexport function prepareConfig(config: Config): PreparedConfig {\n  const workspaceOptions: WorkspaceOptions[] | [SingleWorkspace] = Array.isArray(config)\n    ? config\n    : [config]\n\n  try {\n    validateWorkspaces({workspaces: workspaceOptions})\n  } catch (e) {\n    throw new ConfigResolutionError({\n      name: '',\n      type: 'workspace',\n      causes: [e.message],\n    })\n  }\n\n  const workspaces = workspaceOptions.map(\n    ({unstable_sources: nestedSources = [], ...rootSource}): WorkspaceSummary => {\n      const sources = [rootSource as SourceOptions, ...nestedSources]\n\n      const resolvedSources = sources.map((source): InternalSource => {\n        const projectId = source.projectId\n        const dataset = source.dataset\n\n        const auth = source.auth || createAuthStore({dataset, projectId})\n\n        let schemaTypes\n        try {\n          schemaTypes = resolveConfigProperty({\n            propertyName: 'schema.types',\n            config: source,\n            context: {projectId, dataset},\n            initialValue: [],\n            reducer: schemaTypesReducer,\n          })\n        } catch (e) {\n          throw new ConfigResolutionError({\n            name: source.name,\n            type: 'source',\n            causes: [e],\n          })\n        }\n\n        const schema = createSchema({\n          name: source.name,\n          types: schemaTypes,\n        })\n\n        const schemaValidationProblemGroups = schema._validation\n        const schemaErrors = schemaValidationProblemGroups?.filter((msg) =>\n          msg.problems.some((p) => p.severity === 'error')\n        )\n\n        if (schemaValidationProblemGroups && schemaErrors?.length) {\n          // TODO: consider using the `ConfigResolutionError`\n          throw new SchemaError(schema)\n        }\n\n        const source$ = auth.state.pipe(\n          map(({client, authenticated, currentUser}) => {\n            return resolveSource({\n              config: source,\n              client,\n              currentUser,\n              schema,\n              authenticated,\n              auth,\n            })\n          }),\n          shareReplay(1)\n        )\n\n        return Object.assign(source$, {\n          name: source.name,\n          projectId: source.projectId,\n          dataset: source.dataset,\n          title: source.title || startCase(source.name),\n          auth,\n          schema,\n        })\n      })\n\n      const title = rootSource.title || startCase(rootSource.name)\n\n      const workspaceSummary: WorkspaceSummary = {\n        type: 'workspace-summary',\n        auth: resolvedSources[0].auth,\n        basePath: rootSource.basePath || '/',\n        dataset: rootSource.dataset,\n        schema: resolvedSources[0].schema,\n        icon: normalizeIcon(\n          rootSource.icon,\n          title,\n          `${rootSource.projectId} ${rootSource.dataset}`\n        ),\n        name: rootSource.name || 'default',\n        projectId: rootSource.projectId,\n        theme: rootSource.theme || studioTheme,\n        title,\n        subtitle: rootSource.subtitle,\n        __internal: {\n          sources: resolvedSources,\n        },\n      }\n\n      return workspaceSummary\n    }\n  )\n\n  return {type: 'prepared-config', workspaces}\n}\n\ninterface ResolveSourceOptions {\n  config: SourceOptions\n  schema: Schema\n  client: SanityClient\n  currentUser: CurrentUser | null\n  authenticated: boolean\n  auth: AuthStore\n}\n\nfunction getBifurClient(client: SanityClient, auth: AuthStore) {\n  const bifurVersionedClient = client.withConfig({apiVersion: '2022-06-30'})\n  const dataset = bifurVersionedClient.config().dataset\n\n  const url = bifurVersionedClient.getUrl(`/socket/${dataset}`).replace(/^http/, 'ws')\n\n  const options = auth.token ? {token$: auth.token} : {}\n  return fromUrl(url, options)\n}\n\nfunction resolveSource({\n  config,\n  client,\n  currentUser,\n  schema,\n  authenticated,\n  auth,\n}: ResolveSourceOptions): Source {\n  const {dataset, projectId} = config\n  const bifur = getBifurClient(client, auth)\n  const errors: unknown[] = []\n  const clients: Record<string, SanityClient> = {}\n  const getClient = (options: SourceClientOptions): SanityClient => {\n    if (!options || !options.apiVersion) {\n      throw new Error('Missing required `apiVersion` option')\n    }\n\n    if (!clients[options.apiVersion]) {\n      clients[options.apiVersion] = client.withConfig(options)\n    }\n\n    return clients[options.apiVersion]\n  }\n\n  const context = {\n    client,\n    getClient,\n    currentUser,\n    dataset,\n    projectId,\n    schema,\n  }\n\n  // <TEMPORARY UGLY HACK TO PRINT DEPRECATION WARNINGS ON USE>\n  /* eslint-disable no-proto */\n  const wrappedClient = client as any\n  context.client = [...Object.keys(client), ...Object.keys(wrappedClient.__proto__)].reduce(\n    (acc, key) => {\n      const original = Object.hasOwnProperty.call(client, key)\n        ? wrappedClient[key]\n        : wrappedClient.__proto__[key]\n\n      return Object.defineProperty(acc, key, {\n        get() {\n          console.warn(\n            '`configContext.client` is deprecated and will be removed in the next release! Use `context.getClient({apiVersion: \"2021-06-07\"})` instead'\n          )\n          return original\n        },\n      })\n    },\n    {}\n  ) as any as SanityClient\n  /* eslint-enable no-proto */\n  // </TEMPORARY UGLY HACK TO PRINT DEPRECATION WARNINGS ON USE>\n\n  let templates!: Source['templates']\n  try {\n    templates = resolveConfigProperty({\n      config,\n      context,\n      propertyName: 'schema.templates',\n      reducer: schemaTemplatesReducer,\n      initialValue: schema\n        .getTypeNames()\n        .filter((typeName) => !/^sanity\\./.test(typeName))\n        .map((typeName) => schema.get(typeName))\n        .filter(isNonNullable)\n        .filter((schemaType) => schemaType.type?.name === 'document')\n        .map((schemaType) => {\n          const template: Template = {\n            id: schemaType.name,\n            schemaType: schemaType.name,\n            title: schemaType.title || schemaType.name,\n            icon: schemaType.icon,\n            value: schemaType.initialValue || {_type: schemaType.name},\n          }\n\n          return template\n        }),\n    })\n    // TODO: validate templates\n    // TODO: validate that each one has a unique template ID\n  } catch (e) {\n    errors.push(e)\n  }\n\n  let tools!: Source['tools']\n  try {\n    tools = resolveConfigProperty({\n      config,\n      context,\n      initialValue: [],\n      propertyName: 'tools',\n      reducer: toolsReducer,\n    })\n  } catch (e) {\n    errors.push(e)\n  }\n\n  // In this case we want to throw an error because it is not possible to have\n  // a tool with the name \"tool\" due to logic that happens in the router.\n  if (tools.some(({name}) => name === 'tool')) {\n    throw new Error('A tool cannot have the name \"tool\". Please enter a different name.')\n  }\n\n  const initialTemplatesResponses = templates\n    // filter out the ones with parameters to fill\n    .filter((template) => !template.parameters?.length)\n    .map(\n      (template): TemplateResponse => ({\n        templateId: template.id,\n        description: template.description,\n        icon: template.icon,\n        title: template.title,\n      })\n    )\n\n  const templateMap = templates.reduce((acc, template) => {\n    acc.set(template.id, template)\n    return acc\n  }, new Map<string, Template>())\n\n  // TODO: extract this function\n  const resolveNewDocumentOptions: Source['document']['resolveNewDocumentOptions'] = (\n    creationContext\n  ) => {\n    const {schemaType: schemaTypeName} = creationContext\n\n    const templateResponses = resolveConfigProperty({\n      config,\n      context: {...context, creationContext},\n      initialValue: initialTemplatesResponses,\n      propertyName: 'document.resolveNewDocumentOptions',\n      reducer: newDocumentOptionsResolver,\n    })\n\n    const templateErrors: unknown[] = []\n\n    // TODO: validate template responses\n    // ensure there is a matching template per each one\n    if (templateErrors.length) {\n      throw new ConfigResolutionError({\n        name: config.name,\n        // TODO: figure out this name\n        type: 'source',\n        causes: templateErrors,\n      })\n    }\n\n    return (\n      templateResponses\n        // take the template responses and transform them into the formal\n        // `InitialValueTemplateItem`\n        .map((response, index): InitialValueTemplateItem => {\n          const template = templateMap.get(response.templateId)\n          if (!template) {\n            throw new Error(`Could not find template with ID \\`${response.templateId}\\``)\n          }\n\n          const schemaType = schema.get(template.schemaType)\n\n          if (!schemaType) {\n            throw new Error(\n              `Could not find matching schema type \\`${template.schemaType}\\` for template \\`${template.id}\\``\n            )\n          }\n\n          const title = response.title || template.title\n          // Don't show the type name as subtitle if it's the same as the template name\n          const defaultSubtitle = schemaType?.title === title ? undefined : schemaType?.title\n\n          return {\n            id: `${response.templateId}-${index}`,\n            templateId: response.templateId,\n            type: 'initialValueTemplateItem',\n            title,\n            subtitle: response.subtitle || defaultSubtitle,\n            description: response.description || template.description,\n            icon: response.icon || template.icon || schemaType?.icon,\n            initialDocumentId: response.initialDocumentId,\n            parameters: response.parameters,\n            schemaType: template.schemaType,\n          }\n        })\n        .filter((item) => {\n          // if we are in a creationContext where there is no schema type,\n          // then keep everything\n          if (!schemaTypeName) return true\n\n          // else only keep the `schemaType`s that match the creationContext\n          return schemaTypeName === templateMap.get(item.templateId)?.schemaType\n        })\n    )\n  }\n\n  let staticInitialValueTemplateItems!: InitialValueTemplateItem[]\n  try {\n    staticInitialValueTemplateItems = resolveNewDocumentOptions({type: 'global'})\n  } catch (e) {\n    errors.push(e)\n  }\n\n  if (errors.length) {\n    throw new ConfigResolutionError({\n      name: config.name,\n      type: 'source',\n      causes: errors,\n    })\n  }\n\n  const source: Source = {\n    type: 'source',\n    name: config.name,\n    title: config.title || startCase(config.name),\n    schema,\n    getClient,\n    dataset,\n    projectId,\n    tools,\n    currentUser,\n    authenticated,\n    templates,\n    auth,\n    document: {\n      actions: (partialContext) =>\n        resolveConfigProperty({\n          config,\n          context: {...context, ...partialContext},\n          initialValue: initialDocumentActions,\n          propertyName: 'document.actions',\n          reducer: documentActionsReducer,\n        }),\n      badges: (partialContext) =>\n        resolveConfigProperty({\n          config,\n          context: {...context, ...partialContext},\n          initialValue: initialDocumentBadges,\n          propertyName: 'document.badges',\n          reducer: documentBadgesReducer,\n        }),\n      resolveProductionUrl: (partialContext) =>\n        resolveConfigProperty({\n          config,\n          context: {...context, ...partialContext},\n          initialValue: undefined,\n          propertyName: 'resolveProductionUrl',\n          asyncReducer: resolveProductionUrlReducer,\n        }),\n      resolveNewDocumentOptions,\n      unstable_languageFilter: (partialContext) =>\n        resolveConfigProperty({\n          config,\n          context: {...context, ...partialContext},\n          initialValue: initialLanguageFilter,\n          propertyName: 'document.unstable_languageFilter',\n          reducer: documentLanguageFilterReducer,\n        }),\n    },\n    form: {\n      file: {\n        assetSources: resolveConfigProperty({\n          config,\n          context,\n          initialValue: [FileSource],\n          propertyName: 'formBuilder.file.assetSources',\n          reducer: fileAssetSourceResolver,\n        }),\n        directUploads:\n          // TODO: consider refactoring this to `noDirectUploads` or similar\n          // default value for this is `true`\n          config.form?.file?.directUploads === undefined ? true : config.form.file.directUploads,\n      },\n      image: {\n        assetSources: resolveConfigProperty({\n          config,\n          context,\n          initialValue: [ImageSource],\n          propertyName: 'formBuilder.image.assetSources',\n          reducer: imageAssetSourceResolver,\n        }),\n        directUploads:\n          // TODO: consider refactoring this to `noDirectUploads` or similar\n          // default value for this is `true`\n          config.form?.file?.directUploads === undefined ? true : config.form.file.directUploads,\n      },\n    },\n\n    search: {\n      filters: filterDefinitions,\n      operators: operatorDefinitions,\n      // we will use this when we add search config to PluginOptions\n      /*filters: resolveConfigProperty({\n        config,\n        context: context,\n        initialValue: filterDefinitions,\n        propertyName: 'search.filters',\n        reducer: searchFilterReducer,\n      }),\n      operators: resolveConfigProperty({\n        config,\n        context: context,\n        initialValue: operatorDefinitions as SearchOperatorDefinition[],\n        propertyName: 'search.operators',\n        reducer: searchOperatorsReducer,\n      }),*/\n    },\n\n    __internal: {\n      bifur,\n      staticInitialValueTemplateItems,\n      options: config,\n    },\n  }\n\n  return source\n}\n","import {combineLatest, Observable} from 'rxjs'\nimport {first, map} from 'rxjs/operators'\nimport {CurrentUser} from '@sanity/types'\nimport {SanityClient} from '@sanity/client'\nimport {createMockAuthStore} from '../store'\nimport {Config, SingleWorkspace, Source, Workspace, SchemaPluginOptions} from './types'\nimport {prepareConfig} from './prepareConfig'\n\n/**\n * Fully resolves a configuration including subscribing to all sources and\n * workspaces from a config. Returns an `Observable` that waits till all sources\n * emit once before emitting an array of fully resolved sources and workspaces.\n *\n * @internal\n */\nexport function resolveConfig(config: Config): Observable<Workspace[]> {\n  const {workspaces} = prepareConfig(config)\n\n  return combineLatest(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    workspaces.flatMap((workspaceSummary) =>\n      combineLatest(workspaceSummary.__internal.sources.map(({source}) => source)).pipe(\n        map(\n          (sources): Workspace => ({\n            ...workspaceSummary,\n            ...sources[0],\n            unstable_sources: sources,\n            type: 'workspace',\n          })\n        )\n      )\n    )\n  )\n}\n\n/** @internal */\nexport type CreateWorkspaceFromConfigOptions =\n  | SingleWorkspace\n  | (SingleWorkspace & {\n      currentUser: CurrentUser\n      getClient: (options: {apiVersion: string}) => SanityClient\n      schema?: SchemaPluginOptions\n    })\n\n/**\n * PRIMARILY FOR TESTING PURPOSES.\n *\n * This will create a fully resolved workspace from a config and optionally\n * allows a `client` and `currentUser` override. This exists primarily for\n * testing purposes. If you need to use a workspace, we recommend using the\n * `useWorkspace` hook to grab the fully resolved workspace from the\n * `StudioProvider`\n *\n * @internal\n */\nexport async function createWorkspaceFromConfig(\n  options: CreateWorkspaceFromConfigOptions\n): Promise<Workspace> {\n  const client = 'getClient' in options ? options.getClient({apiVersion: '2022-09-09'}) : undefined\n  const [workspace] = await resolveConfig({\n    ...options,\n    ...(client &&\n      'currentUser' in options && {\n        auth: createMockAuthStore({...options, client}),\n      }),\n  })\n    .pipe(first())\n    .toPromise()\n\n  return workspace\n}\n\n/**\n * PRIMARILY FOR TESTING PURPOSES.\n *\n * This will create a fully resolved source from a config and optionally\n * allows a `client` and `currentUser` override. This exists primarily for\n * testing purposes. If you need to use a source, we recommend using the\n * `useSource` hook to grab the fully resolved source from the `StudioProvider`\n *\n * @internal\n */\nexport async function createSourceFromConfig(\n  options: CreateWorkspaceFromConfigOptions\n): Promise<Source> {\n  const workspace = await createWorkspaceFromConfig(options)\n  return workspace.unstable_sources[0]\n}\n","import {useMemo} from 'react'\nimport type {Source, ConfigContext} from './types'\n\n/**\n * Reduce a {@link Source} down to a {@link ConfigContext}, memoizing using `React.useMemo`\n *\n * @param source - Source to convert\n * @returns A config context containing only the defined properties of that interface\n * @internal\n */\nexport function useConfigContextFromSource(source: Source): ConfigContext {\n  const {projectId, dataset, schema, currentUser, getClient} = source\n  return useMemo(() => {\n    return {projectId, dataset, schema, currentUser, getClient}\n  }, [projectId, dataset, schema, currentUser, getClient])\n}\n\n/**\n * Reduce a {@link Source} down to a {@link ConfigContext}, without memoization - use for non-react contexts\n *\n * @param source - Source to convert\n * @returns A config context containing only the defined properties of that interface\n * @internal\n */\nexport function getConfigContextFromSource(source: Source): ConfigContext {\n  const {projectId, dataset, schema, currentUser, getClient} = source\n  return {projectId, dataset, schema, currentUser, getClient}\n}\n","import {Text} from '@sanity/ui'\nimport React from 'react'\nimport {LogoProps} from '../../../config'\n\n/** @beta */\nexport function StudioLogo(props: LogoProps) {\n  const {title} = props\n\n  return <Text weight=\"bold\">{title}</Text>\n}\n","import React, {createContext, useContext, useEffect, useMemo, useState} from 'react'\nimport {studioTheme, ThemeColorSchemeKey, ThemeProvider, usePrefersDark} from '@sanity/ui'\n\n/** @internal */\nexport const ColorSchemeContext = createContext<{\n  scheme: ThemeColorSchemeKey\n  setScheme: (colorScheme: ThemeColorSchemeKey) => void\n} | null>(null)\n\n/** @internal */\nexport interface ColorSchemeProviderProps {\n  children: React.ReactNode\n  onSchemeChange?: (nextScheme: ThemeColorSchemeKey) => void\n  scheme?: ThemeColorSchemeKey\n}\n\n/** @internal */\nexport function ColorSchemeProvider({\n  children,\n  onSchemeChange,\n  scheme: schemeProp,\n}: ColorSchemeProviderProps) {\n  const prefersDark = usePrefersDark()\n  const [scheme, setScheme] = useState<ThemeColorSchemeKey>(schemeProp || 'light')\n\n  // if the preferred color scheme changes, then react to this change\n  useEffect(() => {\n    const nextScheme = prefersDark ? 'dark' : 'light'\n    setScheme(nextScheme)\n    onSchemeChange?.(nextScheme)\n  }, [onSchemeChange, prefersDark])\n\n  const colorScheme = useMemo(() => ({scheme, setScheme}), [scheme])\n\n  return (\n    <ColorSchemeContext.Provider value={colorScheme}>\n      {/* Note: this is a fallback ThemeProvider that is for any components */}\n      {/* that may render before the StudioThemeProvider renders. this is */}\n      {/* required because the StudioThemeProvider has a dependence on the */}\n      {/* active workspace provided via the ActiveWorkspaceMatcher */}\n      <ThemeProvider scheme={scheme} theme={studioTheme} tone=\"transparent\">\n        {children}\n      </ThemeProvider>\n    </ColorSchemeContext.Provider>\n  )\n}\n\n/** @internal */\nexport function useColorScheme() {\n  const value = useContext(ColorSchemeContext)\n  if (!value) throw new Error('Could not find `colorScheme` context')\n  return value\n}\n","import {createContext} from 'react'\nimport {WorkspaceSummary} from '../../config'\n\n/** @internal */\nexport type WorkspacesContextValue = WorkspaceSummary[]\n\n/** @internal */\nexport const WorkspacesContext = createContext<WorkspacesContextValue | null>(null)\n","import React, {useMemo} from 'react'\nimport {Config, prepareConfig} from '../../config'\nimport {WorkspacesContext} from './WorkspacesContext'\n\n/** @internal */\nexport interface WorkspacesProviderProps {\n  config: Config\n  children: React.ReactNode\n}\n\n/** @internal */\nexport function WorkspacesProvider({config, children}: WorkspacesProviderProps) {\n  const {workspaces} = useMemo(() => prepareConfig(config), [config])\n  return <WorkspacesContext.Provider value={workspaces}>{children}</WorkspacesContext.Provider>\n}\n","import {WorkspaceLike} from './types'\n\n/**\n * Gets a printable identifer for the workspace - either the name, or the index\n * and any potential title set for it\n *\n * @param workspace - The workspace to get the indentifier for\n * @param index - The index at which the workspace appeared in the source array\n * @returns Printable string (eg `intranet`, or `at index 5 (titled \"Intranet\")`)\n * @internal\n */\nexport function getWorkspaceIdentifier({name, title}: WorkspaceLike, index: number): string {\n  if (typeof name === 'string' && name.trim().length > 0) {\n    return name\n  }\n\n  return getNamelessWorkspaceIdentifier(title, index)\n}\n\n/** @internal */\nexport function getNamelessWorkspaceIdentifier(title: string | undefined, index: number): string {\n  const withTitle =\n    typeof title === 'string' && title.trim().length > 0 ? ` (titled \"${title}\")` : ''\n  return `at index ${index}${withTitle}`\n}\n","import {useContext} from 'react'\nimport {WorkspaceSummary} from '../../config'\nimport {WorkspacesContext} from './WorkspacesContext'\n\n/** @internal */\nexport function useWorkspaces(): WorkspaceSummary[] {\n  const workspaces = useContext(WorkspacesContext)\n  if (!workspaces) throw new Error('Could not find `workspaces` context')\n  return workspaces\n}\n","import {getWorkspaceIdentifier} from './helpers'\nimport type {WorkspaceLike} from './types'\n\nexport interface WorkspaceValidationErrorOptions {\n  workspace: WorkspaceLike\n  index: number\n}\n\n/**\n * Thrown on workspace validation errors. Includes an identifier that is either the name of\n * the workspace, or in the case of a missing or invalid name, an index and a potential title\n */\nexport class WorkspaceValidationError extends Error {\n  index?: number\n  identifier?: string\n\n  constructor(message: string, options?: WorkspaceValidationErrorOptions) {\n    super(message)\n    this.index = options?.index\n    this.identifier = options?.workspace && getWorkspaceIdentifier(options.workspace, options.index)\n  }\n}\n","import {getWorkspaceIdentifier, getNamelessWorkspaceIdentifier} from './helpers'\nimport type {WorkspaceLike} from './types'\nimport {WorkspaceValidationError} from './WorkspaceValidationError'\n\n/** @internal */\nexport interface ValidateWorkspaceOptions {\n  workspaces: WorkspaceLike[]\n}\n\n/**\n * Validates workspace configuration, throwing if:\n *\n * - Workspaces do not all have base paths and names (if multiple given)\n * - Base paths or names are invalid\n * - Base paths or names are not unique\n *\n * @internal\n */\nexport function validateWorkspaces({workspaces}: ValidateWorkspaceOptions): void {\n  if (workspaces.length === 0) {\n    throw new WorkspaceValidationError('At least one workspace is required.')\n  }\n\n  validateNames(workspaces)\n  validateBasePaths(workspaces)\n}\n\n/**\n * Validates the workspace names of every workspace\n * Only exported for testing purposes\n *\n * @param workspaces - An array of workspaces\n * @internal\n */\nexport function validateNames(workspaces: WorkspaceLike[]): void {\n  const isSingleWorkspace = workspaces.length === 1\n  const names = new Map<string, {index: number; workspace: WorkspaceLike}>()\n  workspaces.forEach((workspace, index) => {\n    const {name: rawName, title} = workspace\n    const thisIdentifier = getNamelessWorkspaceIdentifier(title, index)\n\n    if (!rawName && !isSingleWorkspace) {\n      throw new WorkspaceValidationError(\n        'All workspaces must have a `name`, unless only a single workspace is defined. ' +\n          `Workspace ${thisIdentifier} did not define a \\`name\\`.`,\n        {workspace, index}\n      )\n    }\n\n    const name = isSingleWorkspace && typeof rawName === 'undefined' ? 'default' : rawName\n\n    if (typeof name !== 'string') {\n      throw new WorkspaceValidationError(\n        `Workspace at index ${index} defined an invalid \\`name\\` - must be a string.`,\n        {workspace, index}\n      )\n    }\n\n    const normalized = name.toLowerCase()\n    const existingWorkspace = names.get(normalized)\n\n    if (existingWorkspace) {\n      const prevIdentifier = getNamelessWorkspaceIdentifier(\n        existingWorkspace.workspace.title,\n        existingWorkspace.index\n      )\n      throw new WorkspaceValidationError(\n        `\\`name\\`s must be unique. Workspace ${prevIdentifier} and ` +\n          `workspace ${thisIdentifier} both have the \\`name\\` \\`${name}\\``,\n        {workspace, index}\n      )\n    }\n\n    names.set(normalized, {index, workspace})\n\n    if (!/^[a-z0-9][a-z0-9_-]*$/i.test(name)) {\n      throw new WorkspaceValidationError(\n        `All workspace \\`name\\`s must consist of only a-z, 0-9, underscore and dashes, ` +\n          `and cannot begin with an underscore or dash. ` +\n          `Workspace ${thisIdentifier} has the invalid name \\`${name}\\``,\n        {workspace, index}\n      )\n    }\n  })\n}\n\n/**\n * Validates the base paths of every workspace\n * Only exported for testing purposes\n *\n * @param workspaces - An array of workspaces\n * @internal\n */\nexport function validateBasePaths(workspaces: WorkspaceLike[]): void {\n  // If we have more than a single workspace, every workspace needs a basepath\n  if (workspaces.length > 1) {\n    workspaces.every(hasBasePath) // Throws on missing basePath\n  }\n\n  workspaces.every(validateBasePath)\n\n  const [firstWorkspace, ...restOfWorkspaces] = workspaces\n  const firstWorkspaceSegmentCount = (firstWorkspace.basePath || '/')\n    // remove starting slash before splitting\n    .substring(1)\n    .split('/')\n    .filter(Boolean).length\n\n  restOfWorkspaces.forEach((workspace, index) => {\n    const workspaceSegmentCount = (workspace.basePath || '/')\n      // remove starting slash before splitting\n      .substring(1)\n      .split('/').length\n\n    if (firstWorkspaceSegmentCount !== workspaceSegmentCount) {\n      throw new WorkspaceValidationError(\n        `All workspace \\`basePath\\`s must have the same amount of segments. Workspace \\`${getWorkspaceIdentifier(\n          firstWorkspace,\n          index\n        )}\\` had ${firstWorkspaceSegmentCount} segment${\n          firstWorkspaceSegmentCount === 1 ? '' : 's'\n        } \\`${firstWorkspace.basePath}\\` but workspace \\`${getWorkspaceIdentifier(\n          workspace,\n          index\n        )}\\` had ${workspaceSegmentCount} segment${workspaceSegmentCount === 1 ? '' : 's'} \\`${\n          workspace.basePath\n        }\\``,\n        {workspace, index}\n      )\n    }\n  })\n\n  const basePaths = new Map<string, string>()\n  workspaces.forEach((workspace, index) => {\n    const basePath = (workspace.basePath || '').toLowerCase()\n\n    const existingWorkspace = basePaths.get(basePath)\n    if (existingWorkspace) {\n      throw new WorkspaceValidationError(\n        `\\`basePath\\`s must be unique. Workspaces \\`${existingWorkspace}\\` and ` +\n          `\\`${getWorkspaceIdentifier(\n            workspace,\n            index\n          )}\\` both have the \\`basePath\\` \\`${basePath}\\``,\n        {workspace, index}\n      )\n    }\n\n    basePaths.set(basePath, getWorkspaceIdentifier(workspace, index))\n  })\n}\n\nfunction hasBasePath(workspace: WorkspaceLike, index: number) {\n  const {name, basePath} = workspace\n  if (basePath && typeof basePath === 'string') {\n    return true\n  }\n\n  if (typeof basePath === 'undefined') {\n    throw new WorkspaceValidationError(\n      `If more than one workspace is defined, every workspace must have a \\`basePath\\` defined. ` +\n        `Workspace \\`${name}\\` is missing a \\`basePath\\``,\n      {workspace, index}\n    )\n  }\n\n  throw new WorkspaceValidationError(\n    `If more than one workspace is defined, every workspace must have a \\`basePath\\` defined. ` +\n      `Workspace \\`${name}\\` has an invalid \\`basePath\\` (must be a non-empty string)`,\n    {workspace, index}\n  )\n}\n\nfunction validateBasePath(workspace: WorkspaceLike, index: number) {\n  const {name, basePath} = workspace\n\n  // Empty base paths are okay (we're validating uniqueness and presence on more\n  // than a single workspace in `validateBasePaths`)\n  if (!basePath || basePath === '/') {\n    return\n  }\n\n  if (!/^\\/[a-z0-9/_-]*[a-z0-9_-]+$/i.test(basePath)) {\n    throw new WorkspaceValidationError(\n      `All workspace \\`basePath\\`s must start with a leading \\`/\\`, ` +\n        `consist of only URL safe characters, ` +\n        `and cannot end with a trailing \\`/\\`. ` +\n        `Workspace \\`${name}\\`'s basePath is \\`${basePath}\\``,\n      {workspace, index}\n    )\n  }\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Container, Flex, Stack, Text} from '@sanity/ui'\nimport React from 'react'\n\nexport function NoToolsScreen() {\n  return (\n    <Card height=\"fill\">\n      <Flex align=\"center\" height=\"fill\" justify=\"center\" padding={4} sizing=\"border\">\n        <Container width={0}>\n          <Card padding={4} radius={2} shadow={1} tone=\"caution\">\n            <Flex>\n              <Box>\n                <Text size={1}>\n                  <WarningOutlineIcon />\n                </Text>\n              </Box>\n              <Stack flex={1} marginLeft={3} space={3}>\n                <Text as=\"h1\" size={1} weight=\"bold\">\n                  No configured tools!\n                </Text>\n                <Text as=\"p\" muted size={1}>\n                  Please configure a tool in your Studio configuration.\n                </Text>\n                <Text as=\"p\" hidden muted size={1}>\n                  <a href=\"\">Learn how to add a tool &rarr;</a>\n                </Text>\n              </Stack>\n            </Flex>\n          </Card>\n        </Container>\n      </Flex>\n    </Card>\n  )\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Container, Flex, Stack, Text} from '@sanity/ui'\nimport React from 'react'\n\nexport function ToolNotFoundScreen(props: {toolName: string}) {\n  const {toolName} = props\n\n  return (\n    <Card height=\"fill\">\n      <Flex align=\"center\" height=\"fill\" justify=\"center\" padding={4} sizing=\"border\">\n        <Container width={0}>\n          <Card padding={4} radius={2} shadow={1} tone=\"caution\">\n            <Flex>\n              <Box>\n                <Text size={1}>\n                  <WarningOutlineIcon />\n                </Text>\n              </Box>\n              <Stack flex={1} marginLeft={3} space={3}>\n                <Text as=\"h1\" size={1} weight=\"bold\">\n                  Tool not found: <code>{toolName}</code>\n                </Text>\n              </Stack>\n            </Flex>\n          </Card>\n        </Container>\n      </Flex>\n    </Card>\n  )\n}\n","import React from 'react'\nimport {Flex, Spinner, Card, Text} from '@sanity/ui'\n\nexport function LoadingScreen() {\n  return (\n    // TODO: improve the design of this\n    // think about having it load in the `_document` too\n    <Flex\n      // TODO: currently this card is here to accommodate dark mode vs light\n      // mode backgrounds, however that logic should probably exist globally\n      as={Card}\n      justify=\"center\"\n      align=\"center\"\n      height=\"fill\"\n      direction=\"column\"\n      gap={4}\n    >\n      <Text muted>Loading…</Text>\n      <Spinner muted />\n    </Flex>\n  )\n}\n","import {ErrorOutlineIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Breadcrumbs, Card, Flex, Stack, Text, ThemeColorToneKey} from '@sanity/ui'\nimport {generateHelpUrl} from '@sanity/generate-help-url'\nimport {SchemaValidationProblemGroup} from '@sanity/types'\nimport React, {useMemo} from 'react'\nimport styled from 'styled-components'\nimport {capitalize} from 'lodash'\n\nconst TONES: Record<'error' | 'warning', ThemeColorToneKey> = {\n  error: 'critical',\n  warning: 'caution',\n}\n\nconst SegmentSpan = styled.code`\n  && {\n    background: none;\n    color: inherit;\n  }\n`\n\nconst ErrorMessageText = styled(Text)`\n  white-space: pre-line;\n`\n\nexport function SchemaProblemGroups(props: {problemGroups: SchemaValidationProblemGroup[]}) {\n  const {problemGroups} = props\n\n  const items = useMemo(() => {\n    const ret = []\n\n    for (const problemGroup of problemGroups) {\n      for (const problem of problemGroup.problems) {\n        ret.push({group: problemGroup, problem})\n      }\n    }\n\n    return ret\n  }, [problemGroups])\n\n  return (\n    <Stack as=\"ul\" space={4}>\n      {items.map(({group, problem}, i) => {\n        const isError = problem.severity === 'error'\n        const isWarning = problem.severity === 'warning'\n        const schemaType = getTypeInfo(group)\n        return (\n          <Card border key={i} padding={4} radius={2} tone={TONES[problem.severity]}>\n            <Flex>\n              <Box marginRight={3}>\n                <Text muted size={1}>\n                  {isError && <ErrorOutlineIcon />}\n                  {isWarning && <WarningOutlineIcon />}\n                </Text>\n              </Box>\n\n              <Box flex={1}>\n                <Text size={1} weight=\"semibold\">\n                  {schemaType ? (\n                    <>\n                      {capitalize(schemaType.type)} type \"{schemaType.name}\"\n                    </>\n                  ) : null}\n                </Text>\n              </Box>\n            </Flex>\n            <Box marginTop={4}>\n              <Card border overflow=\"auto\" padding={2} tone=\"inherit\">\n                <Breadcrumbs\n                  separator={\n                    <Text muted size={1}>\n                      &rarr;\n                    </Text>\n                  }\n                >\n                  {group.path.map((segment, j) => {\n                    if (segment.kind === 'type') {\n                      return (\n                        <Text key={j} size={1}>\n                          <SegmentSpan>{`${_renderSegmentName(segment.name)}:${\n                            segment.type\n                          }`}</SegmentSpan>\n                        </Text>\n                      )\n                    }\n\n                    if (segment.kind === 'property') {\n                      return (\n                        <Text key={j} size={1}>\n                          <SegmentSpan>{segment.name}</SegmentSpan>\n                        </Text>\n                      )\n                    }\n\n                    return null\n                  })}\n                </Breadcrumbs>\n              </Card>\n            </Box>\n\n            <Box as=\"ul\" marginTop={4}>\n              <Box as=\"li\">\n                <Stack space={3}>\n                  <ErrorMessageText muted size={1}>\n                    {problem.message}\n                  </ErrorMessageText>\n\n                  {problem.helpId && (\n                    <Text muted size={1}>\n                      <a\n                        href={generateHelpUrl(problem.helpId)}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        View documentation &rarr;\n                      </a>\n                    </Text>\n                  )}\n                </Stack>\n              </Box>\n            </Box>\n          </Card>\n        )\n      })}\n    </Stack>\n  )\n}\n\nfunction getTypeInfo(problem: SchemaValidationProblemGroup): {name: string; type: string} | null {\n  // note: unsure if the first segment here can ever be anything else than a type\n  // a possible API improvement is to add schemaType info to the problem group interface itself\n  const first = problem.path[0]\n  if (first.kind === 'type') {\n    return {name: first.name, type: first.type}\n  }\n  return null\n}\n\nfunction _renderSegmentName(str: string) {\n  if (str?.startsWith('<unnamed_type_@_index')) {\n    const parts = str.slice(1, -1).split('_')\n\n    return `[${parts[4]}]`\n  }\n\n  return str\n}\n","import {SchemaValidationProblemPath} from '@sanity/types'\n\nexport function renderPath(path: SchemaValidationProblemPath) {\n  return path\n    .map((segment) => {\n      if (segment.kind === 'type') {\n        return `${segment.name || '<unnamed>'}(${segment.type})`\n      }\n\n      if (segment.kind === 'property') {\n        return segment.name\n      }\n\n      return null\n    })\n    .filter(Boolean)\n    .join(' > ')\n}\n","import {Schema} from '@sanity/types'\nimport {renderPath} from './utils'\n\nexport function reportWarnings(schema: Schema) {\n  /* eslint-disable no-console */\n  const problemGroups = schema._validation\n\n  const groupsWithWarnings = problemGroups?.filter((group) =>\n    group.problems.some((problem) => problem.severity === 'warning')\n  )\n  if (groupsWithWarnings?.length === 0) {\n    return\n  }\n  console.groupCollapsed(`⚠️ Schema has ${groupsWithWarnings?.length} warnings`)\n  groupsWithWarnings?.forEach((group) => {\n    const path = renderPath(group.path)\n\n    console.group(`%cAt ${path}`, 'color: #FF7636')\n\n    group.problems.forEach((problem) => {\n      console.log(problem.message)\n    })\n\n    console.groupEnd()\n  })\n  console.groupEnd()\n  /* eslint-enable no-console */\n}\n","import {Schema} from '@sanity/types'\nimport {Card, Container, Heading, Stack} from '@sanity/ui'\nimport React, {useEffect} from 'react'\nimport {SchemaProblemGroups} from './SchemaProblemGroups'\nimport {reportWarnings} from './reportWarnings'\n\ninterface SchemaErrorsScreenProps {\n  schema: Schema\n}\n\nexport function SchemaErrorsScreen({schema}: SchemaErrorsScreenProps) {\n  const groupsWithErrors =\n    schema._validation?.filter((group) =>\n      group.problems.some((problem) => problem.severity === 'error')\n    ) || []\n\n  useEffect(() => reportWarnings(schema), [schema])\n\n  return (\n    <Card height=\"fill\" overflow=\"auto\" paddingY={[4, 5, 6, 7]} paddingX={4} sizing=\"border\">\n      <Container width={1}>\n        <Stack space={5}>\n          <Heading as=\"h1\">Schema errors</Heading>\n          <SchemaProblemGroups problemGroups={groupsWithErrors} />\n        </Stack>\n      </Container>\n    </Card>\n  )\n}\n","import {Button, Card, Flex, Heading, Inline, Stack} from '@sanity/ui'\nimport React from 'react'\n\nexport function NotFoundScreen(props: {onNavigateToDefaultWorkspace: () => void}) {\n  return (\n    <Card height=\"fill\" sizing=\"border\" tone=\"caution\" display=\"flex\">\n      <Flex direction=\"row\" justify=\"center\" flex={1} align=\"center\">\n        <Stack space={4}>\n          <Heading as=\"h1\">Workspace not found</Heading>\n          <Inline>\n            <Button\n              text=\"Go to default workspace\"\n              onClick={props.onNavigateToDefaultWorkspace}\n              mode=\"ghost\"\n            />\n          </Inline>\n        </Stack>\n      </Flex>\n    </Card>\n  )\n}\n","import {createContext} from 'react'\nimport {History} from 'history'\nimport {WorkspaceSummary} from '../../config'\n\n/** @internal */\nexport interface ActiveWorkspaceMatcherContextValue {\n  activeWorkspace: WorkspaceSummary\n  setActiveWorkspace: (workspaceName: string) => void\n  /**\n   * @deprecated internal use only\n   */\n  __internal: {\n    history: History\n  }\n}\n\n/** @internal */\nexport const ActiveWorkspaceMatcherContext =\n  createContext<ActiveWorkspaceMatcherContextValue | null>(null)\n","import {escapeRegExp} from 'lodash'\nimport {WorkspaceLike} from '../workspaces'\n\n/** @internal */\nexport interface MatchWorkspaceOptions<TWorkspace extends WorkspaceLike> {\n  workspaces: TWorkspace[]\n  pathname: string\n}\n\n/** @internal */\nexport type MatchWorkspaceResult<TWorkspace extends WorkspaceLike> =\n  | {type: 'match'; workspace: TWorkspace}\n  | {type: 'redirect'; pathname: string}\n  | {type: 'not-found'}\n\n/**\n * Given a pathname and a list of workspaces, returns either a workspace match,\n * a redirect, or not-found.\n *\n * Throws if the workspace `basePaths` could result in ambiguous matches.\n *\n * @internal\n */\nexport function matchWorkspace<TWorkspace extends WorkspaceLike>({\n  pathname,\n  workspaces,\n}: MatchWorkspaceOptions<TWorkspace>): MatchWorkspaceResult<TWorkspace> {\n  const normalized = workspaces.map((workspace) => ({\n    workspace,\n    name: workspace.name,\n    basePath: workspace.basePath || '/',\n  }))\n\n  const [firstWorkspace] = normalized\n  for (const {workspace, basePath} of normalized) {\n    // this regex ends with a `(\\\\/|$)` (forward slash or end) to prevent false\n    // matches where the pathname is a false subset of the current pathname.\n    // e.g. if the `workspace.basePath` is `/base/foobar` and the current\n    // pathname is `/base/foo`, then that should not be a match\n    if (new RegExp(`^${escapeRegExp(basePath)}(\\\\/|$)`, 'i').test(pathname) || basePath === '/') {\n      return {type: 'match', workspace}\n    }\n  }\n\n  const workspaceSegments = normalized.map((workspace) =>\n    // gets the segments from the basePath\n    workspace.basePath\n      // removes the leading `/`\n      .substring(1)\n      .split('/')\n  )\n\n  // if the pathname is only a leading slash, then return a redirect\n  if (pathname === '/') {\n    return {type: 'redirect', pathname: firstWorkspace.basePath}\n  }\n\n  // this common base path is used to check if we should redirect. it's the base\n  // path that is common between all the workspaces.\n  const commonBasePath = workspaceSegments.reduce((commonSegments, segments) => {\n    for (let i = 0; i < commonSegments.length; i++) {\n      const commonSegment = commonSegments[i]\n      const segment = segments[i].toLowerCase()\n\n      if (commonSegment !== segment) {\n        return commonSegments.slice(0, i)\n      }\n    }\n\n    return commonSegments\n  })\n\n  // recursively creates a matching expression\n  // `/foo/bar/baz` becomes `(\\/foo(\\/bar(\\/baz(\\/|$))?(\\/|$))?(\\/|$))?`\n  function createCommonBasePathRegex([first, ...rest]: string[]): string {\n    if (!first) return ''\n    return `(\\\\/${escapeRegExp(first)}${createCommonBasePathRegex(rest)}(\\\\/|$))?`\n  }\n\n  if (new RegExp(`^${createCommonBasePathRegex(commonBasePath)}$`, 'i').test(pathname)) {\n    // redirect to the first workspace configured\n    return {type: 'redirect', pathname: firstWorkspace.basePath}\n  }\n\n  // if the pathname was not a subset of the common base path, then the route\n  // the user is looking for is not present and we should show some sort of 404\n  // screen\n  return {type: 'not-found'}\n}\n","import React, {useCallback, useEffect, useMemo, useState} from 'react'\nimport {History, createBrowserHistory, createMemoryHistory} from 'history'\nimport {Observable} from 'rxjs'\nimport {map} from 'rxjs/operators'\nimport {useWorkspaces} from '../workspaces'\nimport {WorkspaceSummary} from '../../config'\nimport {\n  ActiveWorkspaceMatcherContext,\n  ActiveWorkspaceMatcherContextValue,\n} from './ActiveWorkspaceMatcherContext'\nimport {matchWorkspace} from './matchWorkspace'\n\n/** @internal */\nexport interface ActiveWorkspaceMatcherProps {\n  children?: React.ReactChild\n  unstable_history?: History\n  NotFoundComponent: React.ComponentType<{onNavigateToDefaultWorkspace: () => void}>\n  LoadingComponent: React.ComponentType\n}\n\nconst createHistory = () =>\n  typeof document === 'undefined' ? createMemoryHistory() : createBrowserHistory()\n\n/** @internal */\nexport function ActiveWorkspaceMatcher({\n  children,\n  LoadingComponent,\n  NotFoundComponent,\n  unstable_history: historyProp,\n}: ActiveWorkspaceMatcherProps) {\n  const [error, setError] = useState<unknown>(null)\n\n  // Throw error to closest error boundary\n  if (error) throw error\n\n  const workspaces = useWorkspaces()\n\n  const [activeWorkspace, setActiveWorkspace] = useState<WorkspaceSummary | null>(null)\n  const [notFound, setNotFound] = useState(false)\n\n  const history = useMemo(() => historyProp || createHistory(), [historyProp])\n\n  useEffect(() => {\n    const pathname$ = new Observable<string>((observer) => {\n      const unlisten = history.listen((location) => observer.next(location.pathname))\n\n      // Emit initial pathname\n      observer.next(history.location.pathname || '/')\n\n      return unlisten\n    })\n\n    const subscription = pathname$\n      .pipe(map((pathname) => matchWorkspace({pathname, workspaces})))\n      .subscribe({\n        error: setError,\n        next: (result) => {\n          if (result.type === 'match') {\n            setNotFound(false)\n            setActiveWorkspace(result.workspace)\n          }\n\n          if (result.type === 'redirect') {\n            history.replace(result.pathname)\n          }\n\n          if (result.type === 'not-found') {\n            setNotFound(true)\n          }\n        },\n      })\n\n    return () => subscription.unsubscribe()\n  }, [history, workspaces])\n\n  const setActiveWorkspaceName = useCallback(\n    (workspaceName: string) => {\n      const foundWorkspace = workspaces.find((workspace) => workspace.name === workspaceName)\n      if (foundWorkspace) {\n        history.push(foundWorkspace.basePath)\n      }\n    },\n    [history, workspaces]\n  )\n\n  const defaultWorkspaceName = workspaces[0].name\n  const handleNavigateToDefaultWorkspace = useCallback(() => {\n    setActiveWorkspaceName(defaultWorkspaceName)\n  }, [setActiveWorkspaceName, defaultWorkspaceName])\n\n  const value = useMemo(\n    () => ({\n      __internal: {history},\n      activeWorkspace,\n      setActiveWorkspace: setActiveWorkspaceName,\n    }),\n    [history, activeWorkspace, setActiveWorkspaceName]\n  )\n\n  if (notFound) {\n    return <NotFoundComponent onNavigateToDefaultWorkspace={handleNavigateToDefaultWorkspace} />\n  }\n\n  if (!value.activeWorkspace) {\n    return <LoadingComponent />\n  }\n\n  return (\n    <ActiveWorkspaceMatcherContext.Provider value={value as ActiveWorkspaceMatcherContextValue}>\n      {children}\n    </ActiveWorkspaceMatcherContext.Provider>\n  )\n}\n","import {useContext} from 'react'\nimport {\n  ActiveWorkspaceMatcherContext,\n  ActiveWorkspaceMatcherContextValue,\n} from './ActiveWorkspaceMatcherContext'\n\n/** @internal */\nexport function useActiveWorkspace(): ActiveWorkspaceMatcherContextValue {\n  const value = useContext(ActiveWorkspaceMatcherContext)\n  if (!value) throw new Error('Could not find `ActiveWorkspaceMatcher` context')\n  return value\n}\n","import {CheckmarkIcon} from '@sanity/icons'\nimport {Flex, Stack, Box, Text, Card} from '@sanity/ui'\nimport React, {createElement, isValidElement, useMemo} from 'react'\nimport {isValidElementType} from 'react-is'\nimport styled from 'styled-components'\n\nconst STATE_TITLES = {\n  'logged-in': '',\n  'logged-out': 'Signed out',\n  'no-access': '',\n}\n\nexport const MediaCard = styled(Card)`\n  width: 35px;\n  height: 35px;\n\n  svg {\n    width: 100%;\n    height: 100%;\n  }\n`\n\nconst createIcon = (icon: React.ComponentType | React.ReactNode) => {\n  if (isValidElementType(icon)) return createElement(icon)\n  if (isValidElement(icon)) return icon\n  return undefined\n}\n\nexport interface WorkspacePreviewProps {\n  icon?: React.ComponentType | React.ReactNode\n  iconRight?: React.ComponentType | React.ReactNode\n  selected?: boolean\n  state?: 'logged-in' | 'logged-out' | 'no-access'\n  subtitle?: string\n  title: string\n}\n\nexport function WorkspacePreview(props: WorkspacePreviewProps) {\n  const {state, subtitle, selected, title, icon, iconRight} = props\n\n  const iconComponent = useMemo(() => createIcon(icon), [icon])\n  const iconRightComponent = useMemo(() => createIcon(iconRight), [iconRight])\n\n  return (\n    <Flex align=\"center\" flex=\"none\" gap={3}>\n      <MediaCard radius={2} tone=\"transparent\">\n        {iconComponent}\n      </MediaCard>\n\n      <Stack flex={1} space={2}>\n        <Text textOverflow=\"ellipsis\" weight=\"medium\">\n          {title}\n        </Text>\n\n        {subtitle && (\n          <Text muted size={1} textOverflow=\"ellipsis\">\n            {subtitle}\n          </Text>\n        )}\n      </Stack>\n\n      {state && STATE_TITLES[state] && (\n        <Box paddingLeft={1}>\n          <Text size={1} muted textOverflow=\"ellipsis\">\n            {STATE_TITLES[state]}\n          </Text>\n        </Box>\n      )}\n\n      {(selected || iconRightComponent) && (\n        <Flex align=\"center\" gap={4} paddingLeft={3} paddingRight={2}>\n          {selected && (\n            <Text size={1} muted>\n              <CheckmarkIcon />\n            </Text>\n          )}\n\n          {iconRightComponent && (\n            <Text size={1} muted>\n              {iconRightComponent}\n            </Text>\n          )}\n        </Flex>\n      )}\n    </Flex>\n  )\n}\n","import {map} from 'rxjs/operators'\nimport {combineLatest} from 'rxjs'\nimport {WorkspaceSummary} from '../../../../../config'\nimport {createHookFromObservableFactory} from '../../../../../util'\n\nexport const useWorkspaceAuthStates = createHookFromObservableFactory(\n  (workspaces: WorkspaceSummary[]) =>\n    combineLatest(\n      workspaces.map((workspace) =>\n        // eslint-disable-next-line max-nested-callbacks\n        workspace.auth.state.pipe(map((state) => [workspace.name, state] as const))\n      )\n    ).pipe(map((entries) => Object.fromEntries(entries)))\n)\n","export const WORKSPACES_DOCS_URL = 'https://beta.sanity.io/docs/platform/studio/config/workspaces'\n","import {SanityLogo} from '@sanity/logos'\nimport {Box, Card, Flex, Heading, Stack, Text} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\nconst LINKS = [\n  {\n    url: 'https://slack.sanity.io/',\n    title: 'Community',\n  },\n  {\n    url: 'https://www.sanity.io/docs',\n    title: 'Docs',\n  },\n  {\n    url: 'https://www.sanity.io/legal/privacy',\n    title: 'Privacy',\n  },\n  {\n    url: 'https://www.sanity.io',\n    title: 'sanity.io',\n  },\n]\n\nconst StyledText = styled(Text)`\n  a {\n    color: inherit;\n  }\n`\n\ninterface LayoutProps {\n  header?: React.ReactNode\n  children: React.ReactNode\n  footer?: React.ReactNode\n}\n\nexport function Layout(props: LayoutProps) {\n  const {children, footer, header} = props\n\n  return (\n    <Stack space={6}>\n      <Card border radius={3} overflow=\"auto\">\n        <Stack>\n          {typeof header === 'object' && <Box>{header}</Box>}\n          {typeof header === 'string' && (\n            <Box paddingY={4}>\n              <Heading align=\"center\" size={1}>\n                {header}\n              </Heading>\n            </Box>\n          )}\n\n          <Box paddingX={1}>\n            <Card borderTop={Boolean(header)} borderBottom={Boolean(footer)}>\n              {children}\n            </Card>\n          </Box>\n\n          {footer && <Box>{footer}</Box>}\n        </Stack>\n      </Card>\n\n      <Flex direction=\"column\" gap={4} justify=\"center\" align=\"center\">\n        <Text size={3}>\n          <SanityLogo />\n        </Text>\n\n        <Flex align=\"center\" gap={2}>\n          {LINKS.map((link, index) => (\n            <React.Fragment key={link.title}>\n              <StyledText muted size={1}>\n                <a href={link.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                  {link.title}\n                </a>\n              </StyledText>\n\n              {index < LINKS.length - 1 && (\n                <Text size={1} muted>\n                  •\n                </Text>\n              )}\n            </React.Fragment>\n          ))}\n        </Flex>\n      </Flex>\n    </Stack>\n  )\n}\n","import {Box, Button, Card, Flex, Stack} from '@sanity/ui'\nimport React, {useCallback, useState} from 'react'\nimport {omit} from 'lodash'\nimport {AddIcon, ArrowLeftIcon, ChevronRightIcon} from '@sanity/icons'\nimport {useActiveWorkspace} from '../../../../activeWorkspaceMatcher'\nimport {useWorkspaces} from '../../../../workspaces'\nimport {WorkspacePreview} from '../WorkspacePreview'\nimport {useWorkspaceAuthStates} from '../hooks'\nimport {LoadingScreen} from '../../../../screens'\nimport {WORKSPACES_DOCS_URL} from '../constants'\nimport {Layout} from './Layout'\n\nexport function WorkspaceAuth() {\n  const workspaces = useWorkspaces()\n  const {activeWorkspace, setActiveWorkspace} = useActiveWorkspace()\n  const [authStates] = useWorkspaceAuthStates(workspaces)\n  const [selectedWorkspaceName, setSelectedWorkspaceName] = useState<string | null>(\n    activeWorkspace?.name || null\n  )\n  const selectedWorkspace =\n    workspaces.length === 1\n      ? workspaces[0]\n      : workspaces.find((workspace) => workspace.name === selectedWorkspaceName)\n  const LoginComponent = selectedWorkspace?.auth?.LoginComponent\n\n  const handleBack = useCallback(() => setSelectedWorkspaceName(null), [])\n\n  if (!authStates) return <LoadingScreen />\n\n  if (LoginComponent && selectedWorkspace) {\n    return (\n      <Stack space={2}>\n        {workspaces.length > 1 && (\n          <Flex>\n            <Button\n              fontSize={1}\n              icon={ArrowLeftIcon}\n              mode=\"bleed\"\n              onClick={handleBack}\n              padding={2}\n              text=\"Choose another workspace\"\n            />\n          </Flex>\n        )}\n\n        <Layout\n          header={\n            <Box padding={3}>\n              <WorkspacePreview\n                icon={selectedWorkspace.icon}\n                title={selectedWorkspace.title}\n                subtitle={selectedWorkspace?.subtitle}\n              />\n            </Box>\n          }\n        >\n          <Stack padding={2} paddingBottom={3} paddingTop={4}>\n            <LoginComponent\n              {...omit(selectedWorkspace, ['type', '__internal'])}\n              key={selectedWorkspaceName}\n            />\n          </Stack>\n        </Layout>\n      </Stack>\n    )\n  }\n\n  return (\n    <Layout\n      header=\"Choose your workspace\"\n      footer={\n        <Stack padding={1}>\n          <Button\n            as=\"a\"\n            href={WORKSPACES_DOCS_URL}\n            icon={AddIcon}\n            justify=\"flex-start\"\n            mode=\"bleed\"\n            rel=\"noopener noreferrer\"\n            target=\"__blank\"\n            text=\"Add workspace\"\n          />\n        </Stack>\n      }\n    >\n      <Stack space={1} paddingX={1} paddingY={2}>\n        {workspaces.map((workspace) => {\n          const authState = authStates[workspace.name]\n          // eslint-disable-next-line no-nested-ternary\n          const state = authState.authenticated\n            ? 'logged-in'\n            : workspace.auth.LoginComponent\n            ? 'logged-out'\n            : 'no-access'\n\n          const handleSelectWorkspace = () => {\n            if (state === 'logged-in' && workspace.name !== activeWorkspace.name) {\n              setActiveWorkspace(workspace.name)\n            }\n\n            if (state === 'logged-out') {\n              setSelectedWorkspaceName(workspace.name)\n            }\n          }\n\n          return (\n            <Card\n              as=\"button\"\n              radius={2}\n              key={workspace.name}\n              padding={2}\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={handleSelectWorkspace}\n            >\n              <WorkspacePreview\n                icon={workspace?.icon}\n                iconRight={ChevronRightIcon}\n                state={state}\n                subtitle={workspace?.subtitle}\n                title={workspace?.title || workspace.name}\n              />\n            </Card>\n          )\n        })}\n      </Stack>\n    </Layout>\n  )\n}\n","import {SelectIcon} from '@sanity/icons'\nimport {\n  Button,\n  MenuButton,\n  MenuItem,\n  Menu,\n  MenuButtonProps,\n  ButtonProps,\n  Box,\n  Label,\n} from '@sanity/ui'\nimport React, {useMemo} from 'react'\nimport styled from 'styled-components'\nimport {useActiveWorkspace} from '../../../activeWorkspaceMatcher'\nimport {useColorScheme} from '../../../colorScheme'\nimport {useWorkspaces} from '../../../workspaces'\nimport {useWorkspaceAuthStates} from './hooks'\nimport {WorkspacePreview} from './WorkspacePreview'\nimport {useRouter} from 'sanity/router'\n\nconst StyledMenu = styled(Menu)`\n  max-width: 350px;\n  min-width: 250px;\n`\n\nexport function WorkspaceMenuButton(props: ButtonProps) {\n  const {scheme} = useColorScheme()\n  const workspaces = useWorkspaces()\n  const {activeWorkspace, setActiveWorkspace} = useActiveWorkspace()\n  const [authStates] = useWorkspaceAuthStates(workspaces)\n  const {navigateUrl} = useRouter()\n\n  const popoverProps: MenuButtonProps['popover'] = useMemo(\n    () => ({constrainSize: true, scheme, portal: true}),\n    [scheme]\n  )\n\n  return (\n    <MenuButton\n      button={<Button icon={SelectIcon} mode=\"bleed\" {...props} disabled={!authStates} />}\n      id=\"workspace-menu\"\n      menu={\n        <StyledMenu>\n          <Box paddingX={3} paddingY={3}>\n            <Label size={1} muted>\n              Workspaces\n            </Label>\n          </Box>\n\n          {authStates &&\n            workspaces.map((workspace) => {\n              const authState = authStates[workspace.name]\n\n              // eslint-disable-next-line no-nested-ternary\n              const state = authState.authenticated\n                ? 'logged-in'\n                : workspace.auth.LoginComponent\n                ? 'logged-out'\n                : 'no-access'\n\n              const handleSelectWorkspace = () => {\n                if (state === 'logged-in' && workspace.name !== activeWorkspace.name) {\n                  setActiveWorkspace(workspace.name)\n                }\n\n                // Navigate to the base path of the workspace to authenticate\n                if (state === 'logged-out') {\n                  navigateUrl({path: workspace.basePath})\n                }\n              }\n\n              return (\n                <MenuItem\n                  key={workspace.name}\n                  // eslint-disable-next-line react/jsx-no-bind\n                  onClick={handleSelectWorkspace}\n                  padding={2}\n                  pressed={workspace.name === activeWorkspace.name}\n                >\n                  <WorkspacePreview\n                    icon={workspace?.icon}\n                    selected={workspace.name === activeWorkspace.name}\n                    state={state}\n                    subtitle={workspace?.subtitle}\n                    title={workspace?.title || workspace.name}\n                  />\n                </MenuItem>\n              )\n            })}\n        </StyledMenu>\n      }\n      popover={popoverProps}\n    />\n  )\n}\n","import {Flex, Card, Container} from '@sanity/ui'\nimport React from 'react'\nimport {WorkspaceAuth} from '../components/navbar/workspace'\n\nexport function AuthenticateScreen() {\n  return (\n    <Card height=\"fill\">\n      <Flex align=\"center\" justify=\"center\" height=\"fill\">\n        <Container width={0}>\n          <WorkspaceAuth />\n        </Container>\n      </Flex>\n    </Card>\n  )\n}\n","import React from 'react'\n\n// const Root = styled(Card).attrs({height: 'fill', overflow: 'auto'})``\n// const Content = styled(Box).attrs({padding: 4})`\n//   margin: auto;\n//   width: 640px;\n//   max-width: 100%;\n// `\n\nexport function ConfigErrorsScreen() {\n  return <>TODO: implement config errors screen</>\n  // return (\n  //   <Root forwardedAs={Flex}>\n  //     <Content forwardedAs={Flex} direction=\"column\" gap={4}>\n  //       <Flex direction=\"column\" gap={2}>\n  //         <Box>\n  //           <Heading as=\"h1\">Configuration Error</Heading>\n  //         </Box>\n  //         <Box muted>\n  //           <Text>An error occurred while trying to resolve your Studio's configuration.</Text>\n  //         </Box>\n  //         <Box>\n  //           <Text size={1} muted>\n  //             Note: the design of this page may change.\n  //           </Text>\n  //         </Box>\n  //       </Flex>\n  //       <Card shadow={1}>\n  //         {errors.map((errorInfo, index) => (\n  //           // eslint-disable-next-line react/no-array-index-key\n  //           <ErrorMessage key={index} {...errorInfo} />\n  //         ))}\n  //       </Card>\n  //       <Button\n  //         tone=\"primary\"\n  //         // eslint-disable-next-line react/jsx-no-bind\n  //         onClick={() => window.location.reload()}\n  //         type=\"button\"\n  //         text=\"Retry\"\n  //       />\n  //     </Content>\n  //   </Root>\n  // )\n}\n","import {CurrentUser} from '@sanity/types'\nimport {Button, Card, Dialog, Stack, Text} from '@sanity/ui'\nimport React, {useCallback, useEffect, useState} from 'react'\nimport {getProviderTitle} from '../../store'\nimport {useActiveWorkspace} from '../activeWorkspaceMatcher'\n\nexport function NotAuthenticatedScreen() {\n  const [currentUser, setCurrentUser] = useState<CurrentUser | null>(null)\n  const [error, handleError] = useState<unknown>(null)\n\n  if (error) throw error\n\n  const {activeWorkspace} = useActiveWorkspace()\n\n  const handleLogout = useCallback(() => {\n    activeWorkspace.auth.logout?.()\n  }, [activeWorkspace])\n\n  useEffect(() => {\n    const subscription = activeWorkspace.auth.state.subscribe({\n      next: ({currentUser: user}) => {\n        setCurrentUser(user)\n      },\n      error: handleError,\n    })\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [activeWorkspace])\n\n  const providerTitle = getProviderTitle(currentUser?.provider)\n  const providerHelp = providerTitle ? ` through ${providerTitle}` : ''\n\n  return (\n    <Card height=\"fill\">\n      <Dialog\n        id=\"not-authorized-dialog\"\n        header=\"Not authorized\"\n        width={1}\n        footer={\n          <Stack paddingX={3} paddingY={2}>\n            <Button text=\"Sign out\" onClick={handleLogout} />\n          </Stack>\n        }\n      >\n        <Stack paddingX={4} paddingY={5} space={4}>\n          <Text>\n            You are not authorized to access this studio. Maybe you could ask someone to invite you\n            to collaborate on this project?\n          </Text>\n\n          <Text>\n            If you think this is an error, verify that you are signed in with the correct account.\n            You are currently signed in as{' '}\n            <strong>\n              {currentUser?.name} ({currentUser?.email})\n            </strong>\n            {providerHelp}.\n          </Text>\n        </Stack>\n      </Dialog>\n    </Card>\n  )\n}\n","import {Card, Dialog, Stack, Button, Text, TextInput, Flex} from '@sanity/ui'\nimport React, {useEffect, useMemo} from 'react'\nimport {LaunchIcon} from '@sanity/icons'\nimport styled from 'styled-components'\n\ninterface CorsOriginErrorScreenProps {\n  projectId?: string\n}\n\nexport const ScreenReaderLabel = styled.label`\n  clip: rect(0 0 0 0);\n  clip-path: inset(50%);\n  height: 1px;\n  overflow: hidden;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n`\n\nexport function CorsOriginErrorScreen(props: CorsOriginErrorScreenProps) {\n  const {projectId} = props\n\n  const origin = window.location.origin\n  const corsUrl = useMemo(() => {\n    const url = new URL(`https://sanity.io/manage/project/${projectId}/api`)\n    url.searchParams.set('cors', 'add')\n    url.searchParams.set('origin', origin)\n    url.searchParams.set('credentials', '')\n\n    return url.toString()\n  }, [origin, projectId])\n\n  useEffect(() => {\n    const handleFocus = () => {\n      window.location.reload()\n    }\n    window.addEventListener('focus', handleFocus)\n    return () => {\n      window.removeEventListener('focus', handleFocus)\n    }\n  }, [])\n\n  return (\n    <Card height=\"fill\">\n      <Dialog id=\"cors-error-dialog\" header=\"Before you continue...\" width={1}>\n        <Stack paddingX={4} paddingY={5} space={4}>\n          <Text>\n            To access your content, you need to <b>add the following URL as a CORS origin</b> to\n            your Sanity project.\n          </Text>\n\n          {/* added for accessibility */}\n          <ScreenReaderLabel aria-hidden=\"true\">CORS URL to be added</ScreenReaderLabel>\n          <TextInput value={origin} readOnly />\n\n          <Button as=\"a\" href={corsUrl} target=\"_blank\" rel=\"noopener noreferrer\" tone=\"primary\">\n            <Flex align=\"center\" justify=\"center\" gap={3}>\n              <Text weight=\"medium\">Continue</Text>\n              <Text weight=\"medium\">\n                <LaunchIcon />\n              </Text>\n            </Flex>\n          </Button>\n        </Stack>\n      </Dialog>\n    </Card>\n  )\n}\n","import React, {useCallback, useState} from 'react'\nimport {Button, Card, Code, Container, ErrorBoundary, Heading, Stack} from '@sanity/ui'\nimport {useHotModuleReload} from 'use-hot-module-reload'\nimport {SchemaError} from '../config'\nimport {isRecord} from '../util'\nimport {CorsOriginError} from '../store'\nimport {CorsOriginErrorScreen, SchemaErrorsScreen} from './screens'\n\ninterface StudioErrorBoundaryProps {\n  children: React.ReactNode\n  heading?: string\n}\n\nexport function StudioErrorBoundary({\n  children,\n  heading = 'An error occured',\n}: StudioErrorBoundaryProps) {\n  const [{error}, setError] = useState<{error: unknown}>({error: null})\n\n  const message = isRecord(error) && typeof error.message === 'string' && error.message\n  const stack = isRecord(error) && typeof error.stack === 'string' && error.stack\n\n  const handleResetError = useCallback(() => setError({error: null}), [setError])\n\n  useHotModuleReload(handleResetError)\n\n  if (error instanceof CorsOriginError) {\n    return <CorsOriginErrorScreen projectId={error?.projectId} />\n  }\n\n  if (error instanceof SchemaError) {\n    return <SchemaErrorsScreen schema={error.schema} />\n  }\n\n  if (!error) {\n    return <ErrorBoundary onCatch={setError}>{children}</ErrorBoundary>\n  }\n\n  return (\n    <Card\n      height=\"fill\"\n      overflow=\"auto\"\n      paddingY={[4, 5, 6, 7]}\n      paddingX={4}\n      sizing=\"border\"\n      tone=\"critical\"\n    >\n      <Container width={3}>\n        <Stack space={4}>\n          {/* TODO: better error boundary */}\n\n          <Heading>{heading}</Heading>\n\n          <div>\n            <Button onClick={handleResetError} text=\"Retry\" tone=\"default\" />\n          </div>\n\n          <Card border radius={2} overflow=\"auto\" padding={4} tone=\"inherit\">\n            <Stack space={4}>\n              {message && (\n                <Code size={1}>\n                  <strong>Error: {message}</strong>\n                </Code>\n              )}\n              {stack && <Code size={1}>{stack}</Code>}\n            </Stack>\n          </Card>\n        </Stack>\n      </Container>\n    </Card>\n  )\n}\n","import {Card, Flex, Spinner} from '@sanity/ui'\nimport {startCase} from 'lodash'\nimport React, {\n  createContext,\n  createElement,\n  Suspense,\n  useCallback,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react'\nimport styled from 'styled-components'\nimport {NoToolsScreen} from './screens/NoToolsScreen'\nimport {ToolNotFoundScreen} from './screens/ToolNotFoundScreen'\nimport {useNavbarComponent} from './studio-components-hooks'\nimport {StudioErrorBoundary} from './StudioErrorBoundary'\nimport {useWorkspace} from './workspace'\nimport {RouteScope, useRouter} from 'sanity/router'\n\nconst SearchFullscreenPortalCard = styled(Card)`\n  height: 100%;\n  left: 0;\n  overflow: hidden;\n  position: fixed;\n  top: 0;\n  width: 100%;\n  z-index: 200;\n`\n\n/** @internal */\nexport interface NavbarContextValue {\n  onSearchFullscreenOpenChange: (open: boolean) => void\n  searchFullscreenOpen: boolean\n  searchFullscreenPortalEl: HTMLElement | null\n}\n\n/** @internal */\nexport const NavbarContext = createContext<NavbarContextValue>({\n  onSearchFullscreenOpenChange: () => '',\n  searchFullscreenOpen: false,\n  searchFullscreenPortalEl: null,\n})\n\n/** @public */\nexport function StudioLayout() {\n  const {state: routerState} = useRouter()\n  const {name, title, tools} = useWorkspace()\n  const activeToolName = typeof routerState.tool === 'string' ? routerState.tool : undefined\n  const activeTool = tools.find((tool) => tool.name === activeToolName)\n  const [searchFullscreenOpen, setSearchFullscreenOpen] = useState<boolean>(false)\n  const [searchFullscreenPortalEl, setSearchFullscreenPortalEl] = useState<HTMLDivElement | null>(\n    null\n  )\n\n  const documentTitle = useMemo(() => {\n    const mainTitle = title || startCase(name)\n\n    if (activeToolName) {\n      return `${mainTitle} – ${startCase(activeToolName)}`\n    }\n\n    return mainTitle\n  }, [activeToolName, name, title])\n\n  useEffect(() => {\n    document.title = documentTitle\n  }, [documentTitle])\n\n  const handleSearchFullscreenOpenChange = useCallback((open: boolean) => {\n    setSearchFullscreenOpen(open)\n  }, [])\n\n  const navbarContextValue = useMemo(\n    () => ({\n      searchFullscreenOpen,\n      searchFullscreenPortalEl,\n      onSearchFullscreenOpenChange: handleSearchFullscreenOpenChange,\n    }),\n    [searchFullscreenOpen, searchFullscreenPortalEl, handleSearchFullscreenOpenChange]\n  )\n\n  const Navbar = useNavbarComponent()\n\n  return (\n    <Flex data-ui=\"ToolScreen\" direction=\"column\" height=\"fill\" data-testid=\"studio-layout\">\n      <NavbarContext.Provider value={navbarContextValue}>\n        <Navbar />\n      </NavbarContext.Provider>\n      {tools.length === 0 && <NoToolsScreen />}\n      {tools.length > 0 && !activeTool && activeToolName && (\n        <ToolNotFoundScreen toolName={activeToolName} />\n      )}\n      {searchFullscreenOpen && (\n        <SearchFullscreenPortalCard ref={setSearchFullscreenPortalEl} overflow=\"auto\" />\n      )}\n      {/* By using the tool name as the key on the error boundary, we force it to re-render\n          when switching tools, which ensures we don't show the wrong tool having crashed */}\n      <StudioErrorBoundary key={activeTool?.name} heading={`The ${activeTool?.name} tool crashed`}>\n        <Card flex={1} hidden={searchFullscreenOpen}>\n          {activeTool && activeToolName && (\n            <RouteScope scope={activeToolName}>\n              <Suspense fallback={<LoadingTool />}>\n                {createElement(activeTool.component, {tool: activeTool})}\n              </Suspense>\n            </RouteScope>\n          )}\n        </Card>\n      </StudioErrorBoundary>\n    </Flex>\n  )\n}\n\nfunction LoadingTool() {\n  return (\n    <Flex align=\"center\" height=\"fill\" justify=\"center\">\n      <Spinner muted />\n    </Flex>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {SanityMonogram} from '@sanity/logos'\n\nconst Root = styled.div`\n  position: absolute;\n  width: 18px;\n  height: 18px;\n  background: var(--card-bg-color);\n  bottom: -4px;\n  right: -4px;\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 1px solid var(--card-bg-color);\n  box-sizing: content-box;\n\n  svg {\n    box-sizing: content-box;\n    border: 1px solid var(--card-hairline-soft-color);\n    border-radius: 50%;\n    padding: 2px;\n    width: 12px;\n    height: 12px;\n  }\n\n  &[data-logo='github'] {\n    svg {\n      path {\n        fill: var(--card-fg-color);\n      }\n    }\n  }\n\n  &[data-logo='saml'] {\n    svg {\n      path {\n        fill: var(--card-fg-color);\n      }\n    }\n  }\n`\n\nconst Google = (\n  <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g clipPath=\"url(#clip0)\">\n      <path\n        d=\"M12 6.13764C12 5.72977 11.9663 5.31971 11.8943 4.91846H6.12036V7.22895H9.42684C9.28963 7.97412 8.84876 8.63332 8.20322 9.05221V10.5514H10.1759C11.3342 9.50637 12 7.9631 12 6.13764Z\"\n        fill=\"#4285F4\"\n      />\n      <path\n        d=\"M6.12019 12.0002C7.77118 12.0002 9.16349 11.4688 10.1779 10.5517L8.20529 9.05253C7.65646 9.41851 6.94793 9.62574 6.12244 9.62574C4.52544 9.62574 3.17136 8.56971 2.68552 7.1499H0.649902V8.69537C1.68908 10.7215 3.80567 12.0002 6.12019 12.0002V12.0002Z\"\n        fill=\"#34A853\"\n      />\n      <path\n        d=\"M2.68332 7.14986C2.4269 6.40469 2.4269 5.59778 2.68332 4.8526V3.30713H0.649951C-0.218278 5.00252 -0.218278 6.99995 0.649951 8.69533L2.68332 7.14986V7.14986Z\"\n        fill=\"#FBBC04\"\n      />\n      <path\n        d=\"M6.12019 2.37483C6.99291 2.3616 7.8364 2.68348 8.46845 3.27433L10.2161 1.56131C9.1095 0.542752 7.64071 -0.017233 6.12019 0.000404333C3.80566 0.000404333 1.68908 1.27911 0.649902 3.3074L2.68326 4.85288C3.16686 3.43087 4.52319 2.37483 6.12019 2.37483V2.37483Z\"\n        fill=\"#EA4335\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0\">\n        <rect width=\"12\" height=\"12\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n)\n\nconst GitHub = (\n  <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g clipPath=\"url(#clip0)\">\n      <path\n        d=\"M11.195 3.13503C10.6711 2.22838 9.91808 1.47537 9.01144 0.951471C8.09222 0.414976 7.08837 0.146729 5.99987 0.146729C4.91137 0.146729 3.90752 0.414976 2.98831 0.951471C2.08163 1.47534 1.32862 2.22836 0.804744 3.13503C0.268248 4.05497 0 5.05883 0 6.14659C0 7.45399 0.381531 8.62978 1.14459 9.67394C1.90765 10.7181 2.89327 11.4408 4.10143 11.8419C4.24208 11.868 4.34624 11.8497 4.41392 11.7872C4.44666 11.7577 4.47263 11.7215 4.49006 11.681C4.50749 11.6405 4.51595 11.5967 4.51488 11.5527C4.51488 11.537 4.51361 11.3963 4.51105 11.1307C4.5085 10.8651 4.50722 10.6334 4.50722 10.4355L4.32745 10.4666C4.18407 10.4895 4.03885 10.4986 3.89375 10.494C3.71159 10.4908 3.53001 10.4725 3.35087 10.4393C3.16049 10.4045 2.98119 10.3246 2.82796 10.2064C2.66705 10.0846 2.54715 9.91661 2.48428 9.72484L2.40602 9.54506C2.34022 9.40286 2.25754 9.2691 2.15976 9.14666C2.04775 9.00072 1.93447 8.90176 1.81991 8.84977L1.76518 8.81064C1.72769 8.78356 1.6936 8.75205 1.66367 8.71679C1.63479 8.6841 1.61108 8.64719 1.59334 8.60734C1.57766 8.57085 1.5907 8.54085 1.63247 8.51731C1.67461 8.49405 1.75123 8.48256 1.86068 8.48256L2.01692 8.50582C2.12108 8.52662 2.24996 8.5891 2.40356 8.69326C2.5585 8.79876 2.68797 8.93748 2.78254 9.09932C2.90239 9.31294 3.04695 9.47575 3.21624 9.58775C3.38552 9.69976 3.55609 9.75576 3.72793 9.75576C3.87725 9.7578 4.02641 9.74479 4.17312 9.7169C4.29459 9.69195 4.41264 9.65254 4.52473 9.59952C4.57162 9.25037 4.69931 8.98212 4.90782 8.79477C4.63684 8.76849 4.36827 8.72157 4.10444 8.6544C3.84797 8.58382 3.60133 8.48141 3.37029 8.34958C3.12825 8.218 2.91442 8.04015 2.74095 7.82613C2.57421 7.6178 2.4374 7.34417 2.3305 7.00524C2.2236 6.6663 2.1707 6.27584 2.1718 5.83383C2.1718 5.20357 2.37757 4.66708 2.7891 4.22435C2.59629 3.75006 2.61453 3.21885 2.84383 2.63073C2.99487 2.58385 3.21879 2.61897 3.51559 2.73608C3.81239 2.85319 4.02983 2.95352 4.16792 3.03707C4.30601 3.12025 4.41665 3.19058 4.49983 3.24804C5.48153 2.9773 6.51821 2.9773 7.49991 3.24804L7.79679 3.0606C8.0249 2.92356 8.26549 2.80849 8.51535 2.71693C8.79135 2.61276 9.00231 2.58412 9.14825 2.63101C9.38248 3.21949 9.40327 3.7507 9.21064 4.22462C9.62199 4.66735 9.82776 5.20385 9.82795 5.83411C9.82795 6.27684 9.77459 6.66904 9.66787 7.01071C9.56116 7.35238 9.42325 7.62601 9.25415 7.8316C9.07785 8.04326 8.86311 8.21966 8.62124 8.35149C8.39008 8.48329 8.14337 8.5857 7.88682 8.65632C7.62412 8.72277 7.35674 8.76915 7.087 8.79505C7.35698 9.02927 7.49206 9.3994 7.49225 9.90543V11.5527C7.49115 11.5964 7.49929 11.6398 7.51612 11.6802C7.53295 11.7206 7.5581 11.7569 7.58993 11.7869C7.65505 11.8493 7.75794 11.8675 7.89858 11.8416C9.10693 11.4403 10.0926 10.7177 10.8557 9.67367C11.6188 8.62968 12.0003 7.4539 12.0003 6.14632C11.9997 5.05873 11.7313 4.05497 11.195 3.13503V3.13503Z\"\n        fill=\"black\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0\">\n        <rect width=\"12\" height=\"12\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n)\n\nconst Saml = (\n  <svg width=\"17\" height=\"9\" viewBox=\"0 0 17 9\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M0.0691681 5.98162C0.115833 7.24157 1.07247 8.00221 2.59841 8.00221C4.17102 8.00221 5.12299 7.19957 5.12299 5.86962C5.12299 4.83832 4.55367 4.25501 3.25172 3.96569L2.56108 3.80703C1.8331 3.64837 1.53445 3.38704 1.53445 2.91106C1.53445 2.40708 1.94977 2.09442 2.61708 2.09442C3.27505 2.09442 3.6997 2.43508 3.75103 2.99039H5.00166C4.95966 1.78643 4.01236 0.997795 2.60308 0.997795C1.14713 0.997795 0.218496 1.79577 0.218496 3.05105C0.218496 4.04968 0.815808 4.69366 2.03376 4.96898L2.73374 5.13231C3.51304 5.30497 3.8117 5.54763 3.8117 6.00495C3.8117 6.55093 3.34972 6.90092 2.62174 6.90092C1.85644 6.90092 1.38045 6.56493 1.31979 5.98162H0.0691681Z\" />\n    <path d=\"M5.97695 5.98162C6.02362 7.24157 6.98025 8.00221 8.5062 8.00221C10.0788 8.00221 11.0308 7.19957 11.0308 5.86962C11.0308 4.83832 10.4615 4.25501 9.15951 3.96569L8.46886 3.80703C7.74089 3.64837 7.44223 3.38704 7.44223 2.91106C7.44223 2.40708 7.85755 2.09442 8.52486 2.09442C9.18284 2.09442 9.60749 2.43508 9.65882 2.99039H10.9094C10.8674 1.78643 9.92015 0.997795 8.51086 0.997795C7.05492 0.997795 6.12628 1.79577 6.12628 3.05105C6.12628 4.04968 6.72359 4.69366 7.94155 4.96898L8.64153 5.13231C9.42083 5.30497 9.71949 5.54763 9.71949 6.00495C9.71949 6.55093 9.2575 6.90092 8.52953 6.90092C7.76422 6.90092 7.28824 6.56493 7.22758 5.98162H5.97695Z\" />\n    <path d=\"M16.9852 5.01565V3.98435C16.9852 2.11309 16.0099 0.997795 14.3953 0.997795C12.7807 0.997795 11.8054 2.11309 11.8054 3.98435V5.01565C11.8054 6.88692 12.7807 8.00221 14.3953 8.00221C16.0099 8.00221 16.9852 6.88692 16.9852 5.01565ZM14.3953 6.82625C13.5833 6.82625 13.154 6.21494 13.154 5.00165V3.99835C13.154 2.78506 13.5833 2.17375 14.3953 2.17375C15.2073 2.17375 15.6366 2.78506 15.6366 3.99835V5.00165C15.6366 6.21494 15.2073 6.82625 14.3953 6.82625Z\" />\n  </svg>\n)\n\ninterface Props {\n  provider: string | undefined\n}\n\nexport const LoginProviderLogo = ({provider}: Props) => {\n  const isSaml = provider?.startsWith('saml-')\n  const logoName = isSaml ? 'saml' : provider\n\n  return (\n    <Root data-logo={logoName}>\n      {provider === 'google' && Google}\n      {provider === 'github' && GitHub}\n      {provider === 'sanity' && <SanityMonogram />}\n      {isSaml && Saml}\n    </Root>\n  )\n}\n","import {SunIcon, MoonIcon, LeaveIcon, ChevronDownIcon, CogIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Card,\n  Flex,\n  Label,\n  Menu,\n  MenuButton,\n  MenuButtonProps,\n  MenuDivider,\n  MenuItem,\n  Stack,\n  Text,\n  Tooltip,\n  useRootTheme,\n} from '@sanity/ui'\nimport React, {useCallback, useMemo} from 'react'\nimport styled from 'styled-components'\nimport {UserAvatar} from '../../../../components'\nimport {getProviderTitle} from '../../../../store'\nimport {StudioTheme} from '../../../../theme'\nimport {useColorScheme} from '../../../colorScheme'\nimport {useWorkspace} from '../../../workspace'\nimport {LoginProviderLogo} from './LoginProviderLogo'\n\nconst AVATAR_SIZE = 1\n\nconst StyledMenu = styled(Menu)`\n  min-width: 125px;\n  max-width: 350px;\n`\n\nconst AvatarBox = styled(Box)`\n  position: relative;\n  min-width: ${({theme}) => theme.sanity.avatar.sizes[AVATAR_SIZE].size}px;\n  min-height: ${({theme}) => theme.sanity.avatar.sizes[AVATAR_SIZE].size}px;\n`\n\nexport function UserMenu() {\n  const {currentUser, projectId, auth} = useWorkspace()\n  const theme = useRootTheme().theme as StudioTheme\n  const {scheme, setScheme} = useColorScheme()\n\n  const providerTitle = getProviderTitle(currentUser?.provider)\n\n  const popoverProps: MenuButtonProps['popover'] = useMemo(\n    () => ({\n      placement: 'bottom-end',\n      portal: true,\n      preventOverflow: true,\n      scheme: scheme,\n    }),\n    [scheme]\n  )\n\n  const handleToggleScheme = useCallback(() => {\n    setScheme(scheme === 'dark' ? 'light' : 'dark')\n  }, [scheme, setScheme])\n\n  return (\n    <MenuButton\n      button={\n        <Button mode=\"bleed\" padding={0} paddingX={1}>\n          <Flex align=\"center\" gap={1}>\n            <UserAvatar user=\"me\" size={1} />\n            <Text size={AVATAR_SIZE} muted>\n              <ChevronDownIcon />\n            </Text>\n          </Flex>\n        </Button>\n      }\n      id=\"user-menu\"\n      menu={\n        <StyledMenu>\n          <Card padding={2}>\n            <Box marginBottom={3}>\n              <Label size={1} muted>\n                Signed in as\n              </Label>\n            </Box>\n\n            <Flex align=\"center\">\n              <Tooltip\n                disabled={!providerTitle}\n                portal\n                content={\n                  providerTitle && (\n                    <Box padding={2}>\n                      <Text size={1}>Signed in with {providerTitle}</Text>\n                    </Box>\n                  )\n                }\n              >\n                <AvatarBox marginRight={3}>\n                  <UserAvatar size={AVATAR_SIZE} user=\"me\" />\n                  {currentUser?.provider && <LoginProviderLogo provider={currentUser.provider} />}\n                </AvatarBox>\n              </Tooltip>\n\n              <Stack space={2} flex={1}>\n                <Text size={1} weight=\"semibold\" textOverflow=\"ellipsis\">\n                  {currentUser?.name}\n                </Text>\n\n                <Text size={1} muted textOverflow=\"ellipsis\">\n                  {currentUser?.email}\n                </Text>\n              </Stack>\n            </Flex>\n          </Card>\n\n          {!theme?.__legacy && (\n            <>\n              <MenuDivider />\n\n              <MenuItem\n                icon={scheme === 'dark' ? SunIcon : MoonIcon}\n                onClick={handleToggleScheme}\n                text={scheme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode'}\n              />\n            </>\n          )}\n\n          <MenuDivider />\n\n          <MenuItem\n            as=\"a\"\n            href={`https://sanity.io/manage/project/${projectId}`}\n            target=\"_blank\"\n            text=\"Manage project\"\n            icon={CogIcon}\n          />\n\n          {auth.logout && (\n            <>\n              <MenuDivider />\n              <MenuItem\n                iconRight={LeaveIcon}\n                text=\"Sign out\"\n                disabled={!auth.logout}\n                {...(auth.logout && {onClick: auth.logout})}\n              />\n            </>\n          )}\n        </StyledMenu>\n      }\n      popover={popoverProps}\n    />\n  )\n}\n","import React, {useCallback, useMemo, useState} from 'react'\nimport {Dialog, Grid, Button, Flex, Box, Tooltip, Spinner, Text} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {ComposeIcon} from '@sanity/icons'\nimport {useSource} from '../../source'\nimport {useColorScheme} from '../../colorScheme'\nimport {TemplatePermissionsResult, useTemplatePermissions} from '../../../store'\nimport {DefaultPreview, InsufficientPermissionsMessage} from '../../../components'\nimport {IntentLink} from 'sanity/router'\n\nconst DocumentButton = styled(Button)`\n  text-decoration: none;\n`\n\nconst TooltipContentBox = styled(Box)`\n  max-width: 300px;\n`\n\nconst DisabledButtonWrapper = styled.div`\n  & > * {\n    width: 100%;\n  }\n`\n\nexport function NewDocumentButton() {\n  const [newDocumentButtonEl, setNewDocumentButtonEl] = useState<HTMLButtonElement | null>(null)\n  const [open, setOpen] = useState<boolean>(false)\n\n  const {scheme} = useColorScheme()\n\n  const {\n    __internal: {staticInitialValueTemplateItems},\n    currentUser,\n  } = useSource()\n\n  const [permissions, loading] = useTemplatePermissions({\n    templateItems: staticInitialValueTemplateItems,\n  })\n\n  const keyedPermissions = useMemo(() => {\n    if (!permissions) return {}\n    return permissions.reduce<Record<string, TemplatePermissionsResult>>((acc, next) => {\n      acc[next.id] = next\n      return acc\n    }, {})\n  }, [permissions])\n\n  const hasNewDocumentOptions = staticInitialValueTemplateItems.length > 0\n\n  const canCreateDocument = staticInitialValueTemplateItems.some(\n    (t) => keyedPermissions[t.id]?.granted\n  )\n\n  const tooltipContent = useMemo(() => {\n    if (!hasNewDocumentOptions) {\n      return <Text size={1}>No document types</Text>\n    }\n\n    if (canCreateDocument) {\n      return <Text size={1}>New document...</Text>\n    }\n\n    return (\n      <InsufficientPermissionsMessage\n        currentUser={currentUser}\n        operationLabel=\"create any document\"\n      />\n    )\n  }, [canCreateDocument, currentUser, hasNewDocumentOptions])\n\n  const handleOpen = useCallback(() => {\n    setOpen(true)\n  }, [])\n\n  const handleClose = useCallback(() => {\n    setOpen(false)\n    newDocumentButtonEl?.focus()\n  }, [newDocumentButtonEl])\n\n  const handleLinkClick = useCallback(() => {\n    setOpen(false)\n  }, [])\n\n  return (\n    <>\n      <Tooltip\n        content={<TooltipContentBox padding={2}>{tooltipContent}</TooltipContentBox>}\n        disabled={loading}\n        placement=\"bottom\"\n        portal\n        scheme={scheme}\n      >\n        <Box>\n          <Button\n            aria-label=\"New document…\"\n            disabled={!canCreateDocument || !hasNewDocumentOptions || loading}\n            icon={ComposeIcon}\n            mode=\"bleed\"\n            onClick={handleOpen}\n            ref={setNewDocumentButtonEl}\n            style={{\n              cursor: !canCreateDocument || !hasNewDocumentOptions ? 'not-allowed' : undefined,\n            }}\n          />\n        </Box>\n      </Tooltip>\n\n      {open && (\n        <Dialog\n          header=\"New document\"\n          id=\"new-document-dialog\"\n          onClickOutside={handleClose}\n          onClose={handleClose}\n          scheme={scheme}\n          width={2}\n        >\n          {loading && (\n            <Flex padding={4} align=\"center\" justify=\"center\">\n              <Spinner muted aria-label=\"Loading…\" />\n            </Flex>\n          )}\n\n          {!loading && (\n            <Grid padding={4} columns={[1, 1, 2, 3]} gap={3}>\n              {staticInitialValueTemplateItems.map((template) => {\n                if (keyedPermissions[template.id]?.granted) {\n                  return (\n                    <DocumentButton\n                      forwardedAs={IntentLink}\n                      intent=\"create\"\n                      key={template.id}\n                      mode=\"ghost\"\n                      onClick={handleLinkClick}\n                      padding={2}\n                      params={{template: template.templateId, type: template.schemaType}}\n                    >\n                      <DefaultPreview\n                        media={template.icon}\n                        subtitle={template.subtitle}\n                        title={template.title}\n                      />\n                    </DocumentButton>\n                  )\n                }\n\n                return (\n                  <Tooltip\n                    key={template.id}\n                    content={\n                      <TooltipContentBox padding={2}>\n                        <InsufficientPermissionsMessage\n                          currentUser={currentUser}\n                          operationLabel=\"create this document\"\n                        />\n                      </TooltipContentBox>\n                    }\n                  >\n                    {/* this wrapper is required for the tooltip to show up */}\n                    <DisabledButtonWrapper>\n                      <DocumentButton key={template.id} mode=\"ghost\" padding={2} disabled>\n                        <DefaultPreview\n                          media={template.icon}\n                          subtitle={template.subtitle}\n                          title={template.title}\n                        />\n                      </DocumentButton>\n                    </DisabledButtonWrapper>\n                  </Tooltip>\n                )\n              })}\n            </Grid>\n          )}\n        </Dialog>\n      )}\n    </>\n  )\n}\n","import {Button, ButtonTone, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nconst dot = css`\n  &:after {\n    content: '';\n    width: 6px;\n    height: 6px;\n    background-color: var(--status-button-dot-bg);\n    position: absolute;\n    top: 0;\n    right: 0;\n    border-radius: 50%;\n    transform: translate(-7px, 7px);\n    border: 1px solid var(--card-bg-color);\n  }\n`\n\nexport const StatusButton = styled(Button)(\n  ({theme, active, statusTone}: {theme: Theme; active: boolean; statusTone: ButtonTone}) => {\n    const {color} = theme.sanity\n\n    const tone = color.selectable && color.selectable[statusTone].selected.bg\n    const showDot = active && tone\n\n    return css`\n      position: relative;\n      --status-button-dot-bg: ${tone};\n\n      ${showDot && dot}\n    `\n  }\n)\n","import React, {forwardRef, memo, useCallback, useEffect, useMemo, useState} from 'react'\nimport {orderBy} from 'lodash'\nimport * as PathUtils from '@sanity/util/paths'\nimport {Box, Card, Flex, MenuItem, Text} from '@sanity/ui'\nimport {LinkIcon} from '@sanity/icons'\nimport styled from 'styled-components'\nimport {GlobalPresence} from '../../../../store'\nimport {UserAvatar} from '../../../../components'\nimport {IntentLink} from 'sanity/router'\n\nconst AvatarCard = styled(Card)`\n  background: transparent;\n  margin: calc((-35px + 11px) / 2);\n`\n\ninterface PresenceListRowProps {\n  focused: boolean\n  onFocus: (id: string) => void\n  presence: GlobalPresence\n}\n\nexport const PresenceMenuItem = memo(function PresenceMenuItem(props: PresenceListRowProps) {\n  const {presence, focused, onFocus} = props\n  const [menuItemElement, setMenuItemElement] = useState<HTMLElement | null>(null)\n\n  const lastActiveLocation = orderBy(presence.locations || [], ['lastActiveAt'], ['desc']).find(\n    (location) => location.documentId\n  )\n  const hasLink = Boolean(lastActiveLocation?.documentId)\n\n  /**\n   * This is a workaround to keep focus on the selected menu item\n   * when the list of users in the menu is updated\n   */\n  useEffect(() => {\n    if (focused && menuItemElement) {\n      menuItemElement.focus()\n      menuItemElement.setAttribute('data-selected', '')\n    }\n\n    if (!focused) {\n      menuItemElement?.removeAttribute('data-selected')\n    }\n  }, [menuItemElement, focused])\n\n  const handleFocus = useCallback(() => {\n    onFocus(presence.user.id)\n  }, [onFocus, presence.user.id])\n\n  const LinkComponent = useMemo(\n    () =>\n      // eslint-disable-next-line @typescript-eslint/no-shadow\n      forwardRef(function LinkComponent(linkProps, ref: React.ForwardedRef<HTMLAnchorElement>) {\n        if (!lastActiveLocation?.path) return null\n\n        return (\n          <IntentLink\n            {...linkProps}\n            intent=\"edit\"\n            params={{\n              id: lastActiveLocation?.documentId,\n              path: PathUtils.toString(lastActiveLocation?.path),\n            }}\n            ref={ref}\n          />\n        )\n      }),\n    [lastActiveLocation]\n  )\n\n  return (\n    <MenuItem\n      as={lastActiveLocation ? LinkComponent : 'div'}\n      data-as={lastActiveLocation ? 'a' : 'div'}\n      onFocus={handleFocus}\n      padding={4}\n      paddingRight={3}\n      ref={setMenuItemElement}\n    >\n      <Flex align=\"center\">\n        <AvatarCard>\n          <UserAvatar size={1} key={presence.user.id} user={presence.user} />\n        </AvatarCard>\n\n        <Box flex={1} marginLeft={4}>\n          <Text textOverflow=\"ellipsis\">{presence.user.displayName}</Text>\n        </Box>\n\n        {hasLink && (\n          <Box marginLeft={3}>\n            <Text>\n              <LinkIcon />\n            </Text>\n          </Box>\n        )}\n      </Flex>\n    </MenuItem>\n  )\n})\n","import {CogIcon, UsersIcon} from '@sanity/icons'\nimport {\n  AvatarStack,\n  Box,\n  Button,\n  Card,\n  Menu,\n  MenuButton,\n  MenuDivider,\n  MenuItem,\n  Stack,\n  Text,\n} from '@sanity/ui'\nimport React, {useCallback, useMemo, useState} from 'react'\nimport styled from 'styled-components'\nimport {UserAvatar} from '../../../../components'\nimport {useGlobalPresence} from '../../../../store'\nimport {useColorScheme} from '../../../colorScheme'\nimport {useWorkspace} from '../../../workspace'\nimport {StatusButton} from '../../StatusButton'\nimport {PresenceMenuItem} from './PresenceMenuItem'\n\nconst MAX_AVATARS = 4\n\nconst AvatarStackCard = styled(Card)`\n  background: transparent;\n`\n\nconst StyledMenu = styled(Menu)`\n  max-width: 350px;\n  min-width: 250px;\n`\n\nconst FooterStack = styled(Stack)`\n  position: sticky;\n  bottom: 0;\n`\n\ninterface PresenceMenuProps {\n  collapse?: boolean\n}\n\nexport function PresenceMenu(props: PresenceMenuProps) {\n  const {collapse} = props\n  const presence = useGlobalPresence()\n  const {projectId} = useWorkspace()\n  const {scheme} = useColorScheme()\n  const hasPresence = presence.length > 0\n\n  /**\n   * This id is used as a workaround to keep focus on the selected menu item\n   * when the list of users in the menu is updated\n   */\n  const [focusedId, setFocusedId] = useState<string>()\n\n  const handleItemFocus = useCallback((id: string) => {\n    setFocusedId(id)\n  }, [])\n\n  const handleClearFocusedItem = useCallback(() => {\n    setFocusedId('')\n  }, [])\n\n  const button = useMemo(() => {\n    if (collapse) {\n      return (\n        <StatusButton icon={UsersIcon} mode=\"bleed\" active={hasPresence} statusTone=\"positive\" />\n      )\n    }\n\n    return (\n      <Button mode=\"bleed\" padding={1}>\n        <AvatarStackCard>\n          <AvatarStack maxLength={MAX_AVATARS}>\n            {presence.map((item) => (\n              <UserAvatar key={item.user.id} user={item.user} />\n            ))}\n          </AvatarStack>\n        </AvatarStackCard>\n      </Button>\n    )\n  }, [collapse, hasPresence, presence])\n\n  const popoverProps = useMemo(\n    () => ({\n      constrainSize: true,\n      portal: true,\n      scheme: scheme,\n    }),\n    [scheme]\n  )\n\n  return (\n    <MenuButton\n      button={button}\n      id=\"global-presence-menu\"\n      onClose={handleClearFocusedItem}\n      menu={\n        <StyledMenu padding={1}>\n          {hasPresence && (\n            <Stack space={2}>\n              {presence.map((item) => (\n                <PresenceMenuItem\n                  focused={focusedId === item.user.id}\n                  key={item.user.id}\n                  onFocus={handleItemFocus}\n                  presence={item}\n                />\n              ))}\n            </Stack>\n          )}\n\n          {!hasPresence && (\n            <Box paddingX={3} paddingY={4}>\n              <Stack space={3}>\n                <Text weight=\"semibold\" size={2}>\n                  No one else is here\n                </Text>\n\n                <Text size={1} muted>\n                  Invite people to the project to see their online status.\n                </Text>\n              </Stack>\n            </Box>\n          )}\n\n          <FooterStack space={1}>\n            <MenuDivider />\n\n            <MenuItem\n              as=\"a\"\n              href={`https://sanity.io/manage/project/${projectId}`}\n              iconRight={CogIcon}\n              onFocus={handleClearFocusedItem}\n              paddingY={4}\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n              text=\"Manage members\"\n            />\n          </FooterStack>\n        </StyledMenu>\n      }\n      popover={popoverProps}\n    />\n  )\n}\n","import {Layer, Card, Flex, Text, Box, Button, Stack, useGlobalKeyDown} from '@sanity/ui'\nimport {CloseIcon, LeaveIcon} from '@sanity/icons'\nimport React, {memo, useEffect, useState} from 'react'\nimport styled from 'styled-components'\nimport {useWorkspace} from '../../workspace'\nimport {Tool} from '../../../config'\nimport {useToolMenuComponent} from '../../studio-components-hooks'\nimport {UserAvatar, useRovingFocus} from '../../../components'\nimport {useWorkspaces} from '../../workspaces'\nimport {WorkspaceMenuButton} from './workspace'\n\nconst Root = styled(Layer)`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n`\n\nconst Backdrop = styled(Card)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: var(--card-shadow-penumbra-color);\n  transition: 200ms opacity ease-in-out;\n  pointer-events: none;\n  opacity: 0;\n\n  &[data-open='true'] {\n    opacity: 1;\n    pointer-events: all;\n  }\n`\n\nconst InnerCard = styled(Card)`\n  position: relative;\n  pointer-events: all;\n  flex-direction: column;\n  min-width: 200px;\n  max-width: 280px;\n  transition: 200ms transform ease-in-out;\n  transform: translate3d(calc(-100% - 1px), 0, 0);\n\n  &[data-open='true'] {\n    transform: translate3d(0, 0, 0);\n  }\n`\n\ninterface NavDrawerProps {\n  activeToolName?: string\n  isOpen: boolean\n  onClose: () => void\n  tools: Tool[]\n}\n\nexport const NavDrawer = memo(function NavDrawer(props: NavDrawerProps) {\n  const {activeToolName, isOpen, onClose, tools} = props\n  const [closeButtonElement, setCloseButtonElement] = useState<HTMLButtonElement | null>(null)\n  const [innerCardElement, setInnerCardElement] = useState<HTMLDivElement | null>(null)\n  const tabIndex = isOpen ? 0 : -1\n  const {auth, currentUser} = useWorkspace()\n  const workspaces = useWorkspaces()\n\n  useRovingFocus({\n    rootElement: innerCardElement,\n    navigation: ['tab'],\n  })\n\n  useGlobalKeyDown((e: KeyboardEvent) => {\n    if (e.key === 'Escape' && isOpen) {\n      onClose()\n    }\n  })\n\n  useEffect(() => {\n    if (isOpen) {\n      closeButtonElement?.focus()\n    }\n  }, [closeButtonElement, isOpen])\n\n  const ToolMenu = useToolMenuComponent()\n\n  return (\n    <Root>\n      <Backdrop data-open={isOpen} onClick={onClose} />\n\n      <InnerCard\n        display=\"flex\"\n        height=\"fill\"\n        data-open={isOpen}\n        shadow={1}\n        ref={setInnerCardElement}\n      >\n        <Card borderBottom>\n          <Stack space={3} padding={[3, 3, 4]}>\n            <Flex align=\"center\">\n              <Flex flex={1} align=\"center\" paddingRight={2}>\n                <Flex flex={1} align=\"center\">\n                  <Box>\n                    <UserAvatar size={1} user=\"me\" />\n                  </Box>\n\n                  <Box flex={1} marginLeft={2} title={currentUser?.name || currentUser?.email}>\n                    <Text textOverflow=\"ellipsis\">{currentUser?.name || currentUser?.email}</Text>\n                  </Box>\n                </Flex>\n              </Flex>\n\n              <Box>\n                <Button\n                  icon={CloseIcon}\n                  mode=\"bleed\"\n                  onClick={onClose}\n                  ref={setCloseButtonElement}\n                  tabIndex={tabIndex}\n                  title=\"Close menu\"\n                />\n              </Box>\n            </Flex>\n\n            {workspaces.length > 1 && (\n              <WorkspaceMenuButton text=\"Select workspace\" justify=\"flex-start\" />\n            )}\n          </Stack>\n        </Card>\n\n        <Box flex=\"auto\" overflow=\"auto\" padding={[3, 3, 4]}>\n          <ToolMenu\n            activeToolName={activeToolName}\n            closeSidebar={onClose}\n            context=\"sidebar\"\n            isSidebarOpen={isOpen}\n            tools={tools}\n          />\n        </Box>\n\n        {auth.logout && (\n          <Card flex=\"none\" padding={[3, 3, 4]} borderTop>\n            <Stack>\n              <Button\n                iconRight={LeaveIcon}\n                justify=\"flex-start\"\n                mode=\"bleed\"\n                // eslint-disable-next-line react/jsx-handler-names\n                onClick={auth.logout}\n                tabIndex={tabIndex}\n                text=\"Sign out\"\n              />\n            </Stack>\n          </Card>\n        )}\n      </InnerCard>\n    </Root>\n  )\n})\n","import {css} from 'styled-components'\n\nexport const listStyles = css`\n  --margin-top: ${({theme}) => theme.sanity.space[1]}px;\n\n  &:not([data-list-type='number']) {\n    counter-reset: section;\n  }\n\n  &[data-list-type='bullet'] {\n    --bullet-marker: '●';\n    margin-top: var(--margin-top);\n\n    [data-list-type='bullet'] {\n      --bullet-marker: '○';\n      margin-top: var(--margin-top);\n\n      [data-list-type='bullet'] {\n        --bullet-marker: '■';\n        margin-top: var(--margin-top);\n\n        [data-list-type='bullet'] {\n          --bullet-marker: '●';\n          margin-top: var(--margin-top);\n\n          [data-list-type='bullet'] {\n            --bullet-marker: '○';\n            margin-top: var(--margin-top);\n\n            [data-list-type='bullet'] {\n              --bullet-marker: '■';\n              margin-top: var(--margin-top);\n\n              [data-list-type='bullet'] {\n                --bullet-marker: '●';\n                margin-top: var(--margin-top);\n\n                [data-list-type='bullet'] {\n                  --bullet-marker: '○';\n                  margin-top: var(--margin-top);\n\n                  [data-list-type='bullet'] {\n                    --bullet-marker: '■';\n                    margin-top: var(--margin-top);\n\n                    [data-list-type='bullet'] {\n                      --bullet-marker: '●';\n                      margin-top: var(--margin-top);\n\n                      [data-list-type='bullet'] {\n                        --bullet-marker: '○';\n                        margin-top: var(--margin-top);\n\n                        [data-list-type='bullet'] {\n                          --bullet-marker: '■';\n                          margin-top: var(--margin-top);\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  &[data-list-type='number'] {\n    --bullet-marker: counter(section, number) '. ';\n    counter-reset: section;\n    margin-top: var(--margin-top);\n\n    [data-list-type='number'] {\n      --bullet-marker: counter(section, lower-alpha) '. ';\n      counter-reset: section;\n      margin-top: var(--margin-top);\n\n      [data-list-type='number'] {\n        --bullet-marker: counter(section, lower-roman) '. ';\n        counter-reset: section;\n        margin-top: var(--margin-top);\n\n        [data-list-type='number'] {\n          --bullet-marker: counter(section, number) '. ';\n          counter-reset: section;\n          margin-top: var(--margin-top);\n\n          [data-list-type='number'] {\n            --bullet-marker: counter(section, lower-alpha) '. ';\n            counter-reset: section;\n            margin-top: var(--margin-top);\n\n            [data-list-type='number'] {\n              --bullet-marker: counter(section, lower-roman) '. ';\n              counter-reset: section;\n              margin-top: var(--margin-top);\n\n              [data-list-type='number'] {\n                --bullet-marker: counter(section, number) '. ';\n                counter-reset: section;\n                margin-top: var(--margin-top);\n\n                [data-list-type='number'] {\n                  --bullet-marker: counter(section, lower-alpha) '. ';\n                  counter-reset: section;\n                  margin-top: var(--margin-top);\n\n                  [data-list-type='number'] {\n                    --bullet-marker: counter(section, lower-roman) '. ';\n                    counter-reset: section;\n                    margin-top: var(--margin-top);\n\n                    [data-list-type='number'] {\n                      --bullet-marker: counter(section, number) '. ';\n                      counter-reset: section;\n                      margin-top: var(--margin-top);\n\n                      [data-list-type='number'] {\n                        --bullet-marker: counter(section, lower-alpha) '. ';\n                        counter-reset: section;\n                        margin-top: var(--margin-top);\n\n                        [data-list-type='number'] {\n                          --bullet-marker: counter(section, lower-roman) '. ';\n                          counter-reset: section;\n                          margin-top: var(--margin-top);\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`\n","import {Box, Card} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {listStyles} from './listStyles'\n\nexport const SpaceBox = styled(Box)`\n  ${listStyles};\n`\n\nexport const RootBox = styled(Box)`\n  ${SpaceBox}:first-child {\n    &:not([data-list-type='number'], [data-list-type='bullet']) {\n      margin-top: 0;\n    }\n  }\n\n  ${SpaceBox}:last-child {\n    margin-bottom: 0;\n  }\n`\n\nexport const ListBoxOuter = styled(Box)`\n  line-height: 1;\n`\n\nexport const ListBox = styled(Box)(() => {\n  return css`\n    &:not([hidden]) {\n      position: relative;\n      padding-left: 2rem;\n      display: inline-flex;\n    }\n\n    & > [data-list-prefix] {\n      position: absolute;\n      width: 3rem;\n      left: -2rem;\n      text-align: right;\n\n      &[data-list-prefix='bullet'] {\n        top: -0.1875em;\n\n        & > span:before {\n          content: var(--bullet-marker);\n          font-size: 0.46666em;\n        }\n      }\n\n      &[data-list-prefix='number'] {\n        counter-increment: section;\n\n        & > span:before {\n          font-size: 1em;\n          content: var(--bullet-marker);\n        }\n      }\n    }\n  `\n})\n\nexport const ImageCard = styled(Card)<{$aspectRatio: number; $lqip?: string}>`\n  position: relative;\n  padding-bottom: ${({$aspectRatio}) => $aspectRatio}%;\n  background-image: ${({$lqip}) => `url(${$lqip})`};\n  background-size: cover;\n\n  img {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n`\n","import React from 'react'\nimport {PortableText, PortableTextComponents} from '@portabletext/react'\nimport {Box, Card, Code, Heading, Stack, Text} from '@sanity/ui'\nimport urlBuilder from '@sanity/image-url'\nimport {getProject} from '@sanity/asset-utils'\nimport {StudioBlockContent, MaterializedImage, CodeBlock} from '../module-status'\nimport {ImageCard, ListBox, ListBoxOuter, RootBox, SpaceBox} from './PortableTextContent.styles'\n\ninterface PortableTextContentProps {\n  value: StudioBlockContent[]\n}\n\nfunction Image({value}: {value: MaterializedImage}) {\n  if (!value?.asset) {\n    return null\n  }\n\n  const project = getProject(value.asset)\n  const url = urlBuilder(project).image(value).fit('max').auto('format').url()\n\n  const {asset, alt, caption} = value\n  const {dimensions, lqip} = asset?.metadata || {}\n  const aspectRatio = (dimensions.height / dimensions.width) * 100\n\n  return (\n    <SpaceBox marginY={4}>\n      <Stack space={3} as=\"figure\">\n        <ImageCard radius={1} shadow={1} overflow=\"hidden\" $aspectRatio={aspectRatio} $lqip={lqip}>\n          <img src={url} alt={alt || caption} referrerPolicy=\"strict-origin-when-cross-origin\" />\n        </ImageCard>\n        {caption && (\n          <Text align=\"center\" as=\"figcaption\" muted size={1}>\n            {value.caption}\n          </Text>\n        )}\n      </Stack>\n    </SpaceBox>\n  )\n}\n\nconst components: PortableTextComponents = {\n  types: {\n    image: ({value}) => <Image value={value} />,\n    code: ({value}: {value: CodeBlock}) => (\n      <SpaceBox marginY={4}>\n        <Card padding={3} tone=\"transparent\" radius={1} overflow=\"auto\">\n          <Code size={1} language={value?.language}>\n            {value?.code}\n          </Code>\n        </Card>\n      </SpaceBox>\n    ),\n  },\n  block: {\n    h1: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={5}>{children}</Heading>\n      </SpaceBox>\n    ),\n    h2: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={4}>{children}</Heading>\n      </SpaceBox>\n    ),\n    h3: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={3}>{children}</Heading>\n      </SpaceBox>\n    ),\n    h4: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={2}>{children}</Heading>\n      </SpaceBox>\n    ),\n    h5: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={1}>{children}</Heading>\n      </SpaceBox>\n    ),\n    h6: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={0}>{children}</Heading>\n      </SpaceBox>\n    ),\n    normal: ({children}) => (\n      <SpaceBox marginY={4}>\n        <Text as=\"p\" muted size={1}>\n          {children}\n        </Text>\n      </SpaceBox>\n    ),\n  },\n  list: {\n    bullet: ({children}) => (\n      <SpaceBox data-list-type=\"bullet\" marginBottom={4}>\n        <Box as=\"ul\">{children}</Box>\n      </SpaceBox>\n    ),\n    number: ({children}) => (\n      <SpaceBox data-list-type=\"number\" marginBottom={4}>\n        <Box as=\"ol\">{children}</Box>\n      </SpaceBox>\n    ),\n  },\n  listItem: {\n    bullet: ({children}) => (\n      <ListBoxOuter marginBottom={1} forwardedAs=\"li\">\n        <ListBox>\n          <Text muted size={1} data-list-prefix=\"bullet\" />\n          <Text muted size={1}>\n            {children}\n          </Text>\n        </ListBox>\n      </ListBoxOuter>\n    ),\n    number: ({children}) => (\n      <ListBoxOuter marginBottom={1} forwardedAs=\"li\">\n        <ListBox>\n          <Text muted data-list-prefix=\"number\" size={1} />\n          <Text muted size={1}>\n            {children}\n          </Text>\n        </ListBox>\n      </ListBoxOuter>\n    ),\n  },\n}\n\nexport function PortableTextContent(props: PortableTextContentProps) {\n  const {value} = props\n\n  return (\n    <RootBox>\n      <PortableText value={value} components={components} />\n    </RootBox>\n  )\n}\n","import {Card, Stack, Label, Heading} from '@sanity/ui'\nimport React from 'react'\nimport type {ChangelogItem as ChangeItem} from './module-status'\nimport {PortableTextContent} from './portableTextContent'\n\nconst LABELS: Record<'bugfix' | 'feature', string> = {\n  bugfix: 'Bugfixes',\n  feature: 'Feature',\n}\n\nexport function ChangelogItem(props: ChangeItem) {\n  const {changeType, description, title} = props\n  const label = LABELS[changeType]\n\n  return (\n    <Card padding={4} shadow={1} radius={2}>\n      <Stack space={title ? 4 : 3}>\n        {label && <Label size={1}>{label}</Label>}\n\n        <Stack space={3}>\n          {title && <Heading size={1}>{title}</Heading>}\n\n          {description && <PortableTextContent value={description} />}\n        </Stack>\n      </Stack>\n    </Card>\n  )\n}\n","import {Stack, Flex, Heading, Badge, Text} from '@sanity/ui'\nimport React from 'react'\nimport type {ChangelogItem as ChangeItem} from './module-status'\nimport {ChangelogItem} from './ChangelogItem'\n\ninterface ChangelogListProps {\n  changeItems: ChangeItem[]\n  isLatest: boolean\n  version: string\n}\n\nexport function ChangelogList(props: ChangelogListProps) {\n  const {changeItems, isLatest, version} = props\n\n  const features = changeItems.filter((c) => c.changeType === 'feature')\n  const bugfixes = changeItems.filter((c) => c.changeType === 'bugfix')\n  const bugFixesDescription = bugfixes.map(({description}) => description).flat()\n\n  return (\n    <Stack space={4}>\n      <Flex align=\"center\" gap={2}>\n        <Heading size={1}>v{version}</Heading>\n\n        {isLatest && <Badge tone=\"positive\">Latest</Badge>}\n      </Flex>\n\n      <Stack space={3}>\n        {features?.map((change) => (\n          <ChangelogItem\n            key={change.title}\n            changeType={change.changeType}\n            description={change?.description}\n            title={change.title}\n          />\n        ))}\n\n        {bugFixesDescription.length > 0 && (\n          <ChangelogItem changeType=\"bugfix\" description={bugFixesDescription} />\n        )}\n      </Stack>\n\n      <Flex justify=\"flex-end\">\n        <Text size={1}>\n          <a\n            href=\"https://github.com/sanity-io/sanity/releases\"\n            rel=\"noreferrer noopener\"\n            target=\"_blank\"\n          >\n            See full changelog on GitHub\n          </a>\n        </Text>\n      </Flex>\n    </Stack>\n  )\n}\n","import {Box, Card, Dialog, DialogProps, MenuDivider, Stack, Text} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport type {Changelog} from './module-status'\nimport {ChangelogList} from './ChangelogList'\n\nconst StickyBox = styled(Box)`\n  position: sticky;\n  top: 0;\n  z-index: 1;\n`\n\nconst EMPTY_ARRAY: [] = []\n\ninterface ChangelogDialogProps {\n  changelog: Changelog\n  currentVersion?: string\n  dialogProps?: Omit<DialogProps, 'id'>\n  latestVersion?: string\n}\n\nexport function ChangelogDialog(props: ChangelogDialogProps) {\n  const {changelog, currentVersion, dialogProps, latestVersion} = props\n\n  const changelogWithChangeItems = (changelog || EMPTY_ARRAY).filter(\n    (c) => (c?.changeItems || EMPTY_ARRAY)?.length > 0\n  )\n  const hasChangelog = changelogWithChangeItems.length > 0\n\n  return (\n    <Dialog header=\"Upgrade the Sanity Studio\" width={1} {...dialogProps} id=\"changelog-dialog\">\n      <>\n        <StickyBox>\n          <Card padding={4} borderBottom={hasChangelog}>\n            <Stack space={4}>\n              <Stack space={3}>\n                {hasChangelog && <Text weight=\"semibold\">Changelog</Text>}\n\n                {currentVersion && latestVersion && (\n                  <Text muted size={1}>\n                    Your Sanity Studio is version <code>{currentVersion}</code>. The latest version\n                    is <code>{latestVersion}</code>.\n                  </Text>\n                )}\n              </Stack>\n            </Stack>\n          </Card>\n        </StickyBox>\n\n        {hasChangelog && (\n          <Stack space={5} paddingY={4}>\n            {changelogWithChangeItems?.map((log, index) => {\n              const {changeItems, version} = log\n              const showDivider = index < changelogWithChangeItems.length - 1\n              const isLatest = version === latestVersion\n\n              return (\n                <React.Fragment key={version}>\n                  <Box paddingX={4}>\n                    <ChangelogList\n                      changeItems={changeItems || EMPTY_ARRAY}\n                      version={version}\n                      isLatest={isLatest}\n                    />\n                  </Box>\n\n                  {showDivider && <MenuDivider />}\n                </React.Fragment>\n              )\n            })}\n          </Stack>\n        )}\n      </>\n    </Dialog>\n  )\n}\n","/**\n * TODO: rename to `VERSION`\n *\n * @beta\n */\n// This string is overwritten by prepublish script with `.version` from package.json\n// The version you see here is only read in monorepo development\nexport const SANITY_VERSION = '0.0.0-development' as string\n","import type {Observable} from 'rxjs'\nimport {map, shareReplay} from 'rxjs/operators'\nimport {SANITY_VERSION} from '../../../../../version'\nimport {CheckModuleVersionsOptions, VersionsResponse, ModuleStatusResponse} from './types'\n\nconst sanityModuleVersions = {sanity: SANITY_VERSION}\n\n// Used to keep track of lookups to prevent multiple requests\nconst CACHED_LOOKUPS = new Map<string, Observable<ModuleStatusResponse>>()\n\n/**\n * Retrieve whether or not the installed (or passed) `@sanity`-modules are up\n * to date and/or supported, and if they are outdated; which versions are is\n * the latest available on npm vs which ones are installed locally.\n *\n * @param options - Options to use for resolving module status\n * @internal Not a stable API yet\n */\nexport function checkModuleStatus(\n  options: CheckModuleVersionsOptions\n): Observable<ModuleStatusResponse> {\n  const {moduleVersions = getInstalledModules(), client} = options\n  const query = buildQueryString(moduleVersions)\n  const hash = hashQuery(query.m)\n\n  let request$ = CACHED_LOOKUPS.get(hash)\n  if (request$) {\n    return request$\n  }\n\n  request$ = client.observable\n    .request<VersionsResponse>({\n      url: '/versions',\n      query,\n      json: true,\n      tag: 'module.version-check',\n    })\n    .pipe(\n      map((result) => ({...result, installed: moduleVersions})),\n      shareReplay(1)\n    )\n\n  CACHED_LOOKUPS.set(hash, request$)\n  return request$\n}\n\n/**\n * Returns the currently installed version of the given module\n *\n * @param moduleName - Name of module to get version number for\n * @internal Not a stable API yet\n */\nexport function getInstalledModuleVersion(moduleName: string): string | undefined {\n  const versions = getInstalledModules()\n  return versions[moduleName]\n}\n\n/**\n * Builds to: `{m: ['sanity@3.0.2', '@sanity/vision@3.14.3']}`\n * Serializes to: `?m=sanity@3.0.2&m=@sanity/vision@3.14.3`\n */\nfunction buildQueryString(versions: Record<string, string>): {m: string[]} {\n  return {\n    m: Object.keys(versions)\n      .sort()\n      .filter((pkg) => versions[pkg])\n      .map((pkg) => `${pkg}@${versions[pkg]}`),\n  }\n}\n\n/**\n * Returns an object of installed `@sanity`-modules and their installed version numbers\n */\nfunction getInstalledModules(): Record<string, string> {\n  // Ugly hack, but this allows for testing the version checker even when running\n  // the latest module versions, by pretending we're using an outdated module\n  const fakeOutdatedModule = false\n  if (fakeOutdatedModule) {\n    return {...sanityModuleVersions, '@sanity/vision': '1.118.0'}\n  }\n\n  return sanityModuleVersions\n}\n\n/**\n * Reduce the module array string by stripping sanity-prefixes and joining them together\n */\nfunction hashQuery(items: string[]): string {\n  return items.join(',').replace(/@?sanity[/-]/g, '')\n}\n","import {useMemo} from 'react'\nimport {LoadableState, useLoadable} from '../../../../../util'\nimport {checkModuleStatus} from './moduleStatus'\nimport {CheckModuleVersionsOptions, ModuleStatusResponse} from './types'\n\n/**\n * Retrieve whether or not the installed (or passed) `@sanity`-modules are up\n * to date and/or supported, and if they are outdated; which versions are is\n * the latest available on npm vs which ones are installed locally.\n *\n * @param options - Options to use for resolving module status\n * @internal Not a stable API yet\n */\nexport function useModuleStatus(\n  options: CheckModuleVersionsOptions\n): LoadableState<ModuleStatusResponse | undefined> {\n  const moduleStatus$ = useMemo(() => checkModuleStatus(options), [options])\n\n  return useLoadable(moduleStatus$)\n}\n","import {ToggleArrowRightIcon} from '@sanity/icons'\nimport {Card, Stack, Button, Text, Code, Box} from '@sanity/ui'\nimport React, {useCallback, useState} from 'react'\nimport styled from 'styled-components'\n\nconst COMMANDS = ['npm install sanity@latest']\n\nconst Icon = styled(ToggleArrowRightIcon)`\n  &[data-rotate='true'] {\n    transform: rotate(90deg);\n  }\n`\n\ninterface ChangelogAccordionProps {\n  defaultOpen: boolean\n}\n\nexport function ChangelogAccordion(props: ChangelogAccordionProps) {\n  const {defaultOpen} = props\n  const [open, setOpen] = useState<boolean>(defaultOpen)\n\n  const handleClick = useCallback(() => setOpen((v) => !v), [])\n\n  return (\n    <Card overflow=\"hidden\">\n      <Stack>\n        <Button\n          aria-controls=\"upgrade-commands\"\n          icon={<Icon data-rotate={open} />}\n          justify=\"flex-start\"\n          mode=\"bleed\"\n          onClick={handleClick}\n          padding={4}\n          radius={0}\n          space={2}\n          text=\"How to upgrade\"\n        />\n      </Stack>\n\n      <Card\n        aria-hidden={!open}\n        hidden={!open}\n        id=\"upgrade-commands\"\n        overflow=\"auto\"\n        paddingX={4}\n        paddingY={2}\n        role=\"region\"\n        tone=\"inherit\"\n      >\n        <Stack space={2}>\n          <Card tone=\"transparent\" padding={3} radius={2}>\n            <Stack space={3}>\n              <Code language=\"bash\" size={1}>\n                {[`# Run this command to upgrade`, ...COMMANDS].join('\\n')}\n              </Code>\n            </Stack>\n          </Card>\n\n          <Box paddingX={2} paddingY={3}>\n            <Text size={1} muted>\n              If you have problems upgrading, please get in touch with us in the{' '}\n              <a href=\"https://slack.sanity.io/\" rel=\"noopener noreferrer\" target=\"_blank\">\n                Sanity Community\n              </a>\n              .\n            </Text>\n          </Box>\n        </Stack>\n      </Card>\n    </Card>\n  )\n}\n","import React, {useCallback, useMemo, useState} from 'react'\nimport {PackageIcon} from '@sanity/icons'\nimport {DialogProps} from '@sanity/ui'\nimport {isDev} from '../../../../environment'\nimport {useClient} from '../../../../hooks'\nimport {useColorScheme} from '../../../colorScheme'\nimport {StatusButton} from '../../StatusButton'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../studioClient'\nimport {useModuleStatus} from './module-status'\nimport {ChangelogDialog} from './ChangelogDialog'\nimport {ChangelogAccordion} from './ChangelogAccordion'\n\nconst EMPTY_ARRAY: [] = []\n\nexport function ChangelogButton() {\n  const [open, setOpen] = useState<boolean>(false)\n  const [buttonElement, setButtonElement] = useState<HTMLButtonElement | null>(null)\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const versionedClient = useMemo(\n    () =>\n      client.withConfig({\n        apiVersion: '1',\n      }),\n    [client]\n  )\n\n  // get root scheme\n  const {scheme} = useColorScheme()\n\n  const {value, error, isLoading} = useModuleStatus({\n    client: versionedClient,\n  })\n\n  const {changelog, currentVersion, latestVersion, isUpToDate} = value || {}\n\n  const handleOpen = useCallback(() => setOpen(true), [])\n\n  const handleClose = useCallback(() => {\n    setOpen(false)\n\n    if (buttonElement) {\n      buttonElement.focus()\n    }\n  }, [buttonElement])\n\n  const dialogProps: Omit<DialogProps, 'id'> = useMemo(\n    () => ({\n      footer: <ChangelogAccordion defaultOpen={isDev} />,\n      onClickOutside: handleClose,\n      onClose: handleClose,\n      // force root scheme here to \"break out\" of the navbar's dark scheme\n      scheme,\n    }),\n    [handleClose, scheme]\n  )\n\n  if (error || isLoading || isUpToDate) {\n    return null\n  }\n\n  return (\n    <>\n      <StatusButton\n        active\n        icon={PackageIcon}\n        mode=\"bleed\"\n        onClick={handleOpen}\n        ref={setButtonElement}\n        selected={open}\n        statusTone=\"primary\"\n      />\n\n      {open && (\n        <ChangelogDialog\n          changelog={changelog || EMPTY_ARRAY}\n          currentVersion={currentVersion}\n          dialogProps={dialogProps}\n          latestVersion={latestVersion}\n        />\n      )}\n    </>\n  )\n}\n","import React, {useCallback, useState, useId} from 'react'\nimport {Box, Button, Dialog, Heading, Stack, Text, Tooltip} from '@sanity/ui'\nimport {WarningOutlineIcon} from '@sanity/icons'\nimport {useSchema} from '../../../../hooks'\nimport {SchemaProblemGroups} from '../../../screens/schemaErrors/SchemaProblemGroups'\nimport {useColorScheme} from '../../../colorScheme'\n\nexport function ConfigIssuesButton() {\n  const schema = useSchema()\n  const groupsWithWarnings =\n    schema._validation?.filter((group) =>\n      group.problems.some((problem) => problem.severity === 'warning')\n    ) || []\n\n  // get root scheme\n  const {scheme} = useColorScheme()\n\n  const dialogId = useId()\n\n  const [isDialogOpen, setDialogOpen] = useState(false)\n  const [buttonElement, setButtonElement] = useState<HTMLButtonElement | null>(null)\n  const handleOpen = useCallback(() => setDialogOpen(true), [])\n\n  const handleClose = useCallback(() => {\n    setDialogOpen(false)\n\n    if (buttonElement) {\n      buttonElement.focus()\n    }\n  }, [buttonElement])\n\n  if (groupsWithWarnings.length === 0) {\n    return null\n  }\n\n  return (\n    <>\n      <Tooltip\n        content={\n          <Box padding={2}>\n            <Text size={1}>Found configuration issues</Text>\n          </Box>\n        }\n        placement=\"bottom\"\n        portal\n        scheme={scheme}\n      >\n        <Box>\n          <Button\n            icon={WarningOutlineIcon}\n            mode=\"bleed\"\n            tone=\"caution\"\n            onClick={handleOpen}\n            ref={setButtonElement}\n            selected={isDialogOpen}\n          />\n        </Box>\n      </Tooltip>\n\n      {isDialogOpen && (\n        <Dialog\n          header={\n            <Stack space={3}>\n              <Text weight=\"semibold\">Configuration issues</Text>\n              <Text muted size={1}>\n                Configuration checks are only performed during development and will not be visible\n                in production builds\n              </Text>\n            </Stack>\n          }\n          width={2}\n          onClickOutside={handleClose}\n          onClose={handleClose}\n          // force root scheme here to \"break out\" of the navbar's dark scheme\n          scheme={scheme}\n          id={dialogId}\n        >\n          <Stack space={4} padding={4}>\n            <Heading as=\"h2\" size={1}>\n              Found {groupsWithWarnings.length} schema warnings\n            </Heading>\n            <SchemaProblemGroups problemGroups={groupsWithWarnings} />\n          </Stack>\n        </Dialog>\n      )}\n    </>\n  )\n}\n","import React from 'react'\nimport {Button} from '@sanity/ui'\n\ninterface LogoButtonProps {\n  onClick: React.MouseEventHandler<HTMLElement>\n  children: React.ReactNode\n  href: string\n  title: string\n}\n\nexport function LogoButton(props: LogoButtonProps) {\n  const {title, children, href, onClick} = props\n\n  return (\n    <Button\n      aria-label={title}\n      as=\"a\"\n      data-testid=\"logo\"\n      href={href}\n      mode=\"bleed\"\n      onClick={onClick}\n      padding={3}\n    >\n      {children}\n    </Button>\n  )\n}\n","import {createContext, Dispatch, MouseEvent, SetStateAction} from 'react'\n\nexport interface CommandListContextValue {\n  focusHeaderInputElement: () => void\n  getTopIndex: () => number\n  itemIndices: (number | null)[]\n  onChildMouseDown: (event: MouseEvent) => void\n  onChildMouseEnter: (index: number) => () => void\n  setChildContainerElement: Dispatch<SetStateAction<HTMLDivElement | null>>\n  setContainerElement: Dispatch<SetStateAction<HTMLDivElement | null>>\n  setHeaderInputElement: Dispatch<SetStateAction<HTMLDivElement | null>>\n  setPointerOverlayElement: Dispatch<SetStateAction<HTMLDivElement | null>>\n  setVirtualListScrollToIndex: (scrollToIndex: (index: number, options?: any) => void) => void\n}\n\nexport const CommandListContext = createContext<CommandListContextValue | undefined>(undefined)\n","import {useContext} from 'react'\nimport {CommandListContext, CommandListContextValue} from './CommandListContext'\n\nexport function useCommandList(): CommandListContextValue {\n  const context = useContext(CommandListContext)\n  if (context === undefined) {\n    throw new Error('useCommandList must be used within a CommandListProvider')\n  }\n  return context\n}\n","import {Flex} from '@sanity/ui'\nimport React, {ReactNode} from 'react'\nimport styled from 'styled-components'\nimport {useCommandList} from './useCommandList'\n\ninterface CommandListContainerProps {\n  children: ReactNode\n}\n\nconst ContainerFlex = styled(Flex)`\n  &[data-focused='true'],\n  &[data-hovered='true'] {\n    [data-active='true'] {\n      [data-command-list-item]:not(:active) {\n        background: ${({theme}) => theme.sanity.color.button.bleed.default.hovered.bg};\n        // Disable box-shadow to hide the halo effect when we have keyboard focus over a selected <Button>\n        box-shadow: none;\n      }\n    }\n  }\n`\n\nexport function CommandListContainer({children}: CommandListContainerProps) {\n  const {setContainerElement} = useCommandList()\n\n  return <ContainerFlex ref={setContainerElement}>{children}</ContainerFlex>\n}\n","import {\n  SearchOperatorBase,\n  SearchOperatorButtonValue,\n  SearchOperatorInput,\n  SearchOperatorParams,\n} from './operatorTypes'\n\n/** @internal */\nexport interface SearchOperatorDefinition<TValue = any> extends SearchOperatorBase {\n  buttonValueComponent?: SearchOperatorButtonValue<TValue>\n  groqFilter: (params: SearchOperatorParams<TValue>) => string | null\n  initialValue?: TValue\n  inputComponent?: SearchOperatorInput<TValue>\n  type: string\n}\n\nexport function getOperatorDefinition(\n  operators: SearchOperatorDefinition[],\n  operatorType?: string\n): SearchOperatorDefinition | undefined {\n  return operatorType ? operators.find((f) => f.type === operatorType) : undefined\n}\n\nexport function getOperatorInitialValue(\n  operators: SearchOperatorDefinition[],\n  operatorType?: string\n): SearchOperatorDefinition['initialValue'] | undefined {\n  return getOperatorDefinition(operators, operatorType)?.initialValue\n}\n","import intersection from 'lodash/intersection'\nimport isEmpty from 'lodash/isEmpty'\nimport type {SearchableType} from '../../../../../search'\nimport {isNonNullable} from '../../../../../util'\nimport {getFilterDefinition, OperatorItem, SearchFilterDefinition} from '../definitions/filters'\nimport {getOperatorDefinition, SearchOperatorDefinition} from '../definitions/operators'\nimport type {SearchFieldDefinition, SearchFilter} from '../types'\n\nexport function buildSearchFilter(\n  filterDefinition: SearchFilterDefinition,\n  fieldId?: string\n): SearchFilter {\n  return {\n    fieldId,\n    filterName: filterDefinition.name,\n    operatorType:\n      filterDefinition?.operators.find((operator): operator is OperatorItem => {\n        return operator.type === 'item'\n      })?.name || '',\n  }\n}\n\nexport function generateFilterQuery({\n  fieldDefinitions,\n  filterDefinitions,\n  filters,\n  operatorDefinitions,\n}: {\n  fieldDefinitions: SearchFieldDefinition[]\n  filterDefinitions: SearchFilterDefinition[]\n  filters: SearchFilter[]\n  operatorDefinitions: SearchOperatorDefinition[]\n}): string {\n  return filters\n    .filter((filter) =>\n      validateFilter({\n        filter,\n        filterDefinitions,\n        fieldDefinitions,\n        operatorDefinitions,\n      })\n    )\n    .map((filter) => {\n      return getOperatorDefinition(operatorDefinitions, filter.operatorType)?.groqFilter({\n        fieldPath: resolveFieldPath({filter, fieldDefinitions, filterDefinitions}),\n        value: filter?.value,\n      })\n    })\n    .filter((filter) => !isEmpty(filter))\n    .filter(isNonNullable)\n    .join(' && ')\n}\n\nexport function getFieldFromFilter(\n  fields: SearchFieldDefinition[],\n  filter: SearchFilter\n): SearchFieldDefinition | undefined {\n  return fields.find((field) => field.id === filter?.fieldId)\n}\n\nexport function getFilterKey(filter: SearchFilter): string {\n  return [filter.filterName, ...(filter.fieldId ? [filter.fieldId] : [])].join('-')\n}\n\nexport function narrowDocumentTypes({\n  fieldDefinitions,\n  filters,\n  types,\n}: {\n  fieldDefinitions: SearchFieldDefinition[]\n  filters: SearchFilter[]\n  types: SearchableType[]\n}): string[] {\n  // Get all 'manually' selected document types\n  const selectedDocumentTypes = types.map((type) => type.name)\n\n  const filteredDocumentTypes = fieldDefinitions\n    .filter((field) => filters.map((filter) => filter?.fieldId).includes(field.id))\n    .filter((field) => field.documentTypes.length > 0)\n    .map((field) => field.documentTypes)\n\n  // Get intersecting document types across all active filters (that have at least one document type).\n  // Filters that have no document types (i.e. `_updatedAt` which is available to all) are ignored.\n  const intersectingDocumentTypes = intersection(...filteredDocumentTypes)\n\n  const documentTypes: string[][] = []\n  if (selectedDocumentTypes.length > 0) {\n    documentTypes.push(selectedDocumentTypes)\n  }\n  if (intersectingDocumentTypes.length > 0) {\n    documentTypes.push(intersectingDocumentTypes)\n  }\n\n  return intersection(...documentTypes).sort()\n}\n\nfunction resolveFieldPath({\n  filter,\n  fieldDefinitions,\n  filterDefinitions,\n}: {\n  filter: SearchFilter\n  fieldDefinitions: SearchFieldDefinition[]\n  filterDefinitions: SearchFilterDefinition[]\n}): string | undefined {\n  const fieldDefinition = fieldDefinitions.find((f) => f.id === filter?.fieldId)\n  const filterDefinition = getFilterDefinition(filterDefinitions, filter.filterName)\n\n  if (!filterDefinition) {\n    return undefined\n  }\n\n  switch (filterDefinition.type) {\n    case 'field':\n      return fieldDefinition?.fieldPath\n    case 'pinned':\n      return filterDefinition?.fieldPath\n    default:\n      return undefined\n  }\n}\n\n/**\n * Validate if the supplied filter:\n * - has a valid filter defintion\n * - has a valid field definition (if it references a fieldId)\n * - has a valid operator (if present)\n */\nexport function validateFilter({\n  filter,\n  filterDefinitions,\n  fieldDefinitions,\n  operatorDefinitions,\n}: {\n  filter: SearchFilter\n  filterDefinitions: SearchFilterDefinition[]\n  fieldDefinitions: SearchFieldDefinition[]\n  operatorDefinitions: SearchOperatorDefinition[]\n}): boolean {\n  const filterDef = getFilterDefinition(filterDefinitions, filter.filterName)\n  const operatorDef = getOperatorDefinition(operatorDefinitions, filter.operatorType)\n  const fieldDef = getFieldFromFilter(fieldDefinitions, filter)\n\n  // Fail: No matching filter definition\n  if (!filterDef) {\n    return false\n  }\n\n  // Fail: No matching operator\n  if (!operatorDef) {\n    return false\n  }\n\n  // Fail: No matching field definition\n  if (filter.fieldId) {\n    if (!fieldDef) {\n      return false\n    }\n  }\n\n  // Field filters:\n  if (filterDef.type === 'field') {\n    // Fail: field definition has invalid path\n    if (!fieldDef?.fieldPath) {\n      return false\n    }\n    // Fail: no field ID\n    if (!filter.fieldId) {\n      return false\n    }\n    // Fail: no filter value\n    const hasFilterValue = operatorDef.groqFilter({\n      fieldPath: fieldDef.fieldPath,\n      value: filter.value,\n    })\n    if (!hasFilterValue) {\n      return false\n    }\n  }\n\n  // Pinned filters:\n  if (filterDef.type === 'pinned') {\n    // Fail: no filter value\n    const hasFilterValue = operatorDef.groqFilter({\n      fieldPath: filterDef.fieldPath,\n      value: filter.value,\n    })\n    if (!hasFilterValue) {\n      return false\n    }\n  }\n\n  return true\n}\n","import {Card, Flex, useGlobalKeyDown, useLayer} from '@sanity/ui'\nimport isHotkey from 'is-hotkey'\nimport React, {ReactNode, useCallback, useEffect, useState} from 'react'\nimport FocusLock from 'react-focus-lock'\nimport styled from 'styled-components'\nimport {POPOVER_INPUT_PADDING, POPOVER_RADIUS, POPOVER_VERTICAL_MARGIN} from '../../../constants'\n\ninterface FilterPopoverWrapperProps {\n  anchorElement?: HTMLElement | null\n  children?: ReactNode\n  onClose: () => void\n}\n\nconst isEscape = isHotkey('escape')\n\nconst MAX_HEIGHT = 500 // px\n\nconst HiddenOverlay = styled.div`\n  background: transparent;\n  height: 100%;\n  left: 0;\n  position: fixed;\n  top: 0;\n  width: 100%;\n  z-index: -1;\n`\n\nexport function FilterPopoverWrapper({\n  anchorElement,\n  children,\n  onClose,\n}: FilterPopoverWrapperProps) {\n  const {isTopLayer} = useLayer()\n\n  const handleGlobalKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      if (isEscape(event) && isTopLayer) {\n        onClose()\n      }\n    },\n    [isTopLayer, onClose]\n  )\n\n  useGlobalKeyDown(handleGlobalKeyDown)\n\n  const popoverOffset = usePopoverOffset(anchorElement || null)\n\n  return (\n    <>\n      <HiddenOverlay onClick={onClose} />\n      <FocusLock autoFocus={false} returnFocus>\n        <Card\n          display=\"flex\"\n          overflow=\"hidden\"\n          radius={POPOVER_RADIUS}\n          style={{\n            maxHeight: `min(calc(100vh - ${popoverOffset}px - ${POPOVER_VERTICAL_MARGIN}px - ${POPOVER_INPUT_PADDING}px), ${MAX_HEIGHT}px`,\n            zIndex: 1,\n          }}\n        >\n          <Flex>{children}</Flex>\n        </Card>\n      </FocusLock>\n    </>\n  )\n}\n\nfunction calcPopoverOffset(element: HTMLElement) {\n  const rect = element.getBoundingClientRect()\n  const offset = rect.y + rect.height + POPOVER_VERTICAL_MARGIN\n  return offset\n}\n\nfunction usePopoverOffset(element: HTMLElement | null) {\n  const [offset, setOffset] = useState<number | null>(element && calcPopoverOffset(element))\n\n  const handleWindowResize = useCallback(() => {\n    if (element) {\n      setOffset(calcPopoverOffset(element))\n    }\n  }, [element])\n\n  useEffect(() => {\n    if (element) {\n      setOffset(calcPopoverOffset(element))\n    }\n  }, [element])\n\n  useEffect(() => {\n    window.addEventListener('resize', handleWindowResize)\n    return () => window.removeEventListener('resize', handleWindowResize)\n  }, [handleWindowResize])\n\n  return offset\n}\n","export const supportsTouch = (() => {\n  return typeof window !== 'undefined' && 'ontouchstart' in window\n})()\n","import throttle from 'lodash/throttle'\nimport React, {\n  MouseEvent,\n  ReactNode,\n  useCallback,\n  useEffect,\n  useId,\n  useMemo,\n  useRef,\n  useState,\n} from 'react'\nimport {isNonNullable} from '../../../../../../util'\nimport {VIRTUAL_LIST_SEARCH_ITEM_HEIGHT} from '../../constants'\nimport {supportsTouch} from '../../utils/supportsTouch'\nimport {CommandListContext} from './CommandListContext'\n\n/**\n * This provider adds the following:\n * - Keyboard navigation + events (↑ / ↓ / ENTER) to children with a specified container (`childContainerRef`)\n * - Focus redirection when clicking child elements\n * - Pointer blocking when navigating with arrow keys (to ensure that only one active state is visible at any given time)\n * - ARIA attributes to define a `combobox` header input that controls a separate `listbox`\n *\n * Requirements:\n * - All child items must have `data-index` attributes defined with their index in the list. This is to help with\n * interoperability with virtual lists (whilst preventing costly re-renders)\n * - You have to supply `itemIndices`, an array of (number | null) indicating active indices only.\n * e.g. `[0, null, 1, 2]` indicates a list of 4 items, where the second item is non-interactive (such as a header or divider)\n * - All child items have to use the supplied context functions (`onChildMouseDown` etc) to ensure consistent behaviour\n * when clicking and hovering over items, as well as preventing unwanted focus.\n */\n\ninterface CommandListProviderProps {\n  ariaActiveDescendant?: boolean\n  ariaChildrenLabel: string\n  ariaHeaderLabel: string\n  ariaMultiselectable?: boolean\n  autoFocus?: boolean\n  children?: ReactNode\n  initialSelectedIndex?: number\n  itemIndices: (number | null)[]\n  itemIndicesSelected?: boolean[]\n}\n\n/**\n * @internal\n */\nexport function CommandListProvider({\n  ariaActiveDescendant = true,\n  ariaChildrenLabel,\n  ariaHeaderLabel,\n  ariaMultiselectable = false,\n  autoFocus,\n  children,\n  initialSelectedIndex,\n  itemIndices,\n  itemIndicesSelected,\n}: CommandListProviderProps) {\n  const selectedIndexRef = useRef<number>(-1)\n  const [childContainerElement, setChildContainerElement] = useState<HTMLDivElement | null>(null)\n  const [containerElement, setContainerElement] = useState<HTMLDivElement | null>(null)\n  const [headerInputElement, setHeaderInputElement] = useState<HTMLDivElement | null>(null)\n  const [pointerOverlayElement, setPointerOverlayElement] = useState<HTMLDivElement | null>(null)\n\n  const activeItemCount = itemIndices.filter(isNonNullable).length\n\n  const commandListId = useId()\n\n  const virtualListScrollToIndexRef = useRef<\n    ((index: number, options?: Record<string, any>) => void) | null\n  >(null)\n\n  /**\n   * Toggle pointer overlay element which will kill existing hover states\n   */\n  const enableChildContainerPointerEvents = useCallback(\n    (enabled: boolean) =>\n      pointerOverlayElement?.setAttribute('data-enabled', (!enabled).toString()),\n    [pointerOverlayElement]\n  )\n\n  const getChildDescendantId = useCallback(\n    (index: number) => {\n      return `${commandListId}-item-${index}`\n    },\n    [commandListId]\n  )\n\n  /**\n   * Assign selected state on all child elements.\n   */\n  const handleAssignSelectedState = useCallback(() => {\n    const selectedIndex = selectedIndexRef?.current\n    if (ariaActiveDescendant) {\n      headerInputElement?.setAttribute('aria-activedescendant', getChildDescendantId(selectedIndex))\n    } else {\n      headerInputElement?.removeAttribute('aria-activedescendant')\n    }\n\n    const childElements = Array.from(childContainerElement?.children || []) as HTMLElement[]\n    childElements?.forEach((child) => {\n      const virtualIndex = Number(child.dataset?.index)\n      const childIndex = itemIndices[virtualIndex]\n      if (typeof childIndex === 'number') {\n        child.setAttribute('aria-posinset', (childIndex + 1).toString())\n        if (itemIndicesSelected) {\n          child.setAttribute('aria-selected', itemIndicesSelected[virtualIndex].toString())\n        }\n        child.setAttribute('aria-setsize', activeItemCount.toString())\n        child.setAttribute('data-active', (childIndex === selectedIndex).toString())\n        child.setAttribute('id', getChildDescendantId(childIndex))\n        child.setAttribute('role', 'option')\n        child.setAttribute('tabIndex', '-1')\n      }\n    })\n  }, [\n    activeItemCount,\n    ariaActiveDescendant,\n    childContainerElement,\n    getChildDescendantId,\n    headerInputElement,\n    itemIndices,\n    itemIndicesSelected,\n  ])\n\n  /**\n   * Throttled version of the above, used when DOM mutations are detected in virtual lists\n   */\n  const handleAssignSelectedStateThrottled = useMemo(\n    () => throttle(handleAssignSelectedState, 200),\n    [handleAssignSelectedState]\n  )\n\n  /**\n   * Query search result children for the 'top most' visible element (factoring in overscan)\n   * and obtain its index.\n   */\n  // @todo This only currently returns accurate values for search results.\n  // Consider initializing virtual list within this provider and remove hard-coded values.\n  const handleGetTopIndex = useCallback(() => {\n    const childContainerParentElement = childContainerElement?.parentElement\n    if (childContainerParentElement && childContainerElement) {\n      const childContainerParentElementTop = childContainerParentElement.getBoundingClientRect().top\n      const childContainerElementTop = childContainerElement.getBoundingClientRect().top\n      const index = Math.floor(\n        (childContainerParentElementTop - childContainerElementTop) /\n          VIRTUAL_LIST_SEARCH_ITEM_HEIGHT\n      )\n      return index\n    }\n    return -1\n  }, [childContainerElement])\n\n  /**\n   * Mark an index as active, assign aria-selected state on all children and optionally scroll into view\n   */\n  const setActiveIndex = useCallback(\n    ({\n      index,\n      scrollAlign = false,\n      scrollIntoView = true,\n    }: {\n      index: number\n      scrollAlign?: boolean\n      scrollIntoView?: boolean\n    }) => {\n      selectedIndexRef.current = index\n      handleAssignSelectedState()\n\n      if (scrollIntoView) {\n        const virtualListIndex = itemIndices.indexOf(index)\n        virtualListScrollToIndexRef?.current?.(\n          virtualListIndex,\n          scrollAlign ? {align: 'start'} : {}\n        )\n      }\n    },\n    [handleAssignSelectedState, itemIndices]\n  )\n\n  /**\n   * Focus header input element (non-touch only)\n   */\n  const handleFocusHeaderInputElement = useCallback(() => {\n    if (!supportsTouch) {\n      headerInputElement?.focus()\n    }\n  }, [headerInputElement])\n\n  /**\n   * Focus header input on child item mousedown and prevent nested elements from receiving focus.\n   */\n  const handleChildMouseDown = useCallback(\n    (event: MouseEvent) => {\n      handleFocusHeaderInputElement()\n      event.preventDefault()\n    },\n    [handleFocusHeaderInputElement]\n  )\n\n  /**\n   * Mark hovered child item as active\n   */\n  const handleChildMouseEnter = useCallback(\n    (index: number) => {\n      return function () {\n        setActiveIndex({index, scrollIntoView: false})\n      }\n    },\n    [setActiveIndex]\n  )\n\n  /**\n   * Store virtual list's scrollToIndex function\n   */\n  const handleSetVirtualListScrollToIndex = useCallback(\n    (scrollToIndex: (index: number, options?: Record<string, any>) => void) => {\n      virtualListScrollToIndexRef.current = scrollToIndex\n    },\n    []\n  )\n\n  const scrollToAdjacentItem = useCallback(\n    (direction: 'previous' | 'next') => {\n      let nextIndex = -1\n      if (direction === 'next') {\n        nextIndex =\n          selectedIndexRef.current < activeItemCount - 1 ? selectedIndexRef.current + 1 : 0\n      }\n      if (direction === 'previous') {\n        nextIndex =\n          selectedIndexRef.current > 0 ? selectedIndexRef.current - 1 : activeItemCount - 1\n      }\n\n      // Scroll into view with `react-virtual`\n      setActiveIndex({index: nextIndex, scrollIntoView: true})\n      enableChildContainerPointerEvents(false)\n    },\n    [activeItemCount, enableChildContainerPointerEvents, setActiveIndex]\n  )\n\n  /**\n   * Set active index whenever initial index changes\n   */\n  useEffect(() => {\n    if (typeof initialSelectedIndex !== 'undefined') {\n      setActiveIndex({index: initialSelectedIndex, scrollAlign: true, scrollIntoView: true})\n    }\n  }, [initialSelectedIndex, setActiveIndex])\n\n  /**\n   * Re-enable child pointer events on any mouse move event\n   */\n  useEffect(() => {\n    function handleMouseMove() {\n      enableChildContainerPointerEvents(true)\n    }\n    document.addEventListener('mousemove', handleMouseMove)\n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove)\n    }\n  }, [enableChildContainerPointerEvents])\n\n  /**\n   * Listen to keyboard events on header input element\n   */\n  useEffect(() => {\n    function handleKeyDown(event: KeyboardEvent) {\n      const childElements = Array.from(childContainerElement?.children || []) as HTMLElement[]\n\n      if (!childElements.length) {\n        return\n      }\n\n      if (event.key === 'ArrowDown') {\n        event.preventDefault()\n        scrollToAdjacentItem('next')\n      }\n      if (event.key === 'ArrowUp') {\n        event.preventDefault()\n        scrollToAdjacentItem('previous')\n      }\n      if (event.key === 'Enter') {\n        event.preventDefault()\n        const currentElement = childElements.find(\n          (el) => Number(el.dataset.index) === itemIndices.indexOf(selectedIndexRef.current)\n        )\n\n        if (currentElement) {\n          const clickableElement = currentElement?.querySelector(\n            '[data-command-list-item]'\n          ) as HTMLElement\n          clickableElement?.click()\n        }\n      }\n    }\n    headerInputElement?.addEventListener('keydown', handleKeyDown)\n    return () => {\n      headerInputElement?.removeEventListener('keydown', handleKeyDown)\n    }\n  }, [childContainerElement, headerInputElement, itemIndices, scrollToAdjacentItem])\n\n  /**\n   * Listen to keyboard arrow events on the container element.\n   * On arrow press: focus the header input element and then navigate accordingly.\n   *\n   * Done to account for when users focus a wrapping element with overflow (by dragging its scroll handle)\n   * and then try navigate with the keyboard.\n   */\n  useEffect(() => {\n    function handleKeydown(event: KeyboardEvent) {\n      if (event.key === 'ArrowDown') {\n        event.preventDefault()\n        handleFocusHeaderInputElement()\n        scrollToAdjacentItem('next')\n      }\n      if (event.key === 'ArrowUp') {\n        event.preventDefault()\n        handleFocusHeaderInputElement()\n        scrollToAdjacentItem('previous')\n      }\n    }\n\n    containerElement?.addEventListener('keydown', handleKeydown as EventListener)\n    return () => {\n      containerElement?.removeEventListener('keydown', handleKeydown as EventListener)\n    }\n  }, [\n    childContainerElement,\n    containerElement,\n    handleFocusHeaderInputElement,\n    headerInputElement,\n    scrollToAdjacentItem,\n  ])\n\n  /**\n   * Track focus / blur state on the list's input element and store state in `data-focused` attribute on\n   * a separate container element.\n   */\n  useEffect(() => {\n    function handleMarkContainerAsFocused(focused: boolean) {\n      return () => containerElement?.setAttribute('data-focused', focused.toString())\n    }\n\n    headerInputElement?.addEventListener('blur', handleMarkContainerAsFocused(false))\n    headerInputElement?.addEventListener('focus', handleMarkContainerAsFocused(true))\n    return () => {\n      headerInputElement?.removeEventListener('blur', handleMarkContainerAsFocused(false))\n      headerInputElement?.removeEventListener('focus', handleMarkContainerAsFocused(true))\n    }\n  }, [children, containerElement, headerInputElement])\n\n  /**\n   * Track mouse enter / leave state on child container and store state in `data-hovered` attribute on\n   * a separate container element.\n   */\n  useEffect(() => {\n    function handleMarkChildrenAsHovered(hovered: boolean) {\n      return () => containerElement?.setAttribute('data-hovered', hovered.toString())\n    }\n\n    childContainerElement?.addEventListener('mouseenter', handleMarkChildrenAsHovered(true))\n    childContainerElement?.addEventListener('mouseleave', handleMarkChildrenAsHovered(false))\n    return () => {\n      childContainerElement?.removeEventListener('mouseenter', handleMarkChildrenAsHovered(true))\n      childContainerElement?.removeEventListener('mouseleave', handleMarkChildrenAsHovered(false))\n    }\n  }, [childContainerElement, containerElement])\n\n  /**\n   * Temporarily disable pointer events (or 'flush' existing hover states) on child count changes.\n   */\n  useEffect(() => {\n    enableChildContainerPointerEvents(false)\n  }, [activeItemCount, enableChildContainerPointerEvents])\n\n  /**\n   * Refresh selected state when item indices change (as a result of filtering).\n   * This is to ensure that we correctly clear aria-activedescendant attrs if the filtered array is empty.\n   */\n  useEffect(() => {\n    handleAssignSelectedState()\n  }, [handleAssignSelectedState, itemIndices])\n\n  /**\n   * Re-assign aria-selected state on all child elements on any DOM mutations.\n   *\n   * Useful since virtual lists will constantly mutate the DOM on scroll, and we want to ensure that\n   * new elements coming into view are rendered with the correct selected state.\n   */\n  useEffect(() => {\n    const mutationObserver = new MutationObserver(handleAssignSelectedStateThrottled)\n\n    if (childContainerElement) {\n      mutationObserver.observe(childContainerElement, {\n        childList: true,\n        subtree: true,\n      })\n    }\n\n    return () => {\n      mutationObserver.disconnect()\n    }\n  }, [childContainerElement, handleAssignSelectedStateThrottled])\n\n  /**\n   * Apply initial attributes\n   */\n  useEffect(() => {\n    childContainerElement?.setAttribute('aria-multiselectable', ariaMultiselectable.toString())\n    childContainerElement?.setAttribute('aria-label', ariaChildrenLabel)\n    childContainerElement?.setAttribute('role', 'listbox')\n\n    containerElement?.setAttribute('id', `${commandListId}-children`)\n\n    headerInputElement?.setAttribute('aria-autocomplete', 'list')\n    headerInputElement?.setAttribute('aria-expanded', 'true')\n    headerInputElement?.setAttribute('aria-controls', `${commandListId}-children`)\n    headerInputElement?.setAttribute('aria-label', ariaHeaderLabel)\n    headerInputElement?.setAttribute('role', 'combobox')\n\n    pointerOverlayElement?.setAttribute('data-enabled', 'true')\n  }, [\n    ariaChildrenLabel,\n    ariaHeaderLabel,\n    ariaMultiselectable,\n    childContainerElement,\n    commandListId,\n    containerElement,\n    headerInputElement,\n    pointerOverlayElement,\n  ])\n\n  /**\n   * Focus header input on mount (non-touch only)\n   */\n  useEffect(() => {\n    if (autoFocus) {\n      handleFocusHeaderInputElement()\n    }\n  }, [autoFocus, handleFocusHeaderInputElement])\n\n  return (\n    <CommandListContext.Provider\n      value={{\n        focusHeaderInputElement: handleFocusHeaderInputElement,\n        getTopIndex: handleGetTopIndex,\n        itemIndices,\n        onChildMouseDown: handleChildMouseDown,\n        onChildMouseEnter: handleChildMouseEnter,\n        setChildContainerElement,\n        setContainerElement,\n        setHeaderInputElement,\n        setPointerOverlayElement,\n        setVirtualListScrollToIndex: handleSetVirtualListScrollToIndex,\n      }}\n    >\n      {children}\n    </CommandListContext.Provider>\n  )\n}\n","import {SearchIcon} from '@sanity/icons'\nimport {Box, Flex} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {useSearchState} from '../../../contexts/search/useSearchState'\nimport {useCommandList} from '../../commandList/useCommandList'\nimport {CustomTextInput} from '../../common/CustomTextInput'\n\ninterface FilterPopoverContentHeaderProps {\n  onChange: (e: React.KeyboardEvent<HTMLInputElement>) => void\n  onClear: () => void\n  typeFilter: string\n}\n\nconst SearchHeaderBox = styled(Box)`\n  border-bottom: 1px solid ${({theme}) => theme.sanity.color.base.border};\n  flex-shrink: 0;\n`\n\nconst SearchHeaderContentFlex = styled(Flex)`\n  box-sizing: border-box;\n`\n\nexport function FilterPopoverContentHeader({\n  onChange,\n  onClear,\n  typeFilter,\n}: FilterPopoverContentHeaderProps) {\n  const {\n    state: {fullscreen},\n  } = useSearchState()\n\n  const {setHeaderInputElement} = useCommandList()\n\n  return (\n    <SearchHeaderBox>\n      <SearchHeaderContentFlex align=\"center\" flex={1} padding={1}>\n        <CustomTextInput\n          autoComplete=\"off\"\n          border={false}\n          clearButton={!!typeFilter}\n          fontSize={fullscreen ? 2 : 1}\n          icon={SearchIcon}\n          muted\n          onChange={onChange}\n          onClear={onClear}\n          placeholder=\"Filter\"\n          ref={setHeaderInputElement}\n          smallClearButton\n          spellCheck={false}\n          radius={2}\n          value={typeFilter}\n        />\n      </SearchHeaderContentFlex>\n    </SearchHeaderBox>\n  )\n}\n","import {Box} from '@sanity/ui'\nimport {VirtualItem} from '@tanstack/react-virtual'\nimport React, {ReactNode} from 'react'\nimport {useCommandList} from './useCommandList'\n\ninterface CommandListItemProps {\n  activeIndex: number\n  children: ReactNode\n  fixedHeight?: boolean\n  measure?: (node: Element | null) => void\n  virtualRow: VirtualItem\n}\n\nexport function CommandListItem({\n  activeIndex = -1,\n  children,\n  fixedHeight,\n  measure,\n  virtualRow,\n  ...rest\n}: CommandListItemProps) {\n  const {onChildMouseDown, onChildMouseEnter} = useCommandList()\n\n  return (\n    <Box\n      onMouseDown={onChildMouseDown}\n      onMouseEnter={onChildMouseEnter(activeIndex)}\n      ref={measure}\n      style={{\n        flex: 1,\n        ...(fixedHeight ? {height: `${virtualRow.size}px`} : {}),\n        left: 0,\n        position: 'absolute',\n        top: 0,\n        transform: `translateY(${virtualRow.start}px)`,\n        width: '100%',\n      }}\n      // Required to ensure propagation of data attrs set by `CommandListProvider`\n      {...rest}\n    >\n      {children}\n    </Box>\n  )\n}\n","import {Box, ResponsivePaddingProps} from '@sanity/ui'\nimport React, {Dispatch, ReactNode, SetStateAction} from 'react'\nimport styled from 'styled-components'\nimport {useCommandList} from './useCommandList'\n\ninterface CommandListItemsProps extends ResponsivePaddingProps {\n  children: ReactNode\n  setVirtualListRef: Dispatch<SetStateAction<HTMLDivElement | null>>\n  totalHeight: number\n}\n\n/*\n * Conditionally appears over command list items to cancel existing :hover states for all child elements.\n * It should only appear if hover capabilities are available (not on touch devices)\n */\nconst PointerOverlayDiv = styled.div`\n  bottom: 0;\n  display: none;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: 1;\n\n  @media (hover: hover) {\n    &[data-enabled='true'] {\n      display: block;\n    }\n  }\n`\n\nconst VirtualListBox = styled(Box)`\n  height: 100%;\n  outline: none;\n  overflow-x: hidden;\n  overflow-y: auto;\n  overscroll-behavior: contain;\n  width: 100%;\n`\n\nconst VirtualListChildBox = styled(Box)<{$height: number}>`\n  height: ${({$height}) => `${$height}px`};\n  position: relative;\n  width: 100%;\n`\n\nexport function CommandListItems({\n  children,\n  setVirtualListRef,\n  totalHeight,\n  ...rest\n}: CommandListItemsProps) {\n  const {setChildContainerElement, setPointerOverlayElement} = useCommandList()\n\n  return (\n    <VirtualListBox ref={setVirtualListRef} tabIndex={-1}>\n      <PointerOverlayDiv aria-hidden=\"true\" ref={setPointerOverlayElement} />\n\n      <VirtualListChildBox $height={totalHeight} flex={1} ref={setChildContainerElement} {...rest}>\n        {children}\n      </VirtualListChildBox>\n    </VirtualListBox>\n  )\n}\n","import React, {useMemo} from 'react'\nimport {getFilterDefinition} from '../../definitions/filters'\nimport type {SearchFilter} from '../../types'\nimport {useSearchState} from '../../contexts/search/useSearchState'\nimport {getFieldFromFilter} from '../../utils/filterUtils'\n\ninterface FilterTitleProps {\n  filter: SearchFilter\n  maxLength?: number\n}\n\nexport function FilterTitle({filter, maxLength}: FilterTitleProps) {\n  const {\n    state: {definitions},\n  } = useSearchState()\n\n  const title = useMemo(() => {\n    const filterDef = getFilterDefinition(definitions.filters, filter.filterName)\n    switch (filterDef?.type) {\n      case 'field': {\n        const fieldDefinition = getFieldFromFilter(definitions.fields, filter)\n        if (fieldDefinition?.titlePath) {\n          return fieldDefinition.titlePath[fieldDefinition.titlePath.length - 1]\n        }\n        return null\n      }\n      case 'pinned':\n        return filterDef.title\n      default:\n        return null\n    }\n  }, [definitions, filter])\n\n  if (!title) {\n    return null\n  }\n\n  return maxLength && title.length > maxLength ? (\n    <span>{title.slice(0, maxLength)}…</span>\n  ) : (\n    <span>{title}</span>\n  )\n}\n","import {UnknownIcon} from '@sanity/icons'\nimport React, {createElement} from 'react'\nimport {getFilterDefinition} from '../../../definitions/filters'\nimport type {SearchFilter} from '../../../types'\nimport {useSearchState} from '../../../contexts/search/useSearchState'\n\ninterface FilterIconProps {\n  filter: SearchFilter\n}\n\nexport function FilterIcon({filter}: FilterIconProps) {\n  const {\n    state: {definitions},\n  } = useSearchState()\n\n  const icon = getFilterDefinition(definitions.filters, filter.filterName)?.icon\n  if (icon) {\n    return createElement(icon)\n  }\n  return <UnknownIcon />\n}\n","import {ChevronRightIcon} from '@sanity/icons'\nimport {Box, Flex, Stack, Text} from '@sanity/ui'\nimport React from 'react'\nimport {useSearchState} from '../../../contexts/search/useSearchState'\nimport type {SearchFilter} from '../../../types'\nimport {getFieldFromFilter} from '../../../utils/filterUtils'\nimport {FilterTitle} from '../../common/FilterTitle'\nimport {FilterIcon} from './FilterIcon'\n\ninterface FilterDetailsProps {\n  filter: SearchFilter\n  small?: boolean\n}\n\nexport function FilterDetails({filter, small = true}: FilterDetailsProps) {\n  const {\n    state: {definitions},\n  } = useSearchState()\n  const fieldDefinition = getFieldFromFilter(definitions.fields, filter)\n\n  return (\n    <Stack space={small ? 2 : 3}>\n      {/* Path */}\n      {fieldDefinition?.titlePath && fieldDefinition.titlePath?.length > 1 && (\n        <Box marginLeft={4}>\n          <Text muted size={small ? 0 : 1}>\n            {fieldDefinition.titlePath.slice(0, -1).map((pathTitle, index) => {\n              return (\n                <React.Fragment\n                  // eslint-disable-next-line react/no-array-index-key\n                  key={index}\n                >\n                  <span>{pathTitle}</span>\n                  {index !== fieldDefinition.titlePath.length - 2 && (\n                    <span\n                      style={{\n                        opacity: 0.75,\n                        paddingLeft: '0.25em',\n                        paddingRight: '0.25em',\n                      }}\n                    >\n                      <ChevronRightIcon />\n                    </span>\n                  )}\n                </React.Fragment>\n              )\n            })}\n          </Text>\n        </Box>\n      )}\n\n      <Flex align=\"flex-start\" gap={3}>\n        <Box style={{flexShrink: 0}}>\n          <Text size={small ? 1 : 2}>\n            <FilterIcon filter={filter} />\n          </Text>\n        </Box>\n        <Text size={small ? 1 : 2} weight=\"medium\">\n          <FilterTitle filter={filter} />\n        </Text>\n      </Flex>\n    </Stack>\n  )\n}\n","import {Card, Code, Flex, Inline, Label, Stack, Text, Tooltip} from '@sanity/ui'\nimport {startCase, uniq} from 'lodash'\nimport React, {ReactElement, useMemo} from 'react'\nimport {useSchema} from '../../../../../../../../hooks'\nimport {isNonNullable} from '../../../../../../../../util'\nimport {useSearchState} from '../../../../contexts/search/useSearchState'\nimport type {SearchFilterDefinition} from '../../../../definitions/filters'\nimport type {SearchFieldDefinition} from '../../../../types'\nimport {getSchemaField} from '../../../../utils/getSchemaField'\n\ninterface FilterTooltipProps {\n  children: ReactElement\n  fieldDefinition?: SearchFieldDefinition\n  filterDefinition: SearchFilterDefinition\n  visible?: boolean\n}\n\nconst MAX_VISIBLE_TYPES = 10\n\nexport function FilterTooltip({\n  children,\n  fieldDefinition,\n  filterDefinition,\n  visible,\n}: FilterTooltipProps) {\n  const {\n    state: {documentTypesNarrowed},\n  } = useSearchState()\n\n  const schema = useSchema()\n\n  const fieldDefinitionDocumentTypeTitles = useMemo(() => {\n    if (fieldDefinition?.documentTypes) {\n      return fieldDefinition.documentTypes\n        .map((d) => {\n          const defType = schema.get(d)\n          return defType?.title || startCase(defType?.name)\n        })\n        .filter(isNonNullable)\n        .sort()\n    }\n    return []\n  }, [fieldDefinition?.documentTypes, schema])\n\n  /**\n   * Obtain the shared field description for the current field definition.\n   * Return a description only if this field description is identical (and defined)\n   * across all ALL associated fields.\n   */\n  const fieldDefinitionDescription = useMemo(() => {\n    if (fieldDefinition?.documentTypes) {\n      const descriptions = fieldDefinition.documentTypes\n        .map((d) => {\n          const defType = schema.get(d)\n          if (defType) {\n            const field = getSchemaField(defType, fieldDefinition.fieldPath)\n            return field?.type.description\n          }\n          return null\n        })\n        .sort()\n\n      const uniqueDescriptions = uniq(descriptions)\n      if (uniqueDescriptions.length === 1) {\n        return uniqueDescriptions[0]\n      }\n    }\n    return undefined\n  }, [fieldDefinition?.documentTypes, fieldDefinition?.fieldPath, schema])\n\n  return (\n    <Tooltip\n      content={\n        <Card tone=\"default\" radius={2} style={{maxWidth: '250px'}}>\n          <Stack padding={3} space={4}>\n            {/* Field name */}\n            {fieldDefinition && (\n              <Stack space={2}>\n                <Label muted size={0}>\n                  Field name\n                </Label>\n                <Inline>\n                  <Card tone=\"caution\" padding={1} radius={2}>\n                    <Code size={0}>{fieldDefinition?.name}</Code>\n                  </Card>\n                </Inline>\n              </Stack>\n            )}\n\n            {/* Field description */}\n            {fieldDefinitionDescription && (\n              <Stack space={3}>\n                <Label muted size={0}>\n                  Field description\n                </Label>\n                <Text muted size={0}>\n                  {truncateString(fieldDefinitionDescription)}\n                </Text>\n              </Stack>\n            )}\n\n            {/* Filter description */}\n            {filterDefinition?.description && (\n              <Text muted size={0}>\n                {truncateString(filterDefinition.description)}\n              </Text>\n            )}\n\n            {/* Field document titles */}\n            {!documentTypesNarrowed.length && fieldDefinitionDocumentTypeTitles.length > 0 && (\n              <Stack space={2}>\n                <Flex align=\"center\" gap={1}>\n                  <Label muted size={0}>\n                    Used in document types\n                  </Label>\n                  <Card padding={1} radius={2} tone=\"transparent\">\n                    <Text size={0} muted>\n                      {fieldDefinitionDocumentTypeTitles.length}\n                    </Text>\n                  </Card>\n                </Flex>\n                <Text size={0} weight=\"regular\" muted>\n                  {fieldDefinitionDocumentTypeTitles.slice(0, MAX_VISIBLE_TYPES).join(', ')}\n                  {fieldDefinitionDocumentTypeTitles?.length > MAX_VISIBLE_TYPES\n                    ? ` +${fieldDefinitionDocumentTypeTitles.length - MAX_VISIBLE_TYPES} more`\n                    : ''}\n                </Text>\n              </Stack>\n            )}\n          </Stack>\n        </Card>\n      }\n      disabled={!visible}\n      fallbackPlacements={['left']}\n      placement=\"right\"\n      portal\n    >\n      {children}\n    </Tooltip>\n  )\n}\n\nfunction truncateString(str: string, maxLength = 256) {\n  return str.length > maxLength ? `${str.slice(0, maxLength - 1)}…` : str\n}\n","import {Box, Button, ResponsiveMarginProps, ResponsivePaddingProps} from '@sanity/ui'\nimport React, {useCallback, useEffect, useRef, useState} from 'react'\nimport {useSearchState} from '../../../../contexts/search/useSearchState'\nimport type {FilterMenuItemFilter} from '../../../../types'\nimport {getFilterKey} from '../../../../utils/filterUtils'\nimport {FilterDetails} from '../../common/FilterDetails'\nimport {FilterTooltip} from './FilterTooltip'\n\ninterface FilterMenuItemProps extends ResponsiveMarginProps, ResponsivePaddingProps {\n  item: FilterMenuItemFilter\n  onClose: () => void\n}\n\nexport const MenuItemFilter = React.memo(function MenuItemFilter({\n  item,\n  onClose,\n  ...rest\n}: FilterMenuItemProps) {\n  const [tooltipVisible, setTooltipVisible] = useState(false)\n\n  const {\n    dispatch,\n    state: {filters},\n  } = useSearchState()\n\n  const handleClick = useCallback(() => {\n    dispatch({filter: item.filter, type: 'TERMS_FILTERS_ADD'})\n    onClose?.()\n  }, [dispatch, item.filter, onClose])\n\n  const isAlreadyActive = !!filters.find((f) => getFilterKey(f) === getFilterKey(item.filter))\n\n  const timeoutRef = useRef<ReturnType<typeof setTimeout>>()\n\n  const handleMouseEnter = useCallback(() => {\n    timeoutRef.current = setTimeout(() => setTooltipVisible(true), 500)\n  }, [])\n  const handleMouseLeave = useCallback(() => {\n    setTooltipVisible(false)\n    clearTimeout(timeoutRef.current)\n  }, [])\n\n  useEffect(() => {\n    return () => clearTimeout(timeoutRef.current)\n  }, [])\n\n  // Only enable tooltips if an associated field definition exists, or the filter has a valid description\n  const tooltipEnabled = !!(item.fieldDefinition || item.filterDefinition.description)\n\n  return (\n    <Box {...rest}>\n      <Button\n        data-command-list-item\n        disabled={isAlreadyActive}\n        fontSize={1}\n        justify=\"flex-start\"\n        mode=\"bleed\"\n        onClick={isAlreadyActive ? undefined : handleClick}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n        padding={0}\n        style={{position: 'relative', whiteSpace: 'normal', width: '100%'}}\n        tabIndex={-1}\n        tone={item?.tone}\n      >\n        <FilterTooltip\n          fieldDefinition={item.fieldDefinition}\n          filterDefinition={item.filterDefinition}\n          visible={tooltipEnabled && tooltipVisible}\n        >\n          <Box padding={3}>\n            <FilterDetails filter={item.filter} />\n          </Box>\n        </FilterTooltip>\n      </Button>\n    </Box>\n  )\n})\n","import {Box, Card, Label} from '@sanity/ui'\nimport React from 'react'\nimport type {FilterMenuItemHeader} from '../../../../types'\n\ninterface MenuItemHeaderFields {\n  item: FilterMenuItemHeader\n}\n\nexport const MenuItemHeader = React.memo(function MenuItemHeader({item}: MenuItemHeaderFields) {\n  return (\n    <Box paddingTop={1}>\n      <Card borderBottom padding={3} tone={item?.tone}>\n        <Label muted size={0} textOverflow=\"ellipsis\">\n          {item.title}\n        </Label>\n      </Card>\n    </Box>\n  )\n})\n","import {useVirtualizer} from '@tanstack/react-virtual'\nimport React, {useEffect, useState} from 'react'\nimport type {FilterMenuItem} from '../../../types'\nimport {getFilterKey} from '../../../utils/filterUtils'\nimport {CommandListItem} from '../../commandList/CommandListItem'\nimport {CommandListItems} from '../../commandList/CommandListItems'\nimport {useCommandList} from '../../commandList/useCommandList'\nimport {MenuItemFilter} from './items/MenuItemFilter'\nimport {MenuItemHeader} from './items/MenuItemHeader'\n\ninterface AddFilterVirtualListProps {\n  menuItems: FilterMenuItem[]\n  onClose: () => void\n}\n\nexport function AddFilterVirtualList({menuItems, onClose}: AddFilterVirtualListProps) {\n  const [virtualList, setVirtualListRef] = useState<HTMLDivElement | null>(null)\n\n  const {itemIndices, setVirtualListScrollToIndex} = useCommandList()\n\n  const {getTotalSize, getVirtualItems, measureElement, scrollToIndex} = useVirtualizer({\n    count: menuItems.length,\n    estimateSize: () => 45,\n    getItemKey: (index) => {\n      const menuItem = menuItems[index]\n      switch (menuItem.type) {\n        case 'filter':\n          return [\n            ...(menuItem.group ? [menuItem.group] : []), //\n            getFilterKey(menuItem.filter),\n          ].join('-')\n        case 'header':\n          return `${menuItem.type}-${menuItem.title}`\n        default:\n          return index\n      }\n    },\n    getScrollElement: () => virtualList,\n    overscan: 20,\n  })\n\n  // Scroll to top whenever filters change\n  useEffect(() => {\n    scrollToIndex(0)\n  }, [menuItems.length, scrollToIndex])\n\n  /**\n   * Send react-virtual's `scrollToIndex` function to shared CommandList context\n   */\n  useEffect(() => {\n    setVirtualListScrollToIndex(scrollToIndex)\n  }, [setVirtualListScrollToIndex, scrollToIndex])\n\n  return (\n    <CommandListItems\n      paddingBottom={1}\n      setVirtualListRef={setVirtualListRef}\n      totalHeight={getTotalSize()}\n    >\n      {getVirtualItems().map((virtualRow) => {\n        const menuItem = menuItems[virtualRow.index]\n        return (\n          <CommandListItem\n            activeIndex={menuItem.type === 'filter' ? itemIndices[virtualRow.index] ?? -1 : -1}\n            data-index={virtualRow.index}\n            key={virtualRow.key}\n            measure={measureElement}\n            virtualRow={virtualRow}\n          >\n            {menuItem.type === 'filter' && (\n              <MenuItemFilter item={menuItem} onClose={onClose} paddingTop={1} paddingX={1} />\n            )}\n            {menuItem.type === 'header' && <MenuItemHeader item={menuItem} />}\n          </CommandListItem>\n        )\n      })}\n    </CommandListItems>\n  )\n}\n","import {Schema} from '@sanity/types'\nimport {ButtonTone} from '@sanity/ui'\nimport {difference, startCase} from 'lodash'\nimport {SearchableType} from '../../../../../../../search'\nimport {isNonNullable} from '../../../../../../../util'\nimport {\n  getFilterDefinition,\n  SearchFilterDefinition,\n  SearchFilterPinnedDefinition,\n} from '../../../definitions/filters'\nimport {\n  FilterMenuItem,\n  FilterMenuItemFilter,\n  FilterMenuItemHeader,\n  SearchFieldDefinition,\n  SearchFilter,\n} from '../../../types'\nimport {buildSearchFilter, getFieldFromFilter} from '../../../utils/filterUtils'\n\n/**\n * Creates a flat list of filter menu items based on the current filter text input.\n */\nexport function createFilterMenuItems({\n  documentTypesNarrowed,\n  fieldDefinitions,\n  filterDefinitions,\n  schema,\n  titleFilter,\n  types,\n}: {\n  documentTypesNarrowed: string[]\n  fieldDefinitions: SearchFieldDefinition[]\n  filterDefinitions: SearchFilterDefinition[]\n  schema: Schema\n  titleFilter: string\n  types: SearchableType[]\n}): FilterMenuItem[] {\n  // Construct field filters based on available definitions and current title fitler\n  const fieldFilters = fieldDefinitions\n    .filter((fieldDef) => includesTitleInFieldDefinition(fieldDef, titleFilter))\n    .map((fieldDef) => {\n      const filterDef = getFilterDefinition(filterDefinitions, fieldDef.filterName)\n      if (filterDef) {\n        return buildSearchFilter(filterDef, fieldDef.id)\n      }\n      return null\n    })\n    .filter(isNonNullable)\n\n  const pinnedItems = buildPinnedMenuItems({\n    fieldDefinitions,\n    filterDefinitions,\n    titleFilter,\n  })\n\n  if (documentTypesNarrowed.length === 0) {\n    return [\n      ...pinnedItems,\n      // All fields\n      ...filterGroup({\n        fieldDefinitions,\n        filterDefinitions,\n        filters: fieldFilters,\n        headerTitle: 'All fields',\n        id: 'field',\n      }),\n    ]\n  }\n\n  return [\n    ...pinnedItems,\n    // All shared / narrowed items\n    ...buildFieldMenuItemsNarrowed({\n      documentTypesNarrowed,\n      fieldDefinitions,\n      filterDefinitions,\n      filters: fieldFilters,\n      schema,\n      types,\n    }),\n  ]\n}\n\nfunction filterGroup({\n  fieldDefinitions,\n  filterDefinitions,\n  filters,\n  id,\n  headerTitle,\n  tone,\n}: {\n  fieldDefinitions: SearchFieldDefinition[]\n  filterDefinitions: SearchFilterDefinition[]\n  filters: SearchFilter[]\n  id: string\n  headerTitle?: string\n  tone?: ButtonTone\n}): FilterMenuItem[] {\n  const header: FilterMenuItemHeader = {\n    title: headerTitle || '',\n    tone: tone || 'default',\n    type: 'header',\n  }\n  const filterItems = filters.map(\n    (filter) =>\n      ({\n        fieldDefinition: getFieldFromFilter(fieldDefinitions, filter),\n        filterDefinition: getFilterDefinition(filterDefinitions, filter.filterName),\n        filter,\n        group: id,\n        tone: tone || 'default',\n        type: 'filter',\n      } as FilterMenuItemFilter)\n  )\n\n  return filterItems.length > 0\n    ? [\n        ...(headerTitle ? [header] : []), //\n        ...filterItems,\n      ]\n    : []\n}\n\n/**\n * Construct a flat list of narrowed field menu items, including shared fields.\n * Shared fields should always appear first.\n */\nfunction buildFieldMenuItemsNarrowed({\n  documentTypesNarrowed,\n  fieldDefinitions,\n  filterDefinitions,\n  filters,\n  schema,\n  types,\n}: {\n  documentTypesNarrowed: string[]\n  fieldDefinitions: SearchFieldDefinition[]\n  filterDefinitions: SearchFilterDefinition[]\n  filters: SearchFilter[]\n  schema: Schema\n  types: SearchableType[]\n}) {\n  const sharedFilters = filters.filter((filter) => {\n    const fieldDefinition = getFieldFromFilter(fieldDefinitions, filter)\n    return sharesDocumentTypes(documentTypesNarrowed, fieldDefinition)\n  })\n\n  const sharedItems =\n    documentTypesNarrowed.length > 1 && types.length > 1\n      ? filterGroup({\n          fieldDefinitions,\n          filterDefinitions,\n          filters: sharedFilters,\n          headerTitle: 'Shared fields',\n          id: 'shared',\n          tone: 'primary',\n        })\n      : []\n\n  const groupedItems = documentTypesNarrowed\n    .map((documentType) => {\n      const docType = schema.get(documentType)\n      return {\n        title: docType?.title || startCase(docType?.name) || '(Unknown type)',\n        documentType,\n      }\n    })\n    // Sort groups by title\n    .sort((a, b) => a.title.localeCompare(b.title))\n    .map(({documentType, title}) => {\n      const groupFilters = filters.filter((filter) => {\n        const fieldDefinition = getFieldFromFilter(fieldDefinitions, filter)\n        return includesDocumentTypes([documentType], fieldDefinition)\n      })\n      return filterGroup({\n        fieldDefinitions,\n        filterDefinitions,\n        filters: groupFilters,\n        id: title,\n        headerTitle: title,\n      })\n    })\n    .flat()\n\n  return [...sharedItems, ...groupedItems]\n}\n\n/**\n * Construct a flat list of all pinned filter menu items (both ungrouped and grouped).\n * Un-grouped items should always appear first.\n */\nfunction buildPinnedMenuItems({\n  fieldDefinitions,\n  filterDefinitions,\n  titleFilter,\n}: {\n  fieldDefinitions: SearchFieldDefinition[]\n  filterDefinitions: SearchFilterDefinition[]\n  titleFilter: string\n}) {\n  // Extract all ungrouped pinned filters, these sit above all other items.\n  const ungroupedPinnedFilters = filterDefinitions\n    .filter(isPinnedFilterDefWithoutGroup)\n    .filter((filterDef) => includesTitleInPinnedFilterDefinition(filterDef, titleFilter))\n    .map((filterDef) => buildSearchFilter(filterDef))\n\n  // Extract grouped pinned filters\n  const groupedPinnedFilters = filterDefinitions\n    .filter(isPinnedFilterDefWithGroup)\n    .filter((filterDef) => includesTitleInPinnedFilterDefinition(filterDef, titleFilter))\n    .reduce<Record<string, SearchFilter[]>>((acc, val) => {\n      acc[val.group] = acc[val.group] || []\n      acc[val.group].push(buildSearchFilter(val))\n      return acc\n    }, {})\n\n  return [\n    // Ungrouped\n    ...filterGroup({\n      fieldDefinitions,\n      filterDefinitions,\n      filters: ungroupedPinnedFilters,\n      id: 'pinned-ungrouped',\n      tone: 'primary',\n    }),\n    // Grouped\n    ...Object.entries(groupedPinnedFilters).flatMap(([groupTitle, filters]) =>\n      filterGroup({\n        fieldDefinitions,\n        filterDefinitions,\n        filters,\n        headerTitle: groupTitle,\n        id: groupTitle,\n        tone: 'primary',\n      })\n    ),\n  ]\n}\n\nfunction includesDocumentTypes(documentTypes: string[], fieldDefinition?: SearchFieldDefinition) {\n  return fieldDefinition?.documentTypes.some((type) => documentTypes.includes(type))\n}\n\nfunction includesTitleInFieldDefinition(field: SearchFieldDefinition, currentTitle: string) {\n  const fieldTitle = field.titlePath.join('/')\n  return fieldTitle.toLowerCase().includes(currentTitle.toLowerCase())\n}\n\nfunction includesTitleInPinnedFilterDefinition(\n  filter: SearchFilterPinnedDefinition,\n  currentTitle: string\n) {\n  return filter.title.toLowerCase().includes(currentTitle.toLowerCase())\n}\n\nfunction isPinnedFilterDefWithGroup(\n  filterDef: SearchFilterDefinition\n): filterDef is SearchFilterPinnedDefinition & {group: string} {\n  return filterDef.type === 'pinned' && typeof filterDef?.group !== 'undefined'\n}\n\nfunction isPinnedFilterDefWithoutGroup(\n  filterDef: SearchFilterDefinition\n): filterDef is SearchFilterPinnedDefinition {\n  return filterDef.type === 'pinned' && typeof filterDef?.group === 'undefined'\n}\n\nfunction sharesDocumentTypes(documentTypes: string[], fieldDefinition?: SearchFieldDefinition) {\n  return difference(documentTypes, fieldDefinition?.documentTypes || []).length === 0\n}\n","import {Box, Flex, Text} from '@sanity/ui'\nimport React, {useCallback, useMemo, useState} from 'react'\nimport {useSchema} from '../../../../../../../hooks'\nimport {CommandListProvider} from '../../commandList/CommandListProvider'\nimport {useSearchState} from '../../../contexts/search/useSearchState'\nimport {CommandListContainer} from '../../commandList/CommandListContainer'\nimport {FilterPopoverContentHeader} from '../common/FilterPopoverContentHeader'\nimport {AddFilterVirtualList} from './AddFilterVirtualList'\nimport {createFilterMenuItems} from './createFilterMenuItems'\n\ninterface AddFilterPopoverContentProps {\n  onClose: () => void\n}\n\nexport function AddFilterPopoverContent({onClose}: AddFilterPopoverContentProps) {\n  const [titleFilter, setTitleFilter] = useState('')\n\n  const handleFilterChange = useCallback(\n    (e: React.KeyboardEvent<HTMLInputElement>) => setTitleFilter(e.currentTarget.value),\n    [setTitleFilter]\n  )\n  const handleFilterClear = useCallback(() => setTitleFilter(''), [])\n\n  const schema = useSchema()\n\n  const {\n    state: {\n      documentTypesNarrowed,\n      definitions,\n      terms: {types},\n    },\n  } = useSearchState()\n\n  const filteredMenuItems = useMemo(\n    () =>\n      createFilterMenuItems({\n        documentTypesNarrowed,\n        fieldDefinitions: definitions.fields,\n        filterDefinitions: definitions.filters,\n        schema,\n        titleFilter,\n        types,\n      }),\n    [documentTypesNarrowed, definitions.fields, definitions.filters, schema, titleFilter, types]\n  )\n\n  /**\n   * Create a map of indices for our virtual list, ignoring non-filter items.\n   * This is to ensure navigating via keyboard skips over these non-interactive items.\n   */\n  const itemIndices = useMemo(() => {\n    let i = -1\n    return filteredMenuItems.reduce<(number | null)[]>((acc, val, index) => {\n      const isInteractive = val.type === 'filter'\n      if (isInteractive) {\n        i += 1\n      }\n      acc[index] = isInteractive ? i : null\n      return acc\n    }, [])\n  }, [filteredMenuItems])\n\n  return (\n    <CommandListProvider\n      ariaActiveDescendant={filteredMenuItems.length > 0}\n      ariaChildrenLabel=\"Filters\"\n      ariaHeaderLabel=\"Filter by title\"\n      autoFocus\n      itemIndices={itemIndices}\n    >\n      <Flex direction=\"column\" style={{width: '300px'}}>\n        {/* Filter header */}\n        <FilterPopoverContentHeader\n          onChange={handleFilterChange}\n          onClear={handleFilterClear}\n          typeFilter={titleFilter}\n        />\n\n        <CommandListContainer>\n          {filteredMenuItems.length > 0 && (\n            <AddFilterVirtualList menuItems={filteredMenuItems} onClose={onClose} />\n          )}\n\n          {/* No results */}\n          {filteredMenuItems.length == 0 && (\n            <Box padding={3}>\n              <Text muted size={1} textOverflow=\"ellipsis\">\n                No matches for '{titleFilter}'\n              </Text>\n            </Box>\n          )}\n        </CommandListContainer>\n      </Flex>\n    </CommandListProvider>\n  )\n}\n","import {AddIcon} from '@sanity/icons'\nimport {Button, Popover} from '@sanity/ui'\nimport React, {useCallback, useState} from 'react'\nimport {POPOVER_RADIUS, POPOVER_VERTICAL_MARGIN} from '../../../constants'\nimport {useSearchState} from '../../../contexts/search/useSearchState'\nimport {FilterPopoverWrapper} from '../common/FilterPopoverWrapper'\nimport {AddFilterPopoverContent} from './AddFilterPopoverContent'\n\nexport function AddFilterButton() {\n  const [open, setOpen] = useState(false)\n  const [buttonElement, setButtonElement] = useState<HTMLElement | null>(null)\n\n  const {\n    state: {fullscreen},\n  } = useSearchState()\n\n  const handleClose = useCallback(() => setOpen(false), [])\n  const handleOpen = useCallback(() => setOpen(true), [])\n\n  return (\n    <Popover\n      __unstable_margins={[POPOVER_VERTICAL_MARGIN, 0, 0, 0]}\n      content={\n        <FilterPopoverWrapper anchorElement={buttonElement} onClose={handleClose}>\n          <AddFilterPopoverContent onClose={handleClose} />\n        </FilterPopoverWrapper>\n      }\n      open={open}\n      placement=\"bottom-start\"\n      radius={POPOVER_RADIUS}\n      portal\n    >\n      <Button\n        fontSize={1}\n        icon={AddIcon}\n        mode=\"bleed\"\n        onClick={handleOpen}\n        padding={fullscreen ? 3 : 2}\n        ref={setButtonElement}\n        space={2}\n        text=\"Add filter\"\n      />\n    </Popover>\n  )\n}\n","import {CheckmarkIcon} from '@sanity/icons'\nimport {Box, Button, ResponsiveMarginProps, ResponsivePaddingProps} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport type {SearchableType} from '../../../../../../../../search'\nimport {useSearchState} from '../../../../contexts/search/useSearchState'\n\ninterface DocumentTypeFilterItemProps extends ResponsiveMarginProps, ResponsivePaddingProps {\n  selected: boolean\n  type: SearchableType\n}\n\nexport const DocumentTypeFilterItem = React.memo(function TypeFilterItem({\n  selected,\n  type,\n  ...rest\n}: DocumentTypeFilterItemProps) {\n  const {dispatch} = useSearchState()\n\n  const handleTypeAdd = useCallback(() => {\n    dispatch({type: 'TERMS_TYPE_ADD', schemaType: type})\n  }, [dispatch, type])\n\n  const handleTypeRemove = useCallback(() => {\n    dispatch({type: 'TERMS_TYPE_REMOVE', schemaType: type})\n  }, [dispatch, type])\n\n  const handleClick = useCallback(() => {\n    if (selected) {\n      handleTypeRemove()\n    } else {\n      handleTypeAdd()\n    }\n  }, [handleTypeAdd, handleTypeRemove, selected])\n\n  return (\n    <Box {...rest}>\n      <Button\n        data-command-list-item\n        fontSize={1}\n        iconRight={selected && CheckmarkIcon}\n        justify=\"flex-start\"\n        key={type.title ?? type.name}\n        mode=\"bleed\"\n        onClick={handleClick}\n        selected={selected}\n        style={{width: '100%'}}\n        tabIndex={-1}\n        text={type.title ?? type.name}\n        tone={selected ? 'primary' : 'default'}\n      />\n    </Box>\n  )\n})\n","import {Box, Label, MenuDivider} from '@sanity/ui'\nimport {useVirtualizer} from '@tanstack/react-virtual'\nimport React, {useEffect, useState} from 'react'\nimport {useSearchState} from '../../../contexts/search/useSearchState'\nimport type {DocumentTypeMenuItem} from '../../../types'\nimport {CommandListItem} from '../../commandList/CommandListItem'\nimport {CommandListItems} from '../../commandList/CommandListItems'\nimport {useCommandList} from '../../commandList/useCommandList'\nimport {DocumentTypeFilterItem} from './items/DocumentTypeFilterItem'\n\ninterface DocumentTypesVirtualListProps {\n  filteredItems: DocumentTypeMenuItem[]\n}\n\nexport function DocumentTypesVirtualList({filteredItems}: DocumentTypesVirtualListProps) {\n  const {\n    state: {\n      terms: {types},\n    },\n  } = useSearchState()\n\n  const [virtualList, setVirtualListRef] = useState<HTMLDivElement | null>(null)\n\n  const {getTotalSize, getVirtualItems, measureElement, scrollToIndex} = useVirtualizer({\n    count: filteredItems.length,\n    estimateSize: () => 37,\n    getItemKey: (index) => {\n      const virtualItem = filteredItems[index]\n      switch (virtualItem.type) {\n        case 'divider':\n          return `${virtualItem.type}-${index}`\n        case 'header':\n          return `${virtualItem.type}-${virtualItem.title}`\n        case 'item':\n          return `${virtualItem.type}-${virtualItem.item.name}`\n        default:\n          return index\n      }\n    },\n    getScrollElement: () => virtualList,\n    overscan: 20,\n  })\n\n  const {itemIndices, setVirtualListScrollToIndex} = useCommandList()\n\n  // Scroll to top whenever types are cleared\n  useEffect(() => {\n    if (types.length === 0) {\n      scrollToIndex(0)\n    }\n  }, [scrollToIndex, types.length])\n\n  /**\n   * Send react-virtual's `scrollToIndex` function to shared CommandList context\n   */\n  useEffect(() => {\n    setVirtualListScrollToIndex(scrollToIndex)\n  }, [setVirtualListScrollToIndex, scrollToIndex])\n\n  return (\n    <CommandListItems\n      paddingBottom={1}\n      setVirtualListRef={setVirtualListRef}\n      totalHeight={getTotalSize()}\n    >\n      {getVirtualItems().map((virtualRow) => {\n        const virtualItem = filteredItems[virtualRow.index]\n\n        return (\n          <CommandListItem\n            activeIndex={virtualItem.type === 'item' ? itemIndices[virtualRow.index] ?? -1 : -1}\n            data-index={virtualRow.index}\n            key={virtualRow.key}\n            measure={measureElement}\n            virtualRow={virtualRow}\n          >\n            {virtualItem.type === 'divider' && (\n              <Box padding={1}>\n                <MenuDivider />\n              </Box>\n            )}\n            {virtualItem.type === 'header' && (\n              <Box margin={1} paddingBottom={2} paddingTop={3} paddingX={3}>\n                <Label muted size={0}>\n                  {virtualItem.title}\n                </Label>\n              </Box>\n            )}\n            {virtualItem.type === 'item' && (\n              <DocumentTypeFilterItem\n                key={virtualRow.key}\n                paddingX={1}\n                paddingTop={1}\n                selected={virtualItem.selected}\n                type={virtualItem.item}\n              />\n            )}\n          </CommandListItem>\n        )\n      })}\n    </CommandListItems>\n  )\n}\n","import {Schema} from '@sanity/types'\nimport {Box, Button, Flex, Stack, Text} from '@sanity/ui'\nimport {partition} from 'lodash'\nimport React, {useCallback, useMemo, useState} from 'react'\nimport styled from 'styled-components'\nimport {useSchema} from '../../../../../../../hooks'\nimport type {SearchableType} from '../../../../../../../search'\nimport {useSearchState} from '../../../contexts/search/useSearchState'\nimport type {DocumentTypeMenuItem} from '../../../types'\nimport {getSelectableOmnisearchTypes} from '../../../utils/selectors'\nimport {CommandListContainer} from '../../commandList/CommandListContainer'\nimport {CommandListProvider} from '../../commandList/CommandListProvider'\nimport {useCommandList} from '../../commandList/useCommandList'\nimport {FilterPopoverContentHeader} from '../common/FilterPopoverContentHeader'\nimport {DocumentTypesVirtualList} from './DocumentTypesVirtualList'\n\nconst ClearButtonBox = styled(Box)`\n  border-top: 1px solid ${({theme}) => theme.sanity.color.base.border};\n  flex-shrink: 0;\n`\n\nexport function DocumentTypesPopoverContent() {\n  const [typeFilter, setTypeFilter] = useState('')\n\n  const schema = useSchema()\n\n  const {\n    dispatch,\n    state: {\n      terms: {types: selectedTypes},\n    },\n  } = useSearchState()\n\n  // Get a snapshot of initial selected types\n  const [selectedTypesSnapshot, setSelectedTypesSnapshot] = useState(selectedTypes)\n\n  const filteredItems = useGetVirtualItems(schema, selectedTypes, selectedTypesSnapshot, typeFilter)\n\n  const handleFilterChange = useCallback(\n    (e: React.KeyboardEvent<HTMLInputElement>) => setTypeFilter(e.currentTarget.value),\n    [setTypeFilter]\n  )\n  const handleFilterClear = useCallback(() => setTypeFilter(''), [])\n\n  const handleTypesClear = useCallback(() => {\n    setSelectedTypesSnapshot([])\n    dispatch({type: 'TERMS_TYPES_CLEAR'})\n  }, [dispatch])\n\n  /**\n   * Create a map of indices for our virtual list, ignoring non-filter items.\n   * This is to ensure navigating via keyboard skips over these non-interactive items.\n   */\n  const itemIndices = useMemo(() => {\n    let i = -1\n    return filteredItems.reduce<(number | null)[]>((acc, val, index) => {\n      const isInteractive = val.type === 'item'\n      if (isInteractive) {\n        i += 1\n      }\n      acc[index] = isInteractive ? i : null\n      return acc\n    }, [])\n  }, [filteredItems])\n\n  const itemIndicesSelected = useMemo(() => {\n    return filteredItems.map((f) => f.type === 'item' && f.selected)\n  }, [filteredItems])\n\n  return (\n    <CommandListProvider\n      ariaActiveDescendant={filteredItems.length > 0}\n      ariaChildrenLabel=\"Document types\"\n      ariaHeaderLabel=\"Filter by document type\"\n      ariaMultiselectable\n      autoFocus\n      itemIndices={itemIndices}\n      itemIndicesSelected={itemIndicesSelected}\n    >\n      <Flex direction=\"column\" style={{width: '250px'}}>\n        {/* Search header */}\n        <FilterPopoverContentHeader\n          onChange={handleFilterChange}\n          onClear={handleFilterClear}\n          typeFilter={typeFilter}\n        />\n\n        <CommandListContainer>\n          {filteredItems.length > 0 && <DocumentTypesVirtualList filteredItems={filteredItems} />}\n\n          {/* No results */}\n          {!filteredItems.length && (\n            <Box padding={3}>\n              <Text muted size={1} textOverflow=\"ellipsis\">\n                No matches for '{typeFilter}'\n              </Text>\n            </Box>\n          )}\n        </CommandListContainer>\n\n        {/* Clear button */}\n        {!typeFilter && selectedTypes.length > 0 && (\n          <ClearButton onClick={handleTypesClear} selectedTypes={selectedTypes} />\n        )}\n      </Flex>\n    </CommandListProvider>\n  )\n}\n\nfunction ClearButton({\n  onClick,\n  selectedTypes,\n}: {\n  onClick: () => void\n  selectedTypes: SearchableType[]\n}) {\n  const {focusHeaderInputElement} = useCommandList()\n\n  const handleClear = useCallback(() => {\n    focusHeaderInputElement()\n    onClick?.()\n  }, [focusHeaderInputElement, onClick])\n\n  return (\n    <ClearButtonBox padding={1}>\n      <Stack>\n        <Button\n          aria-label=\"Clear checked filters\"\n          data-name=\"type-filter-button\"\n          disabled={selectedTypes.length === 0}\n          fontSize={1}\n          mode=\"bleed\"\n          onClick={handleClear}\n          padding={3}\n          text=\"Clear\"\n          tone=\"primary\"\n        />\n      </Stack>\n    </ClearButtonBox>\n  )\n}\n\nfunction useGetVirtualItems(\n  schema: Schema,\n  selectedTypes: SearchableType[],\n  selectedTypesSnapshot: SearchableType[],\n  typeFilter: string\n) {\n  return useMemo(() => {\n    const [itemsSelected, itemsUnselected] = partition(\n      getSelectableOmnisearchTypes(schema, typeFilter),\n      (type) => selectedTypesSnapshot.includes(type)\n    )\n\n    const hasSelectedItems = itemsSelected.length > 0\n    const hasUnselectedItems = itemsSelected.length > 0\n\n    const items: DocumentTypeMenuItem[] = []\n    if (hasSelectedItems) {\n      items.push({title: 'Selected', type: 'header'})\n    }\n    itemsSelected.forEach((item) =>\n      items.push({item, selected: selectedTypes.includes(item), type: 'item'})\n    )\n    if (hasSelectedItems && hasUnselectedItems) {\n      items.push({type: 'divider'})\n    }\n    itemsUnselected.forEach((item) =>\n      items.push({item, selected: selectedTypes.includes(item), type: 'item'})\n    )\n    return items\n  }, [schema, selectedTypes, selectedTypesSnapshot, typeFilter])\n}\n","import {SelectIcon} from '@sanity/icons'\nimport {Button, Popover, Theme, useClickOutside} from '@sanity/ui'\nimport React, {useCallback, useMemo, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport {POPOVER_RADIUS, POPOVER_VERTICAL_MARGIN} from '../../../constants'\nimport {useSearchState} from '../../../contexts/search/useSearchState'\nimport {documentTypesTruncated} from '../../../utils/documentTypesTruncated'\nimport {FilterPopoverWrapper} from '../common/FilterPopoverWrapper'\nimport {DocumentTypesPopoverContent} from './DocumentTypesPopoverContent'\n\nconst StyledButton = styled(Button)(({theme}: {theme: Theme}) => {\n  const {regular} = theme.sanity.fonts.text.weights\n\n  return css`\n    [data-ui='Text'] {\n      font-weight: ${regular};\n    }\n  `\n})\n\nexport function DocumentTypesButton() {\n  const [open, setOpen] = useState(false)\n  const [buttonElement, setButtonElement] = useState<HTMLElement | null>(null)\n  const [popoverElement, setPopoverElement] = useState<HTMLElement | null>(null)\n\n  const {\n    state: {\n      fullscreen,\n      terms: {types},\n    },\n  } = useSearchState()\n\n  const handleClose = useCallback(() => setOpen(false), [])\n  const handleOpen = useCallback(() => setOpen(true), [])\n\n  useClickOutside(handleClose, [buttonElement, popoverElement])\n\n  const title = useMemo(() => documentTypesTruncated({types}), [types])\n\n  return (\n    <Popover\n      __unstable_margins={[POPOVER_VERTICAL_MARGIN, 0, 0, 0]}\n      content={\n        <FilterPopoverWrapper anchorElement={buttonElement} onClose={handleClose}>\n          <DocumentTypesPopoverContent />\n        </FilterPopoverWrapper>\n      }\n      open={open}\n      placement=\"bottom-start\"\n      portal\n      radius={POPOVER_RADIUS}\n      ref={setPopoverElement}\n    >\n      <StyledButton\n        fontSize={1}\n        iconRight={SelectIcon}\n        mode=\"ghost\"\n        onClick={handleOpen}\n        padding={fullscreen ? 3 : 2}\n        ref={setButtonElement}\n        style={{maxWidth: '100%'}}\n        text={title}\n        tone=\"default\"\n      />\n    </Popover>\n  )\n}\n","import {Box, Flex} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {TextWithTone} from '../../../../../../components'\nimport {useSearchState} from '../../contexts/search/useSearchState'\nimport {getOperatorDefinition} from '../../definitions/operators'\nimport type {SearchFilter} from '../../types'\nimport {FilterTitle} from './FilterTitle'\n\ninterface FilterLabelProps {\n  filter: SearchFilter\n  fontSize?: number\n  showContent?: boolean\n}\n\nconst CustomBox = styled(Box)<{$flexShrink?: number}>`\n  flex-shrink: ${({$flexShrink = 0}) => $flexShrink};\n`\n\nexport function FilterLabel({filter, fontSize = 1, showContent = true}: FilterLabelProps) {\n  const {\n    state: {definitions, fullscreen},\n  } = useSearchState()\n\n  const operator = getOperatorDefinition(definitions.operators, filter.operatorType)\n\n  const ButtonValue = operator?.buttonValueComponent\n\n  return (\n    <Flex align=\"center\" gap={1}>\n      {/* Title */}\n      <CustomBox $flexShrink={fullscreen ? 1 : 0}>\n        <TextWithTone tone=\"default\" size={fontSize} textOverflow=\"ellipsis\" weight=\"semibold\">\n          <FilterTitle filter={filter} maxLength={fullscreen ? 25 : 40} />\n        </TextWithTone>\n      </CustomBox>\n      {/* Operator */}\n      {showContent && operator?.buttonLabel && (\n        <CustomBox $flexShrink={0}>\n          <TextWithTone tone=\"default\" size={fontSize} textOverflow=\"ellipsis\" weight=\"regular\">\n            {operator.buttonLabel}\n          </TextWithTone>\n        </CustomBox>\n      )}\n      {/* Value */}\n      {showContent && ButtonValue && (\n        <CustomBox $flexShrink={1}>\n          <TextWithTone tone=\"default\" size={fontSize} textOverflow=\"ellipsis\" weight=\"semibold\">\n            <ButtonValue value={filter?.value} />\n          </TextWithTone>\n        </CustomBox>\n      )}\n    </Flex>\n  )\n}\n","import {ErrorOutlineIcon} from '@sanity/icons'\nimport {Box, Flex, ResponsivePaddingProps, Stack} from '@sanity/ui'\nimport React from 'react'\nimport {TextWithTone} from '../../../../../../../components'\n\nexport function FilterError(props: ResponsivePaddingProps) {\n  return (\n    <Box {...props}>\n      <Flex align=\"flex-start\" gap={3}>\n        <TextWithTone tone=\"critical\">\n          <ErrorOutlineIcon />\n        </TextWithTone>\n        <Stack space={4}>\n          <TextWithTone size={1} tone=\"critical\" weight=\"semibold\">\n            An error occurred whilst displaying this filter.\n          </TextWithTone>\n          <TextWithTone size={1} tone=\"critical\">\n            This may indicate invalid options defined in your schema.\n          </TextWithTone>\n        </Stack>\n      </Flex>\n    </Box>\n  )\n}\n","import {SelectIcon} from '@sanity/icons'\nimport {Box, Button, Flex, Inline, Menu, MenuButton, MenuDivider, MenuItem, Text} from '@sanity/ui'\nimport React, {createElement, useCallback, useId} from 'react'\nimport {useSearchState} from '../../../contexts/search/useSearchState'\nimport {getFilterDefinition} from '../../../definitions/filters'\nimport {getOperatorDefinition, SearchOperatorDefinition} from '../../../definitions/operators'\nimport type {SearchFilter} from '../../../types'\nimport {getFilterKey} from '../../../utils/filterUtils'\n\ninterface OperatorsMenuButtonProps {\n  filter: SearchFilter\n  operator?: SearchOperatorDefinition\n}\n\nfunction CustomMenuItem({\n  onClick,\n  operator,\n  selected,\n}: {\n  onClick: (operatorType: string) => void\n  operator: SearchOperatorDefinition\n  selected: boolean\n}) {\n  const handleClick = useCallback(() => onClick(operator.type), [onClick, operator.type])\n\n  return (\n    <MenuItem onClick={handleClick} padding={3} pressed={selected} tone=\"default\">\n      <Flex align=\"center\" justify=\"space-between\" gap={3}>\n        <Box paddingRight={2}>\n          <Text size={1} weight=\"regular\">\n            {operator.label}\n          </Text>\n        </Box>\n        {operator?.icon && (\n          <Text muted size={1}>\n            {createElement(operator.icon)}\n          </Text>\n        )}\n      </Flex>\n    </MenuItem>\n  )\n}\n\nexport function OperatorsMenuButton({filter, operator}: OperatorsMenuButtonProps) {\n  const menuButtonId = useId()\n\n  const {dispatch, state} = useSearchState()\n  const operatorItems = getFilterDefinition(state.definitions.filters, filter.filterName)?.operators\n\n  const handleClick = useCallback(\n    (operatorType: string) => {\n      dispatch({\n        filterKey: getFilterKey(filter),\n        operatorType,\n        type: 'TERMS_FILTERS_SET_OPERATOR',\n      })\n    },\n    [dispatch, filter]\n  )\n\n  if (!operator || !operatorItems || operatorItems.length <= 1) {\n    return null\n  }\n\n  return (\n    <Inline>\n      <MenuButton\n        button={\n          <Button mode=\"ghost\" padding={3}>\n            <Flex align=\"center\" gap={2} justify=\"space-between\">\n              <Text size={state.fullscreen ? 2 : 1} weight=\"regular\">\n                {operator.label}\n              </Text>\n              <Box marginLeft={1}>\n                <Text size={1}>\n                  <SelectIcon />\n                </Text>\n              </Box>\n            </Flex>\n          </Button>\n        }\n        id={menuButtonId || ''}\n        menu={\n          <Menu>\n            {operatorItems.map((item, index) => {\n              if (item.type === 'item') {\n                const menuOperator = getOperatorDefinition(state.definitions.operators, item.name)\n                if (!menuOperator) {\n                  return null\n                }\n                return (\n                  <CustomMenuItem\n                    // eslint-disable-next-line react/no-array-index-key\n                    key={index}\n                    onClick={handleClick}\n                    operator={menuOperator}\n                    selected={operator.type === item.name}\n                  />\n                )\n              }\n              if (item.type === 'divider') {\n                // eslint-disable-next-line react/no-array-index-key\n                return <MenuDivider key={index} />\n              }\n              return null\n            })}\n          </Menu>\n        }\n        placement=\"bottom-start\"\n        popover={{\n          constrainSize: true,\n          portal: false,\n          radius: 2,\n        }}\n      />\n    </Inline>\n  )\n}\n","import {TrashIcon} from '@sanity/icons'\nimport {Box, Button, Card, ErrorBoundary, Flex, Stack, Text} from '@sanity/ui'\nimport React, {ErrorInfo, useCallback, useState} from 'react'\nimport FocusLock from 'react-focus-lock'\nimport {useSearchState} from '../../../contexts/search/useSearchState'\nimport {getFilterDefinition} from '../../../definitions/filters'\nimport {getOperatorDefinition} from '../../../definitions/operators'\nimport type {SearchFilter} from '../../../types'\nimport {getFieldFromFilter, getFilterKey} from '../../../utils/filterUtils'\nimport {supportsTouch} from '../../../utils/supportsTouch'\nimport {FilterDetails} from '../common/FilterDetails'\nimport {FilterError} from './FilterError'\nimport {OperatorsMenuButton} from './OperatorsMenuButton'\n\ninterface FilterFormProps {\n  filter: SearchFilter\n}\n\ninterface ErrorParams {\n  error: Error\n  info: ErrorInfo\n}\n\nexport function FilterForm({filter}: FilterFormProps) {\n  const [errorParams, setErrorParams] = useState<ErrorParams | null>(null)\n  const {\n    dispatch,\n    state: {definitions, fullscreen},\n  } = useSearchState()\n\n  const filterDefinition = getFilterDefinition(definitions.filters, filter.filterName)\n  const operator = getOperatorDefinition(definitions.operators, filter.operatorType)\n  const fieldDefinition = getFieldFromFilter(definitions.fields, filter)\n  const filterKey = getFilterKey(filter)\n\n  const handleClose = useCallback(() => {\n    dispatch({\n      filterKey: getFilterKey(filter),\n      type: 'TERMS_FILTERS_REMOVE',\n    })\n  }, [dispatch, filter])\n\n  const handleValueChange = useCallback(\n    (value: any) => {\n      dispatch({\n        filterKey: filterKey,\n        type: 'TERMS_FILTERS_SET_VALUE',\n        value,\n      })\n    },\n    [dispatch, filterKey]\n  )\n\n  const handleCatchError = useCallback((params: ErrorParams) => {\n    setErrorParams(params)\n  }, [])\n\n  const Component = operator?.inputComponent\n\n  if (errorParams) {\n    return <FilterError padding={4} />\n  }\n\n  // Flex order is reversed to ensure form inputs are focusable first\n  return (\n    <ErrorBoundary onCatch={handleCatchError}>\n      <FocusLock autoFocus={!supportsTouch} returnFocus>\n        <Flex direction=\"column-reverse\">\n          {/* Value */}\n          {Component && (\n            <Card borderTop padding={3}>\n              <Component\n                fieldDefinition={fieldDefinition}\n                // re-render on new operators\n                key={filter.operatorType}\n                onChange={handleValueChange}\n                value={filter.value}\n              />\n            </Card>\n          )}\n\n          {/* Title, description and operator */}\n          <Card padding={3}>\n            <Stack space={3}>\n              <Flex align=\"flex-start\" gap={3} justify=\"space-between\">\n                <Box\n                  paddingBottom={1}\n                  paddingLeft={1}\n                  paddingRight={2}\n                  paddingTop={fullscreen ? 2 : 1}\n                >\n                  <FilterDetails filter={filter} small={!fullscreen} />\n                </Box>\n\n                {fullscreen && (\n                  <Button\n                    fontSize={2}\n                    icon={TrashIcon}\n                    mode=\"bleed\"\n                    onClick={handleClose}\n                    padding={2}\n                    tone=\"critical\"\n                  />\n                )}\n              </Flex>\n              {filterDefinition?.description && (\n                <Card border padding={3} radius={2} tone=\"transparent\">\n                  <Text muted size={1}>\n                    {filterDefinition.description}\n                  </Text>\n                </Card>\n              )}\n              <OperatorsMenuButton filter={filter} operator={operator} />\n            </Stack>\n          </Card>\n        </Flex>\n      </FocusLock>\n    </ErrorBoundary>\n  )\n}\n","import {Card, Code, Flex, Stack, Text} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {DEBUG_MODE} from '../../../constants'\nimport {useSearchState} from '../../../contexts/search/useSearchState'\nimport type {SearchFilter} from '../../../types'\nimport {getFieldFromFilter} from '../../../utils/filterUtils'\nimport {FilterForm} from './FilterForm'\n\ninterface FilterPopoverContentProps {\n  filter: SearchFilter\n}\n\nconst ContainerFlex = styled(Flex)`\n  max-height: 600px;\n  max-width: 480px;\n  min-width: 150px;\n  overflow: hidden;\n  width: 100%;\n`\n\nexport function FilterPopoverContent({filter}: FilterPopoverContentProps) {\n  return (\n    <ContainerFlex direction=\"column\">\n      <FilterForm filter={filter} />\n\n      {/* Debug panels */}\n      {DEBUG_MODE && (\n        <>\n          <DebugValues filter={filter} />\n          <DebugDocumentTypes filter={filter} />\n        </>\n      )}\n    </ContainerFlex>\n  )\n}\n\nfunction DebugDocumentTypes({filter}: {filter: SearchFilter}) {\n  const {\n    state: {\n      definitions: {fields},\n    },\n  } = useSearchState()\n  const fieldDefinition = getFieldFromFilter(fields, filter)\n\n  return (\n    <Card borderTop overflow=\"hidden\" padding={3} tone=\"transparent\">\n      <Stack space={2}>\n        <Text size={0} weight=\"semibold\">\n          Document types\n        </Text>\n        <Code muted size={0} style={{whiteSpace: 'normal'}}>\n          {fieldDefinition?.documentTypes && fieldDefinition.documentTypes.length > 0\n            ? fieldDefinition.documentTypes?.join(', ')\n            : '(all)'}\n        </Code>\n      </Stack>\n    </Card>\n  )\n}\n\nfunction DebugValues({filter}: {filter: SearchFilter}) {\n  const {\n    state: {definitions},\n  } = useSearchState()\n  const fieldDefinition = getFieldFromFilter(definitions.fields, filter)\n\n  return (\n    <Card borderTop overflow=\"hidden\" padding={3} tone=\"transparent\">\n      <Stack space={2}>\n        <Text size={0} weight=\"semibold\">\n          Field\n        </Text>\n        {fieldDefinition?.fieldPath && <Code size={0}>fieldPath: {fieldDefinition.fieldPath}</Code>}\n        <Code size={0}>filterName: {filter.filterName}</Code>\n        <Code size={0}>operatorType: {filter.operatorType}</Code>\n        <Code size={0}>\n          value: {typeof filter?.value === 'undefined' ? '' : JSON.stringify(filter.value)}\n        </Code>\n      </Stack>\n    </Card>\n  )\n}\n","import {CloseIcon} from '@sanity/icons'\nimport {Button, Card, Popover, rem} from '@sanity/ui'\nimport React, {KeyboardEvent, useCallback, useState} from 'react'\nimport styled from 'styled-components'\nimport {POPOVER_RADIUS, POPOVER_VERTICAL_MARGIN} from '../../../constants'\nimport {useSearchState} from '../../../contexts/search/useSearchState'\nimport type {SearchFilter} from '../../../types'\nimport {getFilterKey, validateFilter} from '../../../utils/filterUtils'\nimport {FilterLabel} from '../../common/FilterLabel'\nimport {FilterPopoverWrapper} from '../common/FilterPopoverWrapper'\nimport {FilterPopoverContent} from './FilterPopoverContent'\n\ninterface FilterButtonProps {\n  filter: SearchFilter\n  initialOpen?: boolean\n}\n\nconst CloseButton = styled(Button)`\n  border-radius: ${({theme}) =>\n    `0 ${rem(theme.sanity.radius[2])} ${rem(theme.sanity.radius[2])} 0`};\n`\n\nconst CloseCard = styled(Card)`\n  position: absolute;\n  right: 0;\n`\n\nconst ContainerDiv = styled.div`\n  align-items: center;\n  display: inline-flex;\n  max-width: 100%;\n  position: relative;\n`\n\nconst LabelButton = styled(Button)`\n  border: none;\n  width: 100%;\n`\n\nexport function FilterButton({filter, initialOpen}: FilterButtonProps) {\n  const [open, setOpen] = useState(initialOpen)\n\n  const {\n    dispatch,\n    state: {definitions, fullscreen},\n  } = useSearchState()\n\n  const handleClose = useCallback(() => setOpen(false), [])\n  const handleOpen = useCallback(() => setOpen(true), [])\n  const handleRemove = useCallback(\n    () =>\n      dispatch({\n        filterKey: getFilterKey(filter),\n        type: 'TERMS_FILTERS_REMOVE',\n      }),\n    [dispatch, filter]\n  )\n  const handleKeyDown = useCallback(\n    (event: KeyboardEvent<HTMLButtonElement>) => {\n      if (['Backspace', 'Delete'].includes(event.key)) {\n        handleRemove()\n      }\n    },\n    [handleRemove]\n  )\n\n  const isValid = validateFilter({\n    fieldDefinitions: definitions.fields,\n    filter,\n    filterDefinitions: definitions.filters,\n    operatorDefinitions: definitions.operators,\n  })\n\n  return (\n    <Popover\n      __unstable_margins={[POPOVER_VERTICAL_MARGIN, 0, 0, 0]}\n      content={\n        <FilterPopoverWrapper onClose={handleClose}>\n          <FilterPopoverContent filter={filter} />\n        </FilterPopoverWrapper>\n      }\n      constrainSize\n      open={open}\n      overflow=\"auto\"\n      placement=\"bottom-start\"\n      portal\n      radius={POPOVER_RADIUS}\n    >\n      <ContainerDiv>\n        <Card\n          __unstable_focusRing\n          display=\"flex\"\n          radius={2}\n          tone={isValid ? 'primary' : 'transparent'}\n        >\n          <LabelButton\n            mode=\"bleed\"\n            onClick={handleOpen}\n            onKeyDown={handleKeyDown}\n            paddingLeft={fullscreen ? 3 : 2}\n            paddingRight={fullscreen ? 3 : 5}\n            paddingY={fullscreen ? 3 : 2}\n          >\n            <FilterLabel filter={filter} showContent={isValid} />\n          </LabelButton>\n        </Card>\n\n        {!fullscreen && (\n          <CloseCard\n            __unstable_focusRing\n            display=\"flex\"\n            radius={2}\n            tone={isValid ? 'primary' : 'transparent'}\n          >\n            <CloseButton\n              aria-label=\"Delete filter\"\n              fontSize={1}\n              icon={CloseIcon}\n              mode=\"bleed\"\n              onClick={handleRemove}\n              onKeyDown={handleKeyDown}\n              padding={2}\n              radius={2}\n            />\n          </CloseCard>\n        )}\n      </ContainerDiv>\n    </Popover>\n  )\n}\n","import {Button, Flex} from '@sanity/ui'\nimport React, {useCallback, useEffect, useRef} from 'react'\nimport {DEBUG_MODE} from '../../constants'\nimport {useSearchState} from '../../contexts/search/useSearchState'\nimport {getFilterKey} from '../../utils/filterUtils'\nimport {AddFilterButton} from './addFilter/AddFilterButton'\nimport {DebugDocumentTypes} from './debug/_DebugDocumentTypes'\nimport {DebugFilterQuery} from './debug/_DebugFilterQuery'\nimport {DocumentTypesButton} from './documentTypes/DocumentTypesButton'\nimport {FilterButton} from './filter/FilterButton'\n\nexport function Filters() {\n  const {\n    dispatch,\n    state: {\n      filters,\n      fullscreen,\n      lastAddedFilter,\n      terms: {types},\n    },\n  } = useSearchState()\n\n  const isMounted = useRef(false)\n\n  const handleClear = useCallback(() => {\n    dispatch({type: 'TERMS_FILTERS_CLEAR'})\n    dispatch({type: 'TERMS_TYPES_CLEAR'})\n  }, [dispatch])\n\n  const clearFiltersButtonVisible = filters.length > 0 || types.length > 0\n\n  useEffect(() => {\n    isMounted.current = true\n  }, [])\n\n  const lastAddedFilterKey = lastAddedFilter && getFilterKey(lastAddedFilter)\n\n  const ClearFiltersButton = () => (\n    <Button\n      fontSize={1}\n      mode=\"bleed\"\n      onClick={handleClear}\n      padding={fullscreen ? 3 : 2}\n      text=\"Clear filters\"\n      tone=\"critical\"\n    />\n  )\n\n  return (\n    <>\n      <Flex align=\"flex-start\" gap={3} justify=\"space-between\" padding={2}>\n        <Flex flex={1} gap={2} wrap=\"wrap\">\n          <DocumentTypesButton />\n          {filters?.map((filter) => {\n            const key = getFilterKey(filter)\n            return (\n              <FilterButton\n                filter={filter}\n                initialOpen={isMounted.current && lastAddedFilterKey === key}\n                key={key}\n              />\n            )\n          })}\n          {!fullscreen && <AddFilterButton />}\n        </Flex>\n        {clearFiltersButtonVisible && !fullscreen && <ClearFiltersButton />}\n      </Flex>\n\n      {fullscreen && (\n        <Flex justify=\"space-between\" paddingBottom={2} paddingX={2}>\n          <AddFilterButton />\n          {clearFiltersButtonVisible && <ClearFiltersButton />}\n        </Flex>\n      )}\n\n      {/* Debug panels */}\n      {DEBUG_MODE && (\n        <>\n          <DebugFilterQuery />\n          <DebugDocumentTypes />\n        </>\n      )}\n    </>\n  )\n}\n","import {ControlsIcon} from '@sanity/icons'\nimport {Flex, Inline, Text} from '@sanity/ui'\nimport React from 'react'\n\nexport function Instructions() {\n  return (\n    <Flex align=\"center\" direction=\"column\" gap={4} paddingX={4} paddingY={5}>\n      <Inline space={3}>\n        <Text muted>Use</Text>\n        <Text muted>\n          <ControlsIcon />\n        </Text>\n        <Text muted>to refine your search</Text>\n      </Inline>\n    </Flex>\n  )\n}\n","import {Card, Text} from '@sanity/ui'\nimport React, {useMemo} from 'react'\nimport type {SearchableType} from '../../../../../../search'\nimport {documentTypesTruncated} from '../../utils/documentTypesTruncated'\n\ninterface TypePillsProps {\n  availableCharacters?: number\n  types: SearchableType[]\n}\n\nexport function DocumentTypesPill({availableCharacters, types}: TypePillsProps) {\n  const title = useMemo(\n    () => documentTypesTruncated({availableCharacters, types}),\n    [availableCharacters, types]\n  )\n\n  return (\n    <Card border padding={2} radius={2}>\n      <Text muted size={1}>\n        {title}\n      </Text>\n    </Card>\n  )\n}\n","import {Card} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport type {SearchFilter} from '../../types'\nimport {FilterLabel} from './FilterLabel'\n\ninterface FilterPillProps {\n  filter: SearchFilter\n}\n\nconst FilterPillCard = styled(Card)`\n  cursor: default;\n`\n\nexport function FilterPill({filter}: FilterPillProps) {\n  return (\n    <FilterPillCard border padding={2} radius={2} tone=\"primary\">\n      <FilterLabel filter={filter} />\n    </FilterPillCard>\n  )\n}\n","import {ClockIcon, CloseIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Flex,\n  Inline,\n  rem,\n  ResponsiveMarginProps,\n  ResponsivePaddingProps,\n  Text,\n} from '@sanity/ui'\nimport React, {MouseEvent, useCallback} from 'react'\nimport styled from 'styled-components'\nimport {useSearchState} from '../../../contexts/search/useSearchState'\nimport type {RecentSearch} from '../../../datastores/recentSearches'\nimport {DocumentTypesPill} from '../../common/DocumentTypesPill'\nimport {FilterPill} from '../../common/FilterPill'\n\nexport interface RecentSearchesProps extends ResponsiveMarginProps, ResponsivePaddingProps {\n  index: number\n  maxVisibleTypePillChars?: number\n  showFiltersOnClick?: boolean\n  value: RecentSearch\n}\n\nconst DEFAULT_COMBINED_TYPE_COUNT = 40\n\nconst RecentSearchItemButton = styled(Button)`\n  border-radius: ${({theme}) => rem(theme.sanity.radius[2])};\n  cursor: default;\n  width: 100%;\n`\n\nconst SearchItemPillsBox = styled(Box)`\n  flex-shrink: 3;\n`\n\nconst SearchItemQueryBox = styled(Box)`\n  flex-shrink: 2;\n`\n\nconst CloseButtonDiv = styled.div`\n  opacity: 0.8;\n  visibility: hidden;\n\n  @media (hover: hover) {\n    ${RecentSearchItemButton}:hover & {\n      visibility: visible;\n    }\n    &:hover {\n      opacity: 0.4;\n    }\n  }\n`\n\nexport function RecentSearchItem({\n  index,\n  maxVisibleTypePillChars = DEFAULT_COMBINED_TYPE_COUNT,\n  showFiltersOnClick,\n  value,\n  ...rest\n}: RecentSearchesProps) {\n  const {dispatch, recentSearchesStore} = useSearchState()\n\n  // Determine how many characters are left to render type pills\n  const availableCharacters = maxVisibleTypePillChars - value.query.length\n\n  const handleClick = useCallback(() => {\n    const hasFilters = value.filters && value.filters.length\n    const hasTypes = value.types.length\n\n    // Optionally show filters panel if search terms or filters are present\n    if (showFiltersOnClick && (hasFilters || hasTypes)) {\n      dispatch({type: 'FILTERS_VISIBLE_SET', visible: true})\n    }\n    dispatch({type: 'TERMS_SET', filters: value?.filters, terms: value})\n\n    // Add to Local Storage\n    if (recentSearchesStore) {\n      const updatedRecentSearches = recentSearchesStore?.addSearch(value, value?.filters)\n      dispatch({recentSearches: updatedRecentSearches, type: 'RECENT_SEARCHES_SET'})\n    }\n  }, [dispatch, recentSearchesStore, showFiltersOnClick, value])\n\n  const handleDelete = useCallback(\n    (event: MouseEvent) => {\n      event.stopPropagation()\n      // Remove from Local Storage\n      if (recentSearchesStore) {\n        const updatedRecentSearches = recentSearchesStore?.removeSearchAtIndex(index)\n        dispatch({recentSearches: updatedRecentSearches, type: 'RECENT_SEARCHES_SET'})\n      }\n    },\n    [dispatch, index, recentSearchesStore]\n  )\n\n  return (\n    <Box {...rest}>\n      <RecentSearchItemButton\n        data-command-list-item\n        mode=\"bleed\"\n        onClick={handleClick}\n        paddingLeft={3}\n        paddingRight={1}\n        paddingY={1}\n      >\n        <Flex align=\"stretch\">\n          {/* Combination of <Inline> and a zero-width character to ensure icon is optically aligned with adjacent text */}\n          <Inline paddingY={2}>\n            <Text muted size={1}>\n              <ClockIcon />\n            </Text>\n            <Text>&#8203;</Text>\n          </Inline>\n          <Flex align=\"stretch\" flex={1} gap={2} justify=\"flex-start\" marginLeft={3} wrap=\"wrap\">\n            {/* Text query */}\n            {value.query && (\n              <SearchItemQueryBox paddingY={2}>\n                <Text muted textOverflow=\"ellipsis\">\n                  {value.query}\n                </Text>\n              </SearchItemQueryBox>\n            )}\n            {/* Document type */}\n            {value.types.length > 0 && (\n              <SearchItemPillsBox>\n                <DocumentTypesPill availableCharacters={availableCharacters} types={value.types} />\n              </SearchItemPillsBox>\n            )}\n            {/* Filters */}\n            {value?.filters?.map((filter, i) => {\n              // eslint-disable-next-line react/no-array-index-key\n              return <FilterPill filter={filter} key={i} />\n            })}\n          </Flex>\n\n          {/* TODO: this is neither semantic nor accessible, consider revising */}\n          <Flex align=\"center\">\n            <CloseButtonDiv onClick={handleDelete}>\n              <Flex padding={2}>\n                <Text size={1}>\n                  <CloseIcon />\n                </Text>\n              </Flex>\n            </CloseButtonDiv>\n          </Flex>\n        </Flex>\n      </RecentSearchItemButton>\n    </Box>\n  )\n}\n","import {useMediaIndex} from '@sanity/ui'\nimport {useVirtualizer} from '@tanstack/react-virtual'\nimport React, {useMemo, useState} from 'react'\nimport {useSearchState} from '../../contexts/search/useSearchState'\nimport {CommandListItem} from '../commandList/CommandListItem'\nimport {CommandListItems} from '../commandList/CommandListItems'\nimport {RecentSearchItem} from './item/RecentSearchItem'\n\ninterface RecentSearchesVirtualListProps {\n  showFiltersOnClick?: boolean\n}\n\n// Max character count of selected document types (combined) by breakpoint\nconst MAX_COMBINED_TYPE_COUNT_SMALL = 20\nconst MAX_COMBINED_TYPE_COUNT_LARGE = 40\n\nexport function RecentSearchesVirtualList({showFiltersOnClick}: RecentSearchesVirtualListProps) {\n  const [virtualList, setVirtualListRef] = useState<HTMLDivElement | null>(null)\n\n  const {\n    state: {recentSearches},\n  } = useSearchState()\n\n  const {getTotalSize, getVirtualItems, measureElement} = useVirtualizer({\n    count: recentSearches.length,\n    getScrollElement: () => virtualList,\n    estimateSize: () => 36,\n  })\n\n  const mediaIndex = useMediaIndex()\n\n  const maxVisibleTypePillChars = useMemo(() => {\n    return mediaIndex < 2 ? MAX_COMBINED_TYPE_COUNT_SMALL : MAX_COMBINED_TYPE_COUNT_LARGE\n  }, [mediaIndex])\n\n  return (\n    <CommandListItems\n      paddingBottom={1}\n      setVirtualListRef={setVirtualListRef}\n      totalHeight={getTotalSize()}\n    >\n      {getVirtualItems().map((virtualRow) => {\n        const recentSearch = recentSearches[virtualRow.index]\n        return (\n          <CommandListItem\n            activeIndex={virtualRow.index}\n            data-index={virtualRow.index}\n            key={virtualRow.key}\n            measure={measureElement}\n            virtualRow={virtualRow}\n          >\n            <RecentSearchItem\n              index={virtualRow.index}\n              maxVisibleTypePillChars={maxVisibleTypePillChars}\n              paddingTop={1}\n              paddingX={2}\n              showFiltersOnClick={showFiltersOnClick}\n              value={recentSearch}\n            />\n          </CommandListItem>\n        )\n      })}\n    </CommandListItems>\n  )\n}\n","import {Box, Button, Card, Label, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport styled from 'styled-components'\nimport {useSearchState} from '../../contexts/search/useSearchState'\nimport {useCommandList} from '../commandList/useCommandList'\nimport {Instructions} from '../Instructions'\nimport {RecentSearchesVirtualList} from './RecentSearchesVirtualList'\n\ninterface RecentSearchesProps {\n  showFiltersOnClick?: boolean\n}\n\nconst RecentSearchesBox = styled(Card)`\n  overflow-x: hidden;\n  overflow-y: auto;\n  position: relative;\n`\n\nexport function RecentSearches({showFiltersOnClick}: RecentSearchesProps) {\n  const {\n    dispatch,\n    recentSearchesStore,\n    state: {filtersVisible, fullscreen, recentSearches},\n  } = useSearchState()\n\n  const {focusHeaderInputElement} = useCommandList()\n\n  /**\n   * Remove terms from local storage.\n   * Also re-focus header input (on non-touch devices)\n   */\n  const handleClearRecentSearchesClick = useCallback(() => {\n    if (recentSearchesStore) {\n      const updatedRecentSearches = recentSearchesStore.removeSearch()\n      dispatch({recentSearches: updatedRecentSearches, type: 'RECENT_SEARCHES_SET'})\n    }\n    focusHeaderInputElement()\n  }, [dispatch, focusHeaderInputElement, recentSearchesStore])\n\n  const hasRecentSearches = !!recentSearches.length\n\n  return (\n    <RecentSearchesBox\n      borderTop={hasRecentSearches || (!hasRecentSearches && !filtersVisible && fullscreen)}\n      flex={1}\n    >\n      {recentSearches.length ? (\n        <>\n          <Box paddingBottom={2} paddingTop={4} paddingX={3}>\n            <Label muted size={1}>\n              Recent searches\n            </Label>\n          </Box>\n          <Box>\n            <RecentSearchesVirtualList showFiltersOnClick={showFiltersOnClick} />\n          </Box>\n          <Box paddingBottom={2} paddingTop={1} paddingX={2}>\n            <Button\n              justify=\"flex-start\"\n              fontSize={1}\n              mode=\"bleed\"\n              onClick={handleClearRecentSearchesClick}\n              padding={2}\n              tone=\"default\"\n            >\n              <Text muted size={1}>\n                Clear recent searches\n              </Text>\n            </Button>\n          </Box>\n        </>\n      ) : (\n        !filtersVisible && fullscreen && <Instructions />\n      )}\n    </RecentSearchesBox>\n  )\n}\n","import {ArrowLeftIcon, ControlsIcon, SearchIcon, SpinnerIcon} from '@sanity/icons'\nimport {Box, Button, Card, Flex, Theme} from '@sanity/ui'\nimport React, {useCallback, useEffect, useRef} from 'react'\nimport styled, {keyframes} from 'styled-components'\nimport {useSearchState} from '../contexts/search/useSearchState'\nimport {useCommandList} from './commandList/useCommandList'\nimport {CustomTextInput} from './common/CustomTextInput'\n\ninterface SearchHeaderProps {\n  onClose: () => void\n}\n\nconst rotate = keyframes`\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n`\n\nconst AnimatedSpinnerIcon = styled(SpinnerIcon)`\n  animation: ${rotate} 500ms linear infinite;\n`\n\nconst FilterBox = styled(Box)`\n  position: relative;\n`\n\nconst SearchHeaderCard = styled(Card)`\n  flex-shrink: 0;\n`\n\nconst NotificationBadge = styled.div`\n  background: ${({theme}: {theme: Theme}) => theme.sanity.color.selectable?.primary.enabled.fg};\n  border-radius: 100%;\n  height: 6px;\n  position: absolute;\n  right: 2px;\n  top: 2px;\n  width: 6px;\n`\n\nexport function SearchHeader({onClose}: SearchHeaderProps) {\n  const isMountedRef = useRef(false)\n\n  const {\n    dispatch,\n    state: {\n      filters,\n      filtersVisible,\n      fullscreen,\n      result: {loading},\n      terms: {types, query},\n    },\n  } = useSearchState()\n\n  const {setHeaderInputElement} = useCommandList()\n\n  const handleFiltersToggle = useCallback(\n    () => dispatch({type: 'FILTERS_VISIBLE_SET', visible: !filtersVisible}),\n    [dispatch, filtersVisible]\n  )\n  const handleQueryChange = useCallback(\n    (e: React.KeyboardEvent<HTMLInputElement>) =>\n      dispatch({type: 'TERMS_QUERY_SET', query: e.currentTarget.value}),\n    [dispatch]\n  )\n  const handleQueryClear = useCallback(() => {\n    dispatch({type: 'TERMS_QUERY_SET', query: ''})\n  }, [dispatch])\n\n  /**\n   * Always show filters on non-fullscreen mode\n   */\n  useEffect(() => {\n    if (!fullscreen) {\n      dispatch({type: 'FILTERS_VISIBLE_SET', visible: true})\n    }\n  }, [dispatch, fullscreen])\n\n  useEffect(() => {\n    isMountedRef.current = true\n  }, [])\n\n  const notificationBadgeVisible = filters.length > 0 || types.length > 0\n\n  return (\n    <SearchHeaderCard>\n      <Flex align=\"center\" flex={1} gap={fullscreen ? 2 : 1} padding={fullscreen ? 2 : 1}>\n        {/* (Fullscreen) Close button */}\n        {fullscreen && (\n          <Card>\n            <Button aria-label=\"Close search\" icon={ArrowLeftIcon} mode=\"bleed\" onClick={onClose} />\n          </Card>\n        )}\n\n        {/* Search field */}\n        <Box flex={1}>\n          <CustomTextInput\n            autoComplete=\"off\"\n            background={fullscreen}\n            border={false}\n            clearButton={!!query}\n            fontSize={2}\n            icon={loading ? AnimatedSpinnerIcon : SearchIcon}\n            onChange={handleQueryChange}\n            onClear={handleQueryClear}\n            placeholder=\"Search\"\n            ref={setHeaderInputElement}\n            smallClearButton={fullscreen}\n            spellCheck={false}\n            value={query}\n          />\n        </Box>\n\n        {/* Filter toggle */}\n        {fullscreen && (\n          <FilterBox>\n            <Button\n              aria-expanded={filtersVisible}\n              aria-label=\"Toggle filters\"\n              height=\"fill\"\n              icon={ControlsIcon}\n              mode=\"bleed\"\n              onClick={handleFiltersToggle}\n              padding={3}\n              selected={filtersVisible}\n              tone=\"default\"\n            />\n            {notificationBadgeVisible && <NotificationBadge />}\n          </FilterBox>\n        )}\n      </Flex>\n    </SearchHeaderCard>\n  )\n}\n","import {Container, Stack, Text} from '@sanity/ui'\nimport React from 'react'\n\nexport function NoResults() {\n  return (\n    <Container width={0}>\n      <Stack aria-live=\"assertive\" space={4} paddingX={4} paddingY={5}>\n        <Text align=\"center\" muted weight=\"semibold\">\n          No results found\n        </Text>\n        <Text align=\"center\" muted size={1}>\n          Try another keyword or adjust your filters\n        </Text>\n      </Stack>\n    </Container>\n  )\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Flex} from '@sanity/ui'\nimport React from 'react'\nimport {TextWithTone} from '../../../../../components/TextWithTone'\n\nexport function SearchError() {\n  return (\n    <Flex\n      align=\"center\"\n      aria-live=\"assertive\"\n      direction=\"column\"\n      flex={1}\n      gap={3}\n      marginY={2}\n      padding={4}\n    >\n      <Box marginBottom={1}>\n        <TextWithTone tone=\"critical\">\n          <WarningOutlineIcon />\n        </TextWithTone>\n      </Box>\n      <TextWithTone size={2} tone=\"critical\" weight=\"semibold\">\n        Something went wrong while searching\n      </TextWithTone>\n      <TextWithTone size={1} tone=\"critical\">\n        Please try again or check your connection\n      </TextWithTone>\n    </Flex>\n  )\n}\n","import type {SearchOrdering} from '../types'\n\nexport const ORDERINGS: Record<string, SearchOrdering> = {\n  createdAsc: {\n    ignoreScore: true,\n    sort: {direction: 'asc', field: '_createdAt'},\n    title: 'Created: Oldest first',\n  },\n  createdDesc: {\n    ignoreScore: true,\n    sort: {direction: 'desc', field: '_createdAt'},\n    title: 'Created: Newest first',\n  },\n  relevance: {\n    customMeasurementLabel: 'relevance',\n    sort: {direction: 'desc', field: '_updatedAt'},\n    title: 'Best match',\n  },\n  updatedAsc: {\n    ignoreScore: true,\n    sort: {direction: 'asc', field: '_updatedAt'},\n    title: 'Updated: Oldest first',\n  },\n  updatedDesc: {\n    ignoreScore: true,\n    sort: {direction: 'desc', field: '_updatedAt'},\n    title: 'Updated: Newest first',\n  },\n}\n","import {SortIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Card,\n  Flex,\n  Inline,\n  Menu,\n  MenuButton,\n  MenuDivider,\n  MenuItem,\n  Text,\n} from '@sanity/ui'\nimport isEqual from 'lodash/isEqual'\nimport React, {useCallback, useId, useMemo} from 'react'\nimport styled from 'styled-components'\nimport {ORDERINGS} from '../definitions/orderings'\nimport {useSearchState} from '../contexts/search/useSearchState'\nimport type {SearchOrdering} from '../types'\n\ninterface SearchDivider {\n  type: 'divider'\n}\n\nconst MENU_ORDERINGS: (SearchDivider | SearchOrdering)[] = [\n  ORDERINGS.relevance,\n  {type: 'divider'},\n  ORDERINGS.createdAsc,\n  ORDERINGS.createdDesc,\n  {type: 'divider'},\n  ORDERINGS.updatedAsc,\n  ORDERINGS.updatedDesc,\n]\n\nconst SortMenuContentFlex = styled(Flex)`\n  box-sizing: border-box;\n`\n\nfunction isSearchDivider(item: SearchDivider | SearchOrdering): item is SearchDivider {\n  return (item as SearchDivider).type === 'divider'\n}\n\nfunction CustomMenuItem({ordering}: {ordering: SearchOrdering}) {\n  const {\n    dispatch,\n    state: {ordering: currentOrdering},\n  } = useSearchState()\n\n  const handleClick = useCallback(() => {\n    dispatch({ordering, type: 'ORDERING_SET'})\n  }, [dispatch, ordering])\n\n  const isSelected = useMemo(() => isEqual(currentOrdering, ordering), [currentOrdering, ordering])\n\n  return (\n    <MenuItem onClick={handleClick} padding={3} pressed={isSelected} tone=\"default\">\n      <Flex align=\"center\" justify=\"space-between\" paddingRight={2}>\n        <Text size={1} weight=\"medium\">\n          {ordering.title}\n        </Text>\n      </Flex>\n    </MenuItem>\n  )\n}\n\nexport function SortMenu() {\n  const {\n    state: {ordering},\n  } = useSearchState()\n\n  const menuButtonId = useId()\n\n  const currentMenuItem = MENU_ORDERINGS.find(\n    (item): item is SearchOrdering => isEqual(ordering, item) && !isSearchDivider(item)\n  )\n\n  if (!currentMenuItem) {\n    return null\n  }\n\n  return (\n    <Card borderBottom>\n      <SortMenuContentFlex align=\"center\" flex={1} padding={2}>\n        <MenuButton\n          button={\n            <Button mode=\"bleed\" padding={2}>\n              <Flex align=\"center\" gap={1} justify=\"space-between\">\n                <Box marginRight={1}>\n                  <Text size={1}>\n                    <SortIcon />\n                  </Text>\n                </Box>\n                <Inline space={2}>\n                  <Text size={1} weight=\"medium\">\n                    {currentMenuItem.title}\n                  </Text>\n                </Inline>\n              </Flex>\n            </Button>\n          }\n          id={menuButtonId || ''}\n          menu={\n            <Menu>\n              {MENU_ORDERINGS.map((item, index) => {\n                if (isSearchDivider(item)) {\n                  // eslint-disable-next-line react/no-array-index-key\n                  return <MenuDivider key={index} />\n                }\n                return (\n                  <CustomMenuItem\n                    // eslint-disable-next-line react/no-array-index-key\n                    key={index}\n                    ordering={item}\n                  />\n                )\n              })}\n            </Menu>\n          }\n          placement=\"bottom-start\"\n          popover={{portal: true, radius: 2}}\n        />\n      </SortMenuContentFlex>\n    </Card>\n  )\n}\n","import {Box, Card, CardTone, Code, Inline, Stack, Tooltip} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport type {WeightedHit} from '../../../../../../../search'\n\ninterface DebugScoreProps {\n  data: WeightedHit\n}\n\nconst DebugScoreCard = styled(Card)`\n  cursor: help;\n  left: 0;\n  position: absolute;\n  top: 0;\n`\n\nexport function DebugOverlay({data}: DebugScoreProps) {\n  const {score} = data\n\n  let tone: CardTone = 'default'\n  if (score <= 0.1) {\n    tone = 'critical'\n  } else if (score >= 0.5) {\n    tone = 'primary'\n  }\n\n  const matchingStories = data.stories.filter((story) => story.score > 0)\n\n  return (\n    <>\n      <Tooltip\n        content={\n          <Box padding={2}>\n            <Stack space={2}>\n              {matchingStories.length ? (\n                <>\n                  {matchingStories.map((story) => (\n                    <Inline key={story.path} space={3}>\n                      <Code size={0} weight=\"semibold\">\n                        {story.path}\n                      </Code>\n                      <Code size={0}>{story.why}</Code>\n                    </Inline>\n                  ))}\n                </>\n              ) : (\n                <Code size={0}>No matches</Code>\n              )}\n            </Stack>\n          </Box>\n        }\n        placement=\"bottom-start\"\n        portal\n      >\n        <DebugScoreCard padding={1} shadow={1} tone={tone}>\n          <Code size={0}>score: {score}</Code>\n        </DebugScoreCard>\n      </Tooltip>\n    </>\n  )\n}\n","import {useVirtualizer} from '@tanstack/react-virtual'\nimport React, {useCallback, useEffect, useState} from 'react'\nimport {getPublishedId} from '../../../../../../util/draftUtils'\nimport {VIRTUAL_LIST_SEARCH_ITEM_HEIGHT, VIRTUAL_LIST_SEARCH_OVERSCAN} from '../../constants'\nimport {useSearchState} from '../../contexts/search/useSearchState'\nimport {CommandListItem} from '../commandList/CommandListItem'\nimport {CommandListItems} from '../commandList/CommandListItems'\nimport {useCommandList} from '../commandList/useCommandList'\nimport {DebugOverlay} from './item/DebugOverlay'\nimport {SearchResultItem} from './item/SearchResultItem'\n\ninterface SearchResultsVirtualListProps {\n  onClose: () => void\n}\n\nexport function SearchResultsVirtualList({onClose}: SearchResultsVirtualListProps) {\n  const [virtualList, setVirtualListRef] = useState<HTMLDivElement | null>(null)\n\n  const {\n    dispatch,\n    recentSearchesStore,\n    state: {debug, filters, terms, result},\n  } = useSearchState()\n\n  const {setVirtualListScrollToIndex} = useCommandList()\n\n  const {getTotalSize, getVirtualItems, scrollToIndex} = useVirtualizer({\n    count: result.hits.length,\n    getScrollElement: () => virtualList,\n    estimateSize: () => VIRTUAL_LIST_SEARCH_ITEM_HEIGHT,\n    overscan: VIRTUAL_LIST_SEARCH_OVERSCAN,\n  })\n\n  /**\n   * Add current search to recent searches, trigger child item click and close search\n   */\n  const handleResultClick = useCallback(() => {\n    if (recentSearchesStore) {\n      const updatedRecentSearches = recentSearchesStore.addSearch(terms, filters)\n      dispatch({\n        recentSearches: updatedRecentSearches,\n        type: 'RECENT_SEARCHES_SET',\n      })\n    }\n    onClose()\n  }, [dispatch, filters, onClose, recentSearchesStore, terms])\n\n  /**\n   * Send react-virtual's `scrollToIndex` function to shared CommandList context\n   */\n  useEffect(() => {\n    setVirtualListScrollToIndex(scrollToIndex)\n  }, [setVirtualListScrollToIndex, scrollToIndex])\n\n  return (\n    <CommandListItems\n      paddingBottom={2}\n      setVirtualListRef={setVirtualListRef}\n      totalHeight={getTotalSize()}\n    >\n      {getVirtualItems().map((virtualRow) => {\n        const hit = result.hits[virtualRow.index]\n        return (\n          <CommandListItem\n            activeIndex={virtualRow.index}\n            data-index={virtualRow.index}\n            fixedHeight\n            key={virtualRow.key}\n            virtualRow={virtualRow}\n          >\n            <SearchResultItem\n              documentId={getPublishedId(hit.hit._id) || ''}\n              documentType={hit.hit._type}\n              key={virtualRow.key}\n              onClick={handleResultClick}\n              paddingTop={2}\n              paddingX={2}\n            />\n            {debug && <DebugOverlay data={hit} />}\n          </CommandListItem>\n        )\n      })}\n    </CommandListItems>\n  )\n}\n","import {Card, Flex} from '@sanity/ui'\nimport React, {Dispatch, SetStateAction} from 'react'\nimport styled from 'styled-components'\nimport {useSearchState} from '../../contexts/search/useSearchState'\nimport {NoResults} from '../NoResults'\nimport {SearchError} from '../SearchError'\nimport {SortMenu} from '../SortMenu'\nimport {SearchResultsVirtualList} from './SearchResultsVirtualList'\n\ninterface SearchResultsProps {\n  onClose: () => void\n}\n\nconst SearchResultsCard = styled(Card)`\n  overflow-x: hidden;\n  overflow-y: auto;\n  position: relative;\n`\n\nconst SearchResultsFlex = styled(Flex)`\n  height: 100%;\n`\n\nconst SearchResultsInnerFlex = styled(Flex)<{$loading: boolean}>`\n  opacity: ${({$loading}) => ($loading ? 0.5 : 1)};\n  overflow: hidden;\n  position: relative;\n  transition: 300ms opacity;\n  width: 100%;\n`\n\nexport function SearchResults({onClose}: SearchResultsProps) {\n  const {\n    state: {fullscreen, result},\n  } = useSearchState()\n\n  const hasSearchResults = !!result.hits.length\n  const hasNoSearchResults = !result.hits.length && result.loaded\n  const hasError = result.error\n\n  return (\n    <SearchResultsCard\n      borderTop={fullscreen || !!(hasError || hasSearchResults || hasNoSearchResults)}\n      flex={1}\n    >\n      <SearchResultsFlex direction=\"column\">\n        {/* Sort menu */}\n        {hasSearchResults && <SortMenu />}\n\n        {/* Results */}\n        <SearchResultsInnerFlex $loading={result.loading} aria-busy={result.loading} flex={1}>\n          {hasError ? (\n            <SearchError />\n          ) : (\n            <>\n              {hasSearchResults && <SearchResultsVirtualList onClose={onClose} />}\n              {hasNoSearchResults && <NoResults />}\n            </>\n          )}\n        </SearchResultsInnerFlex>\n      </SearchResultsFlex>\n    </SearchResultsCard>\n  )\n}\n","import {useGlobalKeyDown, useLayer} from '@sanity/ui'\nimport isHotkey from 'is-hotkey'\nimport {useCallback} from 'react'\nimport {GLOBAL_SEARCH_KEY} from '../constants'\n\nconst isSearchHotKey = isHotkey(`mod+${GLOBAL_SEARCH_KEY}`)\nconst isEscape = isHotkey('escape')\n\n/**\n * This hook binds a global shortcut combination, as well as the ESC key, to open / close callbacks.\n *\n * It will prevent the ESC key from firing `onClose` callbacks if it's not the top most layer\n * (i.e. if a nested dialog is mounted).\n */\nexport function useSearchHotkeys({\n  open,\n  onClose,\n  onOpen,\n}: {\n  open: boolean\n  onClose?: () => void\n  onOpen?: () => void\n}): void {\n  const {isTopLayer} = useLayer()\n\n  const handleClose = useCallback(() => {\n    onClose?.()\n  }, [onClose])\n\n  const handleGlobalKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      if (isSearchHotKey(event)) {\n        event.preventDefault()\n        if (open) {\n          handleClose()\n        } else {\n          onOpen?.()\n        }\n      }\n      if (isEscape(event) && open && isTopLayer) {\n        handleClose()\n      }\n    },\n    [handleClose, isTopLayer, open, onOpen]\n  )\n\n  useGlobalKeyDown(handleGlobalKeyDown)\n}\n","import {Box, Card, Portal} from '@sanity/ui'\nimport React, {useCallback, useEffect, useMemo, useRef, useState} from 'react'\nimport FocusLock from 'react-focus-lock'\nimport styled from 'styled-components'\nimport {useColorScheme} from '../../../colorScheme'\nimport {CommandListContainer} from './components/commandList/CommandListContainer'\nimport {Filters} from './components/filters/Filters'\nimport {RecentSearches} from './components/recentSearches/RecentSearches'\nimport {SearchHeader} from './components/SearchHeader'\nimport {SearchResults} from './components/searchResults/SearchResults'\nimport {CommandListProvider} from './components/commandList/CommandListProvider'\nimport {useSearchState} from './contexts/search/useSearchState'\nimport {useSearchHotkeys} from './hooks/useSearchHotkeys'\nimport {hasSearchableTerms} from './utils/hasSearchableTerms'\nimport {useCommandList} from './components/commandList/useCommandList'\n\ninterface SearchDialogProps {\n  onClose: () => void\n  onOpen: () => void\n  open: boolean\n}\n\nconst InnerCard = styled(Card)`\n  flex-direction: column;\n  overflow: hidden;\n  pointer-events: all;\n  position: relative;\n`\n\nconst SearchDialogBox = styled(Box)`\n  height: 100%;\n  left: 0;\n  overflow: hidden;\n  pointer-events: none;\n  position: fixed;\n  top: 0;\n  width: 100%;\n  z-index: 1;\n`\n\n/**\n * @internal\n */\nexport function SearchDialog({onClose, onOpen, open}: SearchDialogProps) {\n  const isMountedRef = useRef(false)\n  const [lastActiveIndex, setLastActiveIndex] = useState(-1)\n\n  const {\n    dispatch,\n    setOnClose,\n    state: {filtersVisible, recentSearches, result, terms},\n  } = useSearchState()\n\n  const hasValidTerms = hasSearchableTerms({terms})\n\n  /**\n   * Store top-most search result scroll index on close\n   */\n  const handleClose = useCallback(\n    (index: number) => {\n      setLastActiveIndex(index)\n      onClose()\n    },\n    [onClose]\n  )\n\n  /**\n   * Bind hotkeys to open action\n   */\n  useSearchHotkeys({onOpen, open})\n\n  /**\n   * Reset last search index when new results are loaded, or visiting recent searches\n   */\n  // @todo Revise if/when we introduce pagination\n  useEffect(() => {\n    if ((!hasValidTerms || result.loaded) && isMountedRef.current) {\n      setLastActiveIndex(0)\n    }\n  }, [hasValidTerms, result.loaded])\n\n  /**\n   * Reset ordering when popover is closed (without valid search terms)\n   */\n  useEffect(() => {\n    if (!hasValidTerms && isMountedRef.current && !open) {\n      dispatch({type: 'ORDERING_RESET'})\n    }\n  }, [dispatch, hasValidTerms, open])\n\n  /**\n   * Set shared `onClose` in search context\n   */\n  useEffect(() => {\n    setOnClose(onClose)\n  }, [onClose, setOnClose])\n\n  /**\n   * Store mounted state\n   */\n  useEffect(() => {\n    if (!isMountedRef?.current) {\n      isMountedRef.current = true\n    }\n  }, [])\n\n  /**\n   * Create a map of indices for our virtual list, ignoring non-filter items.\n   * This is to ensure navigating via keyboard skips over these non-interactive items.\n   */\n  const itemIndices = useMemo(() => {\n    if (hasValidTerms) {\n      return Array.from(Array(result.hits.length).keys())\n    }\n\n    return Array.from(Array(recentSearches.length).keys())\n  }, [hasValidTerms, recentSearches.length, result.hits.length])\n\n  if (!open) {\n    return null\n  }\n\n  return (\n    <Portal>\n      <FocusLock autoFocus={false} returnFocus>\n        <CommandListProvider\n          ariaActiveDescendant={itemIndices.length > 0}\n          ariaChildrenLabel={hasValidTerms ? 'Search results' : 'Recent searches'}\n          ariaHeaderLabel=\"Search\"\n          autoFocus\n          data-testid=\"search-results-dialog\"\n          itemIndices={itemIndices}\n          initialSelectedIndex={hasValidTerms ? lastActiveIndex : 0}\n        >\n          <SearchDialogContent\n            filtersVisible={filtersVisible}\n            hasValidTerms={hasValidTerms}\n            onClose={handleClose}\n            open={open}\n          />\n        </CommandListProvider>\n      </FocusLock>\n    </Portal>\n  )\n}\n\nfunction SearchDialogContent({\n  filtersVisible,\n  hasValidTerms,\n  onClose,\n  open,\n}: {\n  filtersVisible: boolean\n  hasValidTerms: boolean\n  onClose: (lastActiveIndex: number) => void\n  open: boolean\n}) {\n  const {scheme} = useColorScheme()\n  const {getTopIndex} = useCommandList()\n\n  /**\n   * Store top-most search result scroll index on close\n   */\n  const handleClose = useCallback(() => {\n    onClose(getTopIndex())\n  }, [getTopIndex, onClose])\n\n  /**\n   * Bind hotkeys to close action\n   */\n  useSearchHotkeys({onClose: handleClose, open})\n\n  return (\n    <SearchDialogBox>\n      <InnerCard display=\"flex\" height=\"fill\" scheme={scheme} tone=\"default\">\n        <SearchHeader onClose={handleClose} />\n        {filtersVisible && (\n          <Card borderTop style={{flexShrink: 0}}>\n            <Filters />\n          </Card>\n        )}\n\n        <CommandListContainer>\n          {hasValidTerms ? <SearchResults onClose={handleClose} /> : <RecentSearches />}\n        </CommandListContainer>\n      </InnerCard>\n    </SearchDialogBox>\n  )\n}\n","/* eslint-disable react/jsx-pascal-case */\nimport {SearchIcon} from '@sanity/icons'\nimport {Flex, KBD, TextInput} from '@sanity/ui'\nimport React, {forwardRef, KeyboardEvent as ReactKeyboardEvent, Ref, useCallback} from 'react'\nimport styled from 'styled-components'\nimport {GLOBAL_SEARCH_KEY, GLOBAL_SEARCH_KEY_MODIFIER} from '../constants'\nimport {useSearchState} from '../contexts/search/useSearchState'\n\nconst KeyboardShortcutFlex = styled(Flex)`\n  position: absolute;\n  right: 0;\n  top: 0;\n\n  & > :first-child {\n    margin-right: 1px;\n  }\n`\n\nconst PlaceholderSearchInputFlex = styled(Flex)`\n  min-width: 253px;\n  max-width: 350px;\n  position: relative;\n`\n\nconst PlaceholderTextInput = styled(TextInput)`\n  padding-right: 60px;\n`\n\nexport const PlaceholderSearchInput = forwardRef(function DummyInput(\n  {onOpen}: {onOpen: () => void},\n  ref: Ref<HTMLInputElement>\n) {\n  const {\n    dispatch,\n    state: {terms},\n  } = useSearchState()\n\n  const handleChange = useCallback(\n    (event: ReactKeyboardEvent<HTMLInputElement>) => {\n      dispatch({type: 'TERMS_QUERY_SET', query: event.currentTarget.value})\n      onOpen()\n    },\n    [dispatch, onOpen]\n  )\n\n  const handleKeyDown = useCallback(\n    (event: ReactKeyboardEvent<HTMLInputElement>) => {\n      if (event.key === 'Enter') {\n        onOpen()\n      }\n    },\n    [onOpen]\n  )\n\n  return (\n    <PlaceholderSearchInputFlex align=\"center\">\n      <PlaceholderTextInput\n        aria-autocomplete=\"list\"\n        aria-expanded=\"false\"\n        autoComplete=\"off\"\n        icon={SearchIcon}\n        data-testid=\"studio-search\"\n        onChange={handleChange}\n        onClick={onOpen}\n        onKeyDown={handleKeyDown}\n        placeholder=\"Search\"\n        radius={2}\n        ref={ref}\n        role=\"combobox\"\n        value={terms.query}\n      />\n      <KeyboardShortcutFlex align=\"center\" height=\"fill\" marginRight={2}>\n        <KBD>{GLOBAL_SEARCH_KEY_MODIFIER}</KBD>\n        <KBD>{GLOBAL_SEARCH_KEY.toUpperCase()}</KBD>\n      </KeyboardShortcutFlex>\n    </PlaceholderSearchInputFlex>\n  )\n})\n","import {Card, Portal, Theme, useClickOutside, useLayer} from '@sanity/ui'\nimport React, {useCallback, useEffect, useMemo, useRef, useState} from 'react'\nimport FocusLock from 'react-focus-lock'\nimport styled, {css} from 'styled-components'\nimport {useColorScheme} from '../../../../colorScheme'\nimport {\n  POPOVER_INPUT_PADDING,\n  POPOVER_MAX_HEIGHT,\n  POPOVER_MAX_WIDTH,\n  POPOVER_RADIUS,\n} from '../constants'\nimport {useSearchState} from '../contexts/search/useSearchState'\nimport {useSearchHotkeys} from '../hooks/useSearchHotkeys'\nimport {hasSearchableTerms} from '../utils/hasSearchableTerms'\nimport {CommandListContainer} from './commandList/CommandListContainer'\nimport {CommandListProvider} from './commandList/CommandListProvider'\nimport {useCommandList} from './commandList/useCommandList'\nimport {Filters} from './filters/Filters'\nimport {RecentSearches} from './recentSearches/RecentSearches'\nimport {SearchHeader} from './SearchHeader'\nimport {SearchResults} from './searchResults/SearchResults'\n\nexport type PopoverPosition = {\n  x: number | null\n  y: number\n}\nexport interface SearchPopoverProps {\n  disableFocusLock?: boolean\n  onClose: () => void\n  onOpen: () => void\n  open: boolean\n  position: PopoverPosition\n}\n\nconst FiltersCard = styled(Card)`\n  flex-shrink: 0;\n`\n\nconst Overlay = styled.div`\n  background-color: ${({theme}: {theme: Theme}) => theme.sanity.color.base.shadow.ambient};\n  bottom: 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n`\n\nconst SearchPopoverCard = styled(Card)<{$position: PopoverPosition}>`\n  ${({$position}) =>\n    $position.x\n      ? css`\n          left: ${$position.x}px;\n        `\n      : css`\n          left: 50%;\n          transform: translateX(-50%);\n        `}\n  display: flex !important;\n  flex-direction: column;\n  max-height: ${({$position}) =>\n    `min(calc(100vh - ${$position.y}px - ${POPOVER_INPUT_PADDING}px), ${POPOVER_MAX_HEIGHT}px)`};\n  position: absolute;\n  top: ${({$position}) => $position.y}px;\n  width: min(calc(100vw - ${POPOVER_INPUT_PADDING * 2}px), ${POPOVER_MAX_WIDTH}px);\n`\n\nexport function SearchPopover({\n  disableFocusLock,\n  onClose,\n  onOpen,\n  open,\n  position,\n}: SearchPopoverProps) {\n  const isMountedRef = useRef(false)\n  const [lastActiveIndex, setLastActiveIndex] = useState(-1)\n\n  const {zIndex} = useLayer()\n\n  const {\n    dispatch,\n    setOnClose,\n    state: {filtersVisible, recentSearches, result, terms},\n  } = useSearchState()\n\n  const hasValidTerms = hasSearchableTerms({terms})\n\n  /**\n   * Bind hotkeys to open action\n   */\n  useSearchHotkeys({onOpen, open})\n\n  /**\n   * Store top-most search result scroll index on close\n   */\n  const handleClose = useCallback(\n    (index: number) => {\n      setLastActiveIndex(index)\n      onClose()\n    },\n    [onClose]\n  )\n\n  /**\n   * Reset last search index when new results are loaded, or visiting recent searches\n   */\n  // @todo Revise if/when we introduce pagination\n  useEffect(() => {\n    if ((!hasValidTerms || result.loaded) && isMountedRef.current) {\n      setLastActiveIndex(0)\n    }\n  }, [hasValidTerms, result.loaded])\n\n  /**\n   * Reset ordering when popover is closed (without valid search terms)\n   */\n  useEffect(() => {\n    if (!hasValidTerms && isMountedRef.current && !open) {\n      dispatch({type: 'ORDERING_RESET'})\n    }\n  }, [dispatch, hasValidTerms, open])\n\n  /**\n   * Set shared `onClose` in search context\n   */\n  useEffect(() => {\n    setOnClose(onClose)\n  }, [onClose, setOnClose])\n\n  /**\n   * Store mounted state (must be last)\n   */\n  useEffect(() => {\n    if (!isMountedRef?.current) {\n      isMountedRef.current = true\n    }\n  }, [])\n\n  /**\n   * Create a map of indices for our virtual list, ignoring non-filter items.\n   * This is to ensure navigating via keyboard skips over these non-interactive items.\n   */\n  const itemIndices = useMemo(() => {\n    if (hasValidTerms) {\n      return Array.from(Array(result.hits.length).keys())\n    }\n\n    return Array.from(Array(recentSearches.length).keys())\n  }, [hasValidTerms, recentSearches.length, result.hits.length])\n\n  if (!open) {\n    return null\n  }\n\n  return (\n    <Portal>\n      <FocusLock autoFocus={false} disabled={disableFocusLock} returnFocus>\n        <Overlay style={{zIndex}} />\n\n        <CommandListProvider\n          ariaActiveDescendant={itemIndices.length > 0}\n          ariaChildrenLabel={hasValidTerms ? 'Search results' : 'Recent searches'}\n          ariaHeaderLabel=\"Search results\"\n          autoFocus\n          data-testid=\"search-results-popover\"\n          initialSelectedIndex={hasValidTerms ? lastActiveIndex : 0}\n          itemIndices={itemIndices}\n        >\n          <SearchPopoverContent\n            filtersVisible={filtersVisible}\n            hasValidTerms={hasValidTerms}\n            onClose={handleClose}\n            open={open}\n            position={position}\n          />\n        </CommandListProvider>\n      </FocusLock>\n    </Portal>\n  )\n}\n\nfunction SearchPopoverContent({\n  filtersVisible,\n  hasValidTerms,\n  onClose,\n  open,\n  position,\n}: {\n  filtersVisible: boolean\n  hasValidTerms: boolean\n  onClose: (lastActiveIndex: number) => void\n  open: boolean\n  position: PopoverPosition\n}) {\n  const [popoverElement, setPopoverElement] = useState<HTMLDivElement | null>(null)\n  const {isTopLayer, zIndex} = useLayer()\n  const {scheme} = useColorScheme()\n  const {getTopIndex} = useCommandList()\n\n  /**\n   * Store top-most search result scroll index on close\n   */\n  const handleClose = useCallback(() => {\n    onClose(getTopIndex())\n  }, [getTopIndex, onClose])\n\n  /**\n   * Check for top-most layer to prevent closing if a portalled element (i.e. menu button) is active\n   */\n  const handleClickOutside = useCallback(() => {\n    if (open && isTopLayer) {\n      handleClose()\n    }\n  }, [handleClose, isTopLayer, open])\n\n  useClickOutside(handleClickOutside, [popoverElement])\n\n  /**\n   * Bind hotkeys to close action\n   */\n  useSearchHotkeys({onClose: handleClose, open})\n\n  return (\n    <SearchPopoverCard\n      $position={position}\n      overflow=\"hidden\"\n      radius={POPOVER_RADIUS}\n      ref={setPopoverElement}\n      scheme={scheme}\n      shadow={2}\n      style={{zIndex}}\n    >\n      <SearchHeader onClose={handleClose} />\n\n      {filtersVisible && (\n        <FiltersCard borderTop>\n          <Filters />\n        </FiltersCard>\n      )}\n\n      <CommandListContainer>\n        {hasValidTerms ? (\n          <SearchResults onClose={handleClose} />\n        ) : (\n          <RecentSearches showFiltersOnClick />\n        )}\n      </CommandListContainer>\n    </SearchPopoverCard>\n  )\n}\n","import React, {useCallback, useEffect, useState} from 'react'\nimport {PlaceholderSearchInput} from './components/PlaceholderSearchInput'\nimport {PopoverPosition, SearchPopover} from './components/SearchPopover'\nimport {POPOVER_INPUT_PADDING, POPOVER_MAX_WIDTH} from './constants'\n\n/**\n * @internal\n */\nexport function SearchField() {\n  const [placeholderElement, setPlaceholderElement] = useState<HTMLInputElement | null>(null)\n  const [open, setOpen] = useState(false)\n\n  const handleClose = useCallback(() => setOpen(false), [])\n  const handleOpen = useCallback(() => setOpen(true), [])\n\n  const popoverPosition = usePopoverPosition(placeholderElement)\n\n  return (\n    <>\n      <PlaceholderSearchInput onOpen={handleOpen} ref={setPlaceholderElement} />\n      {popoverPosition && (\n        <SearchPopover\n          onClose={handleClose}\n          onOpen={handleOpen}\n          open={open}\n          position={popoverPosition}\n        />\n      )}\n    </>\n  )\n}\n\nfunction calcDialogPosition(element: HTMLElement): PopoverPosition {\n  const placeholderRect = element.getBoundingClientRect()\n\n  // Offset positioning to account for dialog padding. This should ensure that our popover search input\n  // sits directly over the top of the existing placeholder input.\n  return {\n    x:\n      window.innerWidth - placeholderRect.x > POPOVER_MAX_WIDTH\n        ? placeholderRect.x - POPOVER_INPUT_PADDING\n        : null,\n    y: placeholderRect.y - POPOVER_INPUT_PADDING,\n  }\n}\n\nfunction usePopoverPosition(element: HTMLElement | null) {\n  const [popoverPosition, setPopoverPosition] = useState<PopoverPosition | null>(null)\n\n  /**\n   * Update popover position on window resize based off current placeholder input\n   */\n  const handleWindowResize = useCallback(() => {\n    if (element) {\n      setPopoverPosition(calcDialogPosition(element))\n    }\n  }, [element])\n\n  useEffect(() => {\n    if (element) {\n      setPopoverPosition(calcDialogPosition(element))\n    }\n  }, [element])\n\n  useEffect(() => {\n    window.addEventListener('resize', handleWindowResize)\n    return () => window.removeEventListener('resize', handleWindowResize)\n  }, [handleWindowResize])\n\n  return popoverPosition\n}\n","import type {CurrentUser, ObjectSchemaType, Schema} from '@sanity/types'\nimport omit from 'lodash/omit'\nimport type {SearchTerms} from '../../../../../search'\nimport {SearchFilterDefinition} from '../definitions/filters'\nimport {SearchOperatorDefinition} from '../definitions/operators'\nimport type {SearchFieldDefinition, SearchFilter} from '../types'\nimport {validateFilter} from '../utils/filterUtils'\nimport {getSearchableOmnisearchTypes} from '../utils/selectors'\n\nconst RECENT_SEARCHES_KEY = 'search::recent'\nexport const MAX_RECENT_SEARCHES = 5\n// might come in handy in the future\nconst CURRENT_VERSION = 1\n\nexport type RecentSearch = SearchTerms & {\n  __recent: {\n    index: number\n    timestamp: number\n  }\n  filters?: SearchFilter[]\n}\n\nexport interface RecentSearchesStore {\n  addSearch: (searchTerm: SearchTerms, filters?: SearchFilter[]) => RecentSearch[]\n  getRecentSearches: () => RecentSearch[]\n  removeSearch: () => RecentSearch[]\n  removeSearchAtIndex: (index: number) => RecentSearch[]\n}\n\ninterface StoredSearch {\n  version: number\n  recentSearches: StoredSearchItem[]\n}\n\ninterface StoredSearchItem {\n  created: string\n  filters: SearchFilter[]\n  terms: Omit<SearchTerms, 'types'> & {typeNames: string[]}\n}\n\nexport function createRecentSearchesStore({\n  dataset,\n  fieldDefinitions,\n  filterDefinitions,\n  operatorDefinitions,\n  projectId,\n  schema,\n  user,\n}: {\n  dataset?: string\n  fieldDefinitions: SearchFieldDefinition[]\n  filterDefinitions: SearchFilterDefinition[]\n  operatorDefinitions: SearchOperatorDefinition[]\n  projectId?: string\n  schema: Schema\n  user: CurrentUser | null\n}): RecentSearchesStore | undefined {\n  if (!dataset || !projectId || !supportsLocalStorage || !user) {\n    return undefined\n  }\n\n  const lsKey = `${RECENT_SEARCHES_KEY}__${projectId}:${dataset}:${user.id}`\n\n  return {\n    /**\n     * Write a search term to Local Storage and return updated recent searches.\n     */\n    addSearch: (searchTerm: SearchTerms, filters?: SearchFilter[]): RecentSearch[] => {\n      const storedFilters = (filters || []).map(\n        (filter): SearchFilter => ({\n          fieldId: filter.fieldId,\n          filterName: filter.filterName,\n          operatorType: filter.operatorType,\n          value: filter.value,\n        })\n      )\n\n      // Remove any filters in 'incomplete' states prior to writing to local storage.\n      const validStoredFilters = storedFilters.filter((filter) =>\n        validateFilter({\n          fieldDefinitions,\n          filter,\n          filterDefinitions,\n          operatorDefinitions,\n        })\n      )\n\n      const newSearchItem: StoredSearchItem = {\n        created: new Date().toISOString(),\n        filters: validStoredFilters,\n        terms: {\n          query: searchTerm.query.trim(),\n          typeNames: searchTerm.types.map((s) => s.name),\n        },\n      }\n      // Add new search item, remove previous duplicates (if any) and truncate array.\n      // When comparing search items, don't compare against the created date (which will always be different).\n      const comparator = JSON.stringify(omit(newSearchItem, 'created'))\n      const newRecent: StoredSearch = {\n        version: CURRENT_VERSION,\n        recentSearches: [\n          newSearchItem,\n          ...getRecentStoredSearch(lsKey).recentSearches.filter((r) => {\n            return JSON.stringify(omit(r, 'created')) !== comparator\n          }),\n        ].slice(0, MAX_RECENT_SEARCHES),\n      }\n      window.localStorage.setItem(lsKey, JSON.stringify(newRecent))\n\n      return getRecentSearchTerms({\n        fieldDefinitions,\n        filterDefinitions,\n        lsKey,\n        operatorDefinitions,\n        schema,\n      })\n    },\n    /**\n     * Fetch all recent searches from Local Storage.\n     * Invalid search terms will be filtered out and terms will be re-written to Local Storage.\n     */\n    getRecentSearches: () =>\n      getRecentSearchTerms({\n        fieldDefinitions,\n        filterDefinitions,\n        lsKey,\n        operatorDefinitions,\n        schema,\n      }),\n    /**\n     * Remove all search terms from Local Storage and return updated recent searches.\n     */\n    removeSearch: () => {\n      const searchTerms = getRecentStoredSearch(lsKey)\n\n      const newRecent: StoredSearch = {\n        ...searchTerms,\n        recentSearches: [],\n      }\n\n      window.localStorage.setItem(lsKey, JSON.stringify(newRecent))\n\n      return getRecentSearchTerms({\n        fieldDefinitions,\n        filterDefinitions,\n        lsKey,\n        operatorDefinitions,\n        schema,\n      })\n    },\n    /**\n     * Remove a search term from Local Storage and return updated recent searches.\n     */\n    removeSearchAtIndex: (index: number) => {\n      const searchTerms = getRecentStoredSearch(lsKey)\n\n      if (index < 0 || index > searchTerms.recentSearches.length) {\n        return getRecentSearchTerms({\n          fieldDefinitions,\n          filterDefinitions,\n          lsKey,\n          operatorDefinitions,\n          schema,\n        })\n      }\n\n      const newRecent: StoredSearch = {\n        ...searchTerms,\n        recentSearches: [\n          ...searchTerms.recentSearches.slice(0, index),\n          ...searchTerms.recentSearches.slice(index + 1),\n        ],\n      }\n\n      window.localStorage.setItem(lsKey, JSON.stringify(newRecent))\n\n      return getRecentSearchTerms({\n        fieldDefinitions,\n        filterDefinitions,\n        lsKey,\n        operatorDefinitions,\n        schema,\n      })\n    },\n  }\n}\n\n/**\n * Get the 'raw' stored search terms from Local Storage.\n * Stored search terms are the minimal representation of saved terms and only include schema names.\n */\nfunction getRecentStoredSearch(lsKey: string): StoredSearch {\n  const recentString = supportsLocalStorage ? window.localStorage.getItem(lsKey) : undefined\n\n  return recentString\n    ? (JSON.parse(recentString) as StoredSearch)\n    : {version: CURRENT_VERSION, recentSearches: []}\n}\n\n/**\n * Get a list of recent searches from Local Storage.\n * Recent searches contain full document schemas.\n */\nfunction getRecentSearchTerms({\n  lsKey,\n  schema,\n  fieldDefinitions,\n  filterDefinitions,\n  operatorDefinitions,\n}: {\n  lsKey: string\n  schema: Schema\n  fieldDefinitions: SearchFieldDefinition[]\n  filterDefinitions: SearchFilterDefinition[]\n  operatorDefinitions: SearchOperatorDefinition[]\n}): RecentSearch[] {\n  const storedSearchTerms = getRecentStoredSearch(lsKey)\n\n  return sanitizeStoredSearch({\n    studioSchema: schema,\n    storedSearch: storedSearchTerms,\n    lsKey,\n    filterDefinitions,\n    fieldDefinitions,\n    operatorDefinitions,\n  })\n    .recentSearches.filter((r) => !!r.terms)\n    .map((r, index) => ({\n      __recent: {\n        index,\n        timestamp: new Date(r.created).getTime(),\n      },\n      filters: r.filters,\n      query: r.terms.query,\n      types: r.terms.typeNames\n        .map((typeName) => schema.get(typeName))\n        .filter((s): s is ObjectSchemaType => !!(s && s.jsonType === 'object')),\n    }))\n}\n\n/**\n * Sanitize stored search. Ignore searches containing:\n * - Any number of invalid document schemas\n * - Document types hidden from omnisearch with __experimental_omnisearch_visibility\n * - Invalid filters\n *\n * This mutates Local Storage if any invalid terms are found.\n */\nfunction sanitizeStoredSearch({\n  fieldDefinitions,\n  filterDefinitions,\n  lsKey,\n  operatorDefinitions,\n  storedSearch,\n  studioSchema,\n}: {\n  fieldDefinitions: SearchFieldDefinition[]\n  filterDefinitions: SearchFilterDefinition[]\n  lsKey: string\n  operatorDefinitions: SearchOperatorDefinition[]\n  storedSearch: StoredSearch\n  studioSchema: Schema\n}): StoredSearch {\n  // Obtain all 'searchable' type names – defined as a type that exists in\n  // the current schema and also visible to omnisearch.\n  const searchableTypeNames = getSearchableOmnisearchTypes(studioSchema).map(\n    (schema) => schema.name\n  )\n\n  const filteredSearch = storedSearch.recentSearches.filter((recentSearch) => {\n    return (\n      // Has valid searchable types (not hidden by omnisearch)\n      recentSearch.terms.typeNames.every((typeName) => searchableTypeNames.includes(typeName)) &&\n      recentSearch.filters.every((filter) =>\n        validateFilter({fieldDefinitions, filter, filterDefinitions, operatorDefinitions})\n      )\n    )\n  })\n\n  const newStoredSearch: StoredSearch = {\n    version: CURRENT_VERSION,\n    recentSearches: filteredSearch,\n  }\n\n  if (newStoredSearch.recentSearches.length < storedSearch.recentSearches.length) {\n    window.localStorage.setItem(lsKey, JSON.stringify(newStoredSearch))\n  }\n\n  return getRecentStoredSearch(lsKey)\n}\n\nconst supportsLocalStorage = (() => {\n  const key = '__tmp__can_use'\n  try {\n    if (typeof localStorage === 'undefined') {\n      return false\n    }\n\n    localStorage.setItem(key, '---')\n    localStorage.removeItem(key)\n    return true\n  } catch (err) {\n    return false\n  }\n})()\n","import {Md5} from 'ts-md5'\nimport type {SearchFieldDefinition} from '../types'\n\nexport function generateFieldId(field: SearchFieldDefinition): string {\n  return Md5.hashStr(\n    JSON.stringify([field.documentTypes, field.fieldPath, field.filterName, field.type])\n  )\n}\n","import {\n  ArrayDefinition,\n  ObjectDefinition,\n  Schema,\n  SchemaTypeDefinition,\n  StringDefinition,\n} from '@sanity/types'\nimport startCase from 'lodash/startCase'\nimport {getSupportedFieldTypes, SearchFilterDefinition} from '../definitions/filters'\nimport type {SearchFieldDefinition} from '../types'\nimport {generateFieldId} from './generateFieldId'\nimport {getSearchableOmnisearchTypes} from './selectors'\n\nexport const MAX_OBJECT_TRAVERSAL_DEPTH = 3\n\nexport function createFieldDefinitions(\n  schema: Schema,\n  filterDefinitions: SearchFilterDefinition[]\n): SearchFieldDefinition[] {\n  // Get allowed document types (`__experimental_omnisearch_visibility !== false`)\n  const searchableDocumentTypeNames = getSearchableOmnisearchTypes(schema).map((s) => s.name)\n\n  // Get user-defined schema types, partitioned into documents and objects\n  const {documentTypes, objectTypes} = (schema._original?.types || [])\n    // Ignore document types hidden by omnisearch\n    .filter((t) =>\n      isDocumentObjectDefinition(t) ? searchableDocumentTypeNames.includes(t.name) : true\n    )\n    // Ignore the 'slug' object to prevent surfacing 'current' and (deprecated) 'source field' fields.\n    .filter((schemaType) => schemaType.name !== 'slug')\n    // Ignore sanity documents and assets\n    .filter((schemaType) => !schemaType.name.startsWith('sanity.'))\n    // Partition\n    .reduce<{\n      documentTypes: Record<string, ObjectDefinition>\n      objectTypes: Record<string, ObjectDefinition>\n    }>(\n      (acc, schemaType) => {\n        if (isDocumentObjectDefinition(schemaType)) {\n          acc.documentTypes[schemaType.name] = schemaType\n        }\n        if (isObjectDefinition(schemaType)) {\n          acc.objectTypes[schemaType.name] = schemaType as ObjectDefinition\n        }\n        return acc\n      },\n      {documentTypes: {}, objectTypes: {}}\n    ) || {documentTypes: {}, objectTypes: {}}\n\n  // Get supported filter field types that have corresponding filters defined\n  const supportedFieldTypes = getSupportedFieldTypes(filterDefinitions)\n\n  // Recursively iterate through all documents and resolve objects\n  return getDocumentFieldDefinitions(supportedFieldTypes, documentTypes, objectTypes)\n}\n\nfunction getDocumentFieldDefinitions(\n  supportedFieldTypes: string[],\n  documentTypes: Record<string, ObjectDefinition>,\n  objectTypes: Record<string, ObjectDefinition>\n) {\n  function addFieldDefinitionRecursive({\n    acc,\n    defType,\n    depth = 0,\n    documentType,\n    prevFieldPath,\n    prevTitlePath,\n  }: {\n    acc: SearchFieldDefinition[]\n    defType: SchemaTypeDefinition\n    depth?: number\n    documentType: string\n    prevFieldPath?: string\n    prevTitlePath?: string[]\n  }) {\n    const continueRecursion = depth <= MAX_OBJECT_TRAVERSAL_DEPTH\n    const isInternalField = defType.name.startsWith('_')\n    const title = defType?.title || startCase(defType.name)\n    const fieldPath = prevFieldPath ? `${prevFieldPath}.${defType.name}` : defType.name\n    const titlePath = prevTitlePath ? [...prevTitlePath, title] : [title]\n\n    if (!continueRecursion) return\n\n    // Map to an existing document, object or inline object if found\n    const existingObject = objectTypes[defType.type]\n    const existingDocument = documentTypes[defType.type]\n    const inlineObject = isObjectDefinition(defType) ? defType : null\n    const targetObject = existingDocument || existingObject || inlineObject\n\n    if (targetObject) {\n      targetObject?.fields?.forEach((field) =>\n        addFieldDefinitionRecursive({\n          acc,\n          defType: field as ObjectDefinition,\n          depth: depth + 1,\n          documentType,\n          prevFieldPath: fieldPath,\n          prevTitlePath: titlePath,\n        })\n      )\n      return\n    }\n\n    // Return if the current field type doesn't have a corresponding filter\n    if (!supportedFieldTypes.includes(defType.type)) return\n\n    acc.push({\n      documentTypes: documentType && !isInternalField ? [documentType] : [],\n      fieldPath,\n      filterName: resolveFilterName(defType),\n      id: '',\n      name: defType.name,\n      titlePath,\n      title,\n      type: defType.type,\n    })\n  }\n\n  const fieldDefinitions = Object.values(documentTypes)\n    .reduce<SearchFieldDefinition[]>((acc, documentType) => {\n      const documentFields = (documentType.fields as ObjectDefinition[]).reduce<\n        SearchFieldDefinition[]\n      >((a, field) => {\n        addFieldDefinitionRecursive({acc: a, defType: field, documentType: documentType.name})\n        return a\n      }, [])\n      acc.push(...documentFields)\n      return acc\n    }, [])\n    .reduce<SearchFieldDefinition[]>((acc, val) => {\n      const prevIndex = acc.findIndex(\n        (v) => v.fieldPath === val.fieldPath && v.title === val.title && v.type === val.type\n      )\n      if (prevIndex > -1) {\n        acc[prevIndex] = {\n          ...acc[prevIndex],\n          documentTypes: [...acc[prevIndex].documentTypes, ...val.documentTypes],\n        }\n      } else {\n        acc.push(val)\n      }\n      return acc\n    }, [])\n    .map(addFieldDefinitionId)\n    .sort(sortFieldDefinitions)\n\n  return fieldDefinitions\n}\n\n/**\n * Create unique ID as a hash from documentTypes, full field path, filter and field types\n */\nfunction addFieldDefinitionId(field: SearchFieldDefinition) {\n  return {\n    ...field,\n    id: generateFieldId(field),\n  }\n}\n\nfunction isArrayOfPrimitives(schemaType: SchemaTypeDefinition): schemaType is ArrayDefinition {\n  if (isArrayDefinition(schemaType)) {\n    return (\n      schemaType.of.every((item) => ['boolean', 'number', 'string'].includes(item.type)) &&\n      (schemaType.options?.list ? schemaType.options.list.length > 0 : false)\n    )\n  }\n  return false\n}\n\nfunction isArrayDefinition(schemaType: SchemaTypeDefinition): schemaType is ArrayDefinition {\n  return schemaType.type === 'array'\n}\n\nfunction isDocumentObjectDefinition(\n  schemaType: SchemaTypeDefinition\n): schemaType is ObjectDefinition {\n  return schemaType.type === 'document'\n}\n\nfunction isObjectDefinition(schemaType: SchemaTypeDefinition): schemaType is ObjectDefinition {\n  return schemaType.type === 'object'\n}\n\nfunction isStringDefinition(schemaType: SchemaTypeDefinition): schemaType is StringDefinition {\n  return schemaType.type === 'string'\n}\n\nfunction isStringListDefinition(schemaType: SchemaTypeDefinition): schemaType is StringDefinition {\n  if (isStringDefinition(schemaType)) {\n    return schemaType.options?.list ? schemaType.options.list.length > 0 : false\n  }\n  return false\n}\n\nfunction resolveFilterName(schemaType: SchemaTypeDefinition) {\n  if (isStringListDefinition(schemaType)) {\n    return 'stringList'\n  }\n  if (isArrayDefinition(schemaType)) {\n    if (schemaType.of.some((item) => item.type === 'reference')) {\n      return 'arrayReferences'\n    }\n    if (schemaType.of.find((item) => item.type === 'block')) {\n      return 'portableText'\n    }\n    if (isArrayOfPrimitives(schemaType)) {\n      return 'arrayList'\n    }\n  }\n  return schemaType.type\n}\n\n/**\n * Sort definitions by title, joined titlePath and fieldPath (in that order)\n */\nfunction sortFieldDefinitions(a: SearchFieldDefinition, b: SearchFieldDefinition): number {\n  const aTitlePath = a.titlePath.slice(0, -1).join('/')\n  const bTitlePath = b.titlePath.slice(0, -1).join('/')\n  return (\n    a.title.localeCompare(b.title) ||\n    aTitlePath.localeCompare(bTitlePath) ||\n    a.fieldPath.localeCompare(b.fieldPath)\n  )\n}\n","import type {SearchTerms} from '../../../../../search'\nimport type {RecentSearch} from '../datastores/recentSearches'\n\nexport function isRecentSearchTerms(terms: SearchTerms | RecentSearch): terms is RecentSearch {\n  return typeof (terms as RecentSearch).__recent !== 'undefined'\n}\n","import debug from 'debug'\nimport {DEBUG_FRAGMENT} from '../constants'\n\nconst rootName = 'core:studio:navbar:search:'\n\nexport default debug(rootName)\nexport function debugWithName(name: string): debug.Debugger {\n  const namespace = `${rootName}${name}`\n  if (debug && debug.enabled(namespace)) {\n    return debug(namespace)\n  }\n  return debug(rootName)\n}\n\nexport function isDebugMode(): boolean {\n  return typeof window === 'undefined'\n    ? false\n    : window.location.hash.slice(1).split(';').includes(DEBUG_FRAGMENT)\n}\n","import type {CurrentUser} from '@sanity/types'\nimport type {SearchableType, SearchTerms, WeightedHit} from '../../../../../../search'\nimport type {RecentSearch} from '../../datastores/recentSearches'\nimport {SearchFilterDefinition} from '../../definitions/filters'\nimport {\n  getOperatorDefinition,\n  getOperatorInitialValue,\n  SearchOperatorDefinition,\n} from '../../definitions/operators'\nimport {ORDERINGS} from '../../definitions/orderings'\nimport type {SearchFieldDefinition, SearchFilter, SearchOrdering} from '../../types'\nimport {debugWithName, isDebugMode} from '../../utils/debug'\nimport {\n  generateFilterQuery,\n  getFieldFromFilter,\n  getFilterKey,\n  narrowDocumentTypes,\n} from '../../utils/filterUtils'\nimport {isRecentSearchTerms} from '../../utils/isRecentSearchTerms'\nimport {sortTypes} from '../../utils/selectors'\n\nexport interface SearchReducerState {\n  currentUser: CurrentUser | null\n  debug: boolean\n  definitions: SearchDefinitions\n  documentTypesNarrowed: string[]\n  filters: SearchFilter[]\n  filtersVisible: boolean\n  fullscreen?: boolean\n  lastAddedFilter?: SearchFilter | null\n  ordering: SearchOrdering\n  pageIndex: number\n  recentSearches: RecentSearch[]\n  result: SearchResult\n  terms: RecentSearch | SearchTerms\n}\n\nexport interface SearchDefinitions {\n  fields: SearchFieldDefinition[]\n  filters: SearchFilterDefinition[]\n  operators: SearchOperatorDefinition[]\n}\n\nexport interface SearchResult {\n  error: Error | null\n  hasMore?: boolean | null\n  hits: WeightedHit[]\n  loaded: boolean\n  loading: boolean\n}\n\nexport interface InitialSearchState {\n  currentUser: CurrentUser | null\n  fullscreen?: boolean\n  recentSearches?: RecentSearch[]\n  definitions: SearchDefinitions\n}\n\nexport function initialSearchState({\n  currentUser,\n  fullscreen,\n  recentSearches = [],\n  definitions,\n}: InitialSearchState): SearchReducerState {\n  return {\n    currentUser,\n    debug: isDebugMode(),\n    documentTypesNarrowed: [],\n    filters: [],\n    filtersVisible: true,\n    fullscreen,\n    ordering: ORDERINGS.relevance,\n    pageIndex: 0,\n    recentSearches,\n    result: {\n      error: null,\n      hasMore: null,\n      hits: [],\n      loaded: false,\n      loading: false,\n    },\n    terms: {\n      query: '',\n      types: [],\n    },\n    definitions,\n  }\n}\n\nexport type FiltersVisibleSet = {type: 'FILTERS_VISIBLE_SET'; visible: boolean}\nexport type PageIncrement = {type: 'PAGE_INCREMENT'}\nexport type RecentSearchesSet = {\n  recentSearches: RecentSearch[]\n  type: 'RECENT_SEARCHES_SET'\n}\nexport type OrderingReset = {type: 'ORDERING_RESET'}\nexport type OrderingSet = {ordering: SearchOrdering; type: 'ORDERING_SET'}\nexport type SearchClear = {type: 'SEARCH_CLEAR'}\nexport type SearchRequestComplete = {\n  type: 'SEARCH_REQUEST_COMPLETE'\n  hits: WeightedHit[]\n}\nexport type SearchRequestError = {type: 'SEARCH_REQUEST_ERROR'; error: Error}\nexport type SearchRequestStart = {type: 'SEARCH_REQUEST_START'}\nexport type TermsFiltersAdd = {filter: SearchFilter; type: 'TERMS_FILTERS_ADD'}\nexport type TermsFiltersClear = {type: 'TERMS_FILTERS_CLEAR'}\nexport type TermsFiltersRemove = {filterKey: string; type: 'TERMS_FILTERS_REMOVE'}\nexport type TermsFiltersSetOperator = {\n  filterKey: string\n  operatorType: string\n  type: 'TERMS_FILTERS_SET_OPERATOR'\n}\nexport type TermsFiltersSetValue = {\n  filterKey: string\n  type: 'TERMS_FILTERS_SET_VALUE'\n  value?: any\n}\nexport type TermsQuerySet = {type: 'TERMS_QUERY_SET'; query: string}\nexport type TermsSet = {type: 'TERMS_SET'; filters?: SearchFilter[]; terms: SearchTerms}\nexport type TermsTypeAdd = {type: 'TERMS_TYPE_ADD'; schemaType: SearchableType}\nexport type TermsTypeRemove = {type: 'TERMS_TYPE_REMOVE'; schemaType: SearchableType}\nexport type TermsTypesClear = {type: 'TERMS_TYPES_CLEAR'}\n\nexport type SearchAction =\n  | FiltersVisibleSet\n  | OrderingReset\n  | OrderingSet\n  | PageIncrement\n  | RecentSearchesSet\n  | SearchClear\n  | SearchRequestComplete\n  | SearchRequestError\n  | SearchRequestStart\n  | TermsFiltersAdd\n  | TermsFiltersClear\n  | TermsFiltersSetOperator\n  | TermsFiltersRemove\n  | TermsFiltersSetValue\n  | TermsQuerySet\n  | TermsSet\n  | TermsTypeAdd\n  | TermsTypeRemove\n  | TermsTypesClear\n\nconst debug = debugWithName('reducer')\n\nexport function searchReducer(state: SearchReducerState, action: SearchAction): SearchReducerState {\n  let prefix = '🔍'\n  if (action.type.startsWith('SEARCH_REQUEST')) {\n    prefix = '🚨'\n  }\n  if (action.type.startsWith('RECENT_SEARCHES')) {\n    prefix = '💾'\n  }\n  debug(prefix, action)\n\n  switch (action.type) {\n    case 'FILTERS_VISIBLE_SET':\n      return {\n        ...state,\n        filtersVisible: action.visible,\n      }\n    case 'ORDERING_RESET':\n      return {\n        ...state,\n        ordering: ORDERINGS.relevance,\n        terms: stripRecent(state.terms),\n      }\n    case 'ORDERING_SET':\n      return {\n        ...state,\n        ordering: action.ordering,\n        terms: stripRecent(state.terms),\n      }\n    case 'PAGE_INCREMENT':\n      return {\n        ...state,\n        pageIndex: state.pageIndex + 1,\n        terms: stripRecent(state.terms),\n      }\n    case 'RECENT_SEARCHES_SET':\n      return {\n        ...state,\n        recentSearches: action.recentSearches,\n      }\n    case 'SEARCH_CLEAR':\n      return {\n        ...state,\n        pageIndex: 0,\n        result: {\n          ...state.result,\n          hasMore: null,\n          hits: [],\n        },\n      }\n    case 'SEARCH_REQUEST_COMPLETE':\n      return {\n        ...state,\n        result: {\n          ...state.result,\n          error: null,\n          hasMore: action.hits.length > 0,\n          hits: state.pageIndex > 0 ? [...state.result.hits, ...action.hits] : action.hits,\n          loaded: true,\n          loading: false,\n        },\n      }\n    case 'SEARCH_REQUEST_ERROR':\n      return {\n        ...state,\n        result: {\n          ...state.result,\n          error: action.error,\n          loaded: false,\n          loading: false,\n        },\n      }\n    case 'SEARCH_REQUEST_START':\n      return {\n        ...state,\n        result: {\n          ...state.result,\n          loaded: false,\n          loading: true,\n        },\n      }\n    case 'TERMS_FILTERS_ADD': {\n      const newFilter: SearchFilter = {\n        ...action.filter,\n        value: getOperatorInitialValue(state.definitions.operators, action.filter.operatorType),\n      }\n      const filters = [...state.filters, newFilter]\n\n      return {\n        ...state,\n        documentTypesNarrowed: narrowDocumentTypes({\n          fieldDefinitions: state.definitions.fields,\n          filters,\n          types: state.terms.types,\n        }),\n        filters,\n        lastAddedFilter: newFilter,\n        terms: {\n          ...state.terms,\n          filter: generateFilterQuery({\n            fieldDefinitions: state.definitions.fields,\n            filterDefinitions: state.definitions.filters,\n            filters,\n            operatorDefinitions: state.definitions.operators,\n          }),\n        },\n      }\n    }\n    case 'TERMS_FILTERS_CLEAR': {\n      const filters: SearchFilter[] = []\n\n      return {\n        ...state,\n        documentTypesNarrowed: narrowDocumentTypes({\n          fieldDefinitions: state.definitions.fields,\n          filters,\n          types: state.terms.types,\n        }),\n        filters,\n        terms: {\n          ...state.terms,\n          filter: generateFilterQuery({\n            fieldDefinitions: state.definitions.fields,\n            filterDefinitions: state.definitions.filters,\n            filters,\n            operatorDefinitions: state.definitions.operators,\n          }),\n        },\n      }\n    }\n    case 'TERMS_FILTERS_REMOVE': {\n      const index = state.filters.findIndex((filter) => getFilterKey(filter) === action.filterKey)\n\n      const filters = [\n        ...state.filters.slice(0, index), //\n        ...state.filters.slice(index + 1),\n      ]\n\n      return {\n        ...state,\n        documentTypesNarrowed: narrowDocumentTypes({\n          fieldDefinitions: state.definitions.fields,\n          filters,\n          types: state.terms.types,\n        }),\n        filters,\n        terms: {\n          ...state.terms,\n          filter: generateFilterQuery({\n            fieldDefinitions: state.definitions.fields,\n            filterDefinitions: state.definitions.filters,\n            filters,\n            operatorDefinitions: state.definitions.operators,\n          }),\n        },\n      }\n    }\n    case 'TERMS_FILTERS_SET_OPERATOR': {\n      // Compare input components between current and target operators, and update\n      // target filter value if it has changed.\n      const matchedFilter = state.filters.find(\n        (filter) => getFilterKey(filter) === action.filterKey\n      )\n      const currentOperator = getOperatorDefinition(\n        state.definitions.operators,\n        matchedFilter?.operatorType\n      )\n      const nextOperator = getOperatorDefinition(state.definitions.operators, action.operatorType)\n      const nextInitialValue = nextOperator?.initialValue\n      const inputComponentChanged = currentOperator?.inputComponent != nextOperator?.inputComponent\n\n      const filters = state.filters.map((filter) => {\n        if (getFilterKey(filter) === action.filterKey) {\n          return {\n            ...filter,\n            operatorType: action.operatorType,\n            ...(inputComponentChanged ? {value: nextInitialValue} : {}),\n          }\n        }\n        return filter\n      })\n\n      return {\n        ...state,\n        filters,\n        terms: {\n          ...state.terms,\n          filter: generateFilterQuery({\n            fieldDefinitions: state.definitions.fields,\n            filterDefinitions: state.definitions.filters,\n            filters,\n            operatorDefinitions: state.definitions.operators,\n          }),\n        },\n      }\n    }\n    case 'TERMS_FILTERS_SET_VALUE': {\n      const filters = state.filters.map((filter) => {\n        if (getFilterKey(filter) === action.filterKey) {\n          return {\n            ...filter,\n            value: action.value,\n          }\n        }\n        return filter\n      })\n\n      return {\n        ...state,\n        filters,\n        terms: {\n          ...state.terms,\n          filter: generateFilterQuery({\n            fieldDefinitions: state.definitions.fields,\n            filterDefinitions: state.definitions.filters,\n            filters,\n            operatorDefinitions: state.definitions.operators,\n          }),\n        },\n      }\n    }\n    case 'TERMS_QUERY_SET':\n      return {\n        ...state,\n        pageIndex: 0,\n        result: {\n          ...state.result,\n          loaded: false,\n        },\n        terms: stripRecent({\n          ...state.terms,\n          query: action.query,\n        }),\n      }\n    case 'TERMS_SET': {\n      const filters = action.filters || []\n      const types = [\n        ...(state.terms.types || []), //\n        ...action.terms.types,\n      ].sort(sortTypes)\n\n      return {\n        ...state,\n        documentTypesNarrowed: narrowDocumentTypes({\n          fieldDefinitions: state.definitions.fields,\n          filters,\n          types,\n        }),\n        filters,\n        lastAddedFilter: null,\n        pageIndex: 0,\n        result: {\n          ...state.result,\n          loaded: false,\n        },\n        terms: {\n          ...action.terms,\n          filter: generateFilterQuery({\n            fieldDefinitions: state.definitions.fields,\n            filterDefinitions: state.definitions.filters,\n            filters,\n            operatorDefinitions: state.definitions.operators,\n          }),\n        },\n      }\n    }\n    case 'TERMS_TYPE_ADD': {\n      const types = [\n        ...(state.terms.types || []), //\n        action.schemaType,\n      ].sort(sortTypes)\n\n      // Get narrowed document types based on selected types only (ignore filters)\n      const documentTypesNarrowed = narrowDocumentTypes({\n        fieldDefinitions: state.definitions.fields,\n        filters: [],\n        types,\n      })\n\n      // Remove field filters that don't qualify under the above narrowed document types.\n      // Non field-filters are always included.\n      const filters = state.filters.filter((f) => {\n        const fieldDefinition = getFieldFromFilter(state.definitions.fields, f)\n        if (fieldDefinition) {\n          // An empty documentTypes array denotes support across all fields.\n          if (fieldDefinition.documentTypes.length === 0) {\n            return true\n          }\n          return documentTypesNarrowed.every(\n            (type) => fieldDefinition.documentTypes.findIndex((t) => t === type) > -1\n          )\n        }\n        return true\n      })\n\n      return {\n        ...state,\n        documentTypesNarrowed,\n        filters,\n        pageIndex: 0,\n        result: {\n          ...state.result,\n          loaded: false,\n        },\n        terms: stripRecent({\n          ...state.terms,\n          filter: generateFilterQuery({\n            fieldDefinitions: state.definitions.fields,\n            filterDefinitions: state.definitions.filters,\n            operatorDefinitions: state.definitions.operators,\n            filters,\n          }),\n          types,\n        }),\n      }\n    }\n    case 'TERMS_TYPE_REMOVE': {\n      const types = (state.terms.types || []).filter((s) => s !== action.schemaType)\n\n      return {\n        ...state,\n        documentTypesNarrowed: narrowDocumentTypes({\n          fieldDefinitions: state.definitions.fields,\n          filters: state.filters,\n          types,\n        }),\n        pageIndex: 0,\n        result: {\n          ...state.result,\n          loaded: false,\n        },\n        terms: stripRecent({\n          ...state.terms,\n          types,\n        }),\n      }\n    }\n    case 'TERMS_TYPES_CLEAR': {\n      const types: SearchableType[] = []\n\n      return {\n        ...state,\n        documentTypesNarrowed: narrowDocumentTypes({\n          fieldDefinitions: state.definitions.fields,\n          filters: state.filters,\n          types,\n        }),\n        pageIndex: 0,\n        result: {\n          ...state.result,\n          loaded: false,\n        },\n        terms: stripRecent({\n          ...state.terms,\n          types: [],\n        }),\n      }\n    }\n    default:\n      return state\n  }\n}\n\n/**\n * This function is used to strip __recent from terms, generally whenever there's a change in\n * search terms or options that would otherwise trigger an additional search request.\n * (e.g. updating the search query, changing a sort filter, adding / removing document types)\n *\n * This is done so we can better disambiguate between requests sent as a result of clicking a 'recent search'\n * for purposes of measurement.\n *\n */\n// @todo: remove this (and associated tests) once client-side instrumentation is available\nfunction stripRecent(terms: RecentSearch | SearchTerms) {\n  if (isRecentSearchTerms(terms)) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const {__recent, ...rest} = terms\n    return rest\n  }\n  return terms\n}\n","import isEqual from 'lodash/isEqual'\nimport React, {ReactNode, useCallback, useEffect, useMemo, useReducer, useRef} from 'react'\nimport {useClient, useSchema} from '../../../../../../hooks'\nimport type {SearchableType, SearchTerms} from '../../../../../../search'\nimport {useCurrentUser} from '../../../../../../store'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../../../studioClient'\nimport {useSource} from '../../../../../source'\nimport {FINDABILITY_MVI, SEARCH_LIMIT} from '../../constants'\nimport {createRecentSearchesStore, RecentSearch} from '../../datastores/recentSearches'\nimport {useSearch} from '../../hooks/useSearch'\nimport type {SearchFieldDefinition, SearchOrdering} from '../../types'\nimport {createFieldDefinitions} from '../../utils/createFieldDefinitions'\nimport {validateFilter} from '../../utils/filterUtils'\nimport {hasSearchableTerms} from '../../utils/hasSearchableTerms'\nimport {isRecentSearchTerms} from '../../utils/isRecentSearchTerms'\nimport {initialSearchState, searchReducer} from './reducer'\nimport {SearchContext} from './SearchContext'\n\ninterface SearchProviderProps {\n  __debugFieldDefinitions?: SearchFieldDefinition[]\n  children?: ReactNode\n  fullscreen?: boolean\n}\n\n/**\n * @internal\n */\nexport function SearchProvider({\n  __debugFieldDefinitions = [],\n  children,\n  fullscreen,\n}: SearchProviderProps) {\n  const onCloseRef = useRef<(() => void) | null>(null)\n\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const schema = useSchema()\n  const currentUser = useCurrentUser()\n  const {\n    search: {operators, filters},\n  } = useSource()\n\n  const {dataset, projectId} = client.config()\n\n  // Create our field definitions: all applicable fields which we can filter on.\n  const fields = useMemo(\n    () => [...createFieldDefinitions(schema, filters), ...__debugFieldDefinitions],\n    [__debugFieldDefinitions, schema, filters]\n  )\n\n  // Create local storage store\n  const recentSearchesStore = useMemo(\n    () =>\n      createRecentSearchesStore({\n        dataset,\n        fieldDefinitions: fields,\n        filterDefinitions: filters,\n        operatorDefinitions: operators,\n        projectId,\n        schema,\n        user: currentUser,\n      }),\n    [currentUser, dataset, fields, filters, operators, projectId, schema]\n  )\n\n  const recentSearches = useMemo(\n    () => recentSearchesStore?.getRecentSearches(),\n    [recentSearchesStore]\n  )\n\n  const initialState = useMemo(\n    () =>\n      initialSearchState({\n        currentUser,\n        fullscreen,\n        recentSearches,\n        definitions: {fields, operators, filters},\n      }),\n    [currentUser, fields, filters, fullscreen, operators, recentSearches]\n  )\n  const [state, dispatch] = useReducer(searchReducer, initialState)\n\n  const {documentTypesNarrowed, filters: currentFilters, ordering, pageIndex, result, terms} = state\n\n  const isMountedRef = useRef(false)\n  const previousOrderingRef = useRef<SearchOrdering>(initialState.ordering)\n  const previousPageIndexRef = useRef<number>(initialState.pageIndex)\n  const previousTermsRef = useRef<SearchTerms | RecentSearch>(initialState.terms)\n\n  const {handleSearch, searchState} = useSearch({\n    initialState: {...result, terms},\n    onComplete: (hits) => dispatch({hits, type: 'SEARCH_REQUEST_COMPLETE'}),\n    onError: (error) => dispatch({error, type: 'SEARCH_REQUEST_ERROR'}),\n    onStart: () => dispatch({type: 'SEARCH_REQUEST_START'}),\n    schema,\n  })\n\n  const hasValidTerms = hasSearchableTerms({terms})\n\n  // Get a narrowed list of document types to search on based on any current active filters.\n  const documentTypes = documentTypesNarrowed.map(\n    (documentType) => schema.get(documentType) as SearchableType\n  )\n\n  // Get a list of 'complete' filters (filters that return valid values)\n  const completeFilters = currentFilters.filter((filter) =>\n    validateFilter({\n      fieldDefinitions: fields,\n      filter,\n      filterDefinitions: filters,\n      operatorDefinitions: operators,\n    })\n  )\n\n  const handleSetOnClose = useCallback((onClose: () => void) => {\n    onCloseRef.current = onClose\n  }, [])\n\n  /**\n   * Trigger search when any terms (query or selected types) OR current pageIndex has changed\n   *\n   * Note that we compare inbound terms with our last local snapshot, and not the value of\n   * `searchState` from `useSearch`, as that only contains a reference to the last fully _executed_ request.\n   * There are cases were we may not run searches when terms change (e.g. when search terms are empty / invalid).\n   */\n  useEffect(() => {\n    const orderingChanged = !isEqual(ordering, previousOrderingRef.current)\n    const pageIndexChanged = pageIndex !== previousPageIndexRef.current\n    const termsChanged = !isEqual(terms, previousTermsRef.current)\n\n    if (orderingChanged || pageIndexChanged || termsChanged) {\n      // Use a custom label if provided, otherwise return field and direction, e.g. `_updatedAt desc`\n      const sortLabel =\n        ordering?.customMeasurementLabel || `${ordering.sort.field} ${ordering.sort.direction}`\n\n      handleSearch({\n        options: {\n          // Comments prepended to each query for future measurement\n          comments: [\n            `findability-mvi:${FINDABILITY_MVI}`,\n            ...(isRecentSearchTerms(terms)\n              ? [`findability-recent-search:${terms.__recent.index}`]\n              : []),\n            `findability-selected-types:${terms.types.length}`,\n            `findability-sort:${sortLabel}`,\n            `findability-filter-count:${completeFilters.length}`,\n          ],\n          limit: SEARCH_LIMIT,\n          offset: pageIndex * SEARCH_LIMIT,\n          skipSortByScore: ordering.ignoreScore,\n          sort: ordering.sort,\n        },\n        terms: {\n          ...terms,\n          // Narrow document type search\n          ...(documentTypes ? {types: documentTypes} : {}),\n        },\n      })\n\n      // Update pageIndex snapshot only on a valid search request\n      previousPageIndexRef.current = pageIndex\n    }\n\n    // Update snapshots, even if no search request was executed\n    previousOrderingRef.current = ordering\n    previousTermsRef.current = terms\n  }, [\n    completeFilters.length,\n    currentFilters,\n    documentTypes,\n    handleSearch,\n    hasValidTerms,\n    ordering,\n    pageIndex,\n    searchState.terms,\n    terms,\n  ])\n\n  /**\n   * Reset search hits / state when (after initial amount):\n   * - we have no valid search terms and\n   * - we have existing hits\n   */\n  useEffect(() => {\n    if (!hasValidTerms && isMountedRef?.current && result.hits.length > 0) {\n      dispatch({type: 'SEARCH_CLEAR'})\n    }\n\n    isMountedRef.current = true\n  }, [dispatch, hasValidTerms, result.hits, terms.query, terms.types])\n\n  return (\n    <SearchContext.Provider\n      value={{\n        dispatch,\n        onClose: onCloseRef?.current,\n        recentSearchesStore,\n        setOnClose: handleSetOnClose,\n        state: {\n          ...state,\n          fullscreen,\n        },\n      }}\n    >\n      {children}\n    </SearchContext.Provider>\n  )\n}\n","import {MenuIcon, SearchIcon} from '@sanity/icons'\nimport {\n  BoundaryElementProvider,\n  Box,\n  Button,\n  Card,\n  Flex,\n  Layer,\n  LayerProvider,\n  PortalProvider,\n  Text,\n  Tooltip,\n  useMediaIndex,\n  useRootTheme,\n} from '@sanity/ui'\nimport React, {useCallback, useState, useMemo, useEffect, useRef, useContext} from 'react'\nimport {startCase} from 'lodash'\nimport styled from 'styled-components'\nimport {isDev} from '../../../environment'\nimport {useWorkspace} from '../../workspace'\nimport {useColorScheme} from '../../colorScheme'\nimport {useWorkspaces} from '../../workspaces'\nimport {NavbarContext} from '../../StudioLayout'\nimport {useLogoComponent, useToolMenuComponent} from '../../studio-components-hooks'\nimport {StudioTheme} from '../../../theme'\nimport {UserMenu} from './userMenu'\nimport {NewDocumentButton} from './NewDocumentButton'\nimport {PresenceMenu} from './presence'\nimport {NavDrawer} from './NavDrawer'\nimport {ChangelogButton} from './changelog'\nimport {WorkspaceMenuButton} from './workspace'\nimport {ConfigIssuesButton} from './configIssues/ConfigIssuesButton'\nimport {LogoButton} from './LogoButton'\nimport {SearchDialog, SearchField} from './search'\nimport {SearchProvider} from './search/contexts/search/SearchProvider'\nimport {RouterState, useRouterState, useStateLink} from 'sanity/router'\n\nconst RootLayer = styled(Layer)`\n  min-height: auto;\n  position: relative;\n\n  &[data-search-open='true'] {\n    top: 0;\n    position: sticky;\n  }\n`\n\nconst RootCard = styled(Card)`\n  line-height: 0;\n`\n\nconst LeftFlex = styled(Flex)`\n  width: max-content;\n`\n\n/** @beta */\nexport function StudioNavbar() {\n  const {name, tools, ...workspace} = useWorkspace()\n  const theme = useRootTheme().theme as StudioTheme\n  const workspaces = useWorkspaces()\n  const routerState = useRouterState()\n  const {scheme} = useColorScheme()\n  const {href: rootHref, onClick: handleRootClick} = useStateLink({state: {}})\n  const mediaIndex = useMediaIndex()\n  const activeToolName = typeof routerState.tool === 'string' ? routerState.tool : undefined\n\n  const {onSearchFullscreenOpenChange, searchFullscreenOpen, searchFullscreenPortalEl} =\n    useContext(NavbarContext)\n\n  const Logo = useLogoComponent()\n  const ToolMenu = useToolMenuComponent()\n\n  const [drawerOpen, setDrawerOpen] = useState<boolean>(false)\n\n  const routerStateRef = useRef<RouterState>(routerState)\n  const workspaceNameRef = useRef<string>(name)\n\n  // Close the NavDrawer when changing tool or workspace\n  useEffect(() => {\n    if (routerStateRef.current.tool !== routerState.tool || name !== workspaceNameRef.current) {\n      setDrawerOpen(false)\n    }\n\n    routerStateRef.current = routerState\n    workspaceNameRef.current = name\n  }, [name, routerState])\n\n  const [drawerButtonEl, setDrawerButtonEl] = useState<HTMLButtonElement | null>(null)\n  const [searchOpenButtonEl, setSearchOpenButtonEl] = useState<HTMLButtonElement | null>(null)\n\n  const shouldRender = useMemo(\n    () => ({\n      brandingCenter: mediaIndex <= 1,\n      changelog: mediaIndex > 1,\n      collapsedPresenceMenu: mediaIndex <= 1,\n      loginStatus: mediaIndex > 1,\n      searchFullscreen: mediaIndex <= 1,\n      configIssues: mediaIndex > 1 && isDev,\n      workspaces: mediaIndex >= 3 && workspaces.length > 1,\n      tools: mediaIndex >= 3,\n    }),\n    [mediaIndex, workspaces.length]\n  )\n  const formattedName = typeof name === 'string' && name !== 'root' ? startCase(name) : null\n  const title = workspace.title || formattedName || 'Studio'\n\n  useEffect(() => {\n    onSearchFullscreenOpenChange(searchFullscreenOpen)\n  }, [searchFullscreenOpen, onSearchFullscreenOpenChange])\n\n  // Disable fullscreen search on media query change (if already open)\n  useEffect(() => {\n    if (onSearchFullscreenOpenChange && !shouldRender.searchFullscreen) {\n      onSearchFullscreenOpenChange(false)\n    }\n  }, [onSearchFullscreenOpenChange, shouldRender.searchFullscreen])\n\n  const handleOpenSearchFullscreen = useCallback(() => {\n    onSearchFullscreenOpenChange(true)\n  }, [onSearchFullscreenOpenChange])\n\n  const handleCloseSearchFullscreen = useCallback(() => {\n    onSearchFullscreenOpenChange(false)\n    searchOpenButtonEl?.focus()\n  }, [onSearchFullscreenOpenChange, searchOpenButtonEl])\n\n  const handleCloseDrawer = useCallback(() => {\n    setDrawerOpen(false)\n    drawerButtonEl?.focus()\n  }, [drawerButtonEl])\n\n  const handleOpenDrawer = useCallback(() => {\n    setDrawerOpen(true)\n  }, [])\n\n  return (\n    <RootLayer zOffset={100} data-search-open={searchFullscreenOpen}>\n      <RootCard\n        data-testid=\"navbar\"\n        data-ui=\"Navbar\"\n        padding={2}\n        scheme=\"dark\"\n        shadow={theme.__legacy || scheme === 'dark' ? 1 : undefined}\n        sizing=\"border\"\n      >\n        <Flex align=\"center\" justify=\"space-between\">\n          <LeftFlex align=\"center\" flex={shouldRender.brandingCenter ? undefined : 1}>\n            {!shouldRender.tools && (\n              <Box marginRight={1}>\n                <Button\n                  mode=\"bleed\"\n                  icon={MenuIcon}\n                  onClick={handleOpenDrawer}\n                  ref={setDrawerButtonEl}\n                />\n              </Box>\n            )}\n\n            {!shouldRender.brandingCenter && (\n              <Box marginRight={1}>\n                <LogoButton href={rootHref} onClick={handleRootClick} title={title}>\n                  <Logo title={title} />\n                </LogoButton>\n              </Box>\n            )}\n\n            {shouldRender.workspaces && (\n              <Box marginRight={2}>\n                <Tooltip\n                  content={\n                    <Box padding={2}>\n                      <Text size={1}>Select workspace</Text>\n                    </Box>\n                  }\n                  placement=\"bottom\"\n                  portal\n                  scheme={scheme}\n                >\n                  <Box>\n                    <WorkspaceMenuButton />\n                  </Box>\n                </Tooltip>\n              </Box>\n            )}\n\n            <Box marginRight={shouldRender.brandingCenter ? undefined : 2}>\n              <NewDocumentButton />\n            </Box>\n\n            {/* Search */}\n            <LayerProvider>\n              <SearchProvider fullscreen={shouldRender.searchFullscreen}>\n                <BoundaryElementProvider element={document.body}>\n                  <PortalProvider element={searchFullscreenPortalEl}>\n                    {shouldRender.searchFullscreen && (\n                      <SearchDialog\n                        onClose={handleCloseSearchFullscreen}\n                        onOpen={handleOpenSearchFullscreen}\n                        open={searchFullscreenOpen}\n                      />\n                    )}\n                  </PortalProvider>\n                  {!shouldRender.searchFullscreen && <SearchField />}\n                </BoundaryElementProvider>\n              </SearchProvider>\n            </LayerProvider>\n\n            {shouldRender.tools && (\n              <Card borderRight flex={1} marginX={2} overflow=\"visible\" paddingRight={1}>\n                <ToolMenu\n                  activeToolName={activeToolName}\n                  closeSidebar={handleCloseDrawer}\n                  context=\"topbar\"\n                  isSidebarOpen={false}\n                  tools={tools}\n                />\n              </Card>\n            )}\n          </LeftFlex>\n\n          {shouldRender.brandingCenter && (\n            <Box marginX={1}>\n              <LogoButton href={rootHref} onClick={handleRootClick} title={title}>\n                <Logo title={title} />\n              </LogoButton>\n            </Box>\n          )}\n\n          <Flex align=\"center\">\n            <Box marginRight={1}>\n              <PresenceMenu collapse={shouldRender.collapsedPresenceMenu} />\n            </Box>\n\n            {shouldRender.changelog && (\n              <Box marginRight={1}>\n                <ChangelogButton />\n              </Box>\n            )}\n\n            {shouldRender.configIssues && (\n              <Box marginRight={2}>\n                <ConfigIssuesButton />\n              </Box>\n            )}\n\n            {shouldRender.tools && (\n              <Box>\n                <UserMenu />\n              </Box>\n            )}\n\n            {shouldRender.searchFullscreen && (\n              <Button\n                aria-label=\"Open search\"\n                icon={SearchIcon}\n                mode=\"bleed\"\n                onClick={handleOpenSearchFullscreen}\n                ref={setSearchOpenButtonEl}\n              />\n            )}\n          </Flex>\n        </Flex>\n      </RootCard>\n\n      {!shouldRender.tools && (\n        <NavDrawer\n          activeToolName={activeToolName}\n          isOpen={drawerOpen}\n          onClose={handleCloseDrawer}\n          tools={tools}\n        />\n      )}\n    </RootLayer>\n  )\n}\n","import React, {forwardRef, useMemo} from 'react'\nimport {StateLink, useRouterState} from 'sanity/router'\n\n/** @beta */\nexport interface ToolLinkProps {\n  children: React.ReactNode\n  name: string\n}\n\n/** @beta */\nexport const ToolLink = forwardRef(function ToolLink(\n  props: ToolLinkProps & Omit<React.HTMLProps<HTMLAnchorElement>, 'href' | 'name'>,\n  ref: React.ForwardedRef<HTMLAnchorElement>\n) {\n  const {name, ...rest} = props\n  const routerState = useRouterState()\n\n  const state = useMemo(\n    () => ({...routerState, tool: name, [name]: undefined}),\n    [routerState, name]\n  )\n\n  return <StateLink state={state} {...rest} ref={ref} />\n})\n","import {UnknownIcon} from '@sanity/icons'\nimport React, {forwardRef, useMemo, useState} from 'react'\nimport {startCase} from 'lodash'\nimport {CollapseMenu, CollapseMenuButton} from '../../../../components/collapseMenu'\nimport {useRovingFocus} from '../../../../components'\nimport {useColorScheme} from '../../../colorScheme'\nimport {Tool} from '../../../../config'\nimport {ToolLink, ToolLinkProps} from './ToolLink'\n\ninterface ToolCollapseMenuProps {\n  activeToolName?: string\n  tools: Tool[]\n}\n\nexport function ToolCollapseMenu(props: ToolCollapseMenuProps) {\n  const {activeToolName, tools} = props\n  const {scheme} = useColorScheme()\n  const [collapseMenuEl, setCollapseMenuEl] = useState<HTMLDivElement | null>(null)\n\n  useRovingFocus({\n    rootElement: collapseMenuEl,\n    navigation: ['arrows'],\n  })\n\n  const menuButtonProps = useMemo(\n    () => ({\n      popover: {\n        constrainSize: true,\n        portal: true,\n        scheme: scheme,\n      },\n    }),\n    [scheme]\n  )\n\n  const children = useMemo(\n    () =>\n      tools.map((tool, index) => {\n        const title = tool?.title || startCase(tool.name) || undefined\n\n        const Link = forwardRef(function Link(\n          linkProps: ToolLinkProps,\n          ref: React.Ref<HTMLAnchorElement>\n        ) {\n          return <ToolLink {...linkProps} ref={ref} name={tool.name} />\n        })\n\n        return (\n          <CollapseMenuButton\n            as={Link}\n            data-as=\"a\"\n            collapsedProps={{tooltipText: tool.title}}\n            icon={tool.icon || UnknownIcon}\n            // eslint-disable-next-line react/no-array-index-key\n            key={`${tool.name}-${index}`}\n            mode=\"bleed\"\n            selected={activeToolName === tool.name}\n            text={title}\n            tooltipProps={{scheme: scheme}}\n          />\n        )\n      }),\n    [activeToolName, scheme, tools]\n  )\n\n  return (\n    <CollapseMenu\n      data-testid=\"tool-collapse-menu\"\n      gap={1}\n      menuButtonProps={menuButtonProps}\n      ref={setCollapseMenuEl}\n    >\n      {children}\n    </CollapseMenu>\n  )\n}\n","import React, {forwardRef, useMemo} from 'react'\nimport {Button, Stack} from '@sanity/ui'\nimport {PlugIcon} from '@sanity/icons'\nimport {startCase} from 'lodash'\nimport {Tool} from '../../../../config'\nimport {ToolLinkProps, ToolLink} from './ToolLink'\n\ninterface ToolVerticalMenuProps {\n  activeToolName?: string\n  isVisible: boolean\n  tools: Tool[]\n}\n\nexport function ToolVerticalMenu(props: ToolVerticalMenuProps) {\n  const {activeToolName, isVisible, tools} = props\n\n  return useMemo(\n    () => (\n      <Stack as=\"ul\" space={[1, 2]}>\n        {tools.map((tool) => {\n          const title = tool?.title || startCase(tool.name) || undefined\n\n          const Link = forwardRef(function Link(\n            linkProps: ToolLinkProps,\n            ref: React.Ref<HTMLAnchorElement>\n          ) {\n            return <ToolLink {...linkProps} ref={ref} name={tool.name} />\n          })\n\n          return (\n            <Stack as=\"li\" key={tool.name}>\n              <Button\n                as={Link}\n                icon={tool.icon || PlugIcon}\n                justify=\"flex-start\"\n                mode=\"bleed\"\n                selected={activeToolName === tool.name}\n                tabIndex={isVisible ? 0 : -1}\n                text={title}\n              />\n            </Stack>\n          )\n        })}\n      </Stack>\n    ),\n    [activeToolName, isVisible, tools]\n  )\n}\n","import React from 'react'\nimport {ToolMenuProps} from '../../../../config'\nimport {ToolCollapseMenu} from './ToolCollapseMenu'\nimport {ToolVerticalMenu} from './ToolVerticalMenu'\n\n/** @beta */\nexport function StudioToolMenu(props: ToolMenuProps) {\n  const {context, isSidebarOpen, ...restProps} = props\n\n  if (context === 'sidebar') {\n    return <ToolVerticalMenu isVisible={isSidebarOpen} {...restProps} />\n  }\n\n  return <ToolCollapseMenu {...restProps} />\n}\n","import {ComponentType} from 'react'\nimport {LayoutProps, LogoProps, NavbarProps, PluginOptions, ToolMenuProps} from '../../config'\n\nexport function pickToolMenuComponent(\n  plugin: PluginOptions\n): ComponentType<Omit<ToolMenuProps, 'renderDefault'>> {\n  return plugin.studio?.components?.toolMenu as ComponentType<Omit<ToolMenuProps, 'renderDefault'>>\n}\n\nexport function pickNavbarComponent(\n  plugin: PluginOptions\n): ComponentType<Omit<NavbarProps, 'renderDefault'>> {\n  return plugin.studio?.components?.navbar as ComponentType<Omit<NavbarProps, 'renderDefault'>>\n}\n\nexport function pickLayoutComponent(\n  plugin: PluginOptions\n): ComponentType<Omit<LayoutProps, 'renderDefault'>> {\n  return plugin.studio?.components?.layout as ComponentType<Omit<LayoutProps, 'renderDefault'>>\n}\n\nexport function pickLogoComponent(\n  plugin: PluginOptions\n): ComponentType<Omit<LogoProps, 'renderDefault'>> {\n  return plugin.studio?.components?.logo as ComponentType<Omit<LogoProps, 'renderDefault'>>\n}\n","import {ComponentType} from 'react'\nimport {LayoutProps, LogoProps, NavbarProps, ToolMenuProps} from '../../config/studio'\nimport {useMiddlewareComponents} from '../../config'\nimport {StudioLogo, StudioNavbar, StudioToolMenu} from '../components'\nimport {StudioLayout} from '../StudioLayout'\nimport {\n  pickToolMenuComponent,\n  pickNavbarComponent,\n  pickLogoComponent,\n  pickLayoutComponent,\n} from './picks'\n\n/**\n * @internal\n */\nexport function useToolMenuComponent(): ComponentType<Omit<ToolMenuProps, 'renderDefault'>> {\n  return useMiddlewareComponents({\n    defaultComponent: StudioToolMenu as ComponentType<Omit<ToolMenuProps, 'renderDefault'>>,\n    pick: pickToolMenuComponent,\n  })\n}\n\n/**\n * @internal\n */\nexport function useNavbarComponent(): ComponentType<Omit<NavbarProps, 'renderDefault'>> {\n  return useMiddlewareComponents({\n    defaultComponent: StudioNavbar as ComponentType<Omit<NavbarProps, 'renderDefault'>>,\n    pick: pickNavbarComponent,\n  })\n}\n\n/**\n * @internal\n */\nexport function useLogoComponent(): ComponentType<Omit<LogoProps, 'renderDefault'>> {\n  return useMiddlewareComponents({\n    defaultComponent: StudioLogo as ComponentType<Omit<LogoProps, 'renderDefault'>>,\n    pick: pickLogoComponent,\n  })\n}\n\n/**\n * @internal\n */\nexport function useLayoutComponent(): ComponentType<Omit<LayoutProps, 'renderDefault'>> {\n  return useMiddlewareComponents({\n    defaultComponent: StudioLayout as ComponentType<Omit<LayoutProps, 'renderDefault'>>,\n    pick: pickLayoutComponent,\n  })\n}\n","import {useToast} from '@sanity/ui'\nimport {useEffect} from 'react'\nimport {ConfigResolutionError, SchemaError} from '../config'\nimport {CorsOriginError} from '../store'\nimport {globalScope} from '../util'\n\nconst errorChannel = globalScope.__sanityErrorChannel\n\n/**\n * Attaches a listener to the global error channel and displays a toast when a (unknown)\n * error occurs. Compares the last displayed error message with the current\n *\n * @internal\n */\nexport function ErrorLogger(): null {\n  const {push: pushToast} = useToast()\n\n  useEffect(() => {\n    if (!errorChannel) return undefined\n\n    // errorChannel.subscribe() returns a unsubscriber function.\n    // By returning it from this `useEffect`, it'll unsubscribe on unmount.\n    return errorChannel.subscribe((msg) => {\n      // NOTE: Certain errors (such as the `ResizeObserver loop limit exceeded` error) is thrown\n      // by the browser, and does not include an `error` property. We ignore these errors.\n      if (!msg.error) {\n        return\n      }\n\n      // For errors that we \"expect\", eg have specific error screens for, do not push a toast\n      if (isKnownError(msg.error)) {\n        return\n      }\n\n      console.error(msg.error)\n\n      pushToast({\n        // Use the error message as the ID in order to prevent duplicates from showing\n        // A bit of a hack, but serves\n        id: msg.error.message,\n        closable: true,\n        description: msg.error.message,\n        duration: 5000,\n        title: 'Uncaught error',\n        status: 'error',\n      })\n    })\n  }, [pushToast])\n\n  return null\n}\n\nfunction isKnownError(err: Error): boolean {\n  if (err instanceof SchemaError) {\n    return true\n  }\n\n  if (err instanceof CorsOriginError) {\n    return true\n  }\n\n  if (err instanceof ConfigResolutionError) {\n    return true\n  }\n\n  return false\n}\n","import React, {useEffect, useState} from 'react'\nimport {LoadingScreen, AuthenticateScreen, NotAuthenticatedScreen} from './screens'\nimport {useActiveWorkspace} from './activeWorkspaceMatcher'\n\ninterface AuthBoundaryProps {\n  children: React.ReactNode\n  AuthenticateComponent?: React.ComponentType\n  LoadingComponent?: React.ComponentType\n  NotAuthenticatedComponent?: React.ComponentType\n}\n\nexport function AuthBoundary({\n  children,\n  AuthenticateComponent = AuthenticateScreen,\n  LoadingComponent = LoadingScreen,\n  NotAuthenticatedComponent = NotAuthenticatedScreen,\n}: AuthBoundaryProps) {\n  const [error, handleError] = useState<unknown>(null)\n  if (error) throw error\n\n  const [loggedIn, setLoggedIn] = useState<'logged-in' | 'logged-out' | 'loading' | 'unauthorized'>(\n    'loading'\n  )\n  const {activeWorkspace} = useActiveWorkspace()\n\n  useEffect(() => {\n    activeWorkspace.auth.handleCallbackUrl?.().catch(handleError)\n  }, [activeWorkspace.auth])\n\n  useEffect(() => {\n    const subscription = activeWorkspace.auth.state.subscribe({\n      next: ({authenticated, currentUser}) => {\n        if (currentUser?.roles?.length === 0) {\n          setLoggedIn('unauthorized')\n\n          return\n        }\n\n        setLoggedIn(authenticated ? 'logged-in' : 'logged-out')\n      },\n      error: handleError,\n    })\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [activeWorkspace])\n\n  if (loggedIn === 'loading') return <LoadingComponent />\n\n  if (loggedIn === 'unauthorized') return <NotAuthenticatedComponent />\n\n  // NOTE: there is currently a bug where the `AuthenticateComponent` will\n  // flash after the first login with cookieless mode. See `createAuthStore`\n  // for details\n  if (loggedIn === 'logged-out') return <AuthenticateComponent />\n\n  return <>{children}</>\n}\n","/* eslint-disable no-nested-ternary */\n\nimport React from 'react'\nimport {ThemeProvider, LayerProvider} from '@sanity/ui'\nimport {useActiveWorkspace} from './activeWorkspaceMatcher'\nimport {ColorSchemeContext, useColorScheme} from './colorScheme'\n\ninterface StudioThemeProviderProps {\n  children: React.ReactChild\n}\n\n/** @internal */\nexport function StudioThemeProvider({children}: StudioThemeProviderProps) {\n  const theme = useActiveWorkspace().activeWorkspace.theme\n  const colorScheme = useColorScheme()\n  const scheme = theme.__legacy ? (theme.__dark ? 'dark' : 'light') : colorScheme.scheme\n\n  return (\n    <ColorSchemeContext.Provider value={{...colorScheme, scheme}}>\n      <ThemeProvider scheme={scheme} theme={theme} tone=\"transparent\">\n        <LayerProvider>{children}</LayerProvider>\n      </ThemeProvider>\n    </ColorSchemeContext.Provider>\n  )\n}\n","export const Z_OFFSET = {\n  toast: [100, 11000],\n}\n","import React, {useEffect} from 'react'\nimport {Flex, Box, Card, Code, Text} from '@sanity/ui'\nimport {startCase} from 'lodash'\nimport styled from 'styled-components'\n\nconst ListItem = styled(Flex)``\n\nconst ErrorMessageRoot = styled(Box).attrs({padding: 4})``\n\nexport interface ErrorMessageProps {\n  message: string\n  stack?: string\n  error: unknown\n  path: Array<{name: string; type: string}>\n}\n\nexport function ErrorMessage({error, message, path, stack}: ErrorMessageProps) {\n  useEffect(() => {\n    console.error(error)\n  }, [error])\n\n  const last = path[path.length - 1]\n\n  return (\n    <ErrorMessageRoot forwardedAs={Flex} direction=\"column\" gap={4}>\n      <Flex direction=\"column\" gap={2}>\n        <Text weight=\"semibold\" size={3}>\n          {startCase(last.type)} Error\n        </Text>\n      </Flex>\n\n      <Card tone=\"critical\" overflow=\"auto\" padding={4}>\n        <Code>{message}</Code>\n      </Card>\n\n      <Flex as=\"ul\" direction=\"column\" gap={2}>\n        {path.map(({name, type}, index) => (\n          <ListItem forwardedAs=\"li\" gap={2} align=\"center\" key={index}>\n            <Box>\n              <Code>{name}</Code>\n            </Box>\n            <Box>\n              <Text muted size={1}>\n                {type}\n              </Text>\n            </Box>\n          </ListItem>\n        ))}\n      </Flex>\n\n      {stack && (\n        <details>\n          <Text as=\"summary\">Stack Trace</Text>\n\n          <Box overflow=\"auto\" marginTop={4}>\n            <Code>{stack}</Code>\n          </Box>\n        </details>\n      )}\n    </ErrorMessageRoot>\n  )\n}\n","import {Tool} from '../../config'\nimport {route, Router} from 'sanity/router'\n\nexport function createRouter(opts: {basePath?: string; tools: Tool[]}): Router {\n  const {basePath = '/', tools} = opts\n\n  const toolRoute = route.create('/:tool', (toolParams) => {\n    const tool = tools.find((current) => current.name === toolParams.tool)\n    return tool ? route.scope(tool.name, '/', tool.router) : route.create('/')\n  })\n\n  return route.create(basePath, [route.intents('/intent'), toolRoute])\n}\n","import {Tool} from '../../../config'\n\nexport function getOrderedTools(tools: Tool[]): Tool[] {\n  const pluginConfig: {toolSwitcher?: {order?: string[]; hidden?: string[]}} = {}\n  const config = pluginConfig.toolSwitcher || {}\n  const order = config.order || []\n  const hidden = config.hidden || []\n\n  if (!order.length && !hidden.length) {\n    return tools\n  }\n\n  const keyed = tools.reduce<Record<string, {index: number; tool: Tool}>>((target, tool) => {\n    const title = tool.title || '<unknown>'\n\n    if (!tool.name) {\n      console.warn(`Tool \"${title}\" does not have the required \"name\" property`)\n      return target\n    }\n\n    if (target[tool.name]) {\n      const existing = target[tool.name].tool.title\n      console.warn(`Tools with duplicate name \"${tool.name}\" found (\"${title}\" and \"${existing}\")`)\n      return target\n    }\n\n    const toolIndex = order.indexOf(tool.name)\n\n    target[tool.name] = {\n      tool: tool,\n      index: toolIndex === -1 ? +Infinity : toolIndex,\n    }\n\n    return target\n  }, {})\n\n  const isVisible = (tool: Tool) => hidden.indexOf(tool.name) === -1\n\n  const ret = tools.filter(isVisible)\n\n  ret.sort((tool1, tool2) => {\n    const toolA = keyed[tool1.name]\n    const toolB = keyed[tool2.name]\n\n    const indexA = toolA ? toolA.index : +Infinity\n    const indexB = toolB ? toolB.index : +Infinity\n\n    if (indexA === indexB) {\n      return 0\n    }\n\n    return indexA - indexB\n  })\n\n  return ret\n}\n","import {Tool} from '../../config'\nimport {isRecord} from '../../util/isRecord'\nimport {RouterEvent, RouterStateEvent} from './types'\nimport {getOrderedTools} from './util/getOrderedTools'\nimport {RouterState, Router} from 'sanity/router'\n\nfunction resolveUrlStateWithDefaultTool(tools: Tool[], state: Record<string, unknown> | null) {\n  const orderedTools = getOrderedTools(tools)\n  const defaultTool = orderedTools[0]\n\n  if (!state || state.tool || !defaultTool) {\n    return state\n  }\n\n  return Object.assign({}, state, {\n    tool: defaultTool.name,\n  })\n}\n\nfunction makeBackwardsCompatible(\n  tools: Tool[],\n  state: Record<string, unknown> | null\n): Record<string, unknown> | null {\n  if (!state) {\n    return state\n  }\n\n  if (getOrderedTools(tools).find((tool) => tool.name === state.space)) {\n    return {...state, tool: state.space, space: undefined}\n  }\n\n  return state\n}\n\nexport function resolveDefaultState(\n  tools: Tool[],\n  state: Record<string, unknown> | null\n): RouterState | null {\n  const urlStateWithDefaultTool = resolveUrlStateWithDefaultTool(\n    tools,\n    makeBackwardsCompatible(tools, state)\n  )\n\n  return urlStateWithDefaultTool\n}\n\nexport function resolveIntentState(\n  tools: Tool[],\n  currentState: RouterState | null,\n  intentState: RouterState\n): RouterEvent {\n  const {intent, params, payload} = intentState\n\n  if (typeof intent !== 'string') {\n    throw new Error('intent must be a string')\n  }\n\n  if (!isRecord(params)) {\n    throw new Error('intent params must be a string')\n  }\n\n  const orderedTools = getOrderedTools(tools)\n\n  const currentTool = currentState?.tool\n    ? orderedTools.find((tool) => tool.name === currentState.tool)\n    : null\n\n  // If current tool can handle intent and if so, give it precedence\n  const matchingTool = (currentTool ? [currentTool, ...orderedTools] : orderedTools).find(\n    (tool) =>\n      tool &&\n      typeof tool.canHandleIntent === 'function' &&\n      tool.canHandleIntent(intent, params, currentState && currentState[tool.name])\n  )\n\n  if (matchingTool?.getIntentState) {\n    const toolState = matchingTool.getIntentState(\n      intent,\n      params as any,\n      currentState && (currentState[matchingTool.name] as any),\n      payload\n    )\n\n    return {\n      type: 'state',\n      isNotFound: false,\n      state: {\n        ...currentState,\n        tool: matchingTool.name,\n        [matchingTool.name]: toolState,\n      },\n    }\n  }\n\n  return {\n    type: 'intent',\n    isNotFound: true,\n    intent: {name: intent, params},\n  }\n}\n\nexport function decodeUrlState(rootRouter: Router, pathname: string): RouterStateEvent {\n  return {\n    type: 'state',\n    state: rootRouter.decode(pathname) || {},\n    isNotFound: rootRouter.isNotFound(pathname),\n  }\n}\n\nexport function isNonNullable<T>(value: T): value is NonNullable<T> {\n  return value !== null && value !== undefined\n}\n","import {escapeRegExp, isEqual} from 'lodash'\nimport {EMPTY, Observable, of} from 'rxjs'\nimport {distinctUntilChanged, filter, map, mergeScan, shareReplay} from 'rxjs/operators'\nimport {History, Location} from 'history'\nimport {Tool} from '../../config'\nimport {decodeUrlState, isNonNullable, resolveDefaultState, resolveIntentState} from './helpers'\nimport {RouterEvent} from './types'\nimport {Router} from 'sanity/router'\n\ninterface RouterEventStreamOptions {\n  unstable_history: History\n  router: Router\n  tools: Tool[]\n}\n\n/**\n * @internal\n */\nexport function createRouterEventStream({\n  unstable_history: history,\n  router,\n  tools,\n}: RouterEventStreamOptions): Observable<RouterEvent> {\n  function maybeHandleIntent(\n    prevEvent: RouterEvent | null,\n    currentEvent: RouterEvent\n  ): Observable<RouterEvent> {\n    if (currentEvent?.type === 'state' && currentEvent.state?.intent) {\n      const redirectState = resolveIntentState(\n        tools,\n        prevEvent?.type === 'state' ? prevEvent.state : {},\n        currentEvent.state\n      )\n\n      if (redirectState?.type === 'state') {\n        history.replace(router.encode(redirectState.state))\n        // This will not push anything downstream and preserve the prevEvent for the next received value\n        // Since we are calling history.replace here, a new event will be received immediately\n        return EMPTY\n      }\n    }\n\n    return of(currentEvent)\n  }\n\n  function maybeRedirectDefaultState(event: RouterEvent) {\n    if (event.type === 'state') {\n      const defaultState = resolveDefaultState(tools, event.state)\n\n      if (defaultState && defaultState !== event.state) {\n        history.replace(router.encode(defaultState))\n        return null\n      }\n    }\n\n    return event\n  }\n\n  const routerBasePath = router.getBasePath()\n\n  const state$: Observable<RouterEvent> = new Observable<Location>((observer) => {\n    const unlisten = history.listen((location) => observer.next(location))\n\n    // emit on mount\n    observer.next(history.location)\n    return unlisten\n  }).pipe(\n    // this is necessary to prevent emissions intended for other workspaces.\n    //\n    // this regex ends with a `(\\\\/|$)` (forward slash or end) to prevent false\n    // matches where the pathname is a false subset of the current pathname.\n    filter(({pathname}) =>\n      routerBasePath === '/'\n        ? true\n        : new RegExp(`^${escapeRegExp(routerBasePath)}(\\\\/|$)`, 'i').test(pathname)\n    ),\n    map(({pathname}) => decodeUrlState(router, pathname)),\n    mergeScan(maybeHandleIntent, null),\n    filter(isNonNullable),\n    map(maybeRedirectDefaultState),\n    filter(isNonNullable),\n    distinctUntilChanged(isEqual),\n    shareReplay(1)\n  )\n\n  return state$\n}\n","import React, {useCallback, useEffect, useMemo, useState} from 'react'\nimport {map, filter, scan, catchError} from 'rxjs/operators'\nimport {combineLatest, of} from 'rxjs'\nimport {History} from 'history'\nimport {ErrorBoundary} from '@sanity/ui'\nimport {createHookFromObservableFactory} from '../../util'\nimport {ConfigResolutionError, Tool, Source, Workspace} from '../../config'\nimport {createRouter, createRouterEventStream} from '../router'\nimport {useActiveWorkspace} from '../activeWorkspaceMatcher'\nimport {WorkspaceProvider} from '../workspace'\nimport {SourceProvider} from '../source'\nimport {Router, RouterProvider, RouterState} from 'sanity/router'\n// TODO: work on error handler\n// import {flattenErrors} from './flattenErrors'\n\nconst isStateEvent = <T extends {type: string}>(e: T): e is Extract<T, {type: 'state'}> =>\n  e.type === 'state'\n\nconst initialState: StudioRouterState = {isNotFound: true, state: {}}\n\ninterface StudioRouterState {\n  isNotFound: boolean\n  state: RouterState\n}\n\ntype UseRouterStateOptions = [\n  unstable_history: History,\n  router: Router | undefined,\n  tools: Tool[] | undefined\n]\n\nconst useRouterState = createHookFromObservableFactory(\n  ([unstable_history, router, tools]: UseRouterStateOptions) => {\n    if (!router || !tools) return of(initialState)\n\n    return createRouterEventStream({\n      unstable_history,\n      router,\n      tools,\n    }).pipe(\n      filter(isStateEvent),\n      scan((prevState, event) => {\n        return {\n          ...prevState,\n          isNotFound: event.isNotFound,\n          state: event.state,\n        }\n      }, initialState)\n    )\n  },\n  initialState\n)\n\ninterface WorkspaceLoaderProps {\n  children: React.ReactNode\n  ConfigErrorsComponent: React.ComponentType\n  LoadingComponent: React.ComponentType\n}\n\nfunction WorkspaceLoader({\n  children,\n  LoadingComponent,\n}: Omit<WorkspaceLoaderProps, 'ConfigErrorsComponent'>) {\n  const [error, handleError] = useState<unknown>(null)\n  if (error) throw error\n\n  const {\n    activeWorkspace,\n    __internal: {history},\n  } = useActiveWorkspace()\n  const [workspace, setWorkspace] = useState<Workspace | null>(null)\n\n  const handleNavigate = useCallback(\n    (opts: {path: string; replace?: boolean}) => {\n      if (opts.replace) {\n        history.replace(opts.path)\n      } else {\n        history.push(opts.path)\n      }\n    },\n    [history]\n  )\n\n  useEffect(() => {\n    const subscription = combineLatest(\n      activeWorkspace.__internal.sources.map(({source}) =>\n        source.pipe(\n          catchError((err) => {\n            if (err instanceof ConfigResolutionError) return of(err)\n            throw err\n          })\n        )\n      )\n    )\n      .pipe(\n        map((results): Source[] => {\n          const errors = results.filter((result) => result instanceof ConfigResolutionError)\n          if (errors.length) {\n            throw new ConfigResolutionError({\n              name: activeWorkspace.name,\n              causes: errors,\n              type: 'workspace',\n            })\n          }\n\n          return results as Source[]\n        }),\n        map(\n          ([rootSource, ...restOfSources]): Workspace => ({\n            ...activeWorkspace,\n            ...rootSource,\n            unstable_sources: [rootSource, ...restOfSources],\n            type: 'workspace',\n          })\n        )\n      )\n      .subscribe({\n        next: setWorkspace,\n        error: handleError,\n      })\n\n    return () => subscription.unsubscribe()\n  }, [activeWorkspace])\n\n  const tools = workspace?.tools\n  const router = useMemo(() => {\n    if (!workspace) return undefined\n    return createRouter(workspace)\n  }, [workspace])\n\n  const [routerState] = useRouterState(\n    useMemo(() => [history, router, tools], [history, router, tools])\n  )\n  if (!router || !workspace) return <LoadingComponent />\n\n  // TODO: may need a screen if one of the sources is not logged in. e.g. it\n  // is currently possible for the user to be logged into the current workspace\n  // but not all of its nested sources.\n  // if (!allSourcesLoggedIn) return <NotAllSourcesAuthenticatedComponent />\n\n  return (\n    <WorkspaceProvider workspace={workspace}>\n      <SourceProvider\n        // the first source is always the root source and is always present\n        source={workspace.unstable_sources[0]}\n      >\n        <RouterProvider onNavigate={handleNavigate} router={router} state={routerState.state}>\n          {children}\n        </RouterProvider>\n      </SourceProvider>\n    </WorkspaceProvider>\n  )\n}\n\nfunction WorkspaceLoaderBoundary({ConfigErrorsComponent, ...props}: WorkspaceLoaderProps) {\n  const [{error}, setError] = useState<{error: unknown}>({error: null})\n\n  // TODO: implement this\n  // const errors = useMemo(() => flattenErrors(error, []), [error])\n\n  //TODO: implement config error screen\n  // if (error instanceof ConfigResolutionError) return <ConfigErrorsComponent />\n\n  // otherwise hand off to other boundaries\n  if (error) throw error\n\n  return (\n    <ErrorBoundary onCatch={setError}>\n      <WorkspaceLoader {...props} />\n    </ErrorBoundary>\n  )\n}\n\nexport {WorkspaceLoaderBoundary as WorkspaceLoader}\n","import {ToastProvider} from '@sanity/ui'\nimport React, {Fragment, useMemo} from 'react'\nimport Refractor from 'react-refractor'\nimport bash from 'refractor/lang/bash'\nimport javascript from 'refractor/lang/javascript'\nimport json from 'refractor/lang/json'\nimport jsx from 'refractor/lang/jsx'\nimport typescript from 'refractor/lang/typescript'\nimport {UserColorManagerProvider} from '../user-color'\nimport {ErrorLogger} from '../error/ErrorLogger'\nimport {ResourceCacheProvider} from '../store'\nimport {AuthBoundary} from './AuthBoundary'\nimport {StudioProps} from './Studio'\nimport {StudioThemeProvider} from './StudioThemeProvider'\nimport {StudioErrorBoundary} from './StudioErrorBoundary'\nimport {ActiveWorkspaceMatcher} from './activeWorkspaceMatcher'\nimport {ColorSchemeProvider} from './colorScheme'\nimport {Z_OFFSET} from './constants'\nimport {\n  ConfigErrorsScreen,\n  LoadingScreen,\n  AuthenticateScreen,\n  NotFoundScreen,\n  NotAuthenticatedScreen,\n} from './screens'\nimport {WorkspaceLoader} from './workspaceLoader'\nimport {WorkspacesProvider} from './workspaces'\n\nRefractor.registerLanguage(bash)\nRefractor.registerLanguage(javascript)\nRefractor.registerLanguage(json)\nRefractor.registerLanguage(jsx)\nRefractor.registerLanguage(typescript)\n\n/** @beta */\nexport interface StudioProviderProps extends StudioProps {\n  children: React.ReactNode\n}\n\n/** @beta */\nexport function StudioProvider({\n  children,\n  config,\n  onSchemeChange,\n  scheme,\n  unstable_history: history,\n  unstable_noAuthBoundary: noAuthBoundary,\n}: StudioProviderProps) {\n  const ConditionalAuthBoundary = useMemo(\n    () => (noAuthBoundary ? Fragment : AuthBoundary),\n    [noAuthBoundary]\n  )\n\n  return (\n    <ColorSchemeProvider onSchemeChange={onSchemeChange} scheme={scheme}>\n      <ToastProvider paddingY={7} zOffset={Z_OFFSET.toast}>\n        <ErrorLogger />\n        <StudioErrorBoundary>\n          <WorkspacesProvider config={config}>\n            <ActiveWorkspaceMatcher\n              unstable_history={history}\n              NotFoundComponent={NotFoundScreen}\n              LoadingComponent={LoadingScreen}\n            >\n              <StudioThemeProvider>\n                <UserColorManagerProvider>\n                  <ConditionalAuthBoundary\n                    LoadingComponent={LoadingScreen}\n                    AuthenticateComponent={AuthenticateScreen}\n                    NotAuthenticatedComponent={NotAuthenticatedScreen}\n                  >\n                    <WorkspaceLoader\n                      LoadingComponent={LoadingScreen}\n                      ConfigErrorsComponent={ConfigErrorsScreen}\n                    >\n                      <ResourceCacheProvider>{children}</ResourceCacheProvider>\n                    </WorkspaceLoader>\n                  </ConditionalAuthBoundary>\n                </UserColorManagerProvider>\n              </StudioThemeProvider>\n            </ActiveWorkspaceMatcher>\n          </WorkspacesProvider>\n        </StudioErrorBoundary>\n      </ToastProvider>\n    </ColorSchemeProvider>\n  )\n}\n","import {ThemeColorSchemeKey} from '@sanity/ui'\nimport {History} from 'history'\nimport React, {ReactElement} from 'react'\nimport {Config} from '../config'\nimport {GlobalStyle} from './GlobalStyle'\nimport {useLayoutComponent} from './studio-components-hooks'\nimport {StudioProvider} from './StudioProvider'\n\n/** @beta */\nexport interface StudioProps {\n  config: Config\n  onSchemeChange?: (nextScheme: ThemeColorSchemeKey) => void\n  scheme?: ThemeColorSchemeKey\n  /** @beta */\n  unstable_history?: History\n  /** @beta */\n  unstable_globalStyles?: boolean\n  /** @beta */\n  unstable_noAuthBoundary?: boolean\n}\n\nfunction StudioLayout() {\n  const Layout = useLayoutComponent()\n\n  return <Layout />\n}\n\n/** @beta */\nexport function Studio(props: StudioProps): ReactElement {\n  const {unstable_globalStyles: globalStyles, ...restProps} = props\n\n  return (\n    <StudioProvider {...restProps}>\n      {globalStyles && <GlobalStyle />}\n      <StudioLayout />\n    </StudioProvider>\n  )\n}\n","import React, {StrictMode} from 'react'\nimport {createRoot} from 'react-dom/client'\nimport type {Config} from '../config'\nimport {Studio} from './Studio'\n\n/** @internal */\nexport function renderStudio(\n  rootElement: HTMLElement | null,\n  config: Config,\n  reactStrictMode = false\n): () => void {\n  if (!rootElement) {\n    throw new Error('Missing root element to mount application into')\n  }\n\n  const root = createRoot(rootElement)\n\n  root.render(\n    reactStrictMode ? (\n      <StrictMode>\n        <Studio config={config} unstable_globalStyles />\n      </StrictMode>\n    ) : (\n      <Studio config={config} unstable_globalStyles />\n    )\n  )\n\n  return () => root.unmount()\n}\n","import type {SanityClient} from '@sanity/client'\nimport type {SourceClientOptions} from '../config'\nimport {useSource} from '../studio'\n\n/** @beta */\nexport function useClient(clientOptions?: SourceClientOptions): SanityClient {\n  const source = useSource()\n  if (!clientOptions) {\n    console.warn(\n      'Calling `useClient()` without specifying an API version is deprecated and will stop working in the next dev-preview release - please migrate to use `useClient({apiVersion: \"2021-06-07\"})`.'\n    )\n    return source.getClient({apiVersion: '2021-06-07'})\n  }\n\n  return source.getClient(clientOptions)\n}\n","import {distinctUntilChanged, map, mapTo, startWith, switchMap} from 'rxjs/operators'\nimport {of, timer} from 'rxjs'\nimport {useMemoObservable} from 'react-rx'\nimport {useDocumentStore} from '../store'\n\n/** @internal */\nexport type ConnectionState = 'connecting' | 'reconnecting' | 'connected'\n\nconst INITIAL: ConnectionState = 'connecting'\n\n/** @internal */\nexport function useConnectionState(publishedDocId: string, docTypeName: string): ConnectionState {\n  const documentStore = useDocumentStore()\n\n  return useMemoObservable(\n    () =>\n      documentStore.pair.documentEvents(publishedDocId, docTypeName).pipe(\n        map((ev: {type: string}) => ev.type),\n        map((eventType) => eventType !== 'reconnect'),\n        switchMap((isConnected) =>\n          isConnected ? of('connected') : timer(200).pipe(mapTo('reconnecting'))\n        ),\n        startWith(INITIAL as any),\n        distinctUntilChanged()\n      ),\n    [publishedDocId, docTypeName],\n    INITIAL\n  )\n}\n","import {useSource} from '../studio'\n\n/**\n * @beta\n */\nexport function useDataset(): string {\n  return useSource().dataset\n}\n","import {useMemoObservable} from 'react-rx'\nimport {useDocumentStore, OperationsAPI} from '../store'\n\n/** @internal */\nexport function useDocumentOperation(publishedDocId: string, docTypeName: string): OperationsAPI {\n  const documentStore = useDocumentStore()\n  return useMemoObservable(\n    () => documentStore.pair.editOperations(publishedDocId, docTypeName),\n    [docTypeName, documentStore.pair, publishedDocId]\n  )!\n}\n","import {useMemoObservable} from 'react-rx'\nimport {useDocumentStore} from '../store'\n\n/** @internal */\nexport function useDocumentOperationEvent(publishedDocId: string, docTypeName: string) {\n  const documentStore = useDocumentStore()\n\n  return useMemoObservable(\n    () => documentStore.pair.operationEvents(publishedDocId, docTypeName),\n    [publishedDocId, docTypeName]\n  )\n}\n","import {useMemoObservable} from 'react-rx'\nimport {merge, timer} from 'rxjs'\nimport {debounce, share, skip, take} from 'rxjs/operators'\nimport {EditStateFor, useDocumentStore} from '../store'\n\n/** @internal */\nexport function useEditState(\n  publishedDocId: string,\n  docTypeName: string,\n  priority: 'default' | 'low' = 'default'\n): EditStateFor {\n  const documentStore = useDocumentStore()\n\n  return useMemoObservable(() => {\n    const base = documentStore.pair.editState(publishedDocId, docTypeName).pipe(share())\n    if (priority === 'low') {\n      return merge(\n        base.pipe(take(1)),\n        base.pipe(\n          skip(1),\n          debounce(() => timer(1000))\n        )\n      )\n    }\n    return documentStore.pair.editState(publishedDocId, docTypeName)\n  }, [publishedDocId, docTypeName, priority]) as EditStateFor\n}\n","import {useSource} from '../studio'\n\n/**\n * @beta\n */\nexport function useProjectId(): string {\n  return useSource().projectId\n}\n","import {Schema} from '@sanity/types'\nimport {useSource} from '../studio'\n\n/**\n * @public\n */\nexport function useSchema(): Schema {\n  return useSource().schema\n}\n","import {useMemoObservable} from 'react-rx'\nimport {map} from 'rxjs/operators'\nimport {useDocumentStore} from '../store'\n\n/** @internal */\nexport interface SyncState {\n  isSyncing: boolean\n}\n\nconst SYNCING = {isSyncing: true}\nconst NOT_SYNCING = {isSyncing: false}\n\n/** @internal */\nexport function useSyncState(publishedDocId: string, documentType: string): SyncState {\n  const documentStore = useDocumentStore()\n\n  return useMemoObservable<SyncState>(\n    () =>\n      documentStore.pair\n        .consistencyStatus(publishedDocId, documentType)\n        .pipe(map((isConsistent) => (isConsistent ? NOT_SYNCING : SYNCING))),\n    [publishedDocId],\n    NOT_SYNCING\n  )\n}\n","import {useSource} from '../studio'\nimport {Template} from '../templates'\n\n/**\n * @beta\n */\nexport function useTemplates(): Template[] {\n  return useSource().templates\n}\n","import {useEffect, useReducer} from 'react'\nimport {\n  differenceInDays,\n  differenceInHours,\n  differenceInMinutes,\n  differenceInMonths,\n  differenceInSeconds,\n  differenceInWeeks,\n  differenceInYears,\n  format,\n} from 'date-fns'\nimport pluralize from 'pluralize-esm'\n\ninterface TimeSpec {\n  timestamp: string\n  refreshInterval: number | null\n}\n\nconst FIVE_SECONDS = 1000 * 5\nconst TWENTY_SECONDS = 1000 * 20\nconst ONE_MINUTE = 1000 * 60\nconst ONE_HOUR = ONE_MINUTE * 60\n\n/** @internal */\nexport interface TimeAgoOpts {\n  minimal?: boolean\n  agoSuffix?: boolean\n}\n\n/** @internal */\nexport function useTimeAgo(time: Date | string, {minimal, agoSuffix}: TimeAgoOpts = {}): string {\n  const resolved = formatRelativeTime(time, {minimal, agoSuffix})\n\n  const [, forceUpdate] = useReducer((x) => x + 1, 0)\n\n  useEffect(() => {\n    let timerId: number | null\n\n    function tick(interval: number) {\n      timerId = window.setTimeout(() => {\n        forceUpdate()\n        // avoid pile-up of setInterval callbacks,\n        // e.g. schedule the next update at `refreshInterval` *after* the previous one finishes\n        timerId = window.setTimeout(() => tick(interval), interval)\n      }, interval)\n    }\n\n    if (resolved.refreshInterval !== null) {\n      tick(resolved.refreshInterval)\n    }\n\n    return () => {\n      if (timerId !== null) {\n        clearTimeout(timerId)\n      }\n    }\n  }, [forceUpdate, resolved.refreshInterval])\n\n  return resolved.timestamp\n}\n\nfunction formatRelativeTime(date: Date | string, opts: TimeAgoOpts = {}): TimeSpec {\n  const parsedDate = date instanceof Date ? date : new Date(date)\n\n  // Invalid date? Return empty timestamp and `null` as refresh interval, to save us from\n  // continuously trying to format an invalid date. The `useEffect` calls in the hook will\n  // trigger a re-evaluation of the timestamp when the date changes, so this is safe.\n  if (!parsedDate.getTime()) {\n    return {\n      timestamp: '',\n      refreshInterval: null,\n    }\n  }\n\n  const now = Date.now()\n  const diffMonths = differenceInMonths(now, parsedDate)\n  const diffYears = differenceInYears(now, parsedDate)\n\n  if (diffMonths || diffYears) {\n    if (opts.minimal && diffYears === 0) {\n      // same year\n      return {\n        timestamp: format(parsedDate, 'MMM d'),\n        refreshInterval: null,\n      }\n    }\n\n    if (opts.minimal) {\n      return {\n        timestamp: format(parsedDate, 'MMM d, yyyy'),\n        refreshInterval: null,\n      }\n    }\n\n    return {\n      timestamp: format(parsedDate, 'MMM d, yyyy, hh:mm a'),\n      refreshInterval: null,\n    }\n  }\n\n  const diffWeeks = differenceInWeeks(now, parsedDate)\n  const weekSuffix = pluralize('week', diffWeeks)\n\n  if (diffWeeks) {\n    if (opts.minimal) {\n      return {\n        timestamp: opts.agoSuffix ? `${diffWeeks}w ago` : `${diffWeeks}w`,\n        refreshInterval: ONE_HOUR,\n      }\n    }\n\n    return {\n      timestamp: opts.agoSuffix ? `${diffWeeks} ${weekSuffix} ago` : `${diffWeeks} ${weekSuffix}`,\n      refreshInterval: ONE_HOUR,\n    }\n  }\n\n  const diffDays = differenceInDays(now, parsedDate)\n  const daysSuffix = pluralize('days', diffDays)\n\n  if (diffDays) {\n    if (opts.minimal) {\n      const daysSince = opts.agoSuffix ? `${diffDays}d ago` : `${diffDays}d`\n      return {\n        timestamp: diffDays === 1 ? 'yesterday' : daysSince,\n        refreshInterval: ONE_HOUR,\n      }\n    }\n    const daysSince = opts.agoSuffix ? `${diffDays} ${daysSuffix} ago` : `${diffDays} ${daysSuffix}`\n    return {\n      timestamp: diffDays === 1 ? 'yesterday' : daysSince,\n      refreshInterval: ONE_HOUR,\n    }\n  }\n\n  const diffHours = differenceInHours(now, parsedDate)\n  const hoursSuffix = pluralize('hour', diffHours)\n\n  if (diffHours) {\n    if (opts.minimal) {\n      return {\n        timestamp: opts.agoSuffix ? `${diffHours}h ago` : `${diffHours}h`,\n        refreshInterval: ONE_MINUTE,\n      }\n    }\n\n    return {\n      timestamp: opts.agoSuffix ? `${diffHours} ${hoursSuffix} ago` : `${diffHours} ${hoursSuffix}`,\n      refreshInterval: ONE_MINUTE,\n    }\n  }\n\n  const diffMins = differenceInMinutes(now, parsedDate)\n  const minsSuffix = pluralize('minute', diffMins)\n\n  if (diffMins) {\n    if (opts.minimal) {\n      return {\n        timestamp: opts.agoSuffix ? `${diffMins}m ago` : `${diffMins}m`,\n        refreshInterval: TWENTY_SECONDS,\n      }\n    }\n    return {\n      timestamp: opts.agoSuffix ? `${diffMins} ${minsSuffix} ago` : `${diffMins} ${minsSuffix}`,\n      refreshInterval: TWENTY_SECONDS,\n    }\n  }\n\n  const diffSeconds = differenceInSeconds(now, parsedDate)\n  const secsSuffix = pluralize('second', diffSeconds)\n\n  if (diffSeconds > 10) {\n    if (opts.minimal) {\n      return {\n        timestamp: opts.agoSuffix ? `${diffSeconds}s ago` : `${diffSeconds}s`,\n        refreshInterval: FIVE_SECONDS,\n      }\n    }\n\n    return {\n      timestamp: opts.agoSuffix\n        ? `${diffSeconds} ${secsSuffix} ago`\n        : `${diffSeconds} ${secsSuffix}`,\n      refreshInterval: FIVE_SECONDS,\n    }\n  }\n\n  return {timestamp: 'just now', refreshInterval: FIVE_SECONDS}\n}\n","import {Tool} from '../config'\nimport {useSource} from '../studio'\n\n/**\n * @beta\n */\nexport function useTools(): Tool[] {\n  return useSource().tools\n}\n","import {useMemoObservable} from 'react-rx'\nimport {useDocumentStore, ValidationStatus} from '../store'\n\nconst INITIAL: ValidationStatus = {validation: [], isValidating: false}\n\n/** @internal */\nexport function useValidationStatus(publishedDocId: string, docTypeName: string): ValidationStatus {\n  const documentStore = useDocumentStore()\n\n  return useMemoObservable(\n    () => documentStore.pair.validation(publishedDocId, docTypeName),\n    [publishedDocId, docTypeName],\n    INITIAL\n  )\n}\n","import {CurrentUser, User} from '@sanity/types'\nimport {useMemo} from 'react'\nimport {from} from 'rxjs'\nimport {useSource} from '../../studio'\nimport {UserStore, useUserStore} from '../_legacy'\nimport {createHookFromObservableFactory, LoadingTuple} from '../../util'\n\nconst useUserViaUserStore = createHookFromObservableFactory(\n  ([userStore, userId]: [UserStore, string]) => from(userStore.getUser(userId))\n)\n\n/** @internal */\nexport function useUser(userId: string): LoadingTuple<User | null | undefined> {\n  const userStore = useUserStore()\n  return useUserViaUserStore(useMemo(() => [userStore, userId], [userId, userStore]))\n}\n\n/** @internal */\nexport function useCurrentUser(): CurrentUser | null {\n  const {currentUser} = useSource()\n  return currentUser\n}\n","import {BufferedDocument, Mutation} from '@sanity/mutator'\nimport {SanityDocument} from '@sanity/types'\nimport {BehaviorSubject, EMPTY, merge, Observable, Subject} from 'rxjs'\nimport {\n  distinctUntilChanged,\n  filter,\n  map,\n  mergeMapTo,\n  publishReplay,\n  refCount,\n  scan,\n  share,\n  take,\n  tap,\n  withLatestFrom,\n} from 'rxjs/operators'\nimport {ListenerEvent} from '../getPairListener'\nimport {MutationEvent} from '../types'\nimport {\n  DocumentMutationEvent,\n  DocumentRebaseEvent,\n  MutationPayload,\n  SnapshotEvent,\n  DocumentRemoteMutationEvent,\n  RemoteSnapshotEvent,\n} from './types'\n\ninterface MutationAction {\n  type: 'mutation'\n  mutations: MutationPayload[]\n}\n\ninterface CommitAction {\n  type: 'commit'\n}\n\ntype Action = MutationAction | CommitAction\n\n/**\n * Represents \"commit requests\" from the mutator.\n * These are emitted from the BufferedDocument instance's `requestHandler` callback\n *\n * @internal\n */\nexport interface CommitRequest {\n  mutation: Mutation\n  success: () => void\n  failure: (error: Error) => void\n  cancel: (error: Error) => void\n}\n\n// BufferedDocument.LOCAL never updates its revision due to its internal consistency checks\n// but we sometimes we need the most current _rev on the document in UI land, e.g.\n// in order to do optimistic locking on the edited document to make sure we publish the document the user\n// actually are looking at, and not the one currently at the server\n// Also - the mutator is not setting _updatedAt on patches applied optimistically or\n// when they are received from server\nconst getUpdatedSnapshot = (bufferedDocument: BufferedDocument) => {\n  const LOCAL = bufferedDocument.LOCAL\n  const HEAD = bufferedDocument.document.HEAD\n  if (!LOCAL) {\n    return LOCAL\n  }\n\n  return {\n    ...LOCAL,\n    _type: (HEAD || LOCAL)._type,\n    _rev: (HEAD || LOCAL)._rev,\n    _updatedAt: new Date().toISOString(),\n  }\n}\n\nconst toSnapshotEvent = (document: any): SnapshotEvent => ({type: 'snapshot', document})\nconst getDocument = <T extends {document: any}>(event: T): T['document'] => event.document\n\n/** @internal */\n// This is an observable interface for BufferedDocument in an attempt\n// to make it easier to work with the api provided by it\nexport const createObservableBufferedDocument = (listenerEvent$: Observable<ListenerEvent>) => {\n  // Incoming local actions (e.g. a request to mutate, a request to commit pending changes, etc.)\n  const actions$ = new Subject<Action>()\n\n  // Stream of commit requests. Must be handled by a commit handler\n  const consistency$ = new BehaviorSubject<boolean>(true)\n\n  // Stream of mutations for this document\n  // NOTE: this will *not* include remote mutations received over the listener\n  // that has *already* applied locally/optimistically\n  const mutations$ = new Subject<DocumentMutationEvent>()\n\n  // a stream of rebase events emitted from the mutator\n  const rebase$ = new Subject<DocumentRebaseEvent>()\n\n  // a stream of remote mutations with effetcs\n  const remoteMutations = new Subject<DocumentRemoteMutationEvent>()\n\n  const commitRequests = new Subject<CommitRequest>()\n\n  const createInitialBufferedDocument = (initialSnapshot: SanityDocument | null) => {\n    const bufferedDocument = new BufferedDocument(initialSnapshot)\n    bufferedDocument.onMutation = ({mutation, remote}: any) => {\n      // this is called after either when:\n      // 1) local mutations has been added, optimistically applied and queued for sending\n      // 2) remote mutations originating from another client has arrived and been applied\n      mutations$.next({\n        type: 'mutation',\n        document: getUpdatedSnapshot(bufferedDocument) as any,\n        mutations: mutation.mutations,\n        origin: remote ? 'remote' : 'local',\n      })\n    }\n    bufferedDocument.onRemoteMutation = (mutation: any) => {\n      remoteMutations.next({\n        type: 'remoteMutation',\n        head: bufferedDocument.document.HEAD as any,\n        transactionId: mutation.transactionId,\n        timestamp: mutation.timestamp,\n        author: mutation.identity,\n        effects: mutation.effects,\n      })\n    }\n\n    bufferedDocument.onRebase = (edge: any, nextRemoteMutations: any, localMutations: any) => {\n      rebase$.next({\n        type: 'rebase',\n        document: edge,\n        remoteMutations: nextRemoteMutations,\n        localMutations,\n      })\n    }\n\n    bufferedDocument.onConsistencyChanged = (isConsistent) => {\n      consistency$.next(isConsistent)\n    }\n\n    bufferedDocument.commitHandler = (commitArg: CommitRequest) => commitRequests.next(commitArg)\n\n    return bufferedDocument\n  }\n\n  const currentBufferedDocument$ = listenerEvent$.pipe(\n    scan((bufferedDocument: BufferedDocument | null, listenerEvent) => {\n      // consider renaming 'snapshot' to initial/welcome\n      if (listenerEvent.type === 'snapshot') {\n        if (bufferedDocument) {\n          // we received a new snapshot and already got an old one. When we receive a snapshot again\n          // it is usually because the connection has been down. Attempt to save pending changes (if any)\n          bufferedDocument.commit()\n        }\n        return createInitialBufferedDocument(listenerEvent.document || null)\n      }\n      if (bufferedDocument === null) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          'Ignoring event of type \"%s\" since buffered document has not yet been set up with snapshot',\n          listenerEvent.type\n        )\n        return null\n      }\n      return bufferedDocument\n    }, null),\n    filter(\n      <T>(bufferedDocument: T): bufferedDocument is NonNullable<T> => bufferedDocument !== null\n    ),\n    distinctUntilChanged(),\n    publishReplay(1),\n    refCount()\n  )\n\n  // this is a stream of document snapshots where each new snapshot are emitted after listener mutations\n  // has been applied. Since the optimistic patches is not emitted on the mutation$ stream, we need this\n  // in order to update the document with a new _rev (and _updatedAt)\n  const snapshotAfterSync$ = listenerEvent$.pipe(\n    filter((ev): ev is MutationEvent => ev.type === 'mutation'),\n    withLatestFrom(currentBufferedDocument$),\n    map(([mutationEvent, bufferedDocument]) => {\n      bufferedDocument!.arrive(new Mutation(mutationEvent))\n      return getUpdatedSnapshot(bufferedDocument!)\n    })\n  )\n\n  // this is where the side effects mandated by local actions actually happens\n  const actionHandler$ = actions$.pipe(\n    withLatestFrom(currentBufferedDocument$),\n    tap(([action, bufferedDocument]: [Action, BufferedDocument]) => {\n      if (action.type === 'mutation') {\n        bufferedDocument!.add(new Mutation({mutations: action.mutations}))\n      }\n      if (action.type === 'commit') {\n        bufferedDocument!.commit()\n      }\n    }),\n    // We subscribe to this only for the side effects\n    mergeMapTo(EMPTY),\n    share()\n  )\n\n  const emitAction = (action: any) => actions$.next(action)\n\n  const addMutations = (mutations: MutationPayload[]) => emitAction({type: 'mutation', mutations})\n  const addMutation = (mutation: MutationPayload) => addMutations([mutation])\n\n  const commit = () => {\n    currentBufferedDocument$\n      .pipe(\n        take(1),\n        tap((bufferedDocument) => bufferedDocument!.commit())\n      )\n      .subscribe()\n  }\n\n  // A stream of this document's snapshot\n  const snapshot$ = merge(\n    currentBufferedDocument$.pipe(map((bufferedDocument) => bufferedDocument!.LOCAL)),\n    mutations$.pipe(map(getDocument)),\n    rebase$.pipe(map(getDocument)),\n    snapshotAfterSync$\n  ).pipe(map(toSnapshotEvent), publishReplay(1), refCount())\n\n  const remoteSnapshot$: Observable<RemoteSnapshotEvent> = merge(\n    currentBufferedDocument$.pipe(\n      map((bufferedDocument) => bufferedDocument!.document.HEAD as any),\n      map(toSnapshotEvent)\n    ),\n    remoteMutations\n  ).pipe(publishReplay(1), refCount())\n\n  return {\n    updates$: merge(snapshot$, actionHandler$, mutations$, rebase$),\n    consistency$: consistency$.pipe(distinctUntilChanged(), publishReplay(1), refCount()),\n    remoteSnapshot$,\n    commitRequest$: commitRequests,\n    addMutation,\n    addMutations,\n    commit,\n  }\n}\n","import {SanityDocument} from '@sanity/types'\nimport {Observable} from 'rxjs'\nimport {ListenerEvent} from '../getPairListener'\nimport {CommitRequest, createObservableBufferedDocument} from './createObservableBufferedDocument'\nimport {\n  CommittedEvent,\n  DocumentMutationEvent,\n  DocumentRebaseEvent,\n  MutationPayload,\n  RemoteSnapshotEvent,\n  SnapshotEvent,\n} from './types'\n\n/** @beta */\nexport type BufferedDocumentEvent =\n  | SnapshotEvent\n  | DocumentRebaseEvent\n  | DocumentMutationEvent\n  | CommittedEvent\n\nconst prepare = (id: string) => (document: Partial<SanityDocument>) => {\n  const {_id, _rev, _updatedAt, ...rest} = document\n  return {_id: id, ...rest}\n}\n\n/** @internal */\nexport interface BufferedDocumentWrapper {\n  consistency$: Observable<boolean>\n  remoteSnapshot$: Observable<RemoteSnapshotEvent>\n  events: Observable<BufferedDocumentEvent>\n  commitRequest$: Observable<CommitRequest>\n  // helper functions\n  patch: (patches: any[]) => MutationPayload[]\n  create: (document: Partial<SanityDocument>) => MutationPayload\n  createIfNotExists: (document: SanityDocument) => MutationPayload\n  createOrReplace: (document: SanityDocument) => MutationPayload\n  delete: () => MutationPayload\n\n  mutate: (mutations: MutationPayload[]) => void\n  commit: () => void\n}\n\n/** @internal */\nexport const createBufferedDocument = (\n  documentId: string,\n  // consider naming it remoteEvent$\n  listenerEvent$: Observable<ListenerEvent>\n): BufferedDocumentWrapper => {\n  const bufferedDocument = createObservableBufferedDocument(listenerEvent$)\n\n  const prepareDoc = prepare(documentId)\n\n  const DELETE = {delete: {id: documentId}}\n\n  return {\n    events: bufferedDocument.updates$,\n    consistency$: bufferedDocument.consistency$,\n    remoteSnapshot$: bufferedDocument.remoteSnapshot$,\n    commitRequest$: bufferedDocument.commitRequest$,\n\n    patch: (patches) => patches.map((patch) => ({patch: {...patch, id: documentId}})),\n    create: (document) => ({create: prepareDoc(document)}),\n    createIfNotExists: (document) => ({createIfNotExists: prepareDoc(document)}),\n    createOrReplace: (document) => ({createOrReplace: prepareDoc(document)}),\n    delete: () => DELETE,\n\n    mutate: (mutations: MutationPayload[]) => bufferedDocument.addMutations(mutations),\n    commit: () => bufferedDocument.commit(),\n  }\n}\n","/* eslint-disable @typescript-eslint/no-use-before-define */\nimport type {SanityDocument} from '@sanity/types'\nimport {defer, Observable, of as observableOf} from 'rxjs'\nimport {concatMap, map, mergeMap, scan} from 'rxjs/operators'\nimport {groupBy} from 'lodash'\nimport {SanityClient} from '@sanity/client'\nimport type {\n  IdPair,\n  MutationEvent,\n  PendingMutationsEvent,\n  ReconnectEvent,\n  WelcomeEvent,\n} from './types'\n\ninterface Snapshots {\n  draft: SanityDocument | null\n  published: SanityDocument | null\n}\n\n/** @internal */\nexport interface InitialSnapshotEvent {\n  type: 'snapshot'\n  documentId: string\n  document: SanityDocument | null\n}\n\n/** @internal */\nexport interface PairListenerOptions {\n  tag?: string\n}\n\n/** @internal */\nexport type ListenerEvent =\n  | MutationEvent\n  | ReconnectEvent\n  | InitialSnapshotEvent\n  | PendingMutationsEvent\n\nconst PENDING_START: PendingMutationsEvent = {type: 'pending', phase: 'begin'}\nconst PENDING_END: PendingMutationsEvent = {type: 'pending', phase: 'end'}\n\nfunction isMutationEvent(msg: ListenerEvent): msg is MutationEvent {\n  return msg.type === 'mutation'\n}\nfunction isMultiTransactionEvent(msg: MutationEvent) {\n  return msg.transactionTotalEvents > 1\n}\n\nfunction allPendingTransactionEventsReceived(listenerEvents: ListenerEvent[]) {\n  const groupedMutations = groupBy(\n    listenerEvents.filter((ev): ev is MutationEvent => ev.type === 'mutation'),\n    (e) => e.transactionId\n  )\n  // Note: we can't assume that the events come in order, so instead of checking the counter attributes we check that we have actually received all\n  return Object.values(groupedMutations).every(\n    (mutations) => mutations.length === mutations[0].transactionTotalEvents\n  )\n}\n\n/** @internal */\nexport function getPairListener(\n  client: SanityClient,\n  idPair: IdPair,\n  options: PairListenerOptions = {}\n): Observable<ListenerEvent> {\n  const {publishedId, draftId} = idPair\n  return defer(\n    () =>\n      client.observable.listen(\n        `*[_id == $publishedId || _id == $draftId]`,\n        {\n          publishedId,\n          draftId,\n        },\n        {\n          includeResult: false,\n          events: ['welcome', 'mutation', 'reconnect'],\n          effectFormat: 'mendoza',\n          tag: options.tag || 'document.pair-listener',\n        }\n      ) as Observable<WelcomeEvent | MutationEvent | ReconnectEvent>\n  ).pipe(\n    concatMap((event) =>\n      event.type === 'welcome'\n        ? fetchInitialDocumentSnapshots().pipe(\n            concatMap((snapshots) => [\n              createSnapshotEvent(draftId, snapshots.draft),\n              createSnapshotEvent(publishedId, snapshots.published),\n            ])\n          )\n        : observableOf(event)\n    ),\n    scan(\n      (acc: {next: ListenerEvent[]; buffer: ListenerEvent[]}, msg) => {\n        // we only care about mutation events\n        if (!isMutationEvent(msg)) {\n          return {next: [msg], buffer: []}\n        }\n\n        const isBuffering = acc.buffer.length > 0\n        const isMulti = isMultiTransactionEvent(msg)\n        if (!isMulti && !isBuffering) {\n          // simple case, we have no buffer, and the event is a single-transaction event, so just pass it on\n          return {next: [msg], buffer: []}\n        }\n\n        if (!isMulti) {\n          // we have received a single transaction event while waiting for the rest of events from a multi transaction\n          // put it in the buffer\n          return {next: [], buffer: acc.buffer.concat(msg)}\n        }\n\n        const nextBuffer = acc.buffer.concat(msg)\n        if (allPendingTransactionEventsReceived(nextBuffer)) {\n          // we have received all pending transactions, emit the buffer, and signal end of buffer\n          return {next: nextBuffer.concat(PENDING_END), buffer: []}\n        }\n        // if we get here, we are still waiting for more multi-transaction messages\n        // if nextBuffer only has one element, we know we just started buffering\n        return {next: nextBuffer.length === 1 ? [PENDING_START] : [], buffer: nextBuffer}\n      },\n      {next: [], buffer: []}\n    ),\n    // note: this flattens the array, and in the case of an empty array, no event will be pushed downstream\n    mergeMap((v) => v.next)\n  )\n\n  function fetchInitialDocumentSnapshots(): Observable<Snapshots> {\n    return client.observable\n      .getDocuments<SanityDocument>([draftId, publishedId], {tag: 'document.snapshots'})\n      .pipe(\n        map(([draft, published]) => ({\n          draft,\n          published,\n        }))\n      )\n  }\n}\n\nfunction createSnapshotEvent(\n  documentId: string,\n  document: null | SanityDocument\n): InitialSnapshotEvent {\n  return {\n    type: 'snapshot',\n    documentId,\n    document,\n  }\n}\n","import {SanityClient} from '@sanity/client'\nimport {EMPTY, from, merge, Observable} from 'rxjs'\nimport {filter, map, mergeMap, mergeMapTo, share, tap} from 'rxjs/operators'\nimport {SanityDocument} from '@sanity/types'\nimport {Mutation} from '@sanity/mutator'\nimport {getPairListener, ListenerEvent} from '../getPairListener'\nimport {\n  BufferedDocumentEvent,\n  createBufferedDocument,\n  RemoteSnapshotEvent,\n  CommitRequest,\n  MutationPayload,\n} from '../buffered-doc'\nimport {IdPair, PendingMutationsEvent, ReconnectEvent} from '../types'\n\nconst isMutationEventForDocId =\n  (id: string) =>\n  (\n    event: ListenerEvent\n  ): event is Exclude<ListenerEvent, ReconnectEvent | PendingMutationsEvent> => {\n    return event.type !== 'reconnect' && event.type !== 'pending' && event.documentId === id\n  }\n\n/** @beta */\nexport type WithVersion<T> = T & {version: 'published' | 'draft'}\n\n/** @beta */\nexport type DocumentVersionEvent = WithVersion<ReconnectEvent | BufferedDocumentEvent>\n\n/** @beta */\nexport type RemoteSnapshotVersionEvent = WithVersion<RemoteSnapshotEvent>\n\n/** @beta */\nexport interface DocumentVersion {\n  consistency$: Observable<boolean>\n  remoteSnapshot$: Observable<RemoteSnapshotVersionEvent>\n  events: Observable<DocumentVersionEvent>\n\n  patch: (patches: any[]) => MutationPayload[]\n  create: (document: Partial<SanityDocument>) => MutationPayload\n  createIfNotExists: (document: SanityDocument) => MutationPayload\n  createOrReplace: (document: SanityDocument) => MutationPayload\n  delete: () => MutationPayload\n\n  mutate: (mutations: MutationPayload[]) => void\n  commit: () => void\n}\n\n/** @beta */\nexport interface Pair {\n  /** @internal */\n  transactionsPendingEvents$: Observable<PendingMutationsEvent>\n  published: DocumentVersion\n  draft: DocumentVersion\n}\n\nfunction setVersion<T>(version: 'draft' | 'published') {\n  return (ev: T): T & {version: 'draft' | 'published'} => ({...ev, version})\n}\n\nfunction commitMutations(client: SanityClient, mutationParams: Mutation['params']) {\n  const {resultRev, ...mutation} = mutationParams\n  return client.dataRequest('mutate', mutation, {\n    visibility: 'async',\n    returnDocuments: false,\n    tag: 'document.commit',\n    // This makes sure the studio doesn't crash when a draft is crated\n    // because someone deleted a referenced document in the target dataset\n    skipCrossDatasetReferenceValidation: true,\n  })\n}\n\nfunction submitCommitRequest(client: SanityClient, request: CommitRequest) {\n  return from(commitMutations(client, request.mutation.params)).pipe(\n    tap({\n      error: (error) => {\n        const isBadRequest =\n          'statusCode' in error &&\n          typeof error.statusCode === 'number' &&\n          error.statusCode >= 400 &&\n          error.statusCode <= 500\n        if (isBadRequest) {\n          request.cancel(error)\n        } else {\n          request.failure(error)\n        }\n      },\n      next: () => request.success(),\n    })\n  )\n}\n\n/** @internal */\nexport function checkoutPair(client: SanityClient, idPair: IdPair): Pair {\n  const {publishedId, draftId} = idPair\n\n  const listenerEvents$ = getPairListener(client, idPair).pipe(share())\n\n  const reconnect$ = listenerEvents$.pipe(\n    filter((ev) => ev.type === 'reconnect')\n  ) as Observable<ReconnectEvent>\n\n  const draft = createBufferedDocument(\n    draftId,\n    listenerEvents$.pipe(filter(isMutationEventForDocId(draftId)))\n  )\n\n  const published = createBufferedDocument(\n    publishedId,\n    listenerEvents$.pipe(filter(isMutationEventForDocId(publishedId)))\n  )\n\n  // share commit handling between draft and published\n  const transactionsPendingEvents$ = listenerEvents$.pipe(\n    filter((ev): ev is PendingMutationsEvent => ev.type === 'pending')\n  )\n\n  const commits$ = merge(draft.commitRequest$, published.commitRequest$).pipe(\n    mergeMap((commitRequest) => submitCommitRequest(client, commitRequest)),\n    mergeMapTo(EMPTY),\n    share()\n  )\n\n  return {\n    transactionsPendingEvents$,\n    draft: {\n      ...draft,\n      events: merge(commits$, reconnect$, draft.events).pipe(map(setVersion('draft'))),\n      consistency$: draft.consistency$,\n      remoteSnapshot$: draft.remoteSnapshot$.pipe(map(setVersion('draft'))),\n    },\n    published: {\n      ...published,\n      events: merge(commits$, reconnect$, published.events).pipe(map(setVersion('published'))),\n      consistency$: published.consistency$,\n      remoteSnapshot$: published.remoteSnapshot$.pipe(map(setVersion('published'))),\n    },\n  }\n}\n","import {Schema} from '@sanity/types'\n\nexport const isLiveEditEnabled = (schema: Schema, typeName: string): boolean =>\n  schema.get(typeName)?.liveEdit === true\n","import {Observable} from 'rxjs'\n\nexport function memoize<T, Arg1>(\n  fn: (arg1: Arg1) => Observable<T>,\n  keyGen: (arg1: Arg1) => string\n): (arg1: Arg1) => Observable<T>\nexport function memoize<T, Arg1, Arg2>(\n  fn: (arg1: Arg1, arg2: Arg2) => Observable<T>,\n  keyGen: (arg1: Arg1, arg2: Arg2) => string\n): (arg1: Arg1, arg2: Arg2) => Observable<T>\n\nexport function memoize<T, Arg1, Arg2, Arg3>(\n  fn: (arg1: Arg1, arg2: Arg2, arg3: Arg3) => Observable<T>,\n  keyGen: (arg1: Arg1, arg2: Arg2, arg3: Arg3) => string\n): (arg1: Arg1, arg2: Arg2, arg3: Arg3) => Observable<T>\n\nexport function memoize<T, Arg1, Arg2, Arg3, Arg4>(\n  fn: (arg1: Arg1, arg2: Arg2, arg3: Arg3, arg4: Arg4) => Observable<T>,\n  keyGen: (arg1: Arg1, arg2: Arg2, arg3: Arg3, arg4: Arg4) => string\n): (arg1: Arg1, arg2: Arg2, arg3: Arg3, arg4: Arg4) => Observable<T>\n\nexport function memoize<T, Args>(\n  fn: (...args: Args[]) => Observable<T>,\n  keyGen: (...args: Args[]) => string\n) {\n  const MEMO: {[key: string]: Observable<T>} = Object.create(null)\n  return (...args: any[]) => {\n    const key = keyGen(...args)\n    if (!(key in MEMO)) {\n      MEMO[key] = fn(...args)\n    }\n    return MEMO[key]\n  }\n}\n","import {SanityClient} from '@sanity/client'\nimport {Observable} from 'rxjs'\nimport {publishReplay, refCount} from 'rxjs/operators'\nimport {IdPair} from '../types'\nimport {memoize} from '../utils/createMemoizer'\nimport {checkoutPair, Pair} from './checkoutPair'\n\nexport const memoizedPair: (\n  client: SanityClient,\n  idPair: IdPair,\n  _typeName?: string\n) => Observable<Pair> = memoize(\n  (client: SanityClient, idPair: IdPair, _typeName?: string): Observable<Pair> => {\n    return new Observable<Pair>((subscriber) => {\n      subscriber.next(checkoutPair(client, idPair))\n    }).pipe(publishReplay(1), refCount())\n  },\n  (_client, idPair) => idPair.publishedId\n)\n","import {SanityDocument} from '@sanity/types'\nimport {filter, map, publishReplay, refCount} from 'rxjs/operators'\nimport {Observable} from 'rxjs'\nimport {SanityClient} from '@sanity/client'\nimport {IdPair, PendingMutationsEvent, ReconnectEvent} from '../types'\nimport {BufferedDocumentEvent, MutationPayload, SnapshotEvent} from '../buffered-doc'\nimport {memoize} from '../utils/createMemoizer'\nimport {memoizedPair} from './memoizedPair'\nimport {DocumentVersion} from './checkoutPair'\n\n// return true if the event comes with a document snapshot\nfunction isSnapshotEvent(event: BufferedDocumentEvent | ReconnectEvent): event is SnapshotEvent & {\n  version: 'published' | 'draft'\n} {\n  return event.type === 'snapshot'\n}\n\nfunction withSnapshots(pair: DocumentVersion): DocumentVersionSnapshots {\n  return {\n    snapshots$: pair.events.pipe(\n      filter(isSnapshotEvent),\n      map((event) => event.document),\n      publishReplay(1),\n      refCount()\n    ),\n\n    patch: pair.patch,\n    create: pair.create,\n    createIfNotExists: pair.createIfNotExists,\n    createOrReplace: pair.createOrReplace,\n    delete: pair.delete,\n\n    mutate: pair.mutate,\n    commit: pair.commit,\n  }\n}\n\n/** @internal */\nexport interface DocumentVersionSnapshots {\n  snapshots$: Observable<SanityDocument>\n\n  // helper functions\n  patch: (patches: any[]) => MutationPayload[]\n  create: (document: any) => MutationPayload\n  createIfNotExists: (document: any) => MutationPayload\n  createOrReplace: (document: any) => MutationPayload\n  delete: () => MutationPayload\n\n  mutate: (mutations: MutationPayload[]) => void\n  commit: () => void\n}\n\n/** @internal */\ninterface SnapshotPair {\n  transactionsPendingEvents$: Observable<PendingMutationsEvent>\n  draft: DocumentVersionSnapshots\n  published: DocumentVersionSnapshots\n}\n\n/** @internal */\nexport const snapshotPair = memoize(\n  (client: SanityClient, idPair: IdPair, typeName: string) => {\n    return memoizedPair(client, idPair, typeName).pipe(\n      map(({published, draft, transactionsPendingEvents$}): SnapshotPair => {\n        return {\n          transactionsPendingEvents$,\n          published: withSnapshots(published),\n          draft: withSnapshots(draft),\n        }\n      }),\n      publishReplay(1),\n      refCount()\n    )\n  },\n  (_client, idPair, typeName) => idPair.publishedId + typeName\n)\n","import {SanityDocument, Schema} from '@sanity/types'\nimport {combineLatest, Observable} from 'rxjs'\nimport {map, publishReplay, refCount, startWith, switchMap} from 'rxjs/operators'\nimport {SanityClient} from '@sanity/client'\nimport {IdPair, PendingMutationsEvent} from '../types'\nimport {isLiveEditEnabled} from './utils/isLiveEditEnabled'\nimport {snapshotPair} from './snapshotPair'\n\ninterface TransactionSyncLockState {\n  enabled: boolean\n}\n\n/** @beta */\nexport interface EditStateFor {\n  id: string\n  type: string\n  transactionSyncLock: TransactionSyncLockState | null\n  draft: SanityDocument | null\n  published: SanityDocument | null\n  liveEdit: boolean\n  ready: boolean\n}\nconst LOCKED: TransactionSyncLockState = {enabled: true}\nconst NOT_LOCKED: TransactionSyncLockState = {enabled: false}\n\n/** @internal */\nexport const editState = (\n  ctx: {\n    client: SanityClient\n    schema: Schema\n  },\n  idPair: IdPair,\n  typeName: string\n): Observable<EditStateFor> => {\n  const liveEdit = isLiveEditEnabled(ctx.schema, typeName)\n  return snapshotPair(ctx.client, idPair, typeName).pipe(\n    switchMap((versions) =>\n      combineLatest([\n        versions.draft.snapshots$,\n        versions.published.snapshots$,\n        versions.transactionsPendingEvents$.pipe(\n          map((ev: PendingMutationsEvent) => (ev.phase === 'begin' ? LOCKED : NOT_LOCKED)),\n          startWith(NOT_LOCKED)\n        ),\n      ])\n    ),\n    map(([draftSnapshot, publishedSnapshot, transactionSyncLock]) => ({\n      id: idPair.publishedId,\n      type: typeName,\n      draft: draftSnapshot,\n      published: publishedSnapshot,\n      liveEdit,\n      ready: true,\n      transactionSyncLock,\n    })),\n    startWith({\n      id: idPair.publishedId,\n      type: typeName,\n      draft: null,\n      published: null,\n      liveEdit,\n      ready: false,\n      transactionSyncLock: null,\n    }),\n    publishReplay(1),\n    refCount()\n  )\n}\n","/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport {SanityClient} from '@sanity/client'\nimport {Schema} from '@sanity/types'\nimport {combineLatest, Observable} from 'rxjs'\nimport {map, publishReplay, refCount, switchMap} from 'rxjs/operators'\nimport {HistoryStore} from '../../history'\nimport {IdPair} from '../types'\nimport {memoize} from '../utils/createMemoizer'\nimport {snapshotPair} from './snapshotPair'\nimport {OperationArgs} from './operations'\n\nexport const operationArgs = memoize(\n  (\n    ctx: {\n      client: SanityClient\n      historyStore: HistoryStore\n      schema: Schema\n    },\n    idPair: IdPair,\n    typeName: string\n  ): Observable<OperationArgs> => {\n    return snapshotPair(ctx.client, idPair, typeName).pipe(\n      switchMap((versions) =>\n        combineLatest([versions.draft.snapshots$, versions.published.snapshots$]).pipe(\n          map(\n            ([draft, published]): OperationArgs => ({\n              ...ctx,\n              idPair,\n              typeName: typeName,\n              snapshots: {draft, published},\n              draft: versions.draft,\n              published: versions.published,\n            })\n          )\n        )\n      ),\n      publishReplay(1),\n      refCount()\n    )\n  },\n  (_ctx, idPair, typeName) => idPair.publishedId + typeName\n)\n","import {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\nimport {OperationImpl} from './types'\n\nexport const del: OperationImpl<[], 'NOTHING_TO_DELETE'> = {\n  disabled: ({snapshots}) => (snapshots.draft || snapshots.published ? false : 'NOTHING_TO_DELETE'),\n  execute: ({client, schema, idPair, typeName}) => {\n    const tx = client.observable.transaction().delete(idPair.publishedId)\n\n    if (isLiveEditEnabled(schema, typeName)) {\n      return tx.commit({tag: 'document.delete'})\n    }\n\n    return tx.delete(idPair.draftId).commit({\n      tag: 'document.delete',\n      // this disables referential integrity for cross-dataset references. we\n      // have this set because we warn against deletes in the `ConfirmDeleteDialog`\n      // UI. This operation is run when \"delete anyway\" is clicked\n      skipCrossDatasetReferenceValidation: true,\n    })\n  },\n}\n","import {omit} from 'lodash'\nimport {isReference} from '@sanity/types'\nimport {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\nimport {OperationImpl} from './index'\n\nfunction strengthenOnPublish<T = any>(obj: T): T {\n  if (isReference(obj)) {\n    if (obj._strengthenOnPublish) {\n      return omit(\n        obj,\n        ['_strengthenOnPublish'].concat(obj._strengthenOnPublish.weak ? [] : ['_weak'])\n      ) as T\n    }\n    return obj\n  }\n  if (typeof obj !== 'object' || !obj) return obj\n  if (Array.isArray(obj)) return obj.map(strengthenOnPublish) as T\n  return Object.fromEntries(\n    Object.entries(obj).map(([key, value]) => [key, strengthenOnPublish(value)] as const)\n  ) as T\n}\n\ntype DisabledReason = 'LIVE_EDIT_ENABLED' | 'ALREADY_PUBLISHED' | 'NO_CHANGES'\n\nexport const publish: OperationImpl<[], DisabledReason> = {\n  disabled: ({schema, typeName, snapshots}) => {\n    if (isLiveEditEnabled(schema, typeName)) {\n      return 'LIVE_EDIT_ENABLED'\n    }\n    if (!snapshots.draft) {\n      return snapshots.published ? 'ALREADY_PUBLISHED' : 'NO_CHANGES'\n    }\n    return false\n  },\n  execute: ({client, idPair, snapshots}) => {\n    if (!snapshots.draft) {\n      throw new Error('cannot execute \"publish\" when draft is missing')\n    }\n    const value = strengthenOnPublish(omit(snapshots.draft, '_updatedAt'))\n    const tx = client.observable.transaction()\n    if (!snapshots.draft) {\n      throw new Error('cannot execute \"publish\" when draft is missing')\n    }\n\n    if (snapshots.published) {\n      // If it exists already, we only want to update it if the revision on the remote server\n      // matches what our local state thinks it's at\n      tx.patch(idPair.publishedId, {\n        // Hack until other mutations support revision locking\n        unset: ['_revision_lock_pseudo_field_'],\n        ifRevisionID: snapshots.published._rev,\n      })\n\n      tx.createOrReplace({\n        ...value,\n        _id: idPair.publishedId,\n        _type: snapshots.draft._type,\n      })\n    } else {\n      // If the document has not been published, we want to create it - if it suddenly exists\n      // before being created, we don't want to overwrite if, instead we want to yield an error\n      tx.create({\n        ...value,\n        _id: idPair.publishedId,\n        _type: snapshots.draft._type,\n      })\n    }\n\n    tx.delete(idPair.draftId)\n\n    return tx.commit({tag: 'document.publish', visibility: 'async'})\n  },\n}\n","import {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\nimport {OperationImpl} from './types'\n\n// todo: we could also consider exposing 'mutate' directly\nexport const patch: OperationImpl<[patches: any[], initialDocument: Record<string, any>]> = {\n  disabled: (): false => false,\n  execute: (\n    {schema, snapshots, idPair, draft, published, typeName},\n    patches = [],\n    initialDocument\n  ): void => {\n    if (isLiveEditEnabled(schema, typeName)) {\n      // No drafting, so patch and commit the published document\n      published.mutate([\n        published.createIfNotExists({\n          _type: typeName,\n          ...initialDocument,\n        }),\n        ...published.patch(patches),\n      ])\n    } else {\n      draft.mutate([\n        draft.createIfNotExists({\n          ...initialDocument,\n          ...snapshots.published,\n          _id: idPair.draftId,\n          _type: typeName,\n        }),\n        ...draft.patch(patches),\n      ])\n    }\n  },\n}\n","import {EMPTY} from 'rxjs'\nimport {OperationImpl} from './types'\n\nexport const commit: OperationImpl = {\n  disabled: (): false => false,\n  execute: ({draft, published}) => {\n    draft.commit()\n    published.commit()\n    // note: we might be able to connect with the outgoing commit request stream here\n    return EMPTY\n  },\n}\n","import {OperationImpl} from './types'\n\ntype DisabledReason = 'NO_CHANGES' | 'NOT_PUBLISHED'\n\nexport const discardChanges: OperationImpl<[], DisabledReason> = {\n  disabled: ({snapshots}) => {\n    if (!snapshots.draft) {\n      return 'NO_CHANGES'\n    }\n    if (!snapshots.published) {\n      return 'NOT_PUBLISHED'\n    }\n    return false\n  },\n  execute: ({client, idPair}) => {\n    return client.observable\n      .transaction()\n      .delete(idPair.draftId)\n      .commit({tag: 'document.discard-changes'})\n  },\n}\n","import {omit} from 'lodash'\nimport {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\nimport {OperationImpl} from './types'\n\ntype DisabledReason = 'LIVE_EDIT_ENABLED' | 'NOT_PUBLISHED'\n\nexport const unpublish: OperationImpl<[], DisabledReason> = {\n  disabled: ({schema, snapshots, typeName}) => {\n    if (isLiveEditEnabled(schema, typeName)) {\n      return 'LIVE_EDIT_ENABLED'\n    }\n    return snapshots.published ? false : 'NOT_PUBLISHED'\n  },\n  execute: ({client, idPair, snapshots}) => {\n    let tx = client.observable.transaction().delete(idPair.publishedId)\n\n    if (snapshots.published) {\n      tx = tx.createIfNotExists({\n        ...omit(snapshots.published, '_updatedAt'),\n        _id: idPair.draftId,\n        _type: snapshots.published._type,\n      })\n    }\n\n    return tx.commit({\n      tag: 'document.unpublish',\n      visibility: 'async',\n      // this disables referential integrity for cross-dataset references. we\n      // have this set because we warn against unpublishes in the `ConfirmDeleteDialog`\n      // UI. This operation is run when \"unpublish anyway\" is clicked\n      skipCrossDatasetReferenceValidation: true,\n    })\n  },\n}\n","import {omit} from 'lodash'\nimport {getDraftId} from '../../../../../util'\nimport {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\nimport {OperationImpl} from './types'\n\nconst omitProps = ['_createdAt', '_updatedAt']\n\nexport const duplicate: OperationImpl<[baseDocumentId: string], 'NOTHING_TO_DUPLICATE'> = {\n  disabled: ({snapshots}) => {\n    return snapshots.published || snapshots.draft ? false : 'NOTHING_TO_DUPLICATE'\n  },\n  execute: ({schema, client, snapshots, typeName}, dupeId) => {\n    const source = snapshots.draft || snapshots.published\n\n    if (!source) {\n      throw new Error('cannot execute on empty document')\n    }\n\n    return client.observable.create(\n      {\n        ...omit(source, omitProps),\n        _id: isLiveEditEnabled(schema, typeName) ? dupeId : getDraftId(dupeId),\n        _type: source._type,\n      },\n      {\n        tag: 'document.duplicate',\n      }\n    )\n  },\n}\n","import {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\nimport {OperationImpl} from './types'\n\nexport const restore: OperationImpl<[fromRevision: string]> = {\n  disabled: (): false => false,\n  execute: ({historyStore, schema, idPair, typeName}, fromRevision: string) => {\n    const targetId = isLiveEditEnabled(schema, typeName) ? idPair.publishedId : idPair.draftId\n    return historyStore.restore(idPair.publishedId, targetId, fromRevision)\n  },\n}\n","import {SanityClient} from '@sanity/client'\nimport {Observable, combineLatest} from 'rxjs'\nimport {distinctUntilChanged, map, publishReplay, refCount, switchMap} from 'rxjs/operators'\nimport {memoize} from '../utils/createMemoizer'\nimport {IdPair} from '../types'\nimport {memoizedPair} from './memoizedPair'\n\n// A stream of all events related to either published or draft, each event comes with a 'target'\n// that specifies which version (draft|published) the event is about\nexport const consistencyStatus: (\n  client: SanityClient,\n  idPair: IdPair,\n  typeName: string\n) => Observable<boolean> = memoize(\n  (client: SanityClient, idPair: IdPair, typeName: string) => {\n    return memoizedPair(client, idPair, typeName).pipe(\n      switchMap(({draft, published}) =>\n        combineLatest([draft.consistency$, published.consistency$])\n      ),\n      map(\n        ([draftIsConsistent, publishedIsConsistent]) => draftIsConsistent && publishedIsConsistent\n      ),\n      distinctUntilChanged(),\n      publishReplay(1),\n      refCount()\n    )\n  },\n  (_client, idPair, typeName) => idPair.publishedId + typeName\n)\n","import {SanityClient} from '@sanity/client'\nimport {defer, asyncScheduler, merge, Observable, of, Subject, EMPTY} from 'rxjs'\nimport {\n  catchError,\n  filter,\n  groupBy,\n  last,\n  map,\n  mergeMap,\n  mergeMapTo,\n  share,\n  switchMap,\n  take,\n  tap,\n  throttleTime,\n} from 'rxjs/operators'\nimport {Schema} from '@sanity/types'\nimport {IdPair} from '../types'\nimport {HistoryStore} from '../../history'\nimport {OperationArgs, OperationImpl, OperationsAPI} from './operations'\nimport {operationArgs} from './operationArgs'\nimport {del} from './operations/delete'\nimport {publish} from './operations/publish'\nimport {patch} from './operations/patch'\nimport {commit} from './operations/commit'\nimport {discardChanges} from './operations/discardChanges'\nimport {unpublish} from './operations/unpublish'\nimport {duplicate} from './operations/duplicate'\nimport {restore} from './operations/restore'\nimport {consistencyStatus} from './consistencyStatus'\n\ninterface ExecuteArgs {\n  operationName: keyof OperationsAPI\n  idPair: IdPair\n  typeName: string\n  extraArgs: any[]\n}\n\nfunction maybeObservable(v: void | Observable<any>) {\n  return typeof v === 'undefined' ? of(null) : v\n}\n\nconst operationImpls: {[name: string]: OperationImpl<any>} = {\n  del: del,\n  delete: del,\n  publish,\n  patch,\n  commit,\n  discardChanges,\n  unpublish,\n  duplicate,\n  restore,\n}\n\nconst execute = (\n  operationName: keyof typeof operationImpls,\n  operationArguments: OperationArgs,\n  extraArgs: any[]\n): Observable<any> => {\n  const operation = operationImpls[operationName]\n  return defer(() =>\n    merge(of(null), maybeObservable(operation.execute(operationArguments, ...extraArgs)))\n  ).pipe(last())\n}\n\nconst operationCalls$ = new Subject<ExecuteArgs>()\n\n/** @internal */\nexport function emitOperation(\n  operationName: keyof OperationsAPI,\n  idPair: IdPair,\n  typeName: string,\n  extraArgs: any[]\n): void {\n  operationCalls$.next({operationName, idPair, typeName, extraArgs})\n}\n\n// These are the operations that cannot be performed while the document is in an inconsistent state\nconst REQUIRES_CONSISTENCY = ['publish', 'unpublish', 'discardChanges', 'delete']\n\n/** @beta */\nexport interface OperationError {\n  type: 'error'\n  /** @internal */\n  op: keyof OperationsAPI\n  id: string\n  error: Error\n}\n\n/** @beta */\nexport interface OperationSuccess {\n  type: 'success'\n  /** @internal */\n  op: keyof OperationsAPI\n  id: string\n}\n\ninterface IntermediarySuccess {\n  type: 'success'\n  args: ExecuteArgs\n}\n\ninterface IntermediaryError {\n  type: 'error'\n  args: ExecuteArgs\n  error: any\n}\n\n/** @internal */\nexport type OperationEventsListener = (\n  idPair: IdPair,\n  typeName?: string\n) => Observable<OperationSuccess | OperationError>\n\nconst listenerCache = new Map<string, OperationEventsListener>()\n\n/** @internal */\nexport function getOperationEvents(ctx: {\n  client: SanityClient\n  historyStore: HistoryStore\n  schema: Schema\n}): OperationEventsListener {\n  const {dataset, projectId} = ctx.client.config()\n  const cacheKey = `${projectId}-${dataset}`\n  if (listenerCache.has(cacheKey)) {\n    return listenerCache.get(cacheKey)!\n  }\n\n  const result$: Observable<IntermediarySuccess | IntermediaryError> = operationCalls$.pipe(\n    groupBy((op) => op.idPair.publishedId),\n    mergeMap((groups$) =>\n      groups$.pipe(\n        // although it might look like a bug, dropping pending async operations here is actually a feature\n        // E.g. if the user types `publish` which is async and then starts patching (sync) then the publish\n        // should be cancelled\n        switchMap((args) =>\n          operationArgs(ctx, args.idPair, args.typeName).pipe(\n            take(1),\n            switchMap((operationArguments) => {\n              const requiresConsistency = REQUIRES_CONSISTENCY.includes(args.operationName)\n              if (requiresConsistency) {\n                operationArguments.published.commit()\n                operationArguments.draft.commit()\n              }\n              const isConsistent$ = consistencyStatus(ctx.client, args.idPair, args.typeName).pipe(\n                filter(Boolean)\n              )\n              const ready$ = requiresConsistency ? isConsistent$.pipe(take(1)) : of(null)\n              return ready$.pipe(\n                // eslint-disable-next-line max-nested-callbacks\n                mergeMap(() => execute(args.operationName, operationArguments, args.extraArgs))\n              )\n            }),\n            map((): IntermediarySuccess => ({type: 'success', args})),\n            catchError(\n              (err): Observable<IntermediaryError> => of({type: 'error', args, error: err})\n            )\n          )\n        )\n      )\n    ),\n    share()\n  )\n\n  // this enables autocommit after patch operations\n  const AUTOCOMMIT_INTERVAL = 1000\n  const autoCommit$ = result$.pipe(\n    filter((result) => result.type === 'success' && result.args.operationName === 'patch'),\n    throttleTime(AUTOCOMMIT_INTERVAL, asyncScheduler, {leading: true, trailing: true}),\n    tap((result) => {\n      emitOperation('commit', result.args.idPair, result.args.typeName, [])\n    })\n  )\n\n  const cache = new Map<string, Observable<OperationSuccess | OperationError>>()\n\n  function listener(\n    idPair: IdPair,\n    typeName?: string\n  ): Observable<OperationSuccess | OperationError> {\n    const key = `${idPair.publishedId}:${typeName}`\n\n    let ret = cache.get(key)\n\n    if (!ret) {\n      ret = merge(result$, autoCommit$.pipe(mergeMapTo(EMPTY))).pipe(\n        filter((result) => result.args.idPair.publishedId === idPair.publishedId),\n        map((result): OperationSuccess | OperationError => {\n          const {operationName, idPair: documentIds} = result.args\n          return result.type === 'success'\n            ? {type: 'success', op: operationName, id: documentIds.publishedId}\n            : {type: 'error', op: operationName, id: documentIds.publishedId, error: result.error}\n        })\n      )\n\n      cache.set(key, ret)\n    }\n\n    return ret\n  }\n\n  listenerCache.set(cacheKey, listener)\n\n  return listener\n}\n","import {SanityClient} from '@sanity/client'\nimport {merge} from 'rxjs'\nimport {switchMap} from 'rxjs/operators'\nimport {IdPair} from '../types'\nimport {memoize} from '../utils/createMemoizer'\nimport {memoizedPair} from './memoizedPair'\n\n/** @internal */\nexport const remoteSnapshots = memoize(\n  (client: SanityClient, idPair: IdPair, typeName: string) => {\n    return memoizedPair(client, idPair, typeName).pipe(\n      switchMap(({published, draft}) => merge(published.remoteSnapshot$, draft.remoteSnapshot$))\n    )\n  },\n  (_client, idPair, typeName) => idPair.publishedId + typeName\n)\n","import type {SanityClient} from '@sanity/client'\nimport {asyncScheduler, combineLatest, concat, defer, from, Observable, of, timer} from 'rxjs'\nimport {\n  distinct,\n  distinctUntilChanged,\n  first,\n  groupBy,\n  map,\n  mergeMap,\n  publishReplay,\n  refCount,\n  scan,\n  share,\n  shareReplay,\n  skip,\n  throttleTime,\n} from 'rxjs/operators'\nimport {validateDocumentObservable} from '@sanity/validation'\nimport {isReference, Schema, ValidationContext, ValidationMarker} from '@sanity/types'\nimport {reduce as reduceJSON} from 'json-reduce'\nimport shallowEquals from 'shallow-equals'\nimport {omit} from 'lodash'\nimport {exhaustMapWithTrailing} from 'rxjs-exhaustmap-with-trailing'\nimport {SourceClientOptions} from '../../../../config'\nimport {memoize} from '../utils/createMemoizer'\nimport {IdPair} from '../types'\nimport {DraftsModelDocumentAvailability} from '../../../../preview'\nimport {editState} from './editState'\n\n/** @beta */\nexport interface ValidationStatus {\n  isValidating: boolean\n  validation: ValidationMarker[]\n  revision?: string\n}\n\nconst INITIAL_VALIDATION_STATUS: ValidationStatus = {\n  isValidating: true,\n  validation: [],\n}\n\nfunction findReferenceIds(obj: any): Set<string> {\n  return reduceJSON(\n    obj,\n    (acc, node) => {\n      if (isReference(node)) {\n        acc.add(node._ref)\n      }\n      return acc\n    },\n    new Set<string>()\n  )\n}\n\nconst EMPTY_VALIDATION: ValidationMarker[] = []\n\ntype GetDocumentExists = NonNullable<ValidationContext['getDocumentExists']>\n\ntype ObserveDocumentPairAvailability = (id: string) => Observable<DraftsModelDocumentAvailability>\n\nconst listenDocumentExists = (\n  observeDocumentAvailability: ObserveDocumentPairAvailability,\n  id: string\n): Observable<boolean> =>\n  observeDocumentAvailability(id).pipe(map(({published}) => published.available))\n\n// throttle delay for document updates (i.e. time between responding to changes in the current document)\nconst DOC_UPDATE_DELAY = 200\n\n// throttle delay for referenced document updates (i.e. time between responding to changes in referenced documents)\nconst REF_UPDATE_DELAY = 1000\n\n/** @internal */\nexport const validation = memoize(\n  (\n    ctx: {\n      client: SanityClient\n      getClient: (options: SourceClientOptions) => SanityClient\n      observeDocumentPairAvailability: ObserveDocumentPairAvailability\n      schema: Schema\n    },\n    {draftId, publishedId}: IdPair,\n    typeName: string\n  ): Observable<ValidationStatus> => {\n    const document$ = editState(ctx, {draftId, publishedId}, typeName).pipe(\n      map(({draft, published}) => draft || published),\n      throttleTime(DOC_UPDATE_DELAY, asyncScheduler, {trailing: true}),\n      distinctUntilChanged((prev, next) => {\n        if (prev?._rev === next?._rev) {\n          return true\n        }\n        // _rev and _updatedAt may change without other fields changing (due to a limitation in mutator)\n        // so only pass on documents if _other_ attributes changes\n        return shallowEquals(omit(prev, '_rev', '_updatedAt'), omit(next, '_rev', '_updatedAt'))\n      }),\n      share()\n    )\n\n    const referenceIds$ = document$.pipe(\n      map((document) => findReferenceIds(document)),\n      mergeMap((ids) => from(ids))\n    )\n\n    // Note: we only use this to trigger a re-run of validation when a referenced document is published/unpublished\n    const referenceExistence$ = referenceIds$.pipe(\n      groupBy(\n        (id) => id,\n        undefined,\n        () => timer(1000 * 60 * 30)\n      ),\n      mergeMap((id$) =>\n        id$.pipe(\n          distinct(),\n          mergeMap((id) =>\n            listenDocumentExists(ctx.observeDocumentPairAvailability, id).pipe(\n              map(\n                // eslint-disable-next-line max-nested-callbacks\n                (result) => [id, result] as const\n              )\n            )\n          )\n        )\n      ),\n      scan((acc: Record<string, boolean>, [id, result]) => {\n        if (Boolean(acc[id]) === result) {\n          return acc\n        }\n        return result ? {...acc, [id]: result} : omit(acc, id)\n      }, {}),\n      distinctUntilChanged(shallowEquals),\n      shareReplay({refCount: true, bufferSize: 1})\n    )\n\n    // Provided to individual validation functions to support using existence of a weakly referenced document\n    // as part of the validation rule (used by references in place)\n    const getDocumentExists: GetDocumentExists = ({id}) =>\n      referenceExistence$\n        .pipe(\n          first(),\n          map((referenceExistence) => referenceExistence[id])\n        )\n        .toPromise()\n\n    const referenceDocumentUpdates$ = referenceExistence$.pipe(\n      // we'll skip the first emission since the document already gets an initial validation pass\n      // we're only interested in updates in referenced documents after that\n      skip(1),\n      throttleTime(REF_UPDATE_DELAY, asyncScheduler, {leading: true, trailing: true})\n    )\n\n    return combineLatest([document$, concat(of(null), referenceDocumentUpdates$)]).pipe(\n      map(([document]) => document),\n      exhaustMapWithTrailing((document) => {\n        return defer(() => {\n          if (!document?._type) {\n            return of({validation: EMPTY_VALIDATION, isValidating: false})\n          }\n          return concat(\n            of({isValidating: true, revision: document._rev}),\n            validateDocumentObservable(ctx.getClient, document, ctx.schema, {\n              getDocumentExists,\n            }).pipe(\n              map((validationMarkers) => ({validation: validationMarkers, isValidating: false}))\n            )\n          )\n        })\n      }),\n      scan((acc, next) => ({...acc, ...next}), INITIAL_VALIDATION_STATUS),\n      publishReplay(1),\n      refCount()\n    )\n  },\n  (_ctx, idPair) => idPair.publishedId\n)\n","import {SanityClient} from '@sanity/client'\nimport {merge, Observable} from 'rxjs'\nimport {switchMap} from 'rxjs/operators'\nimport {IdPair} from '../types'\nimport {DocumentVersionEvent} from './checkoutPair'\nimport {memoizedPair} from './memoizedPair'\n\n// A stream of all events related to either published or draft, each event comes with a 'target'\n// that specifies which version (draft|published) the event is about\nexport function documentEvents(\n  client: SanityClient,\n  idPair: IdPair,\n  typeName?: string\n): Observable<DocumentVersionEvent> {\n  return memoizedPair(client, idPair).pipe(\n    switchMap(({draft, published}) => merge(draft.events, published.events))\n  )\n}\n","import {emitOperation} from '../operationEvents'\nimport {IdPair} from '../../types'\nimport {del} from './delete'\nimport {publish} from './publish'\nimport {patch} from './patch'\nimport {commit} from './commit'\nimport {discardChanges} from './discardChanges'\nimport {unpublish} from './unpublish'\nimport {duplicate} from './duplicate'\nimport {restore} from './restore'\nimport {Operation, OperationArgs, OperationImpl, OperationsAPI} from './types'\n\nfunction createOperationGuard(opName: string): Operation<any[], 'NOT_READY'> {\n  return {\n    disabled: 'NOT_READY',\n    execute: () => {\n      throw new Error(`Called ${opName} before it was ready.`)\n    },\n  }\n}\n\n// This creates a version of the operations api that will throw if called.\n// Most operations depend on having the \"current document state\" available locally and if an action gets called\n// before we have the state available, we throw an error to signal \"premature\" invocation before ready\nexport const GUARDED: OperationsAPI = {\n  commit: createOperationGuard('commit'),\n  delete: createOperationGuard('delete'),\n  del: createOperationGuard('del'),\n  publish: createOperationGuard('publish'),\n  patch: createOperationGuard('patch'),\n  discardChanges: createOperationGuard('discardChanges'),\n  unpublish: createOperationGuard('unpublish'),\n  duplicate: createOperationGuard('duplicate'),\n  restore: createOperationGuard('restore'),\n}\nconst createEmitter =\n  (operationName: keyof OperationsAPI, idPair: IdPair, typeName: string) =>\n  (...executeArgs: any[]) =>\n    emitOperation(operationName, idPair, typeName, executeArgs)\n\nfunction wrap<ExtraArgs extends any[], DisabledReason extends string>(\n  opName: keyof OperationsAPI,\n  op: OperationImpl<ExtraArgs, DisabledReason>,\n  operationArgs: OperationArgs\n): Operation<ExtraArgs, DisabledReason> {\n  const disabled = op.disabled(operationArgs)\n  return {\n    disabled,\n    execute: createEmitter(opName, operationArgs.idPair, operationArgs.typeName),\n  }\n}\n\nexport function createOperationsAPI(args: OperationArgs): OperationsAPI {\n  return {\n    commit: wrap('commit', commit, args),\n    delete: wrap('delete', del, args),\n    del: wrap('delete', del, args),\n    publish: wrap('publish', publish, args),\n    patch: wrap('patch', patch, args),\n    discardChanges: wrap('discardChanges', discardChanges, args),\n    unpublish: wrap('unpublish', unpublish, args),\n    duplicate: wrap('duplicate', duplicate, args),\n    restore: wrap('restore', restore, args),\n  }\n}\n","import {SanityClient} from '@sanity/client'\nimport {Schema} from '@sanity/types'\nimport {concat, merge, Observable, of, EMPTY} from 'rxjs'\nimport {map, publishReplay, refCount, mergeMapTo} from 'rxjs/operators'\nimport {HistoryStore} from '../../history'\nimport {IdPair} from '../types'\nimport {operationArgs} from './operationArgs'\nimport {OperationsAPI} from './operations'\nimport {createOperationsAPI, GUARDED} from './operations/helpers'\nimport {getOperationEvents} from './operationEvents'\n\nconst cache = new Map<string, Observable<OperationsAPI>>()\n\nexport const editOperations = (\n  ctx: {\n    client: SanityClient\n    historyStore: HistoryStore\n    schema: Schema\n  },\n  idPair: IdPair,\n  typeName: string\n): Observable<OperationsAPI> => {\n  const key = `${idPair.publishedId}:${typeName}`\n  let ret = cache.get(key)\n\n  if (!ret) {\n    const operationEvents = getOperationEvents(ctx)\n\n    // To makes sure we connect the stream that actually performs the operations\n    const operationResults$: Observable<never> = operationEvents(idPair, typeName).pipe(\n      mergeMapTo(EMPTY)\n    )\n\n    const operationArgs$ = operationArgs(ctx, idPair, typeName)\n\n    const operations$ = operationArgs$.pipe(map(createOperationsAPI))\n\n    ret = concat(of(GUARDED), merge(operationResults$, operations$)).pipe(\n      publishReplay(1),\n      refCount()\n    )\n\n    cache.set(key, ret)\n  }\n\n  return ret\n}\n","import {SanityClient} from '@sanity/client'\nimport {defer, partition, merge, of, throwError, asyncScheduler, Observable} from 'rxjs'\nimport {mergeMap, throttleTime, share, take, filter} from 'rxjs/operators'\nimport {exhaustMapToWithTrailing} from 'rxjs-exhaustmap-with-trailing'\nimport {ReconnectEvent, WelcomeEvent, MutationEvent} from './types'\n\n/** @internal */\nexport type ListenQueryParams = Record<string, string | number | boolean | string[]>\n\n/** @beta */\nexport interface ListenQueryOptions {\n  tag?: string\n  apiVersion?: string\n  throttleTime?: number\n  transitions?: ('update' | 'appear' | 'disappear')[]\n}\n\nconst fetch = (\n  client: SanityClient,\n  query: string,\n  params: ListenQueryParams,\n  options: ListenQueryOptions\n) =>\n  defer(() =>\n    // getVersionedClient(options.apiVersion)\n    client.observable.fetch(query, params, {\n      tag: options.tag,\n      filterResponse: true,\n    })\n  )\n\nconst listen = (\n  client: SanityClient,\n  query: string,\n  params: ListenQueryParams,\n  options: ListenQueryOptions\n) =>\n  defer(() =>\n    // getVersionedClient(options.apiVersion)\n    client.listen(query, params, {\n      events: ['welcome', 'mutation', 'reconnect'],\n      includeResult: false,\n      visibility: 'query',\n      tag: options.tag,\n    })\n  ) as Observable<ReconnectEvent | WelcomeEvent | MutationEvent>\n\nfunction isWelcomeEvent(\n  event: MutationEvent | ReconnectEvent | WelcomeEvent\n): event is WelcomeEvent {\n  return event.type === 'welcome'\n}\n\n/** @internal */\n// todo: promote as building block for better re-use\n// todo: optimize by patching collection in-place\nexport const listenQuery = (\n  client: SanityClient,\n  query: string | {fetch: string; listen: string},\n  params: ListenQueryParams = {},\n  options: ListenQueryOptions = {}\n) => {\n  const fetchQuery = typeof query === 'string' ? query : query.fetch\n  const listenerQuery = typeof query === 'string' ? query : query.listen\n\n  const fetchOnce$ = fetch(client, fetchQuery, params, options)\n\n  const events$ = listen(client, listenerQuery, params, options).pipe(\n    mergeMap((ev, i) => {\n      const isFirst = i === 0\n      if (isFirst && !isWelcomeEvent(ev)) {\n        // if the first event is not welcome, it is most likely a reconnect and\n        // if it's not a reconnect something is very wrong\n        return throwError(\n          new Error(\n            ev.type === 'reconnect'\n              ? 'Could not establish EventSource connection'\n              : `Received unexpected type of first event \"${ev.type}\"`\n          )\n        )\n      }\n      return of(ev)\n    }),\n    share()\n  )\n\n  const [welcome$, mutationAndReconnect$] = partition(events$, isWelcomeEvent)\n  const isRelevantEvent = (event: MutationEvent | ReconnectEvent | WelcomeEvent): boolean => {\n    if (!options.transitions || event.type !== 'mutation') {\n      return true\n    }\n\n    return options.transitions.includes(event.transition)\n  }\n\n  return merge(\n    welcome$.pipe(take(1)),\n    mutationAndReconnect$.pipe(\n      filter(isRelevantEvent),\n      throttleTime(options.throttleTime || 1000, asyncScheduler, {leading: true, trailing: true})\n    )\n  ).pipe(exhaustMapToWithTrailing(fetchOnce$))\n}\n","import {SanityClient} from '@sanity/client'\nimport type {Observable} from 'rxjs'\nimport {of} from 'rxjs'\nimport {map} from 'rxjs/operators'\nimport {getDraftId, getPublishedId} from '../../../util'\n\nexport function resolveTypeForDocument(\n  client: SanityClient,\n  id: string,\n  specifiedType = '*'\n): Observable<string> {\n  // if is resolved document type\n  if (specifiedType && specifiedType !== '*') {\n    return of(specifiedType)\n  }\n\n  const query = '*[_id in [$documentId, $draftId]]._type'\n  const documentId = getPublishedId(id)\n  const draftId = getDraftId(documentId)\n\n  return client.observable.fetch(query, {documentId, draftId}).pipe(map((types) => types[0]))\n}\n","import {isPlainObject} from 'lodash'\n\nexport function isRecord(value: unknown): value is Record<string, unknown> {\n  return isPlainObject(value)\n}\n","import {toString as pathToString} from '@sanity/util/paths'\nimport {randomKey} from '@sanity/util/content'\nimport {Schema} from '@sanity/types'\nimport {TemplateParameter, Template} from './types'\nimport {isRecord} from './util/isRecord'\n\nconst ALLOWED_REF_PROPS = ['_key', '_ref', '_weak', '_type']\nconst REQUIRED_TEMPLATE_PROPS: (keyof Template)[] = ['id', 'title', 'schemaType', 'value']\n\nfunction templateId(template: Template, i: number) {\n  return quote(template.id || template.title) || (typeof i === 'number' && `at index ${i}`) || ''\n}\n\nfunction quote(str: string) {\n  return str && str.length > 0 ? `\"${str}\"` : str\n}\n\nexport function validateTemplates(schema: Schema, templates: Template[]): Template[] {\n  const idMap = new Map()\n\n  templates.forEach((template, i) => {\n    const id = templateId(template, i)\n\n    if (typeof (template as {[key: string]: any}).values !== 'undefined' && !template.value) {\n      throw new Error(`Template ${id} is missing \"value\" property, but contained \"values\". Typo?`)\n    }\n\n    const missing = REQUIRED_TEMPLATE_PROPS.filter((prop) => !template[prop])\n    if (missing.length > 0) {\n      throw new Error(`Template ${id} is missing required properties: ${missing.join(', ')}`)\n    }\n\n    if (typeof template.value !== 'function' && !isRecord(template.value)) {\n      throw new Error(\n        `Template ${id} has an invalid \"value\" property; should be a function or an object`\n      )\n    }\n\n    if (typeof template.parameters !== 'undefined') {\n      if (Array.isArray(template.parameters)) {\n        template.parameters.forEach((param, j) => validateParameter(schema, param, template, j))\n      } else {\n        throw new Error(`Template ${id} has an invalid \"parameters\" property; must be an array`)\n      }\n    }\n\n    if (idMap.has(template.id)) {\n      const dupeIndex = idMap.get(template.id)\n      const dupe = `${quote(templates[dupeIndex].title)} at index ${dupeIndex}`\n      throw new Error(\n        `Template \"${template.title}\" at index ${i} has the same ID (\"${template.id}\") as template ${dupe}`\n      )\n    }\n\n    idMap.set(template.id, i)\n  })\n\n  return templates\n}\n\nexport function validateInitialObjectValue<T extends Record<string, unknown>>(\n  value: T,\n  template: Template\n): T {\n  const contextError = (msg: string) => `Template \"${template.id}\" initial value: ${msg}`\n\n  if (!isRecord(value)) {\n    throw new Error(contextError(`resolved to a non-object`))\n  }\n\n  if (value._type && template.schemaType !== value._type) {\n    throw new Error(\n      contextError(\n        `includes \"_type\"-property (${value._type}) that does not match template (${template.schemaType})`\n      )\n    )\n  }\n\n  try {\n    return validateValue(value)\n  } catch (err) {\n    err.message = contextError(err.message)\n    throw err\n  }\n}\n\nfunction validateValue(value: unknown, path: (string | number)[] = [], parentIsArray = false): any {\n  if (Array.isArray(value)) {\n    return value.map((item, i) => {\n      if (Array.isArray(item)) {\n        throw new Error(\n          `multidimensional arrays are not supported (at path \"${pathToString(path)}\")`\n        )\n      }\n\n      return validateValue(item, path.concat(i), true)\n    })\n  }\n\n  if (!isRecord(value)) {\n    return value\n  }\n\n  // Apply missing keys is the parent is an array\n  const initial: {[key: string]: any} = parentIsArray && !value._key ? {_key: randomKey()} : {}\n\n  // Ensure non-root objects have _type\n  if (path.length > 0 && !value._type) {\n    if (value._ref) {\n      // In the case of references, we know what the type should be, so apply it\n      initial._type = 'reference'\n    } else {\n      // todo: consider if we need to re-instantiate this. It currently makes the valid case of having an initial object value for a field fail\n      // throw new Error(`missing \"_type\" property at path \"${pathToString(path)}\"`)\n    }\n  }\n\n  if (value._ref) {\n    validateReference(value, path)\n  }\n\n  // Validate deeply\n  return Object.keys(value).reduce((acc, key) => {\n    acc[key] = validateValue(value[key], path.concat([key]))\n    return acc\n  }, initial)\n}\n\nfunction validateParameter(\n  schema: Schema,\n  parameter: TemplateParameter,\n  template: Template,\n  index: number\n) {\n  // const schema = getDefaultSchema()\n\n  if (!parameter.name) {\n    throw new Error(\n      `Template ${template.id} has a parameter at index ${index} that is missing its \"name\"-property`\n    )\n  }\n\n  // I know, this is a weird one\n  if (parameter.name === 'template') {\n    throw new Error(\n      `Template parameters cannot be named \"template\", see parameter #${index} for template ${template.id}`\n    )\n  }\n\n  if (!schema.get(parameter.type)) {\n    throw new Error(\n      `Template parameter \"${parameter.name}\" has an invalid/unknown type: \"${parameter.type}\"`\n    )\n  }\n}\n\nfunction validateReference(\n  value: {_type?: unknown; type?: unknown},\n  path: (string | number)[] = []\n) {\n  if (!value._type && value.type) {\n    throw new Error(\n      `Reference is missing \"_type\", but has a \"type\" property at path \"${pathToString(path)}\"`\n    )\n  }\n\n  const disallowed = Object.keys(value).filter((key) => !ALLOWED_REF_PROPS.includes(key))\n  if (disallowed.length > 0) {\n    const plural = disallowed.length > 1 ? 'properties' : 'property'\n    throw new Error(\n      `Disallowed ${plural} found in reference: ${disallowed\n        .map(quote)\n        .join(', ')} at path \"${pathToString(path)}\"`\n    )\n  }\n}\n","import {isRecord} from './isRecord'\n\n// deep object assign for objects\n// note: doesn't mutate target\nexport default function deepAssign(\n  target: Record<string, unknown>,\n  source: Record<string, unknown>\n): Record<string, unknown> {\n  const result = {...target, ...source}\n\n  Object.keys(result).forEach((key) => {\n    const sourceVal = source[key]\n    const targetVal = target[key]\n    if (isRecord(sourceVal) && isRecord(targetVal)) {\n      result[key] = deepAssign(targetVal, sourceVal)\n    }\n  })\n  return result\n}\n","import {\n  ArraySchemaType,\n  InitialValueProperty,\n  InitialValueResolver,\n  InitialValueResolverContext,\n  isArraySchemaType,\n  isObjectSchemaType,\n  ObjectSchemaType,\n  Schema,\n  SchemaType,\n} from '@sanity/types'\nimport {isEmpty, randomKey, resolveTypeName} from '@sanity/util/content'\nimport {isRecord} from './util/isRecord'\nimport {Template} from './types'\nimport {validateInitialObjectValue} from './validate'\nimport deepAssign from './util/deepAssign'\n\n/** @internal */\nexport type Serializeable<T> = {\n  serialize(): T\n}\n\n/** @internal */\nexport function isBuilder(template: unknown): template is Serializeable<Template> {\n  return isRecord(template) && typeof template.serialize === 'function'\n}\n\n/** @internal */\n// returns the \"resolved\" value from an initial value property (e.g. type.initialValue)\n// eslint-disable-next-line require-await\nexport async function resolveValue<Params, InitialValue>(\n  initialValueOpt: InitialValueProperty<Params, InitialValue>,\n  params: Params | undefined,\n  context: InitialValueResolverContext\n): Promise<InitialValue | undefined> {\n  return typeof initialValueOpt === 'function'\n    ? (initialValueOpt as InitialValueResolver<Params, InitialValue>)(params, context)\n    : initialValueOpt\n}\n\n/** @internal */\nexport async function resolveInitialValue(\n  schema: Schema,\n  template: Template,\n  params: {[key: string]: any} = {},\n  context: InitialValueResolverContext\n): Promise<{[key: string]: any}> {\n  // Template builder?\n  if (isBuilder(template)) {\n    return resolveInitialValue(schema, template.serialize(), params, context)\n  }\n\n  const {id, schemaType: schemaTypeName, value} = template\n  if (!value) {\n    throw new Error(`Template \"${id}\" has invalid \"value\" property`)\n  }\n\n  let resolvedValue = await resolveValue(value, params, context)\n\n  if (!isRecord(resolvedValue)) {\n    throw new Error(\n      `Template \"${id}\" has invalid \"value\" property - must be a plain object or a resolver function returning a plain object`\n    )\n  }\n\n  // validate default document initial values\n  resolvedValue = validateInitialObjectValue(resolvedValue, template)\n\n  // Get deep initial values from schema types (note: the initial value from template overrides the types)\n  const schemaType = schema.get(schemaTypeName)\n  if (!schemaType) {\n    throw new Error(`Could not find schema type with name \"${schemaTypeName}\".`)\n  }\n\n  const newValue = deepAssign(\n    (await resolveInitialValueForType(schemaType, params, DEFAULT_MAX_RECURSION_DEPTH, context)) ||\n      {},\n    resolvedValue as Record<string, unknown>\n  )\n\n  // revalidate and return new initial values\n  // todo: would be better to do validation as part of type resolution\n  return validateInitialObjectValue(newValue, template)\n}\n\n/** @internal */\nexport function getItemType(arrayType: ArraySchemaType, item: unknown): SchemaType | undefined {\n  const itemTypeName = resolveTypeName(item)\n\n  return itemTypeName === 'object' && arrayType.of.length === 1\n    ? arrayType.of[0]\n    : arrayType.of.find((memberType) => memberType.name === itemTypeName)\n}\n\n/** @internal */\nexport const DEFAULT_MAX_RECURSION_DEPTH = 10\n\n/**\n * Resolve initial value for the given schema type (recursively)\n *\n * @internal\n */\nexport function resolveInitialValueForType<Params extends Record<string, unknown>>(\n  /**\n   * This is the name of the document.\n   */\n  type: SchemaType,\n  /**\n   * Params is a sanity context object passed to every initial value function.\n   */\n  params: Params,\n  /**\n   * Maximum recursion depth (default 9).\n   */\n  maxDepth = DEFAULT_MAX_RECURSION_DEPTH,\n  context: InitialValueResolverContext\n): Promise<any> {\n  if (maxDepth <= 0) {\n    return Promise.resolve(undefined)\n  }\n\n  if (isObjectSchemaType(type)) {\n    return resolveInitialObjectValue(type, params, maxDepth, context)\n  }\n\n  if (isArraySchemaType(type)) {\n    return resolveInitialArrayValue(type, params, maxDepth, context)\n  }\n\n  return resolveValue(type.initialValue, params, context)\n}\n\nasync function resolveInitialArrayValue<Params extends Record<string, unknown>>(\n  type: SchemaType,\n  params: Params,\n  maxDepth: number,\n  context: InitialValueResolverContext\n): Promise<any> {\n  const initialArray = await resolveValue(type.initialValue, undefined, context)\n\n  if (!Array.isArray(initialArray)) {\n    return undefined\n  }\n\n  return Promise.all(\n    initialArray.map(async (initialItem) => {\n      const itemType = getItemType(type as ArraySchemaType, initialItem)!\n      return isObjectSchemaType(itemType)\n        ? {\n            ...initialItem,\n            ...(await resolveInitialValueForType(itemType, params, maxDepth - 1, context)),\n            _key: randomKey(),\n          }\n        : initialItem\n    })\n  )\n}\n\n/** @internal */\nexport async function resolveInitialObjectValue<Params extends Record<string, unknown>>(\n  type: ObjectSchemaType,\n  params: Params,\n  maxDepth: number,\n  context: InitialValueResolverContext\n): Promise<any> {\n  const initialObject: Record<string, unknown> = {\n    ...((await resolveValue(type.initialValue, params, context)) || {}),\n  }\n\n  const fieldValues: Record<string, any> = {}\n  await Promise.all(\n    type.fields.map(async (field) => {\n      const initialFieldValue = await resolveInitialValueForType(\n        field.type,\n        params,\n        maxDepth - 1,\n        context\n      )\n      if (initialFieldValue !== undefined && initialFieldValue !== null) {\n        fieldValues[field.name] = initialFieldValue\n      }\n    })\n  )\n\n  const merged = deepAssign(fieldValues, initialObject)\n\n  if (isEmpty(merged)) {\n    return undefined\n  }\n\n  if (type.name !== 'object') {\n    merged._type = type.name\n  }\n\n  return merged\n}\n","import {Schema, SchemaType} from '@sanity/types'\nimport {isBuilder} from './resolve'\nimport {Template} from './types'\nimport {validateTemplates} from './validate'\n\nfunction maybeSerialize(template: Template) {\n  return isBuilder(template) ? template.serialize() : template\n}\n\nfunction isNonNullable<T>(t: T): t is NonNullable<T> {\n  return !!t\n}\n\n/** @internal */\nexport function prepareTemplates(schema: Schema, initialValueTemplates: Template[]): Template[] {\n  const serialized = initialValueTemplates.map(maybeSerialize)\n  return validateTemplates(schema, serialized)\n}\n\n/** @internal */\nexport function defaultTemplateForType(schemaType: SchemaType): Template {\n  return {\n    id: schemaType.name,\n    schemaType: schemaType.name,\n    title: schemaType.title || schemaType.name,\n    icon: schemaType.icon,\n    value: schemaType.initialValue || {_type: schemaType.name},\n  }\n}\n\n/** @internal */\nexport function defaultTemplatesForSchema(schema: Schema): Template[] {\n  const schemaTypes = schema\n    .getTypeNames()\n    .filter((typeName) => !/^sanity\\./.test(typeName))\n    .map((typeName) => schema.get(typeName))\n    .filter(isNonNullable)\n    .filter((schemaType) => schemaType.type?.name === 'document')\n\n  return prepareTemplates(\n    schema,\n    schemaTypes.map((schemaType) => defaultTemplateForType(schemaType))\n  )\n}\n","import {InitialValueResolverContext, Schema} from '@sanity/types'\nimport {from, merge, Observable, of} from 'rxjs'\nimport {\n  map,\n  switchMap,\n  scan,\n  filter,\n  distinctUntilChanged,\n  catchError,\n  debounceTime,\n  startWith,\n} from 'rxjs/operators'\nimport {DocumentPreviewStore} from '../../../../preview'\nimport {resolveInitialValue, Template} from '../../../../templates'\nimport {getDraftId, getPublishedId} from '../../../../util'\nimport {\n  InitialValueErrorMsg,\n  InitialValueLoadingMsg,\n  InitialValueSuccessMsg,\n  InitialValueMsg,\n} from './types'\n\n/** @beta */\nexport interface InitialValueOptions {\n  documentId: string\n  documentType: string\n  templateName?: string\n  templateParams?: Record<string, any>\n}\n\nconst LOADING_MSG: InitialValueLoadingMsg = {type: 'loading'}\n\n/**\n * @internal\n */\nexport function getInitialValueStream(\n  schema: Schema,\n  initialValueTemplates: Template[],\n  documentPreviewStore: DocumentPreviewStore,\n  opts: InitialValueOptions,\n  context: InitialValueResolverContext\n): Observable<InitialValueMsg> {\n  const draft$ = documentPreviewStore.observePaths(\n    {_type: 'reference', _ref: getDraftId(opts.documentId)},\n    ['_type']\n  )\n\n  const published$ = documentPreviewStore.observePaths(\n    {_type: 'reference', _ref: getPublishedId(opts.documentId)},\n    ['_type']\n  )\n\n  const value$ = merge(\n    draft$.pipe(map((draft) => ({draft}))),\n    published$.pipe(map((published) => ({published})))\n  ).pipe(\n    scan((prev, res) => ({...prev, ...res}), {}),\n    // Wait until we know the state of both draft and published\n    filter((res) => 'draft' in res && 'published' in res),\n    map((res: any) => res.draft || res.published),\n    // Only update if we didn't previously have a document but we now do\n    distinctUntilChanged((prev, next) => Boolean(prev) !== Boolean(next)),\n    // Prevent rapid re-resolving when transitioning between different templates\n    debounceTime(25)\n  )\n\n  return value$.pipe(\n    switchMap((document) => {\n      // Already exists, so no initial value is needed\n      if (document) {\n        return of({type: 'success', value: null})\n      }\n\n      if (!opts.templateName) {\n        // @todo: Make sure this is the correct behavior\n        return of({isResolving: false, initialValue: undefined})\n      }\n\n      const template = initialValueTemplates.find((t) => t.id === opts.templateName)\n\n      if (!template) {\n        // eslint-disable-next-line no-console\n        console.warn('Template \"%s\" not defined, using empty initial value', opts.templateName)\n        return of({isResolving: false, initialValue: undefined})\n      }\n\n      const initialValueWithParams$ = from(\n        resolveInitialValue(schema, template, opts.templateParams, context)\n      )\n        .pipe(map((initialValue) => ({isResolving: false, initialValue})))\n        .pipe(\n          catchError((resolveError) => {\n            /* eslint-disable no-console */\n            console.group('Failed to resolve initial value')\n            console.error(resolveError)\n            console.error('Template ID: %s', opts.templateName)\n            console.error('Parameters: %o', opts.templateParams)\n            console.groupEnd()\n            /* eslint-enable no-console */\n\n            const msg: InitialValueErrorMsg = {type: 'error', error: resolveError}\n\n            return of(msg)\n          })\n        )\n\n      return merge(of({isResolving: true}), initialValueWithParams$).pipe(\n        switchMap(({isResolving, initialValue, resolveError}: any) => {\n          if (resolveError) {\n            return of({type: 'error', message: 'Failed to resolve initial value'})\n          }\n\n          if (isResolving) {\n            return of(LOADING_MSG)\n          }\n\n          const msg: InitialValueSuccessMsg = {type: 'success', value: initialValue}\n\n          return of(msg)\n        })\n      )\n    }),\n\n    startWith(LOADING_MSG),\n    distinctUntilChanged()\n  ) as Observable<InitialValueMsg>\n}\n","import {SanityClient} from '@sanity/client'\nimport {InitialValueResolverContext, Schema} from '@sanity/types'\nimport {Observable} from 'rxjs'\nimport {HistoryStore} from '../history'\nimport {DocumentPreviewStore} from '../../../preview'\nimport {getDraftId, isDraftId} from '../../../util'\nimport {Template} from '../../../templates'\nimport {SourceClientOptions} from '../../../config'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {checkoutPair, DocumentVersionEvent, Pair} from './document-pair/checkoutPair'\nimport {consistencyStatus} from './document-pair/consistencyStatus'\nimport {documentEvents} from './document-pair/documentEvents'\nimport {editOperations} from './document-pair/editOperations'\nimport {editState, EditStateFor} from './document-pair/editState'\nimport {getOperationEvents, OperationError, OperationSuccess} from './document-pair/operationEvents'\nimport {OperationsAPI} from './document-pair/operations'\nimport {validation, ValidationStatus} from './document-pair/validation'\nimport {listenQuery, ListenQueryOptions} from './listenQuery'\nimport {resolveTypeForDocument} from './resolveTypeForDocument'\nimport type {IdPair} from './types'\nimport {getInitialValueStream, InitialValueMsg, InitialValueOptions} from './initialValue'\n\n/** @beta */\nexport type QueryParams = Record<string, string | number | boolean | string[]>\n\nfunction getIdPairFromPublished(publishedId: string): IdPair {\n  if (isDraftId(publishedId)) {\n    throw new Error('editOpsOf does not expect a draft id.')\n  }\n\n  return {publishedId, draftId: getDraftId(publishedId)}\n}\n\n/** @beta */\nexport interface DocumentStore {\n  /** @internal */\n  checkoutPair: (idPair: IdPair) => Pair\n  initialValue: (\n    opts: InitialValueOptions,\n    context: InitialValueResolverContext\n  ) => Observable<InitialValueMsg>\n  listenQuery: (\n    query: string | {fetch: string; listen: string},\n    params: QueryParams,\n    options: ListenQueryOptions\n  ) => Observable<any>\n  resolveTypeForDocument: (id: string, specifiedType?: string) => Observable<string>\n\n  pair: {\n    consistencyStatus: (publishedId: string, type: string) => Observable<boolean>\n    /** @internal */\n    documentEvents: (publishedId: string, type: string) => Observable<DocumentVersionEvent>\n    /** @internal */\n    editOperations: (publishedId: string, type: string) => Observable<OperationsAPI>\n    editState: (publishedId: string, type: string) => Observable<EditStateFor>\n    operationEvents: (\n      publishedId: string,\n      type: string\n    ) => Observable<OperationSuccess | OperationError>\n    validation: (publishedId: string, type: string) => Observable<ValidationStatus>\n  }\n}\n\n/** @internal */\nexport interface DocumentStoreOptions {\n  getClient: (options: SourceClientOptions) => SanityClient\n  documentPreviewStore: DocumentPreviewStore\n  historyStore: HistoryStore\n  schema: Schema\n  initialValueTemplates: Template[]\n}\n\n/** @internal */\nexport function createDocumentStore({\n  getClient,\n  documentPreviewStore,\n  historyStore,\n  initialValueTemplates,\n  schema,\n}: DocumentStoreOptions): DocumentStore {\n  const observeDocumentPairAvailability =\n    documentPreviewStore.unstable_observeDocumentPairAvailability\n\n  // Note that we're both passing a shared `client` here which is used by the\n  // internal operations, and a `getClient` method that we expose to user-land\n  // for things like validations\n  const client = getClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const ctx = {client, getClient, observeDocumentPairAvailability, historyStore, schema}\n\n  const caches = {\n    pair: {\n      editOperations: new Map<string, Observable<OperationsAPI>>(),\n      editState: new Map<string, Observable<EditStateFor>>(),\n    },\n  }\n\n  const operationEvents = getOperationEvents(ctx)\n\n  return {\n    // Public API\n    checkoutPair(idPair) {\n      return checkoutPair(client, idPair)\n    },\n    initialValue(opts, context) {\n      return getInitialValueStream(\n        schema,\n        initialValueTemplates,\n        documentPreviewStore,\n        opts,\n        context\n      )\n    },\n    listenQuery(query, params, options) {\n      return listenQuery(client, query, params, options)\n    },\n    resolveTypeForDocument(id, specifiedType) {\n      return resolveTypeForDocument(client, id, specifiedType)\n    },\n    pair: {\n      consistencyStatus(publishedId, type) {\n        return consistencyStatus(ctx.client, getIdPairFromPublished(publishedId), type)\n      },\n      documentEvents(publishedId, type) {\n        return documentEvents(ctx.client, getIdPairFromPublished(publishedId), type)\n      },\n      editOperations(publishedId, type) {\n        const cache = caches.pair.editOperations\n        const key = `${publishedId}:${type}`\n        const cached = cache.get(key)\n        if (cached) {\n          return cached\n        }\n\n        const ops = editOperations(ctx, getIdPairFromPublished(publishedId), type)\n        cache.set(key, ops)\n        return ops\n      },\n      editState(publishedId, type) {\n        const cache = caches.pair.editState\n        const key = `${publishedId}:${type}`\n        const cached = cache.get(key)\n        if (cached) {\n          return cached\n        }\n\n        const state = editState(ctx, getIdPairFromPublished(publishedId), type)\n        cache.set(key, state)\n        return state\n      },\n      operationEvents(publishedId, type) {\n        return operationEvents(getIdPairFromPublished(publishedId), type)\n      },\n      validation(publishedId, type) {\n        return validation(ctx, getIdPairFromPublished(publishedId), type)\n      },\n    },\n  }\n}\n","import {useEffect, useMemo, useState} from 'react'\nimport {getPublishedId} from '../../../../util'\nimport {useDocumentStore} from '../../datastores'\n\n/** @internal */\nexport interface DocumentTypeResolveState {\n  isLoaded: boolean\n  documentType: string | undefined\n}\n\nconst LOADING_STATE: DocumentTypeResolveState = {\n  isLoaded: false,\n  documentType: undefined,\n}\n\n/** @internal */\nexport function useDocumentType(documentId: string, specifiedType = '*'): DocumentTypeResolveState {\n  const documentStore = useDocumentStore()\n  const publishedId = getPublishedId(documentId)\n  const isResolved = Boolean(specifiedType && specifiedType !== '*')\n\n  // Memoize what a synchronously resolved state looks like (eg specified type is present),\n  // in order to return the same object each time. Note that this can be \"incorrect\", but\n  // that we won't be returning it in that case, eg: `{documentType: '*', isResolved: true}\n  const SYNC_RESOLVED_STATE = useMemo(\n    () => ({documentType: specifiedType, isLoaded: true}),\n    [specifiedType]\n  )\n\n  // Set up our state that we'll only use when we need to reach out to the API to find\n  // the document type for a given document. Otherwise we'll be using SYNC_RESOLVED_STATE.\n  // For consistency (between different document ids/types), we're setting the sync resolved\n  // state here as well, but it isn't strictly necessary for correct rendering.\n  const [resolvedState, setDocumentType] = useState<DocumentTypeResolveState>(\n    isResolved ? SYNC_RESOLVED_STATE : LOADING_STATE\n  )\n\n  // Reset documentType when documentId changes. Note that we're using the referentially\n  // stable LOADING_STATE in order to prevent double rendering on initial load.\n  useEffect(() => setDocumentType(LOADING_STATE), [publishedId, specifiedType])\n\n  // Load the documentType from Content Lake, unless we're already in a resolved state\n  useEffect(() => {\n    if (isResolved) {\n      return undefined\n    }\n\n    const sub = documentStore\n      .resolveTypeForDocument(publishedId, specifiedType)\n      .subscribe((documentType: string) => setDocumentType({documentType, isLoaded: true}))\n\n    return () => sub.unsubscribe()\n  }, [documentStore, publishedId, specifiedType, isResolved])\n\n  return isResolved\n    ? // `isResolved` is only true when we're _synchronously_ resolved\n      SYNC_RESOLVED_STATE\n    : // Using the document type resolved from the API\n      resolvedState\n}\n","import {useMemo} from 'react'\nimport {Observable, of} from 'rxjs'\nimport {LoadableState, useLoadable} from '../../../../util'\nimport {useDocumentPreviewStore} from '../../datastores'\n\n/** @internal */\nexport function useDocumentValues<T = Record<string, unknown>>(\n  documentId: string,\n  paths: string[]\n): LoadableState<T | undefined> {\n  const documentPreviewStore = useDocumentPreviewStore()\n\n  const documentValues$ = useMemo(\n    () =>\n      documentId\n        ? (documentPreviewStore.observePaths(\n            {_type: 'reference', _ref: documentId},\n            paths\n          ) as Observable<T>)\n        : of(undefined),\n    [documentId, documentPreviewStore, paths]\n  )\n\n  return useLoadable(documentValues$)\n}\n","import {InitialValueResolverContext, SanityDocumentLike} from '@sanity/types'\nimport {useEffect, useMemo, useState} from 'react'\nimport {useDataset, useProjectId, useSchema} from '../../../hooks'\nimport {useSource} from '../../../studio'\nimport {useUnique} from '../../../util'\nimport {useCurrentUser} from '../../user'\nimport {useDocumentStore} from '../datastores'\nimport {InitialValueState} from './initialValue/types'\n\n/**\n * @internal\n */\nexport function useInitialValue(props: {\n  documentId: string\n  documentType: string\n  templateName?: string\n  templateParams?: Record<string, unknown>\n}): InitialValueState {\n  const {documentId, documentType, templateName, templateParams: templateParamsRaw} = props\n  const templateParams = useUnique(templateParamsRaw)\n  const documentStore = useDocumentStore()\n  const context = useInitialValueResolverContext()\n\n  const defaultValue: SanityDocumentLike = useMemo(\n    () => ({_id: documentId, _type: documentType}),\n    [documentId, documentType]\n  )\n\n  const [state, setState] = useState<InitialValueState>({\n    loading: false,\n    error: null,\n    value: defaultValue,\n  })\n\n  useEffect(() => {\n    const initialValueOptions = {documentId, documentType, templateName, templateParams}\n\n    if (!templateName) {\n      setState({loading: true, error: null, value: defaultValue})\n      return undefined\n    }\n\n    const initialValueMsg$ = documentStore.initialValue(initialValueOptions, context)\n\n    const sub = initialValueMsg$.subscribe((msg) => {\n      if (msg.type === 'loading') {\n        setState({loading: true, error: null, value: defaultValue})\n      }\n\n      if (msg.type === 'success') {\n        setState({\n          loading: false,\n          error: null,\n          value: msg.value ? {...defaultValue, ...msg.value} : defaultValue,\n        })\n      }\n\n      if (msg.type === 'error') {\n        setState({loading: false, error: msg.error, value: defaultValue})\n      }\n    })\n\n    setState({loading: true, error: null, value: defaultValue})\n\n    return () => sub.unsubscribe()\n  }, [defaultValue, documentId, documentStore, documentType, templateName, templateParams, context])\n\n  return state\n}\n\n/**\n * @internal\n */\nexport function useInitialValueResolverContext(): InitialValueResolverContext {\n  const source = useSource()\n  const schema = useSchema()\n  const currentUser = useCurrentUser()\n  const projectId = useProjectId()\n  const dataset = useDataset()\n  const getClient = source.getClient\n\n  return useMemo(() => {\n    return {\n      projectId,\n      dataset,\n      getClient,\n      schema,\n      currentUser,\n    }\n  }, [getClient, schema, currentUser, projectId, dataset])\n}\n","import {SchemaType} from '@sanity/types'\nimport {useCallback} from 'react'\nimport {DEFAULT_MAX_RECURSION_DEPTH, resolveInitialValueForType} from '../../../templates'\nimport {useInitialValueResolverContext} from './useInitialValue'\n\n/** @internal */\nexport function useResolveInitialValueForType<Params extends Record<string, unknown>>(): (\n  /**\n   * This is the name of the document.\n   */\n  type: SchemaType,\n  /**\n   * Params is a sanity context object passed to every initial value function.\n   */\n  params: Params\n) => Promise<any> {\n  const initialValueContext = useInitialValueResolverContext()\n\n  return useCallback(\n    (type: SchemaType, params: Params) => {\n      return resolveInitialValueForType(\n        type,\n        params,\n        DEFAULT_MAX_RECURSION_DEPTH,\n        initialValueContext\n      )\n    },\n    [initialValueContext]\n  )\n}\n","import {SanityClient} from '@sanity/client'\nimport {SanityDocument, Schema, SchemaType} from '@sanity/types'\nimport {Observable, combineLatest, of} from 'rxjs'\nimport {switchMap, map} from 'rxjs/operators'\nimport {\n  type PartialExcept,\n  createHookFromObservableFactory,\n  getDraftId,\n  getPublishedId,\n} from '../../../util'\nimport {useGrantsStore} from '../datastores'\nimport {snapshotPair} from '../document'\nimport {useClient, useSchema} from '../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {GrantsStore, PermissionCheckResult} from './types'\nimport {useMemo} from 'react'\n\nfunction getSchemaType(schema: Schema, typeName: string): SchemaType {\n  const type = schema.get(typeName)\n\n  if (!type) {\n    throw new Error(`No such schema type: ${typeName}`)\n  }\n\n  return type\n}\n\ninterface PairPermissionsOptions {\n  grantsStore: GrantsStore\n  permission: DocumentPermission\n  draft: SanityDocument | null\n  published: SanityDocument | null\n  liveEdit: boolean\n}\n\nfunction getPairPermissions({\n  grantsStore,\n  permission,\n  draft,\n  published,\n  liveEdit,\n}: PairPermissionsOptions): Array<[string, Observable<PermissionCheckResult>] | null> {\n  // this was introduced because we ran into a bug where a user with publish\n  // access was marked as not allowed to duplicate a document unless it had a\n  // draft variant. this would happen in non-live edit cases where the document\n  // pair only had a published variant with the draft variant being null.\n  //\n  // note: this should _not_ be used if the draft and published versions should\n  // be considered separately/explicitly in the permissions.\n  const effectiveVersion = draft || published\n  const effectiveVersionType = effectiveVersion === draft ? 'draft' : 'published'\n\n  const {checkDocumentPermission} = grantsStore\n\n  switch (permission) {\n    case 'delete': {\n      if (liveEdit) {\n        return [\n          ['delete published document (live-edit)', checkDocumentPermission('update', published)],\n        ]\n      }\n\n      return [\n        ['delete draft document', checkDocumentPermission('update', draft)],\n        ['delete published document', checkDocumentPermission('update', published)],\n      ]\n    }\n\n    case 'discardDraft': {\n      if (liveEdit) return []\n\n      return [['delete draft document', checkDocumentPermission('update', draft)]]\n    }\n\n    case 'publish': {\n      if (liveEdit) return []\n\n      return [\n        // precondition\n        [\n          'update published document at its current state',\n          checkDocumentPermission('update', published),\n        ],\n\n        // post condition\n        ['delete draft document', checkDocumentPermission('update', draft)],\n        [\n          'create published document from draft',\n          checkDocumentPermission('create', draft && {...draft, _id: getPublishedId(draft._id)}),\n        ],\n      ]\n    }\n\n    case 'unpublish': {\n      if (liveEdit) return []\n\n      return [\n        // precondition\n        ['update draft document at its current state', checkDocumentPermission('create', draft)],\n\n        // post condition\n        ['delete published document', checkDocumentPermission('update', published)],\n        [\n          'create draft document from published version',\n          checkDocumentPermission(\n            'create',\n            published && {...published, _id: getDraftId(published._id)}\n          ),\n        ],\n      ]\n    }\n\n    case 'update': {\n      if (liveEdit) {\n        return [\n          ['update published document (live-edit)', checkDocumentPermission('update', published)],\n        ]\n      }\n\n      return [\n        [\n          `update ${effectiveVersionType} document`,\n          checkDocumentPermission('update', effectiveVersion),\n        ],\n      ]\n    }\n\n    case 'duplicate': {\n      if (liveEdit) {\n        return [\n          [\n            'create new published document from existing document (live-edit)',\n            checkDocumentPermission('create', {...published, _id: 'dummy-id'}),\n          ],\n        ]\n      }\n\n      return [\n        [\n          `create new draft document from existing ${effectiveVersionType} document`,\n          checkDocumentPermission('create', {...effectiveVersion, _id: getDraftId('dummy-id')}),\n        ],\n      ]\n    }\n\n    default: {\n      throw new Error(`Could not match permission: ${permission}`)\n    }\n  }\n}\n\n/** @internal */\nexport type DocumentPermission =\n  | 'delete'\n  | 'discardDraft'\n  | 'publish'\n  | 'unpublish'\n  | 'update'\n  | 'duplicate'\n\n/** @internal */\nexport interface DocumentPairPermissionsOptions {\n  client: SanityClient\n  schema: Schema\n  grantsStore: GrantsStore\n  id: string\n  type: string\n  permission: DocumentPermission\n}\n\n/**\n * The observable version of `useDocumentPairPermissions`\n *\n * @see useDocumentPairPermissions\n *\n * @internal\n */\nexport function getDocumentPairPermissions({\n  client,\n  grantsStore,\n  schema,\n  id,\n  permission,\n  type,\n}: DocumentPairPermissionsOptions): Observable<PermissionCheckResult> {\n  // this case was added to fix a crash that would occur if the `schemaType` was\n  // omitted from `S.documentList()`\n  //\n  // see `resolveTypeForDocument` which returns `'*'` if no type is provided\n  // https://github.com/sanity-io/sanity/blob/4d49b83a987d5097064d567f75d21b268a410cbf/packages/%40sanity/base/src/datastores/document/resolveTypeForDocument.ts#L7\n  if (type === '*') {\n    return of({granted: false, reason: 'Type specified was `*`'})\n  }\n\n  const liveEdit = Boolean(getSchemaType(schema, type).liveEdit)\n\n  return snapshotPair(\n    client,\n    {draftId: getDraftId(id), publishedId: getPublishedId(id)},\n    type\n  ).pipe(\n    switchMap((pair) =>\n      combineLatest([pair.draft.snapshots$, pair.published.snapshots$]).pipe(\n        map(([draft, published]) => ({draft, published}))\n      )\n    ),\n    switchMap(({draft, published}) => {\n      const pairPermissions = getPairPermissions({\n        grantsStore,\n        permission,\n        draft,\n        published,\n        liveEdit,\n      }).map(([label, observable]: any) =>\n        observable.pipe(\n          map(({granted, reason}: any) => ({\n            granted,\n            reason: granted ? '' : `not allowed to ${label}: ${reason}`,\n            label,\n            permission,\n          }))\n        )\n      )\n\n      if (!pairPermissions.length) return of({granted: true, reason: ''})\n\n      return combineLatest(pairPermissions).pipe(\n        map((permissionResults: any[]) => {\n          const granted = permissionResults.every((permissionResult) => permissionResult.granted)\n          const reason = granted\n            ? ''\n            : `Unable to ${permission}:\\n\\t${permissionResults\n                .filter((permissionResult) => !permissionResult.granted)\n                .map((permissionResult) => permissionResult.reason)\n                .join('\\n\\t')}`\n\n          return {granted, reason}\n        })\n      )\n    })\n  )\n}\n\n/**\n * Gets document pair permissions based on a document ID and a type.\n *\n * This permissions API is a high-level permissions API that is draft-model\n * aware. In order to determine whether or not the user has the given\n * permission, both the draft and published documents are pulled and run through\n * all of the user's grants. If any pre or post conditions fail a permissions\n * checks, the operations will not be granted.\n *\n * The operations this hook accepts are only relevant to document pairs. E.g.\n * `'create'` is not included as an operation because it's not possible to tell\n * if a document can be created by only using the initial ID and type because an\n * initial template value may not have a matching grant (e.g. locked-document\n * pattern `!locked`). In contrast, the operation `'duplicate'` is supported\n * because the draft value of the document can be live queried and checked for\n * matching grants.\n *\n * Note: for live-edit documents, non-applicable operations (e.g. publish) will\n * return as true.\n *\n * @see useDocumentValuePermissions\n *\n * @internal\n */\nexport const useDocumentPairPermissionsFromHookFactory = createHookFromObservableFactory(\n  getDocumentPairPermissions\n)\n\n/** @internal */\nexport function useDocumentPairPermissions({\n  id,\n  type,\n  permission,\n  client: overrideClient,\n  schema: overrideSchema,\n  grantsStore: overrideGrantsStore,\n}: PartialExcept<DocumentPairPermissionsOptions, 'id' | 'type' | 'permission'>): ReturnType<\n  typeof useDocumentPairPermissionsFromHookFactory\n> {\n  const defaultClient = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const defaultSchema = useSchema()\n  const defaultGrantsStore = useGrantsStore()\n\n  const client = useMemo(() => overrideClient || defaultClient, [defaultClient, overrideClient])\n  const schema = useMemo(() => overrideSchema || defaultSchema, [defaultSchema, overrideSchema])\n  const grantsStore = useMemo(\n    () => overrideGrantsStore || defaultGrantsStore,\n    [defaultGrantsStore, overrideGrantsStore]\n  )\n\n  return useDocumentPairPermissionsFromHookFactory(\n    useMemo(\n      () => ({client, schema, grantsStore, id, permission, type}),\n      [client, grantsStore, id, permission, schema, type]\n    )\n  )\n}\n","import {Observable} from 'rxjs'\nimport {createHookFromObservableFactory, PartialExcept} from '../../../util'\nimport {useGrantsStore} from '../datastores'\nimport {DocumentValuePermission, GrantsStore, PermissionCheckResult} from './types'\n\n/** @internal */\nexport interface DocumentValuePermissionsOptions {\n  grantsStore: GrantsStore\n  document: Record<string, unknown>\n  permission: DocumentValuePermission\n}\n\n/**\n * The observable version of `useDocumentValuePermissions`\n *\n * @see useDocumentValuePermissions\n *\n * @internal\n */\nexport function getDocumentValuePermissions({\n  grantsStore,\n  document,\n  permission,\n}: DocumentValuePermissionsOptions): Observable<PermissionCheckResult> {\n  const {checkDocumentPermission} = grantsStore\n\n  return checkDocumentPermission(permission, document)\n}\n\n/**\n * Gets permissions based on the value of the document passed into the hook\n * (stateless).\n *\n * Note: this is a lower-level API (compared to `useDocumentPairPermissions`)\n * that is _not_ draft-model aware.\n *\n * As a consequence, the operations it accepts are also low-level. (e.g.\n * `'publish'` permissions can't be determined with this API). This is because\n * it's not possible to tell if a user can do high-level document pair\n * operations on document using only one document value.\n *\n * For example, in order to determine if a user can publish, the current value\n * of the published document needs to be pulled and checked against the user's\n * grants. If there are no matching grants, then it fails the pre-condition and\n * no operation is allowed regardless of the given document.\n *\n * @see useDocumentPairPermissions\n *\n * @internal\n */\nexport const useDocumentValuePermissionsFromHookFactory = createHookFromObservableFactory(\n  getDocumentValuePermissions\n)\n\n/** @internal */\nexport function useDocumentValuePermissions({\n  document,\n  permission,\n  ...rest\n}: PartialExcept<DocumentValuePermissionsOptions, 'permission' | 'document'>): ReturnType<\n  typeof useDocumentValuePermissionsFromHookFactory\n> {\n  const grantsStore = useGrantsStore()\n\n  return useDocumentValuePermissionsFromHookFactory({\n    grantsStore: rest.grantsStore || grantsStore,\n    document,\n    permission,\n  })\n}\n","import {InitialValueResolverContext, Schema} from '@sanity/types'\nimport {combineLatest, from, Observable, of} from 'rxjs'\nimport {map, switchMap} from 'rxjs/operators'\nimport {useSchema, useTemplates} from '../../../hooks'\nimport {InitialValueTemplateItem, resolveInitialValue, Template} from '../../../templates'\nimport {\n  type PartialExcept,\n  createHookFromObservableFactory,\n  getDraftId,\n  getPublishedId,\n} from '../../../util'\nimport {useGrantsStore} from '../datastores'\nimport {useInitialValueResolverContext} from '../document'\nimport {getDocumentValuePermissions} from './documentValuePermissions'\nimport {GrantsStore, PermissionCheckResult} from './types'\n\n/** @internal */\nexport interface TemplatePermissionsResult<TInitialValue = Record<string, unknown>>\n  extends PermissionCheckResult,\n    InitialValueTemplateItem {\n  granted: boolean\n  reason: string\n  resolvedInitialValue: TInitialValue\n  subtitle?: string\n  template: Template\n}\n\ntype Serializable<T> = {serialize(): T}\n\nfunction serialize<T>(item: T | Serializable<T>): T {\n  if (item && 'serialize' in item) return serialize(item.serialize())\n  return item as T\n}\n\n/** @internal */\nexport interface TemplatePermissionsOptions {\n  grantsStore: GrantsStore\n  schema: Schema\n  templates: Template[]\n  templateItems: InitialValueTemplateItem[]\n  context: InitialValueResolverContext\n}\n\n/**\n * The observable version of `useTemplatePermissions`\n *\n * @internal\n */\nexport function getTemplatePermissions({\n  grantsStore,\n  templateItems,\n  templates,\n  schema,\n  context,\n}: TemplatePermissionsOptions): Observable<\n  Array<TemplatePermissionsResult<Record<string, unknown>>>\n> {\n  if (!templateItems?.length) return of([])\n\n  return combineLatest(\n    templateItems\n      .map(serialize)\n      .map(async (item) => {\n        const template = templates.find((t) => t.id === item.templateId)\n\n        if (!template) {\n          throw new Error(`template not found: \"${item.templateId}\"`)\n        }\n\n        const resolvedInitialValue = await resolveInitialValue(\n          schema,\n          template,\n          item.parameters,\n          context\n        )\n\n        return {template, item, resolvedInitialValue}\n      })\n      .map((promise) =>\n        from(promise).pipe(\n          switchMap(({item, resolvedInitialValue, template}) => {\n            const schemaType = schema.get(template.schemaType)\n\n            if (!schemaType) {\n              throw new Error(`schema type not found: \"${template.schemaType}\"`)\n            }\n\n            const liveEdit = schemaType?.liveEdit\n            const {initialDocumentId = 'dummy-id'} = item\n\n            return getDocumentValuePermissions({\n              grantsStore,\n              permission: 'create',\n              document: {\n                _id: liveEdit ? getPublishedId(initialDocumentId) : getDraftId(initialDocumentId),\n                ...resolvedInitialValue,\n              },\n            }).pipe(\n              map(({granted, reason}) => {\n                const title = item.title || template.title\n                const result: TemplatePermissionsResult = {\n                  ...item,\n                  granted,\n                  reason,\n                  resolvedInitialValue,\n                  template,\n                  title,\n                  subtitle: schemaType.title === title ? undefined : schemaType.title,\n                  description: item.description || template.description,\n                  icon: item.icon || template.icon,\n                }\n\n                return result\n              })\n            )\n          })\n        )\n      )\n  )\n}\n\n/**\n * Takes in an array of initial template values and returns an object of\n * `TemplatePermissionsResult` keyed by the IDs of the initial template values\n * given.\n *\n * The `TemplatePermissionsResult` is an object that contains a `granted`\n * boolean per key and can be used to determine if a user has the ability to\n * create documents using the given initial value template items.\n *\n * For each initial template value item, the corresponding template is found and\n * resolved against the parameters in each the initial template value item. The\n * resolved value is then run through the document-value permissions. If there\n * are any matching grants for the resolved initial template value, the\n * `TemplatePermissionsResult` will include `granted: true`.\n *\n * @internal\n */\nexport const useTemplatePermissionsFromHookFactory =\n  createHookFromObservableFactory(getTemplatePermissions)\n\n/** @internal */\nexport function useTemplatePermissions({\n  templateItems,\n  ...rest\n}: PartialExcept<TemplatePermissionsOptions, 'templateItems'>): ReturnType<\n  typeof useTemplatePermissionsFromHookFactory\n> {\n  const schema = useSchema()\n  const templates = useTemplates()\n  const grantsStore = useGrantsStore()\n  const initialValueContext = useInitialValueResolverContext()\n\n  return useTemplatePermissionsFromHookFactory({\n    templateItems,\n    grantsStore: rest.grantsStore || grantsStore,\n    schema: rest.schema || schema,\n    templates: rest.templates || templates,\n    context: initialValueContext,\n  })\n}\n","import {concat, of, fromEvent} from 'rxjs'\nimport {distinctUntilChanged, map} from 'rxjs/operators'\n\nconst DEBUG_PREFIX = '_debug_'\n\nconst hashchange$ = typeof window === 'undefined' ? of({}) : fromEvent(window, 'hashchange')\n\nexport const debugParams$ = concat(of(0), hashchange$).pipe(\n  map(() => (typeof document === 'undefined' ? '#' : document.location.hash)),\n  distinctUntilChanged(),\n  map((hash) =>\n    hash\n      .substring(1)\n      .split(';')\n      .filter((p) => p.toLowerCase().startsWith(DEBUG_PREFIX))\n      .map((param) => param.substring(DEBUG_PREFIX.length))\n  )\n)\n\nexport const debugRolesParam$ = debugParams$.pipe(\n  map((args) => args.find((arg) => arg.startsWith('roles='))),\n  map(\n    (arg) =>\n      arg\n        ?.split('roles=')[1]\n        .split(',')\n        .map((r) => r.trim()) || []\n  )\n)\n","// NOTE: these example grants are used in other test files.\n// if you change this file, check to see if other files need to be updated too\nimport {Grant} from '../types'\n\nexport const administrator: Grant[] = [\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read', 'create', 'history', 'update'],\n  },\n]\n\nexport const editor: Grant[] = [\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read', 'create', 'history', 'update'],\n  },\n]\n\nexport const developer: Grant[] = [\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read', 'create', 'history', 'update'],\n  },\n]\n\nexport const contributor: Grant[] = [\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read'],\n  },\n  {\n    filter: '_id in path(\"drafts.**\")',\n    permissions: ['create', 'history', 'update'],\n  },\n]\n\nexport const viewer: Grant[] = [\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read', 'history'],\n  },\n]\n\nexport const requiresApproval: Grant[] = [\n  {\n    filter: '!locked',\n    permissions: ['read', 'create', 'update'],\n  },\n]\n\nexport const restricted: Grant[] = [\n  {\n    filter:\n      '_id in path(\"drafts.**\") && _type in [\"stringsTest\", \"book\", \"author\", \"referenceTest\"]',\n    permissions: ['read', 'create', 'history', 'update'],\n  },\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read'],\n  },\n]\n","import {map} from 'rxjs/operators'\nimport {debugRolesParam$} from '../../debugParams'\nimport {Grant} from '../types'\nimport * as grants from './exampleGrants'\nimport {ExampleRoleName} from './exampleRoles'\n\nconst DEBUG_ROLE_GRANTS_MAP: Record<ExampleRoleName, Grant[]> = {\n  // basic\n  administrator: grants.administrator,\n  editor: grants.editor,\n  developer: grants.developer,\n  contributor: grants.contributor,\n  viewer: grants.viewer,\n\n  // custom\n  restricted: grants.restricted,\n  requiresApproval: grants.requiresApproval,\n\n  // legacy\n  read: grants.viewer,\n  write: grants.editor,\n}\n\n// todo: merge other resource keys(?)\nexport const debugGrants$ = debugRolesParam$.pipe(\n  map((roles) => {\n    if (!roles.length) return null\n\n    return roles\n      .filter((value) => Boolean(value) && value in DEBUG_ROLE_GRANTS_MAP)\n      .flatMap((roleName: ExampleRoleName) => DEBUG_ROLE_GRANTS_MAP[roleName] || [])\n  })\n)\n","import {SanityClient} from '@sanity/client'\nimport {CurrentUser, SanityDocument} from '@sanity/types'\nimport {evaluate, parse} from 'groq-js'\nimport {defer, of} from 'rxjs'\nimport {distinctUntilChanged, publishReplay, switchMap} from 'rxjs/operators'\nimport {refCountDelay} from 'rxjs-etc/operators'\nimport shallowEquals from 'shallow-equals'\nimport {debugGrants$} from './debug'\nimport {\n  GrantsStore,\n  DocumentValuePermission,\n  Grant,\n  PermissionCheckResult,\n  EvaluationParams,\n} from './types'\n\nasync function getDatasetGrants(\n  client: SanityClient,\n  projectId: string,\n  dataset: string\n): Promise<Grant[]> {\n  // `acl` stands for access control list and returns a list of grants\n  const grants: Grant[] = await client.request({\n    uri: `/projects/${projectId}/datasets/${dataset}/acl`,\n    tag: 'acl.get',\n    withCredentials: true,\n  })\n\n  return grants\n}\n\nfunction getParams(currentUser: CurrentUser | null): EvaluationParams {\n  const params: EvaluationParams = {}\n\n  if (currentUser !== null) {\n    params.identity = currentUser.id\n  }\n\n  return params\n}\n\nconst PARSED_FILTERS_MEMO = new Map()\nasync function matchesFilter(\n  currentUser: CurrentUser | null,\n  filter: string,\n  document: SanityDocument\n) {\n  if (!PARSED_FILTERS_MEMO.has(filter)) {\n    // note: it might be tempting to also memoize the result of the evaluation here,\n    // Currently these filters are typically evaluated whenever a document change, which means they will be evaluated\n    // quite frequently with different versions of the document. There might be some gains in finding out which subset of document\n    // properties to use as key (e.g. by looking at the parsed filter and see what properties the filter cares about)\n    // But as always, it's worth considering if the complexity/memory usage is worth the potential perf gain…\n    PARSED_FILTERS_MEMO.set(filter, parse(`*[${filter}]`))\n  }\n  const parsed = PARSED_FILTERS_MEMO.get(filter)\n\n  const params = getParams(currentUser)\n  const data = await (await evaluate(parsed, {dataset: [document], params})).get()\n  return data?.length === 1\n}\n\n/** @internal */\nexport interface GrantsStoreOptions {\n  client: SanityClient\n  currentUser: CurrentUser | null\n}\n\n/** @internal */\nexport function createGrantsStore({client, currentUser}: GrantsStoreOptions): GrantsStore {\n  const versionedClient = client.withConfig({apiVersion: '2021-06-07'})\n\n  const datasetGrants$ = defer(() => of(versionedClient.config())).pipe(\n    switchMap(({projectId, dataset}) => {\n      if (!projectId || !dataset) {\n        throw new Error('Missing projectId or dataset')\n      }\n      return getDatasetGrants(versionedClient, projectId, dataset)\n    })\n  )\n\n  const currentUserDatasetGrants = debugGrants$.pipe(\n    switchMap((debugGrants) => (debugGrants ? of(debugGrants) : datasetGrants$)),\n    publishReplay(1),\n    refCountDelay(1000)\n  )\n\n  return {\n    checkDocumentPermission(permission: DocumentValuePermission, document: SanityDocument) {\n      return currentUserDatasetGrants.pipe(\n        switchMap((grants) => grantsPermissionOn(currentUser, grants, permission, document)),\n        distinctUntilChanged(shallowEquals)\n      )\n    },\n  }\n}\n\n/**\n * takes a grants object, a permission and a document\n * checks whether the the permission is granted for the given document\n */\nasync function grantsPermissionOn(\n  currentUser: CurrentUser | null,\n  grants: Grant[],\n  permission: DocumentValuePermission,\n  document: SanityDocument | null\n): Promise<PermissionCheckResult> {\n  if (!document) {\n    // we say it's granted if null due to initial states\n    return {granted: true, reason: 'Null document, nothing to check'}\n  }\n\n  if (!grants.length) {\n    return {granted: false, reason: 'No document grants'}\n  }\n\n  const matchingGrants: Grant[] = []\n\n  for (const grant of grants) {\n    if (await matchesFilter(currentUser, grant.filter, document)) {\n      matchingGrants.push(grant)\n    }\n  }\n\n  const foundMatch = matchingGrants.some((grant) => grant.permissions.some((p) => p === permission))\n\n  return {\n    granted: foundMatch,\n    reason: foundMatch ? `Matching grant` : `No matching grants found`,\n  }\n}\n","import type {TransactionLogEventWithEffects} from '@sanity/types'\n\ntype StreamResult = TransactionLogEventWithEffects | {error: {description?: string; type: string}}\n\nexport async function getJsonStream(\n  url: string,\n  token: string | undefined\n): Promise<ReadableStream<StreamResult>> {\n  const options: RequestInit = token\n    ? {headers: {Authorization: `Bearer ${token}`}}\n    : {credentials: 'include'}\n  const response = await fetch(url, options)\n  return getStream(response)\n}\n\nfunction getStream(response: Response): ReadableStream<StreamResult> {\n  const body = response.body\n  if (!body) {\n    throw new Error('Failed to read body from response')\n  }\n\n  let reader: ReadableStreamDefaultReader<Uint8Array>\n  let cancelled = false\n\n  return new ReadableStream<TransactionLogEventWithEffects>({\n    start(controller): void | PromiseLike<void> {\n      reader = body.getReader()\n      const decoder = new TextDecoder()\n      let buffer = ''\n\n      reader\n        .read()\n        .then(function processResult(result): void | Promise<void> {\n          if (result.done) {\n            if (cancelled) {\n              return\n            }\n\n            buffer = buffer.trim()\n            if (buffer.length === 0) {\n              controller.close()\n              return\n            }\n\n            controller.enqueue(JSON.parse(buffer))\n            controller.close()\n            return\n          }\n\n          buffer += decoder.decode(result.value, {stream: true})\n          const lines = buffer.split('\\n')\n\n          for (let i = 0; i < lines.length - 1; ++i) {\n            const line = lines[i].trim()\n            if (line.length === 0) {\n              continue\n            }\n\n            try {\n              controller.enqueue(JSON.parse(line))\n            } catch (err) {\n              controller.error(err)\n              cancelled = true\n              reader.cancel()\n              return\n            }\n          }\n\n          buffer = lines[lines.length - 1]\n\n          // eslint-disable-next-line consistent-return\n          return reader\n            .read()\n            .then(processResult)\n            .catch((err) => controller.error(err))\n        })\n        .catch((err) => controller.error(err))\n    },\n\n    cancel(): void {\n      cancelled = true\n      reader.cancel()\n    },\n  })\n}\n","import type {SanityDocument, TransactionLogEventWithEffects} from '@sanity/types'\nimport {applyPatch} from 'mendoza'\nimport {RemoteSnapshotVersionEvent} from '../../document/document-pair/checkoutPair'\nimport {Timeline} from './Timeline'\nimport type {DocumentRemoteMutationVersionEvent, CombinedDocument} from './types'\n\ntype VersionState = {\n  id: string\n  hasAttrs: boolean\n  attrs: Record<string, unknown> | null\n  rev: string | null\n  events: Array<DocumentRemoteMutationVersionEvent>\n  aligned: boolean\n}\n\nfunction emptyVersionState(id: string): VersionState {\n  return {\n    id,\n    hasAttrs: false,\n    attrs: null,\n    rev: null,\n    events: [],\n    aligned: false,\n  }\n}\n\nfunction align(history: TransactionLogEventWithEffects, state: VersionState): number {\n  const idx = state.events.findIndex((evt) => history.id === evt.transactionId)\n  if (idx >= 0) {\n    // Return the next event as we don't want this to be included.\n    return idx + 1\n  }\n\n  if (state.rev) {\n    return state.rev === history.id ? 0 : -1\n  }\n\n  // At this point the document doesn't exist and we were not able to match\n  // it up with a received mutation. This is a bit unfortunate as we don't\n  // have a _reliably_ way of aligning it. For now we just always assume\n  // that it's consistent.\n\n  return 0\n}\n\nfunction startFromSnapshot(state: VersionState, doc: SanityDocument) {\n  state.hasAttrs = true\n\n  if (doc) {\n    state.attrs = {...doc}\n    if (typeof state.attrs._rev != 'string') throw new Error('snapshot has no _rev')\n    state.rev = state.attrs._rev\n    delete state.attrs._rev\n  } else {\n    state.attrs = null\n    state.rev = null\n  }\n\n  state.events = []\n}\n\n/**\n * The timeline consists of data from (1) the history, (2) live draft mutations, and\n * (3) live published mutations. It's critical for us that the chain of transactions\n * is complete and without holes. The following class can be used as a layer in front\n * of Timeline to ensure this:\n *\n * - Invoke `appendRemoteSnapshotEvent` when there's an incoming remote mutation.\n *   These mutations are buffered internally and _not_ passed to the timeline quite yet.\n *\n * - Once we've received snapshots for both draft and published, then `acceptsHistory`\n *   becomes true and the caller can fetch a chunk of the translog. The flag\n *   `earliestTransactionId` can be used to figure out where to fetch transactions from.\n *\n * - The caller invokes `prependHistoryEvent` for each of the events. These history events\n *   are always pushed to the timeline and it will become available immediately.\n *\n * - Internally this class will then try to align the history event to the received\n *   mutations and then dispatch to the timeline.\n *\n * - The aligner also maintains the latest version for both the draft and the published version.\n *\n *\n */\nexport class Aligner {\n  timeline: Timeline\n  earliestTransactionId: string | null = null\n\n  constructor(timeline: Timeline) {\n    this.timeline = timeline\n    this._states = {\n      draft: emptyVersionState(timeline.draftId),\n      published: emptyVersionState(timeline.publishedId),\n    }\n  }\n\n  private _states: {\n    draft: VersionState\n    published: VersionState\n  }\n\n  appendRemoteSnapshotEvent(evt: RemoteSnapshotVersionEvent): void {\n    const state = this._states[evt.version]\n\n    if (evt.type === 'snapshot') {\n      this._maybeInvalidateHistory()\n\n      startFromSnapshot(state, evt.document)\n      return\n    }\n\n    if (evt.type === 'remoteMutation') {\n      if (state.aligned) {\n        this._apply(state, evt)\n        this.timeline.addRemoteMutation(evt)\n      } else if (state.hasAttrs) {\n        state.events.push(evt)\n      } else {\n        startFromSnapshot(state, evt.head)\n      }\n    }\n  }\n\n  prependHistoryEvent(evt: TransactionLogEventWithEffects): void {\n    if (!this.acceptsHistory) throw new Error('cannot prepend history at this point')\n\n    for (const state of Object.values(this._states)) {\n      if (!state.aligned) {\n        const idx = align(evt, state)\n\n        if (idx >= 0) {\n          this._alignAtIndex(state, idx)\n        }\n      }\n    }\n\n    this.timeline.addTranslogEntry(evt)\n    this.earliestTransactionId = evt.id\n  }\n\n  didReachEarliestEntry(): void {\n    for (const state of Object.values(this._states)) {\n      if (!state.aligned) {\n        if (state.attrs !== null) throw new Error('unable to find translog entry to align to')\n        this._alignAtIndex(state, 0)\n      }\n    }\n    this.timeline.didReachEarliestEntry()\n  }\n\n  get isAligned(): boolean {\n    return Object.values(this._states).every((state) => state.aligned)\n  }\n\n  get acceptsHistory(): boolean {\n    return this._isComplete\n  }\n\n  get currentDocument(): CombinedDocument {\n    return {draft: this._states.draft.attrs, published: this._states.published.attrs}\n  }\n\n  private _alignAtIndex(state: VersionState, idx: number) {\n    // These we must only apply locally since they are present in the fetched translog.\n    for (const mutEvt of state.events.slice(0, idx)) {\n      this._apply(state, mutEvt)\n    }\n\n    // ... while these must also be pushed to the timeline:\n    for (const mutEvt of state.events.slice(idx)) {\n      this._apply(state, mutEvt)\n      this.timeline.addRemoteMutation(mutEvt)\n    }\n\n    state.events = []\n    state.aligned = true\n  }\n\n  private get _isComplete(): boolean {\n    return Object.values(this._states).every((state) => state.hasAttrs)\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  private _apply(state: VersionState, evt: DocumentRemoteMutationVersionEvent) {\n    state.attrs = applyPatch(state.attrs, evt.effects.apply as any)\n    state.rev = evt.transactionId\n  }\n\n  private _maybeInvalidateHistory() {\n    if (this._isComplete) {\n      for (const state of Object.values(this._states)) {\n        state.aligned = false\n      }\n      this.earliestTransactionId = null\n      this.timeline.reset()\n    }\n  }\n}\n","import {Diff} from '@sanity/diff'\nimport {Annotation, Chunk} from '../../../../field'\nimport {Timeline} from './Timeline'\nimport {CombinedDocument} from './types'\n\n/**\n * A reconstruction represents a single reconstruction of a\n */\nexport class Reconstruction {\n  timeline: Timeline\n  start: Chunk | null\n  end: Chunk\n  doc: CombinedDocument\n\n  constructor(timeline: Timeline, doc: CombinedDocument, start: Chunk | null, end: Chunk) {\n    this.timeline = timeline\n    this.start = start\n    this.end = end\n    this.doc = doc\n  }\n\n  same(start: Chunk | null, end: Chunk): boolean {\n    return this.start === start && this.end === end\n  }\n\n  private _startDocument?: CombinedDocument\n  private _endDocument?: CombinedDocument\n  private _diff?: Diff<Annotation>\n\n  /** Returns the attributes as seen at the end of the range. */\n  endAttributes(): Record<string, unknown> | null {\n    return getAttrs(this.endDocument())\n  }\n\n  endDocument(): CombinedDocument {\n    if (!this._endDocument) {\n      this._endDocument = this.timeline.replayBackwardsUntil(this.end.end, this.doc)\n    }\n\n    return this._endDocument\n  }\n\n  /** Returns the attributes as seen at the end of the range. */\n  startAttributes(): Record<string, unknown> | null {\n    return getAttrs(this.startDocument())\n  }\n\n  startDocument(): CombinedDocument {\n    if (!this.start) throw new Error('start required')\n\n    if (!this._startDocument) {\n      this._startDocument = this.timeline.replayBackwardsBetween(\n        this.start.end,\n        this.end.end - 1,\n        this.endDocument()\n      )\n    }\n\n    return this._startDocument\n  }\n\n  diff(): Diff<Annotation> {\n    if (!this._diff) {\n      if (!this.start) throw new Error('start required')\n\n      this._diff = this.timeline.calculateDiff(\n        this.startDocument(),\n        this.endDocument(),\n        this.start.index + 1,\n        this.end.index\n      )\n    }\n\n    return this._diff\n  }\n}\n\nfunction getAttrs(doc: CombinedDocument) {\n  return doc.draft || doc.published\n}\n","import type {SanityClient} from '@sanity/client'\nimport {Diff, ObjectDiff} from '@sanity/diff'\nimport {Observable} from 'rxjs'\nimport {Annotation, Chunk} from '../../../../field'\nimport {RemoteSnapshotVersionEvent} from '../../document/document-pair/checkoutPair'\nimport {remoteSnapshots} from '../../document/document-pair/remoteSnapshots'\nimport {Timeline, ParsedTimeRef} from './Timeline'\nimport {getJsonStream} from './getJsonStream'\nimport {Aligner} from './Aligner'\nimport {Reconstruction} from './Reconstruction'\n\nconst TRANSLOG_ENTRY_LIMIT = 50\n\n/** @beta */\nexport type TimelineControllerOptions = {\n  timeline: Timeline\n  client: SanityClient\n  documentId: string\n  documentType: string\n  handler: (err: Error | null, controller: TimelineController) => void\n}\n\n/**\n * The controller is responsible for fetching information\n * about a document and maintaining a Timeline.\n *\n * @beta\n */\nexport class TimelineController {\n  timeline: Timeline\n  client: SanityClient\n  handler: TimelineControllerOptions['handler']\n\n  version = 0\n\n  /**\n   * The selection state represents the  different states of the current selection:\n   * - inactive: No selection is active.\n   * - rev: A selection is active for a single revision.\n   * - range: A selection is active for a range and we have all the data needed to render it.\n   * - loading: A selection is active, but we don't have the entries yet.\n   * - invalid: The selection picked is invalid.\n   */\n  selectionState: 'inactive' | 'rev' | 'range' | 'loading' | 'invalid' = 'inactive'\n\n  constructor(options: TimelineControllerOptions) {\n    this.timeline = options.timeline\n    this.client = options.client\n    this.handler = options.handler\n    this._aligner = new Aligner(this.timeline)\n\n    this.markChange()\n  }\n\n  private _aligner: Aligner\n\n  private _fetchMore = false\n  private _fetchAtLeast = 0\n  private _isRunning = false\n  private _didErr = false\n\n  private _since: string | null = null\n  private _sinceTime: ParsedTimeRef | null = null\n  private _rev: string | null = null\n  private _revTime: ParsedTimeRef | null = null\n\n  private _reconstruction?: Reconstruction\n\n  clearRange(): void {\n    this.setRange(null, null)\n  }\n\n  setRange(since: string | null, rev: string | null): void {\n    if (rev !== this._rev) this.setRevTime(rev)\n    if (since !== this._since) this.setSinceTime(since)\n\n    let _fetchAtLeast = 10\n\n    if (this._sinceTime === 'loading' || this._revTime === 'loading' || !this._aligner.isAligned) {\n      this.selectionState = 'loading'\n    } else if (this._sinceTime === 'invalid' || this._revTime === 'invalid') {\n      this.selectionState = 'invalid'\n    } else if (this._sinceTime) {\n      this.selectionState = 'range'\n\n      const targetRev = this._revTime || this.timeline.lastChunk()\n\n      if (this._sinceTime.index > targetRev.index) {\n        this._revTime = 'invalid'\n        this.selectionState = 'invalid'\n      } else {\n        this.setReconstruction(this._sinceTime, targetRev)\n      }\n    } else if (this._revTime) {\n      this.selectionState = 'rev'\n      this.setReconstruction(null, this._revTime)\n    } else {\n      this.selectionState = 'inactive'\n      _fetchAtLeast = 0\n    }\n\n    this._fetchAtLeast = _fetchAtLeast\n\n    this.start()\n  }\n\n  setLoadMore(flag: boolean): void {\n    this._fetchMore = flag\n    this.start()\n  }\n\n  get sinceTime(): Chunk | null {\n    return this._sinceTime && typeof this._sinceTime === 'object' ? this._sinceTime : null\n  }\n\n  get revTime(): Chunk | null {\n    return this._revTime && typeof this._revTime === 'object' ? this._revTime : null\n  }\n\n  get realRevChunk(): Chunk {\n    return this.revTime || this.timeline.lastChunk()\n  }\n\n  /** Returns true when there's an older revision we want to render. */\n  onOlderRevision(): boolean {\n    return Boolean(this._rev) && (this.selectionState === 'range' || this.selectionState === 'rev')\n  }\n\n  /** Returns true when the changes panel should be active. */\n  changesPanelActive(): boolean {\n    return Boolean(this._since) && this.selectionState === 'range'\n  }\n\n  findRangeForNewRev(rev: Chunk): [string | null, string | null] {\n    const revTimeId = this.timeline.isLatestChunk(rev) ? null : this.timeline.createTimeId(rev)\n\n    if (!this._since) {\n      return [null, revTimeId]\n    }\n\n    const sinceChunk = this.sinceTime\n    if (sinceChunk && sinceChunk.index < rev.index) {\n      return [this._since, revTimeId]\n    }\n\n    return ['@lastPublished', revTimeId]\n  }\n\n  findRangeForNewSince(since: Chunk): [string, string | null] {\n    const revChunk = this.revTime\n\n    // If the the `since` timestamp is earlier than the `rev`, then we can\n    // accept it. Otherwise we'll move the current revision to the current draft.\n\n    if (revChunk && since.index < revChunk.index) {\n      return [this.timeline.createTimeId(since), this._rev]\n    }\n\n    return [this.timeline.createTimeId(since), null]\n  }\n\n  setRevTime(rev: string | null): void {\n    this._rev = rev\n    this._revTime = rev ? this.timeline.parseTimeId(rev) : null\n\n    if (this._since === '@lastPublished') {\n      // Make sure we invalidate it since this depends on the _rev.\n      this._since = null\n      this._sinceTime = null\n    }\n  }\n\n  setSinceTime(since: string | null): void {\n    if (since === '@lastPublished') {\n      if (typeof this._revTime === 'string') {\n        this._sinceTime = this._revTime\n      } else {\n        this._sinceTime = this.timeline.findLastPublishedBefore(this._revTime)\n      }\n    } else {\n      this._sinceTime = since ? this.timeline.parseTimeId(since) : null\n    }\n\n    this._since = since\n  }\n\n  sinceAttributes(): Record<string, unknown> | null {\n    return this._sinceTime && this._reconstruction ? this._reconstruction.startAttributes() : null\n  }\n\n  displayed(): Record<string, unknown> | null {\n    return this._revTime && this._reconstruction ? this._reconstruction.endAttributes() : null\n  }\n\n  setReconstruction(since: Chunk | null, rev: Chunk): void {\n    if (this._reconstruction && this._reconstruction.same(since, rev)) return\n    this._reconstruction = new Reconstruction(\n      this.timeline,\n      this._aligner.currentDocument,\n      since,\n      rev\n    )\n  }\n\n  currentDiff(): Diff<Annotation> | null {\n    return this._reconstruction ? this._reconstruction.diff() : null\n  }\n\n  currentObjectDiff(): ObjectDiff<Annotation> | null {\n    const diff = this.currentDiff()\n    if (diff) {\n      if (diff.type === 'null') return null\n      if (diff.type !== 'object') throw new Error(`ObjectDiff expected, got ${diff.type}`)\n    }\n\n    return diff as ObjectDiff<Annotation>\n  }\n\n  handleRemoteMutation(ev: RemoteSnapshotVersionEvent): void {\n    this._aligner.appendRemoteSnapshotEvent(ev)\n    this.markChange()\n\n    // Make sure we fetch history as soon as possible.\n    if (this._aligner.acceptsHistory) this.start()\n  }\n\n  start(): void {\n    if (this._didErr) return\n\n    if (!this._isRunning) {\n      this._isRunning = true\n\n      this.tick().then(() => {\n        this._isRunning = false\n      })\n    }\n  }\n\n  private async tick() {\n    const shouldFetchMore =\n      this._aligner.acceptsHistory &&\n      !this.timeline.reachedEarliestEntry &&\n      (this.selectionState === 'loading' ||\n        this._fetchMore ||\n        this.timeline.chunkCount <= this._fetchAtLeast)\n\n    if (!shouldFetchMore) {\n      return\n    }\n\n    try {\n      await this.fetchMoreTransactions()\n    } catch (err) {\n      this._didErr = true\n      this.handler(err, this)\n      return\n    }\n\n    await this.tick()\n  }\n\n  private async fetchMoreTransactions() {\n    const publishedId = this.timeline.publishedId\n    const draftId = this.timeline.draftId\n    const clientConfig = this.client.config()\n    const limit = TRANSLOG_ENTRY_LIMIT\n\n    let queryParams = `tag=sanity.studio.desk.history&effectFormat=mendoza&excludeContent=true&excludeMutations=true&includeIdentifiedDocumentsOnly=true&reverse=true&limit=${limit}`\n    let tid = this._aligner.earliestTransactionId\n    if (tid) {\n      queryParams += `&toTransaction=${tid}`\n    }\n\n    const transactionsUrl = this.client.getUrl(\n      `/data/history/${clientConfig.dataset}/transactions/${publishedId},${draftId}?${queryParams}`\n    )\n    const stream = await getJsonStream(transactionsUrl, clientConfig.token)\n    const reader = stream.getReader()\n    let count = 0\n\n    for (;;) {\n      // eslint-disable-next-line no-await-in-loop\n      const result = await reader.read()\n      if (result.done) break\n\n      if ('error' in result.value) {\n        throw new Error(result.value.error.description || result.value.error.type)\n      }\n\n      count++\n\n      if (result.value.id === tid) {\n        // toTransaction is inclusive so we must ignore it when we fetch the next page\n        continue\n      }\n\n      // For some reason, the aligner is now interested in a different set of entries.\n      // This can happen if a new snapshot comes in as we're streaming the translog.\n      // In this case it's safe to abort, and the run-loop will re-schedule it correctly.\n      if (this._aligner.earliestTransactionId !== tid || !this._aligner.acceptsHistory) {\n        return\n      }\n\n      this._aligner.prependHistoryEvent(result.value)\n      tid = this._aligner.earliestTransactionId\n    }\n\n    // Same consistency checking here:\n    if (this._aligner.earliestTransactionId !== tid || !this._aligner.acceptsHistory) {\n      return\n    }\n\n    if (count < limit) {\n      this._aligner.didReachEarliestEntry()\n    }\n\n    this.markChange()\n  }\n\n  private markChange() {\n    this.timeline.updateChunks()\n\n    this.setRevTime(this._rev)\n    this.setSinceTime(this._rev)\n\n    this.version++\n    this.handler(null, this)\n  }\n}\n\n/** @internal */\nexport function createObservableController(\n  options: Omit<TimelineControllerOptions, 'handler'>\n): Observable<{historyController: TimelineController}> {\n  return new Observable((observer) => {\n    const controller = new TimelineController({\n      ...options,\n      handler: (err, innerController) => {\n        if (err) {\n          observer.error(err)\n        } else {\n          observer.next({historyController: innerController})\n        }\n      },\n    })\n\n    return remoteSnapshots(\n      options.client,\n      {\n        publishedId: options.documentId,\n        draftId: `drafts.${options.documentId}`,\n      },\n      options.documentType\n    ).subscribe((ev) => {\n      controller.handleRemoteMutation(ev)\n    })\n  })\n}\n","import {Annotation} from '../../../../field'\nimport {CombinedDocument} from './types'\n\nexport function isSameAnnotation(a: Annotation, b: Annotation): boolean {\n  if (a && b) {\n    return a.author === b.author && a.chunk === b.chunk\n  }\n\n  if (!a && !b) {\n    return true\n  }\n\n  return false\n}\n\nexport function getAttrs(doc: CombinedDocument): Record<string, unknown> | null {\n  return doc.draft || doc.published\n}\n","import {incremental} from 'mendoza'\nimport {Input, ArrayInput, ObjectInput, StringInput, wrap, Diff, diffInput} from '@sanity/diff'\nimport {Annotation, Chunk} from '../../../../field'\nimport {Timeline} from './Timeline'\nimport {isSameAnnotation} from './utils'\n\nexport type Meta = {chunk: Chunk; transactionIndex: number} | null\n\nexport type AnnotationExtractor = {\n  fromValue(value: incremental.Value<Meta>): Annotation\n  fromMeta(meta: Meta): Annotation\n}\n\nclass ArrayContentWrapper implements ArrayInput<Annotation> {\n  type = 'array' as const\n  value: unknown[]\n  length: number\n  annotation: Annotation\n  extractor: AnnotationExtractor\n\n  private content: incremental.ArrayContent<Meta>\n  private elements: Input<Annotation>[] = []\n\n  constructor(\n    content: incremental.ArrayContent<Meta>,\n    value: unknown[],\n    annotation: Annotation,\n    extractor: AnnotationExtractor\n  ) {\n    this.content = content\n    this.value = value\n    this.annotation = annotation\n    this.extractor = extractor\n    this.length = content.elements.length\n  }\n\n  at(idx: number) {\n    if (idx >= this.length) throw new Error('out of bounds')\n    const input = this.elements[idx]\n    if (input) {\n      return input\n    }\n    return (this.elements[idx] = wrapValue(\n      this.content.elements[idx],\n      this.value[idx],\n      this.extractor\n    ))\n  }\n\n  annotationAt(idx: number): Annotation {\n    const meta = this.content.metas[idx]\n    return this.extractor.fromMeta(meta)\n  }\n}\n\nclass ObjectContentWrapper implements ObjectInput<Annotation> {\n  type = 'object' as const\n  value: Record<string, unknown>\n  keys: string[]\n  annotation: Annotation\n  extractor: AnnotationExtractor\n\n  private content: incremental.ObjectContent<Meta>\n  private fields: Record<string, Input<Annotation>> = {}\n\n  constructor(\n    content: incremental.ObjectContent<Meta>,\n    value: Record<string, unknown>,\n    annotation: Annotation,\n    extractor: AnnotationExtractor\n  ) {\n    this.content = content\n    this.value = value\n    this.annotation = annotation\n    this.extractor = extractor\n    this.keys = Object.keys(content.fields)\n  }\n\n  get(key: string) {\n    const input = this.fields[key]\n    if (input) {\n      return input\n    }\n    const value = this.content.fields[key]\n    if (!value) return undefined\n    return (this.fields[key] = wrapValue(value, this.value[key], this.extractor))\n  }\n}\n\nclass StringContentWrapper implements StringInput<Annotation> {\n  type = 'string' as const\n  value: string\n  annotation: Annotation\n  extractor: AnnotationExtractor\n\n  private content: incremental.StringContent<Meta>\n\n  constructor(\n    content: incremental.StringContent<Meta>,\n    value: string,\n    annotation: Annotation,\n    extractor: AnnotationExtractor\n  ) {\n    this.content = content\n    this.value = value\n    this.annotation = annotation\n    this.extractor = extractor\n  }\n\n  sliceAnnotation(start: number, end: number): {text: string; annotation: Annotation}[] {\n    const result: {text: string; annotation: Annotation}[] = []\n    let idx = 0\n\n    function push(text: string, annotation: Annotation) {\n      if (result.length > 0) {\n        const lst = result[result.length - 1]\n        if (isSameAnnotation(lst.annotation, annotation)) {\n          lst.text += text\n          return\n        }\n      }\n\n      result.push({text, annotation})\n    }\n\n    for (const part of this.content.parts) {\n      const length = part.value.length\n\n      const subStart = Math.max(0, start - idx)\n      if (subStart < length) {\n        // The start of the slice is inside this part somewhere.\n\n        // Figure out where the end is:\n        const subEnd = Math.min(length, end - idx)\n\n        // If the end of the slice is before this part, then we're guaranteed\n        // that there are no more parts.\n        if (subEnd <= 0) break\n\n        push(part.value.slice(subStart, subEnd), this.extractor.fromValue(part))\n      }\n\n      idx += length\n    }\n\n    return result\n  }\n}\n\nfunction wrapValue(\n  value: incremental.Value<Meta>,\n  raw: unknown,\n  extractor: AnnotationExtractor\n): Input<Annotation> {\n  const annotation = extractor.fromValue(value)\n\n  if (value.content) {\n    switch (value.content.type) {\n      case 'array':\n        return new ArrayContentWrapper(value.content, raw as unknown[], annotation, extractor)\n      case 'object':\n        return new ObjectContentWrapper(\n          value.content,\n          raw as Record<string, unknown>,\n          annotation,\n          extractor\n        )\n      case 'string':\n        return new StringContentWrapper(value.content, raw as string, annotation, extractor)\n      default:\n      // do nothing\n    }\n  }\n\n  return wrap(raw, annotation)\n}\n\nfunction extractAnnotationForFromInput(\n  timeline: Timeline,\n  firstChunk: Chunk | null,\n  meta: Meta\n): Annotation {\n  if (meta) {\n    // The next transaction is where it disappeared:\n    return annotationForTransactionIndex(timeline, meta.transactionIndex + 1, meta.chunk.index)\n  } else if (firstChunk) {\n    return annotationForTransactionIndex(timeline, firstChunk.start, firstChunk.index)\n  }\n\n  return null\n}\n\nfunction extractAnnotationForToInput(timeline: Timeline, meta: Meta): Annotation {\n  if (meta) {\n    return annotationForTransactionIndex(timeline, meta.transactionIndex, meta.chunk.index)\n  }\n\n  return null\n}\n\nfunction annotationForTransactionIndex(timeline: Timeline, idx: number, chunkIdx?: number) {\n  const tx = timeline.transactionByIndex(idx)\n  if (!tx) return null\n\n  const chunk = timeline.chunkByTransactionIndex(idx, chunkIdx)\n  if (!chunk) return null\n\n  return {\n    chunk,\n    timestamp: tx.timestamp,\n    author: tx.author,\n  }\n}\n\n// eslint-disable-next-line max-params\nexport function diffValue(\n  timeline: Timeline,\n  firstChunk: Chunk | null,\n  from: incremental.Value<Meta>,\n  fromRaw: unknown,\n  to: incremental.Value<Meta>,\n  toRaw: unknown\n): Diff<Annotation> {\n  const fromInput = wrapValue(from, fromRaw, {\n    fromValue(value) {\n      return extractAnnotationForFromInput(timeline, firstChunk, value.endMeta)\n    },\n    fromMeta(meta) {\n      return extractAnnotationForFromInput(timeline, firstChunk, meta)\n    },\n  })\n\n  const toInput = wrapValue(to, toRaw, {\n    fromValue(value) {\n      return extractAnnotationForToInput(timeline, value.startMeta)\n    },\n    fromMeta(meta) {\n      return extractAnnotationForToInput(timeline, meta)\n    },\n  })\n  return diffInput(fromInput, toInput)\n}\n","export type Merger<T> = (left: T, right: T) => T | [T, T]\n\n/**\n * The two ended array supports pushing both at the beginning and\n * at the end while preserving indicies.\n */\nexport class TwoEndedArray<T extends {index: number}> {\n  private _postive: T[] = []\n  private _negative: T[] = []\n\n  addToEnd(elem: T): void {\n    elem.index = this._postive.length\n    this._postive.push(elem)\n  }\n\n  addToBeginning(elem: T): void {\n    // Prefer to place things at the positive side if possible.\n    if (this.length == 0) {\n      this.addToEnd(elem)\n      return\n    }\n\n    elem.index = -(this._negative.length + 1)\n    this._negative.push(elem)\n  }\n\n  mergeAtEnd(value: T, merger: Merger<T>): void {\n    if (this.length === 0) {\n      this.addToEnd(value)\n      return\n    }\n\n    const idx = this.lastIdx\n    const result = merger(this.get(idx), value)\n    if (Array.isArray(result)) {\n      this.set(idx, result[0])\n      this.addToEnd(result[1])\n    } else {\n      this.set(idx, result)\n    }\n  }\n\n  mergeAtBeginning(value: T, merger: Merger<T>): void {\n    if (this.length === 0) {\n      this.addToEnd(value)\n      return\n    }\n\n    const idx = this.firstIdx\n    const result = merger(value, this.get(idx))\n    if (Array.isArray(result)) {\n      this.set(idx, result[1])\n      this.addToBeginning(result[0])\n    } else {\n      this.set(idx, result)\n    }\n  }\n\n  removeFromEnd(): void {\n    if (this._postive.length === 0) {\n      this._negative.shift()\n    } else {\n      this._postive.pop()\n    }\n  }\n\n  has(idx: number): boolean {\n    if (idx >= 0) {\n      return idx < this._postive.length\n    }\n\n    return -(idx + 1) < this._negative.length\n  }\n\n  get(idx: number): T {\n    if (idx >= 0) {\n      return this._postive[idx]\n    }\n\n    return this._negative[-(idx + 1)]\n  }\n\n  set(idx: number, value: T): void {\n    if (idx >= 0) {\n      value.index = idx\n      this._postive[idx] = value\n    } else {\n      value.index = idx\n      this._negative[-(idx + 1)] = value\n    }\n  }\n\n  get lastIdx(): number {\n    // Note: This also works correctly when _positive is empty (it returns -1)\n    return this._postive.length - 1\n  }\n\n  get last(): T {\n    return this.get(this.lastIdx)\n  }\n\n  get firstIdx(): number {\n    // Note: This also works correctly when _negative is empty (it returns 0)\n    return -this._negative.length\n  }\n\n  get first(): T {\n    return this.get(this.firstIdx)\n  }\n\n  get length(): number {\n    return this._postive.length + this._negative.length\n  }\n}\n","/* eslint-disable no-nested-ternary */\nimport type {MendozaEffectPair, MendozaPatch} from '@sanity/types'\nimport {Chunk, ChunkType} from '../../../../field'\nimport type {Transaction} from './types'\n\nfunction canMergeEdit(type: ChunkType) {\n  return type === 'create' || type === 'editDraft'\n}\n\nconst CHUNK_WINDOW = 5 * 60 * 1000 // 5 minutes\n\nfunction isWithinMergeWindow(a: string, b: string) {\n  return Date.parse(b) - Date.parse(a) < CHUNK_WINDOW\n}\n\nexport function mergeChunk(left: Chunk, right: Chunk): Chunk | [Chunk, Chunk] {\n  if (left.end !== right.start) throw new Error('chunks are not next to each other')\n\n  // TODO: How to detect first squash/create\n\n  const draftState = combineState(left.draftState, right.draftState)\n  const publishedState = combineState(left.publishedState, right.publishedState)\n\n  if (left.type === 'delete' && right.type === 'editDraft') {\n    return [left, {...right, type: 'create', draftState, publishedState}]\n  }\n\n  // Convert deletes into either discardDraft or unpublish depending on what's been deleted.\n  if (right.type === 'delete') {\n    if (draftState === 'missing' && publishedState === 'present') {\n      return [left, {...right, type: 'discardDraft', draftState, publishedState}]\n    }\n\n    if (draftState === 'present' && publishedState === 'missing') {\n      return [left, {...right, type: 'unpublish', draftState, publishedState}]\n    }\n  }\n\n  if (\n    canMergeEdit(left.type) &&\n    right.type === 'editDraft' &&\n    isWithinMergeWindow(left.endTimestamp, right.startTimestamp)\n  ) {\n    const authors = new Set<string>()\n    for (const author of left.authors) authors.add(author)\n    for (const author of right.authors) authors.add(author)\n\n    return {\n      index: 0,\n      id: right.id,\n      type: left.type,\n      start: left.start,\n      end: right.end,\n      startTimestamp: left.startTimestamp,\n      endTimestamp: right.endTimestamp,\n      authors,\n      draftState,\n      publishedState,\n    }\n  }\n\n  return [left, {...right, draftState, publishedState}]\n}\n\ntype ChunkState = 'unedited' | 'deleted' | 'upsert'\nfunction getChunkState(effect?: MendozaEffectPair): ChunkState {\n  const modified = Boolean(effect)\n  const deleted = effect && isDeletePatch(effect?.apply)\n\n  if (deleted) {\n    return 'deleted'\n  }\n\n  if (modified) {\n    return 'upsert'\n  }\n\n  return 'unedited'\n}\n\n/*\n * getChunkType tries to determine what effect the given transaction had on the document\n * More information about the logic can be found here https://github.com/sanity-io/sanity/pull/2633#issuecomment-886461812\n *\n * |                    | draft unedited | draft deleted | draft upsert |\n * |--------------------|----------------|---------------|--------------|\n * | published unedited | X              | delete        | editDraft    |\n * | published deleted  | delete         | delete        | delete       |\n * | published upsert   | liveEdit       | publish       | liveEdit     |\n */\nfunction getChunkType(transaction: Transaction): ChunkType {\n  const draftState = getChunkState(transaction.draftEffect)\n  const publishedState = getChunkState(transaction.publishedEffect)\n\n  if (publishedState === 'unedited') {\n    if (draftState === 'deleted') {\n      return 'delete'\n    }\n\n    if (draftState === 'upsert') {\n      return 'editDraft'\n    }\n  }\n\n  if (publishedState === 'deleted') {\n    return 'delete'\n  }\n\n  if (publishedState === 'upsert') {\n    if (draftState === 'unedited') {\n      return 'editLive'\n    }\n\n    if (draftState === 'deleted') {\n      return 'publish'\n    }\n\n    if (draftState === 'upsert') {\n      return 'editLive'\n    }\n  }\n\n  return 'editLive'\n}\n\nexport function chunkFromTransaction(transaction: Transaction): Chunk {\n  const modifiedDraft = Boolean(transaction.draftEffect)\n  const modifiedPublished = Boolean(transaction.publishedEffect)\n\n  const draftDeleted = transaction.draftEffect && isDeletePatch(transaction.draftEffect.apply)\n  const publishedDeleted =\n    transaction.publishedEffect && isDeletePatch(transaction.publishedEffect.apply)\n\n  const type = getChunkType(transaction)\n\n  return {\n    index: 0,\n    id: transaction.id,\n    type,\n    start: transaction.index,\n    end: transaction.index + 1,\n    startTimestamp: transaction.timestamp,\n    endTimestamp: transaction.timestamp,\n    authors: new Set([transaction.author]),\n    draftState: modifiedDraft ? (draftDeleted ? 'missing' : 'present') : 'unknown',\n    publishedState: modifiedPublished ? (publishedDeleted ? 'missing' : 'present') : 'unknown',\n  }\n}\n\nfunction combineState(\n  left: 'present' | 'missing' | 'unknown',\n  right: 'present' | 'missing' | 'unknown'\n) {\n  return right === 'unknown' ? left : right\n}\n\nexport function isDeletePatch(patch: MendozaPatch): boolean {\n  return patch[0] === 0 && patch[1] === null\n}\n","import type {TransactionLogEventWithEffects} from '@sanity/types'\nimport {Diff} from '@sanity/diff'\nimport {applyPatch, incremental} from 'mendoza'\nimport {Chunk, Annotation} from '../../../../field'\nimport {Transaction, DocumentRemoteMutationVersionEvent, CombinedDocument} from './types'\nimport {diffValue, Meta} from './diffValue'\nimport {TwoEndedArray} from './TwoEndedArray'\nimport {mergeChunk, chunkFromTransaction} from './chunker'\nimport {TraceEvent} from './replay'\nimport {getAttrs} from './utils'\n\n/** @beta */\nexport type ParsedTimeRef = Chunk | 'loading' | 'invalid'\n\n/** @beta */\nexport interface TimelineOptions {\n  publishedId: string\n  enableTrace?: boolean\n}\n\n/**\n * Timeline maintains information about the history of a document:\n * Grouping raw translog entries into sensible groups, replaying and\n * reconstructing different versions and abstract other details.\n *\n * Note that this class by itself is not capable of _fetching_ information,\n * but will only organize and structure the incoming translog entries.\n *\n * @beta\n */\nexport class Timeline {\n  reachedEarliestEntry = false\n\n  publishedId: string\n  draftId: string\n  private _transactions = new TwoEndedArray<Transaction>()\n  private _chunks = new TwoEndedArray<Chunk>()\n\n  // These two properties are here to handle the case\n  private _possiblePendingTransactions = new Map<\n    string,\n    {\n      transaction: Transaction\n      idx: number\n    }\n  >()\n  private _recreateTransactionsFrom?: number\n  private _trace?: TraceEvent[]\n\n  constructor(opts: TimelineOptions) {\n    this.publishedId = opts.publishedId\n    this.draftId = `drafts.${opts.publishedId}`\n\n    if (opts.enableTrace) {\n      this._trace = []\n      this._trace.push({\n        type: 'initial',\n        publishedId: opts.publishedId,\n      })\n      ;(window as any).__sanityTimelineTrace = this._trace\n    }\n  }\n\n  get chunkCount(): number {\n    return this._chunks.length\n  }\n\n  /** Maps over the chunk from newest to oldest. */\n  mapChunks<T>(mapper: (chunk: Chunk, idx: number) => T): T[] {\n    const result: T[] = []\n\n    const firstIdx = this._chunks.firstIdx\n    const lastIdx = this._chunks.lastIdx\n\n    for (let idx = lastIdx; idx >= firstIdx; idx--) {\n      result.push(mapper(this._chunks.get(idx), idx))\n    }\n\n    return result\n  }\n\n  reset(): void {\n    this._transactions = new TwoEndedArray()\n    this._chunks = new TwoEndedArray()\n    this._possiblePendingTransactions = new Map()\n    this._recreateTransactionsFrom = undefined\n    this.reachedEarliestEntry = false\n  }\n\n  /**\n   * Adds a remote mutation to the timeline. This methods assumes that the remote mutations\n   * come in correct order for their respective version, but has no ordering requirements\n   * across draft/published.\n   *\n   * Example: [D1, D2, P1] (where D1 and P1 were mutations done to the draft and published\n   * version in the same transaction) is a valid input. [P1, D2, D1] is _not_ valid since\n   * the mutation for the draft is out of order.\n   */\n  addRemoteMutation(entry: DocumentRemoteMutationVersionEvent): void {\n    if (this._trace) this._trace.push({type: 'addRemoteMutation', event: entry})\n\n    const pending = this._possiblePendingTransactions.get(entry.transactionId)\n\n    const transaction: Transaction = pending\n      ? pending.transaction\n      : {\n          index: 0,\n          id: entry.transactionId,\n          timestamp: entry.timestamp.toISOString(),\n          author: entry.author,\n        }\n\n    if (entry.version === 'draft') {\n      transaction.draftEffect = entry.effects as any\n    } else {\n      transaction.publishedEffect = entry.effects as any\n    }\n\n    if (pending) {\n      this._possiblePendingTransactions.delete(entry.transactionId)\n      this._invalidateTransactionFrom(pending.idx)\n    } else {\n      this._transactions.addToEnd(transaction)\n      this._possiblePendingTransactions.set(entry.transactionId, {\n        transaction,\n        idx: this._transactions.lastIdx,\n      })\n    }\n  }\n\n  addTranslogEntry(event: TransactionLogEventWithEffects): void {\n    if (this._trace) this._trace.push({type: 'addTranslogEntry', event})\n\n    this._transactions.addToBeginning({\n      index: 0,\n      id: event.id,\n      author: event.author,\n      timestamp: event.timestamp,\n      draftEffect: event.effects[this.draftId],\n      publishedEffect: event.effects[this.publishedId],\n    })\n  }\n\n  /** Mark that we've reached the earliest entry. */\n  didReachEarliestEntry(): void {\n    if (this._trace) this._trace.push({type: 'didReachEarliestEntry'})\n\n    this.reachedEarliestEntry = true\n  }\n\n  /**\n   * updateChunks synchronizes the chunks to match the current state\n   * of the transactions array. After calling this method you need\n   * to invalidate all Chunks.\n   */\n  updateChunks(): void {\n    if (this._trace) this._trace.push({type: 'updateChunks'})\n\n    this._removeInvalidatedChunks()\n    this._addChunksFromTransactions()\n    this._createInitialChunk()\n  }\n\n  private _removeInvalidatedChunks() {\n    if (this._recreateTransactionsFrom) {\n      while (this._chunks.length > 0) {\n        const chunk = this._chunks.last\n        if (this._recreateTransactionsFrom < chunk.end) {\n          this._chunks.removeFromEnd()\n        } else {\n          break\n        }\n      }\n      this._recreateTransactionsFrom = undefined\n    }\n  }\n\n  private _addChunksFromTransactions() {\n    const firstIdx = this._transactions.firstIdx\n    const lastIdx = this._transactions.lastIdx\n\n    // Add transactions at the end:\n    const nextTransactionToChunk = this._chunks.length > 0 ? this._chunks.last.end : firstIdx\n    for (let idx = nextTransactionToChunk; idx <= lastIdx; idx++) {\n      const transaction = this._transactions.get(idx)\n      this._chunks.mergeAtEnd(chunkFromTransaction(transaction), mergeChunk)\n    }\n\n    // Add transactions at the beginning:\n    if (this._chunks.length == 0) return\n\n    const firstTransactionChunked = this._chunks.first.start\n\n    for (let idx = firstTransactionChunked - 1; idx >= firstIdx; idx--) {\n      const transaction = this._transactions.get(idx)\n      this._chunks.mergeAtBeginning(chunkFromTransaction(transaction), mergeChunk)\n    }\n  }\n\n  private _invalidateTransactionFrom(idx: number) {\n    if (this._recreateTransactionsFrom === undefined || idx < this._recreateTransactionsFrom) {\n      this._recreateTransactionsFrom = idx\n    }\n  }\n\n  private _createInitialChunk() {\n    if (this.reachedEarliestEntry) {\n      if (this._chunks.first?.type === 'initial') return\n\n      const firstTx = this._transactions.first\n      if (!firstTx) return\n      const initialChunk = chunkFromTransaction(firstTx)\n      initialChunk.type = 'initial'\n      initialChunk.id = '@initial'\n      initialChunk.end = initialChunk.start\n      this._chunks.addToBeginning(initialChunk)\n    }\n  }\n\n  /**\n   * Resolves a time reference.\n   *\n   * Note that the chunk returned is only valid if the timeline stays constant.\n   * Once the timeline is updated, you must re-parse all references.\n   */\n  parseTimeId(id: string): ParsedTimeRef {\n    if (this._chunks.length === 0) {\n      return this.reachedEarliestEntry ? 'invalid' : 'loading'\n    }\n\n    // NOTE:\n    // This was refactored from\n    // ```\n    // const [timestampStr, chunkId] = id.split('/', 3)\n    // ```\n    // in order to avoid issues with `@microsoft/api-extractor`.\n    const idSegments = id.split('/', 3)\n    const timestampStr = idSegments.shift()\n    const chunkId = idSegments.shift()\n    const timestamp = Number(timestampStr)\n\n    for (let idx = this._chunks.lastIdx; idx >= this._chunks.firstIdx; idx--) {\n      const chunk = this._chunks.get(idx)\n      if (chunk.id === chunkId) {\n        return chunk\n      }\n\n      if (Date.parse(chunk.endTimestamp) + 60 * 60 * 1000 < timestamp) {\n        // The chunk ended _before_ the timestamp we're asking for. This means that there\n        // is no point in looking further and the chunk is invalid.\n\n        // We add 1 hour to allow some slack since transactions are not guaranteed to be in order.\n        return 'invalid'\n      }\n    }\n\n    return this.reachedEarliestEntry ? 'invalid' : 'loading'\n  }\n\n  findLastPublishedBefore(chunk: Chunk | null): ParsedTimeRef {\n    for (\n      let chunkIdx = chunk ? chunk.index - 1 : this._chunks.lastIdx;\n      chunkIdx >= this._chunks.firstIdx;\n      chunkIdx--\n    ) {\n      const currentChunk = this._chunks.get(chunkIdx)\n      if (currentChunk.type === 'publish' || currentChunk.type === 'initial') {\n        return currentChunk\n      }\n    }\n\n    if (!this.reachedEarliestEntry) return 'loading'\n\n    return this._chunks.first\n  }\n\n  isLatestChunk(chunk: Chunk): boolean {\n    return chunk === this._chunks.last\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  createTimeId(chunk: Chunk): string {\n    return `${chunk.endTimestamp.valueOf()}/${chunk.id}`\n  }\n\n  lastChunk(): Chunk {\n    return this._chunks.last\n  }\n\n  transactionByIndex(idx: number): Transaction | null {\n    if (!this._transactions.has(idx)) return null\n    return this._transactions.get(idx)\n  }\n\n  chunkByTransactionIndex(idx: number, startChunkIdx = 0): Chunk {\n    let chunkIdx = startChunkIdx\n    for (;;) {\n      const chunk = this._chunks.get(chunkIdx)\n      if (!chunk) throw new Error('transaction does not belong in any chunk')\n\n      if (idx >= chunk.end) {\n        chunkIdx++\n      } else if (idx < chunk.start) {\n        chunkIdx--\n      } else {\n        return chunk\n      }\n    }\n  }\n\n  replayBackwardsBetween(\n    firstIdx: number,\n    lastIdx: number,\n    doc: CombinedDocument\n  ): CombinedDocument {\n    let draft = doc.draft\n    let published = doc.published\n\n    for (let idx = lastIdx; idx >= firstIdx; idx--) {\n      const transaction = this._transactions.get(idx)\n\n      if (transaction.draftEffect) {\n        draft = applyPatch(draft, transaction.draftEffect.revert)\n      }\n\n      if (transaction.publishedEffect) {\n        published = applyPatch(published, transaction.publishedEffect.revert)\n      }\n    }\n\n    return {draft, published}\n  }\n\n  replayBackwardsUntil(firstIdx: number, doc: CombinedDocument): CombinedDocument {\n    return this.replayBackwardsBetween(firstIdx, this._transactions.lastIdx, doc)\n  }\n\n  calculateDiff(\n    initialDoc: CombinedDocument,\n    finalDoc: CombinedDocument,\n    firstIdx: number,\n    lastIdx: number\n  ): Diff<Annotation> {\n    let draftValue = incremental.wrap<Meta>(initialDoc.draft, null)\n    let publishedValue = incremental.wrap<Meta>(initialDoc.published, null)\n\n    const initialValue = getValue(draftValue, publishedValue)\n    const initialAttributes = getAttrs(initialDoc)\n    let firstChunk: Chunk | null = null\n\n    // Loop over all of the chunks:\n    for (let chunkIdx = firstIdx; chunkIdx <= lastIdx; chunkIdx++) {\n      const chunk = this._chunks.get(chunkIdx)\n      if (!firstChunk) firstChunk = chunk\n\n      for (let idx = chunk.start; idx < chunk.end; idx++) {\n        const transaction = this._transactions.get(idx)\n\n        const meta = {\n          chunk,\n          transactionIndex: idx,\n        }\n\n        const preDraftValue = draftValue\n        const prePublishedValue = publishedValue\n\n        if (transaction.draftEffect) {\n          draftValue = incremental.applyPatch(draftValue, transaction.draftEffect.apply, meta)\n        }\n\n        if (transaction.publishedEffect) {\n          publishedValue = incremental.applyPatch(\n            publishedValue,\n            transaction.publishedEffect.apply,\n            meta\n          )\n        }\n\n        const didHaveDriaft = incremental.getType(preDraftValue) !== 'null'\n        const haveDraft = incremental.getType(draftValue) !== 'null'\n        const havePublished = incremental.getType(publishedValue) !== 'null'\n\n        if (havePublished && !haveDraft) {\n          publishedValue = incremental.rebaseValue(preDraftValue, publishedValue)\n        }\n\n        if (haveDraft && !didHaveDriaft) {\n          draftValue = incremental.rebaseValue(prePublishedValue, draftValue)\n        }\n      }\n    }\n\n    const finalValue = incremental.getType(draftValue) === 'null' ? publishedValue : draftValue\n    const finalAttributes = getAttrs(finalDoc)\n\n    return diffValue(this, firstChunk, initialValue, initialAttributes, finalValue, finalAttributes)\n  }\n}\n\nfunction getValue(draftValue: incremental.Value<Meta>, publishedValue: incremental.Value<Meta>) {\n  return incremental.getType(draftValue) === 'null' ? publishedValue : draftValue\n}\n","import type {SanityClient} from '@sanity/client'\nimport {\n  isReference,\n  Reference,\n  SanityDocument,\n  TransactionLogEventWithMutations,\n} from '@sanity/types'\nimport {reduce as jsonReduce} from 'json-reduce'\nimport {from, Observable} from 'rxjs'\nimport {map, mergeMap} from 'rxjs/operators'\nimport {getDraftId, getPublishedId, isRecord} from '../../../util'\nimport {Timeline, TimelineController, createObservableController} from './history'\n\n/** @beta */\nexport interface HistoryStore {\n  getDocumentAtRevision: (\n    documentId: string,\n    revision: string\n  ) => Promise<SanityDocument | undefined>\n\n  getHistory: (\n    documentIds: string[],\n    options?: {time?: string; revision?: string}\n  ) => Promise<{documents: SanityDocument[]}>\n\n  getTransactions: (documentIds: string[]) => Promise<TransactionLogEventWithMutations[]>\n\n  restore: (id: string, targetId: string, rev: string) => Observable<SanityDocument>\n\n  /** @internal */\n  getTimeline: (options: {publishedId: string; enableTrace?: boolean}) => Timeline\n\n  /** @internal */\n  getTimelineController: (options: {\n    client: SanityClient\n    documentId: string\n    documentType: string\n    timeline: Timeline\n  }) => Observable<{historyController: TimelineController}>\n}\n\nconst documentRevisionCache: Record<string, Promise<SanityDocument | undefined> | undefined> =\n  Object.create(null)\n\nconst getHistory = (\n  client: SanityClient,\n  documentIds: string[],\n  options: {time?: string; revision?: string} = {}\n): Promise<{documents: SanityDocument[]}> => {\n  const ids = Array.isArray(documentIds) ? documentIds : [documentIds]\n  const {time, revision} = options\n\n  if (time && revision) {\n    throw new Error(`getHistory can't handle both time and revision parameters`)\n  }\n\n  const dataset = client.clientConfig.dataset\n  let url = `/data/history/${dataset}/documents/${ids.join(',')}`\n\n  if (revision) {\n    url = `${url}?revision=${revision}`\n  } else {\n    const timestamp = time || new Date().toISOString()\n\n    url = `${url}?time=${timestamp}`\n  }\n\n  return client.request({url})\n}\n\nconst getDocumentAtRevision = (\n  client: SanityClient,\n  documentId: string,\n  revision: string\n): Promise<SanityDocument | undefined> => {\n  const publishedId = getPublishedId(documentId)\n  const draftId = getDraftId(documentId)\n  const cacheKey = `${publishedId}@${revision}`\n  const cached = documentRevisionCache[cacheKey]\n  if (cached) {\n    return cached\n  }\n\n  const dataset = client.clientConfig.dataset\n  const url = `/data/history/${dataset}/documents/${publishedId},${draftId}?revision=${revision}`\n\n  const entry = client.request<{documents?: SanityDocument[]}>({url}).then((result) => {\n    const documents = result.documents || []\n    const published = documents.find((res) => res._id === publishedId)\n    const draft = documents.find((res) => res._id === draftId)\n    return draft || published\n  })\n\n  documentRevisionCache[cacheKey] = entry\n  return entry\n}\n\nconst getTransactions = async (\n  client: SanityClient,\n  documentIds: string | string[]\n): Promise<TransactionLogEventWithMutations[]> => {\n  const ids = Array.isArray(documentIds) ? documentIds : [documentIds]\n  const dataset = client.clientConfig.dataset\n  const query = {excludeContent: 'true', includeIdentifiedDocumentsOnly: 'true'}\n  const url = `/data/history/${dataset}/transactions/${ids.join(',')}`\n  const result = await client.request({url, query})\n  const transactions = result\n    .toString('utf8')\n    .split('\\n')\n    .filter(Boolean)\n    .map((line: string) => JSON.parse(line))\n\n  return transactions\n}\n\nconst getAllRefIds = (doc: SanityDocument): string[] =>\n  jsonReduce(\n    doc as any,\n    (acc: any, node) => (isReference(node) && !acc.includes(node._ref) ? [...acc, node._ref] : acc),\n    []\n  )\n\nfunction jsonMap(value: unknown, mapFn: any): any {\n  if (Array.isArray(value)) {\n    return mapFn(\n      value.map((item) => jsonMap(item, mapFn)).filter((item) => typeof item !== 'undefined')\n    )\n  }\n\n  if (isRecord(value)) {\n    return mapFn(\n      Object.keys(value).reduce<Record<string, unknown>>((res, key) => {\n        const mappedValue = jsonMap(value[key], mapFn)\n        if (typeof mappedValue !== 'undefined') {\n          res[key] = mappedValue\n        }\n\n        return res\n      }, {})\n    )\n  }\n\n  return mapFn(value)\n}\n\nconst mapRefNodes = (doc: SanityDocument, mapFn: (node: Reference) => Reference | undefined) =>\n  jsonMap(doc, (node: unknown) => (isReference(node) ? mapFn(node) : node))\n\n/** @internal */\nexport const removeMissingReferences = (\n  doc: SanityDocument,\n  existingIds: Record<string, boolean | undefined>\n): SanityDocument =>\n  mapRefNodes(doc, (refNode) => {\n    const documentExists = existingIds[refNode._ref]\n    return documentExists ? refNode : undefined\n  })\n\nfunction restore(client: SanityClient, documentId: string, targetDocumentId: string, rev: string) {\n  return from(getDocumentAtRevision(client, documentId, rev)).pipe(\n    mergeMap((documentAtRevision) => {\n      if (!documentAtRevision) {\n        throw new Error(`Unable to find document with ID ${documentId} at revision ${rev}`)\n      }\n\n      const existingIdsQuery = getAllRefIds(documentAtRevision)\n        .map((refId) => `\"${refId}\": defined(*[_id==\"${refId}\"]._id)`)\n        .join(',')\n\n      return client.observable\n        .fetch<Record<string, boolean | undefined>>(`{${existingIdsQuery}}`)\n        .pipe(map((existingIds) => removeMissingReferences(documentAtRevision, existingIds)))\n    }),\n    map((documentAtRevision) => {\n      // Remove _updatedAt and create a new draft from the document at given revision\n      const {_updatedAt, ...document} = documentAtRevision\n      return {...document, _id: targetDocumentId}\n    }),\n    mergeMap((restoredDraft) =>\n      client.observable.createOrReplace(restoredDraft, {visibility: 'async'})\n    )\n  )\n}\n\n/** @internal */\nexport interface HistoryStoreOptions {\n  client: SanityClient\n}\n\n/** @internal */\nexport function createHistoryStore({client}: HistoryStoreOptions): HistoryStore {\n  return {\n    getDocumentAtRevision: (documentId, revision) =>\n      getDocumentAtRevision(client, documentId, revision),\n\n    getHistory: (documentIds, options) => getHistory(client, documentIds, options),\n\n    getTransactions: (documentIds) => getTransactions(client, documentIds),\n\n    restore: (id, targetId, rev) => restore(client, id, targetId, rev),\n\n    getTimeline: (options: {publishedId: string; enableTrace?: boolean}) => new Timeline(options),\n\n    getTimelineController: (options: {\n      client: SanityClient\n      documentId: string\n      documentType: string\n      timeline: Timeline\n    }) => createObservableController(options),\n  }\n}\n","import {defer, timer} from 'rxjs'\nimport {map, mergeMapTo, shareReplay} from 'rxjs/operators'\nimport {sample} from 'lodash'\nimport {StateEvent} from './message-transports/transport'\n\nconst USERIDS = [\n  'pqSMwf6hH',\n  'pnLYqNfv5',\n  'priDVVmy8',\n  'p0NFOU0j8',\n  'pTDl2jw8d',\n  'pHMeQnTse',\n  'pDQYzJbyS',\n  'pZyoPHKUs',\n  'p4Tyi2Be5',\n  'pb9vii060',\n  'pE8yhOisw',\n  'p7Fd2C6Cj',\n  'p3exSgYCx',\n  'pbIQRYViC',\n  'p8GJaTEhN',\n  'p27ewL8aM',\n  'pYg97z75S',\n  'pdLr4quHv',\n  'pkJXiDgg6',\n  'pkl4UAKcA',\n\n  // Included to ensure we handle the case when a user profile cannot\n  // be fetched due to insufficient privileges or similar\n  'pNoExists',\n]\n\nconst PATHS = [\n  ['nested', 'first'],\n  ['nested', 'second'],\n  [\n    'nestedArray',\n    {_key: '565c867c8dac'},\n    'arrayNo1',\n    {_key: 'a645548a8f01'},\n    'arrayNo1',\n    {_key: '1685e372c40f'},\n    'fieldNo0',\n  ],\n  ['nestedArray', {_key: '565c867c8dac'}, 'fieldNo0'],\n  ['nestedArray', {_key: '565c867c8dac'}, 'arrayNo19', {_key: 'a02e7a93e2a2'}, 'fieldNo0'],\n  ['nestedArray', {_key: '565c867c8dac'}, 'arrayNo19', {_key: 'a02e7a93e2a2'}, 'fieldNo19'],\n  ['address', 'country'],\n  ['address', 'street'],\n  ['customInputWithDefaultPresence', 'row3', 'cell3'],\n]\n\nexport const mock$ = defer(() => timer(0, 10000)).pipe(\n  mergeMapTo(USERIDS),\n  map(\n    (id, n): StateEvent => ({\n      type: 'state',\n      userId: id,\n      sessionId: id + n,\n      timestamp: new Date().toISOString(),\n      locations: [\n        {\n          type: 'document',\n          documentId: 'presence-debug',\n          lastActiveAt: new Date().toISOString(),\n          path: sample(PATHS),\n        },\n      ] as any,\n    })\n  ),\n  shareReplay()\n)\n","import {Observable, EMPTY} from 'rxjs'\nimport {map, share} from 'rxjs/operators'\nimport {BifurClient} from '@sanity/bifur-client'\nimport {PresenceLocation} from '../types'\nimport {Transport, TransportEvent, TransportMessage} from './transport'\n\ntype BifurStateMessage = {\n  type: 'state'\n  i: string\n  m: {\n    sessionId: string\n    locations: PresenceLocation[]\n  }\n}\n\ntype BifurDisconnectMessage = {\n  type: 'disconnect'\n  i: string\n  m: {session: string}\n}\n\ntype RollCallEvent = {\n  type: 'rollCall'\n  i: string\n  session: string\n}\n\ntype IncomingBifurEvent<T> = RollCallEvent | BifurStateMessage | BifurDisconnectMessage\n\nconst handleIncomingMessage = (event: IncomingBifurEvent<Location[]>): TransportEvent => {\n  if (event.type === 'rollCall') {\n    return {\n      type: 'rollCall',\n      userId: event.i,\n      sessionId: event.session,\n    }\n  }\n  if (event.type === 'state') {\n    const {sessionId, locations} = event.m\n    return {\n      type: 'state',\n      userId: event.i,\n      sessionId: sessionId,\n      timestamp: new Date().toISOString(),\n      locations,\n    }\n  }\n\n  if (event.type === 'disconnect') {\n    return {\n      type: 'disconnect',\n      userId: event.i,\n      sessionId: event.m.session,\n      timestamp: new Date().toISOString(),\n    }\n  }\n\n  throw new Error(`Got unknown presence event: ${JSON.stringify(event)}`)\n}\n\nexport const createBifurTransport = (bifur: BifurClient, sessionId: string): Transport => {\n  const incomingEvents$: Observable<TransportEvent> = bifur\n    .request<IncomingBifurEvent<Location[]>>('presence')\n    .pipe(map(handleIncomingMessage))\n\n  const dispatchMessage = (message: TransportMessage): Observable<undefined> => {\n    if (message.type === 'rollCall') {\n      return bifur.request('presence_rollcall', {session: sessionId})\n    }\n\n    if (message.type === 'state') {\n      return bifur.request('presence_announce', {\n        data: {locations: message.locations, sessionId},\n      })\n    }\n\n    if (message.type === 'disconnect') {\n      return bifur.request('presence_disconnect', {session: sessionId})\n    }\n\n    return EMPTY\n  }\n\n  return [incomingEvents$.pipe(share()), dispatchMessage]\n}\n","/* eslint-disable camelcase */\n\nimport {BehaviorSubject, defer, EMPTY, from, fromEvent, merge, NEVER, Observable, timer} from 'rxjs'\nimport {\n  auditTime,\n  distinctUntilChanged,\n  filter,\n  flatMap,\n  map,\n  mergeMapTo,\n  scan,\n  share,\n  shareReplay,\n  switchMap,\n  switchMapTo,\n  takeUntil,\n  tap,\n  toArray,\n  withLatestFrom,\n} from 'rxjs/operators'\nimport {flatten, groupBy, omit, uniq} from 'lodash'\nimport {nanoid} from 'nanoid'\nimport {User} from '@sanity/types'\nimport {BifurClient} from '@sanity/bifur-client'\nimport {debugParams$} from '../debugParams'\nimport {ConnectionStatusStore} from '../connection-status/connection-status-store'\nimport {UserStore} from '../user'\nimport {\n  DisconnectEvent,\n  RollCallEvent,\n  StateEvent,\n  TransportEvent,\n} from './message-transports/transport'\nimport {mock$} from './mock-events'\nimport {createBifurTransport} from './message-transports/bifurTransport'\nimport {DocumentPresence, GlobalPresence, PresenceLocation, Session, UserSessionPair} from './types'\n\n/** @beta */\nexport interface PresenceStore {\n  /**\n   * @internal\n   */\n  documentPresence: (documentId: string) => Observable<DocumentPresence[]>\n\n  /**\n   * @internal\n   */\n  globalPresence$: Observable<GlobalPresence[]>\n\n  /**\n   * @internal\n   */\n  reportLocations: (locations: PresenceLocation[]) => Observable<void>\n\n  /**\n   * @internal\n   */\n  setLocation: (nextLocation: PresenceLocation[]) => void\n\n  /**\n   * @internal\n   */\n  debugPresenceParam$: Observable<string[]>\n}\n\nconst KEY = 'presence_session_id'\nconst generate = () => nanoid(16)\n\n// We're keeping the session id in sessionStorage as it will survive page reloads.\n// todo:\n//  There's a potential issue with window.open(...) here as it inherits the top level session storage and thus will\n//  re-use session ids:\n//    > Opening a page in a new tab or window creates a new session with the value of the top-level browsing context,\n//      which differs from how session cookies work.\n//      More at https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage\n//  This is _probably_ a quite marginal case and not going to be much of a issue in practice\nfunction getSessionId() {\n  try {\n    return window.sessionStorage.getItem(KEY)\n  } catch (err) {\n    // We don't want to fail hard if session storage can't be accessed for some reason\n  }\n  return null\n}\n\nfunction setSessionId(id: string) {\n  try {\n    window.sessionStorage.setItem(KEY, id)\n  } catch (err) {\n    // We don't want to fail hard if session storage can't be accessed for some reason\n  }\n  return id\n}\n\n/** @internal */\nexport const SESSION_ID = getSessionId() || setSessionId(generate())\n\n/** @internal */\nexport function __tmp_wrap_presenceStore(context: {\n  bifur: BifurClient\n  connectionStatusStore: ConnectionStatusStore\n  userStore: UserStore\n}): PresenceStore {\n  const {bifur, connectionStatusStore, userStore} = context\n\n  const [presenceEvents$, sendMessage] = createBifurTransport(bifur, SESSION_ID)\n\n  const currentLocation$ = new BehaviorSubject<PresenceLocation[]>([])\n  const locationChange$ = currentLocation$.pipe(distinctUntilChanged())\n\n  // export\n  const setLocation = (nextLocation: PresenceLocation[]) => {\n    currentLocation$.next(nextLocation)\n  }\n\n  // export\n  const reportLocations = (locations: PresenceLocation[]) =>\n    sendMessage({type: 'state', locations: locations})\n\n  const requestRollCall = () => sendMessage({type: 'rollCall'})\n\n  const rollCallRequests$ = presenceEvents$.pipe(\n    filter((event: TransportEvent): event is RollCallEvent => event.type === 'rollCall'),\n    // do not respond to my own rollcall requests\n    filter((event: RollCallEvent) => event.sessionId !== SESSION_ID)\n  )\n\n  const REPORT_MIN_INTERVAL = 30000\n\n  // Interval to report my own location at\n  const reportLocationInterval$ = timer(0, REPORT_MIN_INTERVAL)\n\n  const reportLocation$ = defer(() => merge(locationChange$, rollCallRequests$)).pipe(\n    switchMap(() => reportLocationInterval$),\n    withLatestFrom(currentLocation$),\n    map(([, locations]) => locations),\n    auditTime(200),\n    switchMap((locations) => reportLocations(locations)),\n    mergeMapTo(EMPTY),\n    share()\n  )\n\n  // This represents my rollcall request to other clients\n  // Note: We are requesting a rollcall whenever we (re)connect\n  const myRollCall$ = defer(() => requestRollCall()).pipe(mergeMapTo(EMPTY))\n\n  const connectionChange$ = connectionStatusStore.connectionStatus$.pipe(\n    map((status) => status.type),\n    filter((statusType) => statusType === 'connected' || statusType === 'error'),\n    distinctUntilChanged()\n  )\n\n  // export\n  const debugPresenceParam$ = debugParams$.pipe(\n    map((args) => args.find((arg) => arg.startsWith('presence='))),\n    map(\n      (arg) =>\n        arg\n          ?.split('presence=')[1]\n          .split(',')\n          .map((r) => r.trim()) || []\n    )\n  )\n\n  const useMock$ = debugPresenceParam$.pipe(\n    filter((args) => args.includes('fake_others')),\n    tap(() => {\n      // eslint-disable-next-line no-console\n      console.log(\n        'Faking other users present in the studio. They will hang out in the document with _type: \"presence\" and _id: \"presence-debug\"'\n      )\n    }),\n    switchMapTo(mock$)\n  )\n\n  const debugIntrospect$ = debugPresenceParam$.pipe(map((args) => args.includes('show_own')))\n\n  const syncEvent$ = merge(myRollCall$, presenceEvents$).pipe(\n    filter(\n      (event: TransportEvent): event is StateEvent | DisconnectEvent =>\n        event.type === 'state' || event.type === 'disconnect'\n    )\n  )\n\n  const stateEventToSession = (stateEvent: StateEvent): Session => {\n    return {\n      lastActiveAt: stateEvent.timestamp,\n      locations: stateEvent.locations,\n      sessionId: stateEvent.sessionId,\n      userId: stateEvent.userId,\n    }\n  }\n\n  const states$: Observable<{[sessionId: string]: Session}> = merge(syncEvent$, useMock$).pipe(\n    scan(\n      (keyed, event: StateEvent | DisconnectEvent): {[sessionId: string]: Session} =>\n        event.type === 'disconnect'\n          ? omit(keyed, event.sessionId)\n          : {...keyed, [event.sessionId]: stateEventToSession(event)},\n      {}\n    )\n  )\n\n  const allSessions$: Observable<UserSessionPair[]> = connectionChange$.pipe(\n    switchMap((status) => (status === 'connected' ? merge(states$, reportLocation$) : NEVER)),\n    map((keyedSessions) => Object.values(keyedSessions)),\n    switchMap((sessions) => {\n      const userIds = uniq(sessions.map((sess) => sess.userId))\n      return from(userStore.getUsers(userIds)).pipe(\n        map((users) =>\n          sessions\n            .map((session) => ({\n              // eslint-disable-next-line max-nested-callbacks\n              user: users.find((res) => res.id === session.userId),\n              session: session,\n            }))\n            // If we failed to find a user profile for a session, remove it\n            .filter(userSessionPairHasUser)\n        )\n      )\n    }),\n    takeUntil(\n      fromEvent(window, 'beforeunload').pipe(switchMap(() => sendMessage({type: 'disconnect'})))\n    ),\n    shareReplay({refCount: true, bufferSize: 1})\n  )\n\n  function userSessionPairHasUser(pair: Partial<UserSessionPair>): pair is UserSessionPair {\n    return Boolean(pair.user && pair.session)\n  }\n\n  // export\n  const globalPresence$: Observable<GlobalPresence[]> = allSessions$.pipe(\n    map((sessions): {user: User; sessions: Session[]}[] => {\n      const grouped = groupBy(\n        sessions.map((s) => s.session),\n        (e) => e.userId\n      )\n\n      return Object.keys(grouped).map((userId): {user: User; sessions: Session[]} => ({\n        user: sessions.find((s) => s.user.id === userId)?.user as User,\n        sessions: grouped[userId],\n      }))\n    }),\n    withLatestFrom(debugIntrospect$),\n    map(([userAndSessions, debugIntrospect]) =>\n      userAndSessions.filter((userAndSession) => {\n        if (debugIntrospect) {\n          return true\n        }\n\n        const isCurrent = userAndSession.sessions.some((sess) => sess.sessionId === SESSION_ID)\n\n        return !isCurrent\n      })\n    ),\n    map((userAndSessions) =>\n      userAndSessions.map((userAndSession) => ({\n        user: userAndSession.user,\n        status: 'online',\n        lastActiveAt: userAndSession.sessions.sort()[0]?.lastActiveAt,\n        locations: flatten(\n          (userAndSession.sessions || []).map((session) => session.locations || [])\n        )\n          .map((location) => ({\n            type: location.type,\n            documentId: location.documentId,\n            path: location.path,\n            lastActiveAt: location.lastActiveAt,\n          }))\n          .reduce((prev, curr) => prev.concat(curr), [] as PresenceLocation[]),\n      }))\n    )\n  )\n\n  // export\n  const documentPresence = (documentId: string): Observable<DocumentPresence[]> => {\n    return allSessions$.pipe(\n      withLatestFrom(debugIntrospect$),\n      switchMap(([userAndSessions, debugIntrospect]) =>\n        from(userAndSessions).pipe(\n          filter(\n            (userAndSession) => debugIntrospect || userAndSession.session.sessionId !== SESSION_ID\n          ),\n          flatMap((userAndSession) =>\n            (userAndSession.session.locations || [])\n              .filter((item) => item.documentId === documentId)\n              .map((location) => ({\n                user: userAndSession.user,\n                lastActiveAt: userAndSession.session.lastActiveAt,\n                path: location.path || [],\n                sessionId: userAndSession.session.sessionId,\n              }))\n          ),\n          toArray()\n        )\n      )\n    )\n  }\n\n  return {setLocation, reportLocations, debugPresenceParam$, globalPresence$, documentPresence}\n}\n","import {useState, useEffect} from 'react'\nimport {usePresenceStore} from '../datastores'\nimport {GlobalPresence} from './types'\n\n/** @internal */\nexport function useGlobalPresence(): GlobalPresence[] {\n  const [presence, setPresence] = useState<GlobalPresence[]>([])\n  const presenceStore = usePresenceStore()\n\n  useEffect(() => {\n    const subscription = presenceStore.globalPresence$.subscribe(setPresence)\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [presenceStore])\n\n  return presence\n}\n","import {useState, useEffect} from 'react'\nimport {usePresenceStore} from '../datastores'\nimport {DocumentPresence} from './types'\n\n/** @internal */\nexport function useDocumentPresence(documentId: string): DocumentPresence[] {\n  const presenceStore = usePresenceStore()\n  const [presence, setPresence] = useState<DocumentPresence[]>([])\n\n  useEffect(() => {\n    const subscription = presenceStore.documentPresence(documentId).subscribe(setPresence)\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [documentId, presenceStore])\n\n  return presence\n}\n","import {SanityClient} from '@sanity/client'\nimport {Observable} from 'rxjs'\nimport {ProjectData, ProjectStore} from './types'\n\n/** @internal */\nexport function createProjectStore(context: {client: SanityClient}): ProjectStore {\n  const {client} = context\n  const projectId = client.config().projectId\n  const versionedClient = client.withConfig({apiVersion: '2021-12-15'})\n\n  function get(): Observable<ProjectData> {\n    return versionedClient.observable.request({\n      url: `/projects/${projectId}`,\n    })\n  }\n\n  function getDatasets() {\n    return versionedClient.observable.request({\n      url: `/projects/${projectId}/datasets`,\n    })\n  }\n\n  return {get, getDatasets}\n}\n","import {useEffect, useState} from 'react'\nimport {useProjectStore} from '../datastores'\nimport {ProjectData} from './types'\n\n/** @internal */\nexport function useProject(): {value: ProjectData | null} {\n  const projectStore = useProjectStore()\n  const [value, setValue] = useState<ProjectData | null>(null)\n\n  useEffect(() => {\n    const project$ = projectStore.get()\n    const sub = project$.subscribe(setValue)\n\n    return () => sub.unsubscribe()\n  }, [projectStore])\n\n  return {value}\n}\n","import {useEffect, useState} from 'react'\nimport {useProjectStore} from '../datastores'\nimport {ProjectDatasetData} from './types'\n\n/** @internal */\nexport function useProjectDatasets(): {value: ProjectDatasetData[] | null} {\n  const projectStore = useProjectStore()\n  const [value, setValue] = useState<ProjectDatasetData[] | null>(null)\n\n  useEffect(() => {\n    const project$ = projectStore.getDatasets()\n    const sub = project$.subscribe(setValue)\n\n    return () => sub.unsubscribe()\n  }, [projectStore])\n\n  return {value}\n}\n","import {Observable, of as observableOf} from 'rxjs'\nimport {Backend} from './types'\n\nconst tryParse = (val: string, defValue: unknown) => {\n  try {\n    return JSON.parse(val)\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(`Failed to parse settings: ${err.message}`)\n    return defValue\n  }\n}\n\nconst get = (key: string, defValue: unknown): Observable<unknown> => {\n  const val = localStorage.getItem(key)\n\n  return observableOf(val === null ? defValue : tryParse(val, defValue))\n}\n\nconst set = (key: string, nextValue: unknown): Observable<unknown> => {\n  // Can't stringify undefined, and nulls are what\n  // `getItem` returns when key does not exist\n  if (typeof nextValue === 'undefined' || nextValue === null) {\n    localStorage.removeItem(key)\n  } else {\n    localStorage.setItem(key, JSON.stringify(nextValue))\n  }\n\n  return observableOf(nextValue)\n}\n\nexport const localStorageBackend: Backend = {get, set}\n","import {Observable, of as observableOf} from 'rxjs'\nimport {Backend} from './types'\n\nconst DB = Object.create(null)\n\nconst get = (key: string, defValue: unknown): Observable<unknown> =>\n  observableOf(key in DB ? DB[key] : defValue)\n\nconst set = (key: string, nextValue: unknown): Observable<unknown> => {\n  if (typeof nextValue === 'undefined' || nextValue === null) {\n    delete DB[key]\n  } else {\n    DB[key] = nextValue\n  }\n\n  return observableOf(nextValue)\n}\n\nexport const memoryBackend: Backend = {get, set}\n","import {localStorageBackend} from './localStorage'\nimport {memoryBackend} from './memory'\nimport {Backend} from './types'\n\nlet isSupported: boolean | null = null\nfunction supportsLocalStorage() {\n  if (isSupported !== null) {\n    return isSupported\n  }\n\n  const testKey = '__test__'\n  try {\n    localStorage.setItem(testKey, testKey)\n    localStorage.removeItem(testKey)\n    isSupported = true\n  } catch (evt) {\n    isSupported = false\n  }\n\n  return isSupported\n}\n\nexport function resolveBackend(): Backend {\n  return supportsLocalStorage() ? localStorageBackend : memoryBackend\n}\n","import {merge, Observable, Subject} from 'rxjs'\nimport {filter, map, switchMap} from 'rxjs/operators'\nimport {resolveBackend} from './backends/resolve'\nimport {Settings, SettingsStore} from './types'\n\n/** @internal */\nexport function createSettingsStore(): SettingsStore {\n  const storageBackend = resolveBackend()\n\n  const set$ = new Subject<{key: string; value: unknown}>()\n\n  const prefixNamespace = (ns: string, key: string) => `${ns}::${key}`\n\n  const updates$ = set$.pipe(\n    switchMap((event) =>\n      storageBackend.set(event.key, event.value).pipe(\n        map((nextValue) => ({\n          key: event.key,\n          value: nextValue,\n        }))\n      )\n    )\n  )\n\n  const listen = (key: string, defValue: unknown): Observable<unknown> => {\n    return merge(\n      storageBackend.get(key, defValue),\n      updates$.pipe(\n        filter((update) => update.key === key),\n        map((update) => update.value)\n      )\n    )\n  }\n\n  const set = (key: string, value: unknown) => {\n    set$.next({key, value})\n  }\n\n  const forNamespace = (ns: string): Settings => {\n    return {\n      forKey: (key: string) => {\n        const namespacedKey = prefixNamespace(ns, key)\n\n        return {\n          listen: (defaultValue: unknown) => listen(namespacedKey, defaultValue),\n          set: (value: unknown) => set(namespacedKey, value),\n          del: () => set(namespacedKey, undefined),\n        }\n      },\n      listen: (key: string, defaultValue: unknown) => {\n        return listen(prefixNamespace(ns, key), defaultValue)\n      },\n      set: (key: string, value: unknown) => {\n        return set(prefixNamespace(ns, key), value)\n      },\n      del: (key: string) => {\n        return set(prefixNamespace(ns, key), undefined)\n      },\n      forNamespace: (sub: string) => {\n        return forNamespace(prefixNamespace(ns, sub))\n      },\n    }\n  }\n\n  return {forNamespace}\n}\n","import {SanityClient} from '@sanity/client'\nimport {CurrentUser, User} from '@sanity/types'\nimport DataLoader from 'dataloader'\nimport raf from 'raf'\nimport {isRecord} from '../../../util'\n\n/** @internal */\nexport interface UserStoreOptions {\n  client: SanityClient\n  currentUser: CurrentUser | null\n}\n\n/** @beta */\nexport interface UserStore {\n  getUser(userId: string): Promise<User | null>\n  getUsers(userIds: string[]): Promise<User[]>\n}\n\n/**\n * Given a `client` and a `currentUser` creates a datastore that handles\n * fetching, batch fetching, and caching users.\n *\n * @internal\n */\nexport function createUserStore({client: _client, currentUser}: UserStoreOptions): UserStore {\n  const client = _client.withConfig({apiVersion: '2021-06-07'})\n\n  const userLoader = new DataLoader<string, User | null>(\n    async (userIds) => {\n      const value = await client.request<(User | null)[]>({\n        uri: `/users/${userIds.join(',')}`,\n        withCredentials: true,\n        tag: 'users.get',\n      })\n      const response = Array.isArray(value) ? value : [value]\n      const users = response.reduce((acc, next) => {\n        if (next?.id) {\n          acc[next.id] = next\n        }\n        return acc\n      }, {} as Record<string, User | null>)\n      return userIds.map((id) => users[id] || null)\n    },\n    {batchScheduleFn: (cb) => raf(cb)}\n  )\n\n  const userFromCurrentUser: User | null = currentUser && {\n    id: currentUser.id,\n    displayName: currentUser.name,\n    imageUrl: currentUser.profileImage,\n  }\n\n  userLoader.prime('me', userFromCurrentUser)\n\n  if (userFromCurrentUser?.id) {\n    userLoader.prime(userFromCurrentUser.id, userFromCurrentUser)\n  }\n\n  return {\n    getUser: (userId) => userLoader.load(userId),\n    getUsers: async (userIds) => {\n      const results = await userLoader.loadMany(userIds)\n      // remove `Error`s from the the results\n      return results.filter(\n        (result): result is User => isRecord(result) && typeof result.id === 'string'\n      )\n    },\n  }\n}\n","/* eslint-disable camelcase */\n\nimport {useMemo} from 'react'\nimport {useClient, useSchema, useTemplates} from '../../hooks'\nimport {createDocumentPreviewStore, DocumentPreviewStore} from '../../preview'\nimport {useSource, useWorkspace} from '../../studio'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../studioClient'\nimport {useCurrentUser} from '../user'\nimport {\n  ConnectionStatusStore,\n  createConnectionStatusStore,\n} from './connection-status/connection-status-store'\nimport {createDocumentStore, DocumentStore} from './document'\nimport {createGrantsStore, GrantsStore} from './grants'\nimport {createHistoryStore, HistoryStore} from './history'\nimport {PresenceStore, __tmp_wrap_presenceStore} from './presence'\nimport {createProjectStore, ProjectStore} from './project'\nimport {useResourceCache} from './ResourceCacheProvider'\nimport {createSettingsStore, SettingsStore} from './settings'\nimport {createUserStore, UserStore} from './user'\n\n/** @beta */\nexport function useUserStore(): UserStore {\n  const {getClient, currentUser} = useSource()\n  const resourceCache = useResourceCache()\n  const client = getClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  return useMemo(() => {\n    const userStore =\n      resourceCache.get<UserStore>({\n        namespace: 'userStore',\n        dependencies: [client, currentUser],\n      }) || createUserStore({client, currentUser})\n\n    resourceCache.set({\n      namespace: 'userStore',\n      dependencies: [client, currentUser],\n      value: userStore,\n    })\n\n    return userStore\n  }, [client, currentUser, resourceCache])\n}\n\n/** @beta */\nexport function useGrantsStore(): GrantsStore {\n  const {getClient} = useSource()\n  const client = getClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const currentUser = useCurrentUser()\n  const resourceCache = useResourceCache()\n\n  return useMemo(() => {\n    const grantsStore =\n      resourceCache.get<GrantsStore>({\n        namespace: 'grantsStore',\n        dependencies: [client, currentUser],\n      }) || createGrantsStore({client, currentUser})\n\n    resourceCache.set({\n      namespace: 'grantsStore',\n      dependencies: [client, currentUser],\n      value: grantsStore,\n    })\n\n    return grantsStore\n  }, [client, currentUser, resourceCache])\n}\n\n/** @beta */\nexport function useHistoryStore(): HistoryStore {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const resourceCache = useResourceCache()\n\n  return useMemo(() => {\n    const historyStore =\n      resourceCache.get<HistoryStore>({\n        namespace: 'historyStore',\n        dependencies: [client],\n      }) || createHistoryStore({client})\n\n    resourceCache.set({\n      namespace: 'historyStore',\n      dependencies: [client],\n      value: historyStore,\n    })\n\n    return historyStore\n  }, [client, resourceCache])\n}\n\n/** @beta */\nexport function useDocumentPreviewStore(): DocumentPreviewStore {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const resourceCache = useResourceCache()\n\n  return useMemo(() => {\n    const documentPreviewStore =\n      resourceCache.get<DocumentPreviewStore>({\n        namespace: 'documentPreviewStore',\n        dependencies: [client],\n      }) || createDocumentPreviewStore({client})\n\n    resourceCache.set({\n      namespace: 'documentPreviewStore',\n      dependencies: [client],\n      value: documentPreviewStore,\n    })\n\n    return documentPreviewStore\n  }, [client, resourceCache])\n}\n\n/** @beta */\nexport function useDocumentStore(): DocumentStore {\n  const getClient = useSource().getClient\n  const schema = useSchema()\n  const templates = useTemplates()\n  const resourceCache = useResourceCache()\n  const historyStore = useHistoryStore()\n  const documentPreviewStore = useDocumentPreviewStore()\n\n  return useMemo(() => {\n    const documentStore =\n      resourceCache.get<DocumentStore>({\n        namespace: 'documentStore',\n        dependencies: [getClient, documentPreviewStore, historyStore, schema],\n      }) ||\n      createDocumentStore({\n        getClient,\n        documentPreviewStore,\n        historyStore,\n        initialValueTemplates: templates,\n        schema,\n      })\n\n    resourceCache.set({\n      namespace: 'documentStore',\n      dependencies: [getClient, documentPreviewStore, historyStore, schema],\n      value: documentStore,\n    })\n\n    return documentStore\n  }, [getClient, documentPreviewStore, historyStore, resourceCache, schema, templates])\n}\n\n/** @internal */\nexport function useConnectionStatusStore(): ConnectionStatusStore {\n  const {bifur} = useSource().__internal\n  const resourceCache = useResourceCache()\n\n  return useMemo(() => {\n    const connectionStatusStore =\n      resourceCache.get<ConnectionStatusStore>({\n        namespace: 'connectionStatusStore',\n        dependencies: [bifur],\n      }) || createConnectionStatusStore({bifur})\n\n    resourceCache.set({\n      namespace: 'connectionStatusStore',\n      dependencies: [bifur],\n      value: connectionStatusStore,\n    })\n\n    return connectionStatusStore\n  }, [bifur, resourceCache])\n}\n\n/** @beta */\nexport function usePresenceStore(): PresenceStore {\n  const {\n    __internal: {bifur},\n  } = useSource()\n  const resourceCache = useResourceCache()\n  const userStore = useUserStore()\n  const connectionStatusStore = useConnectionStatusStore()\n\n  return useMemo(() => {\n    const presenceStore =\n      resourceCache.get<PresenceStore>({\n        namespace: 'presenceStore',\n        dependencies: [bifur, connectionStatusStore, userStore],\n      }) || __tmp_wrap_presenceStore({bifur, connectionStatusStore, userStore})\n\n    resourceCache.set({\n      namespace: 'presenceStore',\n      dependencies: [bifur, connectionStatusStore, userStore],\n      value: presenceStore,\n    })\n\n    return presenceStore\n  }, [bifur, connectionStatusStore, resourceCache, userStore])\n}\n\n/** @beta */\nexport function useProjectStore(): ProjectStore {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const resourceCache = useResourceCache()\n\n  return useMemo(() => {\n    const projectStore =\n      resourceCache.get<ProjectStore>({\n        namespace: 'projectStore',\n        dependencies: [client],\n      }) || createProjectStore({client})\n\n    resourceCache.set({\n      namespace: 'projectStore',\n      dependencies: [client],\n      value: projectStore,\n    })\n\n    return projectStore\n  }, [client, resourceCache])\n}\n\n/** @internal */\nexport function useSettingsStore(): SettingsStore {\n  const resourceCache = useResourceCache()\n  const workspace = useWorkspace()\n\n  return useMemo(() => {\n    const settingsStore =\n      resourceCache.get<SettingsStore>({\n        dependencies: [workspace],\n        namespace: 'settingsStore',\n      }) || createSettingsStore()\n\n    resourceCache.set({\n      dependencies: [workspace],\n      namespace: 'settingsStore',\n      value: settingsStore,\n    })\n\n    return settingsStore\n  }, [resourceCache, workspace])\n}\n","import {Avatar, AvatarPosition, AvatarSize, AvatarStatus, Box, Text, Tooltip} from '@sanity/ui'\nimport React, {forwardRef, useState} from 'react'\nimport type {User} from '@sanity/types'\nimport {useUser} from '../store'\nimport {isRecord} from '../util'\nimport {useUserColor} from '../user-color'\n\n/** @beta */\nexport interface UserAvatarProps {\n  animateArrowFrom?: AvatarPosition\n  position?: AvatarPosition\n  size?: AvatarSize\n  status?: AvatarStatus\n  tone?: 'navbar'\n  user: User | string\n  withTooltip?: boolean\n}\n\nconst symbols = /[^\\p{Alpha}\\p{White_Space}]/gu\nconst whitespace = /\\p{White_Space}+/u\n\nconst LEGACY_TO_UI_AVATAR_SIZES: {[key: string]: AvatarSize | undefined} = {\n  small: 0,\n  medium: 1,\n  large: 2,\n}\n\nfunction nameToInitials(fullName: string) {\n  const namesArray = fullName.replace(symbols, '').split(whitespace)\n\n  if (namesArray.length === 1) {\n    return `${namesArray[0].charAt(0)}`.toUpperCase()\n  }\n\n  return `${namesArray[0].charAt(0)}${namesArray[namesArray.length - 1].charAt(0)}`\n}\n\n/** @beta */\nexport function UserAvatar(props: UserAvatarProps) {\n  const {user, ...restProps} = props\n\n  if (isRecord(user)) {\n    if (restProps.withTooltip) {\n      return <TooltipUserAvatar {...restProps} user={user as User} />\n    }\n\n    return <StaticUserAvatar {...restProps} user={user as User} />\n  }\n\n  return <UserAvatarLoader {...props} user={user as string} />\n}\n\nfunction TooltipUserAvatar(props: Omit<UserAvatarProps, 'user'> & {user: User}) {\n  const {\n    user: {displayName},\n  } = props\n\n  return (\n    <Tooltip\n      content={\n        <Box padding={2}>\n          <Text size={1}>{displayName}</Text>\n        </Box>\n      }\n      placement=\"top\"\n      portal\n    >\n      <div style={{display: 'inline-block'}}>\n        <StaticUserAvatar {...props} />\n      </div>\n    </Tooltip>\n  )\n}\n\nconst StaticUserAvatar = forwardRef(function StaticUserAvatar(\n  props: Omit<UserAvatarProps, 'user'> & {user: User},\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {user, animateArrowFrom, position, size, status, tone} = props\n  const [imageLoadError, setImageLoadError] = useState<null | Error>(null)\n  const userColor = useUserColor(user.id)\n  const imageUrl = imageLoadError ? undefined : user?.imageUrl\n\n  return (\n    <Avatar\n      animateArrowFrom={animateArrowFrom}\n      arrowPosition={position}\n      color={userColor.name}\n      data-legacy-tone={tone}\n      initials={user?.displayName && nameToInitials(user.displayName)}\n      src={imageUrl}\n      onImageLoadError={setImageLoadError}\n      ref={ref}\n      size={typeof size === 'string' ? LEGACY_TO_UI_AVATAR_SIZES[size] : size}\n      status={status}\n    />\n  )\n})\n\nfunction UserAvatarLoader({user, ...loadedProps}: Omit<UserAvatarProps, 'user'> & {user: string}) {\n  const [value] = useUser(user)\n\n  if (!value) {\n    // @todo How do we handle this?\n    return null\n  }\n\n  return <UserAvatar {...loadedProps} user={value} />\n}\n","import {SanityDocument} from '@sanity/types'\nimport {withPropsStream} from 'react-props-stream'\nimport {concat, Observable, of} from 'rxjs'\nimport {distinctUntilChanged, map, switchMap} from 'rxjs/operators'\nimport {DocumentStore} from '../store'\n\n/** @internal */\nexport const WithReferringDocuments = withPropsStream(\n  connect,\n  function _WithReferringDocuments({children, ...props}) {\n    return children(props)\n  }\n)\n\nfunction connect(\n  receivedProps$: Observable<{\n    children: (props: {\n      documentStore: DocumentStore\n      id: string\n      isLoading: boolean\n      referringDocuments: SanityDocument[]\n    }) => React.ReactElement\n    documentStore: DocumentStore\n    id: string\n  }>\n) {\n  return receivedProps$.pipe(\n    distinctUntilChanged((prev, next) => prev.id === next.id),\n    switchMap((receivedProps) =>\n      concat(\n        of({...receivedProps, referringDocuments: [], isLoading: true}),\n        receivedProps.documentStore\n          .listenQuery(\n            '*[references($docId)] [0...101]',\n            {docId: receivedProps.id},\n            {tag: 'with-referring-documents'}\n          )\n          .pipe(\n            map((docs: any[]) => ({\n              ...receivedProps,\n              referringDocuments: docs,\n              isLoading: false,\n            }))\n          )\n      )\n    )\n  )\n}\n","import {ActionHook} from './types'\n\nconst actionIds = new WeakMap<ActionHook<any, any>, string>()\n\nlet counter = 0\n\n/** @internal */\nexport function getHookId<T, K>(actionHook: ActionHook<T, K>): string {\n  const cachedId = actionIds.get(actionHook)\n\n  if (cachedId) return cachedId\n\n  const id = `${actionHook.name || (actionHook as any).displayName || '<anonymous>'}-${counter++}`\n\n  actionIds.set(actionHook, id)\n\n  return id\n}\n","import React, {memo, useEffect, useRef} from 'react'\nimport shallowEquals from 'shallow-equals'\n\nfunction useShallowCompareMemoize<T>(value: T): Array<T | undefined> {\n  const ref = useRef<T | undefined>(undefined)\n\n  if (!shallowEquals(value, ref.current)) {\n    ref.current = value\n  }\n\n  return [ref.current]\n}\n\nfunction useShallowCompareEffect(callback: React.EffectCallback, dependencies: any) {\n  useEffect(callback, useShallowCompareMemoize(dependencies))\n}\n\n/** @internal */\nexport const HookStateContainer = memo(\n  function HookStateContainer(props: any) {\n    const {hook, args, id, onNext, onReset, onRequestUpdate} = props\n\n    const hookState = hook({\n      ...args,\n      onComplete: () => {\n        onReset(id)\n      },\n    })\n\n    useShallowCompareEffect(() => {\n      onNext(id, hookState)\n      onRequestUpdate()\n      return () => {\n        onNext(id, null)\n        onRequestUpdate()\n      }\n    }, hookState)\n\n    return null\n  },\n  (prev, next) => prev.args === next.args\n)\n","const requestIdleCallbackShim: Window['requestIdleCallback'] = (callback) => {\n  const start = Date.now()\n\n  return setTimeout(() => {\n    callback({\n      didTimeout: false,\n      timeRemaining() {\n        return Math.max(0, Date.now() - start)\n      },\n    })\n  }, 1) as unknown as ReturnType<Window['requestIdleCallback']>\n}\n\nconst cancelIdleCallbackShim: Window['cancelIdleCallback'] = (handle: unknown) => {\n  return clearTimeout(handle as any)\n}\n\nconst _requestIdleCallback =\n  typeof requestIdleCallback === 'undefined' ? requestIdleCallbackShim : requestIdleCallback\nconst _cancelIdleCallback =\n  typeof cancelIdleCallback === 'undefined' ? cancelIdleCallbackShim : cancelIdleCallbackShim\n\nexport {_requestIdleCallback as requestIdleCallback}\nexport {_cancelIdleCallback as cancelIdleCallback}\n","import type {ThrottleSettings} from 'lodash'\nimport React, {useCallback, useMemo, useRef, useState} from 'react'\nimport {isNonNullable, useThrottledCallback} from '../../util'\nimport {getHookId} from './actionId'\nimport {HookStateContainer} from './HookStateContainer'\nimport {cancelIdleCallback, requestIdleCallback} from './requestIdleCallback'\nimport {ActionHook} from './types'\n\n/** @internal */\nexport interface GetHookCollectionStateProps<T, K> {\n  args: T\n  children: (props: {states: K[]}) => React.ReactNode\n  hooks: ActionHook<T, K>[]\n  onReset?: () => void\n}\n\nconst throttleOptions: ThrottleSettings = {trailing: true}\n\n/** @internal */\nexport function GetHookCollectionState<T, K>(props: GetHookCollectionStateProps<T, K>) {\n  const {hooks, args, children, onReset} = props\n\n  const statesRef = useRef<Record<string, {value: K}>>({})\n  const [tickId, setTick] = useState(0)\n\n  const [keys, setKeys] = useState<Record<string, number>>({})\n\n  const ricHandle = useRef<number | null>(null)\n\n  const handleRequestUpdate = useCallback(() => {\n    if (ricHandle.current) {\n      cancelIdleCallback(ricHandle.current)\n    }\n\n    ricHandle.current = requestIdleCallback(() => {\n      ricHandle.current = null\n\n      setTick((tick) => tick + 1)\n    })\n  }, [])\n\n  const handleRequestUpdateThrottled = useThrottledCallback(\n    handleRequestUpdate,\n    60,\n    throttleOptions\n  )\n\n  const handleNext = useCallback((id: any, hookState: any) => {\n    if (hookState === null) {\n      delete statesRef.current[id]\n    } else {\n      const current = statesRef.current[id]\n      statesRef.current[id] = {...current, value: hookState}\n    }\n  }, [])\n\n  const handleReset = useCallback(\n    (id: any) => {\n      setKeys((currentKeys) => ({...currentKeys, [id]: (currentKeys[id] || 0) + 1}))\n\n      if (onReset) {\n        onReset()\n      }\n    },\n    [onReset]\n  )\n\n  const hookIds = useMemo(() => hooks.map((hook) => getHookId(hook)), [hooks])\n\n  const states = useMemo(\n    () => hookIds.map((id) => statesRef.current[id]?.value).filter(isNonNullable),\n    [hookIds, tickId]\n  )\n\n  return (\n    <>\n      {hooks.map((hook) => {\n        const id = getHookId(hook)\n        const key = keys[id] || 0\n\n        return (\n          <HookStateContainer\n            key={`${id}-${key}`}\n            hook={hook}\n            id={id}\n            args={args}\n            onNext={handleNext}\n            onRequestUpdate={handleRequestUpdateThrottled}\n            onReset={handleReset}\n          />\n        )\n      })}\n\n      {children({states})}\n    </>\n  )\n}\n","import {CloseIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Card,\n  Container,\n  Flex,\n  focusFirstDescendant,\n  Popover,\n  PopoverProps,\n  ResponsiveWidthProps,\n  Text,\n} from '@sanity/ui'\nimport React, {HTMLProps, useEffect, useRef} from 'react'\n\n/** @internal */\nexport function PopoverDialog(\n  props: Omit<PopoverProps, 'content' | 'width'> &\n    Omit<HTMLProps<HTMLDivElement>, 'ref' | 'width'> & {\n      header?: React.ReactNode\n      onClose: () => void\n      width?: ResponsiveWidthProps['width']\n    }\n) {\n  const {children, header, onClose, width, ...restProps} = props\n  const containerRef = useRef<HTMLDivElement | null>(null)\n\n  useEffect(() => {\n    focusFirstDescendant(containerRef.current!)\n  }, [])\n\n  // Note: if you come here to attempt to add support for Escape to close and/or clickOutside to close, please read this first:\n  //  - Escape must work with nested dialogs/popover. So if you have an array inside here that opens its items in another a popover,\n  //    hitting escape should only close the topmost dialog\n  //  - clickOutside needs to work through portals. So if you have an array inside here that opens its items in a dialog/portal,\n  //    any clicks inside such dialogs or portals should not cause _this_ popover to close\n  return (\n    <Popover\n      {...restProps}\n      open\n      portal\n      padding={1}\n      content={\n        <Container width={width} ref={containerRef}>\n          <Flex direction=\"column\">\n            <Card padding={1} flex=\"none\">\n              <Flex align=\"center\">\n                <Box padding={2} flex={1}>\n                  <Text weight=\"semibold\">{header}</Text>\n                </Box>\n                <Box>\n                  <Button mode=\"bleed\" icon={CloseIcon} onClick={onClose} />\n                </Box>\n              </Flex>\n            </Card>\n            <Card flex={1} overflow=\"auto\">\n              {children}\n            </Card>\n          </Flex>\n        </Container>\n      }\n    />\n  )\n}\n","import {PreviewLayoutKey} from './types'\n\nexport const PREVIEW_MEDIA_SIZE: Record<PreviewLayoutKey, {width: number; height: number}> = {\n  block: {width: 33, height: 33},\n  blockImage: {width: 600, height: 400},\n  default: {width: 35, height: 35},\n  detail: {width: 75, height: 75},\n  inline: {width: 15, height: 15},\n  media: {width: 160, height: 160},\n}\n\nexport const PREVIEW_ICON_SIZE: Record<PreviewLayoutKey, number | undefined> = {\n  block: 31,\n  blockImage: 45,\n  default: 33,\n  detail: 45,\n  inline: 15,\n  media: 45,\n}\n","import {rem} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {PREVIEW_ICON_SIZE} from '../constants'\nimport {PreviewLayoutKey, PreviewMediaDimensions} from '../types'\n\nexport const MediaWrapper = styled.span<{\n  $dimensions: PreviewMediaDimensions\n  $layout: PreviewLayoutKey\n  $radius: number\n  $responsive: boolean\n}>((props) => {\n  const {$dimensions, $layout, $radius, $responsive} = props\n  const width = $dimensions.width || 0\n  const height = $dimensions.width || 0\n  const iconSize = PREVIEW_ICON_SIZE[$layout]\n\n  return css`\n    position: relative;\n    width: ${$responsive ? '100%' : rem(width)};\n    height: ${$responsive ? '100%' : rem(height)};\n    min-width: ${$responsive ? undefined : rem(width)};\n    border-radius: ${({theme}) => rem(theme.sanity.radius[$radius])};\n    display: flex;\n    overflow: hidden;\n    align-items: center;\n    justify-content: center;\n\n    & img {\n      position: absolute;\n      left: 0;\n      top: 0;\n      width: 100%;\n      height: 100%;\n      object-fit: contain;\n      border-radius: inherit;\n    }\n\n    & svg {\n      display: block;\n      font-size: calc(21 / 16 * 1em);\n    }\n\n    & [data-sanity-icon] {\n      display: block;\n      font-size: calc(${iconSize} / 16 * 1em);\n    }\n\n    /*\n      NOTE on why we can’t use the \":after\" pseudo-element:\n      The thing is we only want the shadow when then <MediaWrapper> contains\n      something else than <svg> – icons should not have the shadow.\n      This is why we use the \"*:not(svg) + span\" selector to target only that\n      situation to render the shadow.\n    */\n    & *:not(svg) + span {\n      display: block;\n      position: absolute;\n      left: 0;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      box-shadow: inset 0 0 0 1px var(--card-fg-color);\n      opacity: 0.2;\n      border-radius: inherit;\n    }\n  `\n})\n\nMediaWrapper.displayName = 'MediaWrapper'\n","import {Text} from '@sanity/ui'\nimport React, {createElement, isValidElement} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {PreviewMediaDimensions, PreviewLayoutKey, PreviewProps} from '../types'\nimport {MediaWrapper} from './Media.styled'\n\nexport interface MediaProps {\n  border?: boolean\n  dimensions: PreviewMediaDimensions\n  layout: PreviewLayoutKey\n  media: PreviewProps['media']\n  radius?: number\n  responsive?: boolean\n  styles?: {\n    media?: string\n    mediaString?: string\n  }\n}\n\nexport function Media(props: MediaProps) {\n  const {border = true, dimensions, layout, media, radius = 1, responsive = false, styles} = props\n\n  return (\n    <MediaWrapper\n      $dimensions={dimensions}\n      $layout={layout}\n      $radius={radius}\n      $responsive={responsive}\n      className={styles?.media}\n      data-testid=\"Media\"\n    >\n      {renderMedia({dimensions, layout, media})}\n      {border && <span />}\n    </MediaWrapper>\n  )\n}\n\nfunction renderMedia(props: {\n  dimensions: PreviewMediaDimensions\n  layout: PreviewLayoutKey\n  media: PreviewProps['media']\n  styles?: {\n    media?: string\n    mediaString?: string\n  }\n}): React.ReactNode {\n  const {dimensions, layout, media, styles} = props\n\n  if (isValidElementType(media)) {\n    return createElement(media, {dimensions, layout})\n  }\n\n  if (typeof media === 'string') {\n    return (\n      <Text as=\"span\" className={styles?.mediaString}>\n        {media}\n      </Text>\n    )\n  }\n\n  if (isValidElement(media)) {\n    return media\n  }\n\n  return null\n}\n","import React, {createElement} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {PreviewLayoutKey, PreviewMediaDimensions} from './types'\n\nexport function renderPreviewMedia<Layout = PreviewLayoutKey>(\n  value: React.ReactNode | React.ElementType<{layout: Layout; dimensions: PreviewMediaDimensions}>,\n  layout: Layout,\n  dimensions: PreviewMediaDimensions\n): React.ReactNode {\n  if (isValidElementType(value)) {\n    return createElement(value, {layout, dimensions})\n  }\n\n  if (typeof value === 'string') {\n    return <div>{value}</div>\n  }\n\n  // @todo: find out why `value` isn't infered as `React.ReactNode` here\n  return value as any\n}\n\nexport function renderPreviewNode<Layout = PreviewLayoutKey>(\n  value: React.ReactNode | React.ElementType<{layout: Layout}>,\n  layout: Layout,\n  fallbackNode?: React.ReactNode\n): React.ReactNode {\n  if (typeof value === 'string') {\n    return value\n  }\n\n  if (isValidElementType(value)) {\n    return createElement(value, {layout})\n  }\n\n  // @todo: find out why `value` isn't infered as `React.ReactNode` here\n  return (value as any) || fallbackNode\n}\n","import React from 'react'\nimport {Box, Flex, Stack, Text, Skeleton, TextSkeleton, rem} from '@sanity/ui'\nimport classNames from 'classnames'\nimport styled from 'styled-components'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {renderPreviewNode} from '../helpers'\n\n/** @beta */\nexport interface DefaultPreviewProps extends Omit<PreviewProps<'default'>, 'renderDefault'> {\n  styles?: {\n    root?: string\n    placeholder?: string\n    media?: string\n    heading?: string\n    title?: string\n    subtitle?: string\n    hasSubtitle?: string\n    mediaString?: string\n    status?: string\n    children?: string\n  }\n}\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.default,\n  aspect: 1,\n  fit: 'crop',\n  dpr: getDevicePixelRatio(),\n}\n\nconst Root = styled(Flex)`\n  height: ${rem(PREVIEW_MEDIA_SIZE.default.height)};\n`\n\nconst TitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1})`\n  max-width: ${rem(160)};\n  width: 80%;\n`\n\nconst SubtitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1, size: 1})`\n  max-width: ${rem(120)};\n  width: 60%;\n`\n\n/** @beta */\nexport function DefaultPreview(props: DefaultPreviewProps) {\n  const {title, subtitle, media, status, isPlaceholder, children, styles} = props\n  const rootClassName = classNames(styles?.root, Boolean(subtitle) && styles?.hasSubtitle)\n\n  const statusNode = status && (\n    <Box\n      className={styles?.status}\n      data-testid=\"default-preview__status\"\n      paddingLeft={3}\n      paddingRight={1}\n    >\n      {renderPreviewNode(status, 'default')}\n    </Box>\n  )\n\n  if (isPlaceholder) {\n    return (\n      <Root align=\"center\" className={styles?.placeholder} data-testid=\"default-preview\">\n        {media !== false && (\n          <Skeleton animated marginRight={2} radius={2} style={PREVIEW_MEDIA_SIZE.default} />\n        )}\n\n        <Stack\n          data-testid=\"default-preview__heading\"\n          flex={1}\n          paddingLeft={media === false ? 1 : 2}\n          paddingRight={status ? 0 : 1}\n          space={2}\n        >\n          <TitleSkeleton />\n          <SubtitleSkeleton />\n        </Stack>\n\n        {statusNode}\n      </Root>\n    )\n  }\n\n  return (\n    <Root align=\"center\" className={rootClassName} data-testid=\"default-preview\">\n      {media !== false && media !== undefined && (\n        <Media\n          dimensions={DEFAULT_MEDIA_DIMENSIONS}\n          layout=\"default\"\n          media={media as any}\n          styles={styles}\n        />\n      )}\n\n      <Stack\n        className={styles?.heading}\n        data-testid=\"default-preview__header\"\n        flex={1}\n        paddingLeft={media ? 2 : 1}\n        paddingRight={status ? 0 : 1}\n        space={2}\n      >\n        <Text className={styles?.title} style={{color: 'inherit'}} textOverflow=\"ellipsis\">\n          {title && renderPreviewNode(title, 'default')}\n          {!title && <span style={{color: 'var(--card-muted-fg-color)'}}>Untitled</span>}\n        </Text>\n\n        {subtitle && (\n          <Text muted size={1} textOverflow=\"ellipsis\" className={styles?.subtitle}>\n            {renderPreviewNode(subtitle, 'default')}\n          </Text>\n        )}\n\n        {children && <div className={styles?.children}>{children}</div>}\n      </Stack>\n\n      {statusNode}\n    </Root>\n  )\n}\n","import {Box, Flex, rem, Skeleton, Text, TextSkeleton} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\n\nexport const RootFlex = styled(Flex).attrs({align: 'center'})`\n  height: ${rem(PREVIEW_MEDIA_SIZE.detail.height)};\n`\n\nexport const StatusBox = styled(Box)`\n  white-space: nowrap;\n`\n\nexport const MediaSkeleton = styled(Skeleton).attrs({animated: true, radius: 2})`\n  width: ${rem(PREVIEW_MEDIA_SIZE.detail.width)};\n  height: ${rem(PREVIEW_MEDIA_SIZE.detail.height)};\n`\n\nexport const TitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1})`\n  max-width: ${rem(160)}; /* 80% of 200px */\n  width: 80%;\n`\n\nexport const SubtitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1, size: 1})`\n  max-width: ${rem(120)}; /* 60% of 200px */\n  width: 60%;\n`\n\nexport const DescriptionSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1, size: 1})`\n  max-width: ${rem(180)}; /* 90% of 200px */\n  width: 90%;\n`\n\nexport const DescriptionText = styled(Text)(({theme}) => {\n  const {fonts} = theme.sanity\n  const textSize1 = fonts.text.sizes[1]\n  const maxLines = 2\n  const maxHeight = textSize1.lineHeight * maxLines\n\n  return css`\n    & > span {\n      max-height: ${rem(maxHeight)};\n\n      /* Multi-line text overflow */\n      display: -webkit-box;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      -webkit-line-clamp: ${maxLines};\n      -webkit-box-orient: vertical;\n    }\n  `\n})\n","import React from 'react'\nimport {Box, Flex, Stack, Text} from '@sanity/ui'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {renderPreviewNode} from '../helpers'\nimport {\n  DescriptionSkeleton,\n  DescriptionText,\n  MediaSkeleton,\n  RootFlex,\n  StatusBox,\n  SubtitleSkeleton,\n  TitleSkeleton,\n} from './DetailPreview.styled'\n\n/** @beta */\nexport type DetailPreviewProps = PreviewProps<'detail'>\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.detail,\n  fit: 'crop',\n  aspect: 1,\n  dpr: getDevicePixelRatio(),\n}\n\n/** @beta */\nexport function DetailPreview(props: DetailPreviewProps) {\n  const {\n    title,\n    subtitle,\n    description,\n    mediaDimensions = DEFAULT_MEDIA_DIMENSIONS,\n    media,\n    status,\n    children,\n    isPlaceholder,\n  } = props\n\n  const statusNode = status && (\n    <StatusBox marginLeft={3} paddingRight={1}>\n      {renderPreviewNode(status, 'detail')}\n    </StatusBox>\n  )\n\n  if (isPlaceholder) {\n    return (\n      <RootFlex data-testid=\"detail-preview\">\n        {media !== false && <MediaSkeleton data-testid=\"detail-preview__media\" />}\n\n        <Box flex={1} paddingLeft={media === false ? 1 : 2}>\n          <Flex align=\"center\" data-testid=\"detail-preview__header\">\n            <Stack flex={1} space={2}>\n              <TitleSkeleton />\n              <SubtitleSkeleton />\n            </Stack>\n\n            {statusNode}\n          </Flex>\n\n          {description && (\n            <Box marginTop={3}>\n              <DescriptionSkeleton />\n            </Box>\n          )}\n        </Box>\n      </RootFlex>\n    )\n  }\n\n  return (\n    <RootFlex data-testid=\"detail-preview\">\n      {media !== false && (\n        <Media dimensions={mediaDimensions} layout=\"detail\" media={media as any} />\n      )}\n\n      <Box flex={1} paddingLeft={media === false ? 1 : 2}>\n        <Flex align=\"center\" data-testid=\"detail-preview__header\">\n          <Stack flex={1} space={2}>\n            <Text textOverflow=\"ellipsis\" style={{color: 'inherit'}}>\n              {title && renderPreviewNode(title, 'detail')}\n              {!title && <>Untitled</>}\n            </Text>\n\n            {subtitle && (\n              <Text muted size={1} textOverflow=\"ellipsis\">\n                {renderPreviewNode(subtitle, 'detail')}\n              </Text>\n            )}\n          </Stack>\n\n          {statusNode}\n        </Flex>\n\n        {description && (\n          <Box marginTop={3}>\n            <DescriptionText muted size={1}>\n              {renderPreviewNode(description, 'detail')}\n            </DescriptionText>\n          </Box>\n        )}\n      </Box>\n\n      {children}\n    </RootFlex>\n  )\n}\n","import {hues} from '@sanity/color'\nimport {Theme} from '@sanity/ui'\nimport React from 'react'\nimport styled, {css} from 'styled-components'\n\nconst SIZE = 43\nconst STROKE_WIDTH = 3\n\nconst Root = styled.svg`\n  width: ${SIZE}px;\n  height: ${SIZE}px;\n  transform: rotate(-90deg);\n`\n\nconst BgCircle = styled.circle(({theme}: {theme: Theme}) => {\n  const {color} = theme.sanity\n\n  return css`\n    fill: none;\n    stroke: ${hues.gray[color.dark ? 900 : 100].hex};\n    stroke-width: ${STROKE_WIDTH}px;\n  `\n})\n\nconst ProgressCircle = styled.circle(({theme}: {theme: Theme}) => {\n  const {color} = theme.sanity\n\n  return css`\n    fill: none;\n    stroke: ${hues.blue[color.dark ? 400 : 500].hex};\n    stroke-width: ${STROKE_WIDTH}px;\n    transition: stroke-dashoffset 75ms;\n  `\n})\n\n/** @beta */\nexport function CircularProgress(props: {\n  /** Percentage */\n  value: number\n}) {\n  const {value: valueProp} = props\n  const value = Math.min(Math.max(valueProp, 0), 100)\n  const radius = SIZE / 2 - STROKE_WIDTH / 2\n  const circ = 2 * Math.PI * radius\n  const offset = ((100 - value) / 100) * circ\n  const viewBox = `${SIZE / 2} ${SIZE / 2} ${SIZE} ${SIZE}`\n\n  return (\n    <Root viewBox={viewBox}>\n      <BgCircle cx={SIZE} cy={SIZE} r={radius} />\n      <ProgressCircle\n        cx={SIZE}\n        cy={SIZE}\n        r={radius}\n        style={{\n          strokeDasharray: circ,\n          strokeDashoffset: `${offset}px`,\n        }}\n      />\n    </Root>\n  )\n}\n","import {hues} from '@sanity/color'\nimport {Theme, Card} from '@sanity/ui'\nimport React from 'react'\nimport styled, {css} from 'styled-components'\n\nconst STROKE_WIDTH = 0.5\n\nconst Root = styled(Card)`\n  overflow: hidden;\n`\n\nconst Bar = styled(Card)(({theme}: {theme: Theme}) => {\n  const {color} = theme.sanity\n\n  return css`\n    height: ${STROKE_WIDTH}rem;\n    background: ${hues.blue[color.dark ? 400 : 500].hex};\n    transition: transform 75ms;\n  `\n})\n\n/** @beta */\nexport function LinearProgress(props: {\n  /** Percentage */\n  value: number\n}) {\n  const {value} = props\n\n  return (\n    <Root radius={5}>\n      <Bar radius={5} style={{transform: `translate3d(${value - 100}%, 0, 0)`}} />\n    </Root>\n  )\n}\n","import {Box, Flex, rem, Skeleton, Stack} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const RootBox = styled(Box)`\n  position: relative;\n`\n\nexport const MediaFlex = styled(Flex).attrs({align: 'center', justify: 'center'})`\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n`\n\nexport const MediaSkeleton = styled(Skeleton).attrs({animated: true, radius: 2})`\n  width: 100%;\n  height: 100%;\n`\n\nexport const ProgressFlex = styled(Flex).attrs({align: 'center', justify: 'center'})`\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n\n  &:before {\n    background-color: var(--card-bg-color);\n    opacity: 0.75;\n    content: '';\n    display: block;\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n  }\n\n  > svg {\n    position: relative;\n    z-index: 2;\n  }\n`\n\nexport const TooltipContentStack = styled(Stack).attrs({padding: 2, space: 2})`\n  max-width: ${rem(200)};\n`\n","import React, {useMemo} from 'react'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {Text, Tooltip} from '@sanity/ui'\nimport {CircularProgress} from '../../progress'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {renderPreviewNode} from '../helpers'\nimport {\n  MediaSkeleton,\n  MediaFlex,\n  ProgressFlex,\n  RootBox,\n  TooltipContentStack,\n} from './MediaPreview.styled'\n\n/** @beta */\nexport type MediaPreviewProps = Omit<PreviewProps<'media'>, 'renderDefault'>\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.media,\n  aspect: 1,\n  fit: 'crop',\n  dpr: getDevicePixelRatio(),\n}\n\n/** @beta */\nexport function MediaPreview(props: MediaPreviewProps) {\n  const {\n    media,\n    mediaDimensions = DEFAULT_MEDIA_DIMENSIONS,\n    children,\n    isPlaceholder,\n    progress = -1,\n    subtitle,\n    title,\n    withBorder = true,\n    withRadius = true,\n  } = props\n\n  const aspect = mediaDimensions.aspect || 1\n\n  const STYLES_PADDER = useMemo(() => ({paddingBottom: `${100 / aspect}%`}), [aspect])\n\n  const tooltipContent = useMemo(() => {\n    if (!title || !subtitle) {\n      return null\n    }\n\n    return (\n      <TooltipContentStack>\n        {title && (\n          <Text align=\"center\" size={1} weight=\"semibold\">\n            {renderPreviewNode(title, 'media')}\n          </Text>\n        )}\n\n        {subtitle && (\n          <Text align=\"center\" muted size={1}>\n            {renderPreviewNode(subtitle, 'media')}\n          </Text>\n        )}\n      </TooltipContentStack>\n    )\n  }, [subtitle, title])\n\n  return (\n    <RootBox data-testid=\"media-preview\" overflow=\"hidden\" flex={1}>\n      <div style={STYLES_PADDER} />\n\n      <Tooltip content={tooltipContent} disabled={!tooltipContent} placement=\"top\" portal>\n        <MediaFlex>\n          {isPlaceholder ? (\n            <MediaSkeleton />\n          ) : (\n            <Media\n              border={withBorder}\n              dimensions={mediaDimensions}\n              layout=\"media\"\n              media={media as any}\n              radius={withRadius ? 1 : 0}\n              responsive\n            />\n          )}\n\n          {typeof progress === 'number' && progress > -1 && (\n            <ProgressFlex>\n              <CircularProgress value={progress} />\n            </ProgressFlex>\n          )}\n        </MediaFlex>\n      </Tooltip>\n\n      {children}\n    </RootBox>\n  )\n}\n","import {Box, Card, Flex, rem} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\n\nexport const HeaderFlex = styled(Flex).attrs({align: 'center'})`\n  box-shadow: 0 0 0 1px var(--card-border-color);\n  height: ${rem(PREVIEW_MEDIA_SIZE.block.height)};\n  white-space: nowrap;\n  position: relative;\n  z-index: 1;\n`\n\nexport const MediaCard = styled(Card)<{$ratio: number}>`\n  position: relative;\n  padding-bottom: ${({$ratio}) => $ratio}%;\n\n  & > span {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n`\n\nexport const RootBox = styled(Box).attrs({overflow: 'hidden'})`\n  border-radius: ${({theme}) => theme.sanity.radius[1]}px;\n`\n","import {Box, Flex, Stack, Text} from '@sanity/ui'\nimport React from 'react'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {renderPreviewNode} from '../helpers'\nimport {HeaderFlex, MediaCard, RootBox} from './BlockImagePreview.styled'\n\n/** @beta */\nexport type BlockImagePreviewProps = Omit<PreviewProps<'blockImage'>, 'renderDefault'>\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.blockImage,\n  fit: 'fillmax',\n  dpr: getDevicePixelRatio(),\n}\n\nconst getRatio = (dimensions: PreviewMediaDimensions) => {\n  const {height, width} = dimensions\n\n  if (!height || !width) {\n    return 1\n  }\n\n  return (height / width) * 100\n}\n\n/** @beta */\nexport function BlockImagePreview(props: BlockImagePreviewProps) {\n  const {\n    actions,\n    title,\n    subtitle,\n    description,\n    fallbackTitle = 'Untitled',\n    mediaDimensions = DEFAULT_MEDIA_DIMENSIONS,\n    media,\n    children,\n    status,\n  } = props\n\n  return (\n    <RootBox>\n      <Stack>\n        <HeaderFlex paddingLeft={2} paddingRight={1} paddingY={1}>\n          <Stack flex={1} space={2}>\n            {(title || fallbackTitle) && (\n              <Text size={1} textOverflow=\"ellipsis\" weight=\"semibold\">\n                {title ? renderPreviewNode(title as any, 'block') : fallbackTitle}\n              </Text>\n            )}\n\n            {subtitle && (\n              <Text muted size={1} textOverflow=\"ellipsis\">\n                {renderPreviewNode(subtitle as any, 'block')}\n              </Text>\n            )}\n          </Stack>\n\n          <Flex gap={1} paddingLeft={1}>\n            {status && (\n              <Box paddingX={2} paddingY={3}>\n                {renderPreviewNode(status as any, 'block')}\n              </Box>\n            )}\n\n            {actions as any}\n          </Flex>\n        </HeaderFlex>\n\n        <MediaCard\n          $ratio={getRatio(mediaDimensions)}\n          __unstable_checkered\n          display=\"flex\"\n          sizing=\"border\"\n          tone=\"inherit\"\n        >\n          <Media\n            border={false}\n            dimensions={mediaDimensions}\n            layout=\"blockImage\"\n            media={media as any}\n            radius={0}\n            responsive\n          />\n        </MediaCard>\n      </Stack>\n\n      {description && (\n        <Box paddingX={2} paddingY={3}>\n          <Text muted size={1}>\n            {renderPreviewNode(description as any, 'block')}\n          </Text>\n        </Box>\n      )}\n\n      {children && <div>{children}</div>}\n    </RootBox>\n  )\n}\n","import {Box, Flex, rem, Stack, Text} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {renderPreviewNode} from '../helpers'\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.block,\n  aspect: 1,\n  fit: 'crop',\n  dpr: getDevicePixelRatio(),\n}\n\nconst HeaderFlex = styled(Flex).attrs({align: 'center'})`\n  min-height: ${rem(PREVIEW_MEDIA_SIZE.block.height)};\n`\n\n/** @beta */\nexport function BlockPreview(props: Omit<PreviewProps<'block'>, 'renderDefault'>) {\n  const {\n    actions,\n    title,\n    subtitle,\n    description,\n    mediaDimensions = DEFAULT_MEDIA_DIMENSIONS,\n    media,\n    status,\n    children,\n  } = props\n\n  return (\n    <Stack data-testid=\"block-preview\" space={1}>\n      <HeaderFlex data-testid=\"block-preview__header\">\n        {media && <Media dimensions={mediaDimensions} layout=\"block\" media={media as any} />}\n\n        <Box flex={1} paddingLeft={media ? 2 : 1}>\n          <Text size={1} textOverflow=\"ellipsis\" weight=\"semibold\">\n            {title ? renderPreviewNode(title, 'block') : 'Untitled'}\n          </Text>\n\n          {subtitle && (\n            <Box marginTop={2}>\n              <Text muted size={1} textOverflow=\"ellipsis\">\n                {renderPreviewNode(subtitle, 'block')}\n              </Text>\n            </Box>\n          )}\n\n          {description && (\n            <Box marginTop={3}>\n              <Text muted size={1} textOverflow=\"ellipsis\">\n                {renderPreviewNode(description, 'block')}\n              </Text>\n            </Box>\n          )}\n        </Box>\n\n        <Flex gap={1} paddingLeft={1}>\n          {status && (\n            <Box paddingX={2} paddingY={3}>\n              {renderPreviewNode(status, 'block')}\n            </Box>\n          )}\n\n          {actions as any}\n        </Flex>\n      </HeaderFlex>\n\n      {children && <div data-testid=\"block-preview__children\">{children}</div>}\n    </Stack>\n  )\n}\n","import {rem, Text, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const RootSpan = styled.span`\n  display: inline-flex;\n  align-items: center;\n  vertical-align: top;\n  height: calc(1em - 1px);\n  max-width: 100%;\n`\n\nexport const MediaSpan = styled.span`\n  position: relative;\n  display: inline-block;\n  width: calc(1em - 1px);\n  height: calc(1em - 1px);\n  min-width: calc(1em - 1px);\n\n  & img {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    border-radius: ${({theme}) => rem(theme.sanity.radius[1])};\n  }\n\n  & img + span {\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    box-shadow: inset 0 0 0 1px var(--card-fg-color);\n    opacity: 0.2;\n    border-radius: ${({theme}) => rem(theme.sanity.radius[1])};\n  }\n\n  & svg {\n    display: block;\n    font-size: calc(14 / 16 * 1em);\n    margin: 1px 0;\n\n    &[data-sanity-icon] {\n      font-size: calc(18 / 16 * 1em);\n      margin: calc(1px + (2 / 18 * -1em)) 0;\n    }\n  }\n`\n\nexport const TextSpan = styled(Text).attrs({forwardedAs: 'span'})(({theme}: {theme: Theme}) => {\n  const textFont = theme.sanity.fonts.text\n  const textSize = textFont.sizes[1]\n\n  return css`\n    font-size: calc(${textSize.fontSize} / 16 * 1em);\n    font-weight: ${textFont.weights.medium};\n    box-sizing: border-box;\n    display: inline-block;\n    vertical-align: top;\n    line-height: ${textSize.lineHeight / textSize.fontSize};\n    padding-left: 0.5em;\n    padding-right: calc(0.5em - 2px);\n    min-width: 0;\n\n    & > span {\n      display: block;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n  `\n})\n","import React from 'react'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {renderPreviewMedia, renderPreviewNode} from '../helpers'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {RootSpan, MediaSpan, TextSpan} from './InlinePreview.styled'\n\n/** @beta */\nexport type InlinePreviewProps = Omit<PreviewProps<'inline'>, 'renderDefault'>\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.inline,\n  fit: 'crop',\n  aspect: 1,\n  dpr: getDevicePixelRatio(),\n}\n\n/** @beta */\nexport function InlinePreview(props: InlinePreviewProps) {\n  const {\n    title,\n    fallbackTitle = 'Untitled',\n    media,\n    mediaDimensions = DEFAULT_MEDIA_DIMENSIONS,\n  } = props\n\n  return (\n    <RootSpan data-testid=\"inline-preview\">\n      {media && (\n        <MediaSpan data-testid=\"inline-preview-media\">\n          {renderPreviewMedia(media, 'inline', mediaDimensions)}\n          <span />\n        </MediaSpan>\n      )}\n\n      <TextSpan data-testid=\"inline-preview-title\" size={1}>\n        {renderPreviewNode(title, 'inline', fallbackTitle)}\n      </TextSpan>\n    </RootSpan>\n  )\n}\n","import React, {createElement, isValidElement} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {Box, Flex, rem, Stack, Text, TextSkeleton} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {PreviewMediaDimensions} from '../types'\nimport {Media, MediaProps} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\n\n/** @beta */\nexport interface TemplatePreviewProps {\n  description?: React.ReactNode\n  isPlaceholder?: boolean\n  media?: MediaProps['media']\n  mediaDimensions?: PreviewMediaDimensions\n  subtitle?: React.ElementType<{layout: 'default'}> | React.ReactNode\n  title?: React.ElementType<{layout: 'default'}> | React.ReactNode\n}\n\nconst DEFAULT_MEDIA_DIMENSION: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.default,\n  aspect: 1,\n  fit: 'crop',\n  dpr: getDevicePixelRatio(),\n}\n\nconst Root = styled(Box)`\n  height: 100%;\n\n  a {\n    color: currentColor;\n    text-decoration: none;\n  }\n\n  svg[data-sanity-icon] {\n    margin: 0;\n  }\n`\n\nconst HeaderFlex = styled(Flex).attrs({align: 'center'})`\n  height: ${rem(PREVIEW_MEDIA_SIZE.default.height)};\n`\n\nconst TitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1})`\n  max-width: ${rem(160)};\n  width: 80%;\n`\n\nconst SubtitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1, size: 1})`\n  max-width: ${rem(120)};\n  width: 60%;\n`\n\n/** @beta */\nexport function TemplatePreview(props: TemplatePreviewProps) {\n  const {\n    description,\n    isPlaceholder,\n    media,\n    mediaDimensions = DEFAULT_MEDIA_DIMENSION,\n    subtitle,\n    title = 'Untitled',\n  } = props\n\n  if (isPlaceholder) {\n    return (\n      <Root>\n        <HeaderFlex>\n          <Stack flex={1} space={2}>\n            <TitleSkeleton />\n            <SubtitleSkeleton />\n          </Stack>\n        </HeaderFlex>\n      </Root>\n    )\n  }\n\n  return (\n    <Root>\n      <HeaderFlex>\n        <Stack flex={1} space={2}>\n          {isValidElementType(title) && (\n            <Text textOverflow=\"ellipsis\">{createElement(title, {layout: 'default'})}</Text>\n          )}\n          {isValidElement(title) && <Text textOverflow=\"ellipsis\">{title}</Text>}\n\n          {isValidElementType(subtitle) && (\n            <Text muted size={1} textOverflow=\"ellipsis\">\n              {createElement(subtitle, {layout: 'default'})}\n            </Text>\n          )}\n          {isValidElement(subtitle) && (\n            <Text muted size={1} textOverflow=\"ellipsis\">\n              {subtitle}\n            </Text>\n          )}\n        </Stack>\n\n        {media && (\n          <Flex align=\"flex-start\" paddingLeft={2}>\n            <Media dimensions={mediaDimensions} layout=\"default\" media={media} />\n          </Flex>\n        )}\n      </HeaderFlex>\n\n      {description && (\n        <Box marginTop={3}>\n          <Text muted size={1} style={{whiteSpace: 'break-spaces'}}>\n            {description}\n          </Text>\n        </Box>\n      )}\n    </Root>\n  )\n}\n","import {useCallback, useEffect, useState} from 'react'\nimport {RovingFocusProps} from './types'\n\nconst MUTATION_ATTRIBUTE_FILTER = ['aria-hidden', 'disabled', 'href']\n\nconst FOCUSABLE =\n  'a[href], button, input, textarea, select, details, [tabindex]:not([tabindex=\"-1\"])'\n\nfunction getFocusableElements(element: HTMLElement) {\n  return [...(element.querySelectorAll(FOCUSABLE) as any)].filter(\n    (el) => !el.hasAttribute('disabled') && el.getAttribute('aria-hidden') !== 'true'\n  ) as HTMLElement[]\n}\n\n/**\n * This hook handles focus with the keyboard arrows.\n *\n * @see {@link https://a11y-solutions.stevenwoodson.com/solutions/focus/roving-focus/ | Roving focus definition}\n *\n * @example\n * ```tsx\n * function MyComponent() {\n *   const [rootElement, setRootElement] = setRootElement(null)\n *\n *   useRovingFocus({\n *     rootElement: rootElement,\n *   })\n *\n *   return (\n *     <div ref={setRootElement}>\n *       <button>Button</button>\n *       <button>Button</button>\n *       <button>Button</button>\n *     </div>\n *   )\n * }\n * ```\n *\n * @beta\n */\nexport function useRovingFocus(props: RovingFocusProps): undefined {\n  const {\n    direction = 'horizontal',\n    initialFocus,\n    loop = true,\n    navigation = ['arrows'],\n    pause = false,\n    rootElement,\n  } = props\n  const [focusedIndex, setFocusedIndex] = useState<number>(-1)\n  const [focusableElements, setFocusableElements] = useState<HTMLElement[]>([])\n\n  const focusableLen = focusableElements.length\n  const lastFocusableIndex = focusableLen - 1\n\n  /**\n   * Determine what keys to listen to depending on direction\n   */\n  const nextKey = direction === 'horizontal' ? 'ArrowRight' : 'ArrowDown'\n  const prevKey = direction === 'horizontal' ? 'ArrowLeft' : 'ArrowUp'\n\n  /**\n   * Set focusable elements in state\n   */\n  const handleSetElements = useCallback(() => {\n    if (rootElement) {\n      const els = getFocusableElements(rootElement)\n\n      setFocusableElements(els)\n    }\n  }, [rootElement])\n\n  /**\n   * Set focused index\n   */\n  const handleFocus = useCallback((index: number) => {\n    setFocusedIndex(index)\n  }, [])\n\n  /**\n   * Handle increment/decrement of focusedIndex\n   */\n  const handleKeyDown = useCallback(\n    (event: any) => {\n      if (pause) {\n        return\n      }\n\n      const focusPrev = () => {\n        event.preventDefault()\n        setFocusedIndex((prevIndex) => {\n          const next = (prevIndex + lastFocusableIndex) % focusableLen\n\n          if (!loop && next === lastFocusableIndex) {\n            return prevIndex\n          }\n\n          return next\n        })\n      }\n\n      const focusNext = () => {\n        event.preventDefault()\n        setFocusedIndex((prevIndex) => {\n          const next = (prevIndex + 1) % focusableLen\n\n          if (!loop && next === 0) {\n            return prevIndex\n          }\n\n          return next\n        })\n      }\n\n      if (event.key === 'Tab' && navigation.includes('tab')) {\n        if (event.shiftKey) {\n          focusPrev()\n        } else {\n          focusNext()\n        }\n      }\n\n      if (navigation.includes('arrows')) {\n        if (event.key === prevKey) {\n          focusPrev()\n        }\n\n        if (event.key === nextKey) {\n          focusNext()\n        }\n      }\n    },\n    [pause, prevKey, navigation, nextKey, lastFocusableIndex, focusableLen, loop]\n  )\n\n  /**\n   * Set focusable elements on mount\n   */\n  useEffect(() => {\n    handleSetElements()\n  }, [handleSetElements, initialFocus, direction])\n\n  /**\n   * Listen to DOM mutations to update focusableElements with latest state\n   */\n  useEffect(() => {\n    const mo = new MutationObserver(handleSetElements)\n\n    if (rootElement) {\n      mo.observe(rootElement, {\n        childList: true,\n        subtree: true,\n        attributeFilter: MUTATION_ATTRIBUTE_FILTER,\n      })\n    }\n\n    return () => {\n      mo.disconnect()\n    }\n  }, [focusableElements, handleSetElements, rootElement])\n\n  /**\n   * Set focus on elements in focusableElements depending on focusedIndex\n   */\n  useEffect(() => {\n    focusableElements.forEach((el, index) => {\n      if (index === focusedIndex) {\n        el.setAttribute('tabIndex', '0')\n        el.setAttribute('aria-selected', 'true')\n        el.focus()\n        el.onfocus = () => handleFocus(index)\n        el.onblur = () => handleFocus(-1)\n      } else {\n        el.setAttribute('tabIndex', '-1')\n        el.setAttribute('aria-selected', 'false')\n        el.onfocus = () => handleFocus(index)\n      }\n    })\n\n    if (focusedIndex === -1 && focusableElements) {\n      const initialIndex = initialFocus === 'last' ? lastFocusableIndex : 0\n      focusableElements[initialIndex]?.setAttribute('tabIndex', '0')\n    }\n  }, [focusableElements, focusedIndex, handleFocus, initialFocus, lastFocusableIndex])\n\n  /**\n   * Listen to key down events on rootElement\n   */\n  useEffect(() => {\n    rootElement?.addEventListener('keydown', handleKeyDown)\n\n    return () => {\n      rootElement?.removeEventListener('keydown', handleKeyDown)\n    }\n  }, [handleKeyDown, rootElement])\n\n  return undefined\n}\n","import {useToast} from '@sanity/ui'\nimport React, {forwardRef, useImperativeHandle} from 'react'\n\n/** @internal */\nexport interface ToastParams {\n  closable?: boolean\n  description?: React.ReactNode\n  duration?: number\n  onClose?: () => void\n  title?: React.ReactNode\n  status?: 'error' | 'warning' | 'success' | 'info'\n}\n\n/** @internal */\nexport const ImperativeToast = forwardRef((_, ref) => {\n  const {push} = useToast()\n\n  useImperativeHandle(ref, () => ({push}))\n\n  return null\n})\n\nImperativeToast.displayName = 'ImperativeToast'\n","import {ZIndexContextValue} from './types'\n\n/**\n * @internal\n */\nexport const defaults: ZIndexContextValue = {\n  navbar: 200,\n  navbarPopover: 500000,\n  navbarDialog: 500001,\n\n  // pane\n  pane: 100,\n  paneHeader: [110, 15000],\n  paneFooter: [120, 20000],\n  paneResizer: [130, 25000],\n\n  //\n  popover: 200,\n  modal: 200,\n  movingItem: 10000,\n  drawershade: 1000000,\n  drawer: 1000001,\n  fullscreen: 1200000,\n  toast: [100, 11000],\n\n  // NOT IN USE\n  portal: 200,\n  dropdown: 200,\n  navbarFixed: 1010,\n  fullscreenEdit: 1050,\n  popoverBackground: 1060,\n  tooltip: 200,\n  modalBackground: 2000,\n  spinner: 3000,\n}\n","import {createContext} from 'react'\nimport {ZIndexContextValue} from './types'\nimport {defaults} from './defaults'\n\n/**\n * TODO: Rename to `ZOffsetsContext`\n *\n * @internal\n */\nexport const ZIndexContext = createContext<ZIndexContextValue>(defaults)\n","import {useContext} from 'react'\nimport {ZIndexContextValue} from './types'\nimport {ZIndexContext} from './ZIndexContext'\n\n/**\n * TODO: Rename to `useZOffsets`\n *\n * @internal\n */\nexport function useZIndex(): ZIndexContextValue {\n  return useContext(ZIndexContext)\n}\n","import {LayerProvider} from '@sanity/ui'\nimport React from 'react'\nimport {useZIndex} from '../zOffsets/useZIndex'\nimport {ZIndexContextValue} from '../zOffsets/types'\n\n/** @internal */\nexport type ZIndexContextValueKey = keyof ZIndexContextValue\n\n/**\n * This component should only be used by core Sanity packages.\n * @internal\n */\nexport function LegacyLayerProvider({\n  children,\n  zOffset: zOffsetKey,\n}: {\n  children: React.ReactNode\n  zOffset: ZIndexContextValueKey\n}) {\n  const zIndex = useZIndex()\n  const zOffset = zIndex[zOffsetKey]\n\n  return <LayerProvider zOffset={zOffset}>{children}</LayerProvider>\n}\n","import {ValidationMarker, Path} from '@sanity/types'\nimport React, {useCallback, useMemo} from 'react'\nimport {WarningOutlineIcon, ErrorOutlineIcon, InfoOutlineIcon} from '@sanity/icons'\nimport {Box, Text, MenuItem, Stack, Flex, ButtonTone} from '@sanity/ui'\nimport styled from 'styled-components'\n\ninterface ValidationListItemProps {\n  marker: ValidationMarker\n  onClick?: (path?: Path) => void\n  path: string\n  truncate?: boolean\n}\n\nconst StyledText = styled(Text)`\n  white-space: initial;\n`\n\nconst MENU_ITEM_TONES: Record<'error' | 'warning' | 'info', ButtonTone> = {\n  error: 'critical',\n  warning: 'caution',\n  info: 'primary',\n}\n\nexport function ListItem(props: ValidationListItemProps) {\n  const {marker, onClick, path, truncate} = props\n\n  const handleClick = useCallback(() => {\n    if (onClick) {\n      onClick(marker.path)\n    }\n  }, [marker.path, onClick])\n\n  const menuItemTone = MENU_ITEM_TONES[marker?.level] || undefined\n\n  const children = (\n    <Flex>\n      <Box>\n        <Text size={1}>\n          {marker.level === 'error' && <ErrorOutlineIcon />}\n          {marker.level === 'warning' && <WarningOutlineIcon />}\n          {marker.level === 'info' && <InfoOutlineIcon />}\n        </Text>\n      </Box>\n\n      <Stack space={2} flex={1} paddingLeft={3}>\n        {path && (\n          <StyledText size={1} weight=\"semibold\">\n            {path}\n          </StyledText>\n        )}\n        {marker.item.message && (\n          <StyledText muted size={1} textOverflow={truncate ? 'ellipsis' : undefined}>\n            {marker.item.message}\n          </StyledText>\n        )}\n      </Stack>\n    </Flex>\n  )\n  return (\n    <MenuItem padding={1} onClick={handleClick} radius={2} tone={menuItemTone}>\n      <Box padding={2}>{children}</Box>\n    </MenuItem>\n  )\n}\n","import React, {useCallback} from 'react'\nimport {\n  ObjectSchemaType,\n  Path,\n  ValidationMarker,\n  isValidationErrorMarker,\n  isValidationWarningMarker,\n  isValidationInfoMarker,\n} from '@sanity/types'\nimport {Container} from '@sanity/ui'\nimport {ListItem} from './listItem'\n\n/** @internal */\nexport interface ValidationListProps {\n  documentType?: ObjectSchemaType\n  kind?: 'simple'\n  validation: ValidationMarker[]\n  onFocus?: (path: Path) => void\n  onClose?: () => void\n  truncate?: boolean\n}\n\n/** @internal */\nexport function ValidationList(props: ValidationListProps) {\n  const {documentType, kind, validation, onFocus, onClose, truncate} = props\n  const errors = validation.filter(isValidationErrorMarker)\n  const warnings = validation.filter(isValidationWarningMarker)\n  const info = validation.filter(isValidationInfoMarker)\n\n  const handleClick = useCallback(\n    (path: Path = []) => {\n      if (onFocus) onFocus(path)\n      if (onClose) onClose()\n    },\n    [onFocus, onClose]\n  )\n\n  const resolvePathTitle = (path: Path) => {\n    const fields = documentType && documentType.fields\n    const field = fields && fields.find((curr) => curr.name === path[0])\n\n    return (field && field.type.title) || ''\n  }\n\n  const hasErrors = errors.length > 0\n  const hasWarnings = warnings.length > 0\n  const hasInfo = info.length > 0\n\n  if (!hasErrors && !hasWarnings && !hasInfo) {\n    return null\n  }\n\n  return (\n    <Container width={0} data-kind={kind} data-testid=\"validation-list\">\n      {hasErrors &&\n        errors.map((_error, i) => (\n          <ListItem\n            // eslint-disable-next-line react/no-array-index-key\n            key={i}\n            truncate={truncate}\n            path={resolvePathTitle(_error.path)}\n            marker={_error}\n            onClick={handleClick}\n          />\n        ))}\n      {hasWarnings &&\n        warnings.map((_warning, i) => (\n          <ListItem\n            // eslint-disable-next-line react/no-array-index-key\n            key={i}\n            truncate={truncate}\n            path={resolvePathTitle(_warning.path)}\n            marker={_warning}\n            onClick={handleClick}\n          />\n        ))}\n      {hasInfo &&\n        info.map((_info, i) => (\n          <ListItem\n            // eslint-disable-next-line react/no-array-index-key\n            key={i}\n            truncate={truncate}\n            path={resolvePathTitle(_info.path)}\n            marker={_info}\n            onClick={handleClick}\n          />\n        ))}\n    </Container>\n  )\n}\n","import React from 'react'\nimport {defaults} from './defaults'\nimport {ZIndexContext} from './ZIndexContext'\n\n/**\n * TODO: Rename to `ZOffsetsProvider`\n *\n * @internal\n */\nexport function ZIndexProvider({children}: {children?: React.ReactNode}): React.ReactElement {\n  return <ZIndexContext.Provider value={defaults}>{children}</ZIndexContext.Provider>\n}\n","import React from 'react'\nimport {TextInput} from '@sanity/ui'\nimport {StringInputProps} from '../types'\n\n/**\n * @beta\n */\nexport type TelephoneInputProps = StringInputProps\n\n/**\n * @beta\n */\nexport function TelephoneInput(props: TelephoneInputProps) {\n  const {schemaType, validationError, value, elementProps} = props\n\n  return (\n    <TextInput\n      type=\"tel\"\n      inputMode=\"tel\"\n      customValidity={validationError}\n      value={value || ''}\n      placeholder={schemaType.placeholder}\n      {...elementProps}\n    />\n  )\n}\n","import {isKeySegment, Path} from '@sanity/types'\nimport {StateTree} from './types'\n\n/** @internal */\nexport function setAtPath<T>(\n  currentTree: StateTree<T> | undefined,\n  path: Path,\n  value: T\n): StateTree<T> {\n  if (path.length === 0) {\n    return {...(currentTree || {}), value}\n  }\n  const [head, ...tail] = path\n  const key = isKeySegment(head) ? head._key : String(head)\n  const children = currentTree?.children ?? {}\n  return {\n    value: currentTree?.value,\n    children: {...children, [key]: setAtPath(children[key] || {}, tail, value)},\n  }\n}\n","import {isKeySegment, Path} from '@sanity/types'\nimport {castArray} from 'lodash'\nimport {\n  ArrayOfObjectsFormNode,\n  ArrayOfObjectsItemMember,\n  FieldMember,\n  FieldSetMember,\n  ObjectFormNode,\n} from '../types'\nimport {isMemberArrayOfObjects} from '../../members/object/fields/asserters'\n\n/** @internal */\nexport interface ExpandPathOperation {\n  type: 'expandPath'\n  path: Path\n}\n\n/** @internal */\nexport interface ExpandFieldSetOperation {\n  type: 'expandFieldSet'\n  path: Path\n}\n\n/** @internal */\nexport interface SetActiveGroupOperation {\n  type: 'setSelectedGroup'\n  path: Path\n  groupName: string\n}\n\n/** @internal */\nexport type ExpandOperation =\n  | ExpandPathOperation\n  | ExpandFieldSetOperation\n  | SetActiveGroupOperation\n\n/**\n * This takes a form state and returns a list of operations required to open a node at a particular path\n * @param state - The form state\n * @param path - The path to open\n *\n * @internal\n */\nexport function getExpandOperations(state: ObjectFormNode, path: Path): ExpandOperation[] {\n  // start at the root and make sure all groups/paths are expanded/activated along the way\n  const [fieldName, ...rest] = path\n\n  const fieldsetMember = state.members.find(\n    (member): member is FieldSetMember =>\n      member.kind === 'fieldSet' &&\n      member.fieldSet.members.some(\n        (field): field is FieldMember => field.kind === 'field' && field.name === fieldName\n      )\n  )\n\n  const ops: ExpandOperation[] = [{type: 'expandPath', path}]\n  if (fieldsetMember) {\n    ops.push({type: 'expandFieldSet', path: fieldsetMember.fieldSet.path})\n  }\n\n  const fieldMember = state.members.find(\n    (member): member is FieldMember => member.kind === 'field' && member.name === fieldName\n  )\n\n  const schemaField = state.schemaType.fields.find((field) => field.name === fieldName)\n  const selectedGroupName = state.groups.find((group) => group.selected)?.name\n  const inSelectedGroup =\n    selectedGroupName &&\n    (selectedGroupName === 'all-fields' ||\n      (schemaField && castArray(schemaField.group).includes(selectedGroupName)))\n\n  if (!inSelectedGroup) {\n    ops.push({type: 'setSelectedGroup', path: state.path, groupName: 'all-fields'})\n  }\n\n  if (fieldMember) {\n    ops.push({type: 'expandPath', path: fieldMember.field.path})\n  }\n\n  if (rest.length === 0) {\n    return ops\n  }\n\n  if (fieldMember && isMemberArrayOfObjects(fieldMember)) {\n    return ops.concat([\n      {type: 'expandPath', path: fieldMember.field.path},\n      ...expandArrayPath(fieldMember.field, rest),\n    ])\n  }\n  return ops\n}\n\nfunction expandArrayPath(state: ArrayOfObjectsFormNode, path: Path): ExpandOperation[] {\n  // start at the root and make sure all groups/paths are expanded/activated along the way\n  const [segment, ...rest] = path\n  if (!isKeySegment(segment)) {\n    throw new Error('Expected path segment to be an object with a _key property')\n  }\n\n  const foundMember = state.members.find(\n    (member): member is ArrayOfObjectsItemMember => member.key === segment._key\n  )\n\n  if (!foundMember) {\n    // tried to open a member that does not exist in the form state - it's likely hidden\n    return []\n  }\n  return [{type: 'expandPath', path: path}, ...getExpandOperations(foundMember.item, rest)]\n}\n","/* eslint-disable no-nested-ternary */\nimport {ConditionalProperty, CurrentUser} from '@sanity/types'\n\nexport interface ConditionalPropertyCallbackContext {\n  parent?: unknown\n  document?: Record<string, unknown>\n  currentUser: Omit<CurrentUser, 'role'> | null\n  value: unknown\n}\n\nexport function resolveConditionalProperty(\n  property: ConditionalProperty,\n  context: ConditionalPropertyCallbackContext\n) {\n  const {currentUser, document, parent, value} = context\n\n  if (typeof property === 'boolean' || property === undefined) {\n    return Boolean(property)\n  }\n\n  return (\n    property({\n      document: document as any,\n      parent,\n      value,\n      currentUser,\n    }) === true // note: we can't strictly \"trust\" the return value here, so the conditional property should probably be typed as unknown\n  )\n}\n","/**\n * Max supported field depth. Fields deeper than this will be considered hidden.\n */\nexport const MAX_FIELD_DEPTH = 20\n\n/**\n * Start auto-collapsing fields at this nesting level unless schema/field configuration says otherwise\n */\nexport const AUTO_COLLAPSE_DEPTH = 3\n","import {ArraySchemaType, SchemaType} from '@sanity/types'\nimport {resolveTypeName} from '@sanity/util/content'\n\nexport function getItemType(arrayType: ArraySchemaType, item: unknown): SchemaType | undefined {\n  const itemTypeName = resolveTypeName(item)\n\n  return itemTypeName === 'object' && arrayType.of.length === 1\n    ? arrayType.of[0]\n    : arrayType.of.find((memberType) => memberType.name === itemTypeName)\n}\n\nexport function getPrimitiveItemType(\n  arrayType: ArraySchemaType,\n  item: unknown\n): SchemaType | undefined {\n  const itemTypeName = resolveTypeName(item)\n\n  return arrayType?.of.find(\n    (memberType) => memberType.name === itemTypeName || memberType.jsonType === itemTypeName\n  )\n}\n","import {ObjectSchemaTypeWithOptions} from '@sanity/types'\nimport {AUTO_COLLAPSE_DEPTH} from '../constants'\n\ninterface CollapsibleOptions {\n  collapsible: boolean | undefined\n  // Initial collapsed state\n  collapsed: boolean | undefined\n}\n\n/**\n * Takes an option object that can optionally have a 'collapsed' property\n * (`{collapsed?: boolean, collapsible?: boolean}`)\n * and returns a resolved collapsed state based on configuration and whether it's below a certain nesting level threshold\n - collapsible: boolean - whether the field can be collapsed\n - collapsed: boolean - whether the field is initially collapsed\n * NOTE: If a field is configured with ´collapsed: true´, ignore any ´collapsible´ configuration and make it collapsible no matter what, otherwise it will be left forever collapsed.\n *\n * If the nesting level is deeper than or equal to AUTO_COLLAPSE_DEPTH, the default for the field/fieldset becomes \"collapsed\"\n *\n * @param options - Whether the field or fieldset should be collapsed\n * @param level - Nesting level\n */\nexport function getCollapsedWithDefaults(\n  options: ObjectSchemaTypeWithOptions['options'] = {},\n  level: number\n): CollapsibleOptions {\n  if (options?.collapsible === false || options?.collapsable === false) {\n    return {collapsible: false, collapsed: false}\n  }\n\n  const collapsed =\n    // eslint-disable-next-line no-nested-ternary\n    typeof options?.collapsed === 'boolean'\n      ? options.collapsed\n      : level >= AUTO_COLLAPSE_DEPTH\n      ? true\n      : undefined\n\n  const collapsible =\n    options?.collapsible === true || options?.collapsable === true || collapsed === true\n      ? true\n      : undefined\n\n  return {\n    collapsible,\n    collapsed,\n  }\n}\n","/* eslint-disable max-statements */\n/* eslint-disable camelcase, no-else-return */\n\nimport {\n  ArraySchemaType,\n  BooleanSchemaType,\n  CurrentUser,\n  FieldGroup,\n  isArrayOfObjectsSchemaType,\n  isArraySchemaType,\n  isObjectSchemaType,\n  NumberSchemaType,\n  ObjectField,\n  ObjectSchemaType,\n  Path,\n  StringSchemaType,\n  ValidationMarker,\n} from '@sanity/types'\n\nimport {castArray, isEqual as _isEqual, pick} from 'lodash'\nimport {isEqual, pathFor, startsWith, toString, trimChildPath} from '@sanity/util/paths'\nimport {resolveTypeName} from '@sanity/util/content'\nimport {isRecord} from '../../util'\nimport {getFieldLevel} from '../studio/inputResolver/helpers'\nimport {FIXME} from '../../FIXME'\nimport {FormNodePresence} from '../../presence'\nimport {ObjectArrayFormNode, PrimitiveFormNode, StateTree} from './types'\nimport {resolveConditionalProperty} from './conditional-property'\nimport {MAX_FIELD_DEPTH} from './constants'\nimport {getItemType, getPrimitiveItemType} from './utils/getItemType'\nimport {\n  ArrayOfObjectsMember,\n  ArrayOfPrimitivesMember,\n  FieldMember,\n  ObjectMember,\n} from './types/members'\nimport {ArrayOfObjectsFormNode, ArrayOfPrimitivesFormNode, ObjectFormNode} from './types/nodes'\nimport {FormFieldGroup} from './types/fieldGroup'\nimport {getCollapsedWithDefaults} from './utils/getCollapsibleOptions'\nimport {FieldError} from './types/memberErrors'\n\ntype PrimitiveSchemaType = BooleanSchemaType | NumberSchemaType | StringSchemaType\n\nconst ALL_FIELDS_GROUP: FieldGroup = {\n  name: 'all-fields',\n  title: 'All fields',\n  hidden: false,\n}\n\nfunction isFieldEnabledByGroupFilter(\n  // the groups config for the \"enclosing object\" type\n  groupsConfig: FormFieldGroup[],\n  field: ObjectField,\n  currentGroup: FormFieldGroup\n) {\n  if (currentGroup.name === ALL_FIELDS_GROUP.name) {\n    return true\n  }\n\n  // if there's no group config for the object type, all fields are visible\n  if (groupsConfig.length === 0) {\n    return true\n  }\n\n  return castArray(field.group).includes(currentGroup.name)\n}\n\nfunction isAcceptedObjectValue(value: any): value is Record<string, unknown> | undefined {\n  return typeof value === 'undefined' || isRecord(value)\n}\n\nfunction isValidArrayOfObjectsValue(value: any): value is unknown[] | undefined {\n  return typeof value === 'undefined' || Array.isArray(value)\n}\n\nfunction isValidArrayOfPrimitivesValue(\n  value: any\n): value is (boolean | number | string)[] | undefined {\n  return typeof value === 'undefined' || Array.isArray(value)\n}\n\nfunction everyItemIsObject(value: unknown[]): value is object[] {\n  return value.length === 0 || value.every((item) => isRecord(item))\n}\n\nfunction findDuplicateKeyEntries(array: {_key: string}[]) {\n  const seenKeys = new Set<string>()\n  return array.reduce((acc: [index: number, key: string][], item, index) => {\n    if (seenKeys.has(item._key)) {\n      acc.push([index, item._key])\n    }\n    seenKeys.add(item._key)\n    return acc\n  }, [])\n}\n\nfunction hasKey<T extends object>(value: T): value is T & {_key: string} {\n  return '_key' in value\n}\n\nfunction everyItemHasKey<T extends object>(array: T[]): array is (T & {_key: string})[] {\n  return array?.every((item) => isRecord(item) && hasKey(item))\n}\n\nfunction isChangedValue(value: any, comparisonValue: any) {\n  if (value && !comparisonValue) {\n    return true\n  }\n  return !_isEqual(value, comparisonValue)\n}\n\n/*\n * Takes a field in context of a parent object and returns prepared props for it\n */\nfunction prepareFieldMember(props: {\n  field: ObjectField\n  parent: RawState<ObjectSchemaType, unknown>\n  index: number\n}): ObjectMember | null {\n  const {parent, field, index} = props\n  const fieldPath = pathFor([...parent.path, field.name])\n  const fieldLevel = getFieldLevel(field.type, parent.level + 1)\n\n  const parentValue = parent.value\n  const parentComparisonValue = parent.comparisonValue\n  if (!isAcceptedObjectValue(parentValue)) {\n    // Note: we validate each field, before passing it recursively to this function so getting this error means that the\n    // ´prepareFormState´ function itself has been called with a non-object value\n    throw new Error('Unexpected non-object value')\n  }\n\n  if (isObjectSchemaType(field.type)) {\n    const fieldValue = parentValue?.[field.name]\n    const fieldComparisonValue = isRecord(parentComparisonValue)\n      ? parentComparisonValue?.[field.name]\n      : undefined\n    if (!isAcceptedObjectValue(fieldValue)) {\n      return {\n        kind: 'error',\n        key: field.name,\n        fieldName: field.name,\n        error: {\n          type: 'INCOMPATIBLE_TYPE',\n          expectedSchemaType: field.type,\n          resolvedValueType: resolveTypeName(fieldValue),\n          value: fieldValue,\n        },\n      }\n    }\n\n    // todo: consider requiring a _type annotation for object values on fields as well\n    // if (resolvedValueType !== field.type.name) {\n    //   return {\n    //     kind: 'error',\n    //     key: field.name,\n    //     error: {\n    //       type: 'TYPE_ANNOTATION_MISMATCH',\n    //       expectedSchemaType: field.type,\n    //       resolvedValueType,\n    //     },\n    //   }\n    // }\n\n    const fieldGroupState = parent.fieldGroupState?.children?.[field.name]\n    const scopedCollapsedPaths = parent.collapsedPaths?.children?.[field.name]\n    const scopedCollapsedFieldsets = parent.collapsedFieldSets?.children?.[field.name]\n\n    const inputState = prepareObjectInputState({\n      schemaType: field.type,\n      currentUser: parent.currentUser,\n      parent: parent.value,\n      document: parent.document,\n      value: fieldValue,\n      changed: isChangedValue(fieldValue, fieldComparisonValue),\n      comparisonValue: fieldComparisonValue,\n      presence: parent.presence,\n      validation: parent.validation,\n      fieldGroupState,\n      path: fieldPath,\n      level: fieldLevel,\n      focusPath: parent.focusPath,\n      openPath: parent.openPath,\n      collapsedPaths: scopedCollapsedPaths,\n      collapsedFieldSets: scopedCollapsedFieldsets,\n      readOnly: parent.readOnly,\n      changesOpen: parent.changesOpen,\n    })\n\n    if (inputState === null) {\n      return null\n    }\n\n    const defaultCollapsedState = getCollapsedWithDefaults(field.type.options as FIXME, fieldLevel)\n    const collapsed = scopedCollapsedPaths\n      ? scopedCollapsedPaths.value\n      : defaultCollapsedState.collapsed\n\n    return {\n      kind: 'field',\n      key: `field-${field.name}`,\n      name: field.name,\n      index: index,\n      open: startsWith(fieldPath, parent.openPath),\n      field: inputState,\n      collapsed,\n      collapsible: defaultCollapsedState.collapsible,\n    }\n  } else if (isArraySchemaType(field.type)) {\n    const fieldValue = parentValue?.[field.name] as unknown[] | undefined\n    const fieldComparisonValue = isRecord(parentComparisonValue)\n      ? parentComparisonValue?.[field.name]\n      : undefined\n    if (isArrayOfObjectsSchemaType(field.type)) {\n      const hasValue = typeof fieldValue !== 'undefined'\n      if (hasValue && !isValidArrayOfObjectsValue(fieldValue)) {\n        const resolvedValueType = resolveTypeName(fieldValue)\n\n        return {\n          kind: 'error',\n          key: field.name,\n          fieldName: field.name,\n          error: {\n            type: 'INCOMPATIBLE_TYPE',\n            expectedSchemaType: field.type,\n            resolvedValueType,\n            value: fieldValue,\n          },\n        }\n      }\n\n      if (hasValue && !everyItemIsObject(fieldValue)) {\n        return {\n          kind: 'error',\n          key: field.name,\n          fieldName: field.name,\n          error: {\n            type: 'MIXED_ARRAY',\n            schemaType: field.type,\n            value: fieldValue,\n          },\n        }\n      }\n\n      if (hasValue && !everyItemHasKey(fieldValue)) {\n        return {\n          kind: 'error',\n          key: field.name,\n          fieldName: field.name,\n          error: {\n            type: 'MISSING_KEYS',\n            value: fieldValue,\n            schemaType: field.type,\n          },\n        }\n      }\n\n      const duplicateKeyEntries = hasValue ? findDuplicateKeyEntries(fieldValue) : []\n      if (duplicateKeyEntries.length > 0) {\n        return {\n          kind: 'error',\n          key: field.name,\n          fieldName: field.name,\n          error: {\n            type: 'DUPLICATE_KEYS',\n            duplicates: duplicateKeyEntries,\n            schemaType: field.type,\n          },\n        }\n      }\n\n      const fieldGroupState = parent.fieldGroupState?.children?.[field.name]\n      const scopedCollapsedPaths = parent.collapsedPaths?.children?.[field.name]\n      const scopedCollapsedFieldSets = parent.collapsedFieldSets?.children?.[field.name]\n\n      const readOnly =\n        parent.readOnly ||\n        resolveConditionalProperty(field.type.readOnly, {\n          value: fieldValue,\n          parent: parent.value,\n          document: parent.document,\n          currentUser: parent.currentUser,\n        })\n\n      const fieldState = prepareArrayOfObjectsInputState({\n        schemaType: field.type,\n        parent: parent.value,\n        currentUser: parent.currentUser,\n        document: parent.document,\n        value: fieldValue,\n        changed: isChangedValue(fieldValue, fieldComparisonValue),\n        comparisonValue: fieldComparisonValue as FIXME,\n        fieldGroupState,\n        focusPath: parent.focusPath,\n        openPath: parent.openPath,\n        presence: parent.presence,\n        validation: parent.validation,\n        collapsedPaths: scopedCollapsedPaths,\n        collapsedFieldSets: scopedCollapsedFieldSets,\n        level: fieldLevel,\n        path: fieldPath,\n        readOnly,\n      })\n\n      if (fieldState === null) {\n        return null\n      }\n\n      return {\n        kind: 'field',\n        key: `field-${field.name}`,\n        name: field.name,\n        index: index,\n\n        open: startsWith(fieldPath, parent.openPath),\n\n        collapsible: false,\n        collapsed: false,\n        // note: this is what we actually end up passing down as to the next input component\n        field: fieldState,\n      }\n    } else {\n      // array of primitives\n      if (!isValidArrayOfPrimitivesValue(fieldValue)) {\n        const resolvedValueType = resolveTypeName(fieldValue)\n\n        return {\n          kind: 'error',\n          key: field.name,\n          fieldName: field.name,\n          error: {\n            type: 'INCOMPATIBLE_TYPE',\n            expectedSchemaType: field.type,\n            resolvedValueType,\n            value: fieldValue,\n          },\n        }\n      }\n\n      const fieldGroupState = parent.fieldGroupState?.children?.[field.name]\n      const scopedCollapsedPaths = parent.collapsedPaths?.children?.[field.name]\n      const scopedCollapsedFieldSets = parent.collapsedFieldSets?.children?.[field.name]\n\n      const readOnly =\n        parent.readOnly ||\n        resolveConditionalProperty(field.type.readOnly, {\n          value: fieldValue,\n          parent: parent.value,\n          document: parent.document,\n          currentUser: parent.currentUser,\n        })\n\n      const fieldState = prepareArrayOfPrimitivesInputState({\n        changed: isChangedValue(fieldValue, fieldComparisonValue),\n        comparisonValue: fieldComparisonValue as FIXME,\n        schemaType: field.type,\n        parent: parent.value,\n        currentUser: parent.currentUser,\n        document: parent.document,\n        value: fieldValue,\n        fieldGroupState,\n        focusPath: parent.focusPath,\n        openPath: parent.openPath,\n        presence: parent.presence,\n        validation: parent.validation,\n        collapsedPaths: scopedCollapsedPaths,\n        collapsedFieldSets: scopedCollapsedFieldSets,\n        level: fieldLevel,\n        path: fieldPath,\n        readOnly,\n      })\n\n      if (fieldState === null) {\n        return null\n      }\n\n      return {\n        kind: 'field',\n        key: `field-${field.name}`,\n        name: field.name,\n        index: index,\n\n        open: startsWith(fieldPath, parent.openPath),\n\n        // todo: consider support for collapsible arrays\n        collapsible: false,\n        collapsed: false,\n        // note: this is what we actually end up passing down as to the next input component\n        field: fieldState,\n      }\n    }\n  } else {\n    // primitive fields\n\n    const fieldValue = parentValue?.[field.name] as undefined | boolean | string | number\n    const fieldComparisonValue = isRecord(parentComparisonValue)\n      ? parentComparisonValue?.[field.name]\n      : undefined\n\n    const conditionalPropertyContext = {\n      value: fieldValue,\n      parent: parent.value,\n      document: parent.document,\n      currentUser: parent.currentUser,\n    }\n\n    // note: we *only* want to call the conditional props here, as it's handled by the prepare<Object|Array>InputProps otherwise\n    const hidden = resolveConditionalProperty(field.type.hidden, conditionalPropertyContext)\n\n    if (hidden) {\n      return null\n    }\n\n    const readOnly =\n      parent.readOnly || resolveConditionalProperty(field.type.readOnly, conditionalPropertyContext)\n\n    const fieldState = preparePrimitiveInputState({\n      ...parent,\n      comparisonValue: fieldComparisonValue,\n      value: fieldValue as boolean | string | number | undefined,\n      schemaType: field.type as PrimitiveSchemaType,\n      path: fieldPath,\n      readOnly,\n    })\n\n    return {\n      kind: 'field',\n      key: `field-${field.name}`,\n      name: field.name,\n      index: index,\n\n      open: startsWith(fieldPath, parent.openPath),\n\n      // todo: consider support for collapsible primitive fields\n      collapsible: false,\n      collapsed: false,\n      field: fieldState,\n    }\n  }\n}\n\ninterface RawState<SchemaType, T> {\n  schemaType: SchemaType\n  value?: T\n  comparisonValue?: T | null\n  changed?: boolean\n  document: FIXME_SanityDocument\n  currentUser: Omit<CurrentUser, 'role'> | null\n  parent?: unknown\n  hidden?: boolean\n  readOnly?: boolean\n  path: Path\n  openPath: Path\n  focusPath: Path\n  presence: FormNodePresence[]\n  validation: ValidationMarker[]\n  fieldGroupState?: StateTree<string>\n  collapsedPaths?: StateTree<boolean>\n  collapsedFieldSets?: StateTree<boolean>\n  // nesting level\n  level: number\n  changesOpen?: boolean\n}\n\nfunction prepareObjectInputState<T>(\n  props: RawState<ObjectSchemaType, T>,\n  enableHiddenCheck?: false\n): ObjectFormNode\nfunction prepareObjectInputState<T>(\n  props: RawState<ObjectSchemaType, T>,\n  enableHiddenCheck?: true\n): ObjectFormNode | null\nfunction prepareObjectInputState<T>(\n  props: RawState<ObjectSchemaType, T>,\n  enableHiddenCheck = true\n): ObjectFormNode | null {\n  if (props.level === MAX_FIELD_DEPTH) {\n    return null\n  }\n\n  const conditionalPropertyContext = {\n    value: props.value,\n    parent: props.parent,\n    document: props.document,\n    currentUser: props.currentUser,\n  }\n\n  const hidden =\n    enableHiddenCheck &&\n    resolveConditionalProperty(props.schemaType.hidden, conditionalPropertyContext)\n\n  if (hidden) {\n    return null\n  }\n\n  const readOnly =\n    props.readOnly ||\n    resolveConditionalProperty(props.schemaType.readOnly, conditionalPropertyContext)\n\n  const schemaTypeGroupConfig = props.schemaType.groups || []\n  const defaultGroupName = (schemaTypeGroupConfig.find((g) => g.default) || ALL_FIELDS_GROUP)?.name\n\n  const groups = [ALL_FIELDS_GROUP, ...schemaTypeGroupConfig].flatMap((group): FormFieldGroup[] => {\n    const groupHidden = resolveConditionalProperty(group.hidden, conditionalPropertyContext)\n    const isSelected = group.name === (props.fieldGroupState?.value || defaultGroupName)\n\n    // Set the \"all-fields\" group as selected when review changes is open to enable review of all\n    // fields and changes together. When review changes is closed - switch back to the selected tab.\n    const selected = (props.changesOpen && group.name === ALL_FIELDS_GROUP.name) || isSelected\n\n    return groupHidden\n      ? []\n      : [\n          {\n            icon: group?.icon,\n            name: group.name,\n            selected,\n            title: group.title,\n          },\n        ]\n  })\n\n  const selectedGroup = groups.find((group) => group.selected)!\n\n  const parentProps: RawState<ObjectSchemaType, unknown> = {\n    ...props,\n    hidden,\n    readOnly,\n  }\n\n  // note: this is needed because not all object types gets a ´fieldsets´ property during schema parsing.\n  // ideally members should be normalized as part of the schema parsing and not here\n  const normalizedSchemaMembers: typeof props.schemaType.fieldsets = props.schemaType.fieldsets\n    ? props.schemaType.fieldsets\n    : props.schemaType.fields.map((field) => ({single: true, field}))\n\n  // create a members array for the object\n  const members = normalizedSchemaMembers.flatMap((fieldSet, index): ObjectMember[] => {\n    if (fieldSet.single) {\n      // \"single\" means not part of a fieldset\n      const fieldMember = prepareFieldMember({\n        field: fieldSet.field,\n        parent: parentProps,\n        index,\n      })\n      if (\n        fieldMember === null ||\n        !isFieldEnabledByGroupFilter(groups, fieldSet.field, selectedGroup)\n      ) {\n        return []\n      }\n      return [fieldMember]\n    }\n\n    // it's an actual fieldset\n    const fieldsetFieldNames = fieldSet.fields.map((f) => f.name)\n    const fieldsetHidden = resolveConditionalProperty(fieldSet.hidden, {\n      currentUser: props.currentUser,\n      document: props.document,\n      parent: props.value,\n      value: pick(props.value, fieldsetFieldNames),\n    })\n\n    if (fieldsetHidden) {\n      return []\n    }\n\n    const fieldsetReadOnly = resolveConditionalProperty(fieldSet.readOnly, {\n      currentUser: props.currentUser,\n      document: props.document,\n      parent: props.value,\n      value: pick(props.value, fieldsetFieldNames),\n    })\n\n    const fieldsetMembers = fieldSet.fields.flatMap((field): (FieldMember | FieldError)[] => {\n      const fieldState = prepareFieldMember({\n        field,\n        parent: parentProps,\n        index,\n\n        // the explicit type cast here is ok - we know that a fieldset can not have fieldsets\n      }) as FieldMember | FieldError | null\n      if (fieldState === null || !isFieldEnabledByGroupFilter(groups, field, selectedGroup)) {\n        return []\n      }\n\n      const fieldStateWithReadOnly = {\n        ...fieldState,\n        field: {\n          ...(fieldState as FieldMember)?.field,\n          readOnly: readOnly || fieldsetReadOnly,\n        },\n      }\n\n      return [fieldStateWithReadOnly]\n    })\n\n    // if all members of the fieldset is hidden, the fieldset should effectively also be hidden\n    if (fieldsetMembers.length === 0) {\n      return []\n    }\n    const defaultCollapsedState = getCollapsedWithDefaults(fieldSet.options, props.level)\n\n    const collapsed =\n      (props.collapsedFieldSets?.children || {})[fieldSet.name]?.value ??\n      defaultCollapsedState.collapsed\n\n    return [\n      {\n        kind: 'fieldSet',\n        key: `fieldset-${fieldSet.name}`,\n        fieldSet: {\n          path: pathFor(props.path.concat(fieldSet.name)),\n          name: fieldSet.name,\n          title: fieldSet.title,\n          description: fieldSet.description,\n          hidden: false,\n          level: props.level + 1,\n          members: fieldsetMembers,\n          collapsible: defaultCollapsedState?.collapsible,\n          collapsed,\n          columns: fieldSet?.options?.columns,\n        },\n      },\n    ]\n  })\n\n  const hasFieldGroups = schemaTypeGroupConfig.length > 0\n\n  const presence = props.presence.filter((item) => isEqual(item.path, props.path))\n\n  const validation = props.validation\n    .filter((item) => isEqual(item.path, props.path))\n    .map((v) => ({level: v.level, message: v.item.message, path: v.path}))\n\n  // Return null here only when enableHiddenCheck, or we end up with array members that have 'item: null' when they\n  // really should not be. One example is when a block object inside the PT-input have a type with one single hidden field.\n  // Then it should still be possible to see the member item, even though all of it's fields are null.\n  if (members.length === 0 && enableHiddenCheck) {\n    return null\n  }\n\n  // Disable all groups except the \"all fields\" group when the review changes pane is open.\n  const _groups = hasFieldGroups\n    ? groups.map((g) => ({...g, disabled: props?.changesOpen && g.name !== ALL_FIELDS_GROUP.name}))\n    : []\n\n  return {\n    value: props.value as Record<string, unknown> | undefined,\n    changed: isChangedValue(props.value, props.comparisonValue),\n    schemaType: props.schemaType,\n    readOnly: props.readOnly || readOnly,\n    path: props.path,\n    id: toString(props.path),\n    level: props.level,\n    focused: isEqual(props.path, props.focusPath),\n    focusPath: trimChildPath(props.path, props.focusPath),\n    presence,\n    validation,\n    members,\n    groups: _groups,\n  }\n}\n\nfunction prepareArrayOfPrimitivesInputState<T extends (boolean | string | number)[]>(\n  props: RawState<ArraySchemaType, T>\n): ArrayOfPrimitivesFormNode | null {\n  if (props.level === MAX_FIELD_DEPTH) {\n    return null\n  }\n\n  const conditionalPropertyContext = {\n    comparisonValue: props.comparisonValue,\n    value: props.value,\n    parent: props.parent,\n    document: props.document,\n    currentUser: props.currentUser,\n  }\n\n  const hidden = resolveConditionalProperty(props.schemaType.hidden, conditionalPropertyContext)\n\n  if (hidden) {\n    return null\n  }\n\n  const readOnly =\n    props.readOnly ||\n    resolveConditionalProperty(props.schemaType.readOnly, conditionalPropertyContext)\n\n  // Todo: improve error handling at the parent level so that the value here is either undefined or an array\n  const items = Array.isArray(props.value) ? props.value : []\n\n  const presence = props.presence.filter((item) => isEqual(item.path, props.path))\n  const validation = props.validation\n    .filter((item) => isEqual(item.path, props.path))\n    .map((v) => ({level: v.level, message: v.item.message, path: v.path}))\n  const members = items.flatMap((item, index) =>\n    prepareArrayOfPrimitivesMember({arrayItem: item, parent: props, index})\n  )\n  return {\n    changed: members.some((m) => m.kind === 'item' && m.item.changed), // TODO: is this correct? There could be field and fieldsets here?\n    value: props.value as T,\n    readOnly,\n    schemaType: props.schemaType,\n    focused: isEqual(props.path, props.focusPath),\n    focusPath: trimChildPath(props.path, props.focusPath),\n    path: props.path,\n    id: toString(props.path),\n    level: props.level,\n    validation,\n    presence,\n    members,\n  }\n}\n\nfunction prepareArrayOfObjectsInputState<T extends {_key: string}[]>(\n  props: RawState<ArraySchemaType, T>\n): ArrayOfObjectsFormNode | null {\n  if (props.level === MAX_FIELD_DEPTH) {\n    return null\n  }\n\n  const conditionalPropertyContext = {\n    value: props.value,\n    parent: props.parent,\n    document: props.document,\n    currentUser: props.currentUser,\n  }\n  const hidden = resolveConditionalProperty(props.schemaType.hidden, conditionalPropertyContext)\n\n  if (hidden) {\n    return null\n  }\n\n  const readOnly =\n    props.readOnly ||\n    resolveConditionalProperty(props.schemaType.readOnly, conditionalPropertyContext)\n\n  // Todo: improve error handling at the parent level so that the value here is either undefined or an array\n  const items = Array.isArray(props.value) ? props.value : []\n\n  const presence = props.presence.filter((item) => isEqual(item.path, props.path))\n  const validation = props.validation\n    .filter((item) => isEqual(item.path, props.path))\n    .map((v) => ({level: v.level, message: v.item.message, path: v.path}))\n\n  const members = items.flatMap((item, index) =>\n    prepareArrayOfObjectsMember({\n      arrayItem: item,\n      parent: props,\n      index,\n    })\n  )\n\n  return {\n    changed: members.some((m) => m.kind === 'item' && m.item.changed),\n    value: props.value as T,\n    readOnly,\n    schemaType: props.schemaType,\n    focused: isEqual(props.path, props.focusPath),\n    focusPath: trimChildPath(props.path, props.focusPath),\n    path: props.path,\n    id: toString(props.path),\n    level: props.level,\n    validation,\n    presence,\n    members,\n  }\n}\n\n/*\n * Takes a field in context of a parent object and returns prepared props for it\n */\nfunction prepareArrayOfObjectsMember(props: {\n  arrayItem: {_key: string}\n  parent: RawState<ArraySchemaType, unknown>\n  index: number\n}): ArrayOfObjectsMember {\n  const {arrayItem, parent, index} = props\n\n  const itemType = getItemType(parent.schemaType, arrayItem) as ObjectSchemaType\n\n  const key = arrayItem._key\n\n  if (!itemType) {\n    const itemTypeName = resolveTypeName(arrayItem)\n    return {\n      kind: 'error',\n      key,\n      index,\n      error: {\n        type: 'INVALID_ITEM_TYPE',\n        resolvedValueType: itemTypeName,\n        value: arrayItem,\n        validTypes: parent.schemaType.of,\n      },\n    }\n  }\n\n  const itemPath = pathFor([...parent.path, {_key: key}])\n  const itemLevel = parent.level + 1\n\n  const conditionalPropertyContext = {\n    value: parent.value,\n    parent: props.parent,\n    document: parent.document,\n    currentUser: parent.currentUser,\n  }\n  const readOnly =\n    parent.readOnly ||\n    resolveConditionalProperty(parent.schemaType.readOnly, conditionalPropertyContext)\n\n  const fieldGroupState = parent.fieldGroupState?.children?.[key]\n  const scopedCollapsedPaths = parent.collapsedPaths?.children?.[key]\n  const scopedCollapsedFieldsets = parent.collapsedFieldSets?.children?.[key]\n  const comparisonValue =\n    (Array.isArray(parent.comparisonValue) &&\n      parent.comparisonValue.find((i) => i._key === arrayItem._key)) ||\n    undefined\n\n  const itemState = prepareObjectInputState(\n    {\n      schemaType: itemType,\n      level: itemLevel,\n      document: parent.document,\n      value: arrayItem,\n      comparisonValue,\n      changed: isChangedValue(arrayItem, comparisonValue),\n      path: itemPath,\n      focusPath: parent.focusPath,\n      openPath: parent.openPath,\n      currentUser: parent.currentUser,\n      collapsedPaths: scopedCollapsedPaths,\n      collapsedFieldSets: scopedCollapsedFieldsets,\n      presence: parent.presence,\n      validation: parent.validation,\n      fieldGroupState,\n      readOnly,\n    },\n    false\n  ) as ObjectArrayFormNode\n\n  const defaultCollapsedState = getCollapsedWithDefaults(itemType.options, itemLevel)\n  const collapsed = scopedCollapsedPaths?.value ?? defaultCollapsedState.collapsed\n  return {\n    kind: 'item',\n    key,\n    index,\n    open: startsWith(itemPath, parent.openPath),\n    collapsed: collapsed,\n    collapsible: true,\n    parentSchemaType: parent.schemaType,\n    item: itemState,\n  }\n}\n\n/*\n * Takes a field in contet of a parent object and returns prepared props for it\n */\nfunction prepareArrayOfPrimitivesMember(props: {\n  arrayItem: unknown\n  parent: RawState<ArraySchemaType, unknown>\n  index: number\n}): ArrayOfPrimitivesMember {\n  const {arrayItem, parent, index} = props\n  const itemType = getPrimitiveItemType(parent.schemaType, arrayItem)\n\n  const itemPath = pathFor([...parent.path, index])\n  const itemValue = (parent.value as unknown[] | undefined)?.[index] as string | boolean | number\n  const itemComparisonValue = (parent.comparisonValue as unknown[] | undefined)?.[index] as\n    | string\n    | boolean\n    | number\n  const itemLevel = parent.level + 1\n\n  // Best effort attempt to make a stable key for each item in the array\n  // Since items may be reordered and change at any time, there's no way to reliably address each item uniquely\n  // This is a \"best effort\"-attempt at making sure we don't re-use internal state for item inputs\n  // when items are added to or removed from the array\n  const key = `${itemType?.name || 'invalid-type'}-${String(index)}`\n\n  if (!itemType) {\n    return {\n      kind: 'error',\n      key,\n      index,\n      error: {\n        type: 'INVALID_ITEM_TYPE',\n        validTypes: parent.schemaType.of,\n        resolvedValueType: resolveTypeName(itemType),\n        value: itemValue,\n      },\n    }\n  }\n\n  const readOnly =\n    parent.readOnly ||\n    resolveConditionalProperty(itemType.readOnly, {\n      value: itemValue,\n      parent: parent.value,\n      document: parent.document,\n      currentUser: parent.currentUser,\n    })\n\n  const item = preparePrimitiveInputState({\n    ...parent,\n    path: itemPath,\n    schemaType: itemType as PrimitiveSchemaType,\n    level: itemLevel,\n    value: itemValue,\n    comparisonValue: itemComparisonValue,\n    readOnly,\n  })\n\n  return {\n    kind: 'item',\n    key,\n    index,\n    parentSchemaType: parent.schemaType,\n    open: isEqual(itemPath, parent.openPath),\n    item,\n  }\n}\n\nfunction preparePrimitiveInputState<SchemaType extends PrimitiveSchemaType>(\n  props: RawState<SchemaType, unknown>\n): PrimitiveFormNode {\n  const presence = props.presence.filter((item) => isEqual(item.path, props.path))\n\n  const validation = props.validation\n    .filter((item) => isEqual(item.path, props.path))\n    .map((v) => ({level: v.level, message: v.item.message, path: v.path}))\n  return {\n    schemaType: props.schemaType,\n    changed: isChangedValue(props.value, props.comparisonValue),\n    value: props.value,\n    level: props.level,\n    id: toString(props.path),\n    readOnly: props.readOnly,\n    focused: isEqual(props.path, props.focusPath),\n    path: props.path,\n    presence,\n    validation,\n  } as PrimitiveFormNode\n}\n\n/** @internal */\nexport type FIXME_SanityDocument = Record<string, unknown>\n\n/** @internal */\nexport function prepareFormState<T extends FIXME_SanityDocument>(\n  props: RawState<ObjectSchemaType, T>\n): ObjectFormNode | null {\n  return prepareObjectInputState(props)\n}\n","/* eslint-disable camelcase */\n\nimport {ObjectSchemaType, Path, ValidationMarker} from '@sanity/types'\nimport {useLayoutEffect, useMemo, useRef} from 'react'\nimport {pathFor} from '@sanity/util/paths'\nimport {FormNodePresence} from '../../presence'\nimport {useCurrentUser} from '../../store'\nimport {StateTree, ObjectFormNode} from './types'\nimport {prepareFormState, FIXME_SanityDocument} from './formState'\nimport {immutableReconcile} from './utils/immutableReconcile'\nimport {DocumentFormNode} from './types/nodes'\n\n/** @internal */\nexport type FormState<\n  T extends {[key in string]: unknown} = {[key in string]: unknown},\n  S extends ObjectSchemaType = ObjectSchemaType\n> = ObjectFormNode<T, S>\n\n/** @internal */\nexport function useFormState<\n  T extends {[key in string]: unknown} = {[key in string]: unknown},\n  S extends ObjectSchemaType = ObjectSchemaType\n>(\n  schemaType: ObjectSchemaType,\n  {\n    comparisonValue,\n    value,\n    fieldGroupState,\n    collapsedFieldSets,\n    collapsedPaths,\n    focusPath,\n    openPath,\n    presence,\n    validation,\n    readOnly,\n    changesOpen,\n  }: {\n    fieldGroupState?: StateTree<string> | undefined\n    collapsedFieldSets?: StateTree<boolean> | undefined\n    collapsedPaths?: StateTree<boolean> | undefined\n    value: Partial<FIXME_SanityDocument>\n    comparisonValue: Partial<FIXME_SanityDocument> | null\n    openPath: Path\n    focusPath: Path\n    presence: FormNodePresence[]\n    validation: ValidationMarker[]\n    changesOpen?: boolean\n    readOnly?: boolean\n  }\n): FormState<T, S> | null {\n  // note: feel free to move these state pieces out of this hook\n  const currentUser = useCurrentUser()\n\n  const prev = useRef<DocumentFormNode | null>(null)\n\n  useLayoutEffect(() => {\n    prev.current = null\n  }, [schemaType])\n\n  return useMemo(() => {\n    // console.time('derive form state')\n    const next = prepareFormState({\n      schemaType,\n      document: value,\n      fieldGroupState,\n      collapsedFieldSets,\n      collapsedPaths,\n      value,\n      comparisonValue,\n      focusPath,\n      openPath,\n      readOnly,\n      path: pathFor([]),\n      level: 0,\n      currentUser,\n      presence,\n      validation,\n      changesOpen,\n    }) as ObjectFormNode<T, S> // TODO: remove type cast\n\n    const reconciled = immutableReconcile(prev.current, next)\n    prev.current = reconciled\n    // console.timeEnd('derive form state')\n    return reconciled\n  }, [\n    schemaType,\n    value,\n    fieldGroupState,\n    collapsedFieldSets,\n    collapsedPaths,\n    comparisonValue,\n    focusPath,\n    openPath,\n    currentUser,\n    presence,\n    validation,\n    changesOpen,\n  ])\n}\n","import {arrayToJSONMatchPath} from '@sanity/mutator'\nimport {flatten} from 'lodash'\nimport {SANITY_PATCH_TYPE} from '../patch'\nimport type {FormPatchOrigin, FormPatch} from '../patch/types'\nimport {decodePath} from './path'\n\n/**\n * @internal\n */\nexport type MutationPatch = Record<string, any> // @todo: complete this typing\n\n/**\n * @internal\n */\nexport function toMutationPatches(patches: FormPatch[]): MutationPatch[] {\n  return patches.map(toMutationPatch)\n}\n\n/**\n * @internal\n */\nexport function fromMutationPatches(\n  origin: FormPatchOrigin,\n  patches: MutationPatch[]\n): FormPatch[] {\n  return flatten(patches.map((patch) => toFormBuilderPatches(origin, patch)))\n}\n\nconst notIn = (values: unknown[]) => (value: unknown) => !values.includes(value)\n\nfunction toFormBuilderPatches(origin: FormPatchOrigin, patch: MutationPatch): FormPatch[] {\n  return flatten(\n    Object.keys(patch)\n      .filter(notIn(['id', 'ifRevisionID', 'query']))\n      .map((type) => {\n        if (type === 'unset') {\n          return patch.unset.map((path: any) => {\n            return {\n              type: 'unset',\n              path: decodePath(path),\n              origin,\n            }\n          })\n        }\n        if (type === 'insert') {\n          const position = 'before' in patch.insert ? 'before' : 'after'\n          return {\n            type: 'insert',\n            position: position,\n            path: decodePath(patch.insert[position]),\n            items: patch.insert.items,\n            origin,\n          }\n        }\n        return Object.keys(patch[type])\n          .map((gradientPath) => {\n            if (type === 'set') {\n              return {\n                type: 'set',\n                path: decodePath(gradientPath),\n                value: patch[type][gradientPath],\n                origin,\n              }\n            }\n            if (type === 'inc' || type === 'dec') {\n              return {\n                type: type,\n                path: decodePath(gradientPath),\n                value: patch[type][gradientPath],\n                origin,\n              }\n            }\n            if (type === 'setIfMissing') {\n              return {\n                type: 'setIfMissing',\n                path: decodePath(gradientPath),\n                value: patch[type][gradientPath],\n                origin,\n              }\n            }\n            if (type === 'diffMatchPatch') {\n              return {\n                type,\n                path: decodePath(gradientPath),\n                value: patch[type][gradientPath],\n                origin,\n              }\n            }\n            // eslint-disable-next-line no-console\n            console.warn(new Error(`Unsupported patch type: ${type}`))\n            return null\n          })\n          .filter(Boolean)\n      })\n  )\n}\n\nfunction toMutationPatch(patch: FormPatch): MutationPatch {\n  if (patch.patchType !== SANITY_PATCH_TYPE && patch.type) {\n    throw new Error(\n      `Patch is missing \"patchType\" - import and use \"${patch.type}()\" from \"sanity/form\"`\n    )\n  } else if (patch.patchType !== SANITY_PATCH_TYPE) {\n    throw new Error(\n      `Patch is missing \"patchType\" - import and use the patch method helpers from \"sanity/form\"`\n    )\n  }\n\n  const matchPath = arrayToJSONMatchPath(patch.path || [])\n  if (patch.type === 'insert') {\n    const {position, items} = patch\n    return {\n      insert: {\n        [position]: matchPath,\n        items: items,\n      },\n    }\n  }\n\n  if (patch.type === 'unset') {\n    return {\n      unset: [matchPath],\n    }\n  }\n\n  if (!patch.type) {\n    throw new Error(`Missing patch type in patch ${JSON.stringify(patch)}`)\n  }\n  if (matchPath) {\n    return {\n      [patch.type]: {\n        [matchPath]: patch.value,\n      },\n    }\n  }\n  return {\n    [patch.type]: patch.value,\n  }\n}\n","import React, {memo, useCallback, useMemo} from 'react'\nimport {FormPatch, PatchEvent} from '../patch'\nimport {FormCallbacksContext, useFormCallbacks} from '../studio'\n\ntype PatchTransformer = (patches: FormPatch[]) => FormPatch[]\n\n/** @beta */\nexport const TransformPatches = memo(function OnChangeProvider(\n  props: {transform: PatchTransformer} & {children: React.ReactNode}\n) {\n  const {transform} = props\n  const callbacks = useFormCallbacks()\n\n  const handleChange = useCallback(\n    (patchEvent: PatchEvent) => {\n      const patches = patchEvent.patches\n      const transformedPatches = transform(patches)\n      callbacks.onChange(PatchEvent.from(transformedPatches))\n    },\n    [callbacks, transform]\n  )\n\n  const contextValue = useMemo(\n    () => ({...callbacks, onChange: handleChange}),\n    [callbacks, handleChange]\n  )\n  return (\n    <FormCallbacksContext.Provider value={contextValue}>\n      {props.children}\n    </FormCallbacksContext.Provider>\n  )\n})\n","import {parseColor, rgbToHex, screen, multiply} from '@sanity/ui'\nimport {getLuminance, mix, parseToRgb, rgb} from 'polished'\nimport {LegacyThemeTints} from './types'\n\n/**\n * @internal\n */\nexport function _buildTints(bg: string, mid: string, fg: string): LegacyThemeTints {\n  return {\n    50: mix(0.1, mid, bg),\n    100: mix(0.2, mid, bg),\n    200: mix(0.4, mid, bg),\n    300: mix(0.6, mid, bg),\n    400: mix(0.8, mid, bg),\n    500: mid,\n    600: mix(0.8, mid, fg),\n    700: mix(0.6, mid, fg),\n    800: mix(0.4, mid, fg),\n    900: mix(0.2, mid, fg),\n    950: mix(0.1, mid, fg),\n  }\n}\n\n/**\n * @internal\n */\nexport function _toHex(color: string): string {\n  const {red, green, blue} = parseToRgb(color)\n  return rgb(red, green, blue)\n}\n\n/**\n * @internal\n */\nexport function _isDark(bg: string, fg: string): boolean {\n  return getLuminance(bg) < getLuminance(fg)\n}\n\n/**\n * Blend two colors using the \"screen\" blend mode\n * @internal\n */\nexport function _multiply(bg: string, fg: string): string {\n  const b = parseColor(bg)\n  const s = parseColor(fg)\n  const hex = rgbToHex(multiply(b, s))\n\n  return hex\n}\n\n/**\n * Blend two colors using the \"screen\" blend mode\n * @internal\n */\nexport function _screen(bg: string, fg: string): string {\n  const b = parseColor(bg)\n  const s = parseColor(fg)\n  const hex = rgbToHex(screen(b, s))\n\n  return hex\n}\n","import {hues} from '@sanity/color'\nimport {createColorTheme, rgba, ThemeColorSchemes} from '@sanity/ui'\nimport {_multiply, _screen, _isDark} from './helpers'\nimport {LegacyPalette} from './palette'\nimport {LegacyTones} from './tones'\nimport {LegacyThemeTints} from './types'\n\nconst NEUTRAL_TONES = ['default', 'transparent']\n\nexport function buildColor(\n  legacyPalette: LegacyPalette,\n  legacyTones: LegacyTones\n): ThemeColorSchemes {\n  return createColorTheme({\n    base: ({dark: navbar, name}) => {\n      const stateTones = navbar ? legacyTones.state.navbar : legacyTones.state.default\n      const dark = stateTones.dark\n      const blend = navbar ? _screen : _multiply\n      const tints = stateTones[name] || stateTones.default\n\n      if (name === 'default') {\n        const skeletonFrom = stateTones.default[100]\n\n        return {\n          fg: stateTones.fg,\n          bg: stateTones.bg,\n          border: stateTones.default[200],\n          focusRing: legacyPalette.focus.base,\n          shadow: {\n            outline: rgba(stateTones.default[500], 0.4),\n            umbra: rgba(dark ? legacyPalette.black : stateTones.default[500], 0.2),\n            penumbra: rgba(dark ? legacyPalette.black : stateTones.default[500], 0.14),\n            ambient: rgba(dark ? legacyPalette.black : stateTones.default[500], 0.12),\n          },\n          skeleton: {\n            from: skeletonFrom,\n            to: rgba(skeletonFrom, 0.5),\n          },\n        }\n      }\n\n      if (name === 'transparent') {\n        const bg = tints[50]\n        const skeletonFrom = blend(bg, tints[100])\n\n        return {\n          fg: tints[900],\n          bg,\n          border: tints[300],\n          focusRing: legacyPalette.focus.base,\n          shadow: {\n            outline: rgba(tints[500], dark ? 0.2 : 0.4),\n            umbra: rgba(dark ? legacyPalette.black : tints[500], 0.2),\n            penumbra: rgba(dark ? legacyPalette.black : tints[500], 0.14),\n            ambient: rgba(dark ? legacyPalette.black : tints[500], 0.12),\n          },\n          skeleton: {\n            from: skeletonFrom,\n            to: rgba(skeletonFrom, 0.5),\n          },\n        }\n      }\n\n      const bg = tints[50]\n      const skeletonFrom = blend(bg, tints[100])\n\n      return {\n        fg: tints[900],\n        bg,\n        border: tints[200],\n        focusRing: tints[500],\n        shadow: {\n          outline: rgba(tints[500], dark ? 0.2 : 0.4),\n          umbra: rgba(dark ? legacyPalette.black : tints[500], 0.2),\n          penumbra: rgba(dark ? legacyPalette.black : tints[500], 0.14),\n          ambient: rgba(dark ? legacyPalette.black : tints[500], 0.12),\n        },\n        skeleton: {\n          from: skeletonFrom,\n          to: rgba(skeletonFrom, 0.5),\n        },\n      }\n    },\n\n    solid: ({base, dark: navbar, name, state, tone}) => {\n      const buttonTones = navbar ? legacyTones.button.navbar : legacyTones.button.default\n      const dark = buttonTones.dark\n      const blend = dark ? _screen : _multiply\n      const blendInvert = dark ? _multiply : _screen\n      const defaultTints = buttonTones[name] || buttonTones.default\n      const isNeutral = NEUTRAL_TONES.includes(name) && NEUTRAL_TONES.includes(tone)\n      let tints = buttonTones[tone === 'default' ? name : tone] || defaultTints\n\n      if (state === 'disabled') {\n        tints = defaultTints\n\n        const bg = blend(base.bg, tints[200])\n        const skeletonFrom = blendInvert(bg, tints[800])\n\n        return {\n          bg,\n          border: blend(base.bg, tints[200]),\n          fg: blend(base.bg, buttonTones.bg),\n          muted: {\n            fg: blend(base.bg, tints[50]),\n          },\n          accent: {\n            fg: blend(base.bg, tints[50]),\n          },\n          link: {\n            fg: blend(base.bg, tints[50]),\n          },\n          code: {\n            bg,\n            fg: blend(base.bg, tints[50]),\n          },\n          skeleton: {\n            from: skeletonFrom,\n            to: rgba(skeletonFrom, 0.5),\n          },\n        }\n      }\n\n      if (state === 'hovered') {\n        const bg = blend(base.bg, tints[600])\n        const skeletonFrom = blendInvert(bg, tints[800])\n\n        return {\n          bg,\n          border: blend(base.bg, tints[600]),\n          fg: blend(base.bg, buttonTones.bg),\n          muted: {\n            fg: blend(base.bg, tints[200]),\n          },\n          accent: {\n            fg: blendInvert(bg, buttonTones.critical[300]),\n          },\n          link: {\n            fg: blendInvert(bg, buttonTones.primary[200]),\n          },\n          code: {\n            bg: blend(bg, tints[50]),\n            fg: blend(base.bg, tints[200]),\n          },\n          skeleton: {\n            from: skeletonFrom,\n            to: rgba(skeletonFrom, 0.5),\n          },\n        }\n      }\n\n      if (state === 'pressed') {\n        const bg = blend(base.bg, tints[800])\n        const skeletonFrom = blendInvert(bg, tints[800])\n\n        return {\n          bg,\n          border: blend(base.bg, tints[800]),\n          fg: blend(base.bg, buttonTones.bg),\n          muted: {\n            fg: blend(base.bg, tints[200]),\n          },\n          accent: {\n            fg: blendInvert(bg, buttonTones.critical[300]),\n          },\n          link: {\n            fg: blendInvert(bg, buttonTones.primary[200]),\n          },\n          code: {\n            bg: blend(bg, tints[50]),\n            fg: blend(base.bg, tints[200]),\n          },\n          skeleton: {\n            from: skeletonFrom,\n            to: rgba(skeletonFrom, 0.5),\n          },\n        }\n      }\n\n      if (state === 'selected') {\n        if (isNeutral) {\n          tints = buttonTones.primary\n        }\n\n        const bg = blend(base.bg, tints[800])\n        const skeletonFrom = blendInvert(bg, tints[800])\n\n        return {\n          bg,\n          border: blend(base.bg, tints[800]),\n          fg: blend(base.bg, buttonTones.bg),\n          muted: {\n            fg: blend(base.bg, tints[200]),\n          },\n          accent: {\n            fg: blendInvert(bg, buttonTones.critical[300]),\n          },\n          link: {\n            fg: blendInvert(bg, buttonTones.primary[200]),\n          },\n          code: {\n            bg: blend(bg, tints[50]),\n            fg: blend(base.bg, tints[200]),\n          },\n          skeleton: {\n            from: skeletonFrom,\n            to: rgba(skeletonFrom, 0.5),\n          },\n        }\n      }\n\n      const bg = blend(base.bg, tints[500])\n      const skeletonFrom = blendInvert(bg, tints[800])\n\n      return {\n        bg,\n        border: blend(base.bg, tints[500]),\n        fg: blend(base.bg, buttonTones.bg),\n        muted: {\n          fg: blend(base.bg, tints[100]),\n        },\n        accent: {\n          fg: blendInvert(bg, buttonTones.critical[200]),\n        },\n        link: {\n          fg: blendInvert(bg, buttonTones.primary[100]),\n        },\n        code: {\n          bg: blend(bg, tints[50]),\n          fg: blend(base.bg, tints[100]),\n        },\n        skeleton: {\n          from: skeletonFrom,\n          to: rgba(skeletonFrom, 0.5),\n        },\n      }\n    },\n\n    muted: ({base, dark: navbar, name, state, tone}) => {\n      const stateTones = navbar ? legacyTones.state.navbar : legacyTones.state.default\n      const dark = stateTones.dark\n      const blend = dark ? _screen : _multiply\n      const defaultTints = stateTones[name] || stateTones.default\n      const isNeutral = NEUTRAL_TONES.includes(name) && NEUTRAL_TONES.includes(tone)\n\n      let tints: LegacyThemeTints = stateTones[tone === 'default' ? name : tone] || defaultTints\n\n      if (state === 'disabled') {\n        tints = defaultTints\n\n        const bg = base.bg\n        const skeletonFrom = blend(bg, tints[100])\n\n        return {\n          bg,\n          border: blend(base.bg, tints[50]),\n          fg: blend(base.bg, tints[200]),\n          muted: {\n            fg: blend(bg, tints[100]),\n          },\n          accent: {\n            fg: blend(bg, tints[100]),\n          },\n          link: {\n            fg: blend(bg, tints[100]),\n          },\n          code: {\n            bg,\n            fg: blend(bg, tints[100]),\n          },\n          skeleton: {\n            from: skeletonFrom,\n            to: rgba(skeletonFrom, 0.5),\n          },\n        }\n      }\n\n      if (state === 'hovered') {\n        const bg = blend(base.bg, tints[50])\n        const skeletonFrom = blend(bg, tints[100])\n\n        return {\n          bg,\n          border: blend(bg, tints[100]),\n          fg: blend(base.bg, tints[900]),\n          muted: {\n            fg: blend(base.bg, tints[600]),\n          },\n          accent: {\n            fg: blend(base.bg, stateTones.critical[500]),\n          },\n          link: {\n            fg: blend(base.bg, stateTones.primary[600]),\n          },\n          code: {\n            bg: blend(bg, tints[50]),\n            fg: blend(base.bg, tints[600]),\n          },\n          skeleton: {\n            from: skeletonFrom,\n            to: rgba(skeletonFrom, 0.5),\n          },\n        }\n      }\n\n      if (state === 'pressed') {\n        if (isNeutral) {\n          tints = stateTones.primary\n        }\n\n        const bg = blend(base.bg, tints[100])\n        const skeletonFrom = blend(bg, tints[100])\n\n        return {\n          bg,\n          border: blend(bg, tints[100]),\n          fg: blend(base.bg, tints[800]),\n          muted: {\n            fg: blend(base.bg, tints[600]),\n          },\n          accent: {\n            fg: blend(bg, stateTones.critical[500]),\n          },\n          link: {\n            fg: blend(bg, stateTones.primary[600]),\n          },\n          code: {\n            bg: blend(bg, tints[50]),\n            fg: blend(bg, tints[600]),\n          },\n          skeleton: {\n            from: skeletonFrom,\n            to: rgba(skeletonFrom, 0.5),\n          },\n        }\n      }\n\n      if (state === 'selected') {\n        if (isNeutral) {\n          tints = stateTones.primary\n        }\n\n        const bg = blend(base.bg, tints[100])\n        const skeletonFrom = blend(bg, tints[100])\n\n        return {\n          bg,\n          border: blend(bg, tints[100]),\n          fg: blend(bg, tints[800]),\n          muted: {\n            fg: blend(bg, tints[600]),\n          },\n          accent: {\n            fg: blend(bg, stateTones.critical[500]),\n          },\n          link: {\n            fg: blend(bg, stateTones.primary[600]),\n          },\n          code: {\n            bg: blend(bg, tints[50]),\n            fg: blend(bg, tints[600]),\n          },\n          skeleton: {\n            from: skeletonFrom,\n            to: rgba(skeletonFrom, 0.5),\n          },\n        }\n      }\n\n      const bg = base.bg\n      const skeletonFrom = blend(base.bg, tints[100])\n\n      return {\n        bg,\n        border: blend(bg, tints[100]),\n        fg: blend(bg, tints[700]),\n        muted: {\n          fg: blend(bg, tints[600]),\n        },\n        accent: {\n          fg: blend(bg, stateTones.critical[500]),\n        },\n        link: {\n          fg: blend(bg, stateTones.primary[600]),\n        },\n        code: {\n          bg: blend(bg, tints[50]),\n          fg: blend(bg, tints[600]),\n        },\n        skeleton: {\n          from: skeletonFrom,\n          to: rgba(skeletonFrom, 0.5),\n        },\n      }\n    },\n\n    button: ({base, mode, muted, solid}) => {\n      if (mode === 'bleed') {\n        return {\n          enabled: {\n            ...muted.enabled,\n            border: muted.enabled.bg,\n          },\n          hovered: {\n            ...muted.hovered,\n            border: muted.hovered.bg,\n          },\n          pressed: {\n            ...muted.pressed,\n            border: muted.pressed.bg,\n          },\n          selected: {\n            ...muted.selected,\n            border: muted.selected.bg,\n          },\n          disabled: {\n            ...muted.disabled,\n            border: muted.disabled.bg,\n          },\n        }\n      }\n\n      if (mode === 'ghost') {\n        return {\n          ...solid,\n          enabled: {\n            ...muted.enabled,\n            border: base.border,\n          },\n          disabled: muted.disabled,\n        }\n      }\n\n      return solid\n    },\n\n    card: ({base, dark: navbar, muted, name, solid, state}) => {\n      if (state === 'hovered') {\n        return muted[name].hovered\n      }\n\n      if (state === 'disabled') {\n        return muted[name].disabled\n      }\n\n      const isNeutral = NEUTRAL_TONES.includes(name)\n      const stateTones = navbar ? legacyTones.state.navbar : legacyTones.state.default\n      const tints: LegacyThemeTints = stateTones[name] || stateTones.default\n\n      const dark = stateTones.dark\n      const blend = dark ? _screen : _multiply\n\n      if (state === 'pressed') {\n        if (isNeutral) {\n          return muted.primary.pressed\n        }\n\n        return muted[name].pressed\n      }\n\n      if (state === 'selected') {\n        if (isNeutral) {\n          return solid.primary.enabled\n        }\n\n        return solid[name].enabled\n      }\n\n      const bg = base.bg\n      const skeletonFrom = blend(base.bg, tints[dark ? 900 : 100])\n\n      return {\n        bg,\n        fg: base.fg,\n        border: base.border,\n        muted: {\n          fg: blend(base.bg, tints[dark ? 400 : 600]),\n        },\n        accent: {\n          fg: blend(base.bg, stateTones.critical[dark ? 400 : 500]),\n        },\n        link: {\n          fg: blend(base.bg, stateTones.primary[dark ? 400 : 600]),\n        },\n        code: {\n          bg: blend(base.bg, tints[dark ? 950 : 50]),\n          fg: tints[dark ? 400 : 600],\n        },\n        skeleton: {\n          from: skeletonFrom,\n          to: rgba(skeletonFrom, 0.5),\n        },\n      }\n    },\n\n    input: ({base, dark: navbar, mode, state}) => {\n      const stateTones = navbar ? legacyTones.state.navbar : legacyTones.state.default\n      const dark = stateTones.dark\n      const blend = dark ? _screen : _multiply\n\n      if (mode === 'invalid') {\n        const tints = stateTones.critical\n\n        return {\n          bg: blend(base.bg, tints[50]),\n          fg: blend(base.bg, tints[700]),\n          border: blend(base.bg, tints[200]),\n          placeholder: blend(base.bg, tints[400]),\n        }\n      }\n\n      if (state === 'hovered') {\n        return {\n          bg: base.bg,\n          fg: base.fg,\n          border: blend(base.bg, hues.gray[300].hex),\n          placeholder: blend(base.bg, hues.gray[400].hex),\n        }\n      }\n\n      if (state === 'disabled') {\n        return {\n          bg: blend(base.bg, hues.gray[50].hex),\n          fg: blend(base.bg, hues.gray[200].hex),\n          border: blend(base.bg, hues.gray[100].hex),\n          placeholder: blend(base.bg, hues.gray[100].hex),\n        }\n      }\n\n      if (state === 'readOnly') {\n        return {\n          bg: blend(base.bg, hues.gray[50].hex),\n          fg: blend(base.bg, hues.gray[800].hex),\n          border: blend(base.bg, hues.gray[200].hex),\n          placeholder: blend(base.bg, hues.gray[400].hex),\n        }\n      }\n\n      return {\n        bg: base.bg,\n        fg: base.fg,\n        border: base.border,\n        placeholder: blend(base.bg, hues.gray[700].hex),\n      }\n    },\n\n    selectable: ({base, muted, tone, solid, state}) => {\n      if (state === 'enabled') {\n        return {\n          ...muted[tone].enabled,\n          bg: base.bg,\n        }\n      }\n\n      if (state === 'pressed') {\n        if (tone === 'default') {\n          return muted.primary.pressed\n        }\n\n        return muted[tone].pressed\n      }\n\n      if (state === 'selected') {\n        if (tone === 'default') {\n          return solid.primary.enabled\n        }\n\n        return solid[tone].enabled\n      }\n\n      if (state === 'disabled') {\n        return {\n          ...muted[tone].disabled,\n          bg: base.bg,\n        }\n      }\n\n      return muted[tone][state]\n    },\n\n    spot: ({base, key}) => {\n      const dark = _isDark(base.bg, base.fg)\n      const blend = dark ? _screen : _multiply\n\n      return blend(base.bg, hues[key][dark ? 400 : 500].hex)\n    },\n\n    syntax: ({base, dark: navbar}) => {\n      const stateTones = navbar ? legacyTones.state.navbar : legacyTones.state.default\n      const dark = stateTones.dark\n      const blend = dark ? _screen : _multiply\n      const mainShade = 600\n      const secondaryShade = 400\n\n      return {\n        atrule: blend(base.bg, hues.purple[mainShade].hex),\n        attrName: blend(base.bg, stateTones.positive[mainShade]),\n        attrValue: blend(base.bg, stateTones.caution[mainShade]),\n        attribute: blend(base.bg, stateTones.caution[mainShade]),\n        boolean: blend(base.bg, hues.purple[mainShade].hex),\n        builtin: blend(base.bg, hues.purple[mainShade].hex),\n        cdata: blend(base.bg, stateTones.caution[mainShade]),\n        char: blend(base.bg, stateTones.caution[mainShade]),\n        class: blend(base.bg, hues.orange[mainShade].hex),\n        className: blend(base.bg, hues.cyan[mainShade].hex),\n        comment: blend(base.bg, stateTones.default[secondaryShade]),\n        constant: blend(base.bg, hues.purple[mainShade].hex),\n        deleted: blend(base.bg, stateTones.critical[mainShade]),\n        doctype: blend(base.bg, stateTones.default[secondaryShade]),\n        entity: blend(base.bg, stateTones.critical[mainShade]),\n        function: blend(base.bg, stateTones.positive[mainShade]),\n        hexcode: blend(base.bg, stateTones.primary[mainShade]),\n        id: blend(base.bg, hues.purple[mainShade].hex),\n        important: blend(base.bg, hues.purple[mainShade].hex),\n        inserted: blend(base.bg, stateTones.caution[mainShade]),\n        keyword: blend(base.bg, hues.magenta[mainShade].hex),\n        number: blend(base.bg, hues.purple[mainShade].hex),\n        operator: blend(base.bg, hues.magenta[mainShade].hex),\n        prolog: blend(base.bg, stateTones.default[secondaryShade]),\n        property: blend(base.bg, stateTones.primary[mainShade]),\n        pseudoClass: blend(base.bg, stateTones.caution[mainShade]),\n        pseudoElement: blend(base.bg, stateTones.caution[mainShade]),\n        punctuation: blend(base.bg, stateTones.default[mainShade]),\n        regex: blend(base.bg, stateTones.primary[mainShade]),\n        selector: blend(base.bg, stateTones.critical[mainShade]),\n        string: blend(base.bg, stateTones.caution[mainShade]),\n        symbol: blend(base.bg, hues.purple[mainShade].hex),\n        tag: blend(base.bg, stateTones.critical[mainShade]),\n        unit: blend(base.bg, hues.orange[mainShade].hex),\n        url: blend(base.bg, stateTones.critical[mainShade]),\n        variable: blend(base.bg, stateTones.critical[mainShade]),\n      }\n    },\n  })\n}\n","import {studioTheme as defaults, ThemeFonts} from '@sanity/ui'\nimport {LegacyThemeProps} from './types'\n\nexport function buildFonts(cssCustomProperties: LegacyThemeProps): ThemeFonts {\n  return {\n    ...defaults.fonts,\n    code: {\n      ...defaults.fonts.code,\n      family: cssCustomProperties['--font-family-monospace'] || defaults.fonts.code.family,\n    },\n    heading: {\n      ...defaults.fonts.heading,\n      family: cssCustomProperties['--font-family-base'] || defaults.fonts.code.family,\n    },\n    label: {\n      ...defaults.fonts.label,\n      family: cssCustomProperties['--font-family-base'] || defaults.fonts.code.family,\n    },\n    text: {\n      ...defaults.fonts.text,\n      family: cssCustomProperties['--font-family-base'] || defaults.fonts.code.family,\n    },\n  }\n}\n","import {_toHex} from './helpers'\nimport {LegacyThemeProps} from './types'\n\nexport interface LegacyPalette {\n  black: string\n  component: {\n    bg: string\n    fg: string\n  }\n  defaultButton: {\n    default: {\n      base: string\n    }\n    primary: {\n      base: string\n    }\n    success: {\n      base: string\n    }\n    warning: {\n      base: string\n    }\n    danger: {\n      base: string\n    }\n  }\n  focus: {\n    base: string\n  }\n  gray: {\n    base: string\n  }\n  mainNavigation: {\n    bg: string\n    fg: string\n  }\n  state: {\n    info: {\n      fg: string\n    }\n    success: {\n      fg: string\n    }\n    warning: {\n      fg: string\n    }\n    danger: {\n      fg: string\n    }\n  }\n}\n\nexport function buildLegacyPalette(cssCustomProperties: LegacyThemeProps): LegacyPalette {\n  return {\n    black: _toHex(cssCustomProperties['--black']),\n    component: {\n      bg: _toHex(cssCustomProperties['--component-bg']),\n      fg: _toHex(cssCustomProperties['--component-text-color']),\n    },\n    defaultButton: {\n      default: {\n        base: _toHex(cssCustomProperties['--default-button-color']),\n      },\n      primary: {\n        base: _toHex(cssCustomProperties['--default-button-primary-color']),\n      },\n      success: {\n        base: _toHex(cssCustomProperties['--default-button-success-color']),\n      },\n      warning: {\n        base: _toHex(cssCustomProperties['--default-button-warning-color']),\n      },\n      danger: {\n        base: _toHex(cssCustomProperties['--default-button-danger-color']),\n      },\n    },\n    focus: {\n      base: _toHex(cssCustomProperties['--focus-color']),\n    },\n    gray: {\n      base: _toHex(cssCustomProperties['--gray-base']),\n    },\n    mainNavigation: {\n      bg: _toHex(cssCustomProperties['--main-navigation-color']),\n      fg: _toHex(cssCustomProperties['--main-navigation-color--inverted']),\n    },\n    state: {\n      info: {\n        fg: _toHex(cssCustomProperties['--state-info-color']),\n      },\n      success: {\n        fg: _toHex(cssCustomProperties['--state-success-color']),\n      },\n      warning: {\n        fg: _toHex(cssCustomProperties['--state-warning-color']),\n      },\n      danger: {\n        fg: _toHex(cssCustomProperties['--state-danger-color']),\n      },\n    },\n  }\n}\n","import {_buildTints, _isDark} from './helpers'\nimport {LegacyThemeTints} from './types'\nimport {LegacyPalette} from './palette'\n\nexport interface LegacyTones {\n  button: {\n    default: {\n      bg: string\n      fg: string\n      dark: boolean\n\n      default: LegacyThemeTints\n      transparent: LegacyThemeTints\n      primary: LegacyThemeTints\n      positive: LegacyThemeTints\n      caution: LegacyThemeTints\n      critical: LegacyThemeTints\n    }\n\n    navbar: {\n      bg: string\n      fg: string\n      dark: boolean\n\n      default: LegacyThemeTints\n      transparent: LegacyThemeTints\n      primary: LegacyThemeTints\n      positive: LegacyThemeTints\n      caution: LegacyThemeTints\n      critical: LegacyThemeTints\n    }\n  }\n\n  state: {\n    default: {\n      bg: string\n      fg: string\n      dark: boolean\n\n      default: LegacyThemeTints\n      transparent: LegacyThemeTints\n      primary: LegacyThemeTints\n      positive: LegacyThemeTints\n      caution: LegacyThemeTints\n      critical: LegacyThemeTints\n    }\n\n    navbar: {\n      bg: string\n      fg: string\n      dark: boolean\n\n      default: LegacyThemeTints\n      transparent: LegacyThemeTints\n      primary: LegacyThemeTints\n      positive: LegacyThemeTints\n      caution: LegacyThemeTints\n      critical: LegacyThemeTints\n    }\n  }\n}\n\nexport function buildLegacyTones(legacyPalette: LegacyPalette): LegacyTones {\n  return {\n    state: {\n      default: {\n        bg: legacyPalette.component.bg,\n        fg: legacyPalette.component.fg,\n        dark: _isDark(legacyPalette.component.bg, legacyPalette.component.fg),\n        default: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.gray.base,\n          legacyPalette.component.fg\n        ),\n        transparent: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.gray.base,\n          legacyPalette.component.fg\n        ),\n        primary: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.state.info.fg,\n          legacyPalette.component.fg\n        ),\n        positive: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.state.success.fg,\n          legacyPalette.component.fg\n        ),\n        caution: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.state.warning.fg,\n          legacyPalette.component.fg\n        ),\n        critical: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.state.danger.fg,\n          legacyPalette.component.fg\n        ),\n      },\n      navbar: {\n        bg: legacyPalette.mainNavigation.bg,\n        fg: legacyPalette.mainNavigation.fg,\n        dark: _isDark(legacyPalette.mainNavigation.bg, legacyPalette.mainNavigation.fg),\n\n        default: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.gray.base,\n          legacyPalette.mainNavigation.fg\n        ),\n        transparent: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.gray.base,\n          legacyPalette.mainNavigation.fg\n        ),\n        primary: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.state.info.fg,\n          legacyPalette.mainNavigation.fg\n        ),\n        positive: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.state.success.fg,\n          legacyPalette.mainNavigation.fg\n        ),\n        caution: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.state.warning.fg,\n          legacyPalette.mainNavigation.fg\n        ),\n        critical: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.state.danger.fg,\n          legacyPalette.mainNavigation.fg\n        ),\n      },\n    },\n    button: {\n      default: {\n        bg: legacyPalette.component.bg,\n        fg: legacyPalette.component.fg,\n        dark: _isDark(legacyPalette.component.bg, legacyPalette.component.fg),\n\n        default: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.defaultButton.default.base,\n          legacyPalette.component.fg\n        ),\n        transparent: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.defaultButton.default.base,\n          legacyPalette.component.fg\n        ),\n        primary: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.defaultButton.primary.base,\n          legacyPalette.component.fg\n        ),\n        positive: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.defaultButton.success.base,\n          legacyPalette.component.fg\n        ),\n        caution: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.defaultButton.warning.base,\n          legacyPalette.component.fg\n        ),\n        critical: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.defaultButton.danger.base,\n          legacyPalette.component.fg\n        ),\n      },\n      navbar: {\n        bg: legacyPalette.mainNavigation.bg,\n        fg: legacyPalette.mainNavigation.fg,\n        dark: _isDark(legacyPalette.mainNavigation.bg, legacyPalette.mainNavigation.fg),\n\n        default: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.defaultButton.default.base,\n          legacyPalette.mainNavigation.fg\n        ),\n        transparent: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.defaultButton.default.base,\n          legacyPalette.mainNavigation.fg\n        ),\n        primary: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.defaultButton.primary.base,\n          legacyPalette.mainNavigation.fg\n        ),\n        positive: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.defaultButton.success.base,\n          legacyPalette.mainNavigation.fg\n        ),\n        caution: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.defaultButton.warning.base,\n          legacyPalette.mainNavigation.fg\n        ),\n        critical: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.defaultButton.danger.base,\n          legacyPalette.mainNavigation.fg\n        ),\n      },\n    },\n  }\n}\n","import {black, blue, gray, green, red, white, yellow} from '@sanity/color'\nimport {studioTheme as defaults} from '@sanity/ui'\nimport {StudioTheme} from '../types'\nimport {buildColor} from './color'\nimport {buildFonts} from './fonts'\nimport {_isDark} from './helpers'\nimport {buildLegacyPalette} from './palette'\nimport {buildLegacyTones} from './tones'\nimport {LegacyThemeProps} from './types'\n\n/**\n * Build a Sanity UI theme from legacy CSS properties.\n *\n * @example\n * ```tsx\n * import {buildLegacyTheme, defineConfig} from 'sanity'\n *\n * export default defineConfig({\n *   // project configuration ...\n *\n *   // Customize theming\n *   theme: buildLegacyTheme({\n *     '--black': '#000',\n *     '--gray': '#777',\n *     '--focus-color': '#00f',\n *   })\n * })\n * ```\n *\n * @public\n */\nexport function buildLegacyTheme(partialLegacyTheme: Partial<LegacyThemeProps>): StudioTheme {\n  const legacyTheme = resolveLegacyTheme(partialLegacyTheme)\n  const legacyPalette = buildLegacyPalette(legacyTheme)\n  const legacyTones = buildLegacyTones(legacyPalette)\n\n  const color = buildColor(legacyPalette, legacyTones)\n  const fonts = buildFonts(legacyTheme)\n\n  return {\n    __dark: _isDark(color.light.default.base.bg, color.light.default.base.fg),\n    __legacy: true,\n    ...defaults,\n    color,\n    focusRing: {\n      offset: -1,\n      width: 2,\n    },\n    fonts,\n    media: [\n      parseInt(legacyTheme['--screen-medium-break'], 10) || 512,\n      parseInt(legacyTheme['--screen-default-break'], 10) || 640,\n      parseInt(legacyTheme['--screen-large-break'], 10) || 960,\n      parseInt(legacyTheme['--screen-xlarge-break'], 10) || 1600,\n    ],\n  }\n}\n\nconst defaultCustomProperties: LegacyThemeProps = {\n  '--font-family-monospace': defaults.fonts.code.family,\n  '--font-family-base': defaults.fonts.text.family,\n\n  '--black': black.hex,\n  '--white': white.hex,\n\n  // Brand\n  '--brand-primary': blue[500].hex,\n\n  // Component\n  '--component-bg': white.hex,\n  '--component-text-color': black.hex,\n\n  // Gray\n  '--gray': gray[500].hex,\n  '--gray-base': gray[500].hex,\n\n  // Default button\n  '--default-button-color': gray[500].hex,\n  '--default-button-danger-color': red[500].hex,\n  '--default-button-primary-color': blue[500].hex,\n  '--default-button-success-color': green[500].hex,\n  '--default-button-warning-color': yellow[500].hex,\n\n  // Focus\n  '--focus-color': blue[500].hex,\n\n  // Screen\n  '--screen-medium-break': '512px',\n  '--screen-default-break': '640px',\n  '--screen-large-break': '960px',\n  '--screen-xlarge-break': '1600px',\n\n  // State\n  '--state-info-color': blue[500].hex,\n  '--state-success-color': green[500].hex,\n  '--state-warning-color': yellow[500].hex,\n  '--state-danger-color': red[500].hex,\n\n  // Navbar\n  '--main-navigation-color': black.hex,\n  '--main-navigation-color--inverted': white.hex,\n}\n\nfunction resolveLegacyTheme(legacyTheme: Partial<LegacyThemeProps>): LegacyThemeProps {\n  const props: LegacyThemeProps = {\n    ...defaultCustomProperties,\n    ...legacyTheme,\n  }\n\n  // Update properties (order matters)\n  props['--focus-color'] = legacyTheme['--focus-color'] || props['--brand-primary']\n  props['--default-button-primary-color'] =\n    legacyTheme['--default-button-primary-color'] || props['--brand-primary']\n  props['--main-navigation-color'] = legacyTheme['--main-navigation-color'] || props['--black']\n  props['--main-navigation-color--inverted'] =\n    legacyTheme['--main-navigation-color--inverted'] || props['--white']\n  props['--state-info-color'] = legacyTheme['--brand-primary'] || props['--brand-primary']\n\n  return props\n}\n","import {studioTheme} from '@sanity/ui'\nimport {StudioTheme} from './types'\n\nexport * from './_legacy'\nexport * from './types'\n\n/** @internal */\nexport const defaultTheme: StudioTheme = {\n  ...studioTheme,\n  focusRing: {offset: -1, width: 2},\n}\n"],"names":["noop","NoopTracker","children","jsx","Fragment","createNoopTrackerScope","useReportedValues","Tracker","useReporter","isFunc","value","read","createUseReporter","Context","id","isEqual","Object","is","add","update","remove","React","useContext","previous","useRef","useLayoutEffect","current","createStore","reportedValues","Map","publish","subscribe","createPubsub","debouncedPublish","debounce","trailing","Array","from","entries","has","set","delete","didWarn","useReporterGuard","console","warn","Error","useReportedValueGuard","useSubscribeGuard","DEFAULT_CONTEXT","getNextId","createTrackerScope","createContext","context","values","setValues","useState","props","store","useMemo","Provider","useAutoIdReporter","CORNER_RADIUS","INTERACTIVE_STROKE_WIDTH","CONNECTOR_MARGIN","ARROW_MARGIN_X","ARROW_MARGIN_Y","ARROW_SIZE","ARROW_THRESHOLD","STROKE_WIDTH","DEBUG","DEBUG_LAYER_BOUNDS","trackerScope","ConnectorContext","isReviewChangesOpen","onOpenReviewChanges","onSetFocus","ChangeFieldWrapper","ref","isHover","setHover","onMouseEnter","useCallback","onMouseLeave","PathUtils","toString","path","element","isChanged","hasFocus","hasHover","hasRevertHover","deepCompare","handleClick","event","setFocusWithStopPropagation","onClick","stopPropagation","useUnique","valueRef","createHookFromObservableFactory","observableFactory","initialValue","initialLoadingTuple","initialResult","type","tuple","useLoadableFromCreateLoadable","_arg","memoArg","result","useMemoObservable","of","pipe","switchMap","arg","concat","map","scan","next","prevValue","distinctUntilChanged","prevIsLoading","nextValue","nextIsLoading","catchError","error","isNonNullable","DRAFTS_FOLDER","DRAFTS_PREFIX","isDraft","document","isDraftId","_id","startsWith","getIdPair","draftId","getDraftId","publishedId","getPublishedId","isPublishedId","slice","length","createDraftFrom","newDraftFrom","createPublishedFrom","collate","documents","byId","reduce","res","doc","entry","get","_type","published","draft","removeDupes","filter","EMPTY_OBJECT","freeze","EMPTY_ARRAY","getGlobalScope","globalThis","window","self","global","globalScope","isArray","isRecord","Boolean","isString","isTruthy","ResizeObserver","Polyfill","createSharedResizeObserver","createPubSub","resizeObserver","observe","observer","options","unsubscribe","find","e","target","unobserve","BUNDLED_DOC_TYPES","_isSanityDocumentTypeDefinition","def","includes","name","_isCustomDocumentTypeDefinition","GROQ_KEYWORDS","VALID_FIELD","fieldNeedsEscape","fieldName","test","escapeField","escapeFirst","isEmptyArray","joinPath","pathArray","i","pathSegment","isFirst","needsEscape","FONT_SANS_SERIF","FONT_MONOSPACE","uncaughtErrorHandler","join","LOADING_STATE","isLoading","useLoadable","value$","initial","asLoadable","useThrottledCallback","callback","wait","throttledCallback","throttle","animationSpeed","ChangeBarWrapper","styled","div","changed","disabled","isReviewChangeOpen","css","ChangeBar","ChangeBarButton","FieldWrapper","$zIndex","ChangeBarMarker","theme","notSelectedColor","sanity","color","spot","yellow","screenMedium","media","button","$withHoverEffect","ElementWithChangeBar","withHoverEffect","hover","zIndex","useLayer","handleMouseEnter","handleMouseLeave","changeBar","jsxs","tabIndex","focus","memo","className","layer","ChangeIndicator","ChangeIndicatorContext","fullPath","focusPath","ScrollContext","useOnScroll","parentContext","useEffect","ScrollContainer","forwardRef","as","onScroll","rest","forwardedRef","useForwardedRef","childContext","handleScroll","el","addEventListener","passive","capture","removeEventListener","createElement","ScrollMonitor","findMostSpecificTarget","targetType","pathString","indexOf","fromString","exactId","mostSpecific","targetId","numEqual","numEqualSegments","lastPathSegment","pathOnlyDiffersByKey","isKeyedObject","isChangeBar","v","hasOverflowScroll","overflow","getComputedStyle","isScrollable","scrollableContent","scrollHeight","offsetHeight","scrollWidth","offsetWidth","SCROLL_INTO_VIEW_TOP_PADDING","scrollIntoView","field","parentElementWithScroll","parentElement","scroll","top","scrollTop","rect","bounds","left","behavior","getOffsetsTo","source","height","width","foundScrollContainer","contains","offsetTop","offsetLeft","scrollLeft","offsetParent","arrowPath","x","y","dir","moveTo","lineTo","strings","delim","quadCurve","x1","y1","generateConnectorPath","line","to","fromX","fromY","toX","toY","cmds","r1","Math","min","abs","isAbove","push","isBelow","getConnectorLinePoint","centerY","startY","endY","outOfBounds","mapConnectorToLine","connector","fromBounds","bottom","right","toBounds","maxStartY","max","ClampedRect","ConnectorPath","strokeColor","InteractivePath","RightBarWrapper","Connector","linePathDescription","d","strokeWidth","useResizeObserver","onResize","SvgWrapper","svg","getState","allReportedValues","hovered","rootElement","changeBarsWithHover","changeBarsWithFocus","reportedChangeBar","isHoverConnector","changeBars","connectors","change","ConnectorsOverlay","setHovered","setState","visibleConnectors","sortBy","c","handleScrollOrResize","style","ConnectorGroup","onConnectorClick","EnabledChangeConnectorRoot","restProps","setRootElement","contextValue","DisabledChangeConnectorRoot","ChangeConnectorRoot","NoJsStyles","NoJavascript","href","errorHandlerScript","GlobalErrorHandler","dangerouslySetInnerHTML","__html","Favicons","basePath","base","replace","rel","sizes","globalStyles","DefaultDocument","entryPath","lang","charSet","content","src","InsufficientPermissionsMessage","currentUser","title","operationLabel","roles","plural","Box","padding","Inline","space","Text","size","AccessDeniedIcon","weight","marginTop","r","array","sep","item","IntentButton","Button","role","IntentLink","StyledCard","Card","PreviewCardContext","selected","usePreviewCard","PreviewCard","forwardedAs","TextWithToneStyle","$tone","tone","muted","enabled","fg","TextWithTone","dimmed","createMultiKeyWeakMap","rootMap","WeakMap","idCache","randomId","floor","random","padStart","assignId","key","cachedId","arrangeKeys","keys","Set","sort","a","b","localeCompare","getDeep","firstKey","restOfKeys","node","setDeep","ResourceCacheContext","ResourceCacheProvider","resourceCache","namespaces","nullReplacer","namespace","dependencies","dependenciesWithoutNull","dep","namespaceMap","useResourceCache","cache","CorsOriginError","constructor","projectId","supportsLocalStorage","localStorage","setItem","removeItem","err","memStore","getItem","createBroadcastChannel","storageEvents$","fromEvent","storageKey","broadcastedMessages$","Subject","messages$","merge","newValue","JSON","parse","shareReplay","broadcast","message","storage.setItem","stringify","storage.removeItem","messages","sidPattern","consumeSessionId","location","hash","sidParam","match","sid","newHash","newUrl","URL","history","replaceState","sessionId","GithubRoot","GithubLogo","xmlns","viewBox","GoogleLogo","fill","CustomLogo","provider","logo","alt","providerLogos","google","github","custom","getProviders","client","mode","providers","customProviders","thirdPartyLogin","sso","request","uri","isOfficial","some","official","url","isSupported","supported","createHrefForProvider","loginMethod","params","URLSearchParams","origin","createLoginComponent","getClient","redirectOnSingle","providerOptions","useClient","LoginComponent","setProviders","setError","then","catch","redirectUrl","loading","Flex","align","direction","gap","justify","sizing","Spinner","Stack","Heading","index","icon","text","getStorageKey","getToken","storage.getItem","token","clearToken","saveToken","time","Date","toISOString","getCurrentUser","broadcastToken","_a","user","withCredentials","tag","statusCode","config","invalidCorsConfig","isNetworkError","host","_createAuthStore","dataset","token$","startWith","state$","createClient","apiVersion","useCdn","requestTagPrefix","ignoreBrowserTokenWarning","allowReconfigure","__SANITY_STAGING__","apiHost","defer","authenticated","handleCallbackUrl","requestClient","method","query","logout","auth","state","fromEntries","k","createAuthStore","memoize","createMockAuthStore","getProviderTitle","catchWithCount","selector","input$","errors","errorOp","caught","tap","onOnline$","onOffline$","expBackoff","retryCount","pow","CONNECTING","_callback","observableCallback","onRetry$","onRetry","createErrorStatus","isOffline","attemptNo","retryAt","createConnectionStatusStore","bifur","connectionStatus$","heartbeats","mergeMapTo","throwError","ts","lastHeartbeat","successiveErrorsCount","timeUntilRetry","getTime","expiry$","timer","navigator","onLine","initialErrorStatus","triggerRetry$","NEVER","takeUntil","take","GlobalStyle","createGlobalStyle","fonts","html","backgroundColor","bg","fontFamily","family","defineConfig","createConfig","validatePlugin","pluginResult","definePlugin","pluginFactory","createPlugin","slug","fields","hidden","geopoint","imageCrop","imageHotspot","assetSourceData","description","imageAsset","fieldsets","readOnly","fieldset","preview","select","mimeType","prepare","split","asset","_ref","subtitle","Number","toFixed","orderings","by","imagePalette","imagePaletteSwatch","imageDimensions","imageMetadata","collapsable","fileAsset","isError","problem","severity","builtinTypes","createSchema","schemaDef","validated","validateSchema","types","getTypes","validation","groupProblems","hasErrors","group","problems","compiled","SchemaBuilder","compile","_validation","inferValidation","getSchemaTypeTitle","jsonType","DEFAULT_STUDIO_CLIENT_OPTIONS","FullscreenLayer","Layer","FullscreenSpinner","SpinnerWithText","marginLeft","emptyRender","_createMiddlewareComponent","defaultComponent","middlewareComponents","outerProps","middleware","renderDefault","useMiddlewareComponents","useSource","__internal","pick","flattened","flattenConfig","pickedComponents","typeName","_previewComponents","default","DefaultPreview","MediaPreview","detail","DetailPreview","inline","InlinePreview","block","BlockPreview","blockImage","BlockImagePreview","FallbackIcon","DocumentIcon","SanityDefaultPreview","layout","mediaProp","imageUrl","imageBuilder","imageUrlBuilder","renderMedia","dimensions","referrerPolicy","image","fit","dpr","renderIcon","isValidElementType","isValidElement","isImageSource","previewProps","layoutComponent","resize$","EMPTY","scroll$","orientationChange$","ROOT_MARGIN_PX","isIntersectionObserverSupported","IntersectionObserverEntry","prototype","defineProperty","intersectionRatio","intersectionObservableFor","createIntersectionObserverBased","createLegacyBased","intersectionObserverEntriesSubject","intersectionObserver","IntersectionObserver","forEach","threshold","rootMargin","Observable","mergeMap","asObservable","ev","isIntersecting","getViewport","innerWidth","innerHeight","intersects","viewport","margin","inViewport","getBoundingClientRect","isElementInViewport","observableOf","visibilityChange$","useVisibility","hideDelay","visible","setVisible","isDocumentVisible$","Document","inViewport$","visible$","isDocumentVisible","isVisible","delay","sub","INITIAL_STATE","PENDING_STATE","useDocumentPreview","ordering","schemaType","previewValue","observeForPreview","useDocumentPreviewStore","snapshot","_extractUploadState","_resolveUploadValue","_upload","getStringOrUndefined","_b","progress","createdAt","initiated","updatedAt","updated","fileName","file","fileType","previewImage","_HIDE_DELAY","PreviewLoader","component","styleProp","setElement","isPTE","visibility","useValuePreview","minWidth","minHeight","uploadState","isPlaceholder","getPreviewPaths","selection","String","isLiveEditEnabled","liveEdit","getPreviewStateObservable","documentPreviewStore","documentId","draft$","published$","combineLatest","getMissingDocumentFallback","WarningOutlineIcon","getPreviewValueWithFallback","assignWith","objValue","srcValue","INCLUDE_FIELDS_QUERY","INCLUDE_FIELDS","AVAILABILITY_READABLE","available","reason","AVAILABILITY_PERMISSION_DENIED","AVAILABILITY_NOT_FOUND","INVALID_PREVIEW_FALLBACK","isPortableTextArray","blocks","isBlock","extractTextFromBlocks","firstBlock","isSpan","span","keysOf","PRESERVE_KEYS","errorCollector","errorsByType","getAll","clear","reportErrors","uniqueErrors","flatten","uniqBy","errorCount","groupCollapsed","first","uniqued","hasPrepare","log","groupEnd","isRenderable","assignType","inspect","FIELD_NAME_VALIDATORS","date","val","prefixType","ellipse","prefix","validateFieldValue","fieldValue","validator","assign","validatePreparedValue","preparedValue","isPlainObject","acc","validateReturnedPreview","returnValue","defaultPrepare","invokePrepare","viewOptions","withErrors","selectedValue","hasEnumListOptions","listOptions","list","getListOptions","option","isTitledListValue","prepareForPreview","rawValue","hasCustomPrepare","targetKeys","typeWithFields","targetFieldName","valueField","f","selectedOption","opt","prepareResult","returnValueResult","debounceCollect","fn","queue","idx","debounced","args","obs","clearTimeout","setTimeout","flush","queueItem","completed","currentlyFlushingQueue","queueItemIds","collectedArgs","results","complete","MAX_DOCUMENT_ID_CHUNK_SIZE","chunkDocumentIds","documentIds","chunk","chunkSize","chunks","create_preview_availability","versionedClient","observePaths","observeDocumentPairAvailability","observeDocumentAvailability","shallowEquals","draftReadability","publishedReadability","_rev","hasRev","fetchDocumentReadability","uniqueIds","fetchDocumentReadabilityChunked","ids","requestOptions","getDataUrl","json","excludeContent","observable","response","omitted","keyBy","omittedEntry","setKey","object","keyObservables","isObservable","observableFrom","combineAll","pairs","mergeAll","createEmpty","resolveMissingHeads","paths","isReferenceLike","getDocumentId","observeFields","apiConfig","currentValue","_weak","_dataset","_projectId","_strengthenOnPublish","pathsWithMissingHeads","nextHeads","uniq","refApiConfig","leads","head","tail","tails","normalizePaths","segment","createPathObserver","isReference","createPreviewObserver","observeDocumentTypeFromId","isCrossDatasetReferenceSchemaType","isCrossDatasetReference","refType","toType","isReferenceSchemaType","create_preview_documentPair","ALWAYS_INCLUDED_SNAPSHOT_PATHS","observePathsDocumentPair","availability","snapshotPaths","draftSnapshot","publishedSnapshot","combineSelections","selections","output","identity","stringifyId","maybeEscape","toSubQuery","allFields","toQuery","combinedSelections","reassemble","queryResult","reprojected","subResult","resultIdx","found","hasEqualFields","otherObject","every","isUniqueBy","itemSelector","prevItem","currItem","create_preview_observeFields","_globalListener","getGlobalEvents","allEvents$","listen","events","includeResult","share","welcome$","publishReplay","refCount","mutations$","globalEvents","fetchAllDocumentPathsWith","fetchAllDocumentPath","fetch","fetchDocumentPathsFast","fetchDocumentPathsSlow","currentDatasetListenFields","CACHE","getBatchFetcherForDataset","withConfig","fetchAll","CROSS_DATASET_PREVIEW_POLL_INTERVAL","visiblePoll$","visibilityState","crossDatasetListenFields","batchFetcher","createCachedFieldObserver","latest","changes$","cachedObserveFields","cacheKey","existingObservers","missingFields","difference","cachedFieldObserver","cachedFieldObservers","cached","snapshots","pickFrom","objects","getFirstFieldValue","createDocumentPreviewStore","__proxy_observePaths","unstable_observeDocumentPairAvailability","unstable_observePathsDocumentPair","isDocumentType","isSanityType","getSearchableTypes","schema","getTypeNames","calculateScore","searchTerms","phrases","uniqueSearchPhrases","words","uniqueSearchWords","partitionAndSanitizeSearchTerms","phraseScore","phraseWhy","calculatePhraseScore","wordScore","wordWhy","calculateWordScore","applyWeights","searchSpec","hits","terms","specByType","spec","hit","typeSpec","stories","pathSpec","score","why","totalScore","rank","resultIndex","sanitizedValue","toLowerCase","trim","fieldScore","matchCount","term","uniqueSearchTerms","uniqueValueTerms","compact","toLower","matches","intersection","all","union","searchPhrases","searchWords","partition","stripWrappingQuotes","str","SPECIAL_CHARS","STRIP_EDGE_CHARS","tokenize","string","DEFAULT_LIMIT","combinePaths","flow","createSearchSpecs","optimizeIndexedPaths","hasIndexedPaths","specs","__experimental_search","p","mapWith","pathWithMapper","createConstraints","combinedSearchPaths","configForType","constraints","_term","joinedPath","constraint","extractTermsFromQuery","quotedQueries","unquotedQuery","quotedTerms","remainingTerms","createSearchQuery","searchOpts","_c","_d","exactSearchSpecs","optimizedSpecs","filters","includeDrafts","cfg","sortDirection","sortField","groqComments","comments","s","updatedQuery","offset","limit","toGroqParams","__types","__limit","__offset","getSearchTerms","searchParams","createWeightedSearch","commonOpts","search","unique","skipSortByScore","READABLE","PERMISSION_DENIED","NOT_FOUND","getReferenceInfo","referenceType","pairAvailability$","pairAvailability","draftRef","publishedRef","typeName$","draftTypeName","publishedTypeName","refSchemaType","memberType","previewPaths","draftPreview$","publishedPreview$","getCounterpartIds","collatedHits","collatedHit","getExistingCounterparts","referenceSearch","textTerm","searchWeighted","collated","existingCounterpartIds","createPatchChannel","_subscribers","msg","subscriber","splice","SANITY_PATCH_TYPE","Symbol","for","setIfMissing","patchType","insert","items","position","unset","diffMatchPatch","inc","amount","dec","prefixPath","patch","PatchEvent","input","patches","prepend","append","prefixAll","STATUS_TONES","warning","SuffixBox","Alert","status","suffix","radius","ErrorOutlineIcon","flex","usePrevious","useDidUpdate","didUpdate","compare","FormBuilderContext","useFormBuilder","formBuilder","POPOVER_PROPS","constrainSize","portal","ArrayOfObjectsFunctions","onValueCreate","onItemAppend","menuButtonId","useId","insertItem","itemType","handleAddBtnClick","Tooltip","Grid","AddIcon","gridTemplateColumns","MenuButton","menu","Menu","memberDef","referenceIcon","MenuItem","popover","getIcon","level","InfoOutlineIcon","IconText","primary","caution","critical","DefaultMarkers","markers","renderCustomMarkers","CustomMarkers","components","marginRight","marginBottom","DefaultCustomMarkers","FormCallbacksContext","FormCallbacksProvider","useFormCallbacks","ctx","PresenceContext","PresenceProvider","presence","useFormFieldPresence","useChildPresence","inclusive","ValidationContext","ValidationProvider","useValidationMarkers","useChildValidation","marker","missingPatchChannel","FormBuilderProvider","__internal_patchChannel","patchChannel","autoFocus","changesOpen","collapsedFieldSets","collapsedPaths","filterField","focused","groups","members","onChange","onFieldGroupSelect","onPathBlur","onPathFocus","onPathOpen","onSetFieldSetCollapsed","onSetPathCollapsed","renderField","renderInput","renderItem","renderPreview","unstable","documentValue","documentValueRef","ArrayFunctions","Markers","assetSources","directUploads","getDocument","FormProvider","form","Input","useInputComponent","Field","useFieldComponent","Preview","usePreviewComponent","Item","useItemComponent","inputProps","fieldProps","itemProps","FormBuilder","RootInput","handleCollapseField","handleExpandField","handleBlur","handleFocus","handleChange","focusRef","handleSelectFieldGroup","groupName","handleOpenField","handleCloseField","handleCollapseFieldSet","fieldSetName","handleExpandFieldSet","rootInputProps","elementProps","onBlur","onFocus","m","kind","onFieldClose","onFieldCollapse","onFieldSetCollapse","onFieldExpand","onFieldSetExpand","onFieldOpen","useReferenceInputOptions","ReferenceInputOptionsProvider","activePath","EditReferenceLinkComponent","onEditReference","initialValueTemplateItems","ReviewChangesContext","useReviewChanges","reviewChanges","useScrollIntoViewOnFocusWithin","elementRef","hasFocusWithin","hadFocus","scrollMode","whatwgRNG","rnds8","Uint8Array","getRandomValues","getByteHexTable","table","substring","randomKey","n","PRESENCE_MENU_POPOVER_PROPS","AvatarStackCard","$selected","selectable","pressed","border","TooltipContentBox","getTooltipText","displayName","DocumentPreviewPresence","useTheme","invertedScheme","dark","uniqueUsers","tooltipContent","scheme","AvatarStack","maxLength","UserAvatar","MAX_AVATARS_DOCK","DEFAULT_MAX_AVATARS_FIELDS","AVATAR_DISTANCE","AVATAR_SIZE","AVATAR_ARROW_HEIGHT","INTERSECTION_THRESHOLDS","INTERSECTION_ELEMENT_PADDING","SNAP_TO_DOCK_DISTANCE_TOP","SNAP_TO_DOCK_DISTANCE_BOTTOM","SLIDE_RIGHT_THRESHOLD_TOP","SLIDE_RIGHT_THRESHOLD_BOTTOM","splitRight","indexFromMax","FlexWrapper","InnerBox","FormFieldPresenceContext","PresenceTooltip","placement","calcAvatarStackWidth","len","FieldPresenceInner","animateArrowFrom","maxAvatars","stack","uniquePresence","sorted","_presence","lastActiveAt","avatars","reverse","_visible","AvatarCounter","count","maxWidth","currWidth","av","transform","transitionProperty","transitionDuration","transitionTimingFunction","FieldPresenceWithOverlay","contextPresence","FieldPresenceWithoutOverlay","FieldPresence","trimChildPath","childPath","trimLeft","PresenceScope","childPresence","createIntersectionObserver","entries$","subscription","WithIntersection","onIntersection","io","RootWrapper","OverlayWrapper","RegionWrapper","TopRegionWrapper","$debug","margins","MiddleRegionWrapper","BottomRegionWrapper","toPx","num","negate","RegionsWithIntersections","regions","render","marginsProp","overlayRef","intersections","setIntersections","regionsWithIntersectionDetails","region","boundsBottom","boundsTop","boundingClientRect","aboveTop","belowBottom","distanceTop","intersectionRect","distanceBottom","forceWidth","ITEM_TRANSITION","withSpacerHeight","withIntersection","_regionsWithIntersectionDetails","prevRect","prevBottom","spacerHeight","orderByTop","orderBy","plus","sum","regionsWithSpacerHeight","grouped","inside","groupBy","_withSpacerHeight","grp","indent","w","_withIntersection","Spacer","DEFAULT_MARGINS","HTMLElement","getRelativeRect","parent","regionsWithComputedRects","StickyOverlay","renderCallback","containerWidth","topSpacing","bottomSpacing","counts","_counts","nearTop","nearBottom","PresenceDock","closeCount","PresenceInside","allPresenceItems","topMargin","rightMargin","bottomMargin","leftMargin","leftOffset","display","flexDirection","alignItems","originalLeft","diffRight","pointerEvents","DebugValue","PassThrough","OverlayEnabled","OverlayDisabled","PresenceOverlay","VALIDATION_COLORS","hues","red","hex","info","blue","VALIDATION_ICONS","FormFieldValidationStatus","__unstable_showSummary","showSummary","fontSize","warnings","hasWarnings","hasInfo","statusIcon","statusColor","FormFieldValidationSummary","itemIndex","FormFieldValidationStatusItem","fallbackPlacements","errorMarkers","warningMarkers","errorLen","warningLen","errorsStr","warningsStr","errorText","warningText","hasBoth","FormFieldHeaderText","inputId","hasValidations","htmlFor","FormFieldHeader","__unstable_presence","paddingY","FormField","focusRingBorderStyle","focusRingStyle","opts","focusRing","focusRingOutsetWidth","focusRingInsetWidth","bgColor","Root","legend","ToggleButton","attrs","rem","ToggleIconBox","FormFieldSetLegend","collapsed","collapsible","ToggleArrowRightIcon","getChildren","Content","$borderLeft","FormFieldSet","columns","onCollapse","onExpand","hasValidationMarkers","handleToggle","gapX","gapY","paddingLeft","FormFieldStatus","MOVING_ITEM_CLASS_NAME","DRAG_HANDLE_ATTRIBUTE","sortableHandle","Component","SortableHandle","sortableItem","SortableElement","sortableContainer","Container","SortableContainer","Sortable","SortableList","KeyCode","Space","Enter","Esc","Up","Left","Right","Down","KEYCODES","lift","drop","cancel","up","down","sortableList","helperClass","keyCodes","axis","lockAxis","useDragHandle","shouldCancelStart","isDragHandle","DragHandleButton","grid","DRAG_HANDLE_PROPS","DragHandle","DragHandleIcon","RowLayout","dragHandle","footer","paddingX","HeaderButton","ToggleArrow","open","Header","IconBox","Details","openProp","setOpen","STATUS_ICONS","AlertStrip","createProtoValue","isObjectSchemaType","isArraySchemaType","createProtoArrayValue","_key","MENU_POPOVER_PROPS","InsertMenu","onInsert","InsertMenuGroup","pos","InsertAboveIcon","InsertBelowIcon","MenuGroup","insertableType","INITIAL_LOADING_STATE","retry","EMPTY_STATE","useReferenceInfo","msgSubject","msg$","referenceInfo","concatMap","refId","previousId","useInterval","ms","tick","useReducer","setInterval","clearInterval","TimeAgo","timeSince","formatDistanceToNow","UnavailableMessage","Icon","ReferencePreview","showTypeLabel","useRootTheme","documentPresence","useDocumentPresence","notFound","insufficientPermissions","previewId","previewStub","Label","HelpCircleIcon","_updatedAt","PublishIcon","EditIcon","PreviewReferenceValue","_e","_f","stub","refTypeName","getTone","INITIAL_VALUE_CARD_STYLE","opacity","ReferencePreviewCard","ReferenceItem","_g","_h","_i","_j","parentSchemaType","onRemove","sortable","insertableTypes","EditReferenceLink","selectedState","isCurrentDocumentLiveEdit","useReferenceInput","resolvingInitialValue","_resolvingInitialValue","handleDuplicate","handleInsert","insertType","loadableReferenceInfo","hasRef","publishedReferenceExists","handleRemoveStrengthenOnPublish","weak","isEditing","EllipsisVerticalIcon","TrashIcon","CloseIcon","ReplaceIcon","DuplicateIcon","MenuDivider","OpenInNewTabIcon","handleFixStrengthMismatch","weakIs","weakShouldBe","weakWarningOverride","showWeakRefMismatch","issues","documentType","__unstable_focusRing","marginX","isObjectInputProps","isArrayInputProps","hasKey","ensureKey","DEFAULT_CONCURRENCY","withMaxConcurrency","func","concurrency","throttler","createThrottler","currentSubscriptions","pendingObservables","ready$","scheduleAndWait","check","shift","MAX_CONCURRENT_UPLOADS","uploadSanityAsset","assetType","extract","metadata","preserveFilename","storeOriginalFilename","label","creditLine","hashFile","fetchExisting","existing","assets","upload","body","uploadAsset","uploadImageAsset","uploadFileAsset","observeAssetDoc","observeImageAsset","observeFileAsset","readFile","reader","FileReader","onload","onerror","readAsArrayBuffer","abort","crypto","subtle","arrayBuffer","digest","hexFromBuffer","buffer","call","readFileAsArrayBuffer","SKIP_EXIF_ERROR_RE","EXIF_BUFFER_LENGTH","readExif","buf","exif","rotated","rotate","radians","degrees","PI","translate","flip","canvas","getContext","scale","ORIENTATION_OPS","op","ORIENTATIONS","DEFAULT_ORIENTATION","THUMB_SIZE","_orient","img","orientationNumber","orientation","ratio","drawImage","orient","orientationId","toDataURL","loadImage","Image","rotateImage","createObjectURL","UPLOAD_STATUS_KEY","UNSET_UPLOAD_PATCH","createUploadEvent","CLEANUP_EVENT","createInitialUploadEvent","now","uploadImage","upload$","stage","percent","setPreviewUrl$","exifData","uploadFile","UPLOAD_IMAGE","accepts","UPLOAD_FILE","UPLOAD_TEXT","uploaders","uploader","priority","acceptedFiles","acceptedFilesArray","baseMimeType","validType","charAt","endsWith","resolveUploader","is.type","accept","IGNORE_KEYS","isEmptyItem","getMemberTypeOfItem","itemTypeName","resolveTypeName","resolveInitialArrayValues","resolver","itemPathSegment","ArrayOfObjectsField","member","uploadSubscriptions","currentTarget","resolveInitialValue","useResolveInitialValueForType","toast","useToast","handleCollapse","handleExpand","handleCollapseItem","itemKey","handleExpandItem","handleOpenItem","handleCloseItem","itemsWithKeys","referenceItem","focusItemKey","itemPath","shouldOpen","skipInitialValue","handleMoveItem","fromIndex","refItem","toIndex","handlePrependItem","handleAppendItem","handleRemoveItem","handleFocusChildPath","supportsImageUploads","supportsFileUploads","defaultResolveUploader","handleUpload","events$","uploadProgressEvent","onItemExpand","onItemCollapse","onItemClose","onItemOpen","onItemMove","onItemRemove","onItemPrepend","onUpload","renderedInput","PrimitiveField","handleNativeChange","inputValue","isNumberSchemaType","valueAsNumber","isBooleanSchemaType","checked","hasEmptyValue","isNaN","validationError","placeholder","ObjectField","fieldsetName","handleOpen","handleClose","onOpen","onClose","readAsText","encoding","move","arr","copy","insertAfter","isStringNumeric","convertToSchemaType","candidates","acceptsBooleans","acceptsNumbers","acceptsStrings","candidate","isStringSchemaType","createPlainTextUploader","itemTypes","textContent","lines","ArrayOfPrimitivesField","handleSetCollapsed","setValue","handleAppend","itemValue","handlePrepend","insertIndex","referenceIndex","handleFocusIndex","plainTextUploader","onSetCollapsed","onMoveItem","onIndexFocus","isMemberObject","isMemberArrayOfPrimitives","ofType","isPrimitiveSchemaType","isMemberArrayOfObjects","MemberField","isDev","process","env","NODE_ENV","isProd","TRUTHY_STRINGS","FALSEY_STRINGS","BOOL_STRINGS","TRUE","prop","toLocalDate","newDate","getTimezoneOffset","hours","getHours","setHours","getTZName","Intl","DateTimeFormat","resolvedOptions","timeZone","converters","number","convert","boolean","richDate","isValidDate","local","toJSON","utc","timezone","datetime","SetMissingTypeButton","UnsetItemButton","validTypes","UntypedValueInput","useSchema","isSingleValidType","isHoistedType","Code","language","getConverters","actualType","CONVERTERS","converter","InvalidValueInput","useImperativeHandle","handleClearClick","handleConvertTo","converted","ConvertButton","onConvert","MissingKeysAlert","handleFixMissingKeys","DuplicateKeysAlert","handleFixDuplicateKeys","duplicates","MixedArrayAlert","handleRemoveNonObjectValues","nonObjectIndices","flatMap","MemberFieldError","resolvedValueType","expectedSchemaType","MemberFieldSet","fieldSet","capitalize","fieldsetMember","ArrayOfObjectsItem","parentPath","isEmptyValue","getEmptyValue","ArrayOfPrimitivesItem","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","PopoverCard","container","IncompatibleItemType","vertical","showDetails","setShowDetails","popoverRef","setPopoverRef","useClickOutside","handleKeyDown","handleShowDetails","Popover","onKeyDown","BulbOutlineIcon","UnknownIcon","textOverflow","MemberItemError","ArrayOfObjectsInputMember","ArrayOfObjectsInputMembers","ObjectInputMember","ObjectInputMembers","ObjectMembers","pass","hasAbsolutePath","FormInput","absolutePath","relativePath","FormInputInner","destinationRenderField","destinationRenderInput","destinationRenderItem","destinationRenderPreview","isDestinationReached","shouldRenderField","includeField","includeItem","itemMember","isKeySegment","fieldMember","PRESENCE_MARGINS","EditPortal","legacy_referenceElement","referenceElement","header","contents","Dialog","PopoverDialog","BUTTON_CARD_STYLE","PreviewItem","previewCardRef","childValidation","itemTypeTitle","modal","defaultResolveItemComponent","ReferenceField","handleClear","shadow","getOption","optionName","PSEUDO_OBJECTS","HIDDEN_FIELDS","NO_LEVEL_LAYOUTS","NO_LEVEL_TYPES","getTypeChain","visited","getFieldLevel","currentLevel","getArrayFieldLevel","getObjectFieldLevel","typeIfRelevant","asType","isPseudoObject","hasVisibleFields","hasListOptions","isNoLevelLayout","asOneOfTypes","ObjectOrArrayField","ImageOrFileField","hotspotField","defaultResolveFieldComponent","typeChain","t","defaultRenderField","defaultRenderInput","defaultResolveInputComponent","defaultRenderItem","defaultRenderPreview","IS_NUMERIC","unquote","splitAttr","attr","coerce","parseGradientPath","focusPathStr","seg","encodePath","formBuilderPath","arrayToJSONMatchPath","decodePath","gradientPath","getHash","decodeURIComponent","getPathFromHash","HashFocusManager","setFocusPath","handleHashChange","SimpleFocusManager","arguments","WithReferencedAsset","reference","observeAsset","waitPlaceholder","extractPastedFiles","dataTransfer","files","Promise","resolve","normalizeItems","extractDroppedFiles","toArray","webkitGetAsEntry","getAsFile","isDirectory","walk","isFile","reject","createReader","readEntries","entr","imageUrlToBlob","format","quality","loader","crossOrigin","toBlob","PASTE_INPUT_STYLE","fileTarget","FileTarget","onFiles","onFilesOver","onFilesOut","showPasteInput","setShowPasteInput","pasteInput","enteredElements","emitFiles","ctrlKey","metaKey","handlePaste","clipboardData","convertImagesToFilesAndClearContentEditable","handleDrop","preventDefault","nativeEvent","handleDragOver","handleDragEnter","fileTypes","handleDragLeave","prevShowPasteInput","onDragOver","onDragEnter","onDragLeave","onDrop","contentEditable","onPaste","targetFormat","isContentEditable","tagName","querySelectorAll","imageElements","innerHTML","images","imageBlobs","blob","File","range","createRange","selectNodeContents","sel","getSelection","removeAllRanges","addRange","withFocusRing","$border","CardWrapper","LeftSection","CodeWrapper","STALE_UPLOAD_MS","elapsedMs","UploadProgress","onCancel","onStale","filename","LinearProgress","urlToFile","xhr","XMLHttpRequest","onloadend","ext","dataURLtoFile","uuid","readAsDataURL","responseType","send","base64ToFile","base64Data","dataurl","mime","bstr","atob","u8arr","charCodeAt","handleSelectAssetFromSource","assetFromSource","uploadWith","isImage","firstAsset","originalFilename","imagePatches","FileButton","FileInputMenuItem","idProp","multiple","onSelect","textAlign","ActionsMenu","onReset","browse","downloadUrl","copyUrl","pushToast","handleCopyURL","clipboard","writeText","closable","UploadIcon","DownloadIcon","ClipboardIcon","ResetIcon","RootFlex","PlaceholderText","hoveringFiles","rejectedFilesCount","isFileType","messageIcon","ReadOnlyIcon","BinaryDocumentIcon","ImageIcon","messageText","FileInputButton","textWeight","UploadPlaceholder","ButtonWrapper","UploadWarning","onClearStale","CardOverlay","FlexContainer","formatBytes","bytes","decimals","dm","parseFloat","FileDetails","isMenuOpen","onMenuOpen","menuElement","setMenuRef","wrap","FileSkeleton","Skeleton","animated","LabelSkeleton","InvalidFileWarning","onClearValue","passThrough","ASSET_FIELD_PATH","BaseFileInput","PureComponent","_focusRef","uploadSubscription","isUploading","selectedAssetSource","isStale","handleRemoveButtonClick","parentPathSegment","isArrayElement","allKeys","remainingKeys","isEmpty","removeKeys","handleCancelUpload","cancelUpload","handleClearUploadState","clearUploadStatus","handleStaleUpload","handleClearField","handleSelectFiles","uploadFirstAccepted","handleFilesOut","handleSelectFileFromAssetSource","handleAssetSourceClosed","assetDocumentProps","uploadEvent","handleFileTargetFocus","handleFilesOver","fileInfo","setFocusElement","setToast","_assetFieldPath","renderUploadState","renderAssetSource","selectedAssets","selectionType","dialogHeaderTitle","hasFileTargetFocus","renderAsset","hasValueOrUpload","isFileSource","getFileTone","renderUploadPlaceholder","renderAssetMenu","browseMenuItem","SearchIcon","assetSource","extension","isOpen","renderBrowser","borderStyle","borderColor","ImperativeToast","StudioFileInput","sourcesFromSchema","sources","fileConfig","RatioBox","ImageLoader","setIsLoading","setImage","testProperties","foundProperty","getBackingStoreRatio","testProperty","isPointInEllipse","point","center","xradius","yradius","normalized","isPointInCircle","circle","isPointInRect","getPointAtCircumference","cos","sin","Point","HLine","_left","_right","Corners","Rect","fromEdges","setTopLeft","setSize","setCenter","corners","multiply","grow","delta","shrink","cropRelative","crop","clamp","debug","Debug","supportsTouch","makeDragAware","DragAware","domNode","currentPos","isDragging","handleTouchMove","handleDragStart","onDragStart","nextPos","getPos","getPositionRelativeToRect","handleDrag","onDrag","diff","diffPos","handleDragEnd","onDragEnd","handleDragCancel","setDomNode","componentDidMount","componentWillUnmount","onTouchStart","onMouseDown","onTouchMove","touches","clientX","clientY","otherPos","DragAwareCanvas","RootContainer","CanvasContainer","OPEN_HAND","CLOSE_HAND","DEFAULT_HOTSPOT","DEFAULT_CROP","MARGIN_PX","CROP_HANDLE_SIZE","HOTSPOT_HANDLE_SIZE","normalizeRect","flippedY","flippedX","checkCropBoundaries","limitToBoundaries","hotspot","newDelta","getCropCursorForHandle","handle","getDevicePixelRatio","devicePixelRatio","backingStoreRatio","cropHandleKeys","ToolCanvas","cropping","cropMoving","moving","resizing","mousePosition","getScale","inHotspot","utils2d.isPointInEllipse","getHotspotRect","inDragHandle","utils2d.isPointInCircle","getDragHandleCoords","activeCropHandle","getActiveCropHandleFor","inCropRect","utils2d.isPointInRect","getCropRect","emitCrop","emitCropMove","emitMove","emitResize","onChangeEnd","rawCrop","getClampedValue","finalValue","handleMouseOut","handleMouseMove","clientRect","setCanvas","hotspotRect","getCropHandles","inner","handleSize","halfCropHandleSize","cropHandle","topLeft","topRight","bottomLeft","bottomRight","cropHandles","applyHotspotMoveBy","applyCropMoveBy","side","applyHotspotResizeBy","paintHotspot","imageRect","save","drawBackdrop","drawEllipse","clip","drawHole","restore","drawDragHandle","dest","scaleY","beginPath","globalAlpha","arc","strokeStyle","lineWidth","stroke","closePath","srcLeft","srcTop","srcWidth","srcHeight","destLeft","destTop","destWidth","destHeight","fillStyle","fillRect","utils2d.getPointAtCircumference","getActualSize","clientHeight","clientWidth","bbox","setLineDash","vline","hline","x2","y2","paintBackground","clearRect","paint","pxratio","paintCropBorder","highlightCropHandles","paintMousePosition","cropRect","actualSize","getCursor","activeCropArea","mouseOverDragHandle","cursors.CLOSE_HAND","mouseoverHotspot","mouseoverCropRect","cursors.OPEN_HAND","draw","componentDidUpdate","currentCursor","cursor","newCursor","onMouseMove","onMouseOut","currentHotspot","currentCrop","Resize","maxHeight","canvasElement","appendChild","removeChild","resize","landscape","targetWidth","targetHeight","ImageTool","calculateStyles","imageAspect","readAspectRatio","containerAspect","readCropAspect","calculateHotSpotCrop","aspect","containerHeight","styleFormat","round","toStylePercentage","aspectRatio","multiplier","sourceAspect","descriptor","viewportAspect","alignment","netWidth","netHeight","outImg","cropRationalAspect","cropAspect","maxHotspotXScale","maxHotspotYScale","maxScale","minFullBleedScale","cropIsTaller","outCrop","letterboxScale","hotspotLeft","hotspotTop","HotspotImageContainer","getCropAspect","srcAspect","origHeight","origWidth","cropWidth","cropHeight","HotspotImage","alignX","alignY","onError","onLoad","srcAspectRatio","srcSet","setContainerAspect","containerElementRef","imageElementRef","updateContainerAspect","parentNode","startTransition","imageElement","alreadyLoaded","naturalWidth","targetAspect","targetStyles","PROBABLY_THE_TINIEST_GIF_EVER","isBlob","useLoadImage","HOTSPOT_PATH","PREVIEW_ASPECT_RATIOS","DEFAULT_VALUE","Placeholder","LoadStatus","overflowWrap","ImageToolInput","localValue","setLocalValue","isImageLoading","imageLoadError","handleChangeEnd","cropField","__unstable_checkered","MenuActionsWrapper","ImageActionsMenu","onEdit","showEdit","setHotspotButtonElement","setMenuButtonElement","CropIcon","MAX_DEFAULT_HEIGHT","SpinnerWrapper","Overlay","drag","textColor","studioTheme","light","card","rgba","FlexOverlay","getImageSize","imageUrlParams","ImagePreview","isRejected","isLoaded","setLoaded","rootRect","useElementRect","rootWidth","acceptTone","maxHeightToPx","documentElement","imageWidth","imageHeight","imageRatio","renderedImageHeight","rootHeight","onLoadChange","OverlayComponent","cardTone","HoverIcon","HoverText","InvalidImageWarning","ASSET_IMAGE_MENU_POPOVER","BaseImageInput","_assetElementRef","hotspotButtonElement","menuButtonElement","getUploadOptions","valueIsArrayElement","handleFieldChange","eventIsUnsettingLastFilledField","handleOpenDialog","handleCloseDialog","handleSelectImageFromAssetSource","renderHotspotInput","hotspotInputProps","withImageTool","isImageToolEnabled","__unstable_autoFocus","auto","_assetPath","showAdvancedEditButton","forceDownload","iconRight","ChevronDownIcon","elementHeight","StudioImageInput","builder","useOnClickOutside","refs","handler","listener","retryAttempt","setRetryAttempt","StyledPreviewFlex","TooltipContent","CrossDatasetReferencePreview","showStudioUrlIcon","hasStudioUrl","previewMedia","isValidImageAsset","withOptions","LaunchIcon","useProjectId","OptionPreview","TextSkeleton","toEntry","StyledPopover","StyledText","ReferenceAutocomplete","hasResults","renderPopover","contentRef","inputElement","arrow","searchString","portalRef","matchReferenceWidth","Autocomplete","DisabledFeatureWarning","features","fetchFeatures","cachedFeatureRequest","useFeatureEnabled","featureKey","featureInfo","INITIAL_SEARCH_STATE","NO_FILTER","REF_PATH","CROSS_DATASET_FEATUREKEY","CrossDatasetReferenceInput","onSearch","searchState","setSearchState","h","handleAutocompleteKeyDown","keyCode","getReferenceInfoMemo","refDoc","autocompletePopoverReferenceElementRef","hasFocusAtRef","focusElementRef","hasFocusAt","prev","refUpdated","focusAtUpdated","FOCUS_TERMINATOR","handleAutocompleteFocus","handleReplace","handleQueryChange","useObservableCallback","inputValue$","prevState","nextState","handleAutocompleteOpenButtonClick","studioUrl","renderOption","clickOutsideBoundaryRef","autocompletePortalRef","createButtonMenuPortalRef","onQueryChange","filterOption","openButton","paddingRight","ClearIcon","UserColorManagerContext","useUserColorManager","userColorManager","useUserColor","userId","manager","empty","DEFAULT_CURRENT_USER_HUE","USER_COLOR_EXCLUDE_HUES","defaultHues","COLOR_HUES","hue","getTints","isDarkScheme","background","getDefaultColors","colors","tints","getAnonymousColor","gray","createUserColorManager","anonymousColor","anonymousColorProp","currentUserColor","currentUserColorProp","userColors","hasOwnProperty","userColorKeys","subscriptions","previouslyAssigned","assignedCounts","assigned","currentUserId","userStore","me","setCurrentUser","getUserHue","assignedHue","prevHue","hasUnusedColor","assignHue","preferredHue","getPreferredHue","getLeastUsedHue","getObservableColor","unassignHue","getUnusedColor","colorHue","tieBreakerPreference","leastUses","Infinity","leastUsed","uses","userColor","UserColorManagerProvider","managerFromProps","useColorScheme","rePropName","reKeySegment","pathToString","segmentType","separator","getValueAtPath","rootValue","isIndexSegment","findIndex","stringToPath","segments","normalizePathSegment","normalizeIndexSegment","normalizeKeySegment","isIndexTuple","normalizeIndexTupleSegment","pathsAreEqual","pathA","pathB","segmentA","segmentB","getItemKey","arrayItem","getItemKeySegment","isEmptyObject","getAnnotationColor","colorManager","annotation","author","getAnnotationAtPath","diffPath","getAnnotationAt","getDiffAtPath","getDiffAt","diffAt","action","itemDiff","itemMatchesKey","fieldDiff","toValue","visitDiff","visitor","visitArrayDiff","visitObjectDiff","visitStringDiff","getItemDiffIndex","useAnnotationColor","useDiffAnnotationColor","DiffTooltip","DiffTooltipWithAnnotation","annotations","textTransform","AnnotationItem","LegacyLayerProvider","zOffset","allowedAutoPlacements","timestamp","useUser","timeAgo","useTimeAgo","minimal","borderRadius","dateTime","EMPTY_PATH","DiffCard","annotationProp","disableHoverEffect","tooltip","RoundedCard","AnnotationText","ChangeTitleSegment","hasMoved","created","deleted","CreatedTitleSegment","DeletedTitleSegment","MovedTitleSegment","readableIndex","diffAnnotation","textDecoration","indexDiff","indexSymbol","positions","ChangeBreadcrumb","titlePath","Breadcrumbs","titleSegment","showSegment","showIndex","isThenable","useCheckCondition","checkProperty","checkPropertyName","isTrueIsh","useConditionalProperty","checkPropertyKey","valueProp","useCurrentUser","isPropertyTruthy","DiffContext","getValueError","valueType","isObjectType","isObjectValue","fieldError","isTypedObject","resolveJSType","getArrayDiffItemType","resolveArrayMemberType","fromType","fromValue","declared","ANNOTATION_SYMBOLS","CHILD_SYMBOL","DECORATOR_SYMBOLS","EMPTY_BLOCK_SYMBOL","INLINE_SYMBOLS","TRAILING_SPACE_SYMBOL","SEGMENT_START_SYMBOL","dmp","DiffMatchPatch","hasPTMemberType","isPTSchemaType","startMarkSymbols","TextSymbols.DECORATOR_SYMBOLS","TextSymbols.ANNOTATION_SYMBOLS","endMarkSymbols","allSymbols","TextSymbols.INLINE_SYMBOLS","TextSymbols.CHILD_SYMBOL","TextSymbols.SEGMENT_START_SYMBOL","symbolRegex","RegExp","segmentRegex","isHeader","findChildDiff","child","childrenDiff","childDiff","getChildSchemaType","childrenField","cSchemaType","getDecorators","spanSchemaType","decorators","isDecorator","blockToSymbolizedText","decoratorMap","annotationMap","inlineMap","returned","spanDiff","findSpanDiffFromChild","textDiff","marks","mark","_isDecorator","createPortableTextDiff","displayValue","_diff","allMarkDefs","getAllMarkDefs","markDef","inlines","getInlineObjects","fromText","toText","toPseudoValue","fromPseudoValue","pseudoDiff","buildSegments","fromInput","toInput","dmpDiffs","diff_main","diff_cleanupEfficiency","fromIdx","toIdx","DIFF_EQUAL","DIFF_DELETE","DIFF_INSERT","newSegments","markMatches","matchAll","lastIndex","allChildren","cld","previousChildren","oCld","findAnnotationDiff","markDefKey","markDefs","escapeRegExp","allDefs","oldDefs","oDef","diffResolvers","Checkbox","rx","Switch","BooleanFieldDiff","showToValue","FromToArrow","DocumentChangeContext","useDocumentChange","documentChange","useRefValue","getSizeDiff","increase","pct","SizeDiff","solid","positive","FileFieldDiff","fromAsset","toAsset","changedFields","didAssetChange","nestedFields","prevSize","nextSize","pctDiff","roundedPrevSize","roundedNextSize","cardStyles","MetaInfo","FileAssetChange","FromTo","ChangeList","hexToRgba","exec","parseInt","simpleHash","char","getDeviceDpr","ceil","HotspotCropSVG","cropColor","hotspotColor","HotspotSVG","CropSVG","mask","rectProps","vectorEffect","ellipseProps","cx","cy","ry","ASSET_FIELDS","NoImagePreview","ImageWrapper","HotspotDiff","imageError","setImageError","useDocumentValues","getImageDimensions","assetIsDeleted","imageSource","assetChanged","metaAction","paddingBottom","isDefaultCrop","isDefaultHotspot","markRemoved","IMAGE_META_FIELDS","BASE_IMAGE_FIELDS","CARD_STYLES","ImageFieldDiff","fromRef","toRef","assetAnnotation","assetAction","didCropChange","didHotspotChange","didMetaChange","showImageDiff","showMetaChange","imageDiff","toUpperCase","NumberWrapper","NumberPreview","NumberFieldDiff","DiffFromTo","previewComponent","Quote","blockquote","Blockquote","headingSizes","h1","h2","h3","h4","h5","h6","StyledHeading","StyledParagraph","Paragraph","Block","isRemoved","fromStyle","InlineBox","InlineText","PreviewContainer","PopoverContainer","AnnotationWrapper","Annotation","AnnnotationWithDiff","popoverElement","setPopoverElement","emptyObject","markDefPath","annotationPath","myPath","myValue","handleOpenPopup","handleClickOutside","popoverContent","DecoratorWrapper","decoration","code","Decorator","InlineObjectWrapper","InlineObject","InlineObjectWithDiff","PopoverContent","diffWithFallback","hasChanged","TextWithDiff","spanSegment","realSeg","rSeg","diffCard","startCase","decoratorSymbolsStart","decoratorSymbolsEnd","annotationSymbolsStart","annotationSymbolsEnd","allSymbolsStart","allSymbolsEnd","allDecoratorSymbols","markRegex","PortableText","inlineObjects","renderChild","ptDiffChild","decoratorTypes","returnedChildren","annotationSegments","isEmptyTextChange","TextSymbols.EMPTY_BLOCK_SYMBOL","childToIndex","segIndex","activeAnnotations","endedAnnotation","isInline","isMarkStart","isMarkEnd","isChildStart","symbols","pop","indexOfSymbol","sym","originChild","objectSchemaType","objectDiff","getChildFromFromValue","renderTextSegment","active","lastChild","annotationDiff","TextSymbols.TRAILING_SPACE_SYMBOL","activeMarks","renderDecorators","fromPtDiffText","indirectMarksAnnotation","marksDiff","marksAnnotation","marksChanged","ptDiffChildren","ptDiffMatchString","controlString","toTest","aSet","notClosed","lastIndexOf","xor","PTDiff","ptDiff","ReferenceWrapper","ReferenceFieldDiff","StringWrapper","StringPreview","StringFieldDiff","DiffString","defaultComponents","showHeader","resolveDiffComponent","itType","resolved","tryResolve","resolvers","getChangeVerb","hadPrevValue","hasValue","hasNextValue","isFieldChange","isGroupChange","isAddedItemDiff","isRemovedItemDiff","isUnchangedDiff","buildChangeList","diffComponent","parentSchema","buildObjectChangeList","buildArrayChangeList","getFieldChange","diffContext","changes","fieldSets","single","buildFieldChange","buildFieldsetChangeList","reduceTitlePaths","fieldFilter","fieldPath","fieldTitlePath","fieldSetHidden","fieldsetReadOnly","fieldSetTitlePath","changedOrMoved","isPortableText","memberTypes","itemContext","parentDiff","itemTitlePath","attachItemDiff","siblings","byLength","isAddedAction","flattenChangeNode","changeNode","newSubChanges","cChange","isSubpathOf","subPath","pathSegmentOfCorrectType","nextItem","diffOptions","undoChange","rootDiff","documentOperations","allChanges","unsetChanges","buildUnsetPatches","unsetChange","buildMovePatches","buildUndoPatches","execute","buildUnsetPatch","concurrentUnsetPaths","previousValue","furthestEmptyAncestor","unsetByEarlierPatch","currentPath","ignorePaths","initialPath","ancestorPath","ancestorValue","updatedIgnorePaths","isStub","parentValue","getFromItem","insertLocation","before","prevIndex","prevItemKey","prevSegment","after","diffItem","inserts","unsets","stubbedPaths","stubs","hasSets","sets","getParentStubs","stubbed","pathStr","nextSegment","nextIsArrayElement","getStubValue","indexAtPrev","prevSeg","onlyContainsStubs","nextPath","isIgnoredPath","ignorePath","ConditionalReadOnlyContext","useConditionalReadOnly","DiffErrorBoundary","getDerivedStateFromError","componentDidCatch","arrowComponents","ArrowDownIcon","ArrowRightIcon","arrowComponent","pre","Meta","DiffInspectWrapper","isHovering","isInspecting","setIsInspecting","toggleInspect","evt","DiffInspector","MetaLabel","printMeta","jsonify","INLINE_COLUMN_STYLES","flexShrink","BLOCK_COLUMN_STYLES","FLEX_ALIGN","Layout","layoutStyles","columnStyles","whiteSpace","cardClassName","changeVerb","FallbackPreview","FallbackDiff","RevertChangesButton","RevertIcon","ValueError","FieldChangeContainer","DiffBorder","PopoverWrapper","FieldChange","conditionalReadOnly","DiffComponent","isComparingCurrent","ops","useDocumentOperation","confirmRevertOpen","setConfirmRevertOpen","revertHovered","setRevertHovered","revertButtonElement","setRevertButtonElement","permissions","isPermissionsLoading","useDocumentPairPermissions","permission","handleRevertChanges","handleRevertChangesConfirm","closeRevertChangesConfirmDialog","handleRevertButtonMouseEnter","handleRevertButtonMouseLeave","granted","useHover","handleMouseOver","ChangeListWrapper","GroupChangeContainer","GroupChange","groupPath","isNestedInDiff","revertButtonRef","isRevertButtonHovered","docOperations","revertPopoverElement","setRevertPopoverElement","ChangeResolver","isHidden","isReadOnly","NoChanges","isRoot","confirmRevertAllOpen","setConfirmRevertAllOpen","confirmRevertAllHover","setConfirmRevertAllHover","maybeFlatten","rootChange","revertAllChanges","handleRevertAllChangesClick","handleRevertAllChangesMouseEnter","handleRevertAllChangesMouseLeave","closeRevertAllChangesConfirmDialog","revertAllContainerElement","setRevertAllContainerElement","showFooter","ChangeSegment","DiffStringSegment","segmentIndex","MetaText","otherItem","obj","otherObj","otherKeys","keyName","ArrayOfOptionsFieldDiff","sortItems","isPresent","ItemPreview","getValue","wasPresent","isInArray","getItemTitle","resolveMemberType","getOptionIndex","itemA","itemB","marginY","jsType","isNamedOption","DEFAULT_DATE_FORMAT","DEFAULT_TIME_FORMAT","DatetimeWrapper","DatetimePreview","formatDateTime","dateFormat","timeFormat","legacyDateFormat","DatetimeFieldDiff","UrlFieldDiff","SlugWrapper","SlugPreview","SlugFieldDiff","diffResolver","useFormValue","uniquePath","documentValueSubject","documentValue$","crossDatasetType","REQUEST_TAG_BASE","createGetReferenceInfo","docType","resolvedDoc","fetchDocumentAvailability","publishedPreview","resolveUserDefinedFilter","valuePath","filterParams","useValueRef","StudioCrossDatasetReferenceInput","crossDatasetClient","clone","documentRef","handleSearch","isQueryError","details","searchClient","documentTypeName","disableNew","adapter.referenceSearch","template","EditReferenceLink_","_props","parentRefPath","handleEditReference","createOptions","parameters","adapter.getReferenceInfo","ConditionalTooltip","INLINE_BLOCK_STYLE","FULL_WIDTH","CreateButton","onCreate","canCreateAny","menuRef","createOption","NARROW_LAYOUT","WIDE_LAYOUT","$narrow","AutocompleteContainer","handleNewRef","setForwardedRef","inputWrapperRect","instance","StyledPreviewCard","nonNullable","ReferenceInput","handleCreateNew","newDocumentId","nextId","handleCreateButtonKeyDown","renderValue","relatedTarget","isWeakRefToNonexistent","hadFocusAtRef","StudioReferenceInput","isDocumentLiveEdit","_refType","editReferenceLinkComponent","isObjectItemProps","isStringInputProps","isNumberInputProps","isBooleanInputProps","isArrayOfObjectsInputProps","isArrayOfObjectsSchemaType","isArrayOfPrimitivesInputProps","isArrayOfPrimitivesSchemaType","it","inArray","ArrayOfObjectOptionsInput","isChecked","changedOption","handleItemFocus","isGrid","optionType","isPrimitiveOption","normalizeOptions","ArrayOfPrimitiveOptionsInput","changedValue","optionValue","ArrayOfOptionsInput","OverlayContainer","ContentContainer","CardContainer","isTouchDevice","maxTouchPoints","ActivateOnFocus","onActivate","isOverlayActive","setFocused","handleOnFocus","isTouch","activateVerb","createInsertCallback","allowedDecorators","toInsert","givenBlock","blk","normalizeBlock","createSetCallback","createUnsetCallback","BlockActions","editor","usePortableTextEditor","renderBlockActions","decoratorValues","PortableTextEditor","getPortableTextFeatures","blockActions","blockActionProps","blur","ReviewChangesHighlightBlock","StyledChangeIndicatorWithProvidedFullPath","immutableReconcile","_immutableReconcile","WeakSet","parents","prevType","nextType","allEqual","nextKeys","_isBlockType","_isArrayOfObjectsFieldMember","NONEXISTENT_PATH","useMemberValidation","memberValidation","hasError","hasWarning","reconciled","PortableTextMarkersContext","PortableTextMarkersProvider","usePortableTextMarkers","PortableTextMemberItemsContext","PortableTextMemberItemsProvider","memberItems","usePortableTextMemberItem","usePortableTextMemberItems","debugRender","BlockObjectPreview","isActive","onClickingDelete","onClickingEdit","isTopLayer","menuButton","isTabbing","isImageType","referenceLink","ReferenceLink","linkProps","intent","useGlobalKeyDown","actions","LinkIcon","EyeOpenIcon","overlay","purple","invalid","ChangeIndicatorWrapper","$hasChanges","InnerFlex","BlockActionsOuter","BlockActionsInner","TooltipBox","BlockObject","attributes","isFullscreen","reviewChangesHovered","setReviewChangesHovered","memberItem","handleEdit","handleDoubleClickToOpen","handleDelete","anchor","blockPreview","innerPaddingProps","hasMarkers","isImagePreview","tooltipEnabled","toolTipContent","onDoubleClick","onMouseOver","ToolbarPopover","POPOVER_FALLBACK_PLACEMENTS","InlineObjectToolbarPopover","onDelete","scrollElement","editButtonRef","popoverScheme","boundaryElement","rootStyle","PreviewSpan","popoverOpen","setPopoverOpen","fallbackTitle","markersToolTip","handleRemoveClick","openItem","handlePopoverClose","AnnotationToolbarPopover","annotationElement","textElement","cursorRect","setCursorRect","setSelection","isClosingRef","rangeRef","cursorElement","handleSelectionChange","winSelection","anchorNode","anchorOffset","focusNode","focusOffset","getRangeAt","$toneKey","annotationRef","setTextElement","handleEditClick","removeAnnotation","isLink","toneKey","hasCustomMarkers","TEXT_LEVELS","TEXT_BULLET_MARKERS","TEXT_NUMBER_FORMATS","TEXT_DECORATOR_TAGS","em","underline","strong","TEXT_STYLE_PADDING","paddingTop","normal","createListName","textBlockStyle","$level","numberMarker","bulletMarker","TextRoot","TextBlockFlexWrapper","ListPrefixWrapper","BlockExtrasContainer","textSize1","textSize2","capHeight1","lineHeight","ascenderHeight","descenderHeight","capHeight2","buttonHeight","negativeTop","TextFlex","TextContainer","Normal","Heading1","Heading2","Heading3","Heading4","Heading5","Heading6","BlockQuoteRoot","BlockQuote","TEXT_STYLES","TextBlock","spellCheck","handleChangeIndicatorMouseEnter","handleChangeIndicatorMouseLeave","TextStyle","listItem","outerPaddingProps","MENU_BUTTON_POPOVER_PROPS","CollapseOverflowMenu","disableRestoreFocusOnClose","menuButtonProps","menuOptionsArray","onMenuClose","__unstable_disableRestoreFocusOnClose","collapsedProps","expandedProps","tooltipProps","tooltipText","dividerBefore","ObserveElement","setEl","disconnect","DividerDiv","CollapseMenuDivider","FOCUS_RING_PADDING","OPTION_STYLE","OuterFlex","RowFlex","OptionObserveElement","OptionHiddenFlex","_isReactElement","CollapseMenu","childrenProp","collapseText","rootEl","setRootEl","hiddenRowEl","setHiddenRowEl","menuOptions","setMenuOptions","hasOverflow","intersectionOptions","root","Children","o","menuIsVisible","isInMenu","childKey","handleIntersection","exists","updatedOptions","modeProps","cloneElement","CollapseMenuButton","CustomIconDiv","CustomIcon","inlineStyle","backgroundImage","getPTEFormatActions","hotkeyOpts","decorator","shortCutKey","hotkeys","blockEditor","toggleMark","getPTEListActions","lists","toggleList","getAnnotationIcon","getPTEAnnotationActions","focusChild","hasText","getPTEToolbarActionGroups","onInsertAnnotation","getBlockStyles","styles","styleComponent","getInsertMenuIcon","fallbackIcon","getInsertMenuItems","onInsertBlock","onInsertInline","blockItems","blockObjects","BlockElementIcon","inlineItems","InlineElementIcon","filteredBlockItems","annotationIcons","link","formatIcons","BoldIcon","ItalicIcon","StrikethroughIcon","UnderlineIcon","CodeIcon","listStyleIcons","OlistIcon","bullet","UlistIcon","getActionIcon","useFocusBlock","usePortableTextEditorSelection","focusBlock","useFeatures","useActionGroups","onMemberOpen","handleInsertAnnotation","addAnnotation","useActiveActionKeys","activeAnnotationKeys","hasListStyle","isMarkActive","useActiveStyleKeys","hasBlockStyle","CollapseMenuMemo","COLLAPSE_BUTTON_PROPS","ActionMenu","disabledProp","isVoidBlock","isEmptyTextBlock","actionIndex","firstInGroup","activeKeys","handleMenuClose","annotationDisabled","MenuButtonMemo","StyledMenuItem","StyledButton","TEXT_STYLE_OPTIONS","TEXT_STYLE_KEYS","emptyStyle","BlockStyleSelect","itemsProp","setChanged","_disabled","activeItems","_activeItems","_items","menuButtonText","toggleBlockStyle","hasTextStyle","renderStyle","SelectIcon","isVoidFocus","StyleSelectBox","StyleSelectFlex","ActionMenuBox","$withInsertMenu","FullscreenButtonBox","SLOW_INITIAL_VALUE_LIMIT","IS_MAC","platform","InnerToolbar","actionGroups","blockStyles","insertMenuItems","onToggleFullscreen","actionsLen","showActionMenu","showInsertMenu","rootElementRect","showBlockStyleSelect","useRovingFocus","Hotkeys","CollapseIcon","ExpandIcon","Toolbar","resolveInitialValueForType","isSlow","slowTimer","duration","finally","handleInsertBlock","insertBlock","handleInsertInline","insertChild","$fullscreen","ToolbarCard","EditableCard","Scroller","EditableContainer","EditableWrapper","l","$isFullscreen","useSpellcheck","spellCheckOption","portableTextFeatures","isChrome96","userAgent","useScrollSelectionIntoView","domRange","leafEl","startContainer","boundary","renderDecorator","mType","defaultRender","Editor","initialSelection","onCopy","renderAnnotation","renderBlock","setPortalElement","setScrollElement","editableRef","useBoundaryElement","handleMouseDown","Node","renderPlaceholder","spellcheck","scrollSelectionIntoView","editable","PortableTextEditable","handleToolBarOnMemberOpen","BoundaryElementProvider","ExpandedLayer","useHotkeys","initialHotkeys","defaultHotkeys","ptFeatures","parseResponsiveWidth","parseModalType","_getModalOption","raw","DefaultEditDialog","dialogId","usePortal","PortalProvider","elements","debugElement","RootPopover","ContentScrollerBox","ContentHeaderBox","PopoverEditDialog","forceUpdate","setForceUpdate","virtualElement","contextElement","ObjectEditModal","modalOption","modalType","firstField","setFirstField","firstFieldMember","firstFieldElm","getElementById","useScrollToOpenedMember","editorRootPath","hasFormFocus","portableTextMemberItems","Compositor","wrapperElement","setWrapperElement","handleToggleFullscreen","hotkeysWithFullscreenToggle","editorHotkeys","hasContent","blockType","isTextBlock","childType","annotationType","portalElement","openMemberItems","editorNode","boundaryElm","handleEditModalClose","dMemberItem","portalElements","expanded","__unstable_elements","Portal","__unstable_name","InvalidValue","onIgnore","resolution","handleAction","usePatches","filteredPatches","_startsWith","shouldReset","_shouldReset","_getValueAtPath","_isSegmentEqual","segment1","segment2","segment1Type","subjectPath","checkPath","_isAncestor","path1","path2","PortableTextInput","editorRef","setHasFocus","ignoreValidationError","setIgnoreValidationError","invalidValue","setInvalidValue","setIsFullscreen","setIsActive","portableTextMemberItemsRef","patchSubject","remotePatch$","innerElementRef","prevSel","markDefArrayMember","existingItem","createRef","hasOpenItem","setFocusPathDebounced","leading","handleEditorChange","toFormPatches","handleIgnoreInvalidValue","respondToInvalidContent","RespondToInvalidContent","handleActivate","incomingPatches$","maxBlocks","boxShadow","verticalAlign","font","appearance","outline","fontWeight","weights","regular","boxSizing","TagInput","placeholderProp","setInputValue","rootRef","handleRootPointerDown","isTagElement","isHTMLElement","closest","handleInputBlur","handleInputChange","handleInputFocus","handleInputKeyDown","handleTagRemove","onPointerDown","tagIndex","Tag","TagsArrayInput","tagInputValue","ListItem","bleed","SortableListItem","List","handleSortEnd","oldIndex","newIndex","onSortEnd","ErrorItem","DropMessage","getUploadCandidates","uploadTarget","UploadTarget","resolvedUploader","handleFiles","tasks","uploaderCandidates","ready","task","rejected","setHoveringFiles","UploadTargetCard","nearestIndexOf","startIdx","searchElement","nearestIndex","predicate","lowerIdx","upperIdx","upper","lower","ItemRow","ArrayOfPrimitivesFunctions","popoverProps","ArrayOfPrimitivesInput","_element","renderArrayItem","getSnapshotBeforeUpdate","prevProps","prevFocusPath","focusIndex","querySelector","HTMLInputElement","prevFocusedIndex","restoreSelection","start","selectionStart","end","selectionEnd","prevFocusedValue","newInput","setSelectionRange","arrayFunctions","isSortable","FooterFlex","PresenceFlex","DragHandleCard","CellLayout","GridItem","withBorder","withShadow","handleRemove","GridArrayInput","ListArrayInput","ArrayOfObjectsInput","PRIMITIVES","isArrayOfPrimitives","isStringArray","isTagsArray","resolveArrayInput","toSelectItem","EMPTY_ITEM","SelectInput","currentItem","isRadio","itemFromOptionValue","optionValueFromItem","handleSelectChange","RadioSelect","customValidity","Select","RadioSelectItem","Radio","StringInput","TextInput","resolveStringInput","normalizeRules","getValidationRule","ruleName","rule","ruleSpec","_rules","flag","NumberInput","minRule","integerRule","precisionRule","onlyPositiveNumber","onlyIntegers","inputMode","step","pattern","resolveNumberInput","CenterAlignedBox","ZeroLineHeightBox","BooleanInput","indeterminate","LayoutSpecificInput","EmailInput","UnknownFields","fieldNames","fieldsLen","handleUnsetClick","UnknownField","onUnsetClick","borderBottom","FieldGroupTabsWrapper","GroupTab","Tab","GroupOption","ElementQuery","GroupTabs","shouldAutoFocus","TabList","GroupSelect","handleSelect","g","FieldGroupTabs","ObjectInput","renderedUnknownFields","knownFieldNames","unknownFields","renderObjectMembers","CalendarDay","isCurrentMonth","isToday","toDateString","getDate","MONTH_NAMES","WEEK_DAY_NAMES","HOURS_24","ARROW_KEYS","TAIL_WEEKDAYS","getWeekStartsOfMonth","firstDay","startOfMonth","eachWeekOfInterval","lastDayOfMonth","getWeekDaysFromWeekStarts","weekStarts","weekStart","addDays","getWeeksOfMonth","days","getWeek","CalendarMonth","weekday","week","weekIdx","dayIdx","isSameDay","isSameMonth","dayPresets","timePresets","LazyTextInput","onKeyPress","checkEvent","handleKeyPress","YearInput","numericValue","PRESERVE_FOCUS_ELEMENT","Calendar","selectTime","onFocusedDateChange","selectedDate","focusedDate","timeStep","setFocusedDate","setFocusedDateMonth","month","setDate","setMonth","handleFocusedMonthChange","moveFocusedDate","addMonths","setFocusedDateYear","year","setYear","handleDateChange","setMinutes","getMinutes","handleMinutesChange","handleHoursChange","mins","focusCurrentWeekDay","hasAttribute","currentFocusInCalendarGrid","activeElement","handleNowClick","CalendarMonthSelect","getMonth","CalendarYearSelect","getFullYear","borderTop","handlePrevMonthClick","handleNextMonthClick","ChevronLeftIcon","ChevronRightIcon","handlePrevYearClick","handleNextYearClick","DatePicker","setFocusedDay","nextDate","DateTimeInput","onInputChange","buttonRef","isPickerOpen","setPickerOpen","handleDeactivation","handleKeyUp","CalendarIcon","LayerProvider","FocusLock","onDeactivation","onKeyUp","DEFAULT_PLACEHOLDER_TIME","CommonDateTimeInput","deserialize","formatInputValue","parseInputValue","serialize","handleDatePickerInputChange","nextInputValue","isValid","handleDatePickerChange","parseResult","valueOf","parseOptions","calendarTodayLabel","isoString","deserialized","enforceTimeStep","dateString","parseISO","minutes","leftOver","VALUE_FORMAT","DateInput","StyledTextArea","TextArea","rows","UrlInput","uriRule","inputType","allowRelative","defaultSlugify","slugifyOpts","truncate","speakingurl","slugify","sourceValue","slugifier","useAsync","lastId","wrappedCallback","asyncId","useSlugContext","useDataset","getSlugSourceContext","getNewFromSource","SlugInput","sourceField","slugContext","updateSlug","nextSlug","generateState","handleGenerateSlug","sourceContext","newFromSource","newSlug","isUpdating","UniversalArrayInput","isArrayOfOptionsInput","defaultInputs","email","crossDatasetReference","resolveComponentFromTypeVariants","componentFromTypeVariants","deduped","subType","defaultResolvePreviewComponent","useResolveDefaultComponent","componentResolver","componentProps","defaultResolvedComponent","parentTypeProps","restSchemaType","parentTypeResolvedComponent","DefaultInput","DefaultField","DefaultItem","pickInputComponent","plugin","pickFieldComponent","pickPreviewComponent","pickItemComponent","PreviewComponent","DocumentList","referringDocuments","filenamePlaceholder","DocumentLink","LinkComponent","STYLE_ASSET_IMAGE","objectFit","objectPosition","STYLE_CONFIRM_CARD","gridColumn","alignSelf","justifyContent","STYLE_IMAGE_WRAPPER","ConfirmMessage","MODE_CONFIRM_DELETE","MODE_LIST_USAGE","AssetUsageDialog","documentStore","useDocumentStore","WithReferringDocuments","InnerAssetUsageDialog","assetIsLoading","isDeleting","isListMode","defaultHeaderTitle","canDelete","setCanDelete","isLoadingParent","setIsLoadingParent","publishedDocuments","setPublishedDocuments","showActionFooter","showDocumentList","noPaddingOnStack","drafts","documentsWithoutDrafts","AssetMenu","isSelected","onAction","triggerButtonMode","triggerButtonTone","DPI","MenuContainer","AssetThumb","deleteRef$","onDeleteFinished","showUsageDialog","setShowUsageDialog","showDeleteDialog","setShowDeleteDialog","setIsDeleting","handleConfirmDelete","handleDialogClose","handleToggleUsageDialog","handleDeleteError","handleDeleteSuccess","handleDeleteAsset","handleMenuAction","imgH","BYTE_UNITS","BIBYTE_UNITS","BIT_UNITS","BIBIT_UNITS","toLocaleString","locale","prettyBytes","bits","binary","signed","minimumFractionDigits","maximumFractionDigits","isFinite","TypeError","UNITS","isNegative","localeOptions","numberString","exponent","log10","toPrecision","unit","MIME_TYPES","convertMimeTypeToSomethingNice","part","formatMimeType","CardIconWrapper","CustomFlex","CustomText","CustomCard","RowButton","STYLES_ROW_CARD","STYLES_ICON_CARD","STYLES_BUTTON_TEXT","STYLES_ASSETMENU_WRAPPER","DISABLED_DELETE_TITLE","AssetRow","setIsOpen","isMobile","_createdAt","formattedTime","agoSuffix","formattedMimeType","formattedSize","showTooltip","handleToggleOpen","ChevronUpIcon","STYLES_FILENAME","STYLES_GRID","TableList","mediaIndex","useMediaIndex","PER_PAGE","ASSET_TYPE_IMAGE","ASSET_TYPE_FILE","buildQuery","ThumbGrid","CardLoadMore","DefaultAssetSource","_elementId","uniqueId","currentPageNumber","fetch$","setAssets","isLastPage","setIsLastPage","hasResetAutoFocus","setHasResetFocus","fetchPage","pageNumber","isImageAssetType","assetTypeParam","handleDeleteFinished","selectedSource","handleItemClick","getAttribute","handleItemKeyPress","handleFetchNextPage","renderedThumbView","renderedTableView","DefaultSource","FileSource","DocumentsIcon","ImageSource","defineSearchFilter","filterDef","defineSearchFilterOperators","operators","getFilterDefinition","definitions","filterName","getSupportedFieldTypes","filterDefs","fieldType","filterDefinitions","CheckmarkCircleIcon","StringIcon","NumberIcon","BlockContentIcon","ReferencePreviewTitle","sanityDocument","SearchButtonValueBoolean","SearchButtonValueDate","SearchButtonValueDateLast","SearchButtonValueNumber","SearchButtonValueNumberCount","pluralize","SearchButtonValueNumberRange","SearchButtonValueNumberCountRange","SearchButtonValueReference","SearchButtonValueString","SearchContext","useSearchState","SearchFilterNumberInput","uncontrolledValue","setUncontrolledValue","fullscreen","numValue","SearchFilterNumberRangeInput","setMax","setMin","handleMaxChange","handleMinChange","getSchemaField","firstPath","SearchResultItemPreviewBox","TypeLabel","SearchResultItemPreview","PreviewCardLink","SearchResultItem","disableIntentLink","onIntentClick","useIntentLink","DEBUG_FRAGMENT","DEBUG_MODE","FINDABILITY_MVI","SEARCH_LIMIT","GLOBAL_SEARCH_KEY","GLOBAL_SEARCH_KEY_MODIFIER","POPOVER_INPUT_PADDING","POPOVER_MAX_HEIGHT","POPOVER_MAX_WIDTH","POPOVER_VERTICAL_MARGIN","POPOVER_RADIUS","VIRTUAL_LIST_SEARCH_ITEM_HEIGHT","VIRTUAL_LIST_SEARCH_OVERSCAN","hasSearchableTerms","allowEmptyQueries","trimmedQuery","getSelectableOmnisearchTypes","typeFilter","getSearchableOmnisearchTypes","inTypeFilter","sortTypes","__experimental_omnisearch_visibility","DEFAULT_DEBOUNCE_TIME","sanitizeRequest","useSearch","initialState","onComplete","onStart","debounceTime","handleClearSearch","searchRequest","DEFAULT_AVAILABLE_CHARS","documentTypesTruncated","availableCharacters","visibleTypes","remaining","typeTitle","remainingCount","autocompleteId","setHits","weightedHits","weightedHit","placeholderText","documentTypes","SearchFilterReferenceInput","fieldDefinition","documentTypesNarrowed","referenceValue","searchableTypes","CustomMenuItem","SearchFilterStringListInput","selectOptions","GteIcon","GtIcon","LteIcon","LtIcon","defineSearchOperator","definition","arrayOperators","arrayCountEqual","buttonLabel","buttonValueComponent","groqFilter","inputComponent","arrayCountGt","arrayCountGte","arrayCountLt","arrayCountLte","arrayCountNotEqual","arrayCountRange","arrayListIncludes","arrayListNotIncludes","arrayReferenceIncludes","arrayReferenceNotIncludes","WorkspaceContext","WorkspaceProvider","workspace","useWorkspace","SourceContext","SourceProvider","parentSource","unstable_sources","AssetSourceError","FileReferencePreview","FilePreview","SpinnerFlex","ImageReferencePreview","loaded","handleLoad","AssetPreview","ASSET_TYPE","ContainerBox","SearchFilterAssetInput","FieldInputAssetWithType","setSelectedAssetSource","selectedAssetFromSource","setSelectedAssetFromSource","handleCloseAssetSource","handleSelectAssetSource","AssetSourceComponent","buttonText","UndoIcon","assetOperators","assetFileEqual","assetFileNotEqual","assetImageEqual","assetImageNotEqual","SearchFilterBooleanInput","booleanOperators","booleanEqual","definedOperators","defined","notDefined","CustomTextInputBox","smallClearButton","bg2","CustomTextInput","DatePickerContext","useDatePicker","DatePickerProvider","CommonDateInput","setCustomValidity","parsed","validDate","handleTextInputBlur","handleTextInputChange","handleTextInputClear","handleTextInputKeyDown","updatedDate","placeholderDate","clearButton","onClear","SearchFilterDateInput","SearchFilterDateLastInput","dateUnit","dateValue","handleUnitChange","handleValueChange","SearchFilterDateTimeInput","COMMON","dateAfter","startOfToday","dateBefore","dateEqual","dateLast","dateNotEqual","dateOperators","flooredValue","timestampAgo","months","years","dateTimeAfter","dateTimeBefore","dateTimeEqual","dateTimeLast","dateTimeNotEqual","numberOperators","numberEqual","numberGt","numberGte","numberLt","numberLte","numberNotEqual","numberRange","SearchFilterStringInput","portableTextOperators","portableTextEqual","portableTextMatches","portableTextNotEqual","portableTextNotMatches","referenceOperators","referenceEqual","referenceNotEqual","referencesAssetFile","referencesAssetImage","referencesDocument","slugOperators","slugEqual","slugMatches","slugNotEqual","slugNotMatches","stringOperators","stringEqual","stringListEqual","stringListNotEqual","stringMatches","stringNotEqual","stringNotMatches","searchOperators","operatorDefinitions","initialDocumentBadges","initialDocumentActions","initialLanguageFilter","schemaTypesReducer","schemaTypes","resolveProductionUrlReducer","resolveProductionUrl","productionUrl","toolsReducer","tools","schemaTemplatesReducer","schemaTemplates","templates","documentBadgesReducer","documentBadges","badges","documentActionsReducer","documentActions","newDocumentOptionsResolver","resolveNewDocumentOptions","newDocumentOptions","fileAssetSourceResolver","imageAssetSourceResolver","documentLanguageFilterReducer","resolveDocumentLanguageFilter","unstable_languageFilter","ConfigPropertyError","propertyName","cause","plugins","currentConfig","rootConfig","allPlugins","resolveConfigProperty","inputConfig","reducers","configs","reducer","asyncReducer","ConfigResolutionError","causes","SchemaError","pseudoRandomNumber","seed","hashCode","prevHash","currVal","SvgText","heading","bold","createDefaultIcon","rng1","huesWithoutGray","possibleTints","rng2","tint","letters","word","darkened","darken","lightened","lighten","hasBadContrast","readableColor","textAnchor","alignmentBaseline","dominantBaseline","normalizeIcon","prepareConfig","workspaceOptions","validateWorkspaces","workspaces","nestedSources","rootSource","resolvedSources","schemaValidationProblemGroups","schemaErrors","source$","resolveSource","workspaceSummary","getBifurClient","bifurVersionedClient","getUrl","fromUrl","clients","wrappedClient","__proto__","original","initialTemplatesResponses","templateId","templateMap","creationContext","schemaTypeName","templateResponses","templateErrors","defaultSubtitle","initialDocumentId","staticInitialValueTemplateItems","partialContext","resolveConfig","createWorkspaceFromConfig","toPromise","createSourceFromConfig","useConfigContextFromSource","getConfigContextFromSource","StudioLogo","ColorSchemeContext","ColorSchemeProvider","onSchemeChange","schemeProp","prefersDark","usePrefersDark","setScheme","nextScheme","colorScheme","ThemeProvider","WorkspacesContext","WorkspacesProvider","getWorkspaceIdentifier","getNamelessWorkspaceIdentifier","withTitle","useWorkspaces","WorkspaceValidationError","identifier","validateNames","validateBasePaths","isSingleWorkspace","names","rawName","thisIdentifier","existingWorkspace","prevIdentifier","hasBasePath","validateBasePath","firstWorkspace","restOfWorkspaces","firstWorkspaceSegmentCount","workspaceSegmentCount","basePaths","NoToolsScreen","ToolNotFoundScreen","toolName","LoadingScreen","TONES","SegmentSpan","ErrorMessageText","SchemaProblemGroups","problemGroups","ret","problemGroup","isWarning","getTypeInfo","j","_renderSegmentName","helpId","generateHelpUrl","parts","renderPath","reportWarnings","groupsWithWarnings","SchemaErrorsScreen","groupsWithErrors","NotFoundScreen","onNavigateToDefaultWorkspace","ActiveWorkspaceMatcherContext","matchWorkspace","pathname","workspaceSegments","commonBasePath","commonSegments","commonSegment","createCommonBasePathRegex","createHistory","createMemoryHistory","createBrowserHistory","ActiveWorkspaceMatcher","LoadingComponent","NotFoundComponent","unstable_history","historyProp","activeWorkspace","setActiveWorkspace","setNotFound","pathname$","unlisten","setActiveWorkspaceName","workspaceName","foundWorkspace","defaultWorkspaceName","handleNavigateToDefaultWorkspace","useActiveWorkspace","STATE_TITLES","MediaCard","createIcon","WorkspacePreview","iconComponent","iconRightComponent","CheckmarkIcon","useWorkspaceAuthStates","WORKSPACES_DOCS_URL","LINKS","SanityLogo","WorkspaceAuth","authStates","selectedWorkspaceName","setSelectedWorkspaceName","selectedWorkspace","handleBack","ArrowLeftIcon","omit","authState","handleSelectWorkspace","StyledMenu","WorkspaceMenuButton","navigateUrl","useRouter","AuthenticateScreen","ConfigErrorsScreen","NotAuthenticatedScreen","handleError","handleLogout","providerTitle","providerHelp","ScreenReaderLabel","CorsOriginErrorScreen","corsUrl","reload","StudioErrorBoundary","handleResetError","useHotModuleReload","ErrorBoundary","onCatch","SearchFullscreenPortalCard","NavbarContext","onSearchFullscreenOpenChange","searchFullscreenOpen","searchFullscreenPortalEl","StudioLayout","routerState","activeToolName","tool","activeTool","setSearchFullscreenOpen","setSearchFullscreenPortalEl","documentTitle","mainTitle","handleSearchFullscreenOpenChange","navbarContextValue","Navbar","useNavbarComponent","RouteScope","scope","Suspense","fallback","LoadingTool","Google","clipPath","GitHub","Saml","LoginProviderLogo","isSaml","logoName","SanityMonogram","AvatarBox","avatar","UserMenu","preventOverflow","handleToggleScheme","__legacy","SunIcon","MoonIcon","CogIcon","LeaveIcon","DocumentButton","DisabledButtonWrapper","NewDocumentButton","newDocumentButtonEl","setNewDocumentButtonEl","useTemplatePermissions","templateItems","keyedPermissions","hasNewDocumentOptions","canCreateDocument","handleLinkClick","ComposeIcon","onClickOutside","dot","StatusButton","statusTone","showDot","AvatarCard","PresenceMenuItem","menuItemElement","setMenuItemElement","lastActiveLocation","locations","hasLink","setAttribute","removeAttribute","MAX_AVATARS","FooterStack","PresenceMenu","collapse","useGlobalPresence","hasPresence","focusedId","setFocusedId","handleClearFocusedItem","UsersIcon","Backdrop","InnerCard","NavDrawer","closeButtonElement","setCloseButtonElement","innerCardElement","setInnerCardElement","navigation","ToolMenu","useToolMenuComponent","closeSidebar","isSidebarOpen","listStyles","SpaceBox","RootBox","ListBoxOuter","ListBox","ImageCard","$aspectRatio","$lqip","project","getProject","urlBuilder","caption","lqip","PortableTextContent","LABELS","bugfix","feature","ChangelogItem","changeType","ChangelogList","changeItems","isLatest","version","bugfixes","bugFixesDescription","flat","Badge","StickyBox","ChangelogDialog","changelog","currentVersion","dialogProps","latestVersion","changelogWithChangeItems","hasChangelog","showDivider","SANITY_VERSION","sanityModuleVersions","CACHED_LOOKUPS","checkModuleStatus","moduleVersions","getInstalledModules","buildQueryString","hashQuery","request$","installed","versions","pkg","useModuleStatus","moduleStatus$","COMMANDS","ChangelogAccordion","defaultOpen","ChangelogButton","buttonElement","setButtonElement","isUpToDate","PackageIcon","ConfigIssuesButton","isDialogOpen","setDialogOpen","LogoButton","CommandListContext","useCommandList","ContainerFlex","CommandListContainer","setContainerElement","getOperatorDefinition","operatorType","getOperatorInitialValue","buildSearchFilter","filterDefinition","fieldId","operator","generateFilterQuery","fieldDefinitions","validateFilter","resolveFieldPath","getFieldFromFilter","getFilterKey","narrowDocumentTypes","selectedDocumentTypes","filteredDocumentTypes","intersectingDocumentTypes","operatorDef","fieldDef","hasFilterValue","isEscape","isHotkey","MAX_HEIGHT","HiddenOverlay","FilterPopoverWrapper","anchorElement","handleGlobalKeyDown","popoverOffset","usePopoverOffset","returnFocus","calcPopoverOffset","setOffset","handleWindowResize","CommandListProvider","ariaActiveDescendant","ariaChildrenLabel","ariaHeaderLabel","ariaMultiselectable","initialSelectedIndex","itemIndices","itemIndicesSelected","selectedIndexRef","childContainerElement","setChildContainerElement","containerElement","headerInputElement","setHeaderInputElement","pointerOverlayElement","setPointerOverlayElement","activeItemCount","commandListId","virtualListScrollToIndexRef","enableChildContainerPointerEvents","getChildDescendantId","handleAssignSelectedState","selectedIndex","childElements","virtualIndex","childIndex","handleAssignSelectedStateThrottled","handleGetTopIndex","childContainerParentElement","childContainerParentElementTop","childContainerElementTop","setActiveIndex","scrollAlign","virtualListIndex","handleFocusHeaderInputElement","handleChildMouseDown","handleChildMouseEnter","handleSetVirtualListScrollToIndex","scrollToIndex","scrollToAdjacentItem","nextIndex","currentElement","clickableElement","click","handleKeydown","handleMarkContainerAsFocused","handleMarkChildrenAsHovered","mutationObserver","MutationObserver","childList","subtree","focusHeaderInputElement","getTopIndex","onChildMouseDown","onChildMouseEnter","setVirtualListScrollToIndex","SearchHeaderBox","SearchHeaderContentFlex","FilterPopoverContentHeader","autoComplete","CommandListItem","activeIndex","fixedHeight","measure","virtualRow","PointerOverlayDiv","VirtualListBox","VirtualListChildBox","$height","CommandListItems","setVirtualListRef","totalHeight","FilterTitle","FilterIcon","FilterDetails","small","pathTitle","MAX_VISIBLE_TYPES","FilterTooltip","fieldDefinitionDocumentTypeTitles","defType","fieldDefinitionDescription","descriptions","uniqueDescriptions","truncateString","MenuItemFilter","tooltipVisible","setTooltipVisible","dispatch","isAlreadyActive","timeoutRef","MenuItemHeader","AddFilterVirtualList","menuItems","virtualList","getTotalSize","getVirtualItems","measureElement","useVirtualizer","estimateSize","menuItem","getScrollElement","overscan","createFilterMenuItems","titleFilter","fieldFilters","includesTitleInFieldDefinition","pinnedItems","buildPinnedMenuItems","filterGroup","headerTitle","buildFieldMenuItemsNarrowed","filterItems","sharedFilters","sharesDocumentTypes","sharedItems","groupedItems","groupFilters","includesDocumentTypes","ungroupedPinnedFilters","isPinnedFilterDefWithoutGroup","includesTitleInPinnedFilterDefinition","groupedPinnedFilters","isPinnedFilterDefWithGroup","groupTitle","currentTitle","fieldTitle","AddFilterPopoverContent","setTitleFilter","handleFilterChange","handleFilterClear","filteredMenuItems","isInteractive","AddFilterButton","__unstable_margins","DocumentTypeFilterItem","TypeFilterItem","handleTypeAdd","handleTypeRemove","DocumentTypesVirtualList","filteredItems","virtualItem","ClearButtonBox","DocumentTypesPopoverContent","setTypeFilter","selectedTypes","selectedTypesSnapshot","setSelectedTypesSnapshot","useGetVirtualItems","handleTypesClear","ClearButton","itemsSelected","itemsUnselected","hasSelectedItems","hasUnselectedItems","DocumentTypesButton","CustomBox","$flexShrink","FilterLabel","showContent","ButtonValue","FilterError","OperatorsMenuButton","operatorItems","filterKey","menuOperator","FilterForm","errorParams","setErrorParams","handleCatchError","FilterPopoverContent","CloseButton","CloseCard","ContainerDiv","LabelButton","FilterButton","initialOpen","Filters","lastAddedFilter","isMounted","clearFiltersButtonVisible","lastAddedFilterKey","ClearFiltersButton","Instructions","ControlsIcon","DocumentTypesPill","FilterPillCard","FilterPill","DEFAULT_COMBINED_TYPE_COUNT","RecentSearchItemButton","SearchItemPillsBox","SearchItemQueryBox","CloseButtonDiv","RecentSearchItem","maxVisibleTypePillChars","showFiltersOnClick","recentSearchesStore","hasFilters","hasTypes","updatedRecentSearches","addSearch","recentSearches","removeSearchAtIndex","ClockIcon","MAX_COMBINED_TYPE_COUNT_SMALL","MAX_COMBINED_TYPE_COUNT_LARGE","RecentSearchesVirtualList","recentSearch","RecentSearchesBox","RecentSearches","filtersVisible","handleClearRecentSearchesClick","removeSearch","hasRecentSearches","keyframes","AnimatedSpinnerIcon","SpinnerIcon","FilterBox","SearchHeaderCard","NotificationBadge","SearchHeader","isMountedRef","handleFiltersToggle","handleQueryClear","notificationBadgeVisible","NoResults","SearchError","ORDERINGS","createdAsc","ignoreScore","createdDesc","relevance","customMeasurementLabel","updatedAsc","updatedDesc","MENU_ORDERINGS","SortMenuContentFlex","isSearchDivider","currentOrdering","SortMenu","currentMenuItem","SortIcon","DebugScoreCard","DebugOverlay","data","matchingStories","story","SearchResultsVirtualList","handleResultClick","SearchResultsCard","SearchResultsFlex","SearchResultsInnerFlex","$loading","SearchResults","hasSearchResults","hasNoSearchResults","isSearchHotKey","useSearchHotkeys","SearchDialogBox","SearchDialog","lastActiveIndex","setLastActiveIndex","setOnClose","hasValidTerms","SearchDialogContent","KeyboardShortcutFlex","PlaceholderSearchInputFlex","PlaceholderTextInput","PlaceholderSearchInput","DummyInput","KBD","FiltersCard","ambient","SearchPopoverCard","$position","SearchPopover","disableFocusLock","SearchPopoverContent","SearchField","placeholderElement","setPlaceholderElement","popoverPosition","usePopoverPosition","calcDialogPosition","placeholderRect","setPopoverPosition","RECENT_SEARCHES_KEY","MAX_RECENT_SEARCHES","CURRENT_VERSION","createRecentSearchesStore","lsKey","searchTerm","storedFilters","validStoredFilters","newSearchItem","typeNames","comparator","newRecent","getRecentStoredSearch","getRecentSearchTerms","getRecentSearches","recentString","storedSearchTerms","sanitizeStoredSearch","studioSchema","storedSearch","__recent","searchableTypeNames","filteredSearch","newStoredSearch","generateFieldId","Md5","hashStr","MAX_OBJECT_TRAVERSAL_DEPTH","createFieldDefinitions","searchableDocumentTypeNames","objectTypes","_original","isDocumentObjectDefinition","isObjectDefinition","supportedFieldTypes","getDocumentFieldDefinitions","addFieldDefinitionRecursive","depth","prevFieldPath","prevTitlePath","continueRecursion","isInternalField","existingObject","existingDocument","inlineObject","targetObject","resolveFilterName","documentFields","addFieldDefinitionId","sortFieldDefinitions","isArrayDefinition","isStringDefinition","isStringListDefinition","aTitlePath","bTitlePath","isRecentSearchTerms","rootName","debugWithName","isDebugMode","initialSearchState","pageIndex","hasMore","searchReducer","stripRecent","newFilter","matchedFilter","currentOperator","nextOperator","nextInitialValue","inputComponentChanged","SearchProvider","__debugFieldDefinitions","onCloseRef","currentFilters","previousOrderingRef","previousPageIndexRef","previousTermsRef","completeFilters","handleSetOnClose","orderingChanged","pageIndexChanged","termsChanged","sortLabel","RootLayer","RootCard","LeftFlex","StudioNavbar","useRouterState","rootHref","handleRootClick","useStateLink","Logo","useLogoComponent","drawerOpen","setDrawerOpen","routerStateRef","workspaceNameRef","drawerButtonEl","setDrawerButtonEl","searchOpenButtonEl","setSearchOpenButtonEl","shouldRender","brandingCenter","collapsedPresenceMenu","loginStatus","searchFullscreen","configIssues","formattedName","handleOpenSearchFullscreen","handleCloseSearchFullscreen","handleCloseDrawer","handleOpenDrawer","MenuIcon","borderRight","ToolLink","StateLink","ToolCollapseMenu","collapseMenuEl","setCollapseMenuEl","Link","ToolVerticalMenu","PlugIcon","StudioToolMenu","pickToolMenuComponent","studio","toolMenu","pickNavbarComponent","navbar","pickLayoutComponent","pickLogoComponent","useLayoutComponent","errorChannel","__sanityErrorChannel","ErrorLogger","isKnownError","AuthBoundary","AuthenticateComponent","NotAuthenticatedComponent","loggedIn","setLoggedIn","StudioThemeProvider","__dark","Z_OFFSET","createRouter","toolRoute","route","create","toolParams","router","intents","getOrderedTools","pluginConfig","toolSwitcher","order","keyed","toolIndex","tool1","tool2","toolA","toolB","indexA","indexB","resolveUrlStateWithDefaultTool","orderedTools","defaultTool","makeBackwardsCompatible","resolveDefaultState","urlStateWithDefaultTool","resolveIntentState","currentState","intentState","payload","currentTool","matchingTool","canHandleIntent","getIntentState","toolState","isNotFound","decodeUrlState","rootRouter","decode","createRouterEventStream","maybeHandleIntent","prevEvent","currentEvent","redirectState","encode","maybeRedirectDefaultState","defaultState","routerBasePath","getBasePath","mergeScan","isStateEvent","WorkspaceLoader","setWorkspace","handleNavigate","restOfSources","RouterProvider","onNavigate","WorkspaceLoaderBoundary","ConfigErrorsComponent","Refractor","registerLanguage","bash","javascript","typescript","StudioProvider","unstable_noAuthBoundary","noAuthBoundary","ConditionalAuthBoundary","ToastProvider","Studio","unstable_globalStyles","renderStudio","reactStrictMode","createRoot","StrictMode","unmount","clientOptions","INITIAL","useConnectionState","publishedDocId","docTypeName","pair","documentEvents","eventType","isConnected","mapTo","editOperations","useDocumentOperationEvent","operationEvents","useEditState","editState","skip","SYNCING","isSyncing","NOT_SYNCING","useSyncState","consistencyStatus","isConsistent","useTemplates","FIVE_SECONDS","TWENTY_SECONDS","ONE_MINUTE","ONE_HOUR","formatRelativeTime","timerId","interval","refreshInterval","parsedDate","diffMonths","differenceInMonths","diffYears","differenceInYears","diffWeeks","differenceInWeeks","weekSuffix","diffDays","differenceInDays","daysSuffix","daysSince","diffHours","differenceInHours","hoursSuffix","diffMins","differenceInMinutes","minsSuffix","diffSeconds","differenceInSeconds","secsSuffix","useTools","isValidating","useValidationStatus","useUserViaUserStore","getUser","useUserStore","getUpdatedSnapshot","bufferedDocument","LOCAL","HEAD","toSnapshotEvent","createObservableBufferedDocument","listenerEvent$","actions$","consistency$","BehaviorSubject","rebase$","remoteMutations","commitRequests","createInitialBufferedDocument","initialSnapshot","BufferedDocument","onMutation","mutation","remote","mutations","onRemoteMutation","transactionId","effects","onRebase","edge","nextRemoteMutations","localMutations","onConsistencyChanged","commitHandler","commitArg","currentBufferedDocument$","listenerEvent","commit","snapshotAfterSync$","withLatestFrom","mutationEvent","arrive","Mutation","actionHandler$","emitAction","addMutations","addMutation","snapshot$","remoteSnapshot$","updates$","commitRequest$","createBufferedDocument","prepareDoc","DELETE","createIfNotExists","createOrReplace","mutate","PENDING_START","phase","PENDING_END","isMutationEvent","isMultiTransactionEvent","transactionTotalEvents","allPendingTransactionEventsReceived","listenerEvents","groupedMutations","getPairListener","idPair","effectFormat","fetchInitialDocumentSnapshots","createSnapshotEvent","isBuffering","isMulti","nextBuffer","getDocuments","isMutationEventForDocId","setVersion","commitMutations","mutationParams","resultRev","dataRequest","returnDocuments","skipCrossDatasetReferenceValidation","submitCommitRequest","isBadRequest","failure","success","checkoutPair","listenerEvents$","reconnect$","transactionsPendingEvents$","commits$","commitRequest","keyGen","MEMO","memoizedPair","_typeName","_client","isSnapshotEvent","withSnapshots","snapshots$","snapshotPair","LOCKED","NOT_LOCKED","transactionSyncLock","operationArgs","_ctx","del","tx","transaction","strengthenOnPublish","ifRevisionID","initialDocument","discardChanges","unpublish","omitProps","duplicate","dupeId","fromRevision","historyStore","draftIsConsistent","publishedIsConsistent","maybeObservable","operationImpls","operationName","operationArguments","extraArgs","operation","last","operationCalls$","emitOperation","REQUIRES_CONSISTENCY","listenerCache","getOperationEvents","result$","groups$","requiresConsistency","isConsistent$","AUTOCOMMIT_INTERVAL","autoCommit$","throttleTime","asyncScheduler","remoteSnapshots","INITIAL_VALIDATION_STATUS","findReferenceIds","reduceJSON","EMPTY_VALIDATION","listenDocumentExists","DOC_UPDATE_DELAY","REF_UPDATE_DELAY","document$","referenceIds$","referenceExistence$","id$","distinct","bufferSize","getDocumentExists","referenceExistence","referenceDocumentUpdates$","exhaustMapWithTrailing","revision","validateDocumentObservable","validationMarkers","createOperationGuard","opName","GUARDED","createEmitter","executeArgs","createOperationsAPI","operationResults$","operationArgs$","operations$","filterResponse","isWelcomeEvent","listenQuery","fetchQuery","listenerQuery","fetchOnce$","mutationAndReconnect$","isRelevantEvent","transitions","transition","exhaustMapToWithTrailing","resolveTypeForDocument","specifiedType","ALLOWED_REF_PROPS","REQUIRED_TEMPLATE_PROPS","quote","validateTemplates","idMap","missing","param","validateParameter","dupeIndex","dupe","validateInitialObjectValue","contextError","validateValue","parentIsArray","validateReference","parameter","disallowed","deepAssign","sourceVal","targetVal","isBuilder","resolveValue","initialValueOpt","resolvedValue","DEFAULT_MAX_RECURSION_DEPTH","getItemType","arrayType","maxDepth","resolveInitialObjectValue","resolveInitialArrayValue","initialArray","initialItem","initialObject","fieldValues","initialFieldValue","merged","maybeSerialize","prepareTemplates","initialValueTemplates","serialized","defaultTemplateForType","defaultTemplatesForSchema","LOADING_MSG","getInitialValueStream","templateName","isResolving","initialValueWithParams$","templateParams","resolveError","getIdPairFromPublished","createDocumentStore","caches","useDocumentType","isResolved","SYNC_RESOLVED_STATE","resolvedState","setDocumentType","documentValues$","useInitialValue","templateParamsRaw","useInitialValueResolverContext","defaultValue","initialValueOptions","initialValueMsg$","initialValueContext","getSchemaType","getPairPermissions","grantsStore","effectiveVersion","effectiveVersionType","checkDocumentPermission","getDocumentPairPermissions","pairPermissions","permissionResults","permissionResult","useDocumentPairPermissionsFromHookFactory","overrideClient","overrideSchema","overrideGrantsStore","defaultClient","defaultSchema","defaultGrantsStore","useGrantsStore","getDocumentValuePermissions","useDocumentValuePermissionsFromHookFactory","useDocumentValuePermissions","getTemplatePermissions","resolvedInitialValue","promise","useTemplatePermissionsFromHookFactory","DEBUG_PREFIX","hashchange$","debugParams$","debugRolesParam$","administrator","developer","contributor","viewer","requiresApproval","restricted","DEBUG_ROLE_GRANTS_MAP","grants.administrator","grants.editor","grants.developer","grants.contributor","grants.viewer","grants.restricted","grants.requiresApproval","write","debugGrants$","roleName","getDatasetGrants","grants","getParams","PARSED_FILTERS_MEMO","matchesFilter","evaluate","createGrantsStore","datasetGrants$","currentUserDatasetGrants","debugGrants","refCountDelay","grantsPermissionOn","matchingGrants","grant","foundMatch","getJsonStream","headers","Authorization","credentials","getStream","cancelled","ReadableStream","controller","getReader","decoder","TextDecoder","processResult","done","close","enqueue","stream","emptyVersionState","hasAttrs","rev","aligned","startFromSnapshot","Aligner","timeline","earliestTransactionId","_states","appendRemoteSnapshotEvent","_maybeInvalidateHistory","_apply","addRemoteMutation","prependHistoryEvent","acceptsHistory","_alignAtIndex","addTranslogEntry","didReachEarliestEntry","isAligned","_isComplete","currentDocument","mutEvt","applyPatch","apply","reset","Reconstruction","same","endAttributes","getAttrs","endDocument","_endDocument","replayBackwardsUntil","startAttributes","startDocument","_startDocument","replayBackwardsBetween","calculateDiff","TRANSLOG_ENTRY_LIMIT","TimelineController","selectionState","_fetchMore","_fetchAtLeast","_isRunning","_didErr","_since","_sinceTime","_revTime","_aligner","markChange","clearRange","setRange","since","setRevTime","setSinceTime","targetRev","lastChunk","setReconstruction","setLoadMore","sinceTime","revTime","realRevChunk","onOlderRevision","changesPanelActive","findRangeForNewRev","revTimeId","isLatestChunk","createTimeId","sinceChunk","findRangeForNewSince","revChunk","parseTimeId","findLastPublishedBefore","sinceAttributes","_reconstruction","displayed","currentDiff","currentObjectDiff","handleRemoteMutation","shouldFetchMore","reachedEarliestEntry","chunkCount","fetchMoreTransactions","clientConfig","queryParams","tid","transactionsUrl","updateChunks","createObservableController","innerController","historyController","isSameAnnotation","ArrayContentWrapper","extractor","at","wrapValue","annotationAt","meta","metas","fromMeta","ObjectContentWrapper","StringContentWrapper","sliceAnnotation","lst","subStart","subEnd","extractAnnotationForFromInput","firstChunk","annotationForTransactionIndex","transactionIndex","extractAnnotationForToInput","chunkIdx","transactionByIndex","chunkByTransactionIndex","diffValue","fromRaw","toRaw","endMeta","startMeta","diffInput","TwoEndedArray","_postive","_negative","addToEnd","elem","addToBeginning","mergeAtEnd","merger","lastIdx","mergeAtBeginning","firstIdx","removeFromEnd","canMergeEdit","CHUNK_WINDOW","isWithinMergeWindow","mergeChunk","draftState","combineState","publishedState","endTimestamp","startTimestamp","authors","getChunkState","effect","modified","isDeletePatch","getChunkType","draftEffect","publishedEffect","chunkFromTransaction","modifiedDraft","modifiedPublished","draftDeleted","publishedDeleted","Timeline","_transactions","_chunks","_possiblePendingTransactions","enableTrace","_trace","__sanityTimelineTrace","mapChunks","mapper","_recreateTransactionsFrom","pending","_invalidateTransactionFrom","_removeInvalidatedChunks","_addChunksFromTransactions","_createInitialChunk","nextTransactionToChunk","firstTransactionChunked","firstTx","initialChunk","idSegments","timestampStr","chunkId","currentChunk","startChunkIdx","revert","initialDoc","finalDoc","draftValue","incremental","publishedValue","initialAttributes","preDraftValue","prePublishedValue","didHaveDriaft","getType","haveDraft","havePublished","rebaseValue","finalAttributes","documentRevisionCache","getHistory","getDocumentAtRevision","getTransactions","includeIdentifiedDocumentsOnly","transactions","getAllRefIds","jsonReduce","jsonMap","mapFn","mappedValue","mapRefNodes","removeMissingReferences","existingIds","refNode","documentExists","targetDocumentId","documentAtRevision","existingIdsQuery","restoredDraft","createHistoryStore","getTimeline","getTimelineController","USERIDS","PATHS","mock$","sample","handleIncomingMessage","session","createBifurTransport","incomingEvents$","dispatchMessage","KEY","generate","nanoid","getSessionId","sessionStorage","setSessionId","SESSION_ID","__tmp_wrap_presenceStore","connectionStatusStore","presenceEvents$","sendMessage","currentLocation$","locationChange$","setLocation","nextLocation","reportLocations","requestRollCall","rollCallRequests$","REPORT_MIN_INTERVAL","reportLocationInterval$","reportLocation$","auditTime","myRollCall$","connectionChange$","statusType","debugPresenceParam$","useMock$","switchMapTo","debugIntrospect$","syncEvent$","stateEventToSession","stateEvent","states$","allSessions$","keyedSessions","sessions","userIds","sess","getUsers","users","userSessionPairHasUser","globalPresence$","userAndSessions","debugIntrospect","userAndSession","isCurrent","curr","setPresence","presenceStore","usePresenceStore","createProjectStore","getDatasets","useProject","projectStore","useProjectStore","project$","useProjectDatasets","tryParse","defValue","localStorageBackend","DB","memoryBackend","testKey","resolveBackend","createSettingsStore","storageBackend","set$","prefixNamespace","ns","forNamespace","forKey","namespacedKey","createUserStore","userLoader","DataLoader","batchScheduleFn","cb","raf","userFromCurrentUser","profileImage","prime","load","loadMany","useHistoryStore","useConnectionStatusStore","useSettingsStore","settingsStore","whitespace","LEGACY_TO_UI_AVATAR_SIZES","medium","large","nameToInitials","fullName","namesArray","withTooltip","TooltipUserAvatar","StaticUserAvatar","UserAvatarLoader","setImageLoadError","Avatar","arrowPosition","initials","onImageLoadError","loadedProps","withPropsStream","connect","_WithReferringDocuments","receivedProps$","receivedProps","docId","docs","actionIds","counter","getHookId","actionHook","useShallowCompareMemoize","useShallowCompareEffect","HookStateContainer","hook","onNext","onRequestUpdate","hookState","requestIdleCallbackShim","didTimeout","timeRemaining","cancelIdleCallbackShim","_requestIdleCallback","requestIdleCallback","_cancelIdleCallback","cancelIdleCallback","throttleOptions","GetHookCollectionState","hooks","statesRef","tickId","setTick","setKeys","ricHandle","handleRequestUpdate","handleRequestUpdateThrottled","handleNext","handleReset","currentKeys","hookIds","states","containerRef","focusFirstDescendant","PREVIEW_MEDIA_SIZE","PREVIEW_ICON_SIZE","MediaWrapper","$dimensions","$layout","$radius","$responsive","iconSize","Media","responsive","mediaString","renderPreviewMedia","renderPreviewNode","fallbackNode","DEFAULT_MEDIA_DIMENSIONS","TitleSkeleton","SubtitleSkeleton","rootClassName","classNames","hasSubtitle","statusNode","StatusBox","MediaSkeleton","DescriptionSkeleton","DescriptionText","maxLines","mediaDimensions","SIZE","BgCircle","ProgressCircle","CircularProgress","circ","strokeDasharray","strokeDashoffset","Bar","MediaFlex","ProgressFlex","TooltipContentStack","withRadius","STYLES_PADDER","HeaderFlex","$ratio","getRatio","RootSpan","MediaSpan","TextSpan","textFont","textSize","DEFAULT_MEDIA_DIMENSION","TemplatePreview","MUTATION_ATTRIBUTE_FILTER","FOCUSABLE","getFocusableElements","initialFocus","loop","pause","focusedIndex","setFocusedIndex","focusableElements","setFocusableElements","focusableLen","lastFocusableIndex","nextKey","prevKey","handleSetElements","els","focusPrev","focusNext","shiftKey","mo","attributeFilter","onfocus","onblur","initialIndex","_","defaults","navbarPopover","navbarDialog","pane","paneHeader","paneFooter","paneResizer","movingItem","drawershade","drawer","dropdown","navbarFixed","fullscreenEdit","popoverBackground","modalBackground","spinner","ZIndexContext","useZIndex","zOffsetKey","MENU_ITEM_TONES","menuItemTone","ValidationList","isValidationErrorMarker","isValidationWarningMarker","isValidationInfoMarker","resolvePathTitle","_error","_warning","_info","ZIndexProvider","TelephoneInput","setAtPath","currentTree","getExpandOperations","schemaField","selectedGroupName","inSelectedGroup","castArray","expandArrayPath","foundMember","resolveConditionalProperty","property","MAX_FIELD_DEPTH","AUTO_COLLAPSE_DEPTH","getPrimitiveItemType","getCollapsedWithDefaults","ALL_FIELDS_GROUP","isFieldEnabledByGroupFilter","groupsConfig","currentGroup","isAcceptedObjectValue","isValidArrayOfObjectsValue","isValidArrayOfPrimitivesValue","everyItemIsObject","findDuplicateKeyEntries","seenKeys","everyItemHasKey","isChangedValue","comparisonValue","_isEqual","prepareFieldMember","_k","_l","_m","_n","_o","_p","_q","_r","pathFor","fieldLevel","parentComparisonValue","fieldComparisonValue","fieldGroupState","scopedCollapsedPaths","scopedCollapsedFieldsets","inputState","prepareObjectInputState","openPath","defaultCollapsedState","duplicateKeyEntries","scopedCollapsedFieldSets","fieldState","prepareArrayOfObjectsInputState","prepareArrayOfPrimitivesInputState","conditionalPropertyContext","preparePrimitiveInputState","enableHiddenCheck","schemaTypeGroupConfig","defaultGroupName","groupHidden","selectedGroup","parentProps","normalizedSchemaMembers","fieldsetFieldNames","fieldsetHidden","fieldsetMembers","fieldStateWithReadOnly","hasFieldGroups","_groups","prepareArrayOfPrimitivesMember","prepareArrayOfObjectsMember","itemLevel","itemState","itemComparisonValue","prepareFormState","useFormState","toMutationPatches","toMutationPatch","fromMutationPatches","toFormBuilderPatches","notIn","matchPath","TransformPatches","OnChangeProvider","callbacks","patchEvent","transformedPatches","_buildTints","mid","mix","_toHex","green","parseToRgb","rgb","_isDark","getLuminance","_multiply","parseColor","rgbToHex","_screen","screen","NEUTRAL_TONES","buildColor","legacyPalette","legacyTones","createColorTheme","stateTones","blend","skeletonFrom","umbra","black","penumbra","skeleton","buttonTones","blendInvert","defaultTints","isNeutral","accent","syntax","mainShade","secondaryShade","atrule","attrName","attrValue","attribute","builtin","cdata","class","orange","cyan","comment","constant","doctype","entity","function","hexcode","important","inserted","keyword","magenta","prolog","pseudoClass","pseudoElement","punctuation","regex","symbol","variable","buildFonts","cssCustomProperties","buildLegacyPalette","defaultButton","danger","mainNavigation","buildLegacyTones","transparent","buildLegacyTheme","partialLegacyTheme","legacyTheme","resolveLegacyTheme","defaultCustomProperties","white","defaultTheme"],"mappings":"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"}